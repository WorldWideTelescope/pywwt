language: c

os:
  - linux

sudo: false

notifications:
  email: false

env:
  global:
    - SETUP_XVFB=True
    - CONDA_DEPENDENCIES='nodejs'
  matrix:
    - PYTHON_VERSION=3.6 PYQT5_VERSION=5.7
    - PYTHON_VERSION=3.6 PYQT5_VERSION=5.8
    - PYTHON_VERSION=3.6 PYQT5_VERSION=5.9
    - PYTHON_VERSION=3.6 PYQT5_VERSION=5.10
    - PYTHON_VERSION=3.6 PYQT5_VERSION=5.11
    - PYTHON_VERSION=3.6 PYQT5_VERSION=5.12
    - PYTHON_VERSION=3.6 PYQT5_VERSION=5.13

install:
  - git clone git://github.com/astropy/ci-helpers.git
  - source ci-helpers/travis/setup_conda.sh

script:
  - pip install numpy pyopengl
  - pip install "PyQt5<$PYQT5_VERSION"
  - pip install -e .[test]
  - pytest pywwt --cov pywwt -vs

after_success:
  - codecov
