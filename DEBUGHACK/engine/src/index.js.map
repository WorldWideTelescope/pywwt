{"version":3,"file":"index.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;;;;;;;;;;ACVA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAE+C;AAClB;AACY;AAC8D;AAC/C;AACb;AACI;;;AAG/C;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,gEAAS;AAC5C,kCAAkC,+DAAQ;AAC1C,8CAA8C,sEAAe;AAC7D,sCAAsC,mEAAY;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sCAAsC;;AAEtC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA,wBAAwB,6CAAM;AAC9B,wBAAwB,6CAAM;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,4CAAK;AACjC;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,4CAAK;AACjC;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,sBAAsB,wDAAW;AACjC,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAQ;AACpB;AACA;AACA;AACA;AACA,yBAAyB,kDAAQ;AACjC,8BAA8B,kDAAQ;AACtC,8BAA8B,kDAAQ;AACtC;AACA;AACA;AACA;AACA,gCAAgC,eAAe;AAC/C;AACA;AACA,oCAAoC,kDAAQ;AAC5C;AACA;AACA;AACA;AACA,oCAAoC,6BAA6B;AACjE,gHAAgH,4DAAK;AACrH;AACA;AACA;AACA;AACA;AACA,8BAA8B,kDAAQ;AACtC;AACA,mGAAmG,4DAAK;AACxG;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA,wBAAwB,6CAAM;AAC9B,wBAAwB,6CAAM;AAC9B;AACA;;AAEA;AACA;AACA;AACA,4BAA4B,wDAAW;AACvC,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,4CAAK;AACjC;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,4CAAK;AACjC;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oCAAoC,iCAAiC;AACrE,gHAAgH,4DAAK;AACrH;AACA,gIAAgI,4DAAK;AACrI;AACA;AACA;AACA;AACA,kCAAkC,iEAAW;AAC7C,oCAAoC,oBAAoB;AACxD,iLAAiL,4DAAK;AACtL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA,wBAAwB,6CAAM;AAC9B;AACA;;AAEA;AACA;AACA;AACA,4BAA4B,wDAAW;AACvC,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,4CAAK;AACjC;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,iCAAiC;AACrE,gHAAgH,4DAAK;AACrH;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxgBZ;AACA;;AAEA;;AAE+C;AAClB;AACI;AAC6B;AACrB;AACa;AACA;AAC0C;AAC5B;AACf;AACI;AACX;;;AAG9C;;AAEA,qBAAqB,+DAAI;AACzB,qBAAqB,yDAAG;AACxB,sBAAsB,qFAAyB;AAC/C;;;AAGA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA,sBAAsB,yDAAG;AACzB,wBAAwB,+DAAW;AACnC;AACA;AACA;AACA,kBAAkB,wDAAO;AACzB,kBAAkB,wDAAO;AACzB,kBAAkB,wDAAO;AACzB,sBAAsB,+DAAW;AACjC,gBAAgB,uEAAE;AAClB,wBAAwB,+DAAW;AACnC;AACA;AACA;AACA;AACA,yBAAyB,yDAAG;AAC5B,0BAA0B,8EAAkB;AAC5C,4BAA4B,+DAAW;AACvC;AACA;AACA,yBAAyB,6DAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,kDAAE,UAAU,sCAAE,iBAAiB,sCAAE;AAC5C;;AAEA;AACA,gBAAgB,uEAAE,aAAa,+DAAW;AAC1C;AACA;;AAEA;AACA,gBAAgB,uEAAE;AAClB;AACA;;AAEA;AACA,mBAAmB,uEAAE;AACrB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,6EAAiB;AAC9C;AACA;AACA,qBAAqB,0CAAI,eAAe,0CAAI;AAC5C;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;ACvNZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACc;AAC5B;;;AAGlC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEA;;;AAGA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,8DAAG;AAC1B;AACA,oBAAoB,6BAA6B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,8DAAG;AAC5B;AACA;AACA;AACA;AACA;AACA,uBAAuB,2CAAM;AAC7B,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,WAAW,6DAAE;AACb,mBAAmB,6DAAE;AACrB;AACA;AACA;AACA;;AAEA;AACA,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd;AACA;AACA;AACA;AACA;AACA,yBAAyB,8DAAG;AAC5B,mBAAmB,6DAAE;AACrB,mBAAmB,6DAAE;AACrB;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;ACvJZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;;;AAGpD;;AAEO;;AAEP;AACA,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf;AACA;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf;AACA;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;;AAEA;AACA,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;AC1FZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;;;AAGhD;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;AClNZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE8B;AACkB;;;AAGhD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd,oBAAoB,sCAAE;AACtB;AACA,WAAW,sCAAE,mCAAmC,sCAAE;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,sCAAE;AACjB;AACA;AACA,eAAe,sCAAE;AACjB;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,sCAAE;AACjB,KAAK;;AAEL;AACA;AACA,eAAe,sCAAE;AACjB,KAAK;;AAEL;AACA;AACA,eAAe,sCAAE;AACjB,KAAK;;AAEL;AACA;AACA,eAAe,sCAAE;AACjB,KAAK;;AAEL;AACA;AACA,eAAe,sCAAE;AACjB,KAAK;;AAEL;AACA;AACA,eAAe,sCAAE;AACjB,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB;AACA;AACA,wBAAwB,sCAAE;AAC1B,gCAAgC,sCAAE;AAClC;AACA;AACA;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB,gBAAgB,sCAAE;AAClB,gBAAgB,sCAAE;AAClB,6BAA6B,sCAAE;AAC/B,cAAc,sCAAE;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sCAAE;AACjB,iBAAiB,sCAAE;AACnB;AACA;AACA,KAAK;;AAEL;AACA,gBAAgB,sCAAE;AAClB,KAAK;;AAEL;AACA,mBAAmB,sCAAE;AACrB;AACA,KAAK;;AAEL;AACA;AACA,mBAAmB,sCAAE;AACrB,oBAAoB,sCAAE;AACtB;AACA,KAAK;;AAEL;AACA;AACA,mBAAmB,sCAAE;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,mBAAmB,sCAAE;AACrB,oBAAoB,sCAAE;AACtB,kBAAkB,sCAAE;AACpB,mBAAmB,sCAAE;AACrB,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;AC5SZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AAClB;AACC;;;AAG/B;;AAEA;;;AAGA;;AAEO;;AAEP;AACA,eAAe,wCAAE,cAAc,wCAAE;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;ACnEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;;;AAGpD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE,MAAM,6DAAE;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE,MAAM,6DAAE;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;AC/QZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;;;AAGpD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAAE;AAClB,oBAAoB,6DAAE;AACtB;AACA,UAAU,6DAAE,KAAK,6DAAE;AACnB;AACA,SAAS,6DAAE,KAAK,6DAAE;AAClB;AACA,QAAQ,6DAAE,KAAK,6DAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAAE;AAClB;AACA;AACA;AACA;AACA;AACA,oBAAoB,6DAAE,MAAM,6DAAE;AAC9B;AACA;AACA,iBAAiB,6DAAE;AACnB,gBAAgB,6DAAE;AAClB;AACA;;AAEA;AACA,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd,gBAAgB,6DAAE;AAClB,oBAAoB,6DAAE;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAAE;AAClB;AACA;AACA;AACA;AACA,gBAAgB,6DAAE,WAAW,6DAAE;AAC/B,oBAAoB,6DAAE,MAAM,6DAAE;AAC9B;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;AC9GZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;;;AAGpD;;AAEO;;AAEP;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjjBZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACV;AACmB;AACnB;AACJ;AACU;AACV;AACQ;AACJ;AACF;AACM;AACF;AACA;AACE;AACJ;AACA;AACE;AACE;;;AAG1C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP,iDAAiD,8DAAG;AACpD,iDAAiD,8DAAG;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,+CAAQ;AACrB,aAAa,+CAAQ;AACrB,aAAa,+CAAQ;AACrB,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,2CAAM;AAC1B,oBAAoB,2CAAM;AAC1B,oBAAoB,+CAAQ;AAC5B;AACA;AACA,oBAAoB,mDAAU;AAC9B,oBAAoB,mDAAU;AAC9B,oBAAoB,mDAAU;AAC9B;AACA;AACA,oBAAoB,+CAAQ;AAC5B,oBAAoB,+CAAQ;AAC5B,oBAAoB,+CAAQ;AAC5B;AACA;AACA,oBAAoB,6CAAO;AAC3B,oBAAoB,6CAAO;AAC3B,oBAAoB,6CAAO;AAC3B;AACA;AACA,oBAAoB,oDAAU;AAC9B,oBAAoB,oDAAU;AAC9B,oBAAoB,oDAAU;AAC9B;AACA;AACA,oBAAoB,kDAAS;AAC7B,oBAAoB,kDAAS;AAC7B,oBAAoB,kDAAS;AAC7B;AACA;AACA,oBAAoB,kDAAS;AAC7B,oBAAoB,kDAAS;AAC7B,oBAAoB,kDAAS;AAC7B;AACA;AACA,oBAAoB,oDAAU;AAC9B,oBAAoB,oDAAU;AAC9B,oBAAoB,oDAAU;AAC9B;AACA;AACA,oBAAoB,gDAAQ;AAC5B,oBAAoB,gDAAQ;AAC5B,oBAAoB,gDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,6DAAE;AACzB,uBAAuB,6DAAE;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb,WAAW,6DAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,6DAAE;AAC3C;AACA,0CAA0C,6DAAE,MAAM,6DAAE;AACpD;AACA,qBAAqB,gDAAG;AACxB;AACA;AACA,oBAAoB,2CAAM;AAC1B,0CAA0C,2CAAM;AAChD;AACA,8BAA8B,qDAAW;AACzC,kBAAkB,qDAAW;AAC7B,2CAA2C,6DAAE;AAC7C,sBAAsB,6DAAE;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,6DAAE;AAClB,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAS;AACrB,QAAQ,6DAAE;AACV;AACA;AACA;AACA;AACA;AACA,WAAW,mDAAQ;AACnB;;AAEA;AACA,gBAAgB,6DAAE;AAClB,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAS;AACrB,QAAQ,6DAAE;AACV;AACA;AACA;AACA;AACA;AACA,WAAW,mDAAQ;AACnB;;AAEA;AACA,kBAAkB,qDAAW;AAC7B;AACA;AACA,cAAc,6DAAE;AAChB,gBAAgB,6DAAE;AAClB,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2CAAM;AACzB,oBAAoB,OAAO;AAC3B;AACA,gBAAgB,kDAAS;AACzB,YAAY,6DAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,6DAAE,KAAK,6DAAE;AAC7D;AACA,mDAAmD,6DAAE;AACrD;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAAE;AAClB;AACA,gBAAgB,6DAAE;AAClB;AACA;AACA,uCAAuC,6DAAE;AACzC;AACA;AACA;AACA;AACA;AACA,6CAA6C,6DAAE;AAC/C;AACA;AACA;AACA;AACA;AACA,iCAAiC,6DAAE;AACnC;AACA,iCAAiC,6DAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA,mBAAmB,8CAAI,oBAAoB,8CAAI;AAC/C;;AAEA;AACA,iBAAiB,6DAAE;AACnB;AACA;AACA,mBAAmB,8CAAI,0BAA0B,8CAAI;AACrD;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;ACzeZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACR;AACV;;;AAGlC;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,6DAAE;AACf,kBAAkB,2CAAM;AACxB,iBAAiB,2CAAM;AACvB,kBAAkB,qDAAW;AAC7B,qBAAqB,6DAAE;AACvB,cAAc,6DAAE;AAChB,iDAAiD,6DAAE,aAAa,qDAAW;AAC3E;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;ACrDZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACS;;;AAGzD;;AAEO;;AAEP;AACA;AACA;AACA,YAAY,6DAAE;AACd,gBAAgB,6DAAE;AAClB,eAAe,6DAAE;AACjB;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA,YAAY,6DAAE;AACd,gBAAgB,6DAAE;AAClB;AACA,WAAW,6DAAE;AACb;;AAEA;AACA,qBAAqB,8DAAG;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,8DAAG;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAE,KAAK,6DAAE;AACrB;AACA,WAAW,6DAAE,KAAK,6DAAE;AACpB;AACA,UAAU,6DAAE,KAAK,6DAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,8DAAG;AACxB;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;ACjGZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACS;AACvB;AACI;AACI;AACJ;AACc;;;AAGpD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,8CAA8C,8DAAG;AACjD,0CAA0C,8DAAG;AAC7C,8CAA8C,8DAAG;AACjD;AACA;AACA;AACA;AACA,oDAAoD,8DAAG;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA,kBAAkB,2CAAM;AACxB,qBAAqB,6DAAE;AACvB,eAAe,2CAAM;AACrB,kBAAkB,6DAAE;AACpB,YAAY,+CAAQ;AACpB;AACA;AACA,+BAA+B,+CAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAU;AACtB,eAAe,6DAAE;AACjB,YAAY,mDAAU;AACtB,eAAe,6DAAE;AACjB,YAAY,mDAAU;AACtB;AACA;AACA;AACA;AACA,+BAA+B,+CAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,mDAAU;AAClB,WAAW,6DAAE;AACb,QAAQ,mDAAU;AAClB,WAAW,6DAAE;AACb,QAAQ,mDAAU;AAClB;AACA;AACA;AACA;AACA,6BAA6B,+CAAG;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B,+CAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAU;AACtB,eAAe,6DAAE;AACjB,YAAY,mDAAU;AACtB,eAAe,6DAAE;AACjB,YAAY,mDAAU;AACtB;AACA;AACA;AACA;AACA,0BAA0B,+CAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAAE;AAClB;AACA,gBAAgB,6DAAE;AAClB;AACA,gBAAgB,6DAAE;AAClB;AACA,gBAAgB,6DAAE;AAClB,cAAc,6DAAE,KAAK,6DAAE;AACvB,cAAc,6DAAE,KAAK,6DAAE;AACvB,cAAc,6DAAE,KAAK,6DAAE;AACvB,cAAc,6DAAE,KAAK,6DAAE;AACvB;AACA,gBAAgB,6DAAE;AAClB;AACA,gBAAgB,6DAAE;AAClB;AACA,gBAAgB,6DAAE;AAClB;AACA,gBAAgB,6DAAE;AAClB,mCAAmC,6DAAE,oDAAoD,6DAAE;AAC3F,oBAAoB,6DAAE;AACtB,cAAc,6DAAE;AAChB,YAAY,6DAAE;AACd,gBAAgB,6DAAE;AAClB,aAAa,6DAAE;AACf;AACA,45BAA45B,6DAAE;AAC95B,yoBAAyoB,6DAAE;AAC3oB,0VAA0V,6DAAE,++BAA++B,6DAAE,4JAA4J,6DAAE,yQAAyQ,6DAAE;AACtvD,uCAAuC,6DAAE;AACzC,uCAAuC,6DAAE;AACzC,aAAa,6DAAE;AACf,uCAAuC,6DAAE;AACzC,uCAAuC,6DAAE;AACzC,aAAa,6DAAE;AACf,uCAAuC,6DAAE;AACzC,uCAAuC,6DAAE;AACzC,aAAa,6DAAE;AACf,uCAAuC,6DAAE;AACzC,uCAAuC,6DAAE;AACzC,aAAa,6DAAE;AACf;AACA,4CAA4C,6DAAE;AAC9C;AACA,4CAA4C,6DAAE;AAC9C;AACA,4CAA4C,6DAAE;AAC9C;AACA,4CAA4C,6DAAE;AAC9C;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAE;AACd;AACA,2CAA2C,6DAAE,MAAM,6DAAE;AACrD;AACA,2CAA2C,6DAAE,MAAM,6DAAE;AACrD;AACA,2CAA2C,6DAAE,MAAM,6DAAE;AACrD;AACA,2CAA2C,6DAAE,MAAM,6DAAE;AACrD;AACA;AACA;AACA,eAAe,6DAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAAE,KAAK,6DAAG;AAC1B,YAAY,6DAAE,KAAK,6DAAG;AACtB;AACA;AACA;AACA,oBAAoB,8DAAG;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;ACnYZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;;;AAGpD;;AAEO;;AAEP;AACA,2BAA2B,6DAAE;AAC7B;AACA;AACA;;AAEA;AACA,2BAA2B,6DAAE;AAC7B;AACA;AACA;;AAEA;AACA,2BAA2B,6DAAE;AAC7B;AACA;AACA;;AAEA;AACA,2BAA2B,6DAAE;AAC7B;AACA;AACA;;AAEA;AACA,4BAA4B,6DAAE;AAC9B,4BAA4B,6DAAE;AAC9B,6BAA6B,6DAAE;AAC/B,6BAA6B,6DAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;AChFZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACV;AACc;;;AAGpD;;AAEO;;AAEP;AACA,WAAW,6DAAE,MAAM,6DAAE;AACrB;;AAEA;AACA,QAAQ,6DAAE;AACV,QAAQ,6DAAE;AACV,SAAS,6DAAE;AACX,WAAW,6DAAE,MAAM,6DAAE;AACrB;;AAEA;AACA,QAAQ,6DAAE;AACV,QAAQ,6DAAE;AACV;AACA,WAAW,6DAAE,MAAM,6DAAE;AACrB;;AAEA;AACA,iBAAiB,6DAAE;AACnB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,8CAAI;AAC1B;;AAEA;AACA,oBAAoB,8CAAI;AACxB;;AAEA;AACA,sBAAsB,8CAAI;AAC1B;;AAEA;AACA,uBAAuB,8CAAI;AAC3B;;AAEA;AACA,QAAQ,6DAAE;AACV;AACA,uBAAuB,8CAAI;AAC3B;;AAEA;AACA,uBAAuB,8CAAI;AAC3B;;AAEA;AACA,uBAAuB,8CAAI;AAC3B;;AAEA;AACA;AACA;AACA,uBAAuB,8CAAI;AAC3B;;AAEA;AACA;AACA;AACA,sBAAsB,8CAAI;AAC1B;;AAEA;AACA,uBAAuB,8CAAI;AAC3B;;AAEA;AACA,sBAAsB,8CAAI;AAC1B;;AAEA;AACA,QAAQ,6DAAE;AACV;AACA,uBAAuB,8CAAI;AAC3B;;AAEA;AACA,uBAAuB,8CAAI;AAC3B;;AAEA;AACA,uBAAuB,8CAAI;AAC3B;;AAEA;AACA,oBAAoB,8CAAI;AACxB;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;AChIZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;;;AAGhD;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;ACtKZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACnB;;;AAGjC;;AAEA,qCAAqC,0CAAG,sBAAsB,0CAAG,uCAAuC,0CAAG,kCAAkC,0CAAG,oCAAoC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG;AACj/D,qCAAqC,0CAAG,yBAAyB,0CAAG,oCAAoC,0CAAG,kCAAkC,0CAAG,kCAAkC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,4BAA4B,0CAAG,+BAA+B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG;AAC3yD,qCAAqC,0CAAG,+BAA+B,0CAAG,mBAAmB,0CAAG,iCAAiC,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,qBAAqB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG;AAC5kD,qCAAqC,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,wBAAwB,0CAAG,gBAAgB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,qBAAqB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG;AAC9hC,qCAAqC,0CAAG,yBAAyB,0CAAG,qBAAqB,0CAAG,0BAA0B,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,oBAAoB,0CAAG,qBAAqB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG;AAC5f,qCAAqC,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG;AAC7I,qCAAqC,0CAAG,uCAAuC,0CAAG,oBAAoB,0CAAG,oCAAoC,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG;AACnzB,qCAAqC,0CAAG,oCAAoC,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,uBAAuB,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,yBAAyB,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG;AAC1oB,qCAAqC,0CAAG,6BAA6B,0CAAG,sBAAsB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG;AACpZ,qCAAqC,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,uBAAuB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG;AACnQ,qCAAqC,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,eAAe,0CAAG,uBAAuB,0CAAG;AAClK,qCAAqC,0CAAG;AACxC,qCAAqC,0CAAG,uBAAuB,0CAAG,yCAAyC,0CAAG,oCAAoC,0CAAG,oCAAoC,0CAAG,oCAAoC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,+BAA+B,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG;AAC7gD,qCAAqC,0CAAG,uCAAuC,0CAAG,kCAAkC,0CAAG,iCAAiC,0CAAG,mBAAmB,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,4BAA4B,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG;AACl1C,qCAAqC,0CAAG,iCAAiC,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,qBAAqB,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG;AACpiC,qCAAqC,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,mBAAmB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG;AAC/wB,qCAAqC,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG;AAC5Z,qCAAqC,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,qBAAqB,0CAAG,wBAAwB,0CAAG;;;;AAIlM;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE,MAAM,6DAAE;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;ACnLZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AAClB;AACsB;;;AAGpD;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA,QAAQ,6DAAE;AACV,aAAa,6DAAE;AACf;AACA;AACA;AACA;AACA;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;ACtEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACnB;;;AAGjC;;AAEA,kCAAkC,0CAAG,uBAAuB,0CAAG,wCAAwC,0CAAG,wCAAwC,0CAAG,mCAAmC,0CAAG,8BAA8B,0CAAG,kCAAkC,0CAAG,iCAAiC,0CAAG,2BAA2B,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,uBAAuB,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,wBAAwB,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,yBAAyB,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG;AAChpE,kCAAkC,0CAAG,0BAA0B,0CAAG,wCAAwC,0CAAG,qCAAqC,0CAAG,mCAAmC,0CAAG,4BAA4B,0CAAG,gCAAgC,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,wBAAwB,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG;AACz1C,kCAAkC,0CAAG,kCAAkC,0CAAG,mBAAmB,0CAAG,kCAAkC,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,oBAAoB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG;AAC/5B,kCAAkC,0CAAG,+BAA+B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,0BAA0B,0CAAG,gBAAgB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG;AACnV,kCAAkC,0CAAG,sBAAsB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,yBAAyB,0CAAG;AACrO,kCAAkC,0CAAG,kBAAkB,0CAAG;AAC1D,kCAAkC,0CAAG,wCAAwC,0CAAG,oCAAoC,0CAAG,oBAAoB,0CAAG,mCAAmC,0CAAG,gCAAgC,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG;AAC3gB,kCAAkC,0CAAG,qCAAqC,0CAAG,yBAAyB,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG;AACrS,kCAAkC,0CAAG,kCAAkC,0CAAG,uBAAuB,0CAAG,4BAA4B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG;AACxN,kCAAkC,0CAAG,4BAA4B,0CAAG,gBAAgB,0CAAG,wBAAwB,0CAAG;AAClH,kCAAkC,0CAAG,gBAAgB,0CAAG,yBAAyB,0CAAG;AACpF,kCAAkC,0CAAG,uBAAuB,0CAAG,0CAA0C,0CAAG,qCAAqC,0CAAG,mCAAmC,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG;AACz6C,kCAAkC,0CAAG,wCAAwC,0CAAG,qCAAqC,0CAAG,mBAAmB,0CAAG,mCAAmC,0CAAG,+BAA+B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG;AACrzB,kCAAkC,0CAAG,kCAAkC,0CAAG,6BAA6B,0CAAG,gCAAgC,0CAAG,4BAA4B,0CAAG,mBAAmB,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG;AAC/U,kCAAkC,0CAAG,+BAA+B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,0BAA0B,0CAAG,kBAAkB,0CAAG;AACxL,kCAAkC,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG;;;AAGzH;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE,MAAM,6DAAE;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;ACpKZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACnB;;;AAGjC;;AAEA,qCAAqC,0CAAG,uBAAuB,0CAAG,4CAA4C,0CAAG,0CAA0C,0CAAG,sCAAsC,0CAAG,uCAAuC,0CAAG,oCAAoC,0CAAG,iCAAiC,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,yBAAyB,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG;AAC9vC,qCAAqC,0CAAG,2BAA2B,0CAAG,yCAAyC,0CAAG,sCAAsC,0CAAG,mCAAmC,0CAAG,oCAAoC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,0BAA0B,0CAAG,uBAAuB,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG;AAC7hB,qCAAqC,0CAAG,mBAAmB,0CAAG,mCAAmC,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG;AACxU,qCAAqC,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,uBAAuB,0CAAG,2BAA2B,0CAAG,gBAAgB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG;AAC9O,qCAAqC,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG;AAC/K,qCAAqC,0CAAG;AACxC,qCAAqC,0CAAG,4CAA4C,0CAAG,yCAAyC,0CAAG,6BAA6B,0CAAG,sCAAsC,0CAAG,uCAAuC,0CAAG,oCAAoC,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG;AACrgB,qCAAqC,0CAAG,sCAAsC,0CAAG,2BAA2B,0CAAG,mCAAmC,0CAAG,kCAAkC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG;AAC9X,qCAAqC,0CAAG,mCAAmC,0CAAG,kBAAkB,0CAAG,gCAAgC,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG;AAChS,qCAAqC,0CAAG,6BAA6B,0CAAG,iBAAiB,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG;AAC/M,qCAAqC,0CAAG,wBAAwB,0CAAG;AACnE,qCAAqC,0CAAG,sBAAsB,0CAAG,yCAAyC,0CAAG,sCAAsC,0CAAG,sCAAsC,0CAAG,mCAAmC,0CAAG,iCAAiC,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG;AAC3c,qCAAqC,0CAAG,sCAAsC,0CAAG,mCAAmC,0CAAG,mCAAmC,0CAAG,iCAAiC,0CAAG,kBAAkB,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG;AACxR,qCAAqC,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,mBAAmB,0CAAG;AAClO,qCAAqC,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG;;;AAG3J;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE,MAAM,6DAAE;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;AC7JZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACd;AACM;;;AAG5C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA,QAAQ,6DAAE;AACV,YAAY,+CAAQ;AACpB,QAAQ,6DAAE;AACV;AACA,YAAY,6DAAE;AACd;AACA,QAAQ,6DAAE;AACV;AACA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA;AACA;AACA,YAAY,6DAAE;AACd;AACA,QAAQ,6DAAE;AACV,YAAY,+CAAQ;AACpB,QAAQ,6DAAE;AACV;AACA,YAAY,6DAAE;AACd;AACA,QAAQ,6DAAE;AACV,YAAY,+CAAQ;AACpB;AACA,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX;AACA;AACA;AACA,oBAAoB,oBAAoB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,qDAAW;AACpC,WAAW,6DAAE;AACb;;AAEA;AACA;AACA,YAAY,6DAAE;AACd;AACA,QAAQ,6DAAE;AACV,YAAY,+CAAQ;AACpB,QAAQ,6DAAE;AACV;AACA,YAAY,6DAAE;AACd;AACA,QAAQ,6DAAE;AACV,YAAY,+CAAQ;AACpB;AACA,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX;AACA;AACA;AACA,oBAAoB,oBAAoB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,6DAAE;AACd;AACA,QAAQ,6DAAE;AACV,YAAY,+CAAQ;AACpB,QAAQ,6DAAE;AACV;AACA,YAAY,6DAAE;AACd;AACA,QAAQ,6DAAE;AACV,YAAY,+CAAQ;AACpB;AACA,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX;AACA;AACA;AACA,oBAAoB,oBAAoB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,6DAAE;AACb;;AAEA;AACA,8BAA8B,6DAAE;AAChC;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;AC9PZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;;;AAGpD;;AAEO;AACP;;AAEA;AACA,kBAAkB,6DAAE;AACpB,eAAe,6DAAE;AACjB,kBAAkB,6DAAE;AACpB,eAAe,6DAAE;AACjB,WAAW,6DAAE;AACb;;AAEA;AACA,2BAA2B,6DAAE;AAC7B,WAAW,6DAAE,MAAM,6DAAE;AACrB;;AAEA;AACA,iBAAiB,6DAAE;AACnB;AACA;;AAEA;AACA,aAAa,6DAAE;AACf,YAAY,6DAAE;AACd,aAAa,6DAAE;AACf,YAAY,6DAAE;AACd,WAAW,6DAAE,MAAM,6DAAE;AACrB;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;AC1DZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;;;AAGpD;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd,gBAAgB,6DAAE;AAClB,gBAAgB,6DAAE;AAClB,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd;AACA,QAAQ,6DAAE;AACV;AACA;AACA,QAAQ,6DAAE;AACV,YAAY,6DAAE;AACd;AACA,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV,QAAQ,6DAAE;AACV;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;AC5DZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;;;AAGpD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV;AACA;AACA,oBAAoB,0BAA0B;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV;AACA;AACA,oBAAoB,yBAAyB;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV;AACA;AACA,oBAAoB,0BAA0B;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV;AACA;AACA,oBAAoB,yBAAyB;AAC7C;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;ACzJZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;;;AAGpD;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV,gBAAgB,6DAAE;AAClB,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV,gBAAgB,6DAAE;AAClB,YAAY,6DAAE;AACd,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,aAAa,6DAAE;AACf,SAAS,6DAAE;AACX,cAAc,6DAAE;AAChB,UAAU,6DAAE;AACZ,cAAc,6DAAE;AAChB,UAAU,6DAAE;AACZ,cAAc,6DAAE;AAChB,UAAU,6DAAE;AACZ,cAAc,6DAAE;AAChB,UAAU,6DAAE;AACZ,cAAc,6DAAE;AAChB,UAAU,6DAAE;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;ACvHZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACnB;;;AAGjC;;AAEA,oBAAoB,0CAAG,uBAAuB,0CAAG,sCAAsC,0CAAG,qCAAqC,0CAAG,mCAAmC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG;AAC7oC,oBAAoB,0CAAG,wBAAwB,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG;AACpf,oBAAoB,0CAAG,mBAAmB,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG;AACrL,oBAAoB,0CAAG,gBAAgB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG;AAC7F,oBAAoB,0CAAG;AACvB,oBAAoB,0CAAG,sCAAsC,0CAAG,gCAAgC,0CAAG,mBAAmB,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG;AACvgB,oBAAoB,0CAAG,mCAAmC,0CAAG,6BAA6B,0CAAG,uBAAuB,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG;AAC/W,oBAAoB,0CAAG,4BAA4B,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,mBAAmB,0CAAG,uBAAuB,0CAAG;AAC1J,oBAAoB,0CAAG,0BAA0B,0CAAG,eAAe,0CAAG,sBAAsB,0CAAG;AAC/F,oBAAoB,0CAAG;AACvB,oBAAoB,0CAAG,wBAAwB,0CAAG,yCAAyC,0CAAG,sCAAsC,0CAAG,kCAAkC,0CAAG,kCAAkC,0CAAG,oCAAoC,0CAAG,mCAAmC,0CAAG,mCAAmC,0CAAG,mCAAmC,0CAAG,mCAAmC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,kCAAkC,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG;AACzkC,oBAAoB,0CAAG,kCAAkC,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,kBAAkB,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG;AACxc,oBAAoB,0CAAG,4BAA4B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG;AAC7I,oBAAoB,0CAAG;;;AAGvB;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE,MAAM,6DAAE;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;ACtJZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACS;AACnB;;;AAGtC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEA;;;AAGA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA,QAAQ,6DAAE;AACV;AACA,QAAQ,6DAAE;AACV;AACA,aAAa,6DAAE;AACf;AACA,QAAQ,6DAAE;AACV;AACA,YAAY,6DAAE;AACd;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA,0BAA0B,6DAAE;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ,6DAAE;AACV;AACA,QAAQ,6DAAE;AACV;AACA,aAAa,6DAAE;AACf;AACA,QAAQ,6DAAE;AACV;AACA,YAAY,6DAAE;AACd;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA,0BAA0B,6DAAE;AAC5B;AACA;AACA;AACA;;AAEA;AACA,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd,gBAAgB,6DAAE;AAClB;AACA;;AAEA;AACA,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd,gBAAgB,6DAAE;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,6DAAE,yBAAyB,6DAAE,4BAA4B,6DAAE,gCAAgC,6DAAE,iCAAiC,6DAAE,2BAA2B,6DAAE,4BAA4B,6DAAE,2BAA2B,6DAAE,0BAA0B,6DAAE,2BAA2B,6DAAE,0BAA0B,6DAAE;AACxT;;AAEA;AACA,qDAAqD,6DAAE;AACvD;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;AChJZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACS;AACnB;AACM;;;AAG5C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEA,iCAAiC,6DAAE,KAAK,6DAAE;;;AAG1C;;AAEO;;AAEP;AACA,2BAA2B,+CAAQ;AACnC,2BAA2B,+CAAQ;AACnC,gBAAgB,qDAAW;AAC3B,YAAY,6DAAE;AACd;AACA;AACA,YAAY,6DAAE;AACd;AACA;AACA,+BAA+B,8DAAG;AAClC,yBAAyB,6DAAE;AAC3B,yBAAyB,6DAAE;AAC3B;AACA;;AAEA;AACA,2BAA2B,+CAAQ;AACnC,2BAA2B,+CAAQ;AACnC,gBAAgB,qDAAW;AAC3B,YAAY,6DAAE;AACd;AACA;AACA;AACA,YAAY,6DAAE;AACd;AACA;AACA;AACA,0BAA0B,8DAAG;AAC7B,oBAAoB,6DAAE,aAAa,6DAAE;AACrC,oBAAoB,6DAAE;AACtB;AACA;;AAEA;AACA,YAAY,+CAAQ;AACpB,YAAY,+CAAQ;AACpB,aAAa,6DAAE;AACf,WAAW,6DAAE;AACb,cAAc,6DAAE;AAChB,gBAAgB,6DAAE;AAClB,eAAe,6DAAE;AACjB,mBAAmB,6DAAE;AACrB;AACA;AACA;AACA;AACA,gBAAgB,qDAAW;AAC3B,YAAY,6DAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6DAAE;AACjC,yBAAyB,6DAAE,MAAM,6DAAE;AACnC,uBAAuB,6DAAE;AACzB;AACA;;AAEA;AACA,sCAAsC,6DAAE;AACxC;;AAEA;AACA;AACA,WAAW,6DAAE;AACb;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;AC/HZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACR;AACN;AACI;;;AAG1C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA,oBAAoB,6DAAE;AACtB;AACA,oBAAoB,6DAAE;AACtB,aAAa,6DAAE;AACf,aAAa,6DAAE;AACf,aAAa,+CAAQ;AACrB,gBAAgB,6DAAE;AAClB,aAAa,+CAAQ;AACrB,gBAAgB,6DAAE;AAClB,YAAY,+CAAQ;AACpB,YAAY,mDAAU;AACtB,eAAe,6DAAE;AACjB,YAAY,mDAAU;AACtB,eAAe,6DAAE;AACjB,YAAY,mDAAU;AACtB;AACA;AACA;AACA;AACA;AACA,WAAW,6DAAE;AACb;AACA;AACA;AACA;AACA,aAAa,qDAAW;AACxB,gBAAgB,6DAAE;AAClB;AACA;AACA,iBAAiB,6DAAE;AACnB;AACA;AACA;AACA,gBAAgB,6DAAE;AAClB;AACA,gBAAgB,6DAAE;AAClB;AACA,iBAAiB,6DAAE;AACnB,0BAA0B,6DAAE,WAAW,6DAAE;AACzC,0BAA0B,6DAAE,WAAW,6DAAE;AACzC;AACA;AACA,6BAA6B,6DAAE;AAC/B,6BAA6B,6DAAE;AAC/B;AACA;AACA,6BAA6B,6DAAE;AAC/B,6BAA6B,6DAAE;AAC/B;AACA,8BAA8B,qDAAW;AACzC,8BAA8B,qDAAW;AACzC;AACA,YAAY,6DAAE;AACd;AACA,YAAY,6DAAE;AACd,eAAe,6DAAE;AACjB;AACA,eAAe,6DAAE;AACjB,qBAAqB,qDAAW;AAChC;AACA,uBAAuB,6DAAE;AACzB,sBAAsB,qDAAW;AACjC;AACA,uBAAuB,6DAAE;AACzB,iBAAiB,qDAAW;AAC5B;AACA,wBAAwB,6DAAE;AAC1B,kBAAkB,qDAAW;AAC7B;AACA,wBAAwB,6DAAE;AAC1B,gBAAgB,6DAAE,MAAM,6DAAE;AAC1B;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;ACzIZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACR;AACV;AACI;AACF;AACE;AACU;AACM;;AAEtD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA,qBAAqB,6DAAE;AACvB;AACA,mBAAmB,6DAAE;AACrB,aAAa,+CAAQ;AACrB,gBAAgB,6DAAE;AAClB,aAAa,+CAAQ;AACrB,gBAAgB,6DAAE;AAClB,YAAY,+CAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,6CAAO;AACnB,eAAe,6DAAE;AACjB,YAAY,6CAAO;AACnB,eAAe,6DAAE;AACjB,YAAY,6CAAO;AACnB;AACA;AACA;AACA;AACA,0BAA0B,+CAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,6DAAE;AACnB;AACA,eAAe,6DAAE;AACjB,iBAAiB,6DAAE;AACnB;AACA,eAAe,6DAAE;AACjB;AACA,mBAAmB,6DAAE;AACrB;AACA,mBAAmB,6DAAE;AACrB,iBAAiB,6DAAE;AACnB,YAAY,6DAAE;AACd,aAAa,qDAAW;AACxB,gBAAgB,6DAAE;AAClB,yBAAyB,6DAAE;AAC3B,oBAAoB,6DAAE;AACtB,oBAAoB,6DAAE;AACtB;AACA;AACA;AACA,gBAAgB,6DAAE;AAClB;AACA,gBAAgB,6DAAE;AAClB;AACA,gBAAgB,6DAAE,UAAU,6DAAE;AAC9B,8BAA8B,qDAAW;AACzC,8BAA8B,qDAAW;AACzC;AACA;AACA;AACA,iBAAiB,6DAAE;AACnB;AACA,gBAAgB,6DAAE;AAClB;AACA,YAAY,6DAAE;AACd,iCAAiC,6DAAE;AACnC,qBAAqB,6DAAE;AACvB,qBAAqB,6DAAE;AACvB,uBAAuB,6DAAE;AACzB,oBAAoB,6DAAE;AACtB,oBAAoB,6DAAE;AACtB,gBAAgB,6DAAE,MAAM,6DAAE;AAC1B,oBAAoB,2CAAM;AAC1B,kBAAkB,2CAAM;AACxB,wBAAwB,6DAAE;AAC1B,gBAAgB,+DAAI;AACpB;AACA,gBAAgB,yDAAG;AACnB;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;AC7JZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACR;AACN;;;AAGtC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA,gBAAgB,6DAAE;AAClB;AACA;AACA,YAAY,+CAAQ;AACpB,YAAY,+CAAQ;AACpB,4BAA4B,6DAAE;AAC9B,gCAAgC,6DAAE,aAAa,qDAAW;AAC1D,kBAAkB,qDAAW;AAC7B,cAAc,6DAAE;AAChB,cAAc,6DAAE;AAChB,kBAAkB,6DAAE;AACpB,QAAQ,6DAAE;AACV,QAAQ,6DAAE;AACV,YAAY,6DAAE;AACd;AACA;AACA;AACA,gBAAgB,6DAAE;AAClB,iBAAiB,6DAAE;AACnB;AACA,iBAAiB,6DAAE,MAAM,6DAAE;AAC3B;AACA;;AAEA;AACA;AACA,YAAY,6DAAE;AACd,QAAQ,6DAAE;AACV;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;AClFZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;;;AAGpD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wBAAwB;AAC5C;AACA,gBAAgB,6DAAE;AAClB;AACA;AACA;AACA;AACA,QAAQ,6DAAE;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wBAAwB;AAC5C;AACA,gBAAgB,6DAAE;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wBAAwB;AAC5C;AACA,gBAAgB,6DAAE;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;ACzHZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACS;;;AAGzD;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd;AACA,YAAY,6DAAE,KAAK,6DAAE;AACrB;AACA,WAAW,6DAAE,KAAK,6DAAE;AACpB;AACA,UAAU,6DAAE,KAAK,6DAAE;AACnB;AACA;AACA;AACA,qBAAqB,8DAAG;AACxB,eAAe,6DAAE;AACjB;AACA;AACA;AACA,eAAe,6DAAE;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd;AACA,YAAY,6DAAE,KAAK,6DAAE;AACrB;AACA,WAAW,6DAAE,KAAK,6DAAE;AACpB;AACA;AACA,UAAU,6DAAE,KAAK,6DAAE;AACnB;AACA;AACA;AACA,qBAAqB,8DAAG;AACxB,eAAe,6DAAE;AACjB;AACA;AACA;AACA,eAAe,6DAAE;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,6DAAE;AACf,WAAW,6DAAE;AACb;AACA,UAAU,6DAAE,KAAK,6DAAE;AACnB;AACA,SAAS,6DAAE,KAAK,6DAAE;AAClB;AACA,QAAQ,6DAAE,KAAK,6DAAE;AACjB;AACA;AACA;AACA,qBAAqB,8DAAG;AACxB,eAAe,6DAAE;AACjB;AACA;AACA;AACA,eAAe,6DAAE;AACjB;AACA;;AAEA;AACA,cAAc,6DAAE;AAChB,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd,WAAW,6DAAE;AACb;AACA;AACA,qBAAqB,8DAAG;AACxB;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,8DAAG;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,6DAAE;AACd,YAAY,6DAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,8DAAG;AACxB,eAAe,6DAAE;AACjB;AACA;AACA;AACA,eAAe,6DAAE;AACjB;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;ACzJZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACV;AACF;AACI;;;AAG5C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA,iBAAiB,qDAAW;AAC5B;AACA,iBAAiB,mDAAG;AACpB,oBAAoB,6DAAE;AACtB,sBAAsB,6DAAE;AACxB,gBAAgB,6DAAE;AAClB;AACA;AACA;AACA;AACA;AACA,SAAS,6DAAE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA,iBAAiB,6DAAE;AACnB;AACA,oBAAoB,iDAAI;AACxB,oBAAoB,iDAAI;AACxB;AACA,yBAAyB,6DAAE;AAC3B,2DAA2D,6DAAE,gDAAgD,6DAAE;AAC/G;AACA;AACA,iBAAiB,6DAAE;AACnB;AACA,gBAAgB,iDAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,6DAAE;AACnB;AACA,gBAAgB,iDAAI;AACpB,gBAAgB,iDAAI;AACpB;AACA,qBAAqB,6DAAE;AACvB,uDAAuD,6DAAE,gDAAgD,6DAAE;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;AC7HZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACnB;;;AAGjC;;AAEA,oCAAoC,0CAAG,sBAAsB,0CAAG,yCAAyC,0CAAG,oCAAoC,0CAAG,mCAAmC,0CAAG,oCAAoC,0CAAG,oCAAoC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,wBAAwB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG;AACxvF,oCAAoC,0CAAG,yBAAyB,0CAAG,uCAAuC,0CAAG,kCAAkC,0CAAG,oCAAoC,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,qBAAqB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG;AACzwE,oCAAoC,0CAAG,kCAAkC,0CAAG,gCAAgC,0CAAG,mBAAmB,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,qBAAqB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,qBAAqB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG;AAC7vD,oCAAoC,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,kBAAkB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG;AAC1yC,oCAAoC,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,qBAAqB,0CAAG,2BAA2B,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,mBAAmB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG;AACztB,oCAAoC,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG;AACpU,oCAAoC,0CAAG,uCAAuC,0CAAG,oCAAoC,0CAAG,mBAAmB,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG;AACziC,oCAAoC,0CAAG,kCAAkC,0CAAG,yBAAyB,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG;AACl8B,oCAAoC,0CAAG,gCAAgC,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,kBAAkB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,qBAAqB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG;AAChzB,oCAAoC,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,iBAAiB,0CAAG,2BAA2B,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG;AACpjB,oCAAoC,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,mBAAmB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG;AAClU,oCAAoC,0CAAG,uBAAuB,0CAAG;AACjE,oCAAoC,0CAAG,uBAAuB,0CAAG,yCAAyC,0CAAG,uCAAuC,0CAAG,uCAAuC,0CAAG,iCAAiC,0CAAG,oCAAoC,0CAAG,oCAAoC,0CAAG,kCAAkC,0CAAG,oCAAoC,0CAAG,oCAAoC,0CAAG,+BAA+B,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,+BAA+B,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,+BAA+B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG;AACzgD,oCAAoC,0CAAG,uCAAuC,0CAAG,oCAAoC,0CAAG,oCAAoC,0CAAG,oCAAoC,0CAAG,2BAA2B,0CAAG,kCAAkC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG;AAC5uC,oCAAoC,0CAAG,oCAAoC,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,kBAAkB,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG;AAC9+B,oCAAoC,0CAAG,gCAAgC,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,iBAAiB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG;AACpzB,oCAAoC,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,mBAAmB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG;AACloB,oCAAoC,0CAAG,2BAA2B,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,qBAAqB,0CAAG,sBAAsB,0CAAG;;;AAGle;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE,MAAM,6DAAE;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;AClLZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AAClB;AACI;AACM;AACN;AACE;;AAExC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA,eAAe,6DAAE;AACjB;AACA,mBAAmB,6DAAE;AACrB,aAAa,+CAAQ;AACrB,aAAa,+CAAQ;AACrB,UAAU,2CAAM;AAChB,gBAAgB,6DAAE;AAClB,UAAU,2CAAM;AAChB,gBAAgB,6DAAE;AAClB,YAAY,+CAAQ;AACpB;AACA;AACA,+BAA+B,+CAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,iDAAS;AACrB,YAAY,iDAAS;AACrB,aAAa,2CAAM;AACnB,aAAa,2CAAM;AACnB,mBAAmB,6DAAE;AACrB,mBAAmB,6DAAE;AACrB,YAAY,iDAAS;AACrB;AACA;AACA;AACA;AACA,+BAA+B,+CAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAAE;AAClB;AACA,eAAe,6DAAE;AACjB;AACA,mBAAmB,6DAAE;AACrB;AACA,mBAAmB,6DAAE;AACrB,oBAAoB,6DAAE;AACtB;AACA;AACA,qBAAqB,6DAAE;AACvB,oBAAoB,qDAAW;AAC/B,8BAA8B,qDAAW;AACzC;AACA;AACA,cAAc,6DAAE;AAChB,YAAY,6DAAE;AACd,aAAa,6DAAE;AACf;AACA,aAAa,6DAAE;AACf;AACA,cAAc,6DAAE;AAChB,WAAW,6DAAE;AACb,mCAAmC,6DAAE;AACrC,gBAAgB,6DAAE;AAClB,gBAAgB,6DAAE;AAClB,sCAAsC,6DAAE;AACxC,iBAAiB,6DAAE;AACnB,iBAAiB,6DAAE;AACnB,gBAAgB,6DAAE;AAClB;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;AC5IZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AAClB;AACC;AACqB;AACR;;;AAG5C;;AAEO;;AAEP;AACA,mBAAmB,wCAAE;AACrB,mBAAmB,wCAAE;AACrB;AACA,eAAe,sCAAE;AACjB,gBAAgB,sCAAE;AAClB,cAAc,sCAAE;AAChB,eAAe,sCAAE;AACjB,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAE;AACd,WAAW,6DAAE;AACb;;AAEA;AACA,wBAAwB,qDAAW;AACnC,wCAAwC,qDAAW;AACnD,8BAA8B,qDAAW;AACzC,4FAA4F,6DAAE;AAC9F,WAAW,6DAAE;AACb;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;AC/DZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACV;;;AAGtC;;AAEO;;AAEP;AACA;AACA,sBAAsB,8CAAI;AAC1B;;AAEA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA,kBAAkB,8CAAI;AACtB;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,8CAAI;AACrB;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;ACrDZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACS;AACnB;AACJ;AACU;;AAE5C;;AAEO;;AAEP;AACA,WAAW,6DAAE,MAAM,+CAAQ;AAC3B;;AAEA;AACA,YAAY,+CAAQ;AACpB;;AAEA;AACA,WAAW,6DAAE,MAAM,+CAAQ;AAC3B;;AAEA;AACA,YAAY,+CAAQ;AACpB;;AAEA;AACA;AACA;AACA,iBAAiB,2CAAM;AACvB;AACA;;AAEA;AACA;AACA;AACA,2BAA2B,2CAAM;AACjC;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,6DAAE,aAAa,qDAAW;AAC3C,YAAY,+CAAQ;AACpB,iBAAiB,6DAAE;AACnB;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oBAAoB,6DAAE;AACtB,mBAAmB,6DAAE;AACrB,YAAY,+CAAQ;AACpB,kBAAkB,6DAAE,KAAK,qDAAW;AACpC,qBAAqB,8DAAG;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,6DAAE;AAClB;AACA,eAAe,6DAAE;AACjB,YAAY,+CAAQ;AACpB,qBAAqB,8DAAG;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,2CAAM;AACnB;AACA;;AAEA;AACA;AACA,aAAa,2CAAM;AACnB;AACA;;AAEA;AACA;AACA,aAAa,2CAAM;AACnB;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;ACvHZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACnB;;;AAGjC;;AAEA,oCAAoC,0CAAG,uBAAuB,0CAAG,sCAAsC,0CAAG,qCAAqC,0CAAG,mCAAmC,0CAAG,oCAAoC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,wBAAwB,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,wBAAwB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG;AACtwF,oCAAoC,0CAAG,wBAAwB,0CAAG,mCAAmC,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,qBAAqB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG;AACrlD,oCAAoC,0CAAG,mBAAmB,0CAAG,6BAA6B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,qBAAqB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,qBAAqB,0CAAG,qBAAqB,0CAAG,qBAAqB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG;AACr6B,oCAAoC,0CAAG,0BAA0B,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,gBAAgB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG;AACpd,oCAAoC,0CAAG,qBAAqB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG;AACjH,oCAAoC,0CAAG,sCAAsC,0CAAG,gCAAgC,0CAAG,yBAAyB,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG;AAC91B,oCAAoC,0CAAG,mCAAmC,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,kBAAkB,0CAAG,6BAA6B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG;AAClkB,oCAAoC,0CAAG,6BAA6B,0CAAG,iBAAiB,0CAAG,2BAA2B,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG,uBAAuB,0CAAG,qBAAqB,0CAAG;AAC7S,oCAAoC,0CAAG,0BAA0B,0CAAG,mBAAmB,0CAAG,uBAAuB,0CAAG;AACpH,oCAAoC,0CAAG;AACvC,oCAAoC,0CAAG,wBAAwB,0CAAG,yCAAyC,0CAAG,qCAAqC,0CAAG,uCAAuC,0CAAG,mCAAmC,0CAAG,mCAAmC,0CAAG,oCAAoC,0CAAG,oCAAoC,0CAAG,mCAAmC,0CAAG,kCAAkC,0CAAG,oCAAoC,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,iCAAiC,0CAAG,gCAAgC,0CAAG,iCAAiC,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,8BAA8B,0CAAG,4BAA4B,0CAAG;AACjgE,oCAAoC,0CAAG,sCAAsC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,yBAAyB,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,8BAA8B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,8BAA8B,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,yBAAyB,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG;AAC7lC,oCAAoC,0CAAG,+BAA+B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,8BAA8B,0CAAG,iBAAiB,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,0BAA0B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG;AAC7hB,oCAAoC,0CAAG,6BAA6B,0CAAG,0BAA0B,0CAAG,yBAAyB,0CAAG,0BAA0B,0CAAG,qBAAqB,0CAAG,uBAAuB,0CAAG,sBAAsB,0CAAG,uBAAuB,0CAAG,uBAAuB,0CAAG;AAC5R,oCAAoC,0CAAG,uBAAuB,0CAAG;;;AAGjE;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE,MAAM,6DAAE;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;AC7JZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgD;AACI;AACnB;;;AAGjC;;AAEA,mCAAmC,0CAAG,uBAAuB,0CAAG,yCAAyC,0CAAG,kCAAkC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,+BAA+B,0CAAG,6BAA6B,0CAAG,gCAAgC,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,2BAA2B,0CAAG,2BAA2B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG;AAC/wB,mCAAmC,0CAAG,2BAA2B,0CAAG,mCAAmC,0CAAG,mCAAmC,0CAAG,6BAA6B,0CAAG,0BAA0B,0CAAG,4BAA4B,0CAAG,uBAAuB,0CAAG,yBAAyB,0CAAG,uBAAuB,0CAAG,wBAAwB,0CAAG,yBAAyB,0CAAG;AACnX,mCAAmC,0CAAG,mBAAmB,0CAAG,gCAAgC,0CAAG,gCAAgC,0CAAG,sBAAsB,0CAAG,0BAA0B,0CAAG,wBAAwB,0CAAG,wBAAwB,0CAAG;AAC9O,mCAAmC,0CAAG,6BAA6B,0CAAG,0BAA0B,0CAAG;AACnG,mCAAmC,0CAAG,sBAAsB,0CAAG,yBAAyB,0CAAG;AAC3F,mCAAmC,0CAAG;AACtC,mCAAmC,0CAAG,yCAAyC,0CAAG,mCAAmC,0CAAG,yBAAyB,0CAAG,gCAAgC,0CAAG,6BAA6B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,4BAA4B,0CAAG;AACnT,mCAAmC,0CAAG,sCAAsC,0CAAG,gCAAgC,0CAAG,iBAAiB,0CAAG;AACtI,mCAAmC,0CAAG,mCAAmC,0CAAG,iBAAiB,0CAAG,6BAA6B,0CAAG;AAChI,mCAAmC,0CAAG,6BAA6B,0CAAG,mBAAmB,0CAAG,yBAAyB,0CAAG;AACxH,mCAAmC,0CAAG;AACtC,mCAAmC,0CAAG,sBAAsB,0CAAG,sCAAsC,0CAAG,gCAAgC,0CAAG,+BAA+B,0CAAG,gCAAgC,0CAAG,4BAA4B,0CAAG,2BAA2B,0CAAG,4BAA4B,0CAAG,6BAA6B,0CAAG,6BAA6B,0CAAG,4BAA4B,0CAAG;AAC3Y,mCAAmC,0CAAG,mCAAmC,0CAAG,6BAA6B,0CAAG;AAC5G,mCAAmC,0CAAG,gCAAgC,0CAAG,0BAA0B,0CAAG;AACtG,mCAAmC,0CAAG;AACtC,mCAAmC,0CAAG;;;AAGtC;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE,MAAM,6DAAE;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,aAAa,6DAAE;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;ACpKZ;AACA;;AAEA;;AAE+C;AACN;AACqB;;;AAG9D;;AAEO;;AAEP;AACA;AACA;AACA;AACA,yBAAyB,gEAAS;AAClC;AACA,6DAA6D,4DAAK;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,IAAI;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,gCAAgC;;;;;;;;;;;;;;;;;AClD5C;AACA;;AAEA;;AAE+C;AAClB;;AAE7B;;AAEO;AACP;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sCAAE;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,sCAAE,UAAU,EAAE,EAAE,EAAE,EAAE,EAAE;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC,sCAAE;AACrC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;AC9MZ;AACA;;AAEA;;AAE6B;AACkB;;;AAG/C;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;ACjFZ;AACA;;AAEA;;AAE6D;AAChC;AACY;AACM;;;AAG/C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;;AAIZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kDAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,wDAAW;AAC1B,gBAAgB,wDAAW;AAC3B,cAAc,kDAAQ;AACtB,gBAAgB,wDAAW;AAC3B;AACA;AACA;AACA;AACA,wBAAwB,kDAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;AC5NZ;AACA;;AAEA;;AAE+C;AAClB;AACI;;AAEjC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,sCAAE;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY,0CAAI;AAChB,YAAY,0CAAI;AAChB,YAAY,0CAAI;AAChB;AACA;AACA;;AAEA;AACA,YAAY,0CAAI;AAChB,YAAY,0CAAI;AAChB,YAAY,0CAAI;AAChB,YAAY,0CAAI;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,sCAAE;AACd,mBAAmB,sCAAE,cAAc,EAAE,EAAE,EAAE,EAAE,EAAE;AAC7C;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf,mBAAmB,sCAAE,UAAU,EAAE,EAAE,EAAE;AACrC;AACA;AACA,mBAAmB,sCAAE,UAAU,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;AACjD;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd,mBAAmB,sCAAE,WAAW,GAAG,GAAG,EAAE,GAAG,0CAAI,gBAAgB,0CAAI,gBAAgB,0CAAI;AACvF;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd,mBAAmB,sCAAE,UAAU,GAAG,GAAG,GAAG,EAAE,GAAG,0CAAI,gBAAgB,0CAAI,gBAAgB,0CAAI,gBAAgB,0CAAI;AAC7G;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;AC3iBZ;AACA;;AAEA;;AAE6B;AACkB;AACD;;;AAG9C;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,sBAAsB,uDAAU;AAChC;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA,mBAAmB;AACnB;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA,KAAK;;AAEL;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,oBAAoB,sCAAE;AACtB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,UAAU,EAAE,EAAE,EAAE,EAAE,EAAE;AACrC;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnVZ;AACA;;AAEA;;AAE6B;AACgC;AACpB;AACsB;AACH;AACd;AACX;AAC6B;AACjB;AACN;AACW;AACN;AACN;;;AAGxC;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,sCAAE;AACd,mBAAmB,wDAAW,wDAAwD,wDAAW;AACjG,UAAU;AACV;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAqC,sDAAW,CAAC,kDAAQ;AACzD,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA,qBAAqB,wDAAW;AAChC,iBAAiB,kDAAQ;AACzB;AACA;AACA,mBAAmB,sCAAE;AACrB;AACA,2CAA2C,iDAAM,mBAAmB,kDAAQ;AAC5E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+DAAa;AACnD,gDAAgD,wDAAU;AAC1D;AACA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA,2BAA2B,kDAAQ;AACnC;AACA;AACA;AACA;AACA,0BAA0B,wDAAW;AACrC,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,wDAAU;AAC5B,gDAAgD,kDAAO;AACvD;AACA;AACA;AACA;AACA,YAAY,wDAAU;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,yEAAmB;AAC3B,qDAAqD,uDAAU;AAC/D,yDAAyD,6DAAW;AACpE;;AAEA,IAAI,yEAAmB;AACvB;;AAEA;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;;AAEA;AACA,iDAAiD,sCAAE,sBAAsB,sCAAE;AAC3E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,kDAAO;AACnC,sCAAsC,sCAAE;AACxC;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sCAAE;AACzB;AACA,0BAA0B,sCAAE;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sCAAE;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,sBAAsB,wDAAW;AACjC,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA,aAAa,sCAAE;AACf;AACA,+BAA+B,qEAAc;AAC7C;AACA;AACA,mCAAmC,kDAAQ;AAC3C;AACA,4BAA4B,WAAW;AACvC;AACA,mCAAmC,wDAAW;AAC9C;AACA;AACA,2BAA2B,wDAAW;AACtC;AACA;AACA;AACA;AACA;AACA,uBAAuB,wDAAW;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA,UAAU;AACV,kBAAkB,kDAAQ;AAC1B;AACA,0FAA0F,4CAAK;AAC/F,KAAK;;AAEL;AACA;AACA;AACA;AACA,sBAAsB,wDAAW;AACjC,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA,UAAU;AACV,kBAAkB,kDAAQ;AAC1B;AACA;AACA;AACA;AACA,gCAAgC,kDAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,WAAW;AACvC;AACA;AACA;AACA;AACA,4DAA4D,wDAAW;AACvE;AACA;AACA;AACA,+DAA+D,wDAAW;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;ACjgBZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE+C;AAClB;AACQ;AACc;;;AAGnD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA,WAAW,kDAAQ,sBAAsB,kDAAQ;AACjD;;AAEA;AACA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA;AACA;AACA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,sCAAE;AACxB,gCAAgC,sCAAE;AAClC,kCAAkC,sCAAE;AACpC;AACA;AACA,mBAAmB,sCAAE,UAAU,GAAG,KAAK,GAAG,EAAE,KAAK,EAAE,KAAK,qBAAqB,sCAAE,8BAA8B,sCAAE;AAC/G,UAAU;AACV,mBAAmB,sCAAE,UAAU,KAAK,EAAE,KAAK,EAAE,KAAK,qBAAqB,sCAAE,8BAA8B,sCAAE;AACzG;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B,sCAAE;AACjC,gCAAgC,sCAAE;AAClC,kCAAkC,sCAAE;AACpC;AACA,eAAe,sCAAE,UAAU,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,qDAAqD,sCAAE,qDAAqD,sCAAE;AACtJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B,sCAAE;AACjC,gCAAgC,sCAAE;AAClC,kCAAkC,sCAAE;AACpC;AACA,eAAe,sCAAE,UAAU,GAAG,MAAM,GAAG,MAAM,GAAG,KAAK,qBAAqB,sCAAE,8BAA8B,sCAAE;AAC5G;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,sCAAE;AACxB,gCAAgC,sCAAE;AAClC,kCAAkC,sCAAE;AACpC,eAAe,sCAAE,UAAU,KAAK,EAAE,KAAK,EAAE,KAAK,sBAAsB,sCAAE,8BAA8B,sCAAE;AACtG;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,sCAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,sCAAE;AACjB,eAAe,sCAAE,eAAe,sCAAE,eAAe,sCAAE,eAAe,sCAAE,eAAe,sCAAE,eAAe,sCAAE;AACtG,YAAY,8CAAI;AAChB;AACA;AACA;AACA;AACA,wBAAwB,8CAAI;AAC5B;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,eAAe,EAAE,QAAQ,EAAE;AAC5C;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrkBZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;;AAEO;;AAEA;AACP;AACA;;AAEA;AACA;;AAEO;;AAEA;AACP;AACA;;AAEA;AACA;;AAEO;;AAEA;AACP;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1FA;AACA;;AAEA;;AAE+C;AAClB;AACM;AACkB;;;AAGrD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8BAA8B;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,8DAAc;AAChC,kBAAkB,8DAAc;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,8DAAc;AAChC,kBAAkB,8DAAc;AAChC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,UAAU,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;AACjD;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA,qBAAqB,4CAAK;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,8DAAc;AAChC,kBAAkB,8DAAc;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,8DAAc;AAChC,kBAAkB,8DAAc;AAChC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,eAAe,sCAAE,UAAU,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;AACjD;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP,qBAAqB,4CAAK;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,UAAU,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;AAC5C;AACA;;AAEA,4DAAY;;;AAGZ;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,YAAY,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,GAAG;AAClH;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,iBAAiB,sCAAE;AACnB,iBAAiB,sCAAE;AACnB,iBAAiB,sCAAE;AACnB,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,UAAU,EAAE,GAAG,EAAE,GAAG,EAAE;AACvC,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;AAEZ;;;AAGA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,mBAAmB;AAC/C;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY;;AAEZ;;;AAGA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,YAAY,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE;AACnG;AACA;;AAEA,4DAAY;;;AAGZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,YAAY,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE;AACnG;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;AAIZ;;AAEO;AACP;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA;;AAEA;AACA;;AAEA;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,WAAW;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,WAAW;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;ACrxEZ;AACA;;AAEA;;AAE6B;AACkB;AACM;AACL;AACM;AACA;AACrB;;;AAGjC;;AAEO;AACP;AACA;AACA;AACA,IAAI,0CAAI;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,0CAAI;AACZ;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,4BAA4B,OAAO;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,+BAA+B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,+BAA+B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,yDAAe;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC,qCAAqC,QAAQ;AAC7C;AACA,+DAA+D,oCAAoC;AACnG,mEAAmE,oCAAoC;AACvG;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qEAAqE,+DAAc;;AAEnF;AACA;AACA;AACA;AACA,qEAAqE,+DAAc;AACnF;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,qCAAqC,8DAAc;AACnD,gBAAgB,8DAAc,YAAY,+DAAK;AAC/C;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA,gBAAgB,8DAAc,YAAY,+DAAK,yBAAyB,+DAAK;AAC7E,iCAAiC,QAAQ;AACzC,qCAAqC,QAAQ;AAC7C;AACA;AACA;AACA,+DAA+D,oCAAoC;AACnG,mEAAmE,oCAAoC;AACvG;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,8DAAc;AACjE,wBAAwB,8DAAc,YAAY,+DAAK;AACvD,wBAAwB,8DAAc,YAAY,+DAAK,kCAAkC,+DAAK;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,+BAA+B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,+BAA+B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,yDAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,QAAQ;AACrC,iCAAiC,QAAQ;AACzC;AACA,2DAA2D,oCAAoC;AAC/F,+DAA+D,oCAAoC;AACnG;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iEAAiE,+DAAc;;AAE/E;AACA;AACA;AACA;AACA,iEAAiE,+DAAc;AAC/E;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,iCAAiC,8DAAc;AAC/C,YAAY,8DAAc,YAAY,+DAAK;AAC3C;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA,YAAY,8DAAc,YAAY,+DAAK,yBAAyB,+DAAK;AACzE,6BAA6B,QAAQ;AACrC,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA,2DAA2D,oCAAoC;AAC/F,+DAA+D,oCAAoC;AACnG;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,8DAAc;AAC7D,oBAAoB,8DAAc,YAAY,+DAAK;AACnD,oBAAoB,8DAAc,YAAY,+DAAK,kCAAkC,+DAAK;AAC1F;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4DAAY,oEAAoE,0CAAI;;;;;;;;;;;;;;;;ACpTpF;AACA;;AAEA;;AAE+C;;;AAG/C;;AAEO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;AC/KZ;AACA;;AAEA;;AAE6D;;;AAG7D;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzEZ;AACA;;AAEA;;AAE6B;AACgC;AACP;AACjB;AACQ;AACC;AACJ;AACD;AACN;AACF;AACO;;;AAGxC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,kDAAO,CAAC,uDAAU;AAC9C,sCAAsC,sCAAE;AACxC;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,uBAAuB,8CAAI;AAC3B;AACA;AACA;AACA,2BAA2B,8CAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,4CAAK;AAC3C;AACA;AACA,8CAA8C,kDAAQ;AACtD;AACA;AACA,0CAA0C,0CAAI;AAC9C;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,sCAAE;AACV;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,sCAAE;AACV;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd;AACA;AACA,mCAAmC,mDAAQ;AAC3C;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,yCAAyC,sCAAE;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd,mBAAmB,uDAAU;AAC7B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY,mCAAmC,sDAAU;;AAEzD,mEAAiB;AACjB;AACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3gBD;AACA;;AAEA;;AAE6B;AACgC;AACR;AACK;AACjB;AACJ;AACK;AACD;AACN;AACmB;AACrB;AACY;;;AAG7C;;AAEO;AACP;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA8C,sCAAE;AAChD,iDAAiD,sCAAE;AACnD,kDAAkD,sCAAE;AACpD,gDAAgD,sCAAE;AAClD,kDAAkD,sCAAE;AACpD,mDAAmD,sCAAE;AACrD,kDAAkD,sCAAE;AACpD,iDAAiD,sCAAE;AACnD,iDAAiD,sCAAE;AACnD,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,kDAAQ;AACpE,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,kDAAQ;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qDAAqD,kDAAQ;AAC7D;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,gBAAgB,sCAAE,6BAA6B,4CAAK;AACpD;AACA,gBAAgB,8DAAgB;AAChC;AACA;AACA,gBAAgB,sCAAE,6BAA6B,kDAAQ;AACvD;AACA,gBAAgB,mEAAmB;AACnC;AACA;AACA,gBAAgB,sCAAE,6BAA6B,2CAAI;AACnD;AACA,gBAAgB,8DAAgB;AAChC;AACA;AACA,gBAAgB,sCAAE,6BAA6B,8CAAM;AACrD;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,gBAAgB,sCAAE,6BAA6B,mDAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,+DAAc,gBAAgB,+DAAc;AACpD,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,sBAAsB,4CAAK;AAC3B,sBAAsB,4CAAK;AAC3B,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,wDAAwD,kDAAQ,QAAQ,4CAAK,0BAA0B,4CAAK;AAC5G;AACA;AACA;AACA,UAAU;AACV,qCAAqC,4CAAK;AAC1C,sCAAsC,4CAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,4CAAK;AAC/B,0BAA0B,4CAAK;AAC/B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,qCAAqC;;AAErC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oBAAoB;AAC5C,4BAA4B,oBAAoB;AAChD;AACA;AACA,gCAAgC,gDAAS;AACzC,mIAAmI,sCAAE;AACrI;AACA;AACA;AACA,wBAAwB,gDAAS;AACjC;AACA;AACA,qJAAqJ,sCAAE;AACvJ;AACA;AACA;AACA,2IAA2I,sCAAE;AAC7I;AACA,8CAA8C,gDAAS,sGAAsG,sCAAE;AAC/J;AACA;AACA;AACA;AACA;AACA,2CAA2C,sCAAE;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,wBAAwB,kDAAQ;AAChC;AACA;AACA,mBAAmB,sCAAE;AACrB,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sCAAE;AACrB,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;ACleZ;AACA;;AAEA;;AAE+C;AACF;AACC;AACR;;;AAGtC;;AAEO;AACP;AACA,uBAAuB,+CAAS;AAChC;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,uDAAU;AACzB,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA,4DAAY,yCAAyC,sDAAU;;;;;;;;;;;;;;;;;;;;AC9E/D;AACA;;AAEA;;AAE+C;AAClB;AACuB;AACF;AACf;;;AAGnC;;AAEO;AACP,uDAAuD;AACvD;;AAEA,uDAAuD;AACvD;;AAEA,kDAAkD;AAClD;AACA,IAAI,6DAAa;AACjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,2DAAY,yCAAyC;;AAElE,kCAAkC;AAClC;AACA;AACA,gCAAgC;AAChC,gCAAgC;AAChC,sBAAsB,OAAO;AAC7B;AACA;AACA,kBAAkB,2DAAY;AAC9B,sBAAsB,2DAAY;AAClC;AACA,MAAM,OAAO;AACb,8BAA8B,sCAAE;AAChC;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,2BAA2B;AAC3B,iCAAiC;AACjC;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,4CAAK;AAClC;;AAEA;AACA;AACA,sBAAsB,4CAAK;AAC3B,iBAAiB,6DAAa;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,cAAc,6DAAa;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,uBAAuB,6DAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnIhD;AACA;;AAEA;;AAEgD;AAClB;AACwB;AACT;;;AAG7C;;AAEO;AACP,kBAAkB,8DAAc;AAChC,IAAI,8DAAc,YAAY,sDAAK;AACnC,IAAI,8DAAc,YAAY,sDAAK,gCAAgC,sDAAK;AACxE;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP,kBAAkB,8DAAc;AAChC,IAAI,8DAAc,YAAY,sDAAK;AACnC,IAAI,8DAAc,YAAY,sDAAK,gCAAgC,sDAAK;AACxE;;AAEA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK;AACvC,QAAQ,8DAAc;AACtB;AACA;AACA;;AAEA,4DAAY,kDAAkD,sCAAE;;;AAGhE;;AAEO;;AAEP;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK;AACvC,QAAQ,8DAAc;AACtB;AACA;AACA;;AAEA,4DAAY,iEAAiE,sCAAE;;;AAG/E;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,8DAAc;AAC1C,QAAQ,8DAAc,YAAY,sDAAK;AACvC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK,yBAAyB,sDAAK;AACrE;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,8DAAc;AAC1C,QAAQ,8DAAc,YAAY,sDAAK;AACvC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK,yBAAyB,sDAAK;AACrE;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,8DAAc;AAC1C,QAAQ,8DAAc,YAAY,sDAAK;AACvC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK,yBAAyB,sDAAK;AACrE;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,8DAAc;AAC1C,QAAQ,8DAAc,YAAY,sDAAK;AACvC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK,yBAAyB,sDAAK;AACrE;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,8DAAc;AAC1C,QAAQ,8DAAc,YAAY,sDAAK;AACvC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK,yBAAyB,sDAAK;AACrE;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,8DAAc;AAC1C,QAAQ,8DAAc,YAAY,sDAAK;AACvC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK,yBAAyB,sDAAK;AACrE;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,8DAAc;AAC1C,QAAQ,8DAAc,YAAY,sDAAK;AACvC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK,yBAAyB,sDAAK;AACrE,KAAK;;AAEL;AACA,QAAQ,8DAAc,YAAY,sDAAK;AACvC,QAAQ,8DAAc;AACtB;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,8DAAc;AAC1C,QAAQ,8DAAc,YAAY,sDAAK;AACvC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK,yBAAyB,sDAAK;AACrE;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,8DAAc;AAC1C,QAAQ,8DAAc,YAAY,sDAAK;AACvC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK,yBAAyB,sDAAK;AACrE;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzcZ;AACA;;AAEA;;AAE8D;AAChC;AACuC;AACjC;AACW;AACF;AAMpB;AACc;AAOjB;;;AAGtB;;AAEO;AACP;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,kDAAQ;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kDAAQ;AACpC;AACA;AACA;AACA;AACA;AACA,iCAAiC,kDAAQ;AACzC,kCAAkC,kDAAQ;AAC1C,4BAA4B,WAAW;AACvC;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,oBAAoB,2DAAkB;AACtC;AACA;AACA,oBAAoB,yDAAgB;AACpC;AACA,4CAA4C,sDAAK;AACjD;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,kDAAQ;AAChD;AACA,iCAAiC,sCAAE;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,gEAAoB;AAC7D,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA,+BAA+B,kDAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,yBAAyB,kDAAQ;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,YAAY,wDAAe;AAC3B,wCAAwC,sDAAK;AAC7C;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,kDAAQ;AAChD;AACA,iCAAiC,sCAAE;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,uEAA2B;AACpE,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA,+BAA+B,kDAAQ;AACvC,qDAAqD,yDAAe;AACpE;AACA;AACA,qDAAqD,yDAAe;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA,gBAAgB,8DAAqB,6CAA6C,4CAAK;AACvF,4CAA4C,sDAAK;AACjD;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,sEAA0B;AAC/D,uDAAuD;AACvD;AACA;AACA;AACA;AACA,2BAA2B,sCAAE;AAC7B,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,kBAAkB,kDAAQ;AAC1B,kBAAkB,kDAAQ;AAC1B,kBAAkB,kDAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,yCAAyC;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,sEAA0B;AACnE;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA,2BAA2B,sCAAE;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA,gBAAgB,8DAAqB,4CAA4C,4CAAK;AACtF,4CAA4C,sDAAK;AACjD;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA,gBAAgB,8DAAqB,yCAAyC,4CAAK;AACnF,4CAA4C,sDAAK;AACjD;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA,iCAAiC,sEAA0B;AAC3D,gDAAgD;AAChD;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wCAAwC,uDAAU;AAClD;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA,0CAA0C,kDAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,gDAAgD,gDAAO,SAAS,uDAAU;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,uEAA2B;AACzE,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kDAAQ;AACpC;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,2BAA2B,kDAAQ;AACnC,yBAAyB,kDAAQ;AACjC;AACA,sBAAsB,kDAAQ;AAC9B,yBAAyB,sCAAE;AAC3B;AACA;AACA,gBAAgB,oEAA2B,+EAA+E,4CAAK;AAC/H,4CAA4C,sDAAK;AACjD;AACA;AACA,KAAK;;AAEL;AACA;AACA,uBAAuB,kDAAQ;AAC/B,qBAAqB,kDAAQ;AAC7B;AACA,kBAAkB,kDAAQ;AAC1B,qBAAqB,sCAAE;AACvB;AACA;AACA,YAAY,oEAA2B,uDAAuD,4CAAK;AACnG,wCAAwC,sDAAK;AAC7C;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP,wBAAwB,kDAAQ;AAChC,sBAAsB,kDAAQ;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACh6BZ;AACA;;AAEA;;AAEgD;AACI;AAChB;AAC0C;AACjC;AACN;;;AAGvC;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,6CAA6C,sDAAK;AAClD;AACA;AACA,6DAA6D,sDAAK;AAClE,6CAA6C,sDAAK;AAClD;AACA;AACA,8DAA8D,sDAAK;AACnE;AACA;AACA;AACA;AACA,iEAAiE,sDAAK;AACtE;AACA;AACA;AACA;AACA;AACA,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA,uBAAuB,sDAAK;AAC5B,UAAU;AACV,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B,sBAAsB,sDAAK;AAC3B,4DAA4D,sDAAK;AACjE;AACA,kBAAkB,sDAAK;AACvB,qBAAqB,sDAAK,YAAY,sDAAK;AAC3C;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,+CAA+C,sDAAK;AACpD;AACA;AACA,+DAA+D,sDAAK;AACpE,+CAA+C,sDAAK;AACpD;AACA;AACA,gEAAgE,sDAAK;AACrE;AACA;AACA;AACA;AACA,mEAAmE,sDAAK;AACxE;AACA;AACA;AACA,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA,uBAAuB,sDAAK;AAC5B,UAAU;AACV,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B,sBAAsB,sDAAK;AAC3B,8DAA8D,sDAAK;AACnE;AACA,kBAAkB,sDAAK;AACvB,qBAAqB,sDAAK,YAAY,sDAAK;AAC3C;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C,sDAAK;AACjD;AACA;AACA,4DAA4D,sDAAK;AACjE,4CAA4C,sDAAK;AACjD;AACA;AACA,6DAA6D,sDAAK;AAClE;AACA;AACA;AACA;AACA,gEAAgE,sDAAK;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA,uBAAuB,sDAAK;AAC5B,UAAU;AACV,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B,sBAAsB,sDAAK;AAC3B;AACA;AACA,2DAA2D,sDAAK;AAChE,4DAA4D,sDAAK;AACjE;AACA,kBAAkB,sDAAK;AACvB,qBAAqB,sDAAK,YAAY,sDAAK;AAC3C;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kDAAkD,sDAAK;AACvD;AACA;AACA,kEAAkE,sDAAK;AACvE,kDAAkD,sDAAK;AACvD;AACA;AACA,mEAAmE,sDAAK;AACxE;AACA;AACA;AACA;AACA,sEAAsE,sDAAK;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B,UAAU;AACV,uBAAuB,sDAAK;AAC5B;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B,sBAAsB,sDAAK;AAC3B;AACA;AACA,iEAAiE,sDAAK;AACtE,kEAAkE,sDAAK;AACvE,iEAAiE,sDAAK;AACtE;AACA,kBAAkB,sDAAK;AACvB,qBAAqB,sDAAK,YAAY,sDAAK;AAC3C;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wDAAwD,sDAAK;AAC7D;AACA;AACA,wEAAwE,sDAAK;AAC7E,wDAAwD,sDAAK;AAC7D;AACA;AACA,yEAAyE,sDAAK;AAC9E;AACA;AACA;AACA;AACA;AACA,4EAA4E,sDAAK;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,sDAAK;AACnB;AACA;;AAEA;AACA;AACA,kBAAkB,gDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B,UAAU;AACV,uBAAuB,sDAAK;AAC5B;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA,uEAAuE,sDAAK;AAC5E,wEAAwE,sDAAK;AAC7E,4EAA4E,sDAAK;AACjF,uEAAuE,sDAAK;AAC5E,yBAAyB,sDAAK;AAC9B,uBAAuB,sDAAK;AAC5B;AACA,kBAAkB,sDAAK;AACvB,qBAAqB,sDAAK,YAAY,sDAAK;AAC3C;AACA;;AAEA;;AAEA,4DAAY;;AAEZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,2BAA2B,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAoD,sDAAK;AACzD;AACA;AACA,oEAAoE,sDAAK;AACzE,oDAAoD,sDAAK;AACzD;AACA;AACA,qEAAqE,sDAAK;AAC1E;AACA;AACA;AACA;AACA;AACA,wEAAwE,sDAAK;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,sDAAK;AACnB;AACA;;AAEA;AACA;AACA,kBAAkB,gDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B,UAAU;AACV,uBAAuB,sDAAK;AAC5B;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,sDAAK;AACvE,mEAAmE,sDAAK;AACxE,wEAAwE,sDAAK;AAC7E,oEAAoE,sDAAK;AACzE,iEAAiE,sDAAK;AACtE,iEAAiE,sDAAK;AACtE,iEAAiE,sDAAK;AACtE,oEAAoE,sDAAK;AACzE,yBAAyB,sDAAK;AAC9B,uBAAuB,sDAAK;AAC5B;AACA,kBAAkB,sDAAK;AACvB,qBAAqB,sDAAK,YAAY,sDAAK;AAC3C;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,0CAA0C,sDAAK;AAC/C;AACA;AACA,0DAA0D,sDAAK;AAC/D,0CAA0C,sDAAK;AAC/C;AACA;AACA,2DAA2D,sDAAK;AAChE;AACA;AACA;AACA;AACA;AACA,8DAA8D,sDAAK;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,sDAAK;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kDAAQ,gBAAgB,kDAAQ;AACrD,kBAAkB,kDAAQ,gBAAgB,kDAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sDAAK;AACxB;AACA;AACA;AACA;AACA;AACA,0DAA0D,sDAAK;AAC/D;AACA,kBAAkB,sDAAK;AACvB,qBAAqB,sDAAK,YAAY,sDAAK;AAC3C;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC;AACA,8BAA8B,4CAAK;;AAEnC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,UAAU;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC,sDAAK;AAC7C;AACA;AACA,wDAAwD,sDAAK;AAC7D;AACA;AACA;AACA,wCAAwC,sDAAK;AAC7C;AACA;AACA,yDAAyD,sDAAK;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,sDAAK;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,sEAAkB;AACtB,IAAI,sEAAkB;AACtB,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA,kBAAkB,gDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kDAAQ;AACzB;AACA;AACA;AACA;AACA,uBAAuB,sDAAK;AAC5B,UAAU;AACV,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA,uDAAuD,sDAAK;AAC5D,yDAAyD,sDAAK;AAC9D,0DAA0D,sDAAK;AAC/D,yBAAyB,sDAAK;AAC9B,uBAAuB,sDAAK;AAC5B,sBAAsB,sDAAK;AAC3B,kBAAkB,sDAAK;AACvB;AACA,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C,UAAU;AACV,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAQ;AACrC;AACA,iCAAiC,4CAAK;;AAEtC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,UAAU;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,sDAAK;AAChD;AACA;AACA,2DAA2D,sDAAK;AAChE;AACA;AACA;AACA,2CAA2C,sDAAK;AAChD;AACA;AACA,4DAA4D,sDAAK;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,sDAAK;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,sEAAkB;AACtB,IAAI,sEAAkB;AACtB,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA,kBAAkB,gDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kDAAQ;AACzB;AACA;AACA;AACA;AACA,uBAAuB,sDAAK;AAC5B,UAAU;AACV,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA,0DAA0D,sDAAK;AAC/D,4DAA4D,sDAAK;AACjE,6DAA6D,sDAAK;AAClE,yBAAyB,sDAAK;AAC9B,uBAAuB,sDAAK;AAC5B,sBAAsB,sDAAK;AAC3B,kBAAkB,sDAAK;AACvB;AACA,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C,UAAU;AACV,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA,yBAAyB,kDAAQ;AACjC;AACA,6BAA6B,4CAAK;;AAElC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,UAAU;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC,sDAAK;AAC5C;AACA;AACA,uDAAuD,sDAAK;AAC5D;AACA;AACA;AACA,uCAAuC,sDAAK;AAC5C;AACA;AACA,wDAAwD,sDAAK;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,sDAAK;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,sEAAkB;AACtB,IAAI,sEAAkB;AACtB,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA,kBAAkB,gDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kDAAQ;AACzB;AACA;AACA;AACA;AACA,uBAAuB,sDAAK;AAC5B,UAAU;AACV,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B;AACA;AACA,sDAAsD,sDAAK;AAC3D,yDAAyD,sDAAK;AAC9D,yBAAyB,sDAAK;AAC9B,uBAAuB,sDAAK;AAC5B,sBAAsB,sDAAK;AAC3B,kBAAkB,sDAAK;AACvB;AACA,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C,UAAU;AACV,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;;AAEA,uCAAuC,sDAAK;AAC5C;AACA;AACA,uDAAuD,sDAAK;AAC5D;AACA;AACA;AACA;AACA,uCAAuC,sDAAK;AAC5C;AACA;AACA,wDAAwD,sDAAK;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,sDAAK;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,sEAAkB;AACtB,IAAI,sEAAkB;AACtB,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA,kBAAkB,gDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sDAAK;AAC5B,UAAU;AACV,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B;AACA;AACA,sDAAsD,sDAAK;AAC3D,yDAAyD,sDAAK;AAC9D,yBAAyB,sDAAK;AAC9B,uBAAuB,sDAAK;AAC5B,sBAAsB,sDAAK;AAC3B,kBAAkB,sDAAK;AACvB;AACA,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C,UAAU;AACV,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC,sDAAK;AAC7C;AACA;AACA,wDAAwD,sDAAK;AAC7D;AACA;AACA;AACA,wCAAwC,sDAAK;AAC7C;AACA;AACA,yDAAyD,sDAAK;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,sDAAK;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,sEAAkB;AACtB,IAAI,sEAAkB;AACtB,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA,kBAAkB,gDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA,uBAAuB,sDAAK;AAC5B,UAAU;AACV,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B;AACA;AACA,uDAAuD,sDAAK;AAC5D,0DAA0D,sDAAK;AAC/D,yBAAyB,sDAAK;AAC9B,uBAAuB,sDAAK;AAC5B,sBAAsB,sDAAK;AAC3B,kBAAkB,sDAAK;AACvB;AACA,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C,UAAU;AACV,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC,sDAAK;AAC9C;AACA;AACA,yDAAyD,sDAAK;AAC9D;AACA;AACA;AACA,yCAAyC,sDAAK;AAC9C;AACA;AACA,0DAA0D,sDAAK;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,sDAAK;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,sEAAkB;AACtB,IAAI,sEAAkB;AACtB,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA,kBAAkB,gDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA,uBAAuB,sDAAK;AAC5B,UAAU;AACV,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B;AACA;AACA,wDAAwD,sDAAK;AAC7D,2DAA2D,sDAAK;AAChE,yBAAyB,sDAAK;AAC9B,uBAAuB,sDAAK;AAC5B,sBAAsB,sDAAK;AAC3B,kBAAkB,sDAAK;AACvB;AACA,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C,UAAU;AACV,yBAAyB,sDAAK,YAAY,sDAAK;AAC/C;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC,sDAAK;AAC9C;AACA;AACA,yDAAyD,sDAAK;AAC9D,yCAAyC,sDAAK;AAC9C;AACA;AACA,0DAA0D,sDAAK;AAC/D;AACA;AACA;AACA;AACA,6DAA6D,sDAAK;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,sEAAkB;AACtB,IAAI,sEAAkB;AACtB,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA,kBAAkB,gDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA,mBAAmB,sDAAK;AACxB;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA,wDAAwD,sDAAK;AAC7D,yDAAyD,sDAAK;AAC9D,2DAA2D,sDAAK;AAChE,yBAAyB,sDAAK;AAC9B,uBAAuB,sDAAK;AAC5B,sBAAsB,sDAAK;AAC3B,kBAAkB,sDAAK;AACvB,qBAAqB,sDAAK,YAAY,sDAAK;AAC3C;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C,sDAAK;AACnD;AACA;AACA,8DAA8D,sDAAK;AACnE,8CAA8C,sDAAK;AACnD;AACA;AACA,+DAA+D,sDAAK;AACpE;AACA;AACA;AACA;AACA,kEAAkE,sDAAK;AACvE;AACA;AACA;AACA;AACA;AACA,eAAe,sDAAK;AACpB,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA,mBAAmB,sDAAK;AACxB;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA,6DAA6D,sDAAK;AAClE,8DAA8D,sDAAK;AACnE,sBAAsB,sDAAK;AAC3B,kBAAkB,sDAAK;AACvB,qBAAqB,sDAAK,YAAY,sDAAK;AAC3C;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC,sDAAK;AAC5C;AACA;AACA,uDAAuD,sDAAK;AAC5D,uCAAuC,sDAAK;AAC5C;AACA;AACA,wDAAwD,sDAAK;AAC7D;AACA;AACA;AACA;AACA,2DAA2D,sDAAK;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,sEAAkB;AACtB,IAAI,sEAAkB;AACtB,cAAc,sDAAK;AACnB,iBAAiB,sDAAK,YAAY,sDAAK;AACvC;AACA;;AAEA;AACA;AACA,kBAAkB,gDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA,uBAAuB,sDAAK;AAC5B,UAAU;AACV,sBAAsB,sDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAK;AAC3B;AACA;AACA,sDAAsD,sDAAK;AAC3D,yDAAyD,sDAAK;AAC9D,yBAAyB,sDAAK;AAC9B,uBAAuB,sDAAK;AAC5B,kBAAkB,sDAAK;AACvB,qBAAqB,sDAAK,YAAY,sDAAK;AAC3C;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;ACpoEZ;AACA;;AAEA;;AAEgD;AAClB;AACwB;AACS;AAClB;;;AAG7C;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,YAAY,0DAAiB;AAC7B,yDAAyD,sDAAK,kBAAkB,sDAAK;AACrF,UAAU;AACV,YAAY,qDAAY;AACxB,yDAAyD,sDAAK,kBAAkB,sDAAK;AACrF;AACA,KAAK;;AAEL;AACA,4BAA4B,8DAAc;AAC1C,QAAQ,8DAAc,YAAY,sDAAK;AACvC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK,yBAAyB,sDAAK;AACrE,KAAK;;AAEL;AACA;AACA,YAAY,8DAAc;AAC1B;AACA;AACA;AACA,QAAQ,8DAAc,YAAY,sDAAK;AACvC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,eAAe,sDAAK;AAC1C;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;ACnFZ;AACA;;AAEA;;AAEgD;AACN;;;AAG1C;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B,kBAAkB,kDAAQ;AAC1B;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kDAAQ;AACxB;AACA,gBAAgB,kDAAQ;AACxB;AACA,gBAAgB,kDAAQ;AACxB;AACA;;AAEA;AACA,YAAY,kDAAQ;AACpB;AACA;;AAEA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA,oCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,QAAQ;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;AC3HZ;AACA;;AAEA;;AAEgD;AAClB;AACwB;AACP;AACF;;;AAG7C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,wBAAwB,8DAAc;AACtC,QAAQ,8DAAc,aAAa,sDAAK;AACxC,QAAQ,8DAAc,YAAY,sDAAK,gBAAgB,sDAAK,gBAAgB,sDAAK,OAAO,sDAAK;AAC7F,QAAQ,8DAAc,aAAa,sDAAK;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ,8DAAc;AACtB,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,kCAAkC,uDAAU;AAC5C,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,8DAAc;AAC1B;AACA,iCAAiC,8DAAc;AAC/C,gBAAgB,8DAAc,aAAa,sDAAK;AAChD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,8DAAc,eAAe,sDAAK,aAAa,sDAAK,iBAAiB,sDAAK;AAC1F,gBAAgB,8DAAc,eAAe,sDAAK,aAAa,sDAAK,iBAAiB,sDAAK;AAC1F,gBAAgB,8DAAc,YAAY,sDAAK,gBAAgB,sDAAK,OAAO,sDAAK,OAAO,sDAAK;AAC5F,gBAAgB,8DAAc,eAAe,sDAAK,aAAa,sDAAK,qBAAqB,sDAAK;AAC9F,gBAAgB,8DAAc,gBAAgB,sDAAK;AACnD,gBAAgB,8DAAc,aAAa,sDAAK;AAChD,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA,4DAAY,sCAAsC,sCAAE;;;;;;;;;;;;;;;AC/HpD;AACA;;AAEA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzTA;AACA;;AAEA;;AAE6B;AACkB;AACD;AACsB;AAC3B;AACqB;AACR;AACwB;AACP;AACvB;AACI;AAChB;AACiB;AACqB;AACd;AACb;AACK;AACb;AAC0B;AACxB;AACD;;;AAGxC;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,yDAAO,SAAS,uDAAU;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,gFAA2B;AACpE;AACA;AACA;AACA;AACA;AACA,mBAAmB,yDAAW,yBAAyB,2EAAmB;AAC1E;AACA;AACA;AACA,iBAAiB,eAAe;AAChC;AACA;AACA,UAAU;AACV;AACA;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA,2BAA2B,yDAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,cAAc;AAC/B,qBAAqB,cAAc;AACnC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,+DAAc;AAClD,IAAI,+DAAc,YAAY,+DAAK;AACnC,IAAI,+DAAc,YAAY,+DAAK,kCAAkC,+DAAK;AAC1E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,8DAAW;AACf,kCAAkC,+DAAK,iDAAiD,+DAAK;AAC7F;;AAEA;AACA;AACA;AACA,0CAA0C,sCAAE;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC,+DAAgB;AACrD,0BAA0B,uDAAU;AACpC;AACA;AACA;AACA,uBAAuB,yDAAW,yBAAyB,2EAAmB;AAC9E;AACA;AACA,iCAAiC,gEAAS;AAC1C;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,sBAAsB,yDAAW;AACjC;AACA;AACA;AACA,2DAA2D,4DAAK;AAChE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,2BAA2B,2CAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,kDAAO;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,kDAAO;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sEAAY;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0CAA0C,sCAAE;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,SAAS;AACrC;AACA;AACA;AACA;AACA,2BAA2B,sCAAE,QAAQ,uDAAU,uCAAuC,EAAE;AACxF,2CAA2C,yDAAO;AAClD;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,+DAAc;AAC/B;AACA;AACA,yBAAyB,kBAAkB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yDAAW,yBAAyB,2EAAmB;AAC1E;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA,sCAAsC,gEAAS;AAC/C;AACA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA,kBAAkB,yDAAW;AAC7B;AACA;AACA,mDAAmD,8CAAM,kBAAkB,4DAAK;AAChF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,6CAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,oEAAmB;AAC3D;AACA;;AAEA;AACA,sCAAsC,+DAAgB;AACtD,4BAA4B,uDAAU;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAiC,qEAAc;AAC/C;AACA,2BAA2B,WAAW;AACtC,gCAAgC,UAAU;AAC1C,2CAA2C,yDAAW,4BAA4B,yDAAW;AAC7F;AACA;AACA,4BAA4B,WAAW;AACvC,+BAA+B,aAAa;AAC5C,2CAA2C,yDAAW,4BAA4B,yDAAW;AAC7F;AACA;AACA;AACA;AACA,yBAAyB,SAAS;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,yDAAW,0BAA0B,yDAAW;AACvF;AACA;AACA,yBAAyB,SAAS;AAClC;AACA,gCAAgC,WAAW;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,yDAAW,kCAAkC,yDAAW;AACnG;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC,sDAAW;AAC7C;AACA,yBAAyB,SAAS;AAClC;AACA;AACA;AACA;AACA,wCAAwC,iDAAM,CAAC,yDAAW,kCAAkC,yDAAW;AACvG;AACA;AACA,yBAAyB,SAAS;AAClC,gCAAgC,WAAW;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,iDAAM,CAAC,yDAAW,gCAAgC,yDAAW;AAC7G;AACA;AACA;AACA,gDAAgD,iDAAM,CAAC,yDAAW,gCAAgC,yDAAW;AAC7G;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,2EAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,yDAAW,yBAAyB,2EAAmB;AAC/E,kBAAkB,kDAAQ;AAC1B;AACA,YAAY,kDAAE;AACd;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B,+BAA+B,sCAAE;AACjC,oBAAoB,2EAAmB;AACvC;AACA;AACA,8CAA8C,qEAAc;AAC5D;AACA,wBAAwB,QAAQ;AAChC,gCAAgC,sCAAE;AAClC,4BAA4B,mBAAmB;AAC/C,+BAA+B,iDAAO;AACtC,kCAAkC,uEAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kDAAQ,sBAAsB,kDAAQ,8FAA8F,kDAAQ,sBAAsB,kDAAQ;AAClO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,2EAAmB;AAClC;AACA,sCAAsC,sDAAW;AACjD;AACA,wBAAwB,yDAAW,yBAAyB,2EAAmB;AAC/E,kBAAkB,kDAAQ;AAC1B;AACA,YAAY,kDAAE;AACd;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B,+BAA+B,sCAAE;AACjC,oBAAoB,2EAAmB;AACvC;AACA;AACA,wBAAwB,QAAQ;AAChC,gCAAgC,sCAAE;AAClC,4BAA4B,mBAAmB;AAC/C,+BAA+B,iDAAO;AACtC,kCAAkC,uEAAE;AACpC;AACA;AACA;AACA,iCAAiC,kDAAQ,sBAAsB,kDAAQ;AACvE,6BAA6B,kDAAQ,sBAAsB,kDAAQ;AACnE;AACA;AACA,oDAAoD,iDAAM;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,yDAAW,yBAAyB,2EAAmB;AAC3E,cAAc,kDAAQ;AACtB,cAAc,8CAAM;AACpB;AACA,kCAAkC,qEAAc;AAChD;AACA,wBAAwB,SAAS;AACjC;AACA,wCAAwC,kDAAQ,sBAAsB,yDAAW,kCAAkC,kDAAQ,sBAAsB,yDAAW;AAC5J;AACA,6BAA6B,WAAW;AACxC;AACA;AACA,wCAAwC,kDAAQ,sBAAsB,yDAAW,mCAAmC,kDAAQ,sBAAsB,yDAAW;AAC7J;AACA;AACA;AACA,mCAAmC,sDAAW;AAC9C,6BAA6B,WAAW;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,iDAAM,CAAC,kDAAQ,sBAAsB,yDAAW,6BAA6B,kDAAQ,sBAAsB,yDAAW;AAC/J;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,yDAAW;AACrC,iBAAiB,yDAAW,kCAAkC,2EAAmB,iBAAiB,2EAAmB;AACrH;AACA;AACA,iBAAiB,yDAAW;AAC5B,cAAc,kDAAQ;AACtB,kBAAkB,kDAAQ;AAC1B;AACA;AACA,mCAAmC,qEAAc;AACjD;AACA,wBAAwB,SAAS;AACjC,8BAA8B,QAAQ;AACtC,6CAA6C,yDAAW,4BAA4B,yDAAW;AAC/F;AACA;AACA,0BAA0B,SAAS;AACnC,4BAA4B,SAAS;AACrC,6CAA6C,yDAAW,4BAA4B,yDAAW;AAC/F;AACA;AACA;AACA,wBAAwB,SAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,yDAAW,4BAA4B,yDAAW;AAC3F;AACA;AACA,wBAAwB,SAAS;AACjC;AACA,8BAA8B,SAAS;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,yDAAW,sCAAsC,yDAAW;AACzG;AACA;AACA;AACA;AACA;AACA,gCAAgC,kDAAQ;AACxC;AACA;AACA,yCAAyC,kDAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,yDAAW;AACrC,iBAAiB,yDAAW,kCAAkC,2EAAmB,iBAAiB,2EAAmB;AACrH;AACA;AACA,iBAAiB,yDAAW;AAC5B,cAAc,kDAAQ;AACtB,kBAAkB,kDAAQ;AAC1B;AACA;AACA;AACA;AACA,gCAAgC,kDAAQ;AACxC;AACA;AACA,0CAA0C,kDAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,8CAAM;AAC1B;AACA;AACA,oCAAoC,sDAAW;AAC/C,wBAAwB,SAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,iDAAM,CAAC,yDAAW,mCAAmC,yDAAW;AAC1G;AACA;AACA,wBAAwB,SAAS;AACjC,8BAA8B,SAAS;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,iDAAM,CAAC,yDAAW,kCAAkC,yDAAW;AACjH;AACA;AACA;AACA,kDAAkD,iDAAM,CAAC,yDAAW,kCAAkC,yDAAW;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC,qEAAc;AACpD;AACA,wBAAwB,yDAAW;AACnC,kBAAkB,kDAAQ;AAC1B,wBAAwB,SAAS;AACjC,8BAA8B,QAAQ;AACtC,gDAAgD,kDAAQ,sBAAsB,yDAAW,kCAAkC,kDAAQ,sBAAsB,yDAAW;AACpK;AACA;AACA,0BAA0B,SAAS;AACnC,4BAA4B,SAAS;AACrC,gDAAgD,kDAAQ,sBAAsB,yDAAW,kCAAkC,kDAAQ,sBAAsB,yDAAW;AACpK;AACA;AACA;AACA,wBAAwB,SAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,kDAAQ,sBAAsB,yDAAW,kCAAkC,kDAAQ,sBAAsB,yDAAW;AAChK;AACA;AACA,wBAAwB,SAAS;AACjC;AACA,8BAA8B,SAAS;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,kDAAQ,sBAAsB,yDAAW,4CAA4C,kDAAQ,sBAAsB,yDAAW;AAC9K;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,8CAAM;AAC1B,oBAAoB,yDAAW,yBAAyB,2EAAmB;AAC3E,cAAc,kDAAQ;AACtB;AACA,uCAAuC,sDAAW;AAClD,wBAAwB,SAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iDAAM,CAAC,kDAAQ,sBAAsB,yDAAW,oCAAoC,kDAAQ,sBAAsB,yDAAW;AAC1K;AACA,wBAAwB,SAAS;AACjC,8BAA8B,SAAS;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,iDAAM,CAAC,kDAAQ,sBAAsB,yDAAW,wCAAwC,kDAAQ,sBAAsB,yDAAW;AACtL;AACA;AACA;AACA,qDAAqD,iDAAM,CAAC,kDAAQ,sBAAsB,yDAAW,wCAAwC,kDAAQ,sBAAsB,yDAAW;AACtL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAiC,qEAAc;AAC/C;AACA,wBAAwB,SAAS;AACjC,8BAA8B,QAAQ;AACtC,2CAA2C,yDAAW,2BAA2B,yDAAW;AAC5F;AACA;AACA,0BAA0B,SAAS;AACnC,4BAA4B,SAAS;AACrC,2CAA2C,yDAAW,2BAA2B,yDAAW;AAC5F;AACA;AACA;AACA,wBAAwB,SAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,yDAAW,2BAA2B,yDAAW;AACxF;AACA;AACA,wBAAwB,SAAS;AACjC;AACA,8BAA8B,SAAS;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,yDAAW,mCAAmC,yDAAW;AACpG;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC,sDAAW;AAC7C,wBAAwB,SAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iDAAM,CAAC,yDAAW,6BAA6B,yDAAW;AAClG;AACA,wBAAwB,SAAS;AACjC,8BAA8B,SAAS;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,iDAAM,CAAC,yDAAW,iCAAiC,yDAAW;AAC9G;AACA;AACA;AACA,gDAAgD,iDAAM,CAAC,yDAAW,iCAAiC,yDAAW;AAC9G;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC,qEAAc;AAClD;AACA;AACA,0BAA0B,WAAW;AACrC,gCAAgC,UAAU;AAC1C,8CAA8C,yDAAW,0BAA0B,yDAAW;AAC9F;AACA;AACA,4BAA4B,WAAW;AACvC,4BAA4B,SAAS;AACrC,8CAA8C,yDAAW,wBAAwB,yDAAW;AAC5F;AACA;AACA;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,yDAAW,0BAA0B,yDAAW;AAC1F;AACA;AACA,0BAA0B,WAAW;AACrC;AACA,8BAA8B,SAAS;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,yDAAW,gCAAgC,yDAAW;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAqC,sDAAW;AAChD,6BAA6B,WAAW;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,iDAAM,CAAC,yDAAW,0BAA0B,yDAAW;AAClG;AACA,0BAA0B,WAAW;AACrC,gCAAgC,WAAW;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,iDAAM,CAAC,yDAAW,gCAAgC,yDAAW;AAChH;AACA;AACA;AACA,mDAAmD,iDAAM,CAAC,yDAAW,gCAAgC,yDAAW;AAChH;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;AC78BZ;AACA;;AAEA;;AAE+C;;;AAG/C;;AAEO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvBZ;AACA;;AAEA;;AAE6B;AACkB;AAOlB;AACmD;AACvC;AACa;AACP;AACd;AACO;AACA;AACP;;;AAGjC;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,2CAAI;AACR;AACA;AACA;AACA;AACA,IAAI,sEAAkB;;AAEtB;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;;AAEA,gCAAgC,kDAAQ;;AAExC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,wBAAwB,+BAA+B;AACvD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd,4BAA4B,+BAA+B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,8DAAc;AACnD,gBAAgB,8DAAc,YAAY,+DAAK;AAC/C;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA,gBAAgB,8DAAc,YAAY,+DAAK,yBAAyB,+DAAK;AAC7E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,2CAA2C,kCAAkC;AAC7E,+CAA+C,kCAAkC;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA,eAAe,sCAAE;AACjB,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,0CAAI;AACxB,oBAAoB,0CAAI;AACxB,oBAAoB,0CAAI;AACxB,oBAAoB,0CAAI;AACxB;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,uBAAuB,0CAAI;AAC3B,0BAA0B,0CAAI;AAC9B,2BAA2B,0CAAI;AAC/B,wBAAwB,0CAAI;AAC5B,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,kCAAkC,2CAAI;AACtC,QAAQ,2CAAI;AACZ;AACA;AACA;AACA;AACA,gBAAgB,2EAAuB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,2CAAI;AACZ;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC,6BAA6B,QAAQ;AACrC;AACA;AACA,oDAAoD,oEAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,2CAAI;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,2CAAI;AACZ,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,kCAAkC,2CAAI;AACtC,QAAQ,2CAAI;AACZ;AACA;AACA;AACA;AACA,gBAAgB,2EAAuB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC,6BAA6B,QAAQ;AACrC;AACA;AACA,oDAAoD,oEAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,YAAY,2CAAI;AAChB;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB,8BAA8B,iDAAO;AACrC;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC,6BAA6B,QAAQ;AACrC;AACA;AACA,oDAAoD,oEAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,0CAA0C,iDAAO;AACjD,oDAAoD,sCAAE;AACtD;AACA;AACA,UAAU;AACV,YAAY,2CAAI;AAChB;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,YAAY,4EAAwB;AACpC,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,4EAAwB;AACpC;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,oDAAU;AAC/B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wDAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B,kBAAkB,kDAAQ;AAC1B;AACA,KAAK;;AAEL;AACA,yBAAyB,2CAAI;AAC7B,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,wBAAwB,wDAAW;AACnC,iBAAiB,kDAAY;;AAE7B;AACA;AACA;AACA,0CAA0C,sCAAE;AAC5C,0CAA0C,sCAAE;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,iCAAiC,8DAAc;AAC/C,QAAQ,8DAAc,YAAY,+DAAK;AACvC,QAAQ,8DAAc,YAAY,+DAAK,mCAAmC,+DAAK;AAC/E,KAAK;;AAEL;AACA,QAAQ,2CAAI;AACZ;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,UAAU;AAClC,4BAA4B,UAAU;AACtC;AACA,iDAAiD,yDAAe;AAChE,qDAAqD,yDAAe;AACpE,uDAAuD,yDAAe;AACtE,2DAA2D,yDAAe;AAC1E;AACA;AACA;AACA,wDAAwD,yDAAe;AACvE,8DAA8D,yDAAe;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,UAAU;AAClC;AACA,mDAAmD,yDAAe;AAClE,uDAAuD,yDAAe;AACtE;AACA;AACA;AACA,0DAA0D,yDAAe;AACzE;AACA;AACA;AACA;;AAEA,4DAAY,4CAA4C,2CAAI;;;;;;;;;;;;;;;;;AC7oB5D;AACA;;AAEA;;AAE+C;AACL;;;AAG1C;;AAEO;;AAEP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,mDAAQ;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;AClDZ;AACA;;AAEA;;AAE6B;AACkB;AACe;AACtB;AACP;AACuC;AACzB;AACU;;;AAGzD;;AAEO;AACP;AACA;AACA,wCAAwC,iFAAuB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,iDAAO;AACnC,sCAAsC,sCAAE;AACxC;AACA,KAAK;;AAEL;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB,0CAA0C,wDAAO,aAAa,sCAAE,2DAA2D,sCAAE;AAC7H;AACA;AACA,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,2CAA2C,0CAAI;AAC/C,QAAQ,kEAAY;AACpB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,iBAAiB,sCAAE,sBAAsB,sCAAE;AAC3C;AACA;AACA,8BAA8B,sCAAE;AAChC,8BAA8B,sCAAE;AAChC,yBAAyB,sCAAE,qBAAqB,sCAAE;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;AAEZ,2EAAyB;AACzB;AACA,CAAC;;;;;;;;;;;;;;;;;;;ACtID;AACA;;AAEA;;AAE+C;AACN;AACC;;;AAG1C;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,mDAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,qBAAqB,mDAAQ;AAC7B,qBAAqB,mDAAQ;AAC7B,eAAe,kDAAQ;AACvB;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7CZ;AACA;;AAEA;;AAE6B;AACuC;AACQ;AACnC;AACJ;AACQ;AACC;AACC;AACO;AACH;AACa;AAChB;AACE;AACR;AACM;AACG;AACP;;;AAG5C;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,+DAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B,4DAAY;AACtC;AACA;AACA,mBAAmB,0EAAmB;AACtC;AACA;AACA,mBAAmB,sDAAS;AAC5B;AACA,uBAAuB,6DAAY;AACnC;AACA,mBAAmB,oDAAQ;AAC3B;AACA;AACA,4CAA4C,uEAAqB;AACjE;AACA;AACA,2BAA2B,0DAAW;AACtC;AACA;AACA;AACA;AACA;AACA,8BAA8B,0DAAW;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,iDAAK;AACxB;AACA;AACA,mBAAmB,iDAAK;AACxB;AACA;AACA;AACA;AACA,gEAAgE,sCAAE;AAClE,yBAAyB,iDAAK;AAC9B;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA,2BAA2B,8CAAI;AAC/B;AACA,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sCAAE;AAC7B;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,8CAAI;AAC9B;AACA,6BAA6B,8CAAI;AACjC;AACA;AACA,sBAAsB,8CAAI;AAC1B;AACA,6BAA6B,8CAAI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA,mFAAmF,8CAAI;AACvF,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mDAAmD,iDAAK;AACxD,gDAAgD,iDAAK;AACrD;AACA;AACA,YAAY,sCAAE;AACd;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,iDAAK;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kDAAQ;AAC3B,2BAA2B,kDAAQ;AACnC,2BAA2B,kDAAQ;AACnC,2BAA2B,kDAAQ;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,8CAAI;AACnB,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE,mDAAmD,8DAAgB;AACjF,mBAAmB,uDAAU,qDAAqD,EAAE,EAAE,EAAE,EAAE,EAAE;AAC5F;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,cAAc,sCAAE;AAChB;AACA;AACA;AACA,gBAAgB,8CAAI,8BAA8B,8CAAI;AACtD,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,uBAAuB,kDAAQ;AAC/B,+BAA+B,kDAAQ;AACvC,+BAA+B,kDAAQ;AACvC,+BAA+B,kDAAQ;AACvC,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wDAAW;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sCAAE,0BAA0B,4DAAS;AACzD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,IAAI;AACX,OAAO,IAAI;AACX,OAAO,IAAI;AACX,OAAO,IAAI;;AAEX;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,yCAAyC,sDAAU;;;;;;;;;;;;;;;;;;;;;;;AC74B/D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,+DAA+D;AACrE;;AAE+C;;;AAG/C;;AAEO;;AAEP,4DAAY;;;AAGZ;;AAEO;;AAEP,4DAAY;;;AAGZ;;AAEO;;AAEP,4DAAY;;;AAGZ;;AAEO;;AAEP,4DAAY;;;AAGZ;;AAEO;;AAEP,4DAAY;;;AAGZ;;AAEO;;AAEP,4DAAY;;;AAGZ;;AAEO;;AAEP,4DAAY;;;AAGZ;;AAEO;;AAEP,4DAAY;;;;;;;;;;;;;;;;;;ACzEZ;AACA;;AAEA;;AAE+C;AACN;AACL;;;AAGpC;;AAEO;AACP,mBAAmB,kDAAQ;AAC3B,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,6CAAM;AAC/B,UAAU;AACV,yBAAyB,6CAAM;AAC/B,UAAU;AACV,yBAAyB,6CAAM;AAC/B,UAAU;AACV,yBAAyB,6CAAM;AAC/B,UAAU;AACV,yBAAyB,6CAAM;AAC/B,UAAU;AACV,yBAAyB,6CAAM;AAC/B;AACA,UAAU;AACV,yBAAyB,6CAAM;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;AAEZ;;;;;;;;;;;;;;;;;;;ACpFA;AACA;;AAEA;;AAE8B;AACkB;AACZ;AACmB;;;AAGvD;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA,yBAAyB,4CAAK;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA,yBAAyB,4CAAK;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB,+DAAK;AAC1B,mBAAmB,+DAAK;AACxB;;AAEA;AACA;AACA,qBAAqB,+DAAK;AAC1B,mBAAmB,+DAAK;AACxB,qBAAqB,+DAAK,aAAa,+DAAK,iBAAiB,+DAAK;AAClE,qBAAqB,+DAAK,aAAa,+DAAK,iBAAiB,+DAAK;AAClE;AACA,kBAAkB,+DAAK,gBAAgB,+DAAK,qCAAqC,+DAAK,MAAM,+DAAK;AACjG,qBAAqB,+DAAK,aAAa,+DAAK,qBAAqB,+DAAK;AACtE,qBAAqB,+DAAK,aAAa,+DAAK,qBAAqB,+DAAK;AACtE;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA;;AAEA,4DAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,MAAM;AAC1C,IAAI;AACJ;AACA;AACA;AACA;AACA,UAAU,WAAW;AACrB,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,EAAE;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC7nBA;AACA;;AAEA;;AAE8B;AACkB;AACP;AACO;AACN;;;AAG1C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,mDAAQ;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,8BAA8B,iDAAO;AACrC;AACA,wCAAwC,sCAAE;AAC1C;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,sBAAsB,sCAAE;AACxB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA,kCAAkC,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sCAAE;AACjC;AACA;AACA;AACA,kCAAkC,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA,2BAA2B,qBAAqB;AAChD,uDAAuD,sCAAE,eAAe,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,yFAAyF,sCAAE;AAC3F;AACA,oBAAoB,sCAAE;AACtB,2CAA2C,sCAAE;AAC7C;AACA;AACA,yDAAyD,sCAAE;AAC3D;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd,uCAAuC,sCAAE;AACzC;AACA;AACA,YAAY,sCAAE;AACd,qCAAqC,sCAAE;AACvC,gBAAgB,sCAAE;AAClB,yCAAyC,sCAAE;AAC3C;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,sCAAE;AAC3C,gBAAgB,sCAAE;AAClB,6CAA6C,sCAAE;AAC/C;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd,sCAAsC,sCAAE;AACxC,gBAAgB,sCAAE;AAClB,0CAA0C,sCAAE;AAC5C;AACA;AACA;AACA;AACA,yBAAyB,wDAAW;AACpC;AACA;AACA;AACA,YAAY,sCAAE,oCAAoC,sCAAE,oCAAoC,sCAAE,oCAAoC,sCAAE;AAChI,oCAAoC,sCAAE;AACtC,oCAAoC,sCAAE;AACtC,oCAAoC,sCAAE;AACtC,oCAAoC,sCAAE;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,sCAAE;AACd,sDAAsD,sCAAE;AACxD;AACA;AACA,YAAY,sCAAE;AACd,sDAAsD,sCAAE;AACxD;AACA;AACA,YAAY,sCAAE;AACd,sDAAsD,sCAAE;AACxD;AACA,YAAY,sCAAE;AACd,sDAAsD,sCAAE;AACxD;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,wBAAwB,0BAA0B;AAClD;AACA,gDAAgD,sCAAE;AAClD;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,wBAAwB,2BAA2B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,sCAAsC,mDAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7a1D;AACA;;AAEA;AACA;AACA;;AAE8B;AACgC;AACD;AACb;AACa;AACjB;;;AAG5C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;;AAEP;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,sCAAE;AAC3C;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,sCAAE;AAC3C;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,sCAAE;AAC3C;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,sCAAE;AAC3C;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sCAAE;AACxB;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA,8DAA8D,sCAAE;AAChE;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA,IAAI,qDAAS;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,qDAAS;AACjB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,qEAAY;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sEAAiB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wDAAM;AACjC;AACA;AACA;AACA,mBAAmB,wDAAM;AACzB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sCAAE,0BAA0B,sCAAE,0BAA0B,sCAAE;AACrF,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kBAAkB,wDAAM;AACxB,wBAAwB,sBAAsB;AAC9C;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kBAAkB,wDAAM;AACxB,wBAAwB,sBAAsB;AAC9C;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kBAAkB,wDAAM;AACxB,wBAAwB,sBAAsB;AAC9C;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kBAAkB,wDAAM;AACxB,wBAAwB,sBAAsB;AAC9C;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,kBAAkB,wDAAM;AACxB,wBAAwB,sBAAsB;AAC9C;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,YAAY,qDAAS;AACrB;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA,gDAAgD,sCAAE;AAClD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,0BAA0B,qDAAS;AACnC,gDAAgD,sCAAE;AAClD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,4CAA4C,sCAAE;AAC9C;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,4CAA4C,sCAAE;AAC9C;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,4CAA4C,sCAAE;AAC9C;AACA;AACA;;AAEA,4DAAY,4CAA4C,qDAAS;;;;;;;;;;;;;;;;;ACvnBjE;AACA;;AAEA;;AAEgD;AACJ;;;AAG5C;AACA;AACA;AACA;;AAEO;AACP,IAAI,qDAAS;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,4DAAY,kDAAkD,qDAAS;;;;;;;;;;;;;;;;;;;;;;;;ACnEvE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAE8B;AACK;AACmC;AAC1B;AACQ;AACN;AACA;AACY;AACP;;;AAGnD;AACA;AACO;AACP;;AAEA,sBAAsB,sCAAE;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B,mEAAgB;AAC3C;AACA;AACA,2BAA2B,+EAAqB;AAChD;AACA;AACA,2BAA2B,qDAAS;AACpC;AACA;AACA,2BAA2B,6DAAa;AACxC;AACA;AACA,2BAA2B,uDAAa;AACxC;AACA;AACA,2BAA2B,uDAAU;AACrC;AACA;AACA,2BAA2B,4DAAY;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4CAAK;;;;;;;;;;;;;;;;;;;;AC9DL;AACA;;AAEA;AACA;AACA;AACA;;AAEgD;AACN;AACwB;AAClB;AACb;;;AAGnC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,4CAAK;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,QAAQ,4CAAK;AACb,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,mCAAmC,mEAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wDAAW;AAC/B,kBAAkB,wDAAW;AAC7B,kBAAkB,kDAAQ;AAC1B;AACA;AACA;AACA,mBAAmB,kDAAQ;AAC3B,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA,2BAA2B,kDAAQ;AACnC,4BAA4B,kDAAQ;AACpC;AACA,wBAAwB,YAAY;AACpC,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,gGAAgG,4DAAK;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,0EAA0E,4CAAK;;;;;;;;;;;;;;;;;;ACtM3F;AACA;;AAEA;;AAEgD;AACZ;AACD;;;AAGnC;;AAEO;AACP,IAAI,4CAAK;AACT;;AAEA;AACA;AACA,QAAQ,4CAAK;AACb,QAAQ,4CAAK;AACb;AACA;AACA;;AAEA,4DAAY,sCAAsC,4CAAK;;;;;;;;;;;;;;;;;;;;;;;;;ACxBvD;AACA;;AAEA;;AAE8B;AACyB;AACjB;AACe;AACC;AACO;AACjB;AACK;AACP;AACP;;;AAGnC;;AAEO;AACP;AACA;AACA;AACA;AACA,IAAI,4CAAK;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,2CAA2C,qDAAS;AACrE,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sCAAE,0CAA0C,qDAAS;AACpE,KAAK;;AAEL;AACA,2BAA2B,8CAAI;AAC/B,2BAA2B,kDAAQ;AACnC;AACA;AACA;AACA;AACA,iEAAiE,iDAAK;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sCAAE;AAC7C;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,iDAAK;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,kDAAQ;AAChB,QAAQ,4CAAK;AACb,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,4CAAK;AACb,KAAK;;AAEL;AACA,YAAY,sCAAE,0CAA0C,qDAAS;AACjE;AACA,8CAA8C,sCAAE,UAAU,EAAE,GAAG,GAAG,EAAE;AACpE;AACA;AACA,KAAK;;AAEL;AACA,eAAe,4CAAK;AACpB,KAAK;;AAEL;AACA,eAAe,4CAAK;AACpB,KAAK;;AAEL;AACA,QAAQ,4CAAK;AACb,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,YAAY,sCAAE,0CAA0C,0DAAW;AACnE,YAAY,8DAAS;AACrB;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,YAAY,8DAAS;AACrB;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sEAAiB;AAC7B;AACA;AACA;AACA;AACA,gBAAgB,6DAAa;AAC7B;AACA;AACA;AACA,gBAAgB,8DAAS;AACzB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV,mBAAmB,sEAAiB;AACpC;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd,2CAA2C,sCAAE;AAC7C;AACA,gBAAgB,6DAAa;AAC7B,yBAAyB,qDAAS,sCAAsC,sCAAE;AAC1E;AACA;AACA,yBAAyB,0DAAW,sCAAsC,sCAAE;AAC5E;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,kDAAkD,4CAAK;;;;;;;;;;;;;;;;;;;;;;;AC3OnE;AACA;;AAEA;;AAE8B;AACkB;AACd;AACkB;AAC0B;AACzC;AACU;AACS;;;AAGxD;;AAEO;AACP,IAAI,uDAAa;AACjB;AACA;;AAEA,mBAAmB,0CAAI;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,8DAAgB;AAC/C;AACA;AACA;AACA,cAAc,uDAAU;AACxB,sBAAsB,wEAAsB;AAC5C;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,kBAAkB,kDAAQ,+CAA+C,6CAAM;AAC/E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC,kDAAQ;AACxC,4CAA4C,kDAAQ;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAqC,sCAAE;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAa;AAC5B,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,4DAAY,mCAAmC,uDAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;AChG5D;AACA;;AAEA;;AAEwB;;AAEM;AACgC;AACxB;AACM;AACK;AACf;;;AAGlC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP,cAAc,0CAAI;AAClB;AACA;AACA;AACA;AACA,sBAAsB,sCAAE;AACxB,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA,iBAAiB,6CAAM;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,yBAAyB,4CAAK;AAC9B;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,gBAAgB,yDAAa;AAC9C,KAAK;;AAEL,4BAA4B;;AAE5B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,iCAAiC;;AAEjC;AACA;AACA,KAAK;;AAEL;AACA,uBAAuB,4CAAK;AAC5B;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,8CAAI;AACzD,mDAAmD,8CAAI;AACvD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,0CAA0C;;AAE1C;AACA,kBAAkB,0CAAI;AACtB;AACA;AACA,qBAAqB,4CAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,8CAAI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,mDAAY,oBAAoB,cAAc;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtaZ;AACA;;AAEA;;AAE8B;AACuC;AAOzC;AAC+B;AACG;AACb;AACK;AACK;AACA;AACkD;AACzE;AACQ;AACI;AACR;AACE;AACwB;AACnB;AACD;AACL;AACN;AACmB;AACgB;AAC1B;AACQ;AACV;AACP;AACW;AACqB;AAChB;AACD;AACG;;;AAGrD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kDAAQ;;AAE1C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,mEAAqB;AAC7B,QAAQ,mEAAqB;AAC7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4EAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,wDAAU;AAC3C;AACA,IAAI,2DAAO;AACX;;AAEA;AACA;AACA;AACA,mDAAmD,8DAAgB;AACnE;AACA;AACA,0BAA0B,2EAAmB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,wDAAU;AAC5B;AACA,sBAAsB,kDAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,oDAAQ;AAC5B,mBAAmB,+CAAQ;AAC3B,oBAAoB,mDAAQ;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA;AACA;AACA,IAAI,sCAAE;AACN,IAAI,sCAAE;AACN;;AAEA;AACA,qCAAqC,kDAAO;AAC5C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,6CAAK;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,6DAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,8DAAa;AAC7B;AACA;;AAEA;AACA,gBAAgB,8DAAa;;AAE7B;AACA;AACA;AACA;AACA;AACA,sCAAsC,yDAAc;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,gBAAgB,sCAAE;AAClB,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,sCAAE,UAAU,IAAI,EAAE;AAC7B;;AAEA;AACA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA;AACA;AACA,IAAI,sCAAE;AACN;AACA,aAAa,sCAAE;AACf,gBAAgB,sCAAE;AAClB;AACA;AACA,UAAU;AACV,gBAAgB,sCAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,sCAAE;AACf,gBAAgB,sCAAE;AAClB;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,IAAI,sCAAE;AACN,IAAI,sCAAE;AACN,IAAI,sCAAE;AACN;AACA;;AAEA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA,YAAY,sCAAE,mCAAmC,sCAAE;AACnD;AACA,UAAU,UAAU,sCAAE,kCAAkC,sCAAE;AAC1D,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,kDAAQ;AAC9B,oBAAoB,kDAAQ;AAC5B,oBAAoB,kDAAQ;AAC5B,SAAS,sCAAE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA,YAAY,iDAAO,kCAAkC,iDAAK,8CAA8C,kDAAQ;AAChH,UAAU;AACV;AACA;AACA,wCAAwC,kDAAQ;AAChD;AACA;AACA,wCAAwC,kDAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,kDAAQ;AAC7D,iBAAiB,kDAAQ,qDAAqD,kDAAQ;AACtF;AACA,oBAAoB,kDAAQ,cAAc,kDAAQ,IAAI,kDAAQ;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,8DAAU;AAClB,qBAAqB,8DAAgB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE,WAAW,sCAAE;AAChD;AACA;AACA;AACA,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS,sCAAE;AACX;AACA;AACA;AACA,8BAA8B,sCAAE;AAChC;AACA;AACA,QAAQ,8DAAU;AAClB,qBAAqB,8DAAgB;AACrC;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE,WAAW,sCAAE;AAC5C;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,kDAAQ;AAC5C,UAAU;AACV,oCAAoC,kDAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,UAAU;AACjC,qBAAqB,sCAAE;AACvB;AACA;AACA,0BAA0B,sCAAE,gBAAgB,8DAAa,uBAAuB,sCAAE,gBAAgB,8DAAa;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,2EAAmB;AACxD,mCAAmC,2EAAmB;AACtD,iCAAiC,2EAAmB;AACpD,kCAAkC,2EAAmB;AACrD,wBAAwB,2EAAmB,wBAAwB,2EAAmB;AACtF;AACA,4BAA4B,2EAAmB;AAC/C,4CAA4C,2EAAmB;AAC/D;AACA,4BAA4B,2EAAmB;AAC/C,sDAAsD,2EAAmB;AACzE;AACA;AACA,4BAA4B,sCAAE,gBAAgB,oEAAgB;AAC9D,sCAAsC,sCAAE,iBAAiB,oEAAgB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA,kBAAkB,sCAAE;AACpB;AACA;AACA,0DAA0D,mDAAQ,yCAAyC,mDAAQ;AACnH;AACA;AACA,gDAAgD,6CAAK;AACrD;AACA;AACA,4CAA4C,kDAAQ;AACpD,yEAAyE,kDAAQ;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA;AACA,2BAA2B,2DAAS;AACpC;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gFAA8B;;AAE9B;AACA,SAAS,sCAAE;AACX;AACA;AACA;AACA,SAAS,sCAAE;AACX;AACA;AACA,QAAQ,8DAAU;AAClB,qBAAqB,sCAAE,UAAU,8DAAgB,eAAe,8DAAU;AAC1E;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE,WAAW,sCAAE;AAC5C;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,kDAAQ;AAC5C,UAAU;AACV,oCAAoC,kDAAQ;AAC5C;AACA;AACA;AACA,uBAAuB,UAAU;AACjC,qBAAqB,sCAAE;AACvB;AACA;AACA,0BAA0B,sCAAE,gBAAgB,8DAAa,uBAAuB,sCAAE,gBAAgB,8DAAa;AAC/G;AACA,qCAAqC,2EAAmB;AACxD,mCAAmC,2EAAmB;AACtD,iCAAiC,2EAAmB;AACpD,kCAAkC,2EAAmB;AACrD,wBAAwB,2EAAmB,wBAAwB,2EAAmB;AACtF;AACA,4BAA4B,2EAAmB;AAC/C,4CAA4C,2EAAmB;AAC/D;AACA,4BAA4B,2EAAmB;AAC/C,sDAAsD,2EAAmB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS,sCAAE;AACX,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,sCAAE;AACd,sBAAsB,sCAAE;AACxB;AACA;AACA;AACA,UAAU;AACV,wBAAwB,sCAAE,uCAAuC,8DAAa;AAC9E,iCAAiC,sCAAE,8CAA8C,sDAAS;AAC1F;AACA;AACA;AACA;AACA,IAAI,mEAAqB;AACzB,IAAI,mEAAqB;AACzB,IAAI,mEAAqB,wBAAwB,+CAAQ;AACzD;;AAEA;AACA;AACA,gBAAgB,sCAAE,uCAAuC,8DAAa;AACtE,yBAAyB,sCAAE,8CAA8C,sDAAS;AAClF;;AAEA;AACA,kCAAkC,kDAAQ;AAC1C;AACA,QAAQ,sCAAE;AACV;AACA;AACA,aAAa,sCAAE,mBAAmB,6CAAK;AACvC;AACA;AACA,UAAU,sCAAE,mBAAmB,6CAAK,QAAQ,sCAAE;AAC9C;AACA,wCAAwC,8EAAgB;AACxD,yBAAyB,+EAAiB,QAAQ,+CAAQ;AAC1D,qBAAqB,+EAAiB,QAAQ,+CAAQ;AACtD,uBAAuB,+EAAiB,QAAQ,+CAAQ;AACxD,uBAAuB,+EAAiB,QAAQ,+CAAQ;AACxD,yBAAyB,+EAAiB,QAAQ,+CAAQ;AAC1D,uBAAuB,+EAAiB,QAAQ,+CAAQ;AACxD,0BAA0B,+EAAiB,QAAQ,+CAAQ;AAC3D,wBAAwB,+EAAiB,QAAQ,+CAAQ;AACzD,0BAA0B,+EAAiB,QAAQ,+CAAQ;AAC3D,6BAA6B,+EAAiB,QAAQ,+CAAQ;AAC9D,wBAAwB,+EAAiB,QAAQ,+CAAQ;AACzD,2BAA2B,+EAAiB,QAAQ,+CAAQ;AAC5D,0BAA0B,gFAAkB;AAC5C,kBAAkB,+EAAiB,QAAQ,+CAAQ;AACnD,iBAAiB,+EAAiB,QAAQ,+CAAQ;AAClD,mBAAmB,+EAAiB,QAAQ,+CAAQ;AACpD,qBAAqB,+EAAiB,QAAQ,+CAAQ;AACtD,yBAAyB,+EAAiB,QAAQ,+CAAQ;AAC1D,0BAA0B,gFAAkB;AAC5C,8BAA8B,+EAAiB,QAAQ,+CAAQ;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE,mBAAmB,8DAAa;AAC9C;AACA,sBAAsB,sCAAE,oBAAoB,8DAAa;AACzD;AACA;AACA,YAAY,sCAAE,mBAAmB,oEAAgB,KAAK,sCAAE,mBAAmB,gFAAqB;AAChG;AACA;AACA,YAAY,sCAAE,mBAAmB,6DAAY;AAC7C;AACA;AACA,YAAY,sCAAE,mBAAmB,8DAAa;AAC9C,sBAAsB,sCAAE,oBAAoB,8DAAa;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,kDAAQ;AAChD;AACA,aAAa,sCAAE;AACf,kBAAkB,sCAAE;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,8EAAgB;AACxD,yBAAyB,+EAAiB,QAAQ,+CAAQ;AAC1D,mBAAmB,+EAAiB,QAAQ,+CAAQ;AACpD,wBAAwB,+EAAiB;AACzC,sBAAsB,+EAAiB,QAAQ,+CAAQ;AACvD,gCAAgC,+EAAiB,QAAQ,+CAAQ;AACjE,sBAAsB,+EAAiB,QAAQ,+CAAQ;AACvD,uBAAuB,+EAAiB;AACxC,0BAA0B,+EAAiB,QAAQ,+CAAQ;AAC3D,0BAA0B,+EAAiB,QAAQ,+CAAQ;AAC3D,2BAA2B,+EAAiB,QAAQ,+CAAQ;AAC5D,6BAA6B,+EAAiB,QAAQ,+CAAQ;AAC9D,wBAAwB,+EAAiB,QAAQ,+CAAQ;AACzD,qBAAqB,+EAAiB,QAAQ,+CAAQ;AACtD,8BAA8B,+EAAiB,QAAQ,+CAAQ;AAC/D,wBAAwB,+EAAiB,QAAQ,+CAAQ;AACzD,4BAA4B,+EAAiB,QAAQ,+CAAQ;AAC7D,0BAA0B,+EAAiB,QAAQ,+CAAQ;AAC3D,4BAA4B,+EAAiB,QAAQ,+CAAQ;AAC7D,uBAAuB,+EAAiB,QAAQ,+CAAQ;AACxD,4BAA4B,+EAAiB,QAAQ,+CAAQ;AAC7D,0BAA0B,gFAAkB;AAC5C,0BAA0B,gFAAkB;AAC5C,0BAA0B,gFAAkB;AAC5C,+BAA+B,+EAAiB;AAChD,6BAA6B,+EAAiB;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,+EAAiB;AAC9C;AACA,iBAAiB,8DAAgB,yBAAyB,8DAAgB;AAC1E;AACA,mDAAmD,8DAAgB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iDAAK;AAC7C;AACA;AACA,mDAAmD,mDAAQ;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,kDAAQ;AAChD;AACA;;AAEA;;AAEA;AACA,oBAAoB,sDAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI,mEAAmB;AACvB,IAAI,mEAAmB;AACvB,IAAI,mEAAmB,mBAAmB,mEAAmB;AAC7D;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,+CAA+C,sCAAE,sCAAsC,6CAAK;AAC5F;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,gEAAc;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,gEAAc;AAClC;AACA;;AAEA;AACA;AACA;AACA,SAAS,sCAAE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC,mBAAmB,sCAAE;AACrB,sCAAsC,gEAAc;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,cAAc,sCAAE,uCAAuC,8DAAa;AACpE;AACA;;AAEA;AACA,QAAQ,sCAAE,sCAAsC,oEAAgB;AAChE;AACA;AACA;AACA,QAAQ,sCAAE,sCAAsC,gFAAqB;AACrE,gFAAgF,sCAAE;AAClF;AACA;;AAEA;AACA;AACA,oBAAoB,mEAAW,CAAC,+CAAQ,kCAAkC,+CAAQ;AAClF;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,qBAAqB,mEAAW;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,+CAA+C,sCAAE,sCAAsC,6CAAK;AAC5F;AACA;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,sCAAE,uCAAuC,8DAAa;AACpE;AACA,uBAAuB,8DAAS;AAChC;AACA;AACA,kBAAkB,kDAAQ;AAC1B;AACA;;AAEA;AACA,QAAQ,sCAAE,sCAAsC,6DAAY;AAC5D,oBAAoB,sCAAE,uCAAuC,6DAAY;AACzE,QAAQ,mEAAqB;AAC7B;AACA;;AAEA;AACA,gBAAgB,sCAAE,uCAAuC,6CAAK;AAC9D;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,sCAAE,uCAAuC,6CAAK;AAC9D;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,sCAAE,uCAAuC,6CAAK;AAC9D;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,sCAAE,uCAAuC,6CAAK;AAC9D;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oBAAoB,oEAAgB;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,mDAAQ;AACtB,YAAY,mDAAQ,6CAA6C,mDAAQ;AACzE,UAAU;AACV,YAAY,mDAAQ,6CAA6C,mDAAQ;AACzE;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,sCAAE;AAChB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,mEAAW,CAAC,+CAAQ,6DAA6D,+CAAQ;AAC7G;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA,oBAAoB,mEAAW,CAAC,+CAAQ,6DAA6D,+CAAQ;AAC7G,eAAe,6CAAM;AACrB,YAAY,sCAAE;AACd,UAAU;AACV;AACA;AACA,KAAK;AACL;;AAEA;AACA,mBAAmB,kDAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,gEAAc;AACtC;AACA;AACA;AACA,sBAAsB,2EAAmB,aAAa,sCAAE;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yDAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,kDAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA,4BAA4B,2EAAmB,aAAa,sCAAE;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,yDAAG;AACzC;AACA;AACA;AACA;AACA;AACA,aAAa,sCAAE,oEAAoE,sCAAE;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,gFAAqB;AACzC,iBAAiB,mEAAmB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,+CAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,sCAAE;AACxD;;AAEA;AACA,oBAAoB,wDAAU;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,gEAAc;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;ACltDZ;AACA;;AAEA;AACA;;AAE8B;AACkB;AACX;;;AAGrC;;AAEO;;AAEP;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,kCAAkC,sCAAE;AACpC,KAAK;;AAEL;AACA,kCAAkC,sCAAE;AACpC,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,kBAAkB,6CAAM;AACxB;AACA;;AAEA;AACA;AACA,6BAA6B,sCAAE;AAC/B,KAAK;;AAEL;AACA,6BAA6B,sCAAE;AAC/B,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,6BAA6B,sCAAE;AAC/B,KAAK;;AAEL;AACA,6BAA6B,sCAAE;AAC/B,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8BAA8B,sCAAE;AAChC,KAAK;;AAEL;AACA,8BAA8B,sCAAE;AAChC,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,+BAA+B,sCAAE;AACjC,KAAK;;AAEL;AACA,+BAA+B,sCAAE;AACjC,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;ACjSZ;AACA;;AAEA;AACA;AACA;AACA;;AAEgD;AACA;AACE;;;AAGlD;AACA;AACA;;AAEO;AACP,IAAI,wDAAM;AACV;;AAEA;AACA;AACA,QAAQ,2DAAY;AACpB;AACA;;AAEA,4DAAY,4CAA4C,wDAAM;;;AAG9D;AACA;AACA;;AAEO;AACP,IAAI,wDAAM;AACV;;AAEA;AACA;AACA,QAAQ,2DAAY;AACpB;AACA;;AAEA,4DAAY,oEAAoE,wDAAM;;;AAGtF;AACA;AACA;;AAEO;AACP,IAAI,wDAAM;AACV;;AAEA;AACA;AACA;;AAEA,4DAAY,8DAA8D,wDAAM;;;AAGhF;AACA;AACA;;AAEO;AACP,IAAI,wDAAM;AACV;;AAEA;AACA;AACA;;AAEA,4DAAY,kDAAkD,wDAAM;;;AAGpE;;AAEA,2DAAY;AACZ,2DAAY;AACZ,2DAAY;AACZ,2DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClFZ;AACA;;AAEA;;AAE8B;AACkB;AACJ;AASpB;AACmC;AACJ;AACqB;AAC2D;AAClF;AACQ;AACb;AACC;AACP;AACG;AACV;AACsB;;;AAGzD;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B,wBAAwB,kDAAQ;AAChC;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC,0BAA0B,kDAAQ;AAClC,0BAA0B,kDAAQ;AAClC;AACA;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC;AACA;AACA;AACA;AACA;AACA,IAAI,6CAAK;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C,+DAAQ;AACpD;AACA;AACA;AACA,uCAAuC,mEAAY;AACnD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oBAAoB,WAAW;AAC/B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mEAAmE,6CAAM,YAAY,4DAAK;AAC1F;AACA,oBAAoB,WAAW;AAC/B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mEAAmE,4CAAK,yFAAyF,4DAAK;AACtK;AACA,8CAA8C,kDAAQ,kBAAkB,kDAAQ,kBAAkB,6CAAM,YAAY,4DAAK;;AAEzH;;AAEA,oBAAoB,WAAW;AAC/B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mEAAmE,6CAAM,cAAc,4DAAK;AAC5F;AACA,oBAAoB,WAAW;AAC/B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mEAAmE,4CAAK,yFAAyF,4DAAK;AACtK;AACA,8CAA8C,kDAAQ,kBAAkB,kDAAQ,kBAAkB,6CAAM,cAAc,4DAAK;;AAE3H;;AAEA,oBAAoB,WAAW;AAC/B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mEAAmE,6CAAM,aAAa,4DAAK;AAC3F;AACA,oBAAoB,WAAW;AAC/B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mEAAmE,4CAAK,yFAAyF,4DAAK;AACtK;AACA,8CAA8C,kDAAQ,kBAAkB,kDAAQ,kBAAkB,6CAAM,aAAa,4DAAK;AAC1H;AACA;AACA;;AAEA;AACA,mCAAmC,mEAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kDAAQ,qCAAqC,6CAAM;AAC3G,wDAAwD,kDAAQ,qCAAqC,6CAAM;AAC3G,wDAAwD,kDAAQ,qCAAqC,6CAAM;AAC3G;;AAEA;AACA,eAAe,4CAAK,eAAe,sCAAE,qCAAqC,sCAAE;AAC5E,cAAc,4CAAK,eAAe,sCAAE,4BAA4B,sCAAE,4BAA4B,sCAAE;AAChG,eAAe,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,mEAAmE,4DAAK;AAC3S,eAAe,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,mEAAmE,4DAAK;AAC3S,eAAe,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,kEAAkE,4DAAK;AAC1S,eAAe,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,kEAAkE,4DAAK;AAC1S,eAAe,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,iEAAiE,4DAAK;AACzS,eAAe,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,4DAA4D,kDAAQ,iEAAiE,4DAAK;AACzS;;AAEA;AACA,oCAAoC,mEAAY;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,kEAAkE,4CAAK,qBAAqB,6CAAM,aAAa,4DAAK;AACpH;AACA;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,kEAAkE,4CAAK,qBAAqB,6CAAM,cAAc,4DAAK;AACrH;AACA;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,kEAAkE,4CAAK,qBAAqB,6CAAM,eAAe,4DAAK;AACtH;AACA;;AAEA;;AAEA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,kEAAkE,6CAAM,YAAY,4DAAK;AACzF;AACA;;AAEA;;AAEA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,kEAAkE,6CAAM,aAAa,4DAAK;AAC1F;AACA;;AAEA;;AAEA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,kEAAkE,6CAAM,cAAc,4DAAK;AAC3F;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,4CAAK,UAAU,sCAAE,kCAAkC,sCAAE,iCAAiC,sCAAE,kCAAkC,sCAAE;AACpJ;AACA;AACA,KAAK;;AAEL;AACA,qCAAqC,sCAAE;AACvC,KAAK;;AAEL;AACA,qCAAqC,sCAAE;AACvC,KAAK;;AAEL;AACA;AACA,iDAAiD,sCAAE;AACnD;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,gBAAgB,0DAAa;AAC9C,KAAK;;AAEL;AACA,uBAAuB,sCAAE;AACzB;AACA,oCAAoC,sCAAE;AACtC,UAAU;AACV;AACA;AACA;AACA,4BAA4B,sCAAE;AAC9B,UAAU;AACV;AACA;AACA;AACA,sCAAsC,sCAAE;AACxC,UAAU;AACV;AACA;AACA;AACA,2BAA2B,sCAAE;AAC7B,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,uBAAuB,kDAAQ;AAC/B,2BAA2B,kDAAQ;AACnC;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,uBAAuB,kDAAQ,gBAAgB,kDAAQ,gBAAgB,kDAAQ,4CAA4C,kDAAQ,8CAA8C,kDAAQ;AACzL,gCAAgC,kDAAQ,gBAAgB,kDAAQ,gBAAgB,kDAAQ,0BAA0B,kDAAQ,+DAA+D,kDAAQ;AACjM;AACA,QAAQ,yDAAW,oCAAoC,kDAAQ,OAAO,6CAAM;AAC5E;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA,kDAAkD,sCAAE;AACpD;AACA;AACA,kDAAkD,sCAAE;AACpD;AACA;AACA,KAAK;;AAEL;AACA,2BAA2B,mEAAmB;AAC9C,0BAA0B,mEAAmB;AAC7C,yBAAyB,mEAAmB,SAAS,mEAAmB;AACxE;AACA;AACA,eAAe,kDAAQ;AACvB,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,wCAAwC,kDAAQ;AAChD;AACA;AACA;AACA,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA;AACA,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA;AACA,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA;AACA,UAAU;AACV,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA;AACA,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA;AACA,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA;AACA;AACA,wBAAwB,+BAA+B;AACvD,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,wCAAwC,kDAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,6CAAM,aAAa,8CAAO;AAC9C;AACA;AACA;AACA;AACA,oBAAoB,6CAAM,aAAa,8CAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gGAAgG,mEAAmB;AACnH;AACA;AACA,gGAAgG,mEAAmB;AACnH;AACA;AACA,gGAAgG,mEAAmB;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,gBAAgB,kDAAQ;AACxB,gBAAgB,6CAAM,aAAa,8CAAO;AAC1C;AACA;AACA,gBAAgB,kDAAQ;AACxB,gBAAgB,6CAAM,aAAa,8CAAO;AAC1C;AACA;AACA,gBAAgB,kDAAQ;AACxB,gBAAgB,6CAAM,aAAa,8CAAO;AAC1C;AACA;AACA,4BAA4B,+BAA+B;AAC3D,oBAAoB,kDAAQ;AAC5B,oBAAoB,6CAAM,aAAa,8CAAO;AAC9C;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,kDAAkD,6CAAK,EAAE,0DAAa;;;AAGlF;;AAEO;AACP;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;AAEZ;;AAEO;AACP,8BAA8B,oDAAU;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,qBAAqB;AACzC;AACA;AACA,0BAA0B,oDAAU;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,iCAAiC;AACrD;AACA;AACA,0BAA0B,oDAAU;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,gCAAgC,uFAAkC;AAClE,UAAU;AACV,uCAAuC,8FAAyC;AAChF;AACA,+BAA+B,gEAAW;AAC1C,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA,sDAAsD,+DAAK,8BAA8B,+DAAK;AAC9F;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY,6BAA6B,sCAAE;;;AAG3C;;AAEO;AACP;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,iBAAiB,6CAAM;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kCAAkC,iCAAiC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,kCAAkC,sCAAsC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,gCAAgC,WAAW;AAC3C;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,sBAAsB;AAC9C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA;AACA,wBAAwB,kDAAQ;AAChC,wBAAwB,kDAAQ;AAChC,6BAA6B,kDAAQ;AACrC;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kCAAkC,iCAAiC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,kCAAkC,sCAAsC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,gCAAgC,WAAW;AAC3C;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,sBAAsB;AAC9C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA,wBAAwB,kDAAQ;AAChC,wBAAwB,kDAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA,wCAAwC;AACxC,kCAAkC,kDAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kDAAQ,YAAY,kDAAQ,6BAA6B,kDAAQ;AAC/F;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,kDAAQ,sBAAsB,kDAAQ,mBAAmB,kDAAQ;AAC3F;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,sBAAsB;AAC9C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA;AACA,wBAAwB,kDAAQ;AAChC,wBAAwB,kDAAQ;AAChC,6BAA6B,kDAAQ;AACrC;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA,0BAA0B,kDAAQ;AAClC,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,oBAAoB,6CAAM;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAAK,eAAe,sCAAE,sBAAsB,sCAAE,sBAAsB,sCAAE;AAC1F,UAAU;AACV,oBAAoB,4CAAK;AACzB,UAAU;AACV,oCAAoC;AACpC;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV,yCAAyC;AACzC;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6DAA6D,sCAAE;AAC/D;;AAEA;AACA;AACA;AACA,8BAA8B,sCAAE;AAChC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,uBAAuB,sCAAE;AACzB,wBAAwB,sCAAE;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC,0BAA0B,kDAAQ;AAClC,wBAAwB,kDAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,6CAAM;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,uBAAuB,sCAAE;AACzB,wBAAwB,sCAAE;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sCAAE;AAClC;AACA,oCAAoC,sCAAE;AACtC;AACA,6CAA6C,sCAAE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,kDAAQ;AAClD;AACA;AACA,0CAA0C,kDAAQ;AAClD;AACA;AACA;AACA;AACA,0CAA0C,kDAAQ;AAClD;AACA;AACA,0CAA0C,kDAAQ;AAClD;AACA;AACA;AACA,oCAAoC,kDAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,gEAAsB;AAC9D,wCAAwC,gEAAsB;AAC9D,wCAAwC,gEAAsB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,gEAAsB;AACtE,gDAAgD,gEAAsB;AACtE,gDAAgD,gEAAsB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,8BAA8B;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAyC,sCAAE;AAC3C;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA,sDAAsD,6CAAM;AAC5D,sDAAsD,6CAAM;AAC5D,uDAAuD,6CAAM;AAC7D;AACA;AACA;AACA;AACA;AACA,sDAAsD,4CAAK;AAC3D;AACA;AACA;AACA,sDAAsD,6CAAM;AAC5D;AACA,4CAA4C,kBAAkB;AAC9D;AACA;AACA;AACA,8CAA8C,sCAAE;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,4CAAK;AAC3D;AACA;AACA,uDAAuD,4CAAK;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,oBAAoB,sCAAE;AACtB;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC,qEAAY;AAClD;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA,mCAAmC,gEAAsB;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,WAAW;AAC3C;AACA,uCAAuC,kDAAQ;AAC/C,wDAAwD,gEAAsB,mCAAmC,kDAAQ;AACzH;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA,wBAAwB,sCAAE;AAC1B,qDAAqD,kDAAQ;AAC7D;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,6CAAM;AACpD,8CAA8C,6CAAM;AACpD,+CAA+C,6CAAM;AACrD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E;AAC9E;AACA;AACA,sDAAsD,6CAAM;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,sCAAE;AACzC,uDAAuD,4CAAK;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,OAAO;AACvC;AACA;AACA,wBAAwB,sCAAE;AAC1B,uDAAuD,kDAAQ;AAC/D;AACA;;AAEA;AACA;AACA,gCAAgC,OAAO;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAkC,8BAA8B;AAChE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA,wBAAwB,4BAA4B;AACpD;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,yBAAyB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,+BAA+B;AACtE;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA,kCAAkC,uEAA6B,mCAAmC,kDAAQ;AAC1G;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA,iEAAiE,kDAAQ;AACzE,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,+CAA+C,SAAS;AACxD;AACA,sCAAsC,kDAAQ,iCAAiC,kDAAQ;AACvF;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC,yBAAyB,kDAAQ;AACjC,0BAA0B,kDAAQ;AAClC,8DAA8D,kDAAQ;AACtE;AACA,gEAAgE;AAChE;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kDAAQ;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B,kDAAQ;AACtC,8BAA8B,kDAAQ;AACtC,qCAAqC,kDAAQ;AAC7C;AACA;AACA,2BAA2B,kDAAQ;AACnC;AACA,qBAAqB,kDAAQ;AAC7B;AACA;;AAEA;AACA,sCAAsC,kDAAQ,6CAA6C,kDAAQ;;AAEnG;AACA,wBAAwB,kDAAQ;;AAEhC;AACA,wBAAwB,kDAAQ;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,sCAAE;AACjC,oDAAoD,4CAAK;;AAEzD;AACA;AACA;AACA;AACA;AACA,8CAA8C,4CAAK,eAAe,sCAAE,+EAA+E,sCAAE,+EAA+E,sCAAE;AACtO,+CAA+C,4CAAK,eAAe,sCAAE,2EAA2E,sCAAE,2EAA2E,sCAAE;AAC/N,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,kDAAQ,gBAAgB,kDAAQ,gBAAgB,kDAAQ,aAAa,kDAAQ,2CAA2C,kDAAQ;AAChK,wBAAwB,kDAAQ;AAChC,oCAAoC,kDAAQ;AAC5C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAQ;AACpB;AACA;AACA,oDAAoD,4CAAK;AACzD;AACA,UAAU;AACV;AACA,4CAA4C,6CAAM;AAClD,kDAAkD,6CAAM;AACxD,mDAAmD,6CAAM;AACzD,gDAAgD,6CAAM;AACtD;AACA;AACA;AACA;AACA,QAAQ,6DAAW;AACnB;AACA;AACA;AACA,4BAA4B,gCAAgC;AAC5D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,6DAAW;AAC/B;AACA;AACA,oBAAoB,6DAAW;AAC/B;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,4BAA4B,+BAA+B;AAC3D;AACA;AACA;AACA,wBAAwB,6DAAW;AACnC;AACA;AACA,wBAAwB,6DAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,6CAAM;AAClD,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA,IAAI,kDAAO;AACX;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,2BAA2B,0DAAe;AAC1C;AACA;AACA;AACA,kCAAkC,sCAAE;AACpC,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,kDAAO;AACtB;AACA;;AAEA,4DAAY,wDAAwD,kDAAO;;;;;;;;;;;;;;;;;;;;;;;;;ACthF3E;AACA;;AAEA;;AAE8B;AACkB;AACI;AACG;AACA;AACU;AACrB;AACI;AACkB;;;AAGlE;;AAEO;AACP;AACA,uBAAuB,6CAAM;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,kDAAQ;AAC9B;;AAEA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,sCAAsC,kDAAQ,gBAAgB,kDAAQ,YAAY,wDAAW,sCAAsC,kDAAQ,gBAAgB,kDAAQ,YAAY,wDAAW,sCAAsC,kDAAQ,YAAY,wDAAW;AAC/P,kCAAkC,kDAAQ;;AAE1C,0BAA0B,kDAAQ,gBAAgB,kDAAQ,yCAAyC,kDAAQ;AAC3G,oCAAoC,0EAAmB;AACvD;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB,oBAAoB,4CAAK,gBAAgB,sCAAE;;AAE3C;AACA;AACA;AACA;AACA,YAAY,wDAAW;AACvB;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,+DAAa;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,+DAAK;AACrC,gCAAgC,+DAAK;AACrC,IAAI,+DAAa;AACjB,gCAAgC,+DAAK;AACrC;AACA;;AAEA;AACA;AACA;AACA,6CAA6C,+DAAa;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,+DAAK;AACrC,gCAAgC,+DAAK;AACrC,IAAI,+DAAa,yFAAyF,kDAAQ;AAClH,gCAAgC,+DAAK;AACrC;AACA;;AAEA;AACA,iBAAiB,yEAAoB;AACrC;AACA;;AAEA;AACA;AACA,oBAAoB,qBAAqB;AACzC,yBAAyB,kDAAQ;AACjC;AACA,oBAAoB,qBAAqB;AACzC,yBAAyB,kDAAQ;AACjC;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,yEAAoB;AACrC;;AAEA;AACA,eAAe,kDAAQ;AACvB,oBAAoB,iBAAiB;AACrC,mBAAmB,kDAAQ;AAC3B;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;AC5JZ;AACA;;AAEA;;AAE8B;AACkB;AACN;AACE;AACT;AACsB;AACtB;AACmB;;;AAGtD;;AAEO;AACP;AACA;AACA;AACA,yBAAyB,6CAAM;AAC/B;AACA;AACA,IAAI,4CAAK;AACT;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,wBAAwB,4CAAK,UAAU,sCAAE,iCAAiC,sCAAE,iCAAiC,sCAAE,iCAAiC,sCAAE;AAClJ;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,4CAAK;AACjC,KAAK;;AAEL;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,wCAAwC,4CAAK;AAC7C;AACA,0FAA0F,kDAAQ;AAClG;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,sCAAE,UAAU,EAAE,GAAG,EAAE;AACjE;AACA;AACA;AACA,QAAQ,4CAAK;AACb,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,sCAAE;AAClC;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA,gCAAgC,+DAAc;AAC9C;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,yCAAyC,4CAAK;;;AAG1D;;AAEO;AACP;AACA;AACA;AACA,IAAI,iDAAO;AACX;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,2BAA2B,yDAAe;AAC1C;AACA;AACA;AACA,kCAAkC,sCAAE;AACpC,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,iDAAO;AACtB;AACA;;AAEA,4DAAY,+CAA+C,iDAAO;;;;;;;;;;;;;;;;;;;;;;AChQlE;AACA;;AAEA;;AAE8B;AACuC;AACf;AACF;AACR;AACsB;;;AAGlE;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kDAAQ;;AAEnC;AACA;AACA;AACA;;AAEA;AACA,+BAA+B;AAC/B,+BAA+B;;AAE/B;AACA,+BAA+B,6CAAM,cAAc;AACnD;AACA;AACA;;AAEA,4BAA4B;AAC5B,iCAAiC;AACjC,2BAA2B;AAC3B,0BAA0B;AAC1B,kCAAkC;AAClC,uCAAuC;AACvC,iCAAiC;AACjC,8BAA8B;AAC9B,oBAAoB;;AAEpB;AACA,yBAAyB,yDAAG;AAC5B,2BAA2B,kDAAQ;AACnC,uBAAuB,kDAAQ;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,6CAA6C;;AAE7C;AACA;AACA;AACA;AACA,8DAA8D,iDAAK;AACnE,qDAAqD,iDAAK;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,iDAAK;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,kCAAkC,iDAAK;AACvC,yBAAyB,iDAAK;AAC9B,oCAAoC,sCAAE;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kDAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,4CAAK;AAC1C,2BAA2B,sCAAE;AAC7B;AACA,kCAAkC,sCAAE;AACpC;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA,sCAAsC,iDAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,0EAAmB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B;AACA,qBAAqB,0EAAmB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,yDAAG;AAClC,UAAU;AACV;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,0DAA0D;;AAE1D;AACA;AACA,uBAAuB,0EAAmB;AAC1C,uBAAuB,0EAAmB;AAC1C,4BAA4B,0EAAmB;AAC/C;AACA,2BAA2B,kDAAQ;AACnC;AACA;AACA,+BAA+B,kDAAQ;AACvC,mCAAmC,kDAAQ;AAC3C,mCAAmC,kDAAQ;AAC3C;AACA,qCAAqC,0EAAmB;AACxD,uCAAuC,kDAAQ;AAC/C;AACA,mCAAmC,kDAAQ;AAC3C,mCAAmC,kDAAQ;AAC3C,mCAAmC,kDAAQ;AAC3C,KAAK;;AAEL,yDAAyD;;AAEzD;AACA;AACA,oBAAoB,yDAAG,wBAAwB,0EAAmB;AAClE;AACA,gCAAgC,yDAAG;AACnC,wBAAwB,kDAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kDAAQ,UAAU,kDAAQ;AAC7C;AACA,2BAA2B,kDAAQ;AACnC;AACA;AACA,+BAA+B,kDAAQ;AACvC,mCAAmC,kDAAQ;AAC3C;AACA,qCAAqC,0EAAmB;AACxD,uCAAuC,kDAAQ;AAC/C;AACA,gBAAgB,kDAAQ;AACxB;AACA;AACA,+BAA+B,kDAAQ;AACvC;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/dZ;AACA;;AAEA;;AAE8B;AACyB;AACjB;AACc;AACQ;AACe;AACpB;AACgC;AACtC;AACQ;AACb;AACI;AACkB;AACzB;AACM;AACc;AAC1B;AACA;;;AAGnC;;AAEO;AACP;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,kDAAO;AAC3B,qBAAqB,sCAAE;AACvB;AACA;AACA,8BAA8B,sCAAE;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;;AAEA;AACA;AACA,wBAAwB,yDAAO,SAAS,wDAAU;AAClD;AACA;;AAEA;AACA;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA,kBAAkB,8DAAc;AAChC,QAAQ,8DAAc,aAAa,+DAAK;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAc,eAAe,+DAAK,aAAa,+DAAK,iBAAiB,+DAAK;AAClF,QAAQ,8DAAc,eAAe,+DAAK,aAAa,+DAAK,iBAAiB,+DAAK;AAClF,QAAQ,8DAAc,YAAY,+DAAK,gBAAgB,+DAAK,OAAO,+DAAK,OAAO,+DAAK;AACpF,QAAQ,8DAAc,eAAe,+DAAK,aAAa,+DAAK,qBAAqB,+DAAK;AACtF,QAAQ,8DAAc,gBAAgB,+DAAK;AAC3C,QAAQ,8DAAc,aAAa,+DAAK;AACxC;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6CAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,6CAAK;AACT;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sCAAE;AACrC;;AAEA;AACA;AACA,kBAAkB,wDAAU;AAC5B,4CAA4C,yDAAO;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,oCAAoC;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,4BAA4B,6CAAK;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA,8CAA8C,sCAAE,UAAU,EAAE,GAAG,EAAE;AACjE;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,QAAQ,6CAAK;AACb,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,+BAA+B;;AAE/B;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA,2BAA2B,kDAAQ;AACnC,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,2BAA2B,yDAAW;AACtC,oDAAoD,mEAAmB;AACvE;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,+DAAQ;AACxC;AACA;AACA,iCAAiC,gEAAS;AAC1C;AACA;AACA;AACA,kCAAkC,+DAAQ;AAC1C;AACA;AACA;AACA;AACA,oCAAoC,mEAAY;AAChD;AACA;AACA,sCAAsC,mEAAY;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,yDAAW,yBAAyB,2EAAmB;AAC9E;AACA,iBAAiB,wEAAsB;AACvC;AACA;AACA;AACA,2BAA2B,kDAAQ;AACnC;AACA,yBAAyB,8CAAM;AAC/B;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,yDAAW;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kDAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,8CAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,8CAAI;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,2EAAmB,yBAAyB,2EAAmB;AACzG;AACA;AACA,4CAA4C,2EAAmB,yBAAyB,2EAAmB;AAC3G;AACA;AACA;AACA;AACA;AACA,sEAAsE,4DAAK;AAC3E;AACA,8GAA8G,4DAAK;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA,aAAa,sCAAE;AACf;AACA;AACA,0BAA0B,sCAAE;AAC5B;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA,oBAAoB,sCAAE;AACtB;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAO;AACpC,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,aAAa,sCAAE,4BAA4B,sCAAE;AAC7C;AACA;;AAEA;AACA;AACA,qBAAqB,kDAAO;AAC5B,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,aAAa,sCAAE,4BAA4B,sCAAE;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kDAAO;AAC5B,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,8CAAM;AACzD;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,wBAAwB,0BAA0B;AAClD,4BAA4B,yDAAW;AACvC,kCAAkC,yDAAW;AAC7C;AACA,wBAAwB,gCAAgC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iEAAW;AACrC,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,wBAAwB,0BAA0B;AAClD,4BAA4B,yDAAW;AACvC;AACA,wBAAwB,gCAAgC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iEAAW;AACrC,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA,KAAK;AACL;AACA,eAAe,6CAAK;AACpB,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,gCAAgC,6CAAK;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,2EAAmB;AAChD,iBAAiB,sCAAE;AACnB;AACA;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,QAAQ,6CAAK;AACb;AACA;AACA,KAAK;;AAEL;AACA;AACA,sDAAsD,8CAAI;AAC1D,oDAAoD,8CAAI;AACxD;AACA,2DAA2D,iDAAK;AAChE;AACA;AACA;AACA,mDAAmD,iDAAK;AACxD,qDAAqD,iDAAK;AAC1D,oDAAoD,iDAAK;AACzD;AACA,oDAAoD,iDAAK;AACzD;AACA,uDAAuD,iDAAK;AAC5D,mDAAmD,iDAAK;AACxD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,iDAAK;AAC/D;AACA,mDAAmD,iDAAK;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,iDAAK;AAC/D;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA,iCAAiC,iDAAK;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,iDAAK;AAC9B;AACA,0BAA0B,iDAAK;AAC/B;AACA;AACA,0BAA0B,iDAAK;AAC/B;AACA,6BAA6B,iDAAK;AAClC,yBAAyB,iDAAK;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;;AAEA;AACA,mCAAmC,sCAAE;AACrC,uCAAuC,sCAAE;AACzC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;;AAEA;AACA,kCAAkC,sCAAE;AACpC;AACA,uCAAuC,sCAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,iDAAK;AACrC;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA,6BAA6B,iDAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,sCAAE;AACpC;AACA,kCAAkC,sCAAE;AACpC;AACA,kCAAkC,sCAAE;AACpC,oCAAoC,iDAAK;AACzC;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC,gCAAgC,sCAAE;AAClC;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,YAAY,uEAAiB;AAC7B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,uEAAiB;AAChC,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2EAAmB,cAAc,2EAAmB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,2DAA2D,6CAAK;;;AAG5E;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA,aAAa,sCAAE;AACf,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd,yBAAyB,sCAAE;AAC3B;AACA;AACA,gBAAgB,sCAAE;AAClB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,QAAQ,sCAAE;AACV;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;ACthEZ;AACA;;AAEA;;AAE8B;AACkB;AACd;AACO;;;AAGzC;;AAEO;AACP,oBAAoB,0CAAI;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,iDAAO;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iDAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,wBAAwB;AAChD;AACA;AACA,wBAAwB,sBAAsB;AAC9C;AACA,4BAA4B,yBAAyB;AACrD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;ACtIZ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAE8B;AACuC;AACH;AAC/B;;;AAGnC;;AAEO;AACP;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,4CAAK;AACT;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA,iCAAiC,iDAAK;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,sCAAE;AACpC;AACA,kCAAkC,sCAAE;AACpC;AACA,kCAAkC,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC,gCAAgC,sCAAE;AAClC;AACA;AACA,KAAK;;AAEL,iEAAiE;;AAEjE;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,0EAAmB,cAAc,0EAAmB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,4CAAK;AACb,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,wDAAwD,4CAAK;;;;;;;;;;;;;;;;;;;;;;;AC35BzE;AACA;;AAEA;;AAE8B;AACgC;AACxB;AACS;AACN;;;AAGzC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,iDAAO,CAAC,uDAAU;AAC1C,kCAAkC,sCAAE;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,sBAAsB,8CAAI;AAC1B;AACA;AACA;AACA;AACA;AACA,wBAAwB,8CAAI,kBAAkB,8CAAI;AAClD;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,8CAAI;AACjC;AACA;AACA,4BAA4B,8CAAI,kBAAkB,8CAAI,kBAAkB,8CAAI,kBAAkB,8CAAI;AAClG;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA,mDAAmD,sCAAE;AACrD;AACA,qCAAqC,sCAAE;AACvC;AACA;AACA;AACA,0DAA0D,sCAAE,MAAM,8CAAI;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;;AAEA;;AAEA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sCAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvYZ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAE8B;AACyB;AACb;AACsD;AAC/C;AACL;AACI;AACZ;AAC8B;AACnB;AACZ;AACK;AAC2B;;;AAGnE;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,6CAAK;AACT;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,kBAAkB,uDAAU;AAC5B,wCAAwC,yDAAO;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA,iCAAiC,iDAAK;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,sCAAE;AACpC;AACA,kCAAkC,sCAAE;AACpC;AACA,kCAAkC,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC,gCAAgC,sCAAE;AAClC;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,0EAAmB,cAAc,0EAAmB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,2DAAO;AACtE;AACA;AACA,+DAA+D,2DAAO;AACtE;AACA;AACA;AACA,+DAA+D,2DAAO;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,6CAAK;AACb,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,0CAA0C,sCAAE,UAAU,EAAE,GAAG,EAAE;AAC7D;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sCAAE;AACzB,6BAA6B,kDAAO;AACpC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,oCAAoC;;AAEpC;AACA,0BAA0B,wDAAW;AACrC;AACA;AACA,4BAA4B,wDAAW;AACvC,mBAAmB,kDAAQ;AAC3B;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,mBAAmB,kDAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wDAAW;AAC7B;AACA;AACA,mBAAmB,oEAAgB;AACnC;AACA,YAAY,sCAAE;AACd,mBAAmB,sCAAE,aAAa,EAAE,OAAO,EAAE,GAAG,wDAAW,0BAA0B,wDAAW;AAChG;AACA,oBAAoB,4CAAK;AACzB;AACA,wBAAwB,IAAI,sCAAE,kCAAkC;AAChE;AACA;AACA,2BAA2B,oEAAgB;AAC3C;AACA,iBAAiB,sCAAE,sDAAsD,sCAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,gEAAS;AAC1C;AACA;AACA,kCAAkC,+DAAQ;AAC1C;AACA;AACA,8DAA8D;AAC9D,+BAA+B,sCAAE;AACjC;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,2BAA2B,4EAAqB;AAChD;AACA;AACA,oBAAoB,4CAAK,UAAU,sCAAE;AACrC;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,wDAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,sCAAE;AACzC,sCAAsC,0EAAmB;AACzD;AACA;AACA;AACA,mFAAmF,4DAAK;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,mBAAmB,sCAAE;AACrB,kBAAkB,4CAAK;AACvB;AACA,kBAAkB,6CAAM;AACxB;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,kDAAQ;AAChD,yCAAyC,kDAAQ;AACjD;AACA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA;AACA;AACA,yCAAyC,wDAAW;AACpD,yCAAyC,wDAAW;AACpD,sCAAsC,wDAAW;AACjD;AACA,iFAAiF,4DAAK;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,4DAAK;AACrF;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,+BAA+B,sCAAE;AACjC;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY,+CAA+C,6CAAK;;;;;;;;;;;;;;;;AC5lChE;AACA;;AAEA;;AAEgD;;;AAGhD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;ACpQZ;AACA;;AAEA;;AAE6B;AACkB;AACsB;AACD;AACd;AACA;AACrB;;;AAGjC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,0CAAI;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,sCAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,sCAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,sCAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,WAAW,sCAAE;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kDAAQ;AACnC,4BAA4B,kDAAQ;AACpC;AACA;AACA,+BAA+B,kDAAQ;AACvC,8BAA8B,kDAAQ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,yBAAyB,0CAAI;AAC7B,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,kCAAkC,sCAAE;AACpC,kCAAkC,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,0CAAI;AACZ;AACA;AACA;AACA;AACA,YAAY,8DAAc;AAC1B;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,mCAAmC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,yDAAe;AAClD;AACA,uDAAuD,8DAAc;AACrE,2HAA2H,8DAAc;AACzI;AACA;AACA;AACA;AACA,gDAAgD,gCAAgC;AAChF;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,yDAAe;AAClD;AACA,uDAAuD,8DAAc;AACrE,2HAA2H,8DAAc;AACzI;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA,wCAAwC,kDAAQ;AAChD;AACA;AACA;AACA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA,wCAAwC,kDAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,QAAQ;AACrC,iCAAiC,QAAQ;AACzC;AACA,uDAAuD,oCAAoC;AAC3F,2DAA2D,oCAAoC;AAC/F;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC,+DAAc;AACpD;;AAEA;AACA;AACA;AACA;AACA,kCAAkC,+DAAc;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,iCAAiC,8DAAc;AAC/C,YAAY,8DAAc,YAAY,+DAAK;AAC3C;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA,YAAY,8DAAc,YAAY,+DAAK,yBAAyB,+DAAK;AACzE,6BAA6B,QAAQ;AACrC,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA,uDAAuD,oCAAoC;AAC3F,2DAA2D,oCAAoC;AAC/F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,8DAAc;AAC7D,oBAAoB,8DAAc,YAAY,+DAAK;AACnD,oBAAoB,8DAAc,YAAY,+DAAK,kCAAkC,+DAAK;AAC1F;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,QAAQ;AAChC;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,QAAQ;AAChC,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,+CAA+C,0CAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnZ/D;AACA;;AAEA;;AAE6B;AACkB;AACI;AACH;AACA;AACM;AACO;AACG;AAClB;AACV;AACiB;AACH;AACe;AACnB;AACc;AACpB;;;AAGxC;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC,kDAAO;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,sEAAY;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,yDAAG;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,sCAAE;AAC5C;AACA;AACA;AACA;AACA;AACA,uCAAuC,yDAAO,SAAS,wDAAU;AACjE;AACA,wBAAwB,OAAO;AAC/B,8CAA8C,uDAAU;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kDAAQ,aAAa,kDAAQ;AAC9C,gBAAgB,kDAAQ;AACxB,mBAAmB,kDAAQ;AAC3B,cAAc,kDAAQ,oDAAoD,kDAAQ;AAClF;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA,gBAAgB,yEAAuB,iHAAiH,6CAAM,+EAA+E,2EAAmB,cAAc,4DAAY;AAC1R,4CAA4C,+DAAK;AACjD;AACA;AACA;AACA;;AAEA;AACA,SAAS,+DAAgB;AACzB,gCAAgC,wDAAU;AAC1C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,OAAO;AACnC;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,4DAAY;AAC3C;AACA;AACA;AACA,4BAA4B,OAAO;AACnC,yCAAyC,uEAAkB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjKZ;AACA;;AAEA;;AAE6B;AACuC;AAC3B;AAC6B;AACjC;AACqB;AACL;AACb;AACM;AACC;AACN;AACF;;;AAGvC;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP,sBAAsB,mEAAgB;AACtC,uBAAuB,kDAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,iDAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iDAAK;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,iDAAK;AACjC;AACA;AACA,yCAAyC,kDAAQ;AACjD;AACA;AACA;AACA;AACA,0BAA0B,8CAAI;AAC9B;AACA,mCAAmC,8CAAI;AACvC;AACA,6BAA6B,8CAAI;AACjC;AACA,uBAAuB,8CAAI;AAC3B,uCAAuC,mDAAQ;AAC/C;AACA,gBAAgB,8CAAI;AACpB;AACA,uBAAuB,8CAAI;AAC3B,kCAAkC,mDAAQ;AAC1C;AACA,YAAY,8CAAI;AAChB;AACA,kCAAkC,mDAAQ;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA,WAAW,sCAAE;AACb;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd,8BAA8B;AAC9B;AACA,kCAAkC;AAClC,KAAK;;AAEL;AACA,qBAAqB,iDAAO;AAC5B;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,iDAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,qCAAqC,iDAAO;AAC5C;AACA,yCAAyC,iDAAO;AAChD;AACA,KAAK;;AAEL;AACA;AACA,+BAA+B,wDAAW;AAC1C;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd,gDAAgD,sCAAE;AAClD;AACA;AACA,qDAAqD,sCAAE;AACvD;AACA;AACA;AACA,+BAA+B;AAC/B,qDAAqD;AACrD;AACA,mDAAmD,8DAAgB;AACnE,uBAAuB,uDAAU;AACjC;AACA,mBAAmB,uDAAU;AAC7B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,uDAAuD,iDAAK;AAC5D;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0DAA0D,iDAAK;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,iDAAK;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAQ;AACpB;AACA;AACA;AACA,YAAY,mDAAQ;AACpB;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,gCAAgC,sDAAU,EAAE,kDAAM;;AAE9D,iEAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzhBf;AACA;;AAEA;AACA;AACA;AACA;;AAE6B;AACkB;AAC6B;AAC5B;AACI;AACJ;AACF;AACM;AACF;AACA;AACE;AACJ;AACG;AACL;AACH;AACK;AACE;AACH;AACa;AACjB;AACI;AACN;AACwB;AACnB;;;AAG9C;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC,6BAA6B,kDAAQ;AACrC;AACA,4BAA4B,4DAAQ;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,0DAAO;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,yDAAW;AACxB;AACA;;AAEA;AACA;AACA,yBAAyB,kDAAQ;AACjC,0BAA0B,qDAAS;AACnC,qBAAqB,yDAAW;AAChC,uBAAuB,sEAAkB;AACzC,qBAAqB,kDAAQ;AAC7B,UAAU;AACV,yBAAyB,qDAAS;AAClC,qBAAqB,yDAAW;AAChC;AACA;AACA,uBAAuB,yDAAW;AAClC,YAAY,mDAAQ;AACpB;AACA,qBAAqB,sEAAkB;AACvC,+DAA+D,sEAAkB;AACjF;AACA,oCAAoC,mDAAQ;AAC5C;AACA;AACA,qBAAqB,sEAAkB;AACvC,qBAAqB,sEAAkB;AACvC,qBAAqB,sEAAkB;AACvC,qBAAqB,sEAAkB;AACvC,+DAA+D,sEAAkB;AACjF;AACA,oCAAoC,mDAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kDAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,qDAAS,WAAW,2EAAmB,iBAAiB,2EAAmB,2BAA2B,2EAAmB,2BAA2B,2EAAmB;AACtL;AACA;;AAEA;AACA;AACA,WAAW,qDAAS,qBAAqB,2EAAmB,2BAA2B,2EAAmB,2BAA2B,2EAAmB;AACxJ;;AAEA;AACA;AACA;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA,mBAAmB,sEAAkB;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA,aAAa,sEAAkB;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,2EAAmB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sEAAkB;AACnD;AACA;AACA,0BAA0B,6CAAK;AAC/B,wBAAwB,6CAAK;AAC7B;AACA,kCAAkC,8CAAM;AACxC,kCAAkC,8CAAM;AACxC;AACA;AACA,kCAAkC,6CAAK;AACvC,kCAAkC,6CAAK;AACvC,kCAAkC,6CAAK;AACvC,kCAAkC,8CAAM;AACxC,kCAAkC,8CAAM;AACxC,kCAAkC,8CAAM;AACxC,mCAAmC,8CAAM;AACzC,mCAAmC,8CAAM;AACzC,mCAAmC,8CAAM;AACzC,mCAAmC,8CAAM;AACzC,mCAAmC,8CAAM;AACzC,mCAAmC,8CAAM;AACzC,mCAAmC,8CAAM;AACzC,mCAAmC,8CAAM;AACzC,mCAAmC,8CAAM;AACzC,6BAA6B,sEAAkB,UAAU,6CAAK;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sEAAkB;AAC/C;AACA,yBAAyB,sEAAkB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,sEAAkB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,mDAAQ;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,sEAAkB;AAChD;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,sEAAkB;AAChD,8BAA8B,sEAAkB;AAChD,8BAA8B,sEAAkB;AAChD;AACA;AACA;AACA,qBAAqB,kDAAQ;AAC7B;AACA;AACA,0BAA0B,qDAAS,yDAAyD,2EAAmB,4CAA4C,2EAAmB,mDAAmD,2EAAmB;AACpP,iBAAiB,yDAAW;AAC5B;AACA,+BAA+B,sEAAkB,UAAU,kDAAQ;AACnE,+BAA+B,sEAAkB;AACjD,oBAAoB,QAAQ;AAC5B,sCAAsC,qDAAS,8CAA8C,2EAAmB,4CAA4C,2EAAmB,mDAAmD,2EAAmB;AACrP,wCAAwC,yDAAW;AACnD;AACA;AACA,YAAY,mDAAQ;AACpB;AACA;AACA,YAAY,mDAAQ;AACpB;AACA;AACA,qBAAqB,sEAAkB;AACvC,4DAA4D,sEAAkB;AAC9E;AACA,2DAA2D,mDAAQ;AACnE;AACA;AACA,qBAAqB,sEAAkB;AACvC,qBAAqB,sEAAkB;AACvC,qBAAqB,sEAAkB;AACvC,qBAAqB,sEAAkB;AACvC,4DAA4D,sEAAkB;AAC9E;AACA,2DAA2D,mDAAQ;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sCAAE;AACjB;AACA;AACA;AACA;AACA,6BAA6B,sEAAkB,yCAAyC,sEAAkB;AAC1G,0BAA0B,sEAAkB;AAC5C,0BAA0B,sEAAkB,sCAAsC,sEAAkB;AACpG,0BAA0B,sEAAkB,iCAAiC,sEAAkB;AAC/F,0BAA0B,2EAAmB;AAC7C;;AAEA;;AAEA;AACA;AACA,6BAA6B,yDAAW,yBAAyB,2EAAmB;AACpF;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,kDAAQ;AAChD;AACA;AACA,wCAAwC,kDAAQ;AAChD,wCAAwC,kDAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sEAAkB;AAC7D;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA,uCAAuC,sEAAkB;AACzD,wCAAwC,gCAAgC;AACxE;AACA;AACA,6CAA6C,kDAAQ;AACrD,sCAAsC,sEAAkB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,qDAAS;AAC3D,yCAAyC,yDAAW;AACpD;AACA,sCAAsC,sEAAkB;AACxD,kDAAkD,qDAAS;AAC3D,wDAAwD,yDAAW;AACnE;AACA;AACA;AACA,wDAAwD,kDAAQ;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4GAA4G,yDAAW;AACvH;AACA;AACA;AACA;AACA;AACA,gCAAgC,sCAAE;AAClC;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,wDAAU;;AAE5B;AACA,iCAAiC,0DAAO;AACxC,iCAAiC,0DAAO;AACxC,iCAAiC,0DAAO;AACxC,iCAAiC,0DAAO;AACxC,iCAAiC,0DAAO;AACxC,iCAAiC,0DAAO;AACxC,iCAAiC,0DAAO;AACxC,iCAAiC,0DAAO;AACxC,iCAAiC,0DAAO;AACxC,iCAAiC,0DAAO;AACxC,kCAAkC,0DAAO;AACzC,kCAAkC,0DAAO;AACzC,kCAAkC,0DAAO;AACzC,kCAAkC,0DAAO;AACzC,kCAAkC,0DAAO;AACzC,kCAAkC,0DAAO;AACzC,kCAAkC,0DAAO;AACzC,kCAAkC,0DAAO;AACzC,kCAAkC,0DAAO;AACzC,4BAA4B,sEAAkB,UAAU,0DAAO;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAQ;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,sEAAkB;AACvC;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B,MAAM;AACN;AACA,oBAAoB,kDAAQ;;AAE5B,oBAAoB,kDAAQ;AAC5B,oBAAoB,kDAAQ;AAC5B,oBAAoB,kDAAQ;AAC5B,oBAAoB,kDAAQ,gDAAgD;;AAE5E;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,sEAAkB;AACvC,wEAAwE;AACxE;AACA;AACA,6BAA6B,kDAAQ;AACrC,0BAA0B,kDAAQ;AAClC,iCAAiC,kDAAQ;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,sEAAkB;AACvC,oCAAoC,yDAAW,aAAa,2EAAmB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA,mBAAmB,kDAAQ;AAC3B,uBAAuB,kDAAQ;AAC/B;AACA;AACA,8BAA8B,kDAAQ;AACtC,sCAAsC,kDAAQ;AAC9C;AACA;AACA;AACA;AACA,uBAAuB,kDAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,kDAAQ;AACjC;AACA,6BAA6B,kDAAQ;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAAU;AAC1B,gBAAgB,6DAAU;AAC1B,gBAAgB,6DAAU;AAC1B;AACA;AACA,gBAAgB,yDAAQ;AACxB,gBAAgB,yDAAQ;AACxB,gBAAgB,yDAAQ;AACxB;AACA,aAAa,sEAAkB;AAC/B,gBAAgB,yDAAQ;AACxB,gBAAgB,yDAAQ;AACxB,gBAAgB,yDAAQ;AACxB;AACA;AACA,gBAAgB,uDAAO;AACvB,gBAAgB,uDAAO;AACvB,gBAAgB,uDAAO;AACvB;AACA;AACA,gBAAgB,6DAAU;AAC1B,gBAAgB,6DAAU;AAC1B,gBAAgB,6DAAU;AAC1B;AACA;AACA,gBAAgB,2DAAS;AACzB,gBAAgB,2DAAS;AACzB,gBAAgB,2DAAS;AACzB;AACA;AACA,gBAAgB,2DAAS;AACzB,gBAAgB,2DAAS;AACzB,gBAAgB,2DAAS;AACzB;AACA;AACA,gBAAgB,8DAAU;AAC1B,gBAAgB,8DAAU;AAC1B,gBAAgB,8DAAU;AAC1B;AACA;AACA,gBAAgB,0DAAQ;AACxB,gBAAgB,0DAAQ;AACxB,gBAAgB,0DAAQ;AACxB;AACA;AACA,gBAAgB,wDAAO;AACvB,gBAAgB,wDAAO;AACvB,gBAAgB,wDAAO;AACvB;AACA;AACA,+BAA+B,6DAAE;AACjC;AACA,mBAAmB,kDAAQ;AAC3B;AACA,+BAA+B,6DAAE;AACjC;AACA,mBAAmB,kDAAQ;AAC3B;AACA,+BAA+B,6DAAE;AACjC;AACA,mBAAmB,kDAAQ;AAC3B;AACA,+BAA+B,6DAAE;AACjC;AACA,mBAAmB,kDAAQ;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,yDAAW;AACnB,QAAQ,yDAAW;AACnB,iBAAiB,kDAAQ;;;AAGzB,kEAAkE;AAClE;AACA,kCAAkC,yDAAW,+BAA+B,yDAAW;AACvF;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA;AACA,YAAY,kDAAQ;AACpB,YAAY,kDAAQ,OAAO,kDAAQ;AACnC;AACA;AACA;;AAEA;AACA,YAAY,kDAAQ;;AAEpB;AACA;AACA,cAAc,kDAAQ,iBAAiB,kDAAQ,OAAO,kDAAQ,uBAAuB,kDAAQ;AAC7F;;AAEA;AACA;;AAEA;AACA;AACA,YAAY,kDAAQ;;AAEpB;AACA;AACA,gBAAgB,kDAAQ;AACxB,gBAAgB,kDAAQ;;AAExB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,kDAAQ;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,sEAAkB;AACrC;AACA;AACA;AACA;AACA,qCAAqC,mDAAQ;AAC7C;AACA;AACA,uCAAuC,mDAAQ;AAC/C;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,sEAAkB;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,yDAAW;AACnC,YAAY,yDAAW;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,gBAAgB,mDAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,OAAO;AACnC,+CAA+C,iEAAuB;AACtE;AACA;AACA;AACA;AACA,4CAA4C,yDAAW;AACvD;AACA;AACA,yCAAyC,8CAAM;AAC/C,4CAA4C,yDAAW;AACvD;AACA;AACA,yCAAyC,8CAAM;AAC/C,4CAA4C,yDAAW;AACvD;AACA;AACA,yCAAyC,8CAAM;AAC/C,4CAA4C,yDAAW;AACvD;AACA;AACA,yCAAyC,8CAAM;AAC/C;AACA;AACA;AACA,qBAAqB,yDAAW;AAChC;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,kBAAkB,yDAAW;AAC7B,eAAe,yDAAW;;AAE1B;AACA,kBAAkB,yDAAW;AAC7B,eAAe,yDAAW;AAC1B,WAAW,yDAAW;AACtB;;AAEA;AACA;AACA,2BAA2B,yDAAW;;AAEtC,WAAW,yDAAW,kBAAkB,yDAAW;AACnD;;AAEA;AACA,aAAa,yDAAW;AACxB,YAAY,yDAAW;AACvB,aAAa,yDAAW;AACxB,YAAY,yDAAW;AACvB,WAAW,yDAAW,kBAAkB,yDAAW;AACnD;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxgCZ;AACA;;AAEA;AACA;AACA;AACA;;AAE6B;AACkB;AAC+B;AACxB;AACiB;AACZ;AACX;AACG;AACd;AACU;AACM;AACV;AACJ;AACe;AACb;AACA;AACD;AACM;AACM;AACK;;;AAGzD;;AAEO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,iBAAiB,kDAAO;AACxB,wCAAwC,8CAAI;AAC5C,oCAAoC,8CAAI;AACxC,QAAQ,mDAAQ;AAChB,yBAAyB,SAAS;AAClC;AACA;AACA;AACA;AACA,mCAAmC,iDAAO,2BAA2B,iDAAO;AAC5E,sDAAsD,iDAAO,2CAA2C,iDAAO;AAC/G;AACA;AACA,kDAAkD,iDAAO,yCAAyC,iDAAO;AACzG;AACA,IAAI,sCAAE,WAAW,iDAAO;AACxB;AACA,2BAA2B,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,mDAAQ,2CAA2C,iDAAO;AACxE,6BAA6B,kDAAQ,yBAAyB,kDAAQ,iBAAiB,iDAAO;AAC9F,iBAAiB,sCAAE,WAAW,iDAAO;AACrC,gBAAgB,iDAAO;AACvB;AACA;AACA;AACA,0BAA0B,kDAAQ,yBAAyB,kDAAQ,iBAAiB,iDAAO;AAC3F,SAAS,sCAAE,WAAW,iDAAO;AAC7B,QAAQ,iDAAO;AACf;AACA,iBAAiB,sCAAE,WAAW,sCAAE,MAAM,iDAAO;AAC7C;AACA;AACA,uBAAuB,iDAAO;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,iDAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kDAAQ;AAChC,4BAA4B,kDAAQ;AACpC,4BAA4B,kDAAQ;AACpC;AACA,wBAAwB,kDAAQ,aAAa,kDAAQ;AACrD,kBAAkB,kDAAQ;AAC1B,oBAAoB,kDAAQ;AAC5B,wBAAwB,WAAW;AACnC,sBAAsB,iDAAO;AAC7B,oCAAoC,iDAAO,mBAAmB,iDAAO;AACrE,wBAAwB,sCAAE;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iDAAO;AAC/B;AACA;AACA,4BAA4B,kDAAQ;AACpC,gCAAgC,kDAAQ;AACxC,gCAAgC,kDAAQ;AACxC,gCAAgC,6CAAK;AACrC;AACA,2BAA2B,oEAAa;AACxC,4BAA4B,WAAW;AACvC,0BAA0B,iDAAO;AACjC;AACA,4BAA4B,sCAAE;AAC9B;AACA,4BAA4B,6CAAK;AACjC;AACA,0BAA0B,kDAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iDAAO;AACjC;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,8CAAM;AACnD;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iDAAO,6BAA6B,iDAAO;AAChE,qBAAqB,iDAAO,6BAA6B,iDAAO;AAChE,oBAAoB,kDAAQ,OAAO,kDAAQ;AAC3C,2BAA2B,iDAAO;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,mDAAQ;AACxB,8BAA8B,mDAAQ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,mDAAQ;AAClC;AACA;AACA;AACA;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA,wBAAwB,iDAAO;AAC/B;AACA;AACA,wBAAwB,iDAAO;AAC/B;AACA,0BAA0B,kDAAQ;AAClC,sBAAsB,kDAAQ,gBAAgB,kDAAQ,gCAAgC,kDAAQ;AAC9F,IAAI,8DAAe;AACnB;;AAEA;AACA;AACA,iBAAiB,kDAAQ;AACzB,uBAAuB,kDAAQ;AAC/B,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,4DAAU;AAClB;AACA;AACA,QAAQ,4DAAU;AAClB;AACA,YAAY,4DAAU,mBAAmB,6CAAK;AAC9C,UAAU;AACV,YAAY,4DAAU,mBAAmB,6CAAK;AAC9C;AACA;AACA;AACA;AACA;AACA,iBAAiB,iDAAO;AACxB,IAAI,iDAAO;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iDAAO;AACzB,qBAAqB,iDAAO;AAC5B;AACA;AACA;AACA;AACA;AACA,QAAQ,iDAAO;AACf,0BAA0B,kDAAQ;AAClC;AACA;AACA,QAAQ,4DAAU,eAAe,kDAAQ,iBAAiB,iDAAO;AACjE,kBAAkB,kDAAQ,iBAAiB,iDAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA,wBAAwB,mDAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,gBAAgB,wDAAW,oCAAoC,kDAAQ,UAAU,iDAAO,8BAA8B,iDAAO;AAC7H;AACA;AACA,kCAAkC,iDAAO;AACzC,gBAAgB,wDAAW,oCAAoC,kDAAQ,yCAAyC,iDAAO;AACvH;AACA;AACA,kCAAkC,iDAAO;AACzC,gBAAgB,wDAAW,oCAAoC,kDAAQ,yCAAyC,iDAAO;AACvH;AACA;AACA;AACA,IAAI,mEAAY,gCAAgC,iDAAO;AACvD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,wDAAU;AAC7C;AACA;AACA;AACA,sBAAsB,kDAAQ;AAC9B,uBAAuB,kDAAQ;AAC/B,yBAAyB,kDAAQ;AACjC,0BAA0B,kDAAQ;AAClC,qBAAqB,kDAAQ;AAC7B,yBAAyB,kDAAQ;AACjC,wBAAwB,kDAAQ;AAChC,2BAA2B,kDAAQ;AACnC,0BAA0B,kDAAQ;AAClC;AACA;AACA;AACA;AACA;AACA,wBAAwB,yDAAe;AACvC,wBAAwB,yDAAe;AACvC,wBAAwB,yDAAe;AACvC,wBAAwB,yDAAe;AACvC;AACA,+BAA+B,mDAAQ;AACvC,+BAA+B,mDAAQ;AACvC;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA,kDAAkD,gEAAc;AAChE;AACA;AACA;AACA;AACA,uBAAuB,kDAAQ;AAC/B,yBAAyB,kDAAQ,gBAAgB,kDAAQ;AACzD,iBAAiB,kDAAQ;AACzB,kBAAkB,kDAAQ;AAC1B;AACA;AACA,kBAAkB,kDAAQ;AAC1B,sBAAsB,kDAAQ;AAC9B;AACA,wBAAwB,OAAO;AAC/B,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,gEAAc,eAAe,gEAAc;AACvD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI,4DAAU,qEAAqE,iDAAO,oCAAoC,kDAAQ;AACtI,gCAAgC,+DAAK;AACrC;;AAEA;AACA;AACA;AACA;AACA,IAAI,iDAAO,iBAAiB,yDAAO,SAAS,wDAAU;AACtD;AACA;AACA,uCAAuC,gFAA2B;AAClE;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA;AACA,2BAA2B,yDAAe;AAC1C,gCAAgC,kDAAQ;AACxC;AACA;AACA;AACA,2BAA2B,yDAAe;AAC1C,gCAAgC,kDAAQ;AACxC;AACA;AACA;AACA,2BAA2B,yDAAe;AAC1C,gCAAgC,kDAAQ;AACxC;AACA;AACA;AACA,2BAA2B,yDAAe;AAC1C,gCAAgC,kDAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,+DAAgB;AACjC;AACA,iBAAiB,+DAAgB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,4BAA4B;;;;;;;;;;;;;;;;;;;;;;;;;AC3hBxC;AACA;;AAEA;AACA;AACA;;AAE6B;AACkB;AACkD;AAC7B;AACrB;AACA;AACd;AACa;AACN;AACP;;;AAGjC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,0CAAI;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA,oBAAoB,wDAAW;AAC/B;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,kCAAkC,iDAAO,CAAC,uDAAU;AACpD,4CAA4C,sCAAE;AAC9C;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,4EAAwB;AACpC,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,YAAY,4EAAwB;AACpC;AACA;AACA,KAAK;;AAEL;AACA,mBAAmB,sCAAE;AACrB;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB,2BAA2B,0CAAI;AAC/B,gCAAgC,wDAAW;AAC3C;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wDAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B,kBAAkB,kDAAQ;AAC1B;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oEAAgB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,8CAA8C,8DAAc;AAC5D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,8CAA8C,8DAAc;AAC5D,8CAA8C,8DAAc;AAC5D,8CAA8C,8DAAc;AAC5D,4CAA4C,8DAAc;AAC1D,8CAA8C,8DAAc;AAC5D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,8CAA8C,8DAAc;AAC5D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,UAAU;AACV,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD;AACA,KAAK;;AAEL;AACA,iBAAiB,kDAAQ;AACzB,mBAAmB,kDAAQ,MAAM,kDAAQ,+DAA+D,kDAAQ;AAChH;AACA,eAAe,yDAAe;AAC9B,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,QAAQ,0CAAI;AACZ;AACA,KAAK;;AAEL;AACA,QAAQ,0CAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,mCAAmC,0CAAI;;;;;;;;;;;;;;;;;;ACzQnD;AACA;;AAEA;AACA;;AAE6B;AACkB;AACG;;;AAGlD;;AAEO;AACP,+CAA+C;AAC/C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,2DAAY;AACjC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,mBAAmB,2DAAY;AAC/B,KAAK;;AAEL;AACA,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrDZ;AACA;;AAEA;;AAE6B;AACkB;AACY;AACiB;AACmB;AAC1D;AACiB;AACH;AACO;AACtB;AACW;AACc;AACtB;AACe;AACb;AACwB;AACO;AACf;;;AAGzD;;AAEO;AACP;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,mEAAgB;AAC1C,4BAA4B,mEAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kDAAQ;AACnC;AACA;AACA,oCAAoC,mEAAgB;AACpD,6BAA6B,kDAAQ;AACrC;AACA;AACA;AACA;AACA;AACA,8BAA8B,6CAAM;AACpC,2BAA2B,6CAAM;AACjC,4BAA4B,kDAAQ;AACpC,0BAA0B,6CAAM;AAChC,4BAA4B,kDAAQ;AACpC,gCAAgC,6CAAM;AACtC,uCAAuC,kDAAQ;AAC/C;AACA,wCAAwC,kDAAQ;AAChD;AACA;AACA,8BAA8B,kDAAQ;AACtC;AACA,oBAAoB,OAAO;AAC3B,+BAA+B,gDAAM;AACrC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,yDAAc;AAC3B;AACA;AACA,aAAa,yDAAc;AAC3B;AACA;AACA,aAAa,yDAAc;AAC3B;AACA;AACA,aAAa,yDAAc;AAC3B;AACA;AACA,aAAa,yDAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,yDAAc;AAC3B,aAAa,yDAAc;AAC3B;AACA;AACA,aAAa,yDAAc;AAC3B,wCAAwC,sCAAE;AAC1C;AACA,aAAa,yDAAc;AAC3B,wCAAwC,sCAAE;AAC1C;AACA,aAAa,yDAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,yDAAc;AAC3B;AACA;AACA,aAAa,yDAAc;AAC3B;AACA;AACA,aAAa,yDAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA,mCAAmC,sCAAE,uBAAuB,sCAAE;AAC9D,0BAA0B,+DAAK,oBAAoB,+DAAK;AACxD,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,gCAAgC,+DAAK;AACrC;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,sCAAsC;;AAEtC;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,wBAAwB,kFAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA,wCAAwC,uEAAqB;AAC7D;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,UAAU;AAClC,4BAA4B,UAAU;AACtC,2BAA2B,oEAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,wCAAwC,uEAAqB;AAC7D;AACA,UAAU;AACV,YAAY,mEAAY;AACxB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,sCAAE;AACV;AACA,YAAY,mEAAY;AACxB;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,oBAAoB,8DAAgB,mBAAmB,iDAAO;AAC9D;AACA;AACA;AACA;AACA;AACA,wBAAwB,UAAU;AAClC,4BAA4B,UAAU;AACtC,2BAA2B,oEAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,sBAAsB,yDAAW;AACjC,2BAA2B,iDAAO;AAClC,kBAAkB,kDAAQ;AAC1B;AACA,wBAAwB,yDAAW;AACnC;AACA,UAAU,4DAA4D,uDAAY;AAClF;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,wBAAwB,UAAU;AAClC,4BAA4B,UAAU;AACtC,2BAA2B,oEAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,UAAU;AAClC,4BAA4B,UAAU;AACtC,2BAA2B,oEAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,QAAQ,gEAAc;;AAEtB;AACA,0BAA0B,kDAAQ;AAClC,8BAA8B,kDAAQ;AACtC;AACA;AACA,0BAA0B,yDAAW;AACrC;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,8BAA8B,kDAAQ;AACtC,2BAA2B,kDAAQ;AACnC;AACA,qBAAqB,kDAAQ;AAC7B,sBAAsB,kDAAQ;AAC9B;AACA;AACA;AACA;AACA;AACA,4BAA4B,kDAAQ;AACpC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,mCAAmC,kDAAQ;AAC3C,2CAA2C,kDAAQ;AACnD,2CAA2C,kDAAQ;AACnD,2CAA2C,kDAAQ;AACnD;AACA;AACA;AACA,QAAQ,gEAAc;AACtB,0BAA0B,kDAAQ;AAClC,YAAY,mDAAQ;AACpB;AACA,kCAAkC,kDAAQ;AAC1C,kCAAkC,kDAAQ;AAC1C,yBAAyB,yDAAW;AACpC,8BAA8B,yDAAW;AACzC;AACA;AACA;AACA;AACA,UAAU;AACV,kCAAkC,kDAAQ;AAC1C,kCAAkC,kDAAQ;AAC1C,8BAA8B,yDAAW;AACzC;AACA;AACA;AACA;;AAEA;AACA,YAAY,mDAAQ,sFAAsF,uDAAY;AACtH,kCAAkC,yDAAW;AAC7C;AACA;AACA,yBAAyB,yDAAW,kCAAkC,2EAAmB,iBAAiB,2EAAmB;AAC7H;AACA;AACA,yBAAyB,yDAAW;AACpC,0BAA0B,kDAAQ;AAClC,kCAAkC,kDAAQ;AAC1C,gBAAgB,2EAAmB;AACnC,sCAAsC,kDAAQ;AAC9C,sCAAsC,kDAAQ;AAC9C;AACA;AACA;AACA,sCAAsC,kDAAQ;AAC9C,sCAAsC,kDAAQ;AAC9C;AACA,+BAA+B,yDAAW,qBAAqB,yDAAW,gCAAgC,2EAAmB,iBAAiB,2EAAmB;AACjK;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kDAAQ;;AAEtC;AACA,sBAAsB,kDAAQ,+BAA+B,kDAAQ,mBAAmB,kDAAQ;AAChG;AACA;AACA;AACA,4BAA4B,kDAAQ;AACpC;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,8DAA8D,uDAAY;AAC1E,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,uBAAuB,kDAAQ;AAC/B,2BAA2B,kDAAQ;AACnC,uBAAuB,kDAAQ;AAC/B,qBAAqB,kDAAQ;AAC7B,qBAAqB,kDAAQ;AAC7B;AACA,eAAe,kDAAQ;AACvB,uBAAuB,kDAAQ;AAC/B;AACA;AACA;AACA,4BAA4B,kDAAQ;AACpC,KAAK;;AAEL;AACA,wBAAwB,mDAAQ;AAChC;AACA;AACA,yCAAyC,iDAAO;AAChD;AACA,QAAQ,gEAAc;AACtB;AACA,6BAA6B,kDAAQ;AACrC;AACA;AACA,mDAAmD,sCAAE;AACrD;AACA,yBAAyB,mEAAY;AACrC;AACA;AACA,UAAU,UAAU,sCAAE;AACtB;AACA;AACA;AACA;AACA,yBAAyB,kDAAQ;AACjC,yBAAyB,kDAAQ;AACjC,6BAA6B,kDAAQ;AACrC,6BAA6B,kDAAQ;AACrC,2BAA2B,kDAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,8CAAI;AACpD;AACA;AACA,kCAAkC,kDAAQ;AAC1C,qBAAqB,kDAAQ;AAC7B,UAAU;AACV,kCAAkC,kDAAQ;AAC1C,qBAAqB,kDAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAQ;AACrC;AACA,uBAAuB,kDAAQ;AAC/B,2BAA2B,kDAAQ;AACnC,sCAAsC,kDAAQ;AAC9C,sBAAsB,kDAAQ,gBAAgB,kDAAQ,gCAAgC,kDAAQ;AAC9F;AACA,mBAAmB,kDAAQ;AAC3B;AACA,eAAe,kDAAQ;AACvB;AACA;AACA,qBAAqB,iDAAO;AAC5B;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kDAAQ;AACpC;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,iCAAiC;;AAEjC;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL,4CAA4C;AAC5C;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,kBAAkB,kDAAQ;AAC1B,6BAA6B,kDAAQ;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA,uBAAuB,kDAAQ;AAC/B,2BAA2B,kDAAQ;AACnC;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,QAAQ,sEAAkB;AAC1B,QAAQ,sEAAkB;AAC1B,QAAQ,4DAAU;AAClB,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL,iDAAiD;;AAEjD,+CAA+C;;AAE/C;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACj9BZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACO;;AAEA;AACP;AACA;;AAEA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;;AAEO;AACP;AACA;;AAEA;AACO;;AAEA;AACP;AACA;;AAEA;AACO;;AAEA;AACP;AACA;;AAEA;AACA;AACO;;AAEA;AACP;AACA;;;;;;;;;;;;;;;;;AC9FA;AACA;;AAEA;;AAE+C;AACqB;;;AAGpE;;AAEO;AACP,iBAAiB,yDAAe;AAChC,iBAAiB,yDAAe;AAChC,iBAAiB,yDAAe;AAChC,sBAAsB,kDAAQ;AAC9B;AACA;AACA;AACA,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,mBAAmB,kDAAQ;AAC3B,2BAA2B,kDAAQ;AACnC,2BAA2B,kDAAQ;AACnC,2BAA2B,kDAAQ;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,kDAAQ;AACxB,gBAAgB,kDAAQ;AACxB;AACA;AACA,cAAc,kDAAQ;AACtB;AACA,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,kDAAQ;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kDAAQ;AAC9B;AACA,KAAK;;AAEL;AACA,iBAAiB,kDAAQ;AACzB,iBAAiB,kDAAQ;AACzB,iBAAiB,kDAAQ;AACzB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvSZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE6B;AACkB;AACd;AACwC;AACkB;AACtB;AAClB;AACK;AACf;AACkB;AACF;AACpB;;;AAGrC;;AAEO;AACP,IAAI,sCAAE;AACN;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY,0EAA0E,sCAAE;;;AAGxF;;AAEO;AACP;AACA;AACA;AACA,IAAI,sCAAE;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY,2DAA2D,sCAAE;;;AAGzE;;AAEO;AACP;AACA;AACA,IAAI,sCAAE;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY,mFAAmF,sCAAE;;;AAGjG;;AAEO;AACP,IAAI,sCAAE;AACN;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY,sFAAsF,sCAAE;;;AAGpG;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,sCAAE,mCAAmC,sCAAE,kCAAkC,sCAAE,kCAAkC,sCAAE;AAC3H;;AAEA;AACA,QAAQ,sCAAE;AACV,eAAe,mEAAY;AAC3B;AACA,wBAAwB,mEAAY;AACpC;AACA,8CAA8C,mEAAmB;AACjE,QAAQ,8DAAgB;AACxB;AACA;AACA;;AAEA;AACA,QAAQ,sCAAE;AACV,eAAe,mEAAY;AAC3B;AACA,4BAA4B,oEAAa;AACzC,uBAAuB,kDAAQ;AAC/B;AACA;AACA;AACA;AACA,oBAAoB,sCAAE;AACtB,qBAAqB,sCAAE;AACvB,oGAAoG,0CAAI;AACxG;AACA;AACA,QAAQ,mEAAY;AACpB;AACA,kDAAkD,mEAAmB;AACrE,YAAY,8DAAgB;AAC5B;AACA;AACA;AACA;AACA;AACA,QAAQ,sCAAE;AACV,eAAe,mEAAY;AAC3B;AACA,QAAQ,6DAAa;AACrB,YAAY,4DAAS;AACrB;AACA;AACA,YAAY,iEAAW;AACvB;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,sCAAE;AACzB,KAAK;;AAEL;AACA,uBAAuB,sCAAE;AACzB,KAAK;;AAEL;AACA;AACA,mCAAmC,sCAAE;AACrC,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA,kCAAkC,sCAAE;AACpC,KAAK;;AAEL;AACA,kCAAkC,sCAAE;AACpC,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,oCAAoC,sCAAE;AACtC,KAAK;;AAEL;AACA,oCAAoC,sCAAE;AACtC,KAAK;;AAEL;AACA,gCAAgC,sCAAE;AAClC,KAAK;;AAEL;AACA,gCAAgC,sCAAE;AAClC,KAAK;;AAEL;AACA,qCAAqC,sCAAE;AACvC,KAAK;;AAEL;AACA,qCAAqC,sCAAE;AACvC,KAAK;;AAEL;AACA,yBAAyB,sCAAE;AAC3B,KAAK;;AAEL;AACA,yBAAyB,sCAAE;AAC3B,KAAK;;AAEL;AACA,yBAAyB,sCAAE;AAC3B,KAAK;;AAEL;AACA,yBAAyB,sCAAE;AAC3B,KAAK;;AAEL;AACA,mCAAmC,sCAAE;AACrC,KAAK;;AAEL;AACA,mCAAmC,sCAAE;AACrC,KAAK;;AAEL;AACA,+BAA+B,sCAAE;AACjC,KAAK;;AAEL;AACA,+BAA+B,sCAAE;AACjC,KAAK;;AAEL;AACA,2BAA2B,sCAAE;AAC7B,KAAK;;AAEL;AACA,2BAA2B,sCAAE;AAC7B,KAAK;;AAEL;AACA,2BAA2B,sCAAE;AAC7B,KAAK;;AAEL;AACA,2BAA2B,sCAAE;AAC7B,KAAK;;AAEL;AACA,4BAA4B,sCAAE;AAC9B,KAAK;;AAEL;AACA,4BAA4B,sCAAE;AAC9B,KAAK;;AAEL;AACA,6BAA6B,sCAAE;AAC/B,KAAK;;AAEL;AACA,6BAA6B,sCAAE;AAC/B,KAAK;;AAEL;AACA,2BAA2B,sCAAE;AAC7B,KAAK;;AAEL;AACA,2BAA2B,sCAAE;AAC7B,KAAK;;AAEL;AACA,8BAA8B,sCAAE;AAChC,KAAK;;AAEL;AACA,8BAA8B,sCAAE;AAChC,KAAK;;AAEL;AACA;AACA;;AAEA;AACA,kCAAkC,sCAAE;AACpC,KAAK;;AAEL;AACA,kCAAkC,sCAAE;AACpC,KAAK;;AAEL;AACA,QAAQ,mEAAY;AACpB,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,6CAA6C,sCAAE;AAC/C;AACA,KAAK;;AAEL;AACA;AACA,iDAAiD,sCAAE;AACnD;AACA,KAAK;;AAEL;AACA;AACA,uCAAuC,sCAAE;AACzC;AACA,KAAK;;AAEL;AACA;AACA,qCAAqC,sCAAE;AACvC;AACA,KAAK;;AAEL;AACA;AACA,wCAAwC,sCAAE;AAC1C;AACA,KAAK;;AAEL;AACA;AACA,yCAAyC,sCAAE;AAC3C;AACA,KAAK;;AAEL;AACA;AACA,uCAAuC,sCAAE;AACzC;AACA,KAAK;;AAEL;AACA;AACA,2CAA2C,sCAAE;AAC7C;AACA,KAAK;;AAEL;AACA;AACA,+DAA+D,mEAAmB;AAClF;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA;AACA,eAAe,mEAAY;AAC3B,KAAK;;AAEL;AACA,eAAe,mEAAY;AAC3B,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B,YAAY,mEAAmB;AAC/B;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,mEAAmB;AAC/B;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL,+BAA+B;;AAE/B;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV,2BAA2B,8DAAgB;AAC3C;AACA;AACA;AACA,UAAU;AACV,2BAA2B,8DAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,oBAAoB,mEAAY;AAChC,YAAY,sCAAE,gBAAgB,oEAAa;AAC3C,YAAY,sCAAE,QAAQ,wEAAsB;;AAE5C;AACA,YAAY,wEAAsB;AAClC;AACA,KAAK;;AAEL;AACA,eAAe,6DAAa;AAC5B,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,QAAQ,8DAAY;AACpB;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,mBAAmB,mEAAmB;AACtC;AACA;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,mBAAmB,mEAAmB;AACtC;AACA;AACA,KAAK;;AAEL;AACA,yBAAyB,+CAAM;AAC/B;AACA,KAAK;;AAEL;AACA,oBAAoB,gDAAI;AACxB;AACA;AACA,KAAK;;AAEL;AACA,mBAAmB,oDAAQ;AAC3B,KAAK;;AAEL;AACA,oBAAoB,kDAAM;AAC1B;AACA;AACA,KAAK;;AAEL;AACA,kCAAkC,sCAAE,qBAAqB,sDAAU;AACnE,gBAAgB,8DAAgB;AAChC,gBAAgB,8DAAgB;AAChC;AACA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,8DAAgB;AAChC,gBAAgB,8DAAgB;AAChC;AACA;AACA,KAAK;;AAEL;AACA,YAAY,8DAAgB;AAC5B,YAAY,8DAAgB;AAC5B;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL,mDAAmD;;AAEnD;AACA,YAAY,8DAAgB;AAC5B,mBAAmB,mEAAmB;AACtC;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;AC3sBZ;AACA;;AAEA;;AAE6D;AACzB;AAC4B;AACpB;;;AAG5C;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,6CAAM;AACpC,8BAA8B,6CAAM;AACpC,2BAA2B,6CAAM;AACjC,iCAAiC,6CAAM;AACvC,0BAA0B,6CAAM;AAChC,gCAAgC,6CAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,yEAAmB;AAC9D,8CAA8C,yEAAmB;AACjE,yCAAyC,yEAAmB;AAC5D,uCAAuC,yEAAmB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,yCAAyC,qDAAS;;;;;;;;;;;;;;;;;;;;ACv0B9D;AACA;;AAEA;AACA;;AAE6B;AACkB;AACY;AACV;AACY;;;AAG7D;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,yDAAW;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,yDAAW;AACnC,uBAAuB,sCAAE,uCAAuC,0DAAQ;AACxE,gCAAgC,qDAAK;AACrC,gBAAgB,6DAAa;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,+CAA+C,yDAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjEtE;AACA;;AAEA;;AAE6B;AACgC;AACiB;AACzC;AACD;AACkB;AACiB;AACvB;AACG;AACC;AACN;AACR;AACE;;;AAGxC;;AAEO;AACP;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA,yBAAyB,kDAAQ;AACjC,2BAA2B,6DAAU;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,kDAAQ;AACpC;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA,8CAA8C,MAAK,IAAI,CAAM;AAC7D;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,4DAAU;AACtB,wCAAwC,+DAAK;AAC7C;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,iBAAiB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kDAAQ;AAC/B;AACA;AACA;AACA,4BAA4B,eAAe;AAC3C;AACA;AACA,mCAAmC,gDAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,gFAA2B;AAC5D;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;AAEZ;;AAEO;AACP;AACA;AACA,sBAAsB,gDAAS;AAC/B,oBAAoB,kDAAQ;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,gDAAS;AAC3B,gBAAgB,kDAAQ;AACxB,mBAAmB,kDAAQ;AAC3B;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY;;AAEZ;;AAEO;AACP;AACA;AACA;AACA;AACA,0BAA0B,6DAAU;AACpC;AACA;AACA;AACA;AACA,oBAAoB,yDAAO,SAAS,wDAAU;AAC9C,wBAAwB,kDAAO,CAAC,wDAAU;AAC1C,kCAAkC,sCAAE;AACpC;AACA;;AAEA;AACA;;AAEA;AACA,SAAS,sCAAE;AACX;AACA;AACA;AACA;;AAEA;AACA,IAAI,sCAAE;AACN;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA,oBAAoB,8CAAI;AACxB,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,2CAA2C;;AAE3C;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY,+CAA+C,sCAAE;;AAE7D;;AAEO;AACP;AACA;AACA;AACA;AACA,iBAAiB,6CAAM;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kDAAQ,oBAAoB,kDAAQ;AACnD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B,4BAA4B,yDAAe;AAC3C;AACA,mBAAmB,kDAAQ;AAC3B,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,qBAAqB,kDAAQ,iBAAiB,kDAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAQ,2BAA2B,kDAAQ;AACxE;AACA;AACA,+BAA+B,kDAAQ,gBAAgB,kDAAQ,gBAAgB,kDAAQ,gBAAgB,kDAAQ,wBAAwB,kDAAQ,8CAA8C,kDAAQ,0CAA0C,kDAAQ;AACvP;AACA;AACA;AACA,4BAA4B,OAAO;AACnC,qCAAqC,kDAAQ;AAC7C;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;AC5aZ;AACA;;AAEA;;AAE+C;AAClB;AACY;AACE;AACI;AACN;;;AAGzC;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4EAA4E,sCAAE;AAC9E;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,sCAAE;AACjC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAuC,sCAAE;AACzC,qEAAqE,sCAAE;AACvE,UAAU;AACV,gDAAgD,sCAAE;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,wDAAW,YAAY,kDAAQ,iCAAiC,kDAAQ;AAC5G,oCAAoC,kDAAQ;AAC5C;AACA;;AAEA;AACA,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB;AACA,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,kDAAE;AACrB;AACA,8BAA8B,sCAAE;AAChC,2FAA2F,sCAAE,0BAA0B,sCAAE;AACzH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,oDAAS;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd,oBAAoB,sCAAE;AACtB;AACA,WAAW,sCAAE,mCAAmC,sCAAE;AAClD;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;ACxPZ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,qCAAqC,OAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAsC,SAAS,+CAA+C;AAC9F,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,eAAe;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,mCAAmC,QAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,8DAA8D,aAAa;AAC3E;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,GAAG,EAAE,IAAI;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,2CAA2C;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,cAAc,qBAAqB,YAAY;AAC/C;AACA;;AAEA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,mBAAmB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C,SAAS;AACrD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,WAAW;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,gBAAgB,GAAG;;AAEnB;AACA;AACA;AACA;AACA;AACA,iBAAiB,EAAE;AACnB,gBAAgB,EAAE;AAClB,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;;AAEzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,0CAA0C;AAC1C;AACA;AACA;;AAEA;;AAEA;AACA;AACA,kDAAkD;AAClD,mCAAmC;;AAEnC,mCAAmC;AACnC,mCAAmC;;AAEnC,mCAAmC;AACnC,mCAAmC;;AAEnC,kDAAkD;AAClD,kDAAkD;;AAElD;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;AACrC;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,SAAS;AACtD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sCAAsC;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;AACH;;AAEO;;;;;;;;;;;;;;;;;;;;AC3/CP;AACA;;AAEA;;AAE6B;AACkB;AACV;AACF;AACY;;;AAG/C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sCAAE;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,wDAAW;AAC1B,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,4CAAK;AAChC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,uDAAuD,8CAAI;AAC3D;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;;AAEA,mBAAmB,4CAAK;AACxB;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;ACtNZ;AACA;;AAEA;;AAE6B;AACkB;AAC+C;AACpC;AACJ;AACA;AACH;AAClB;;;AAGjC;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA,IAAI,0CAAI;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,qCAAqC,0CAAI;AACzC,mDAAmD,kDAAQ;AAC3D,KAAK;;AAEL;AACA,yBAAyB,sCAAE,uCAAuC,4DAAS;AAC3E;AACA;AACA;AACA;AACA;AACA,YAAY,4EAAwB;AACpC,gBAAgB,6DAAa;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,YAAY,0CAAI;AAChB;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kDAAQ;AAC7B,yBAAyB,kDAAQ;AACjC,0BAA0B,kDAAQ;AAClC,wBAAwB,kDAAQ;AAChC,2BAA2B,kDAAQ;AACnC;AACA,8CAA8C,+DAAc,QAAQ,yDAAe,gCAAgC,yDAAe,gCAAgC,yDAAe;AACjL,8CAA8C,+DAAc,QAAQ,yDAAe,gCAAgC,yDAAe,8BAA8B,yDAAe;AAC/K,8CAA8C,+DAAc,QAAQ,yDAAe,+BAA+B,yDAAe,iCAAiC,yDAAe;AACjL,8CAA8C,+DAAc,QAAQ,yDAAe,+BAA+B,yDAAe,8BAA8B,yDAAe;AAC9K,8CAA8C,+DAAc,QAAQ,yDAAe,gCAAgC,yDAAe,kCAAkC,yDAAe;AACnL,8CAA8C,+DAAc,QAAQ,yDAAe,gCAAgC,yDAAe,mCAAmC,yDAAe;AACpL,8CAA8C,+DAAc,QAAQ,yDAAe,8BAA8B,yDAAe,oCAAoC,yDAAe;AACnL,8CAA8C,+DAAc,QAAQ,yDAAe,8BAA8B,yDAAe,kCAAkC,yDAAe;AACjL;AACA,UAAU;AACV;AACA,iCAAiC,8DAAc;AAC/C,YAAY,8DAAc,YAAY,+DAAK;AAC3C;AACA;AACA;AACA,kDAAkD,yDAAe;AACjE,kDAAkD,yDAAe;AACjE,kDAAkD,yDAAe;AACjE,kDAAkD,yDAAe;AACjE,kDAAkD,yDAAe;AACjE,kDAAkD,yDAAe;AACjE,kDAAkD,yDAAe;AACjE,kDAAkD,yDAAe;AACjE,kDAAkD,yDAAe;AACjE,YAAY,8DAAc,YAAY,+DAAK,yBAAyB,+DAAK;;AAEzE;AACA,4BAA4B,OAAO;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,8DAAc;AACtD,gBAAgB,8DAAc,YAAY,+DAAK;AAC/C,gBAAgB,8DAAc,YAAY,+DAAK,kCAAkC,+DAAK;AACtF;AACA;AACA;AACA;AACA;;AAEA,4DAAY,4CAA4C,0CAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvN5D;AACA;;AAEA;;AAE6B;AACkB;AACgB;AAYlC;AACwB;AACC;AACN;AACe;AACxB;AACO;AACA;AACsB;AACZ;AACI;;;AAG5D;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kDAAQ;AAChC;AACA;AACA,2BAA2B,kDAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kDAAQ;AACtC,kCAAkC,kDAAQ;AAC1C,+BAA+B,kDAAQ;AACvC,iCAAiC,kDAAQ;AACzC;AACA,4BAA4B,kDAAQ;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B,kCAAkC,uDAAU;AAC5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAkB;AAClB;AACA;AACA,sEAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,YAAY,8DAAc;AAC1B;AACA,iCAAiC,8DAAc;AAC/C,gBAAgB,8DAAc,aAAa,+DAAK;AAChD,gBAAgB,8DAAc,eAAe,+DAAK,aAAa,+DAAK,iBAAiB,+DAAK;AAC1F,gBAAgB,8DAAc,eAAe,+DAAK,aAAa,+DAAK,iBAAiB,+DAAK;AAC1F,uFAAuF,6DAAa;AACpG,oBAAoB,8DAAc,YAAY,+DAAK,gBAAgB,+DAAK,OAAO,sCAAE,uCAAuC,sCAAE,0CAA0C,+DAAK,MAAM,+DAAK;AACpL,oBAAoB,8DAAc,eAAe,+DAAK,aAAa,+DAAK,qBAAqB,+DAAK;AAClG,oBAAoB,8DAAc,eAAe,+DAAK,aAAa,+DAAK,qBAAqB,+DAAK;AAClG;AACA;AACA;AACA;AACA,0BAA0B,yDAAO,sCAAsC,yDAAO;AAC9E;AACA,sCAAsC,yDAAO;AAC7C,qCAAqC,yDAAO;AAC5C;AACA;AACA;AACA;AACA;AACA,oBAAoB,8DAAc,YAAY,+DAAK,gBAAgB,+DAAK,OAAO,+DAAK,OAAO,+DAAK;AAChG,oBAAoB,8DAAc,eAAe,+DAAK,aAAa,+DAAK,qBAAqB,+DAAK;AAClG,oBAAoB,8DAAc,gBAAgB,+DAAK;AACvD;AACA,gBAAgB,8DAAc,aAAa,+DAAK;AAChD;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,aAAa,8DAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,kDAAQ;AAC7B;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qCAAqC;AACrC,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,6DAAa;AACjC,yCAAyC,sEAAa;AACtD;AACA;AACA,wBAAwB,4EAAwB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qCAAqC,kEAAW;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,4EAAwB;AAChD;AACA,qBAAqB;AACrB;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,4EAAwB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4EAAwB;AAC5C;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,wDAAU;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4EAAwB;AAC5C,iBAAiB;AACjB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,4EAAwB;AACxC,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,4EAAwB;AACxC,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,2BAA2B,yEAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,2EAAuB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC,6BAA6B,WAAW;AACxC;AACA;AACA;AACA,oDAAoD,oEAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,kBAAkB,0EAAsB;AACxC;AACA;AACA;AACA,oBAAoB,0EAAsB;AAC1C;AACA;AACA;AACA,qBAAqB,0EAAsB;AAC3C;AACA;AACA;AACA,mBAAmB,0EAAsB;AACzC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,8DAAc;AAC1B;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAAgC,kDAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,gBAAgB,6DAAa;AAC7B,gBAAgB,8EAAiB,qBAAqB,8DAAc;AACpE,gBAAgB,4DAAU;AAC1B,gBAAgB,4DAAU;AAC1B,gBAAgB,4DAAU;AAC1B,gBAAgB,4DAAU;AAC1B,gBAAgB,4DAAU;AAC1B,gBAAgB,4DAAU;AAC1B,gBAAgB,4DAAU;AAC1B,gBAAgB,4DAAU;AAC1B,gBAAgB,4DAAU;AAC1B;AACA;AACA,gBAAgB,4DAAU;AAC1B;AACA,0CAA0C,+DAAK,oCAAoC,+DAAK;AACxF;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8DAAc;AAC1B,yBAAyB,sCAAE;AAC3B;AACA;AACA,gBAAgB,8DAAc;AAC9B;AACA;AACA;AACA,gBAAgB,8DAAc;AAC9B;AACA;AACA;AACA,gBAAgB,8DAAc;AAC9B;AACA;AACA;AACA,KAAK;;AAEL;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,8DAAc;AAC1B;AACA;AACA;AACA;AACA,YAAY,8DAAc;AAC1B;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,oDAAU;AAC/B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2BAA2B,kDAAQ;AACnC,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,yBAAyB,kDAAQ;AACjC;AACA,UAAU;AACV;AACA,yBAAyB,kDAAQ;AACjC;AACA;AACA,KAAK;;AAEL,kDAAkD;;AAElD;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,oDAAU;AAClC;AACA;AACA,KAAK;;AAEL;AACA;AACA,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,IAAI;AACX,OAAO,IAAI;AACX,OAAO,IAAI;AACX,OAAO,IAAI;AACX,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV,OAAO,GAAG;AACV;AACA,4BAA4B,wDAAU;AACtC;AACA,oCAAoC,EAAE;AACtC;AACA,mDAAmD,sCAAE;AACrD,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sCAAE;AACzB;AACA;AACA,oBAAoB,sCAAE,4BAA4B,EAAE;AACpD,oBAAoB,sCAAE,4BAA4B,EAAE;AACpD,oBAAoB,sCAAE,4BAA4B,EAAE;AACpD;AACA,gCAAgC,IAAI;AACpC;AACA,wBAAwB,sCAAE,4BAA4B,IAAI,KAAK,EAAE;AACjE;AACA,gCAAgC,IAAI;AACpC;AACA,wBAAwB,sCAAE,4BAA4B,IAAI,KAAK,EAAE;AACjE;AACA,gCAAgC,IAAI;AACpC;AACA,wBAAwB,sCAAE,4BAA4B,IAAI,KAAK,EAAE;AACjE;AACA,gCAAgC,IAAI;AACpC;AACA,wBAAwB,sCAAE,4BAA4B,IAAI,KAAK,EAAE;AACjE;AACA,iCAAiC,EAAE;AACnC,wBAAwB,sCAAE,6BAA6B,EAAE,MAAM,EAAE;AACjE;AACA,iCAAiC,EAAE;AACnC,wBAAwB,sCAAE,6BAA6B,EAAE,MAAM,EAAE;AACjE;AACA,mCAAmC,EAAE;AACrC,wBAAwB,sCAAE,+BAA+B,EAAE,yCAAyC,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,oBAAoB,sCAAE,4BAA4B,EAAE;AACpD,oBAAoB,sCAAE,4BAA4B,EAAE;AACpD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,wDAAU;AACtC,+CAA+C,8DAAgB;AAC/D,0BAA0B,wDAAU,iDAAiD,EAAE,EAAE,EAAE,EAAE,EAAE;AAC/F,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA,oCAAoC,EAAE;AACtC,mBAAmB,sCAAE;AACrB;AACA;AACA,oBAAoB,sCAAE,4BAA4B,EAAE;AACpD,oBAAoB,sCAAE,4BAA4B,EAAE;AACpD,oBAAoB,sCAAE,4BAA4B,EAAE;AACpD;AACA,gCAAgC,IAAI;AACpC;AACA,wBAAwB,sCAAE,4BAA4B,IAAI,KAAK,EAAE;AACjE;AACA,gCAAgC,IAAI;AACpC;AACA,wBAAwB,sCAAE,4BAA4B,IAAI,KAAK,EAAE;AACjE;AACA,gCAAgC,IAAI;AACpC;AACA,wBAAwB,sCAAE,4BAA4B,IAAI,KAAK,EAAE;AACjE;AACA,gCAAgC,IAAI;AACpC;AACA,wBAAwB,sCAAE,4BAA4B,IAAI,KAAK,EAAE;AACjE;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,oBAAoB,sCAAE,4BAA4B,EAAE;AACpD,oBAAoB,sCAAE,4BAA4B,EAAE;AACpD;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,sCAAE;AACf,yBAAyB,sCAAE;AAC3B,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;ACx0BZ;AACA;;AAEA;;AAE6B;AACkB;AACN;AAMZ;AACU;AACN;AACwB;;;AAGzD;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,sCAAE;AACb;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,oDAAU;AAC5B,SAAS,sCAAE;AACX,kBAAkB,kDAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wEAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,oDAAU;AAC5B;AACA,aAAa,sCAAE;AACf;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA,8EAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE,WAAW,sCAAE;AACxC;AACA;AACA;AACA,+CAA+C,0CAAI;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,sCAAE;AACb;AACA;AACA;AACA;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA,+BAA+B,kDAAQ;AACvC;AACA;AACA,sCAAsC,kDAAQ;AAC9C;AACA;AACA;AACA;AACA;AACA,0EAA0E,wDAAc,mDAAmD,wDAAc;AACzJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA,+EAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gFAA4B;;AAE5B;AACA,IAAI,sCAAE;AACN;;AAEA;AACA,IAAI,sCAAE;AACN;;AAEA;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE,WAAW,sCAAE;AACxC;AACA;AACA;AACA,+CAA+C,0CAAI;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,sCAAE,WAAW,sCAAE;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;AClSZ;AACA;;AAEA;;AAE6B;AACkB;AACwC;AACP;AAC1B;AACP;AACO;AACrB;AACQ;AACA;;;AAGzC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,0CAAI;AACR;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;AACL;AACA;AACA,8CAA8C,8DAAc;AAC5D,YAAY,8DAAc,YAAY,+DAAK;AAC3C,YAAY,8DAAc,YAAY,+DAAK,mCAAmC,+DAAK;AACnF;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA,gEAAgE,8DAAc;AAC9E,gBAAgB,8DAAc,YAAY,+DAAK;AAC/C,gBAAgB,8DAAc,YAAY,+DAAK,kCAAkC,+DAAK;AACtF;AACA;AACA,4DAA4D,8DAAc;AAC1E,gBAAgB,8DAAc,YAAY,+DAAK;AAC/C,gBAAgB,8DAAc,YAAY,+DAAK,kCAAkC,+DAAK;AACtF;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B,yBAAyB,sCAAE;AAC3B;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA,oBAAoB,sCAAE;AACtB;AACA;AACA;AACA;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C,gBAAgB,sCAAE;AAClB;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,oDAAU;AAC/B;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wDAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B,kBAAkB,kDAAQ;AAC1B;AACA,KAAK;;AAEL;AACA,yBAAyB,0CAAI;AAC7B,6BAA6B,QAAQ;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,0CAAI;AACZ,QAAQ,0CAAI;AACZ,QAAQ,0CAAI;AACZ,wBAAwB,wDAAW;AACnC,oBAAoB,kDAAQ,qBAAqB,kDAAQ;AACzD,iBAAiB,kDAAY;;AAE7B;AACA;AACA;AACA,0CAA0C,sCAAE;AAC5C,0CAA0C,sCAAE;AAC5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oEAAgB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,8CAA8C,8DAAc;AAC5D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,8CAA8C,8DAAc;AAC5D,8CAA8C,8DAAc;AAC5D,8CAA8C,8DAAc;AAC5D,4CAA4C,8DAAc;AAC1D,8CAA8C,8DAAc;AAC5D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,8CAA8C,8DAAc;AAC5D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D,4CAA4C,8DAAc;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D;AACA;AACA,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D,kDAAkD,kDAAQ;AAC1D;AACA,UAAU;AACV,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD,qCAAqC,yDAAe;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,kDAAQ;AACtD,8CAA8C,kDAAQ;AACtD,8CAA8C,kDAAQ;AACtD,8CAA8C,kDAAQ;AACtD,8CAA8C,kDAAQ;AACtD,8CAA8C,kDAAQ;AACtD,8CAA8C,kDAAQ;AACtD,8CAA8C,kDAAQ;AACtD;AACA,KAAK;AACL;AACA,iBAAiB,kDAAQ;AACzB,mBAAmB,kDAAQ,MAAM,kDAAQ,+DAA+D,kDAAQ;AAChH;AACA,eAAe,yDAAe;AAC9B,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,QAAQ,0CAAI;AACZ;AACA;AACA;AACA;AACA,gBAAgB,8DAAc;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,OAAO;AACnC;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,OAAO;AACvC;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA;AACA;AACA,0DAA0D,+DAAc;AACxE;AACA;AACA;AACA;AACA,qCAAqC,8DAAc;AACnD,gBAAgB,8DAAc,YAAY,+DAAK;AAC/C;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,8DAAc,YAAY,+DAAK,yBAAyB,+DAAK;AAC7E,gCAAgC,OAAO;AACvC;AACA;AACA;AACA;AACA;AACA,qCAAqC,sCAAE;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,0BAA0B,yDAAe;AACzC,qBAAqB,wDAAW;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,0CAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,UAAU;AACpC;AACA,8BAA8B,UAAU;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,UAAU;AACpC,8BAA8B,UAAU;AACxC;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,sCAAsC,0CAAI;;;;;;;;;;;;;;;;;;;;AC1lBtD;AACA;;AAEA;;AAE6B;AACyB;AACD;AACR;AACC;;;AAG9C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,iDAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf;AACA,UAAU,SAAS,8DAAgB;AACnC,mBAAmB,uDAAU;AAC7B;AACA,eAAe,sCAAE,QAAQ,uDAAU,6DAA6D,EAAE;AAClG,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE,gCAAgC,8DAAgB;AAC9D,mBAAmB,sCAAE,QAAQ,uDAAU,oDAAoD,EAAE;AAC7F,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,6BAA6B,sDAAU;;;;;;;;;;;;;;;;;;;;;ACtJnD;AACA;;AAEA;;AAE8B;AACkB;AACV;AAC0B;AACvB;;;AAGzC;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iDAAO;AAC/B;AACA,kCAAkC,sCAAE;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,sCAAE;AACV;AACA,KAAK;;AAEL;AACA,4BAA4B,wEAAa;AACzC;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sCAAE,YAAY,KAAK;AAC1C,eAAe,sCAAE;AACjB;AACA;AACA;AACA,qBAAqB,sCAAE;;AAEvB;AACA;AACA;AACA;AACA;AACA,wCAAwC,2BAA2B;AACnE;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sCAAE;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,sBAAsB,8CAAI;AAC1B,wBAAwB,8CAAI;AAC5B;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvOZ;AACA;;AAEA;;AAE8B;AACuC;AAC4B;AAC/B;AACjB;AACE;AACb;AACM;AACI;AACkB;AACzB;AACF;AACO;;;AAG9C;;AAEO;AACP;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kDAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,4CAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,6CAAM;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sCAAE;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL,yBAAyB;;AAEzB,0BAA0B;;AAE1B,yBAAyB;;AAEzB,6BAA6B;;AAE7B;AACA;AACA;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA,+BAA+B,kDAAQ,aAAa,kDAAQ;AAC5D,uCAAuC,kDAAQ;AAC/C,uCAAuC,kDAAQ,aAAa,kDAAQ;AACpE;AACA,gBAAgB,kDAAQ;AACxB;AACA,KAAK;;AAEL;AACA,YAAY,qDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;;AAEnC;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,iCAAiC,iEAAuB;AACxD;AACA;AACA;AACA;AACA,iCAAiC,iEAAuB;AACxD;AACA;AACA;AACA;AACA,iCAAiC,iEAAuB;AACxD;AACA;AACA;AACA;AACA,iCAAiC,iEAAuB;AACxD;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,mCAAmC;;AAEnC;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,kDAAQ;AACvB,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,kBAAkB,sCAAE;AACpB,oBAAoB,sCAAE;AACtB,mBAAmB,sCAAE;AACrB,oBAAoB,sCAAE;AACtB,eAAe,4CAAK;AACpB,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,uBAAuB,4CAAK,wBAAwB,sCAAE;AACtD;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,kDAAQ;AAChC,kBAAkB,kDAAQ,qDAAqD,kDAAQ;AACvF;AACA,mBAAmB,gDAAS;AAC5B;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,iDAAK;AACtE;AACA,kDAAkD,iDAAK;AACvD;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,wCAAwC;;AAExC,oDAAoD;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,4CAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA,iCAAiC,4CAAK;AACtC;AACA;AACA;AACA;AACA,+CAA+C,iDAAK;AACpD;AACA;AACA;AACA;AACA,KAAK;;AAEL,0CAA0C;;AAE1C;AACA;AACA;AACA;;AAEA,4DAAY;;AAEZ;;AAEO;AACP;AACA,yBAAyB,2DAAQ;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,gBAAgB,qDAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,qDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,8CAAI;AACzB;AACA;AACA;;AAEA,4DAAY;;AAEZ;;AAEO;AACP,yBAAyB,2DAAQ;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,qDAAK;AACjB;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,+BAA+B,MAAM;AACrC,2BAA2B,sCAAE,UAAU,aAAa,GAAG,0EAAmB;AAC1E,uBAAuB,sCAAE,uBAAuB,MAAM;AACtD;AACA,+BAA+B,MAAM;AACrC,2BAA2B,sCAAE,UAAU,WAAW,GAAG,0EAAmB;AACxE,uBAAuB,sCAAE,uBAAuB,MAAM;AACtD;AACA,mBAAmB,sCAAE,uBAAuB,MAAM,GAAG,kDAAO,gBAAgB,mEAAmB;AAC/F,mBAAmB,sCAAE,uBAAuB,KAAK,GAAG,wDAAW,WAAW,mEAAmB;AAC7F,mBAAmB,sCAAE,uBAAuB,KAAK,GAAG,wDAAW,WAAW,mEAAmB;AAC7F,mBAAmB,sCAAE,uBAAuB,IAAI,GAAG,wDAAW,WAAW,mEAAmB;AAC5F,mBAAmB,sCAAE,uBAAuB,KAAK,GAAG,wDAAW,WAAW,mEAAmB;AAC7F,mBAAmB,sCAAE,uBAAuB,KAAK,GAAG,wDAAW,WAAW,mEAAmB;AAC7F;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,wBAAwB,8CAAI;AAC5B,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,+BAA+B,MAAM;AACrC,2BAA2B,sCAAE,UAAU,aAAa,GAAG,0EAAmB;AAC1E,uBAAuB,sCAAE,uBAAuB,MAAM;AACtD;AACA,+BAA+B,MAAM;AACrC,2BAA2B,sCAAE,UAAU,WAAW,GAAG,0EAAmB;AACxE,uBAAuB,sCAAE,uBAAuB,MAAM;AACtD;AACA,mBAAmB,sCAAE,uBAAuB,MAAM,GAAG,kDAAO,gBAAgB,mEAAmB;AAC/F,mBAAmB,sCAAE,uBAAuB,KAAK,GAAG,wDAAW,WAAW,mEAAmB;AAC7F,mBAAmB,sCAAE,uBAAuB,KAAK,GAAG,wDAAW,WAAW,mEAAmB;AAC7F,mBAAmB,sCAAE,uBAAuB,IAAI,GAAG,wDAAW,WAAW,mEAAmB;AAC5F,mBAAmB,sCAAE,uBAAuB,KAAK,GAAG,wDAAW,WAAW,mEAAmB;AAC7F,mBAAmB,sCAAE,uBAAuB,KAAK,GAAG,wDAAW,WAAW,mEAAmB;AAC7F;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA,oCAAoC,sCAAE;AACtC,mCAAmC,sCAAE;AACrC;AACA;AACA;AACA;AACA;AACA,iCAAiC,yDAAO;AACxC;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,mBAAmB,8CAAI;AACvB,0BAA0B,wDAAU,UAAU,8CAAI;AAClD,KAAK;;AAEL;AACA,YAAY,qDAAK;AACjB;AACA;AACA;AACA;;AAEA,4DAAY;;AAEZ;;AAEO;AACP;AACA,yBAAyB,2DAAQ;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,qDAAK;AACjB;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,uBAAuB,sCAAE;AACzB;AACA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA,iCAAiC,iEAAuB;AACxD;AACA;AACA;AACA;AACA,qCAAqC,iEAAuB;AAC5D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,uBAAuB,sCAAE;AACzB,2BAA2B,sCAAE;AAC7B;AACA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA,iCAAiC,iEAAuB;AACxD;AACA;AACA;AACA;AACA,qCAAqC,iEAAuB;AAC5D;AACA;AACA;AACA;AACA;AACA,iCAAiC,iEAAuB;AACxD;AACA;AACA;AACA;AACA,qCAAqC,iEAAuB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA,uCAAuC,iEAAuB;AAC9D;AACA;AACA;AACA;AACA,2CAA2C,iEAAuB;AAClE;AACA;AACA;AACA;AACA;AACA,iCAAiC,iEAAuB;AACxD;AACA;AACA;AACA;AACA,qCAAqC,iEAAuB;AAC5D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA,kCAAkC,iEAAuB;AACzD;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA,kCAAkC,iEAAuB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,6BAA6B,iEAAuB;AACpD;AACA;AACA;AACA;AACA,6BAA6B,iEAAuB;AACpD;AACA;AACA;AACA;AACA,6BAA6B,iEAAuB;AACpD;AACA;AACA;AACA;AACA,6BAA6B,iEAAuB;AACpD;AACA;AACA;AACA;AACA,6BAA6B,iEAAuB;AACpD;AACA;AACA;AACA;AACA,6BAA6B,iEAAuB;AACpD;AACA;AACA;AACA;AACA,6BAA6B,iEAAuB;AACpD;AACA;AACA;AACA;AACA,6BAA6B,iEAAuB;AACpD;AACA;AACA;AACA;AACA,6BAA6B,iEAAuB;AACpD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,uBAAuB,sCAAE;AACzB;AACA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA,iCAAiC,iEAAuB;AACxD;AACA;AACA;AACA;AACA,qCAAqC,iEAAuB;AAC5D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,uBAAuB,sCAAE;AACzB;AACA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA,iCAAiC,iEAAuB;AACxD;AACA;AACA;AACA;AACA,qCAAqC,iEAAuB;AAC5D;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qDAAqD,iDAAK;AAC1D;AACA,KAAK;;AAEL;AACA,oBAAoB,8CAAI;AACxB,4BAA4B,iDAAK;AACjC;AACA;;AAEA,4DAAY;;AAEZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,uBAAuB;AACvB,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,qDAAqD,iDAAK;AAC1D;AACA,KAAK;;AAEL;AACA,oBAAoB,8CAAI;AACxB;AACA;AACA;AACA;AACA;AACA,2BAA2B,sCAAE;AAC7B;AACA;AACA,gCAAgC,iDAAK;AACrC;AACA;AACA;;AAEA,4DAAY;;AAEZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA,yCAAyC,sCAAE;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,2BAA2B,sCAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,gDAAgD,iDAAK;AACrD;AACA;AACA;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA,KAAK;;AAEL;AACA,uBAAuB,8CAAI;AAC3B;AACA;AACA,2BAA2B,iDAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,sCAAE;AAC9B,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,2CAA2C,sCAAE;AAC7C;AACA;AACA,oDAAoD,sCAAE;AACtD;AACA;AACA;AACA;AACA;AACA,oEAAoE,sCAAE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,sCAAE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;ACjwDZ;AACA;;AAEA;;AAE8B;AACgC;AACe;AAC1B;AACF;AACZ;AACE;;;AAGvC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,2DAAQ;AAC/B;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,wCAAwC,yDAAO;AAC/C;AACA;AACA,uCAAuC,yDAAO;AAC9C;AACA;AACA,iCAAiC,yDAAO;AACxC;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,2CAA2C,iEAAuB;AAClE;AACA;AACA;AACA,6CAA6C,6CAAM;AACnD,2CAA2C,iEAAuB;AAClE;AACA;AACA;AACA,6CAA6C,6CAAM;AACnD,2CAA2C,iEAAuB;AAClE;AACA;AACA;AACA,6CAA6C,6CAAM;AACnD,2CAA2C,iEAAuB;AAClE;AACA;AACA;AACA,6CAA6C,6CAAM;AACnD,2CAA2C,iEAAuB;AAClE;AACA;AACA;AACA,6CAA6C,6CAAM;AACnD,2CAA2C,iEAAuB;AAClE;AACA;AACA;AACA,6CAA6C,6CAAM;AACnD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,kDAAQ;AAChC,kBAAkB,kDAAQ,qEAAqE,kDAAQ;AACvG;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,kDAAQ;AAChC,kBAAkB,kDAAQ,oEAAoE,kDAAQ;AACtG;AACA;AACA,KAAK;;AAEL;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,gBAAgB,sCAAE;AAClB,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,+CAAS;AAC9B,qBAAqB,+CAAS;AAC9B,qBAAqB,+CAAS;AAC9B,qBAAqB,+CAAS;AAC9B,qBAAqB,+CAAS;AAC9B,qBAAqB,+CAAS;AAC9B,qBAAqB,+CAAS;AAC9B,qBAAqB,+CAAS;AAC9B,qBAAqB,+CAAS;AAC9B;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;ACxPZ;AACA;;AAEA;;AAEqE;AACvC;AACQ;AACF;;;;AAIpC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,8CAAI;AAC7B;AACA,yBAAyB,sCAAE;AAC3B,2BAA2B,sCAAE;AAC7B,8BAA8B,sCAAE;AAChC;AACA;AACA,oCAAoC,4CAAK;AACzC,oCAAoC,4CAAK;AACzC;AACA,oCAAoC,iDAAK;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,iDAAK;AAC5D;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvFZ;AACA;;AAEA;;AAE8B;AACuC;AAMzC;AAC+B;AACrB;AACW;AACf;AAC8B;AACF;AACb;AACa;AACd;AACN;AACI;AACH;AACiB;AACQ;;;AAGpE;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,0CAAI;AACnB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,0DAAW,cAAc,sCAAE;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,0DAAW;AAC/B;AACA;;AAEA,4EAA0B;;AAE1B;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,sCAAE;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mEAAqB;AACjC;AACA,KAAK;;AAEL;AACA,mBAAmB,8CAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,iDAAK;AAC3B,qBAAqB,iDAAK;AAC1B;AACA,wBAAwB,8CAAI;AAC5B,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA,iCAAiC,oDAAQ;AACzC;AACA;AACA,qBAAqB,8CAAI;AACzB;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,uCAAuC,uEAAc;AACrD;AACA,yBAAyB,sCAAE,WAAW,wEAAsB;AAC5D,sCAAsC,+DAAQ;AAC9C;AACA;AACA,wBAAwB,wEAAsB;AAC9C;AACA;AACA;AACA,YAAY,mEAAY;AACxB,YAAY,mEAAY;AACxB;AACA,qBAAqB,8CAAI;AACzB;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,mCAAmC,oDAAK;AACxC;AACA,4BAA4B,sCAAE,mBAAmB,qEAAa;AAC9D;AACA;AACA,8DAA8D,wDAAc;AAC5E,gCAAgC,8DAAgB;AAChD;AACA;AACA;AACA,uCAAuC,sCAAE,UAAU,EAAE;AACrD,4BAA4B,sCAAE,WAAW,mEAAY;AACrD,4BAA4B,mEAAY;AACxC;AACA;AACA;AACA;AACA,4BAA4B,mEAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mEAAY;AACxB;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,qBAAqB,0DAAW;AAChC;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,gBAAgB,sCAAE,WAAW,mEAAY;AACzC,gBAAgB,mEAAY;AAC5B;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,wEAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,iDAAK;AAC1D,0DAA0D,iDAAK;AAC/D;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,gBAAgB,sCAAE,WAAW,mEAAY;AACzC,4BAA4B,mEAAY;AACxC;AACA,+BAA+B,mEAAmB;AAClD;AACA,wCAAwC,qEAAa;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mEAAY;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE,WAAW,sCAAE,MAAM,wEAAsB;AAChE;AACA;AACA,qBAAqB,wEAAsB;AAC3C;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,yBAAyB,sCAAE,WAAW,sCAAE;AACxC;AACA;AACA;AACA,wBAAwB,sCAAE,WAAW,mEAAY;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,4BAA4B;AACpD;AACA;AACA;AACA;AACA,sVAAsV,sDAAY;AAClW;AACA,uCAAuC,yDAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sCAAE;AACjB,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;AACA;AACA,iRAAiR,sDAAY;AAC7R,uCAAuC,yDAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iRAAiR,sDAAY;AAC7R,uCAAuC,yDAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,wDAAU;AAC7B,KAAK;;AAEL;AACA;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA,0BAA0B,yDAAO;AACjC;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA,YAAY,sCAAE;AACd;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACp3BZ;AACA;;AAEA;AACA;AACA,oCAAoC;AACpC;;AAE8B;AACkB;AACkC;AACvB;AACjB;AACJ;AACD;AAC2B;AAC6C;AACpC;AACrC;AAC8B;AACzB;AACiB;AACnB;AACmB;AACI;AAChB;AAC4D;;;AAG1G;;AAEO;AACP,0BAA0B,yDAAW;AACrC,0BAA0B,yDAAW;AACrC;AACA,4BAA4B,0DAAY;AACxC,4BAA4B,wDAAU;AACtC,4BAA4B,8EAAgB;AAC5C;AACA;AACA;AACA,wBAAwB,6CAAM;AAC9B;;AAEA;AACA,iCAAiC;;AAEjC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,iDAAO;AACf;AACA,YAAY,8DAAgB;AAC5B;AACA;AACA;AACA;AACA,YAAY,4EAA0B;AACtC;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,yDAAW;AACnB;AACA;AACA;AACA;AACA,KAAK;;AAEL,oCAAoC;;AAEpC;AACA;AACA;AACA,KAAK;;AAEL,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,mDAAmD;;AAEnD,gDAAgD;;AAEhD;AACA;AACA,KAAK;;AAEL,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,sCAAE;AACnD;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,2EAAmB;AAC/B,YAAY,2EAAmB;AAC/B,YAAY,8DAAgB;AAC5B;AACA;AACA,YAAY,4EAA0B;AACtC;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,8EAAgB;AACpD,gCAAgC,+EAAiB,QAAQ,8CAAQ;AACjE,0BAA0B,+EAAiB,QAAQ,8CAAQ;AAC3D,2BAA2B,+EAAiB,QAAQ,8CAAQ;AAC5D,4BAA4B,+EAAiB,QAAQ,8CAAQ;AAC7D,6BAA6B,+EAAiB,QAAQ,8CAAQ;AAC9D,4BAA4B,sCAAE;AAC9B,6BAA6B,sCAAE;AAC/B,8BAA8B,sCAAE;AAChC,+BAA+B,sCAAE;AACjC,kCAAkC,sCAAE;AACpC,2BAA2B,gFAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,4CAAM;AAC1C,UAAU;AACV;AACA;AACA;AACA;AACA,oCAAoC,8EAAgB;AACpD,gCAAgC,+EAAiB,QAAQ,8CAAQ;AACjE,4BAA4B,+EAAiB,QAAQ,8CAAQ;AAC7D,2BAA2B,gFAAkB;AAC7C,2BAA2B,gFAAkB;AAC7C,8BAA8B,+EAAiB,QAAQ,8CAAQ;AAC/D,8BAA8B,sCAAE;AAChC,kCAAkC,sCAAE;AACpC,gCAAgC,sCAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,4CAAM;AAC1C,UAAU;AACV;AACA;AACA;AACA,oCAAoC,8EAAgB;AACpD,gCAAgC,+EAAiB,QAAQ,8CAAQ;AACjE,0BAA0B,+EAAiB,QAAQ,8CAAQ;AAC3D,2BAA2B,+EAAiB,QAAQ,8CAAQ;AAC5D,4BAA4B,+EAAiB,QAAQ,8CAAQ;AAC7D,6BAA6B,+EAAiB,QAAQ,8CAAQ;AAC9D,2BAA2B,gFAAkB;AAC7C,2BAA2B,gFAAkB;AAC7C,2BAA2B,gFAAkB;AAC7C,2BAA2B,gFAAkB;AAC7C,2BAA2B,gFAAkB;AAC7C,2BAA2B,gFAAkB;AAC7C,8BAA8B,+EAAiB,QAAQ,8CAAQ;AAC/D,kCAAkC,+EAAiB,QAAQ,8CAAQ;AACnE,kCAAkC,+EAAiB,QAAQ,8CAAQ;AACnE,+BAA+B,+EAAiB,QAAQ,8CAAQ;AAChE,2BAA2B,gFAAkB;AAC7C,mCAAmC,+EAAiB,QAAQ,8CAAQ;AACpE,iCAAiC,+EAAiB,QAAQ,8CAAQ;AAClE,oCAAoC,+EAAiB,QAAQ,8CAAQ;AACrE,kCAAkC,+EAAiB,QAAQ,8CAAQ;AACnE,qCAAqC,+EAAiB,QAAQ,8CAAQ;AACtE,8BAA8B,+EAAiB,QAAQ,8CAAQ;AAC/D,+BAA+B,+EAAiB,QAAQ,8CAAQ;AAChE,+BAA+B,+EAAiB,QAAQ,8CAAQ;AAChE;AACA;AACA;AACA;AACA;AACA,wCAAwC,8CAAQ;AAChD;AACA;AACA,wCAAwC,8CAAQ;AAChD;AACA;AACA;AACA;AACA,4BAA4B,sCAAE;AAC9B,yCAAyC,sCAAE,kBAAkB,EAAE;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,+EAAiB,QAAQ,8CAAQ;AAChE,iCAAiC,+EAAiB,QAAQ,8CAAQ;AAClE,iCAAiC,+EAAiB,QAAQ,8CAAQ;AAClE,6BAA6B,+EAAiB,QAAQ,8CAAQ;AAC9D,gCAAgC,+EAAiB,QAAQ,8CAAQ;AACjE,yBAAyB,+EAAiB,QAAQ,8CAAQ;AAC1D,uBAAuB,+EAAiB,QAAQ,8CAAQ;AACxD,yBAAyB,+EAAiB,QAAQ,8CAAQ;AAC1D,0BAA0B,+EAAiB,QAAQ,8CAAQ;AAC3D,8BAA8B,+EAAiB,QAAQ,8CAAQ;AAC/D;AACA;AACA;AACA;AACA;AACA,2BAA2B,sCAAE;AAC7B,yBAAyB,sCAAE;AAC3B,2BAA2B,sCAAE;AAC7B,4BAA4B,sCAAE;AAC9B,gCAAgC,sCAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,sCAAE;AACpC,oCAAoC,sCAAE;AACtC,4BAA4B,sCAAE;AAC9B,6BAA6B,sCAAE;AAC/B,8BAA8B,sCAAE;AAChC,+BAA+B,sCAAE;AACjC,gCAAgC,sCAAE;AAClC,+BAA+B,sCAAE;AACjC,qCAAqC,sCAAE;AACvC,mCAAmC,sCAAE;AACrC,sCAAsC,sCAAE;AACxC,uCAAuC,sCAAE;AACzC,oCAAoC,sCAAE;AACtC,iCAAiC,sCAAE;AACnC,gCAAgC,sCAAE;AAClC,iCAAiC,sCAAE;AACnC,mCAAmC,sCAAE;AACrC,oCAAoC,sCAAE;AACtC,mCAAmC,sCAAE;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,kDAAQ;AAC5C;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,iCAAiC,gDAAU;AAC3C,mDAAmD,sCAAE;AACrD,KAAK;;AAEL;AACA,QAAQ,2CAAI,UAAU,8DAAuB,CAAC,8CAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,oDAAoD;;AAEpD;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,8CAAQ;AACjD;AACA,KAAK;;AAEL;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,8CAAQ;AACjD;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,QAAQ,8DAAgB;AACxB,QAAQ,2EAAmB;AAC3B,QAAQ,2EAAmB;AAC3B;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,YAAY,8DAAgB;AAC5B;AACA,YAAY,2EAAmB;AAC/B,YAAY,2EAAmB;AAC/B;AACA,YAAY,4EAA0B;AACtC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,YAAY,8DAAgB;AAC5B,YAAY,mEAAmB;AAC/B,YAAY,2EAAmB;AAC/B;AACA,YAAY,4EAA0B;AACtC,YAAY,2EAAmB;AAC/B;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,YAAY,2CAAI,UAAU,8DAAkB,CAAC,8CAAQ;AACrD,2BAA2B,6CAAK,iCAAiC,mEAAmB,+BAA+B,8DAAgB,gBAAgB,mEAAmB,6CAA6C,mEAAmB;AACtO;AACA,+EAA+E,8DAAgB;AAC/F,yDAAyD,2EAAmB;AAC5E;AACA,yBAAyB,sCAAE,WAAW,sCAAE;AACxC;AACA;AACA;AACA,oBAAoB,sCAAE,WAAW,mEAAY;AAC7C,sCAAsC,mEAAY;AAClD,qCAAqC,mEAAY;AACjD;AACA;AACA;AACA;AACA,YAAY,sDAAQ;AACpB;AACA;AACA,KAAK;;AAEL;AACA;AACA,YAAY,2CAAI,UAAU,8DAAkB,CAAC,8CAAQ;AACrD,qEAAqE,mEAAmB;AACxF,mEAAmE,mEAAmB;AACtF,wEAAwE,mEAAmB;AAC3F,4EAA4E,8DAAgB;AAC5F,4EAA4E,mEAAmB;AAC/F,mEAAmE,mEAAmB;AACtF,iFAAiF,mEAAmB;AACpG;AACA,sDAAsD,mEAAY;AAClE;AACA;AACA,YAAY,sDAAQ;AACpB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,QAAQ,8DAAgB;AACxB,2BAA2B,sCAAE,UAAU,EAAE;AACzC;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,2CAAI,UAAU,8DAAuB,CAAC,8CAAQ;AACtD,QAAQ,4CAAM,aAAa,6CAAO;AAClC;AACA,uBAAuB,6CAAK,+BAA+B,mEAAmB,+BAA+B,8DAAgB,gBAAgB,mEAAmB,6CAA6C,mEAAmB;AAChO,mCAAmC,mEAAmB;AACtD,wCAAwC,mEAAmB;AAC3D,0BAA0B,oDAAQ;AAClC;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,kDAAkD,mEAAY;AAC9D;AACA;AACA;AACA;AACA,QAAQ,4CAAM,aAAa,6CAAO;AAClC,QAAQ,sDAAQ;AAChB,KAAK;;AAEL;AACA,QAAQ,2CAAI,UAAU,8DAAuB,CAAC,8CAAQ;AACtD,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,YAAY,2CAAI,UAAU,8DAAuB,CAAC,8CAAQ;AAC1D;AACA;AACA,uBAAuB,8CAAI;AAC3B,iCAAiC,sCAAE;AACnC,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,6BAA6B,oDAAQ;AACrC,8BAA8B,0CAAI;AAClC;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,yBAAyB,wEAAa;AACtC;AACA;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,2CAAI,UAAU,8DAAuB,CAAC,8CAAQ;AACtD;AACA,qBAAqB,sCAAE,WAAW,sCAAE;AACpC;AACA;AACA;AACA;AACA;AACA,QAAQ,sCAAE;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,uCAAuC,wDAAU;AACjD;AACA;AACA,gBAAgB,8DAAgB;AAChC;AACA;AACA;AACA;AACA,gBAAgB,8DAAgB;AAChC;AACA;AACA;AACA;AACA,gBAAgB,8DAAgB;AAChC;AACA;AACA,UAAU;AACV;AACA;AACA,uCAAuC,wDAAU;AACjD;AACA;AACA,gBAAgB,8DAAgB;AAChC;AACA;AACA;AACA;AACA,gBAAgB,8DAAgB;AAChC,gBAAgB,mEAAmB;AACnC;AACA;AACA;AACA;AACA,gBAAgB,8DAAgB;AAChC,gBAAgB,8DAAgB;AAChC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,qBAAqB,wDAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,+CAA+C;;AAE/C,+CAA+C;;AAE/C,mDAAmD;;AAEnD,+CAA+C;;AAE/C,+CAA+C;;AAE/C,sDAAsD;;AAEtD;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,4CAA4C;;AAE5C,8CAA8C;;AAE9C,4CAA4C;;AAE5C;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,2CAA2C;;AAE3C;AACA;AACA,UAAU;AACV;AACA,KAAK;;AAEL,gDAAgD;;AAEhD,gDAAgD;;AAEhD,6CAA6C;;AAE7C,+CAA+C;;AAE/C,oDAAoD;;AAEpD,4BAA4B;;AAE5B;AACA,YAAY,2CAAI;AAChB,YAAY,2CAAI;AAChB;AACA;AACA;AACA;AACA,YAAY,yDAAW;AACvB;AACA,KAAK;;AAEL;AACA,YAAY,2CAAI;AAChB,YAAY,2CAAI;AAChB;AACA;AACA;AACA;AACA,YAAY,yDAAW;AACvB;AACA,KAAK;;AAEL;AACA,iDAAiD,sCAAE;AACnD,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,mDAAmD,sCAAE;AACrD;AACA;AACA,oDAAoD,sCAAE;AACtD;AACA;AACA,kDAAkD,sCAAE;AACpD;AACA;AACA,wBAAwB,2CAAI;AAC5B,wBAAwB,sDAAQ;AAChC;AACA;AACA,wBAAwB,kDAAO;AAC/B;AACA;AACA;AACA,wBAAwB,2CAAI;AAC5B,wBAAwB,sDAAQ;AAChC;AACA;AACA,wBAAwB,kDAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,6CAA6C,sCAAE;AAC/C;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACz1BZ;AACA;;AAEA;AACA;AACA,gEAAgE;AAChE;;AAE8B;AACkB;AACN;AACJ;AACD;AACsB;AACkD;AAClD;AACK;AACf;AACU;AACjB;AACD;AAC0D;AACa;AACrE;AACe;AACN;;;AAGpD;;AAEO;AACP,yBAAyB,qDAAS;AAClC,4BAA4B,8EAAgB;AAC5C;AACA;AACA;AACA;AACA,6BAA6B,kDAAQ;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,6CAAM;AAC/B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,mDAAQ;AAChB,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,2BAA2B,oEAAmB;AAC9C,0BAA0B,oEAAmB;AAC7C,yBAAyB,oEAAmB,SAAS,oEAAmB;AACxE;AACA;AACA,eAAe,kDAAQ;AACvB,KAAK;;AAEL;AACA;AACA;AACA,wCAAwC,kDAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,QAAQ;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAQ;AACrC;AACA;AACA;AACA;AACA,kDAAkD,kDAAQ;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,kDAAQ;AACzD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,kDAAQ;AAChD;AACA;AACA,6BAA6B,+CAAQ;AACrC;AACA,gCAAgC,8DAAkB,CAAC,+CAAQ;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,kDAAQ;AACjC;AACA,6BAA6B,+CAAQ;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,+CAAQ;AAC7C;AACA;AACA;AACA,qCAAqC,+CAAQ;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,+CAAQ;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,+CAAQ;AAC7C;AACA;AACA;AACA,qCAAqC,+CAAQ;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,2CAAI;AACpB;AACA,UAAU;AACV;AACA;AACA,oBAAoB,6CAAM,aAAa,8CAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6CAAM,aAAa,8CAAO;AAClD;AACA;AACA,wBAAwB,6CAAM,aAAa,8CAAO;AAClD;AACA;AACA,wBAAwB,6CAAM,aAAa,8CAAO;AAClD;AACA;AACA,wBAAwB,6CAAM,aAAa,8CAAO;AAClD;AACA;AACA,wBAAwB,6CAAM,aAAa,8CAAO;AAClD;AACA;AACA,wBAAwB,6CAAM,aAAa,8CAAO;AAClD;AACA;AACA,wBAAwB,6CAAM,aAAa,8CAAO;AAClD;AACA;AACA,wBAAwB,6CAAM,aAAa,8CAAO;AAClD;AACA;AACA,wBAAwB,6CAAM,aAAa,8CAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,8EAAgB;AAChD,wBAAwB,+EAAiB,QAAQ,+CAAQ;AACzD;AACA,0BAA0B,sCAAE;AAC5B;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,8EAAgB;AAChD,sBAAsB,+EAAiB,QAAQ,+CAAQ;AACvD,uBAAuB,+EAAiB,QAAQ,+CAAQ;AACxD,wBAAwB,+EAAiB,QAAQ,+CAAQ;AACzD,yBAAyB,+EAAiB,QAAQ,+CAAQ;AAC1D,uBAAuB,gFAAkB;AACzC,uBAAuB,gFAAkB;AACzC,uBAAuB,gFAAkB;AACzC,2BAA2B,+EAAiB,QAAQ,+CAAQ;AAC5D,yBAAyB,+EAAiB,QAAQ,+CAAQ;AAC1D,2BAA2B,+EAAiB,QAAQ,+CAAQ;AAC5D,2BAA2B,+EAAiB,QAAQ,+CAAQ;AAC5D,yBAAyB,+EAAiB,QAAQ,+CAAQ;AAC1D,uBAAuB,+EAAiB,QAAQ,+CAAQ;AACxD,kBAAkB,+EAAiB,QAAQ,+CAAQ;AACnD;AACA;AACA;AACA;AACA,oCAAoC,+CAAQ;AAC5C;AACA;AACA,oCAAoC,+CAAQ;AAC5C;AACA;AACA,oCAAoC,+CAAQ;AAC5C;AACA;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B,qCAAqC,sCAAE,eAAe,+CAAQ,sCAAsC,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,+EAAiB,QAAQ,+CAAQ;AAC3D,qBAAqB,+EAAiB,QAAQ,+CAAQ;AACtD,wBAAwB,+EAAiB,QAAQ,+CAAQ;AACzD,iCAAiC,+EAAiB,QAAQ,+CAAQ;AAClE,8BAA8B,+EAAiB,QAAQ,+CAAQ;AAC/D,qBAAqB,+EAAiB,QAAQ,+CAAQ;AACtD,mBAAmB,+EAAiB,QAAQ,+CAAQ;AACpD,qBAAqB,+EAAiB,QAAQ,+CAAQ;AACtD,sBAAsB,+EAAiB,QAAQ,+CAAQ;AACvD,0BAA0B,+EAAiB,QAAQ,+CAAQ;AAC3D,sBAAsB,+EAAiB,QAAQ,+CAAQ;AACvD,oBAAoB,+EAAiB,QAAQ,+CAAQ;AACrD,uBAAuB,+EAAiB,QAAQ,+CAAQ;AACxD,0BAA0B,+EAAiB,QAAQ,+CAAQ;AAC3D,wBAAwB,+EAAiB,QAAQ,+CAAQ;AACzD,yBAAyB,+EAAiB,QAAQ,+CAAQ;AAC1D,2BAA2B,+EAAiB,QAAQ,+CAAQ;AAC5D,4BAA4B,+EAAiB,QAAQ,+CAAQ;AAC7D,0BAA0B,+EAAiB,QAAQ,+CAAQ;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sCAAE;AACzB,qBAAqB,sCAAE;AACvB,uBAAuB,sCAAE;AACzB,wBAAwB,sCAAE;AAC1B,4BAA4B,sCAAE;AAC9B,wBAAwB,sCAAE;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B,yBAAyB,sCAAE;AAC3B,2BAA2B,sCAAE;AAC7B,6BAA6B,sCAAE;AAC/B,2BAA2B,sCAAE;AAC7B,6BAA6B,sCAAE;AAC/B,6BAA6B,sCAAE;AAC/B,2BAA2B,sCAAE;AAC7B,yBAAyB,sCAAE;AAC3B,oBAAoB,sCAAE;AACtB,0BAA0B,sCAAE;AAC5B,0BAA0B,sCAAE;AAC5B,4BAA4B,sCAAE;AAC9B,mCAAmC,sCAAE;AACrC,uBAAuB,sCAAE;AACzB,yBAAyB,sCAAE;AAC3B,4BAA4B,sCAAE;AAC9B,0BAA0B,sCAAE;AAC5B,2BAA2B,sCAAE;AAC7B,6BAA6B,sCAAE;AAC/B,8BAA8B,sCAAE;AAChC,4BAA4B,sCAAE;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sCAAE,2BAA2B,yDAAe;AAClF,wBAAwB,sCAAE,2BAA2B,yDAAe;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,gBAAgB,sCAAE,8BAA8B,qDAAW;AAC3D;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,sCAAE,8BAA8B,qDAAW;AAC3D;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,gCAAgC,iDAAU;AAC1C,kDAAkD,sCAAE;AACpD,KAAK;;AAEL,uDAAuD;;AAEvD;AACA;AACA,YAAY,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACrD;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,4BAA4B,mEAAW,CAAC,+CAAQ,0CAA0C,+CAAQ;AAClG,uBAAuB,6CAAM;AAC7B,gBAAgB,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACzD;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;;AAEA,yBAAyB,mEAAW;AACpC;AACA;AACA,YAAY,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACrD,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,sBAAsB,kDAAW;AACjC;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD,wBAAwB,wDAAiB;AACzC;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,8CAAI;AAC5B,aAAa;AACb,UAAU;AACV;AACA,uBAAuB,8CAAI;AAC3B,aAAa;AACb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,yBAAyB,wEAAa;AACtC;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,2CAAI,UAAU,8DAAuB,CAAC,+CAAQ;AACtD;AACA;AACA;AACA;AACA,yBAAyB,8CAAI;AAC7B,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,+BAA+B,iDAAO;AACtC;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA,mDAAmD,sCAAE,kBAAkB,sCAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sCAAE,8BAA8B,qDAAW;AAC3D;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,uCAAuC,sCAAE;AACzC,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,2CAAI;AAC5B;AACA;AACA;AACA,wBAAwB,kDAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,wBAAwB,2CAAI;AAC5B;AACA;AACA;AACA,wBAAwB,kDAAO;AAC/B;AACA;AACA;AACA;AACA;AACA,mDAAmD,sCAAE;AACrD;AACA;AACA;AACA;AACA,oDAAoD,sCAAE;AACtD;AACA;AACA;AACA;AACA,kDAAkD,sCAAE;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA;AACA;AACA,oCAAoC,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACrE;AACA;AACA;AACA,4BAA4B,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA,4BAA4B,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACrE;AACA;AACA;AACA,4BAA4B,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA,4BAA4B,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sCAAE;AACnC;AACA;AACA;AACA;AACA;AACA,oCAAoC,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD,kBAAkB,uDAAa;AAC/B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,oBAAoB,sDAAY;AAChC;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,mBAAmB,qDAAW;AAC9B;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,YAAY,sCAAE,gBAAgB,sDAAY;AAC1C;AACA;AACA,4BAA4B,sDAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,SAAS,sCAAE,gBAAgB,qDAAW;AAChD;AACA;AACA,2BAA2B,qDAAW;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,SAAS,sCAAE,gBAAgB,uDAAa;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,SAAS,sCAAE,gBAAgB,yDAAe;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,QAAQ,2CAAI,UAAU,8DAAkB,CAAC,+CAAQ;AACjD,oBAAoB,sDAAY;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY,+CAA+C,yDAAa;;;AAGxE;;AAEO;;AAEP;;AAEA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;;AAEA;;AAEA;AACA,QAAQ,2CAAI;AACZ,QAAQ,2CAAI;AACZ;AACA;;AAEA;AACA,QAAQ,2CAAI;AACZ,QAAQ,2CAAI;AACZ;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,sCAAsC;AAC9D;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,0CAA0C;;AAE1C;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3hDZ;AACA;;AAEA;;AAE8B;AACkB;AACN;AACJ;AACS;AACY;AACV;AACwD;AAC/D;AACwB;AACR;AACf;;;AAG3C;;AAEO;AACP,yBAAyB,uDAAU;AACnC;AACA;AACA;AACA,0BAA0B,sCAAE;AAC5B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,sCAAE;AAC/B;;AAEA;AACA,6BAA6B,sCAAE;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sCAAE;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA,mCAAmC,sCAAE,mBAAmB,qDAAW;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,4EAA0B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,mEAAsB;AACxE;AACA,gBAAgB,kDAAQ;AACxB,gBAAgB,0EAAmB;AACnC,gBAAgB,0EAAmB;AACnC,gBAAgB,mEAAqB;AACrC;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA,0EAA0E,mEAAqB;AAC/F,gDAAgD,mEAAgB;AAChE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA,0EAA0E,mEAAqB;AAC/F,gDAAgD,mEAAgB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,8DAAgB;AAChC,gBAAgB,8DAAgB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8DAAgB;AAC5B,mCAAmC,sCAAE;AACrC;AACA,YAAY,kDAAQ;AACpB,YAAY,0EAAmB;AAC/B,YAAY,0EAAmB;AAC/B,UAAU;AACV;AACA;AACA,gBAAgB,kDAAQ;AACxB;AACA;AACA;AACA;AACA,gBAAgB,8DAAgB;AAChC;AACA,qDAAqD,sCAAE;AACvD;AACA,gBAAgB,8DAAgB;AAChC,gBAAgB,mEAAqB;AACrC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ,8DAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8DAAgB;AAC5B;AACA,+BAA+B,sCAAE;AACjC;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAgB;AACxB,QAAQ,mEAAqB;AAC7B,KAAK;;AAEL;AACA;AACA,+BAA+B,sCAAE;AACjC;AACA;AACA;AACA;AACA,2BAA2B,sCAAE;AAC7B;AACA;AACA;AACA;AACA;AACA,gBAAgB,8DAAgB;AAChC;AACA;AACA;AACA;AACA,oBAAoB,8DAAgB;AACpC;AACA;AACA;AACA;AACA;AACA,wBAAwB,8DAAgB;AACxC;AACA;AACA;AACA;AACA,wBAAwB,8DAAgB;AACxC;AACA;AACA;AACA,oBAAoB,8DAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,8DAAgB;AACpC;AACA;AACA;AACA;AACA,oBAAoB,8DAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8DAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,+BAA+B,sCAAE;AACjC;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,oCAAoC,kDAAQ;AAC5C;AACA;AACA;AACA,iFAAiF,QAAQ;AACzF;AACA,qBAAqB,sCAAE;AACvB;AACA,oBAAoB,8CAAI;AACxB;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,wCAAwC,kDAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,QAAQ;AACzF,0FAA0F,sCAAE,+EAA+E,sCAAE;AAC7K;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,gBAAgB,8DAAgB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,QAAQ,8DAAgB;AACxB,QAAQ,0EAAmB;AAC3B,QAAQ,0EAAmB;AAC3B;AACA,KAAK;;AAEL;AACA;AACA;AACA,YAAY,8DAAgB;AAC5B,YAAY,mEAAqB;AACjC,UAAU;AACV;AACA,YAAY,mEAAqB;AACjC;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,2BAA2B,8DAAgB;AAC3C,0BAA0B,8DAAgB;AAC1C;AACA;AACA;AACA,eAAe,kDAAQ;AACvB;AACA;;AAEA,4DAAY,+CAA+C,yDAAa;;AAExE;;AAEO;AACP;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpoBZ;AACA;;AAEA;;AAE8B;AACuC;AACV;AACK;AAC1B;AACM;AACqB;AACT;AACpB;AACwB;AACM;AAChC;AACK;;;AAGvC;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,2EAAmB;AACzC,oBAAoB,2EAAmB;AACvC,8BAA8B,kDAAQ;AACtC,6BAA6B,kDAAQ;AACrC,wBAAwB,kDAAQ;AAChC,wBAAwB,kDAAQ;AAChC,uBAAuB,kDAAQ;AAC/B,uCAAuC,kDAAQ;AAC/C,qCAAqC,kDAAQ;AAC7C,uCAAuC,kDAAQ;AAC/C,yBAAyB,kDAAQ;AACjC,+BAA+B,kDAAQ;AACvC,4BAA4B,kDAAQ;AACpC,qBAAqB,kDAAQ;AAC7B,wBAAwB,kDAAQ;AAChC,gCAAgC,kDAAQ;AACxC,mCAAmC,kDAAQ;AAC3C,4BAA4B,kDAAQ;AACpC,yBAAyB,kDAAQ;AACjC,wBAAwB,kDAAQ;AAChC,sBAAsB,kDAAQ;AAC9B,6BAA6B,kDAAQ;AACrC,yBAAyB,kDAAQ;AACjC,6BAA6B,kDAAQ;AACrC,gCAAgC,kDAAQ;AACxC,8BAA8B,kDAAQ;AACtC,8BAA8B,kDAAQ;AACtC,gCAAgC,kDAAQ;AACxC,gCAAgC,kDAAQ;AACxC,6BAA6B,kDAAQ;AACrC,gCAAgC,kDAAQ;AACxC,mCAAmC,kDAAQ;AAC3C,6BAA6B,kDAAQ;AACrC,iCAAiC,kDAAQ;AACzC,6BAA6B,kDAAQ;AACrC,iCAAiC,kDAAQ;AACzC,qCAAqC,kDAAQ;AAC7C,0BAA0B,kDAAQ;AAClC,8BAA8B,kDAAQ;AACtC,gCAAgC,kDAAQ;AACxC,sCAAsC,kDAAQ;AAC9C,oCAAoC,kDAAQ;AAC5C,2BAA2B,kDAAQ;AACnC,oCAAoC,kDAAQ;AAC5C,+BAA+B,kDAAQ;AACvC,yBAAyB,kDAAQ;AACjC,mCAAmC,kDAAQ;AAC3C;AACA,uCAAuC,kDAAQ;AAC/C,0CAA0C,kDAAQ;AAClD,qCAAqC,kDAAQ;AAC7C,mCAAmC,kDAAQ;AAC3C,4BAA4B,kDAAQ;AACpC,+BAA+B,kDAAQ;AACvC,wBAAwB,kDAAQ;AAChC,yBAAyB,kDAAQ;AACjC,gCAAgC,kDAAQ;AACxC,6BAA6B,kDAAQ;AACrC,yBAAyB,kDAAQ;AACjC,0BAA0B,kDAAQ;AAClC,+BAA+B,kDAAQ;AACvC,+BAA+B,kDAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,6CAAM;AACpC,8BAA8B,6CAAM;AACpC,2BAA2B,6CAAM;AACjC,iCAAiC,6CAAM;AACvC,0BAA0B,6CAAM;AAChC,gCAAgC,6CAAM;AACtC;AACA,eAAe,2CAAI;AACnB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,wEAAa;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,8CAAI;AACpC;AACA,uCAAuC,sCAAE;AACzC;AACA;AACA;AACA;AACA;AACA,8CAA8C,iDAAK;AACnD;AACA;AACA;AACA,0CAA0C,sCAAE;AAC5C;AACA;AACA,sCAAsC,iDAAK;AAC3C;AACA;AACA,uCAAuC,sCAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sCAAE;AACrC;AACA;AACA,6CAA6C,sCAAE;AAC/C;AACA;AACA,2CAA2C,sCAAE;AAC7C;AACA;AACA;AACA;AACA,6CAA6C,sCAAE;AAC/C;AACA;AACA,sCAAsC,sCAAE;AACxC;AACA;AACA,sDAAsD,sCAAE;AACxD;AACA;AACA,oDAAoD,sCAAE;AACtD;AACA;AACA,sDAAsD,sCAAE;AACxD;AACA;AACA,wCAAwC,sCAAE;AAC1C;AACA;AACA,yCAAyC,4CAAK;AAC9C;AACA;AACA,8CAA8C,sCAAE;AAChD;AACA;AACA,2CAA2C,sCAAE;AAC7C;AACA;AACA,oCAAoC,sCAAE;AACtC;AACA;AACA,uCAAuC,sCAAE;AACzC;AACA;AACA,+CAA+C,sCAAE;AACjD;AACA;AACA,kDAAkD,sCAAE;AACpD;AACA;AACA,2CAA2C,sCAAE;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,sCAAE;AAC9C;AACA;AACA,wCAAwC,sCAAE;AAC1C;AACA;AACA,4CAA4C,sCAAE;AAC9C;AACA;AACA,+CAA+C,sCAAE;AACjD;AACA;AACA,6CAA6C,sCAAE;AAC/C;AACA;AACA,6CAA6C,sCAAE;AAC/C;AACA;AACA,+CAA+C,sCAAE;AACjD;AACA;AACA,+CAA+C,sCAAE;AACjD;AACA;AACA;AACA;AACA;AACA,+CAA+C,sCAAE;AACjD;AACA;AACA,kDAAkD,sCAAE;AACpD;AACA;AACA,+CAA+C,4CAAK;AACpD;AACA;AACA,4CAA4C,sCAAE;AAC9C;AACA;AACA,gDAAgD,sCAAE;AAClD;AACA;AACA,6CAA6C,4CAAK;AAClD;AACA;AACA,4CAA4C,sCAAE;AAC9C;AACA;AACA,gDAAgD,sCAAE;AAClD;AACA;AACA,6CAA6C,4CAAK;AAClD;AACA;AACA,oDAAoD,sCAAE;AACtD;AACA;AACA,yCAAyC,sCAAE;AAC3C;AACA;AACA,6CAA6C,sCAAE;AAC/C;AACA;AACA,0CAA0C,4CAAK;AAC/C;AACA;AACA,+CAA+C,sCAAE;AACjD;AACA;AACA,gDAAgD,4CAAK;AACrD;AACA;AACA,qDAAqD,sCAAE;AACvD;AACA;AACA,mDAAmD,sCAAE;AACrD;AACA;AACA,0CAA0C,sCAAE;AAC5C;AACA;AACA,mDAAmD,sCAAE;AACrD;AACA;AACA,8CAA8C,sCAAE;AAChD;AACA;AACA,wCAAwC,sCAAE;AAC1C;AACA;AACA,kDAAkD,sCAAE;AACpD;AACA;AACA,2CAA2C,sCAAE;AAC7C,UAAU;AACV;AACA;AACA;AACA,8CAA8C,sCAAE;AAChD,UAAU;AACV;AACA;AACA;AACA,uCAAuC,sCAAE;AACzC,UAAU;AACV;AACA;AACA;AACA,wCAAwC,sCAAE;AAC1C,UAAU;AACV;AACA;AACA;AACA,+CAA+C,sCAAE;AACjD;AACA;AACA,4CAA4C,sCAAE;AAC9C;AACA;AACA,wCAAwC,sCAAE;AAC1C;AACA;AACA,yCAAyC,sCAAE;AAC3C;AACA;AACA,yDAAyD,yEAAmB;AAC5E,UAAU;AACV,yDAAyD,yEAAmB;AAC5E;AACA;AACA,sDAAsD,yEAAmB;AACzE,UAAU;AACV,0DAA0D,yEAAmB;AAC7E;AACA;AACA,oDAAoD,yEAAmB;AACvE,UAAU;AACV,wDAAwD,yEAAmB;AAC3E;AACA;AACA,kDAAkD,yEAAmB;AACrE,UAAU;AACV,sDAAsD,yEAAmB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,8CAAI;AACxB,8BAA8B,4CAAK;AACnC,wBAAwB,8CAAI;AAC5B;AACA,qCAAqC,4CAAK;AAC1C;AACA,uBAAuB,8CAAI;AAC3B,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA,uCAAuC,iDAAO;AAC9C;AACA;AACA,wBAAwB,8CAAI;AAC5B;AACA,sCAAsC,iDAAO,uBAAuB,8CAAI;AACxE;AACA,wBAAwB,8CAAI;AAC5B;AACA,sCAAsC,iDAAO,uBAAuB,8CAAI;AACxE;AACA,wBAAwB,8CAAI;AAC5B;AACA;AACA;AACA,wDAAwD,sCAAE,UAAU,EAAE;AACtE;AACA,SAAS;AACT;AACA;AACA;AACA,QAAQ,mEAAqB;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA,yBAAyB,wEAAa;AACtC;AACA;AACA;AACA;AACA;AACA,uBAAuB,8CAAI;AAC3B;AACA,sBAAsB,2CAAI;AAC1B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,0BAA0B,2EAAmB;AAC7C,kCAAkC,kDAAQ;AAC1C,iCAAiC,kDAAQ;AACzC,4BAA4B,kDAAQ;AACpC,4BAA4B,kDAAQ;AACpC,2BAA2B,kDAAQ;AACnC,2CAA2C,kDAAQ;AACnD,yCAAyC,kDAAQ;AACjD,2CAA2C,kDAAQ;AACnD,6BAA6B,kDAAQ;AACrC,mCAAmC,kDAAQ;AAC3C,gCAAgC,kDAAQ;AACxC,yBAAyB,kDAAQ;AACjC,4BAA4B,kDAAQ;AACpC,oCAAoC,kDAAQ;AAC5C,uCAAuC,kDAAQ;AAC/C,gCAAgC,kDAAQ;AACxC,6BAA6B,kDAAQ;AACrC,4BAA4B,kDAAQ;AACpC,0BAA0B,kDAAQ;AAClC,iCAAiC,kDAAQ;AACzC,6BAA6B,kDAAQ;AACrC,iCAAiC,kDAAQ;AACzC,oCAAoC,kDAAQ;AAC5C,kCAAkC,kDAAQ;AAC1C,kCAAkC,kDAAQ;AAC1C,oCAAoC,kDAAQ;AAC5C,oCAAoC,kDAAQ;AAC5C,iCAAiC,kDAAQ;AACzC,oCAAoC,kDAAQ;AAC5C,uCAAuC,kDAAQ;AAC/C,iCAAiC,kDAAQ;AACzC,qCAAqC,kDAAQ;AAC7C,iCAAiC,kDAAQ;AACzC,qCAAqC,kDAAQ;AAC7C,yCAAyC,kDAAQ;AACjD,8BAA8B,kDAAQ;AACtC,kCAAkC,kDAAQ;AAC1C,oCAAoC,kDAAQ;AAC5C,0CAA0C,kDAAQ;AAClD,wCAAwC,kDAAQ;AAChD,+BAA+B,kDAAQ;AACvC,wCAAwC,kDAAQ;AAChD,mCAAmC,kDAAQ;AAC3C,6BAA6B,kDAAQ;AACrC,uCAAuC,kDAAQ;AAC/C,2CAA2C,kDAAQ;AACnD,8CAA8C,kDAAQ;AACtD,yCAAyC,kDAAQ;AACjD,uCAAuC,kDAAQ;AAC/C,gCAAgC,kDAAQ;AACxC,mCAAmC,kDAAQ;AAC3C,4BAA4B,kDAAQ;AACpC,6BAA6B,kDAAQ;AACrC,oCAAoC,kDAAQ;AAC5C,iCAAiC,kDAAQ;AACzC,6BAA6B,kDAAQ;AACrC,8BAA8B,kDAAQ;AACtC,mCAAmC,kDAAQ;AAC3C,mCAAmC,kDAAQ;AAC3C,KAAK;;AAEL;AACA,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,QAAQ,kDAAQ;AAChB,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV,mBAAmB,kDAAQ;AAC3B;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV,mBAAmB,kDAAQ;AAC3B;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV,mBAAmB,kDAAQ;AAC3B;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,QAAQ,sCAAE;AACV;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,UAAU,EAAE;AAC7B,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,8CAAI;AACxD;AACA,0DAA0D,iDAAK;AAC/D;AACA;AACA;AACA;AACA,6DAA6D,iDAAK;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,8CAAI;AAC7D,uDAAuD,8CAAI;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE;AACd;AACA,yBAAyB,sCAAE,WAAW,sCAAE;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,SAAS;AACzC,oDAAoD,sCAAE,oBAAoB,EAAE;AAC5E,oDAAoD,sCAAE,kBAAkB,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,2BAA2B,sCAAE,UAAU,EAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,gBAAgB,sCAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sCAAE,UAAU,IAAI,EAAE;AACjC,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA,0BAA0B,2CAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,SAAS;AACzC,mFAAmF,sCAAE,oBAAoB,EAAE;AAC3G,iFAAiF,sCAAE,kBAAkB,EAAE;AACvG;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,uBAAuB,0DAAgB;AACvC;AACA,mBAAmB,0DAAgB;AACnC,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY,yCAAyC,qDAAS;;;AAG9D;;AAEO;AACP,cAAc,2CAAI;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,mBAAmB,8CAAI;AACvB;AACA;AACA,YAAY,sCAAE;AACd;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,mBAAmB,8CAAI;AACvB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,uEAAuE,qDAAS;;;;;;;;;;;;;;;;;;;;;;AChxD5F;AACA;;AAEA;;AAE8B;AACkB;AACH;AACP;;;AAGtC;;AAEO;;AAEP,sBAAsB,sCAAE;AACxB,sBAAsB,sCAAE;;AAExB;AACA,0BAA0B,sCAAE;AAC5B,0BAA0B,sCAAE;AAC5B;;AAEA;AACA;AACA,0BAA0B,sCAAE;AAC5B;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,8CAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA,yBAAyB;;AAEzB,yBAAyB;;AAEzB;AACA,eAAe,8CAAQ;AACvB;AACA;;AAEA,4DAAY,yCAAyC,qDAAS;;;AAG9D;;AAEO;AACP;AACA;AACA;AACA;AACA,oBAAoB,iCAAiC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,sFAAsF,qDAAS;;;AAG3G;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,yFAAyF,qDAAS;;;;;;;;;;;;;;;;;ACrN9G;AACA;;AAEA;;AAE+C;AACqB;;;AAGpE;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,kDAAQ;AACzB,iBAAiB,kDAAQ;AACzB,iBAAiB,kDAAQ;AACzB,mBAAmB,kDAAQ,MAAM,kDAAQ,uDAAuD,kDAAQ;AACxG,mBAAmB,kDAAQ,MAAM,kDAAQ,uDAAuD,kDAAQ;AACxG,mBAAmB,kDAAQ,MAAM,kDAAQ,uDAAuD,kDAAQ;AACxG;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,yDAAe;AACvC,wBAAwB,yDAAe;AACvC,wBAAwB,yDAAe;AACvC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,iBAAiB,kDAAQ;AACzB,iBAAiB,kDAAQ;AACzB,iBAAiB,kDAAQ;AACzB,mBAAmB,kDAAQ,MAAM,kDAAQ,uDAAuD,kDAAQ;AACxG,mBAAmB,kDAAQ,MAAM,kDAAQ,uDAAuD,kDAAQ;AACxG,mBAAmB,kDAAQ,MAAM,kDAAQ,uDAAuD,kDAAQ;AACxG;AACA;AACA;AACA,wBAAwB,yDAAe;AACvC,wBAAwB,yDAAe;AACvC,wBAAwB,yDAAe;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;ACrEZ;AACA;;AAEA;AACA;;AAE6B;;AAE7B,iBAAiB,sCAAE;AACnB;;;AAGA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,IAAI,sCAAE;AACN;;;AAGA;AACA;AACA;AACO;AACP;AACA;;;AAGA;;AAEO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;;;;;;;;;;;;;;;;ACvEA;AACA;;AAEA;;AAE6B;AACkB;;;AAG/C;;AAEO;;AAEP;AACA;AACA;AACA,iCAAiC;;AAEjC;AACA,yBAAyB,sCAAE;AAC3B;;AAEA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sCAAE;AACtB,mBAAmB,sCAAE,UAAU,GAAG;AAClC,UAAU;AACV,iBAAiB,sCAAE;AACnB,mBAAmB,sCAAE,UAAU,GAAG;AAClC;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB,eAAe,sCAAE,UAAU,GAAG;AAC9B;AACA;AACA,iBAAiB,sCAAE;AACnB,eAAe,sCAAE,UAAU,GAAG;AAC9B;AACA;AACA,iBAAiB,sCAAE;AACnB,eAAe,sCAAE,UAAU,GAAG;AAC9B;AACA;AACA,iBAAiB,sCAAE;AACnB,eAAe,sCAAE,UAAU,GAAG;AAC9B;AACA;AACA,kBAAkB,sCAAE;AACpB,eAAe,sCAAE,UAAU,GAAG;AAC9B;AACA;AACA,kBAAkB,sCAAE;AACpB,eAAe,sCAAE,UAAU,GAAG;AAC9B;AACA;AACA,kBAAkB,sCAAE;AACpB,eAAe,sCAAE,UAAU,GAAG;AAC9B;AACA;;AAEA;AACA,gBAAgB,sCAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB,kBAAkB,sCAAE;AACpB,kBAAkB,sCAAE;AACpB,WAAW,sCAAE,UAAU,EAAE,EAAE,EAAE;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;ACvKZ;AACA;;AAEA;AACA;AACA;AACA;;AAE6D;AAChC;AACwB;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;;AAEA,YAAY,sCAAE;AACd;AACA;AACA,UAAU,SAAS,sCAAE;AACrB;AACA;AACA,UAAU,SAAS,sCAAE;AACrB;AACA;AACA,UAAU,SAAS,sCAAE;AACrB;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,8DAAgB;AAC5B;AACA;;AAEA;AACA,kBAAkB;AAClB;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA,2DAA2D;AAC3D;;AAEA;AACA;;AAEA,aAAa,sCAAE;AACf;AACA;AACA;AACA,gBAAgB,sCAAE,uCAAuC,sCAAE;AAC3D;AACA,cAAc;AACd;AACA;AACA;;AAEA;;AAEA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,EAAE;AAC7D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB;AACA,iDAAiD,EAAE;AACnD;AACA;AACA,sBAAsB,sCAAE,eAAe,sCAAE,iDAAiD,aAAa;AACvG;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,sCAAE;AACtB;AACA,kBAAkB,SAAS,sCAAE;AAC7B;AACA,kBAAkB,SAAS,sCAAE;AAC7B;AACA,kBAAkB,SAAS,sCAAE;AAC7B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8DAAgB;AAC5B;AACA;;AAEA;;AAEA;AACA;;AAEA,YAAY,sCAAE;AACd;AACA,UAAU,SAAS,sCAAE;AACrB;AACA,UAAU,SAAS,sCAAE;AACrB;AACA,UAAU;AACV;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;;AAEA,aAAa,sCAAE;AACf,gBAAgB,sCAAE,uCAAuC,sCAAE;AAC3D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe,sCAAE,UAAU,EAAE,EAAE,EAAE;AACjC,KAAK;;AAEL;AACA,eAAe,sCAAE,UAAU,EAAE,EAAE,EAAE;AACjC,KAAK;;AAEL;AACA,eAAe,sCAAE,UAAU,EAAE,EAAE,EAAE;AACjC;AACA;;AAEA,4DAAY;;AAEZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9WA;AACA;;AAEA;;AAE6B;;AAEgC;AAChC;AACQ;AACF;AACgB;;;AAGnD;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;;AAEA;AACA,kFAAkF,oEAAoE,wBAAwB;AAC9K;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,4CAAO;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA,eAAe,kDAAQ;AACvB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA,wBAAwB,kDAAQ;AAChC,qBAAqB,4CAAK;AAC1B;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA,wBAAwB,kDAAQ;AAChC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEO;;AAEP;AACA,YAAY,kDAAQ;AACpB,YAAY,kDAAQ;AACpB,eAAe,kDAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,kDAAQ;AACnB;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;;;;;;;;;;;;;;AC7nBZ;AACA;;AAEA;;AAEgD;;;AAGhD;;AAEO;AACP;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;ACpIZ;AACA;;AAEA;;AAEgD;AACM;AACC;AACN;;;AAGjD;;AAEO;AACP;AACA;AACA;;AAEA;AACA,aAAa,yDAAO;AACpB,YAAY,yDAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,kBAAkB,8DAAc;AAChC,QAAQ,8DAAc,aAAa,+DAAK;AACxC,QAAQ,8DAAc,eAAe,+DAAK,aAAa,+DAAK,iBAAiB,+DAAK;AAClF,QAAQ,8DAAc,eAAe,+DAAK,aAAa,+DAAK,iBAAiB,+DAAK;AAClF,QAAQ,8DAAc,YAAY,+DAAK,gBAAgB,+DAAK,mCAAmC,+DAAK,OAAO,+DAAK;AAChH,QAAQ,8DAAc,eAAe,+DAAK,aAAa,+DAAK,qBAAqB,+DAAK;AACtF,QAAQ,8DAAc,gBAAgB,+DAAK;AAC3C,QAAQ,8DAAc,aAAa,+DAAK;AACxC;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;AClDZ;AACA;;AAEA;;AAEgD;AACJ;AACe;;;AAG3D;;AAEO;AACP;AACA,iBAAiB,6CAAM;AACvB;;AAEA;AACA,kCAAkC;;AAElC;AACA,QAAQ,mEAAqB;AAC7B,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,4CAAK;AAC1B;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;ACzCZ;AACA;;AAEA;;AAEgD;AAClB;AACY;;;AAG1C;;AAEO;AACP;AACA;;AAEA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA,4CAA4C,sCAAE;AAC9C;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,yCAAyC,sCAAE;AAC3C,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,sCAAE;AAC3C,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,sCAAE;AACnD;AACA,iDAAiD,sCAAE;AACnD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kDAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,sCAAE;AAC3C,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,sCAAE;AAC/C;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;;AAEA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;;AAEA,4DAAY;;;;;;;;;;;;;;;;;ACtJZ;AACA;;AAEA;;AAE8B;AACkB;;;AAGhD;;AAEO;;AAEP;AACA;AACA,gCAAgC,sCAAE;AAClC,KAAK;;AAEL;AACA,gCAAgC,sCAAE;AAClC,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;AC7BZ;AACA;;AAEA;;AAE8B;AACkB;AACN;AAC6B;AACpC;AACsB;;;AAGzD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS,6DAAa;AACtB,oBAAoB,sCAAE,6CAA6C,iEAAW;AAC9E,mBAAmB,oEAAgB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS,6DAAa;AACtB,oBAAoB,sCAAE,6CAA6C,iEAAW;AAC9E,mBAAmB,oEAAgB;AACnC;AACA;AACA;;AAEA;AACA;AACA,SAAS,6DAAa;AACtB,oBAAoB,sCAAE,6CAA6C,iEAAW;AAC9E,mBAAmB,oEAAgB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4CAA4C,sCAAE;AAC9C;AACA,+CAA+C,sCAAE;AACjD,+CAA+C,sCAAE;AACjD,6CAA6C,sCAAE;AAC/C,qDAAqD,sCAAE;AACvD,oDAAoD,sCAAE;AACtD,KAAK;;AAEL;AACA,oBAAoB,oEAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,sCAAE;AACpD,iDAAiD,sCAAE;AACnD;AACA,+CAA+C,sCAAE;AACjD,+CAA+C,sCAAE;AACjD,6CAA6C,sCAAE;AAC/C,2CAA2C,sCAAE;AAC7C;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,2CAAK;AACrB,gBAAgB,2CAAK;AACrB;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,2CAAK;AACrB,gBAAgB,2CAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,aAAa,6DAAa;AAC1B;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,YAAY,sCAAE,qBAAqB,iEAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kDAAQ;AACnC,2BAA2B,kDAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,0BAA0B;AAC1E,+BAA+B,kDAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,0BAA0B;AAC1E,+BAA+B,kDAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,0BAA0B;AAC1E,+BAA+B,kDAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;ACnRZ;AACA;;AAEA;;AAEgD;AAClB;;;AAG9B;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,sCAAE;AACvD,oDAAoD,sCAAE;AACtD;AACA;AACA,2CAA2C,sCAAE;AAC7C,+CAA+C,sCAAE;AACjD;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,wDAAwD,sCAAE;AAC1D;AACA;AACA,8CAA8C,sCAAE;AAChD,kDAAkD,sCAAE;AACpD,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;ACvFZ;AACA;;AAEA;;AAE8D;AAChC;;;AAG9B;;AAEO;AACP;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,4BAA4B,8BAA8B;AAC1D;AACA;AACA;AACA,gBAAgB,sCAAE;AAClB,6BAA6B,sCAAE,WAAW,sCAAE;AAC5C;AACA;AACA,iCAAiC,sCAAE,WAAW,EAAE,GAAG,EAAE;AACrD;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,sDAAsD;;AAEtD;AACA;AACA,KAAK;;AAEL;AACA;AACA,oCAAoC,sCAAE,4CAA4C;AAClF,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA,4BAA4B,8BAA8B;AAC1D;AACA;AACA,yBAAyB,sCAAE,YAAY,EAAE;AACzC,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA,sBAAsB,sCAAE,gCAAgC;AACxD,KAAK;;AAEL;AACA;AACA,wBAAwB,8BAA8B;AACtD;AACA;AACA,qBAAqB,sCAAE,YAAY,EAAE;AACrC,KAAK;;AAEL,2BAA2B;;AAE3B;AACA;AACA,yBAAyB,sCAAE,iCAAiC;AAC5D;AACA,KAAK;;AAEL;AACA,sBAAsB,sCAAE,+BAA+B;AACvD,KAAK;;AAEL;AACA,sBAAsB,sCAAE,mBAAmB,EAAE;AAC7C;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;ACzIZ;AACA;;AAEA;;AAE+C;;;AAG/C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;AC1BZ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAE6B;AACkB;AACV;AACqB;AACb;AACa;AACjB;AACwB;;;AAGjE;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,0EAAmB;AACxC;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,sBAAsB,0EAAmB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAQ,oCAAoC,mEAAmB;AAC3E,mBAAmB,mEAAgB;AACnC;AACA,eAAe,mEAAgB;AAC/B,KAAK;;AAEL;AACA,sBAAsB,0EAAmB;AACzC;AACA;AACA;AACA,8DAA8D,sCAAE;AAChE;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,mFAAmF,sDAAU;;;AAGzG;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,0EAAmB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,8CAAI,yBAAyB,8CAAI;AAC3E;AACA;AACA,mCAAmC,8CAAI,yBAAyB,8CAAI;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,sBAAsB,0EAAmB;AACzC;AACA;AACA;AACA,mBAAmB,mEAAgB;AACnC,UAAU;AACV;AACA,gBAAgB,kDAAQ,oCAAoC,mEAAmB;AAC/E,uBAAuB,mEAAgB;AACvC;AACA;AACA,mBAAmB,mEAAgB;AACnC,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mEAAgB;AACnC;AACA,KAAK;;AAEL;AACA,QAAQ,0EAAmB;AAC3B,eAAe,0EAAmB;AAClC,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4DAAY,wDAAwD,sDAAU;;;;;;;;;;;;;;;;;;;;;ACtO9E;AACA;;AAEA;AACA;;AAE6B;AACkB;AACN;AACa;AACR;AACC;;;AAG/C;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,gCAAgC,uDAAU;AAC1C;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,2BAA2B,+DAAQ;AACnC,6BAA6B,sCAAE;AAC/B;AACA,4BAA4B,wDAAW;AACvC,kCAAkC,kDAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kDAAQ;AAChC;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;ACtGZ;AACA;;AAEA;;AAE6B;AACgC;AACf;;;AAG9C;;AAEO;AACP;AACA;AACA;AACA;;AAEA,4DAAY;AACZ,4DAAY;;;AAGZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,wBAAwB,sCAAE,oCAAoC,EAAE;AAChE;AACA,KAAK;;AAEL;AACA,wBAAwB,sCAAE,sCAAsC,EAAE;AAClE;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,uDAAU;;AAEpD;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;AC5IZ;AACA;;AAEA;;AAE6B;AACkB;AACW;AACL;AACZ;AACN;AACE;AACS;;;AAG9C;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA,4DAAY;;;AAGZ;;AAEO;;AAEP;AACA;AACA;AACA;AACA,qBAAqB,8CAAM;AAC3B;AACA;AACA;AACA;AACA;;AAEA,kEAAgB;;AAEhB;AACA;AACA,iBAAiB,sCAAE;;AAEnB;AACA;AACA,YAAY,sCAAE,gBAAgB,kDAAQ;AACtC;AACA,YAAY,uDAAU;AACtB;AACA,YAAY,sCAAE,gBAAgB,4CAAK;AACnC;AACA;AACA,gBAAgB,uDAAU;AAC1B;AACA;AACA,gBAAgB,uDAAU;AAC1B;AACA;AACA,YAAY,sCAAE,gBAAgB,8CAAM;AACpC;AACA;AACA;;AAEA,SAAS,sCAAE,aAAa,uDAAU;AAClC,mBAAmB,uDAAU;AAC7B,qBAAqB,sCAAE,WAAW,uDAAU;AAC5C;AACA;AACA;AACA,gBAAgB,mEAAmB;AACnC;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrGZ;AACA;;AAEA;AACA;AACA;AACA;;AAE6B;AACkB;;AAOlB;;AAQF;;AAEmB;AACH;AACG;AACZ;;AAQX;;AAEqC;AACV;;AAEL;AACiC;AACzB;AACN;AACZ;AAC8C;AAC/B;AACN;AACL;AACE;AACwB;AACX;AACrB;AACW;AACa;AACjB;AACgC;;AAEpB;;AAEK;;AAED;AACL;;AAEP;AACY;;;AAGxD;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B,kDAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,uDAAU;AAC3B;AACA;AACA,uBAAuB,4DAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,mEAAmB;AAC3B,yCAAyC,kEAAe;AACxD,8CAA8C,mDAAQ;AACtD,QAAQ,2EAAyB;AACjC;AACA;;AAEA;AACA,YAAY,qEAAiB;AAC7B,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAY,mEAAmB;AAC/B,UAAU;AACV,YAAY,sEAAkB;AAC9B,YAAY,mEAAmB;AAC/B,YAAY,6DAAS;AACrB;;AAEA,QAAQ,8DAAgB;AACxB,QAAQ,mEAAmB;AAC3B,QAAQ,mEAAmB;AAC3B,QAAQ,8DAAgB;;AAExB,QAAQ,+DAAc;AACtB,QAAQ,mEAAY;;AAEpB;AACA,YAAY,mEAAmB;AAC/B,gBAAgB,mDAAQ;AACxB;AACA,oBAAoB,uDAAU,+CAA+C,EAAE,EAAE,EAAE,EAAE,EAAE;AACvF,oBAAoB,uDAAY;AAChC,oBAAoB,mDAAQ;AAC5B,oBAAoB,yDAAc;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uDAAU;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,YAAY,mEAAmB;AAC/B,gBAAgB,mDAAQ;AACxB;AACA;AACA,oBAAoB,uDAAY;AAChC,oBAAoB,mDAAQ;AAC5B,oBAAoB,yDAAc;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,YAAY,mEAAmB;AAC/B,gBAAgB,mDAAQ;AACxB;AACA,oBAAoB,uDAAU,6CAA6C,EAAE,EAAE,EAAE,EAAE,EAAE;AACrF,oBAAoB,uDAAY;AAChC,oBAAoB,mDAAQ;AAC5B,oBAAoB,yDAAc;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uDAAU;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,mEAAmB;AACvB,IAAI,mEAAmB;AACvB;AACA,QAAQ,8DAAgB;AACxB;AACA,WAAW,mEAAqB;AAChC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,mDAAQ;AAChB;AACA;AACA,QAAQ,mDAAQ;AAChB;AACA;AACA,QAAQ,mDAAQ;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ,uDAAU;AAClB,KAAK;;AAEL;AACA,QAAQ,sCAAE;AACV,QAAQ,uDAAU;AAClB,KAAK;;AAEL;AACA;AACA,QAAQ,uDAAU;AAClB,KAAK;;AAEL;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA,oBAAoB,mEAAqB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA,2CAA2C,kDAAQ;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,oIAAoI,uDAAY;AAChJ;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,oIAAoI,uDAAY;AAChJ;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL,wCAAwC;;AAExC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,mDAAQ;AAC7B;AACA,4BAA4B,4CAAK,sBAAsB,kDAAO,aAAa,sCAAE,yCAAyC,6CAAM;AAC5H;AACA,4BAA4B,4CAAK,sBAAsB,kDAAO,aAAa,sCAAE,yCAAyC,6CAAM;AAC5H;AACA;AACA,4BAA4B,4CAAK,gBAAgB,kDAAO,OAAO,sCAAE,yCAAyC,6CAAM;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,OAAO;AAC3C,kDAAkD,iEAAuB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,QAAQ,sCAAE;AACV;AACA;AACA,mCAAmC,mEAAe;AAClD,QAAQ,2EAAmB;AAC3B,QAAQ,2EAAmB;AAC3B,QAAQ,2EAAmB;AAC3B,QAAQ,2EAAmB;AAC3B,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,2CAAI,oBAAoB,2CAAI;AACpC,QAAQ,gEAAc;AACtB,QAAQ,gEAAc;AACtB,QAAQ,2CAAI;AACZ,QAAQ,2CAAI;AACZ,QAAQ,2CAAI;AACZ,QAAQ,2EAAmB,aAAa,sCAAE;AAC1C;AACA,YAAY,2EAAmB;AAC/B,YAAY,iDAAO;AACnB;AACA;AACA;AACA;AACA,gDAAgD,mDAAQ;AACxD,iCAAiC,yDAAW;AAC5C;AACA;AACA;AACA,qDAAqD,mDAAQ;AAC7D,uCAAuC,yDAAW,qBAAqB,yDAAW,+CAA+C,2EAAmB,iBAAiB,2EAAmB;AACxL;AACA;AACA;AACA;AACA,oBAAoB,mEAAqB,mHAAmH,mEAAmB;AAC/K;AACA;AACA;AACA;AACA,UAAU;AACV,YAAY,2EAAmB;AAC/B,YAAY,iDAAO;AACnB;AACA;AACA;AACA;AACA;AACA,6BAA6B,iDAAO;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,kDAAQ;AACzC,iCAAiC,kDAAQ;AACzC,iCAAiC,kDAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mDAAQ;AACxB;AACA;AACA;AACA;AACA;AACA,wBAAwB,gEAAc;AACtC;AACA;AACA,wBAAwB,gEAAc;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kDAAQ;AACvC,gDAAgD,kDAAQ;AACxD;AACA;AACA,gBAAgB,mDAAQ;AACxB,gBAAgB,6CAAK;AACrB;AACA,gBAAgB,mDAAQ;AACxB,gBAAgB,6CAAK;AACrB;AACA,gBAAgB,mDAAQ;AACxB,gBAAgB,6CAAK;AACrB;AACA;AACA;AACA,qBAAqB,kDAAQ;AAC7B;AACA,+BAA+B,kDAAQ;AACvC;AACA;AACA,YAAY,mEAAY;AACxB;AACA;AACA;AACA;AACA,oBAAoB,mDAAQ;AAC5B,oBAAoB,4DAAY;AAChC;AACA,oBAAoB,mDAAQ;AAC5B,oBAAoB,sDAAS;AAC7B;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,sCAAE;AAC7D,4DAA4D,sCAAE;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,mDAAQ;AACjD,gBAAgB,iDAAO;AACvB,qCAAqC,+DAAc;AACnD;AACA;AACA;AACA;AACA,gCAAgC,yDAAW,aAAa,2EAAmB;AAC3E,gEAAgE,kDAAQ,gBAAgB,kDAAQ;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mEAAY;AAC5B;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAQ;AACpB;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,YAAY,uDAAU;AACtB,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA,YAAY,uDAAU;AACtB,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA;AACA,iBAAiB,sCAAE;AACnB;AACA;AACA;AACA,8BAA8B,sDAAS;AACvC;AACA;AACA;AACA,QAAQ,sDAAS;AACjB,QAAQ,sDAAS;AACjB,QAAQ,2CAAI;AACZ,aAAa,8DAAU;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,sCAAE;AACpB;AACA;AACA;AACA;AACA,YAAY,gEAAc;AAC1B,YAAY,gEAAc;AAC1B;AACA;AACA;AACA;AACA,gBAAgB,2EAAmB;AACnC;AACA,gBAAgB,2EAAmB;AACnC,gBAAgB,2EAAmB;AACnC,gBAAgB,2EAAmB;AACnC;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,aAAa,sCAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA,YAAY,mDAAQ;AACpB,YAAY,+DAAc;AAC1B;AACA,YAAY,mDAAQ;AACpB;AACA,mDAAmD,+DAAc;AACjE;AACA,oBAAoB,uDAAU;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAQ;AACpB,YAAY,6CAAK,yCAAyC,mDAAQ;AAClE,gBAAgB,mDAAQ;AACxB,gBAAgB,6CAAK,6CAA6C,mDAAQ;AAC1E;AACA;AACA,YAAY,mDAAQ;AACpB,YAAY,6CAAK,yCAAyC,mDAAQ;AAClE,gBAAgB,mDAAQ;AACxB,gBAAgB,6CAAK,6CAA6C,mDAAQ;AAC1E;AACA;AACA,YAAY,mDAAQ;AACpB,YAAY,6CAAK,sCAAsC,mDAAQ;AAC/D,gBAAgB,mDAAQ;AACxB,gBAAgB,6CAAK,0CAA0C,mDAAQ;AACvE;AACA;AACA,YAAY,mDAAQ;AACpB,YAAY,6CAAK,4CAA4C,mDAAQ;AACrE;AACA,YAAY,mDAAQ;AACpB,YAAY,6CAAK,qCAAqC,mDAAQ;AAC9D,gBAAgB,mDAAQ;AACxB,gBAAgB,6CAAK,yCAAyC,mDAAQ;AACtE;AACA;AACA,YAAY,mDAAQ;AACpB,YAAY,6CAAK,2CAA2C,mDAAQ;AACpE,gBAAgB,mDAAQ;AACxB,gBAAgB,6CAAK,+CAA+C,mDAAQ;AAC5E;AACA;AACA,YAAY,mDAAQ;AACpB;AACA,qDAAqD,+DAAc;AACnE;AACA,oBAAoB,uDAAU;AAC9B;AACA;AACA;AACA;AACA;AACA,wEAAwE,mDAAQ;AAChF;AACA,YAAY,mDAAQ;AACpB,YAAY,+DAAc,+CAA+C,6CAAM;AAC/E;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,gBAAgB,mDAAQ;AACxB,6BAA6B,yDAAW;AACxC;AACA;AACA;AACA,iDAAiD,mDAAQ;AACzD,mCAAmC,yDAAW,qBAAqB,yDAAW,2EAA2E,2EAAmB,iBAAiB,2EAAmB;AAChN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,mDAAQ,wCAAwC,mDAAQ;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA,4EAA4E,IAAI;AAChF;;AAEA;AACA,6EAA6E,uDAAY;AACzF;AACA;AACA;AACA,sNAAsN,uDAAY;AAClO,4BAA4B;AAC5B;AACA;AACA,yCAAyC,mDAAQ,oCAAoC,mDAAQ;AAC7F,iBAAiB,mDAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mDAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,aAAa,mDAAQ;AACrB;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,kDAAQ;AACjC,yBAAyB,kDAAQ;AACjC;AACA,kCAAkC,kDAAQ;AAC1C,6BAA6B,kDAAQ;AACrC,6BAA6B,kDAAQ;AACrC,uCAAuC,kDAAQ;AAC/C,uCAAuC,kDAAQ;AAC/C;AACA;AACA;AACA;AACA,uCAAuC,kDAAQ;AAC/C,uCAAuC,kDAAQ;AAC/C,wCAAwC,kDAAQ;AAChD,wCAAwC,kDAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,kDAAQ;AAClD,0CAA0C,kDAAQ;AAClD,0CAA0C,kDAAQ;AAClD,0CAA0C,kDAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,2DAA2D,6BAA6B,wCAAwC,oCAAoC;;AAEpK;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV,qBAAqB;AACrB;AACA;AACA,wCAAwC,kDAAQ;AAChD,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,4CAA4C,kDAAQ;AACpD;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA,+CAA+C,sCAAE;AACjD,6CAA6C,sCAAE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,2CAAK;AAC3B,sBAAsB,2CAAK;AAC3B,KAAK;;AAEL;AACA,8BAA8B,sCAAE;AAChC,+BAA+B,kDAAQ,QAAQ,2CAAK,0BAA0B,2CAAK;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,2CAAK,wCAAwC,2CAAK;AAC7E;AACA;AACA,0BAA0B,2CAAK,wCAAwC,2CAAK;AAC5E;AACA,0BAA0B,2CAAK;AAC/B,0BAA0B,2CAAK;AAC/B,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,kDAAkD,sCAAE;AACpD,gDAAgD,sCAAE;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,2CAAK,0BAA0B,2CAAK;AAClG,mEAAmE,2CAAK,0BAA0B,2CAAK;AACvG,gBAAgB,mEAAqB;AACrC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,iBAAiB,kDAAQ;AACzB;AACA,eAAe,yDAAW;AAC1B,KAAK;;AAEL;AACA,8BAA8B,kDAAQ;;AAEtC;AACA;AACA;;AAEA;AACA,wBAAwB,kDAAQ;AAChC;AACA;AACA;AACA,oBAAoB,kDAAQ;;AAE5B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,gBAAgB,kDAAQ;AACxB;AACA,oBAAoB,kDAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,iBAAiB,kDAAQ;AACzB,wBAAwB,yDAAW;AACnC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,+CAA+C,sCAAE;AACjD,kDAAkD,sCAAE;AACpD,4CAA4C,sCAAE;AAC9C,6CAA6C,sCAAE;AAC/C,yCAAyC,sCAAE;AAC3C,8CAA8C,sCAAE;AAChD,kDAAkD,sCAAE,sCAAsC;AAC1F,8CAA8C,sCAAE;AAChD,6CAA6C,sCAAE;AAC/C,4CAA4C,sCAAE;AAC9C,iDAAiD,sCAAE;AACnD,gDAAgD,sCAAE;AAClD,8CAA8C,sCAAE;AAChD,+CAA+C,sCAAE;AACjD,+CAA+C,sCAAE;AACjD,6CAA6C,sCAAE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,UAAU;AACV;AACA;AACA,YAAY,8DAAY,CAAC,uDAAU,+DAA+D,sCAAE;AACpG;AACA,KAAK;;AAEL;AACA,QAAQ,mEAAqB;AAC7B,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mEAAmB;AAC/B,YAAY,mEAAmB;AAC/B;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,yDAAe;AAC7B,eAAe,yDAAe;AAC9B,wCAAwC,mEAAmB;AAC3D,2BAA2B,oEAAgB,aAAa,mEAAmB,kCAAkC,mEAAmB,mBAAmB,mEAAmB;AACtK;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,gFAAgF,uDAAY;AAC5F,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,iDAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mDAAQ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,sDAAc;AACzE;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC,yDAAW;AAC9C,uCAAuC,yDAAW,yBAAyB,2EAAmB;AAC9F;AACA,2CAA2C,kDAAQ;AACnD;AACA;AACA,2CAA2C,iDAAO,+BAA+B,2EAAmB;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,mDAAQ;AAC9C;AACA;AACA,0DAA0D,sCAAE;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kDAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sEAAkB;AACrD;AACA,2CAA2C,iDAAO,oDAAoD,2EAAmB;AACzH;AACA,yCAAyC,mEAAsB,8BAA8B,2EAAmB,YAAY,2EAAmB;AAC/I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mDAAQ;AACpD,6BAA6B,yDAAW;AACxC;AACA;AACA;AACA,iDAAiD,mDAAQ;AACzD,mCAAmC,yDAAW,qBAAqB,yDAAW,6FAA6F,2EAAmB,iBAAiB,2EAAmB;AAClO;AACA;AACA;AACA;AACA,UAAU;AACV,4BAA4B,0DAAa;AACzC,2CAA2C,sCAAE;AAC7C;AACA,KAAK;;AAEL;AACA,oBAAoB,0DAAa;AACjC;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mEAAmB;AAC/D,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,YAAY,sDAAS;AACrB,YAAY,sDAAS;AACrB;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,6BAA6B;;AAE7B;AACA,YAAY,sCAAE,4BAA4B,8DAAU;AACpD;AACA;AACA;AACA,wBAAwB,kEAAY;AACpC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,4BAA4B,6DAAW;AACvC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,YAAY,sCAAE,4BAA4B,8DAAU;AACpD;AACA;AACA;AACA,oBAAoB,kEAAY;AAChC;AACA,6BAA6B,8DAAU;AACvC;AACA,YAAY,8DAAgB;AAC5B,YAAY,mEAAqB;AACjC,SAAS;AACT,KAAK;;AAEL;AACA;;AAEA,YAAY,sCAAE,4BAA4B,8DAAU;AACpD;AACA;AACA;AACA,oBAAoB,kEAAY;AAChC;AACA,2CAA2C;AAC3C,YAAY,mEAAqB;AACjC,SAAS;AACT,KAAK;;AAEL;AACA,YAAY,sCAAE,4BAA4B,8DAAU;AACpD;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE,4BAA4B,8DAAU;AACpD;AACA;AACA;AACA,KAAK;;AAEL;AACA,YAAY,sCAAE,4BAA4B,8DAAU;AACpD;AACA;AACA;AACA,KAAK;;AAEL,+BAA+B;;AAE/B;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,8BAA8B,mDAAQ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,qEAAc;AACrD;AACA;AACA,yCAAyC,kDAAQ,2BAA2B,kDAAQ;AACpF,yCAAyC,kDAAQ,4BAA4B,kDAAQ;AACrF;AACA,mDAAmD,4CAAK,MAAM,mDAAQ;AACtE;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,0BAA0B,2EAAmB;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,sCAAE;AAC1C;AACA;AACA;AACA;AACA;AACA,wBAAwB,sCAAE;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,2EAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA,qBAAqB,sCAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,4BAA4B,mBAAmB,OAAO;AAC5G,SAAS;AACT,oBAAoB,8DAAgB;AACpC,KAAK;;AAEL;AACA,6BAA6B,yDAAe;AAC5C,+BAA+B,yDAAe;AAC9C;AACA;;AAEA,4DAAY;;AAEZ;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA,QAAQ,sEAAoB;AAC5B;AACA,YAAY,uDAAU;AACtB;AACA;AACA;AACA;;AAEA,4DAAY;;AAEZ;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4DAAY;;;;;;;;;;;AC1uEZ;AACa;;AAEb,gBAAgB,kGAAoC;;AAEpD,gBAAgB,mBAAO,CAAC,0DAAe;AACvC,gBAAgB,mBAAO,CAAC,0DAAe;AACvC,gBAAgB,mBAAO,CAAC,wEAAsB;;AAE9C;;AAEA;;AAEA;;;;;;;;;;;ACba;;;AAGb,mBAAmB,mBAAO,CAAC,gEAAgB;AAC3C,mBAAmB,mBAAO,CAAC,gEAAgB;AAC3C,mBAAmB,mBAAO,CAAC,kEAAiB;AAC5C,mBAAmB,mBAAO,CAAC,kEAAiB;AAC5C,mBAAmB,mBAAO,CAAC,gEAAgB;;AAE3C;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,SAAS;AAC7C;AACA;AACA,gCAAgC;AAChC;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,eAAe;;AAElB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;;AAExB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;;AAEpB;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB;;AAEtB;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,eAAe;AACf,eAAe;AACf,kBAAkB;AAClB,YAAY;;;;;;;;;;;AC/YC;;;AAGb,mBAAmB,mBAAO,CAAC,gEAAgB;AAC3C,mBAAmB,mBAAO,CAAC,gEAAgB;AAC3C,mBAAmB,mBAAO,CAAC,kEAAiB;AAC5C,mBAAmB,mBAAO,CAAC,oEAAkB;AAC7C,mBAAmB,mBAAO,CAAC,kEAAiB;AAC5C,mBAAmB,mBAAO,CAAC,gEAAgB;AAC3C,mBAAmB,mBAAO,CAAC,kEAAiB;;AAE5C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,SAAS;AAC7C;AACA;AACA,gCAAgC;AAChC;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG,eAAe;;AAElB;;AAEA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;;AAExB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB;AACpB;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D;;AAE1D;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB;;AAEtB;;AAEA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI;;AAEJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB;;AAEtB;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,eAAe;AACf,eAAe;AACf,kBAAkB;AAClB,cAAc;;;;;;;;;;;ACtaD;;;AAGb;AACA;AACA;;AAEA;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA,iBAAiB;AACjB,6BAA6B;AAC7B,sBAAsB;AACtB;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,gBAAgB;AAChB;AACA,IAAI,YAAY;AAChB,IAAI,aAAa;AACjB,IAAI,aAAa;AACjB;AACA,IAAI;AACJ,IAAI,YAAY;AAChB,IAAI,aAAa;AACjB,IAAI,aAAa;AACjB;AACA;AACA;;AAEA;;;;;;;;;;;ACxGA;AACa;;;AAGb,YAAY,mBAAO,CAAC,0DAAU;;;AAG9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM,0CAA0C,aAAa;AAC7D,MAAM,sDAAsD,aAAa;;;AAGzE;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;AACA,mCAAmC;;;AAGnC;AACA,kBAAkB;AAClB;;AAEA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,yBAAyB,aAAa;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;;;AAGA;AACA,qBAAqB;AACrB;AACA;;;AAGA;AACA,qBAAqB;AACrB;AACA,oCAAoC,SAAS;AAC7C;AACA;AACA;AACA;;;AAGA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uBAAuB,QAAQ;AAC/B;AACA;AACA,oBAAoB,qBAAqB;;AAEzC;AACA;AACA,qBAAqB,0BAA0B,gBAAgB;;AAE/D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,0BAA0B;;AAE/C;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;;AAEA;AACA,0BAA0B;;AAE1B;AACA;AACA,mDAAmD;;AAEnD;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,mBAAmB;;AAEnB;AACA;;;;;;;;;;;AC1La;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;;AAEA;AACA;;;AAGA;;;;;;;;;;;AClDa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACnEa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,SAAS;AAC3B;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA,oBAAoB,SAAS;AAC7B;AACA;;AAEA,uBAAuB;AACvB;;;AAGA;;;;;;;;;;;AC1Da;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,iEAAiB;AACvC,cAAc,mBAAO,CAAC,uDAAS;AAC/B,cAAc,mBAAO,CAAC,2DAAW;AACjC,cAAc,mBAAO,CAAC,uDAAS;AAC/B,cAAc,mBAAO,CAAC,6DAAY;;AAElC;AACA;;;AAGA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iCAAiC;AACjC;;;AAGA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;;AAE3B,oBAAoB;;AAEpB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,sBAAsB,qBAAqB;;;AAGhE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB,mBAAmB;;AAEnB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C,yBAAyB;AACzB,mCAAmC;AACnC,qCAAqC;AACrC,6CAA6C;AAC7C,6CAA6C;AAC7C;AACA;;AAEA,uBAAuB;;AAEvB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;;AAElC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,wBAAwB;;AAExB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;;AAEpE;AACA,0DAA0D;AAC1D;;AAEA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,2DAA2D;AAC3D;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,2BAA2B;;AAE3B;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,SAAS;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;AAEA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,yBAAyB;AACzB,yBAAyB;;AAEzB;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,SAAS;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qEAAqE;AACrE;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,2DAA2D;AAC3D;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAA0B;;AAE1B,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;;AAEA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;AACtB,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,+BAA+B;AAC/B,8BAA8B;AAC9B,gCAAgC;AAChC,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,4BAA4B;AAC5B,0BAA0B;;AAE1B,oBAAoB;AACpB,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;;AAEtB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;;AAE9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;AACtB,sBAAsB;;AAEtB;AACA;;AAEA,uBAAuB;;AAEvB;;AAEA;;AAEA,8CAA8C;AAC9C,8CAA8C;AAC9C,8CAA8C;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gCAAgC;AAChC,gCAAgC;AAChC,gCAAgC;;AAEhC;AACA;AACA;;AAEA,gCAAgC;AAChC,iDAAiD;AACjD;;AAEA,mCAAmC;AACnC,mCAAmC;AACnC;AACA;AACA;;AAEA,iDAAiD;AACjD;AACA;AACA;;AAEA,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA;;AAEA,0BAA0B;AAC1B,0BAA0B;AAC1B,0BAA0B;AAC1B,0BAA0B;;;AAG1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,8BAA8B;AAC9B,+BAA+B;AAC/B;AACA;AACA;;;AAGA;AACA,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB;AACxB;AACA;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB;;AAEvB,uCAAuC;;AAEvC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA,wBAAwB;AACxB,uBAAuB;AACvB;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA,8BAA8B;AAC9B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;;AAEA;AACA;AACA;AACA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,+BAA+B;;AAE/B,4BAA4B;AAC5B,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD;AACA;;AAEA,gBAAgB;;AAEhB;AACA;AACA,iCAAiC;AACjC,0BAA0B;AAC1B,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,mBAAmB;AACnB,oBAAoB;AACpB,oBAAoB;AACpB,wBAAwB;AACxB,wBAAwB;AACxB,eAAe;AACf,kBAAkB;AAClB,4BAA4B;AAC5B,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACj1Da;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACzDa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B;;;AAGA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW,IAAI;AACf;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,IAAI;AACnB;AACA;AACA;AACA;;AAEA,8CAA8C;AAC9C;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,4CAA4C;AAC5C,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA,2CAA2C;AAC3C;AACA,wCAAwC;AACxC;AACA;AACA;AACA,oBAAoB;AACpB,uCAAuC;AACvC;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,oBAAoB;AACpB;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,sBAAsB;AACtB,6CAA6C;AAC7C;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,wCAAwC;AACxC;AACA;AACA;AACA,oBAAoB;AACpB,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa;AACb;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACxVa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,mBAAO,CAAC,iEAAiB;AAC7C,oBAAoB,mBAAO,CAAC,2DAAW;AACvC,oBAAoB,mBAAO,CAAC,uDAAS;AACrC,oBAAoB,mBAAO,CAAC,2DAAW;AACvC,oBAAoB,mBAAO,CAAC,6DAAY;;AAExC;AACA;AACA;;AAEA;AACA;;;AAGA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;;AAGA,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,+BAA+B;AAC/B,+BAA+B;AAC/B,+BAA+B;AAC/B,+BAA+B;AAC/B,+BAA+B;AAC/B,+BAA+B;AAC/B,+BAA+B;AAC/B,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;;AAEvB;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,6BAA6B;AAC7B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B;AACA,8BAA8B;;AAE9B;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;;AAE9B;AACA,8BAA8B;AAC9B,8BAA8B;;AAE9B;AACA,8BAA8B;AAC9B,8BAA8B;;AAE9B;AACA,8BAA8B;;AAE9B;AACA,gCAAgC;AAChC,gCAAgC;AAChC,8BAA8B;AAC9B,8BAA8B;;AAE9B;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,iCAAiC;;AAEjC,oCAAoC;AACpC,oCAAoC;;AAEpC;AACA;AACA;AACA;AACA,gDAAgD;AAChD,mCAAmC;AACnC,mCAAmC;AACnC,mCAAmC;AACnC,mCAAmC;AACnC,mCAAmC;AACnC;;AAEA;AACA;;AAEA,8BAA8B;AAC9B;AACA;AACA,iBAAiB;AACjB,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe;AACf,uCAAuC;;AAEvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;;AAExB,wEAAwE,SAAS;;AAEjF;AACA;AACA,uBAAuB;;AAEvB,wEAAwE,SAAS;;AAEjF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,uCAAuC;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B,oCAAoC;AACpC,gCAAgC;AAChC,oCAAoC;AACpC,8BAA8B;AAC9B,8BAA8B;AAC9B,mCAAmC;AACnC;;AAEA,SAAS;;AAET;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B,0BAA0B;;;AAGvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,6BAA6B;AAC7B,4BAA4B;AAC5B,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,oEAAoE;AACpE;AACA;AACA;;AAEA,uCAAuC;AACvC;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAkC;;AAElC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,oEAAoE;AACpE;AACA;AACA;;AAEA,mCAAmC;AACnC;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,mDAAmD;AACnD;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,oEAAoE;AACpE;AACA;AACA;;AAEA,qCAAqC;AACrC;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,mDAAmD;AACnD;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,cAAc;AACd,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,UAAU;AACV,kCAAkC;AAClC;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;AAC9B;AACA,gCAAgC;;AAEhC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB,qBAAqB;AACrB,wBAAwB;AACxB,mBAAmB;AACnB,oBAAoB;AACpB,eAAe;AACf,kBAAkB;AAClB,wBAAwB;AACxB,4BAA4B;AAC5B,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACnhDa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,mBAAO,CAAC,iEAAiB;;AAErC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B;;AAE1B,6BAA6B;AAC7B,6BAA6B;AAC7B,iCAAiC;AACjC,6BAA6B;AAC7B,6BAA6B;AAC7B,6BAA6B;AAC7B,kCAAkC;AAClC,6BAA6B;AAC7B,6BAA6B;AAC7B,yBAAyB;AACzB,yBAAyB;AACzB,yBAAyB;AACzB,yBAAyB;AACzB,wBAAwB;AACxB,uBAAuB;AACvB;AACA,qBAAqB;AACrB,8BAA8B;AAC9B,4CAA4C,kBAAkB;AAC9D,2CAA2C,mBAAmB;AAC9D;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,gBAAgB;AAChC;AACA;AACA,gBAAgB,aAAa;AAC7B;AACA;;AAEA;AACA;AACA,sBAAsB,UAAU;AAChC,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,uCAAuC;AACvC,wCAAwC,6BAA6B;AACrE,0CAA0C;AAC1C,2CAA2C;AAC3C;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA,gBAAgB,WAAW;AAC3B,4BAA4B;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,oCAAoC;AACpC;;AAEA;AACA;AACA,gBAAgB,eAAe;AAC/B;AACA;;AAEA;AACA,gBAAgB,aAAa;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;;AAEA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA,IAAI,0BAA0B;AAC9B;AACA;AACA;AACA;;AAEA;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,mCAAmC;AACnC,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,6BAA6B;AAC7B,8BAA8B;;AAE9B;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;;AAEA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B;;AAE9B;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACtVa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC/Ba;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,YAAY,mBAAO,CAAC,iEAAiB;;AAErC;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B;AAC/B;;AAEA;;;AAGA,qBAAqB,sBAAsB,qBAAqB;;AAEhE;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA,oCAAoC;AACpC,oCAAoC;AACpC,oCAAoC;AACpC,oCAAoC;AACpC,oCAAoC;;AAEpC;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA,gCAAgC;AAChC,gCAAgC;AAChC,gCAAgC;AAChC;;;;AAIA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI;AACJ;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,sBAAsB;AACtB,sBAAsB;AACtB,sBAAsB;AACtB,sBAAsB;AACtB,sBAAsB;;AAEtB,iBAAiB,kBAAkB;AACnC;AACA;;AAEA;AACA;AACA;AACA,gDAAgD;;AAEhD,2BAA2B,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAwB,YAAY;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;;AAExB;AACA;;AAEA;AACA;AACA;AACA,qCAAqC;AACrC,6BAA6B;AAC7B,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA,0BAA0B,YAAY;AACtC;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,iCAAiC;AACjC,iCAAiC;AACjC;AACA,2CAA2C;AAC3C,6BAA6B;AAC7B,6BAA6B;AAC7B,6BAA6B;;AAE7B;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,eAAe;AAC9B;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,yBAAyB;AAC1C;AACA,gBAAgB,8BAA8B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,WAAW;AAC5B;AACA,gBAAgB,8BAA8B;AAC9C;AACA;AACA;AACA;AACA,cAAc;AACd,SAAS,gBAAgB;AACzB;AACA,gBAAgB,oCAAoC;AACpD;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,kBAAkB;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,aAAa;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,cAAc,cAAc,OAAO;AACnC,cAAc,cAAc,OAAO;AACnC,cAAc,cAAc,OAAO;;AAEnC;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB,oBAAoB;AACpB;AACA,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,2BAA2B;AAC3B;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;;AAEhD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,4BAA4B;AAC5B;AACA,sBAAsB;AACtB,sBAAsB;AACtB,sBAAsB;AACtB,sBAAsB;AACtB,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC;AACjC;AACA,QAAQ;AACR;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA,yCAAyC;AACzC;AACA,gBAAgB;AAChB;AACA;;AAEA,yCAAyC;AACzC;AACA;AACA;AACA,uCAAuC;AACvC;AACA,QAAQ;;AAER;AACA;AACA;;AAEA,MAAM;AACN;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,WAAW;AACzB;AACA;AACA;;AAEA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAwC,QAAQ,OAAO;;AAEvD;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;;AAE/B,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,IAAI;;AAEJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,uBAAuB;AACvB;AACA,6BAA6B;AAC7B,6BAA6B;AAC7B,6BAA6B;;AAE7B,yCAAyC;;AAEzC,6BAA6B;AAC7B,6BAA6B;AAC7B,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA,iDAAiD;;AAEjD,cAAc,eAAe;AAC7B;AACA;;AAEA;AACA;;AAEA,MAAM;AACN;;AAEA,MAAM;;AAEN,gCAAgC;AAChC;;AAEA,MAAM;AACN;;AAEA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,MAAM;AACN;AACA;;AAEA,MAAM;AACN;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,0BAA0B;AAC1B;AACA,6BAA6B;AAC7B,6BAA6B;AAC7B,6BAA6B;;AAE7B,yCAAyC;;AAEzC,6BAA6B;AAC7B,6BAA6B;AAC7B,6BAA6B;;AAE7B,gCAAgC;AAChC;AACA;AACA;AACA;;AAEA,cAAc,eAAe;AAC7B;AACA;;AAEA;AACA;;AAEA,MAAM;AACN,WAAW,mCAAmC;;AAE9C,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;;AAEA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;;AAEA,MAAM;AACN;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,oBAAoB;;AAEpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA,+BAA+B;;AAE/B;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,iCAAiC;AACjC,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;;AAEA,yCAAyC;AACzC;;AAEA,yCAAyC;AACzC;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,IAAI,MAAM,GAAG,MAAM,GAAG;AAChD;AACA;AACA;AACA,SAAS,IAAI,KAAK,GAAG,MAAM,GAAG,MAAM,GAAG,MAAM,IAAI,MAAM,IAAI;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,SAAS;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB,oBAAoB;AACpB;AACA,4DAA4D;AAC5D,wCAAwC;AACxC;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB,oBAAoB;AACpB;AACA,8BAA8B;AAC9B,8BAA8B;;AAE9B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mCAAmC;;AAEnC,IAAI;AACJ;AACA,6CAA6C;AAC7C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI;;AAEJ;AACA;;AAEA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,sBAAsB;AACtB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,wBAAwB;AACxB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,iBAAiB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB,wBAAwB;AACxB,uBAAuB;AACvB,iBAAiB;AACjB,iBAAiB;;;;;;;;;;;ACrsCJ;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;AC9CqC;;AAErC;AACA,OAAO,wDAAQ;AACf;AACA;;AAEA;AACA,gCAAgC;;AAEhC;AACA;AACA;AACA,qBAAqB;;AAErB;AACA,qBAAqB;;AAErB;AACA,qBAAqB;;AAErB;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iEAAe,KAAK;;;;;;;;;;;;;;AClCpB,iEAAe,cAAc,EAAE,UAAU,EAAE,eAAe,EAAE,gBAAgB,EAAE,UAAU,GAAG,yCAAyC;;;;;;;;;;;;;;ACApI;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mDAAmD;;AAEnD;;AAEA,oBAAoB,gBAAgB;AACpC;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,QAAQ;AAC3B;;AAEA,oBAAoB,QAAQ;AAC5B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,SAAS;AAC7B;;AAEA,oBAAoB,QAAQ;AAC5B;AACA;;AAEA,sBAAsB,SAAS;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,UAAU;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iEAAe,IAAI;;;;;;;;;;;;;;;AC/FkB;AACrC;AACA;AACA;AACA;;AAEA;;AAEA,gBAAgB,SAAS;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,0gBAA0gB;AAC1gB;AACA;AACA;AACA;;AAEA,OAAO,wDAAQ;AACf;AACA;;AAEA;AACA;;AAEA,iEAAe,SAAS;;;;;;;;;;;;;;;;;;AC7Be;AACR;;AAE/B;AACA,2CAA2C;;AAE3C;;AAEA,kBAAkB,gBAAgB;AAClC;AACA;;AAEA;AACA;;AAEO;AACA;AACP,6BAAe,oCAAU;AACzB;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,qDAAK;AACvB;;AAEA;AACA;AACA,MAAM;AACN;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAsB,QAAQ;AAC9B;AACA;;AAEA;AACA;;AAEA,WAAW,yDAAS;AACpB,IAAI;;;AAGJ;AACA,8BAA8B;AAC9B,IAAI,eAAe;;;AAGnB;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC/D2B;AACE;AAC7B,SAAS,mDAAG,aAAa,gDAAI;AAC7B,iEAAe,EAAE;;;;;;;;;;;;;;;ACHc;;AAE/B;AACA,qCAAqC,iDAAK;AAC1C;;AAEA,iEAAe,QAAQ;;;;;;UCNvB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE6B;;AAEQ;;AAEuB;AACY;AACf;AACH;AACV;AACe;AACf;AACQ;AACJ;AACF;AACM;AACF;AACA;AACE;AACkC;AACpC;AACI;AACF;AACoD;AAC1C;AACK;AACb;AACQ;AACd;AACU;AACR;AACgC;AAClB;AACP;AACuB;AACrB;AAC0B;AAC/B;AAC0C;AACT;AACH;AAC1B;AACoC;AACX;AACV;;AAE3B;AACH;AACmB;;AAmBvC;;AAeJ;;AAEoD;;AAStC;;AAEe;AACQ;;AAmBzB;;AAeK;;AAEpC;AACA;AAI6B;;AAEkB;;AAOJ;;AAEiB;AACF;AACiB;;AAE5B;AACL;AACU;AACF;AACf;AACF;AASR;AAC4C;AAC4B;AACjC;AACE;AACzB;AACD;AACW;;AAEiB;AACnB;AACE;AAUhB;AACyB;;AAE3B;AACqB;AACU;AACX;AACH;AACR;AACmB;AACV;AACP;AACqC;AACA;AACZ;AACiB;AACF;AACnB;AACK;AACnB;AACT;AACP;AACe;AACT;AACR;AACwB;AACA;AACf;AACgB;AACX;AACM;;AAEsB;AAK7C;;AAE9B;AAC6E;;AAE1B;AACQ;AAS7B;AAC6B;AACuB;AACf;AACzB;AACkC;;AAEX;AAYrC;AACsC;AAMpC;AAML;AAQO;AACgC;;AAEf;AAUV;AAOA;AACmB;AAQvB;;AAEnC;AACA;AACA;AACA;AACyD;;AAEzD;AACA;AACA;AAMqC;;AAE8B;AAChB;;AAO9B;AAC8C;AACb;AACmB;AAO1C;;AAML;;AAKP;;;AAGnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAE+C;;AAExC;;AAEP,8DAAY;;;AAGZ;;AAE6B;AACiC;AACL;AACP;AACe;AAC5B;AACe;AACN;;AAE9C,yDAAU,mBAAmB,gDAAM;AACnC,yDAAU,iBAAiB,yDAAU;AACrC,yDAAU,+BAA+B,+DAAa;AACtD,wEAAoB,CAAC,yDAAU;AAC/B,4EAAuB,CAAC,yDAAU;;AAElC,2EAAmB,YAAY,sCAAE;AACjC,2EAAmB,QAAQ,sCAAE;AAC7B,2EAAmB,QAAQ,2EAAmB;AAC9C,2EAAmB;;AAEnB,4DAAY,YAAY,sCAAE,UAAU,2EAAmB,aAAa,sCAAE","sources":["webpack://wwtlib/webpack/universalModuleDefinition","webpack://wwtlib/./esm/annotation.js","webpack://wwtlib/./esm/astrocalc.js","webpack://wwtlib/./esm/astrocalc/aberration.js","webpack://wwtlib/./esm/astrocalc/angular_separation.js","webpack://wwtlib/./esm/astrocalc/coordinate_transformation.js","webpack://wwtlib/./esm/astrocalc/date.js","webpack://wwtlib/./esm/astrocalc/dynamical_time.js","webpack://wwtlib/./esm/astrocalc/earth.js","webpack://wwtlib/./esm/astrocalc/ecliptical_elements.js","webpack://wwtlib/./esm/astrocalc/elements_planetary_orbit.js","webpack://wwtlib/./esm/astrocalc/elliptical.js","webpack://wwtlib/./esm/astrocalc/equation_of_time.js","webpack://wwtlib/./esm/astrocalc/fk5.js","webpack://wwtlib/./esm/astrocalc/galilean_moons.js","webpack://wwtlib/./esm/astrocalc/globe.js","webpack://wwtlib/./esm/astrocalc/illuminated_fraction.js","webpack://wwtlib/./esm/astrocalc/interpolate.js","webpack://wwtlib/./esm/astrocalc/jupiter.js","webpack://wwtlib/./esm/astrocalc/kepler.js","webpack://wwtlib/./esm/astrocalc/mars.js","webpack://wwtlib/./esm/astrocalc/mercury.js","webpack://wwtlib/./esm/astrocalc/moon.js","webpack://wwtlib/./esm/astrocalc/moon_illuminated_fraction.js","webpack://wwtlib/./esm/astrocalc/moon_nodes.js","webpack://wwtlib/./esm/astrocalc/moon_perigee_apogee.js","webpack://wwtlib/./esm/astrocalc/moon_phases.js","webpack://wwtlib/./esm/astrocalc/neptune.js","webpack://wwtlib/./esm/astrocalc/nutation.js","webpack://wwtlib/./esm/astrocalc/parallax.js","webpack://wwtlib/./esm/astrocalc/physical_jupiter.js","webpack://wwtlib/./esm/astrocalc/physical_mars.js","webpack://wwtlib/./esm/astrocalc/physical_sun.js","webpack://wwtlib/./esm/astrocalc/pluto.js","webpack://wwtlib/./esm/astrocalc/precession.js","webpack://wwtlib/./esm/astrocalc/rise_transit_set.js","webpack://wwtlib/./esm/astrocalc/saturn.js","webpack://wwtlib/./esm/astrocalc/saturn_rings.js","webpack://wwtlib/./esm/astrocalc/sidereal.js","webpack://wwtlib/./esm/astrocalc/stellar_magnitudes.js","webpack://wwtlib/./esm/astrocalc/sun.js","webpack://wwtlib/./esm/astrocalc/uranus.js","webpack://wwtlib/./esm/astrocalc/venus.js","webpack://wwtlib/./esm/baseplanets.js","webpack://wwtlib/./esm/baseutil.js","webpack://wwtlib/./esm/blend_state.js","webpack://wwtlib/./esm/camera_parameters.js","webpack://wwtlib/./esm/color.js","webpack://wwtlib/./esm/constellation_filter.js","webpack://wwtlib/./esm/constellations.js","webpack://wwtlib/./esm/coordinates.js","webpack://wwtlib/./esm/data_globals.js","webpack://wwtlib/./esm/double3d.js","webpack://wwtlib/./esm/equirectangular_tile.js","webpack://wwtlib/./esm/fast_math.js","webpack://wwtlib/./esm/fits_properties.js","webpack://wwtlib/./esm/folder.js","webpack://wwtlib/./esm/folder_browser.js","webpack://wwtlib/./esm/folder_up.js","webpack://wwtlib/./esm/fxyf.js","webpack://wwtlib/./esm/graphics/gl_buffers.js","webpack://wwtlib/./esm/graphics/primitives3d.js","webpack://wwtlib/./esm/graphics/shaders.js","webpack://wwtlib/./esm/graphics/sprite2d.js","webpack://wwtlib/./esm/graphics/tessellator.js","webpack://wwtlib/./esm/graphics/texture.js","webpack://wwtlib/./esm/graphics/webgl_constants.js","webpack://wwtlib/./esm/grids.js","webpack://wwtlib/./esm/healpix_tables.js","webpack://wwtlib/./esm/healpix_tile.js","webpack://wwtlib/./esm/healpix_utils.js","webpack://wwtlib/./esm/hips_properties.js","webpack://wwtlib/./esm/hploc.js","webpack://wwtlib/./esm/imageset.js","webpack://wwtlib/./esm/interfaces.js","webpack://wwtlib/./esm/kepler_vertex.js","webpack://wwtlib/./esm/layers/color_map_container.js","webpack://wwtlib/./esm/layers/fits_image.js","webpack://wwtlib/./esm/layers/fits_image_js.js","webpack://wwtlib/./esm/layers/fits_image_tile.js","webpack://wwtlib/./esm/layers/from_xml.js","webpack://wwtlib/./esm/layers/great_circle_route_layer.js","webpack://wwtlib/./esm/layers/grid_layer.js","webpack://wwtlib/./esm/layers/imageset_layer.js","webpack://wwtlib/./esm/layers/iss_layer.js","webpack://wwtlib/./esm/layers/layer.js","webpack://wwtlib/./esm/layers/layer_manager.js","webpack://wwtlib/./esm/layers/layer_ui.js","webpack://wwtlib/./esm/layers/manager_dialogs.js","webpack://wwtlib/./esm/layers/object3d.js","webpack://wwtlib/./esm/layers/orbit.js","webpack://wwtlib/./esm/layers/orbit_layer.js","webpack://wwtlib/./esm/layers/reference_frame.js","webpack://wwtlib/./esm/layers/spreadsheet_layer.js","webpack://wwtlib/./esm/layers/table.js","webpack://wwtlib/./esm/layers/time_series_layer.js","webpack://wwtlib/./esm/layers/vo_table.js","webpack://wwtlib/./esm/layers/vo_table_layer.js","webpack://wwtlib/./esm/layers/wcs_image.js","webpack://wwtlib/./esm/mercator_tile.js","webpack://wwtlib/./esm/minor_planets.js","webpack://wwtlib/./esm/place.js","webpack://wwtlib/./esm/planets.js","webpack://wwtlib/./esm/planets_3d.js","webpack://wwtlib/./esm/plot_tile.js","webpack://wwtlib/./esm/pointing.js","webpack://wwtlib/./esm/render_context.js","webpack://wwtlib/./esm/render_globals.js","webpack://wwtlib/./esm/render_triangle.js","webpack://wwtlib/./esm/script_interface.js","webpack://wwtlib/./esm/settings.js","webpack://wwtlib/./esm/sky_image_tile.js","webpack://wwtlib/./esm/sky_text.js","webpack://wwtlib/./esm/space_time_controller.js","webpack://wwtlib/./esm/ss.js","webpack://wwtlib/./esm/star.js","webpack://wwtlib/./esm/tangent_tile.js","webpack://wwtlib/./esm/tile.js","webpack://wwtlib/./esm/tile_cache.js","webpack://wwtlib/./esm/toast_tile.js","webpack://wwtlib/./esm/tour.js","webpack://wwtlib/./esm/tours/file_cabinet.js","webpack://wwtlib/./esm/tours/overlay.js","webpack://wwtlib/./esm/tours/selection.js","webpack://wwtlib/./esm/tours/text_object.js","webpack://wwtlib/./esm/tours/tour_document.js","webpack://wwtlib/./esm/tours/tour_edit.js","webpack://wwtlib/./esm/tours/tour_editor.js","webpack://wwtlib/./esm/tours/tour_player.js","webpack://wwtlib/./esm/tours/tour_stop.js","webpack://wwtlib/./esm/tours/undo.js","webpack://wwtlib/./esm/triangle.js","webpack://wwtlib/./esm/typesystem.js","webpack://wwtlib/./esm/ui_tools.js","webpack://wwtlib/./esm/url_helpers.js","webpack://wwtlib/./esm/util.js","webpack://wwtlib/./esm/utilities/binary_reader.js","webpack://wwtlib/./esm/utilities/bitmap.js","webpack://wwtlib/./esm/utilities/color_picker.js","webpack://wwtlib/./esm/utilities/context_menu_strip.js","webpack://wwtlib/./esm/utilities/dialog.js","webpack://wwtlib/./esm/utilities/histogram.js","webpack://wwtlib/./esm/utilities/simple_input.js","webpack://wwtlib/./esm/utilities/xml_text_writer.js","webpack://wwtlib/./esm/video_output_type.js","webpack://wwtlib/./esm/view_mover.js","webpack://wwtlib/./esm/viz_layer.js","webpack://wwtlib/./esm/web_file.js","webpack://wwtlib/./esm/wtml.js","webpack://wwtlib/./esm/wwt_control.js","webpack://wwtlib/../node_modules/pako/index.js","webpack://wwtlib/../node_modules/pako/lib/deflate.js","webpack://wwtlib/../node_modules/pako/lib/inflate.js","webpack://wwtlib/../node_modules/pako/lib/utils/common.js","webpack://wwtlib/../node_modules/pako/lib/utils/strings.js","webpack://wwtlib/../node_modules/pako/lib/zlib/adler32.js","webpack://wwtlib/../node_modules/pako/lib/zlib/constants.js","webpack://wwtlib/../node_modules/pako/lib/zlib/crc32.js","webpack://wwtlib/../node_modules/pako/lib/zlib/deflate.js","webpack://wwtlib/../node_modules/pako/lib/zlib/gzheader.js","webpack://wwtlib/../node_modules/pako/lib/zlib/inffast.js","webpack://wwtlib/../node_modules/pako/lib/zlib/inflate.js","webpack://wwtlib/../node_modules/pako/lib/zlib/inftrees.js","webpack://wwtlib/../node_modules/pako/lib/zlib/messages.js","webpack://wwtlib/../node_modules/pako/lib/zlib/trees.js","webpack://wwtlib/../node_modules/pako/lib/zlib/zstream.js","webpack://wwtlib/../node_modules/uuid/dist/esm-browser/parse.js","webpack://wwtlib/../node_modules/uuid/dist/esm-browser/regex.js","webpack://wwtlib/../node_modules/uuid/dist/esm-browser/sha1.js","webpack://wwtlib/../node_modules/uuid/dist/esm-browser/stringify.js","webpack://wwtlib/../node_modules/uuid/dist/esm-browser/v35.js","webpack://wwtlib/../node_modules/uuid/dist/esm-browser/v5.js","webpack://wwtlib/../node_modules/uuid/dist/esm-browser/validate.js","webpack://wwtlib/webpack/bootstrap","webpack://wwtlib/webpack/runtime/compat get default export","webpack://wwtlib/webpack/runtime/define property getters","webpack://wwtlib/webpack/runtime/hasOwnProperty shorthand","webpack://wwtlib/webpack/runtime/make namespace object","webpack://wwtlib/./esm/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wwtlib\"] = factory();\n\telse\n\t\troot[\"wwtlib\"] = factory();\n})(self, () => {\nreturn ","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Web GL support for annotations.\n//\n// Annotations all share a set of supporting primitives. Each time any\n// annotation changes the primitives, they must be regenerated if they have been\n// drawn already. It is best to do updates in large batches.\n\nimport { registerType } from \"./typesystem.js\";\nimport { ss } from \"./ss.js\";\nimport { Vector3d } from \"./double3d.js\";\nimport { Dates, LineList, TriangleList, TriangleFanList, PointList } from \"./graphics/primitives3d.js\";\nimport { Tessellator } from \"./graphics/tessellator.js\";\nimport { Color, Colors } from \"./color.js\";\nimport { Coordinates } from \"./coordinates.js\";\n\n\n// wwtlib.Annotation\n\nexport function Annotation() {\n    this.addedToPrimitives = false;\n    this.annotationDirty = true;\n    this._opacity = 1;\n    this._showHoverLabel = false;\n}\n\nAnnotation.pointList = null;\nAnnotation.lineList = null;\nAnnotation.triangleFanPointList = null;\nAnnotation.triangleList = null;\nAnnotation.batchDirty = true;\n\nAnnotation.prepBatch = function (renderContext) {\n    if (Annotation.pointList == null || Annotation.batchDirty) {\n        Annotation.pointList = new PointList(renderContext);\n        Annotation.lineList = new LineList();\n        Annotation.triangleFanPointList = new TriangleFanList();\n        Annotation.triangleList = new TriangleList();\n        Annotation.lineList.set_depthBuffered(false);\n        Annotation.triangleList.depthBuffered = false;\n    }\n};\n\nAnnotation.drawBatch = function (renderContext) {\n    Annotation.batchDirty = false;\n    if (renderContext.gl == null) {\n        return;\n    }\n    if (Annotation.pointList != null) {\n        Annotation.pointList.draw(renderContext, 1, false);\n    }\n    if (Annotation.lineList != null) {\n        Annotation.lineList.drawLines(renderContext, 1);\n    }\n    if (Annotation.triangleFanPointList != null) {\n        Annotation.triangleFanPointList.draw(renderContext, 1);\n    }\n    if (Annotation.triangleList != null) {\n        Annotation.triangleList.draw(renderContext, 1, 0);\n    }\n};\n\nAnnotation.separation = function (Alpha1, Delta1, Alpha2, Delta2) {\n    Delta1 = Delta1 / 180 * Math.PI;\n    Delta2 = Delta2 / 180 * Math.PI;\n    Alpha1 = Alpha1 / 12 * Math.PI;\n    Alpha2 = Alpha2 / 12 * Math.PI;\n    var x = Math.cos(Delta1) * Math.sin(Delta2) - Math.sin(Delta1) * Math.cos(Delta2) * Math.cos(Alpha2 - Alpha1);\n    var y = Math.cos(Delta2) * Math.sin(Alpha2 - Alpha1);\n    var z = Math.sin(Delta1) * Math.sin(Delta2) + Math.cos(Delta1) * Math.cos(Delta2) * Math.cos(Alpha2 - Alpha1);\n    var vvalue = Math.atan2(Math.sqrt(x * x + y * y), z);\n    vvalue = vvalue / Math.PI * 180;\n    if (vvalue < 0) {\n        vvalue += 180;\n    }\n    return vvalue;\n};\n\nAnnotation.colorToUint = function (col) {\n    return (col.a) << 24 | (col.r << 16) | (col.g) << 8 | col.b;\n};\n\nAnnotation.colorToUintAlpha = function (col, opacity) {\n    return opacity << 24 | col.r << 16 | col.g << 8 | col.b;\n};\n\nvar Annotation$ = {\n    draw: function (renderContext) { },\n\n    get_opacity: function () {\n        return this._opacity;\n    },\n\n    set_opacity: function (value) {\n        Annotation.batchDirty = true;\n        this._opacity = value;\n        return value;\n    },\n\n    get_id: function () {\n        return this._id;\n    },\n\n    set_id: function (value) {\n        this._id = value;\n        return value;\n    },\n\n    get_tag: function () {\n        return this._tag;\n    },\n\n    set_tag: function (value) {\n        this._tag = value;\n        return value;\n    },\n\n    get_label: function () {\n        return this._label;\n    },\n\n    set_label: function (value) {\n        this._label = value;\n        return value;\n    },\n\n    get_showHoverLabel: function () {\n        return this._showHoverLabel;\n    },\n\n    set_showHoverLabel: function (value) {\n        this._showHoverLabel = value;\n        return value;\n    },\n\n    hitTest: function (renderContext, RA, dec, x, y) {\n        return false;\n    },\n\n    get_center: function () {\n        return this.center;\n    },\n\n    set_center: function (value) {\n        this.center = value;\n        return value;\n    }\n};\n\nregisterType(\"Annotation\", [Annotation, Annotation$, null]);\n\n\n// wwtlib.Circle\n\nexport function Circle() {\n    this._fill$1 = false;\n    this._skyRelative$1 = false;\n    this._strokeWidth$1 = 1;\n    this._radius$1 = 10;\n    this._lineColor$1 = Colors.get_white();\n    this._fillColor$1 = Colors.get_white();\n    this._ra$1 = 0;\n    this._dec$1 = 0;\n    Annotation.call(this);\n}\n\nvar Circle$ = {\n    get_fill: function () {\n        return this._fill$1;\n    },\n\n    set_fill: function (value) {\n        Annotation.batchDirty = true;\n        this._fill$1 = value;\n        return value;\n    },\n\n    get_skyRelative: function () {\n        return this._skyRelative$1;\n    },\n\n    set_skyRelative: function (value) {\n        Annotation.batchDirty = true;\n        this._skyRelative$1 = value;\n        return value;\n    },\n\n    get_lineWidth: function () {\n        return this._strokeWidth$1;\n    },\n\n    set_lineWidth: function (value) {\n        Annotation.batchDirty = true;\n        this._strokeWidth$1 = value;\n        return value;\n    },\n\n    get_radius: function () {\n        return this._radius$1;\n    },\n\n    set_radius: function (value) {\n        Annotation.batchDirty = true;\n        this._radius$1 = value;\n        return value;\n    },\n\n    get_lineColor: function () {\n        return this._lineColor$1.toString();\n    },\n\n    set_lineColor: function (value) {\n        Annotation.batchDirty = true;\n        this._lineColor$1 = Color.load(value);\n        return value;\n    },\n\n    get_fillColor: function () {\n        return this._fillColor$1.toString();\n    },\n\n    set_fillColor: function (value) {\n        Annotation.batchDirty = true;\n        this._fillColor$1 = Color.fromName(value);\n        return value;\n    },\n\n    setCenter: function (ra, dec) {\n        Annotation.batchDirty = true;\n        this._ra$1 = ra / 15;\n        this._dec$1 = dec;\n        this.center = Coordinates.raDecTo3d(this._ra$1, this._dec$1);\n    },\n\n    draw: function (renderContext) {\n        var onScreen = true;\n        var rad = this._radius$1;\n        if (this._skyRelative$1) {\n            rad /= renderContext.get_fovScale() / 3600;\n        }\n        var screenSpacePnt = renderContext.WVP.transform(this.center);\n        if (screenSpacePnt.z < 0) {\n            onScreen = false;\n        }\n        if (Vector3d.dot(renderContext.get_viewPoint(), this.center) < 0.55) {\n            onScreen = false;\n        }\n        if (renderContext.gl != null) {\n            if (Annotation.batchDirty || this.annotationDirty) {\n                var up = Vector3d.create(0, 1, 0);\n                var xNormal = Vector3d.cross(this.center, up);\n                var yNormal = Vector3d.cross(this.center, xNormal);\n                var r = this._radius$1 / 44;\n                var segments = 72;\n                var radiansPerSegment = Math.PI * 2 / segments;\n                var vertexList = [];\n                for (var j = 0; j <= segments; j++) {\n                    var x = Math.cos(j * radiansPerSegment) * r;\n                    var y = Math.sin(j * radiansPerSegment) * r;\n                    vertexList.push(Vector3d.create(this.center.x + x * xNormal.x + y * yNormal.x, this.center.y + x * xNormal.y + y * yNormal.y, this.center.z + x * xNormal.z + y * yNormal.z));\n                }\n                if (this._strokeWidth$1 > 0 && vertexList.length > 1) {\n                    var lineColorWithOpacity = this._lineColor$1._clone();\n                    lineColorWithOpacity.a = Math.round(lineColorWithOpacity.a * this.get_opacity());\n                    for (var i = 0; i < (vertexList.length - 1); i++) {\n                        Annotation.lineList.addLine(vertexList[i], vertexList[i + 1], lineColorWithOpacity, new Dates(0, 1));\n                    }\n                }\n                if (this._fill$1) {\n                    var fillColorWithOpacity = this._fillColor$1._clone();\n                    fillColorWithOpacity.a = Math.round(fillColorWithOpacity.a * this.get_opacity());\n                    var pos = Vector3d.create(this.center.x, this.center.y, this.center.z);\n                    vertexList.splice(0, 0, pos);\n                    Annotation.triangleFanPointList.addShape(vertexList, fillColorWithOpacity, new Dates(0, 1));\n                }\n                this.annotationDirty = false;\n            }\n        } else {\n            if (onScreen) {\n                var ctx = renderContext.device;\n                ctx.save();\n                ctx.globalAlpha = this.get_opacity();\n                ctx.beginPath();\n                ctx.arc(screenSpacePnt.x, screenSpacePnt.y, rad, 0, Math.PI * 2, true);\n                ctx.lineWidth = this._strokeWidth$1;\n                ctx.fillStyle = this._fillColor$1.toString();\n                if (this._fill$1) {\n                    ctx.fill();\n                }\n                ctx.globalAlpha = 1;\n                ctx.strokeStyle = this._lineColor$1.toString();\n                ctx.stroke();\n                ctx.restore();\n            }\n        }\n    },\n\n    hitTest: function (renderContext, RA, dec, x, y) {\n        if (ss.emptyString(this.get_id())) {\n            return false;\n        }\n        var rad = this._radius$1;\n        if (!this._skyRelative$1) {\n            rad *= renderContext.get_fovScale() / 3600;\n        }\n        return Annotation.separation(RA, dec, this._ra$1, this._dec$1) < rad;\n    }\n};\n\nregisterType(\"Circle\", [Circle, Circle$, Annotation]);\n\n\n// wwtlib.Poly\n\nexport function Poly() {\n    this._points$1 = [];\n    this._fill$1 = false;\n    this._strokeWidth$1 = 1;\n    this._lineColor$1 = Colors.get_white();\n    this._fillColor$1 = Colors.get_white();\n    Annotation.call(this);\n}\n\nvar Poly$ = {\n    addPoint: function (x, y) {\n        Annotation.batchDirty = true;\n        this._points$1.push(Coordinates.raDecTo3d(x / 15, y));\n    },\n\n    get_fill: function () {\n        return this._fill$1;\n    },\n\n    set_fill: function (value) {\n        Annotation.batchDirty = true;\n        this._fill$1 = value;\n        return value;\n    },\n\n    get_lineWidth: function () {\n        return this._strokeWidth$1;\n    },\n\n    set_lineWidth: function (value) {\n        Annotation.batchDirty = true;\n        this._strokeWidth$1 = value;\n        return value;\n    },\n\n    get_lineColor: function () {\n        return this._lineColor$1.toString();\n    },\n\n    set_lineColor: function (value) {\n        Annotation.batchDirty = true;\n        this._lineColor$1 = Color.fromName(value);\n        return value;\n    },\n\n    get_fillColor: function () {\n        return this._fillColor$1.toString();\n    },\n\n    set_fillColor: function (value) {\n        Annotation.batchDirty = true;\n        this._fillColor$1 = Color.fromName(value);\n        return value;\n    },\n\n    draw: function (renderContext) {\n        if (renderContext.gl != null) {\n            if (Annotation.batchDirty || this.annotationDirty) {\n                //todo can we save this work for later?\n                var vertexList = this._points$1;\n\n                if (this._strokeWidth$1 > 0 && this._points$1.length > 1) {\n                    var lineColorWithOpacity = this._lineColor$1._clone();\n                    lineColorWithOpacity.a = Math.round(lineColorWithOpacity.a * this.get_opacity());\n                    for (var i = 0; i < (this._points$1.length - 1); i++) {\n                        Annotation.lineList.addLine(vertexList[i], vertexList[i + 1], lineColorWithOpacity, new Dates(0, 1));\n                    }\n                    Annotation.lineList.addLine(vertexList[this._points$1.length - 1], vertexList[0], lineColorWithOpacity, new Dates(0, 1));\n                }\n                if (this._fill$1) {\n                    var fillColorWithOpacity = this._fillColor$1._clone();\n                    fillColorWithOpacity.a = Math.round(fillColorWithOpacity.a * this.get_opacity());\n                    var indexes = Tessellator.tesselateSimplePoly(vertexList);\n                    for (var i = 0; i < indexes.length; i += 3) {\n                        Annotation.triangleList.addSubdividedTriangles(vertexList[indexes[i]], vertexList[indexes[i + 1]], vertexList[indexes[i + 2]], fillColorWithOpacity, new Dates(0, 1), 2);\n                    }\n                }\n                this.annotationDirty = false;\n            }\n        } else {\n            var ctx = renderContext.device;\n            ctx.save();\n            ctx.globalAlpha = this.get_opacity();\n            ctx.beginPath();\n            var first = true;\n            var $enum1 = ss.enumerate(this._points$1);\n            while ($enum1.moveNext()) {\n                var pnt = $enum1.current;\n                var screenSpacePnt = renderContext.WVP.transform(pnt);\n                if (screenSpacePnt.z < 0) {\n                    ctx.restore();\n                    return;\n                }\n                if (Vector3d.dot(renderContext.get_viewPoint(), pnt) < 0.75) {\n                    ctx.restore();\n                    return;\n                }\n                if (first) {\n                    first = false;\n                    ctx.moveTo(screenSpacePnt.x, screenSpacePnt.y);\n                }\n                else {\n                    ctx.lineTo(screenSpacePnt.x, screenSpacePnt.y);\n                }\n            }\n            ctx.closePath();\n            ctx.lineWidth = this._strokeWidth$1;\n            if (this._fill$1) {\n                ctx.fillStyle = this._fillColor$1.toString();\n                ctx.fill();\n            }\n            ctx.strokeStyle = this._lineColor$1.toString();\n            ctx.globalAlpha = 1;\n            ctx.stroke();\n            ctx.restore();\n        }\n    }\n};\n\nregisterType(\"Poly\", [Poly, Poly$, Annotation]);\n\n\n// wwtlib.PolyLine\n\nexport function PolyLine() {\n    this._points$1 = [];\n    this._strokeWidth$1 = 1;\n    this._lineColor$1 = Colors.get_white();\n    Annotation.call(this);\n}\n\nvar PolyLine$ = {\n    addPoint: function (x, y) {\n        Annotation.batchDirty = true;\n        this._points$1.push(Coordinates.raDecTo3d(x / 15, y));\n    },\n\n    get_lineWidth: function () {\n        return this._strokeWidth$1;\n    },\n\n    set_lineWidth: function (value) {\n        Annotation.batchDirty = true;\n        this._strokeWidth$1 = value;\n        return value;\n    },\n\n    get_lineColor: function () {\n        return this._lineColor$1.toString();\n    },\n\n    set_lineColor: function (value) {\n        Annotation.batchDirty = true;\n        this._lineColor$1 = Color.fromName(value);\n        return value;\n    },\n\n    draw: function (renderContext) {\n        if (renderContext.gl != null) {\n            if (Annotation.batchDirty || this.annotationDirty) {\n                //todo can we save this work for later?\n                var vertexList = this._points$1;\n                if (this._strokeWidth$1 > 0) {\n                    var lineColorWithOpacity = this._lineColor$1._clone();\n                    lineColorWithOpacity.a = Math.round(lineColorWithOpacity.a * this.get_opacity());\n                    for (var i = 0; i < (this._points$1.length - 1); i++) {\n                        Annotation.lineList.addLine(vertexList[i], vertexList[i + 1], lineColorWithOpacity, new Dates(0, 1));\n                    }\n                }\n                this.annotationDirty = false;\n            }\n        } else {\n            var ctx = renderContext.device;\n            ctx.save();\n            ctx.globalAlpha = this.get_opacity();\n            var first = true;\n            var $enum1 = ss.enumerate(this._points$1);\n            while ($enum1.moveNext()) {\n                var pnt = $enum1.current;\n                var screenSpacePnt = renderContext.WVP.transform(pnt);\n                if (screenSpacePnt.z < 0) {\n                    ctx.restore();\n                    return;\n                }\n                if (Vector3d.dot(renderContext.get_viewPoint(), pnt) < 0.75) {\n                    ctx.restore();\n                    return;\n                }\n                if (first) {\n                    first = false;\n                    ctx.beginPath();\n                    ctx.moveTo(screenSpacePnt.x, screenSpacePnt.y);\n                }\n                else {\n                    ctx.lineTo(screenSpacePnt.x, screenSpacePnt.y);\n                }\n            }\n            ctx.lineWidth = this._strokeWidth$1;\n            ctx.strokeStyle = this._lineColor$1.toString();\n            ctx.stroke();\n            ctx.restore();\n        }\n    }\n};\n\nregisterType(\"PolyLine\", [PolyLine, PolyLine$, Annotation]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Some miscellaneous types relating to astronomy calculations.\n\nimport { registerType } from \"./typesystem.js\";\nimport { ss } from \"./ss.js\";\nimport { Util } from \"./util.js\";\nimport { CT } from \"./astrocalc/coordinate_transformation.js\";\nimport { DT } from \"./astrocalc/date.js\";\nimport { CAANutation } from \"./astrocalc/nutation.js\";\nimport { CAAParallax } from \"./astrocalc/parallax.js\";\nimport { CAAPhysicalJupiter, CAAPhysicalJupiterDetails } from \"./astrocalc/physical_jupiter.js\";\nimport { CAARiseTransitSet } from \"./astrocalc/rise_transit_set.js\";\nimport { ELL, EPD } from \"./astrocalc/elliptical.js\";\nimport { GM, GMDS } from \"./astrocalc/galilean_moons.js\";\nimport { CAAMoon } from \"./astrocalc/moon.js\";\n\n\n// Global state\n\nvar galDetails = new GMDS();\nvar jupDetails = new EPD();\nvar jupPhisical = new CAAPhysicalJupiterDetails();\nvar jDateLast = 0;\n\n\n// wwtlib.AstroRaDec\n\nexport function AstroRaDec(ra, dec, dist, shadow, eclipsed) {\n    this.RA = 0;\n    this.dec = 0;\n    this.distance = 0;\n    this.shadow = false;\n    this.eclipsed = false;\n    this.RA = ra;\n    this.dec = dec;\n    this.distance = dist;\n    this.shadow = shadow;\n    this.eclipsed = eclipsed;\n}\n\nvar AstroRaDec$ = {};\n\nregisterType(\"AstroRaDec\", [AstroRaDec, AstroRaDec$, null]);\n\n\n// wwtlib.RiseSetDetails\n\nexport function RiseSetDetails(bValid, Rise, Transit, Set, neverRises) {\n    this.bValid = false;\n    this.rise = 0;\n    this.transit = 0;\n    this.set = 0;\n    this.bNeverRises = false;\n    this.bValid = bValid;\n    this.rise = Rise;\n    this.transit = Transit;\n    this.set = Set;\n    this.bNeverRises = neverRises;\n}\n\nvar RiseSetDetails$ = {};\n\nregisterType(\"RiseSetDetails\", [RiseSetDetails, RiseSetDetails$, null]);\n\n\n// wwtlib.AstroCalc\n\nexport function AstroCalc() { }\n\nAstroCalc.getPlanet = function (jDate, planetIn, locLat, locLong, locHeight) {\n    var planet = planetIn;\n    locLong = -locLong;\n\n    if (planet < 9) {\n        var Details = ELL.calculate(jDate, planetIn);\n        var corrected = CAAParallax.equatorial2Topocentric(Details.apparentGeocentricRA, Details.apparentGeocentricDeclination, Details.apparentGeocentricDistance, locLong, locLat, locHeight, jDate);\n        return new AstroRaDec(corrected.x, corrected.y, Details.apparentGeocentricDistance, false, false);\n    }\n    else if (planet === 9) {\n        var lat = CAAMoon.eclipticLatitude(jDate);\n        var lng = CAAMoon.eclipticLongitude(jDate);\n        var dis = CAAMoon.radiusVector(jDate) / 149598000;\n        var epsilon = CAANutation.trueObliquityOfEcliptic(jDate);\n        var d = CT.ec2Eq(lng, lat, epsilon);\n        var corrected = CAAParallax.equatorial2Topocentric(d.x, d.y, dis, locLong, locLat, locHeight, jDate);\n        return new AstroRaDec(corrected.x, corrected.y, dis, false, false);\n    }\n    else {\n        if (jDate !== jDateLast) {\n            jupDetails = ELL.calculate(jDate, 4);\n            jupPhisical = CAAPhysicalJupiter.calculate(jDate);\n            var corrected = CAAParallax.equatorial2Topocentric(jupDetails.apparentGeocentricRA, jupDetails.apparentGeocentricDeclination, jupDetails.apparentGeocentricDistance, locLong, locLat, locHeight, jDate);\n            jupDetails.apparentGeocentricRA = corrected.x;\n            jupDetails.apparentGeocentricDeclination = corrected.y;\n            galDetails = GM.calculate(jDate);\n            jDateLast = jDate;\n        }\n        var jupiterDiameter = 0.000954501;\n        var scale = Math.atan(0.5 * (jupiterDiameter / jupDetails.apparentGeocentricDistance)) / 3.1415927 * 180;\n        var raScale = (scale / Math.cos(jupDetails.apparentGeocentricDeclination / 180 * 3.1415927)) / 15;\n        var xMoon = 0;\n        var yMoon = 0;\n        var zMoon = 0;\n        var shadow = false;\n        var eclipsed = false;\n        switch (planet) {\n            case 10: // IO\n                xMoon = galDetails.satellite1.apparentRectangularCoordinates.x;\n                yMoon = galDetails.satellite1.apparentRectangularCoordinates.y;\n                zMoon = galDetails.satellite1.apparentRectangularCoordinates.z;\n                eclipsed = galDetails.satellite1.bInEclipse;\n                shadow = galDetails.satellite1.bInShadowTransit;\n                break;\n            case 11: // Europa\n                xMoon = galDetails.satellite2.apparentRectangularCoordinates.x;\n                yMoon = galDetails.satellite2.apparentRectangularCoordinates.y;\n                zMoon = galDetails.satellite2.apparentRectangularCoordinates.z;\n                eclipsed = galDetails.satellite2.bInEclipse;\n                shadow = galDetails.satellite2.bInShadowTransit;\n                break;\n            case 12: // Ganymede\n                xMoon = galDetails.satellite3.apparentRectangularCoordinates.x;\n                yMoon = galDetails.satellite3.apparentRectangularCoordinates.y;\n                zMoon = galDetails.satellite3.apparentRectangularCoordinates.z;\n                eclipsed = galDetails.satellite3.bInEclipse;\n                shadow = galDetails.satellite3.bInShadowTransit;\n                break;\n            case 13: // Callisto\n                xMoon = galDetails.satellite4.apparentRectangularCoordinates.x;\n                yMoon = galDetails.satellite4.apparentRectangularCoordinates.y;\n                zMoon = galDetails.satellite4.apparentRectangularCoordinates.z;\n                eclipsed = galDetails.satellite4.bInEclipse;\n                shadow = galDetails.satellite4.bInShadowTransit;\n                break;\n            case 14: // Io shadow\n                xMoon = galDetails.satellite1.apparentShadowRectangularCoordinates.x;\n                yMoon = galDetails.satellite1.apparentShadowRectangularCoordinates.y;\n                zMoon = galDetails.satellite1.apparentShadowRectangularCoordinates.z * 0.9;\n                shadow = galDetails.satellite1.bInShadowTransit;\n                break;\n            case 15: // Europa shadow\n                xMoon = galDetails.satellite2.apparentShadowRectangularCoordinates.x;\n                yMoon = galDetails.satellite2.apparentShadowRectangularCoordinates.y;\n                zMoon = galDetails.satellite2.apparentShadowRectangularCoordinates.z * 0.9;\n                shadow = galDetails.satellite2.bInShadowTransit;\n                break;\n            case 16: // Ganymede shadow\n                xMoon = galDetails.satellite3.apparentShadowRectangularCoordinates.x;\n                yMoon = galDetails.satellite3.apparentShadowRectangularCoordinates.y;\n                zMoon = galDetails.satellite3.apparentShadowRectangularCoordinates.z * 0.9;\n                shadow = galDetails.satellite3.bInShadowTransit;\n                break;\n            case 17: // Callisto shadow\n                xMoon = galDetails.satellite4.apparentShadowRectangularCoordinates.x;\n                yMoon = galDetails.satellite4.apparentShadowRectangularCoordinates.y;\n                zMoon = galDetails.satellite4.apparentShadowRectangularCoordinates.z * 0.9;\n                shadow = galDetails.satellite4.bInShadowTransit;\n                break;\n        }\n        var xTemp;\n        var yTemp;\n        var radians = jupPhisical.p / 180 * 3.1415927;\n        xTemp = xMoon * Math.cos(radians) - yMoon * Math.sin(radians);\n        yTemp = xMoon * Math.sin(radians) + yMoon * Math.cos(radians);\n        xMoon = xTemp;\n        yMoon = yTemp;\n        return new AstroRaDec(jupDetails.apparentGeocentricRA - (xMoon * raScale), jupDetails.apparentGeocentricDeclination + yMoon * scale, jupDetails.apparentGeocentricDistance + (zMoon * jupiterDiameter / 2), shadow, eclipsed);\n    }\n};\n\nAstroCalc.getJulianDay = function (year, month, day) {\n    return DT.dateToJD(ss.truncate(year), ss.truncate(month), day, true);\n};\n\nAstroCalc.eclipticToJ2000 = function (l, b, jNow) {\n    var radec = CT.ec2Eq(l, b, CAANutation.trueObliquityOfEcliptic(jNow));\n    return new AstroRaDec(radec.x, radec.y, 0, false, false);\n};\n\nAstroCalc.galacticToJ2000 = function (l, b) {\n    var radec = CT.g2Eq(l, b);\n    return new AstroRaDec(radec.x, radec.y, 0, false, false);\n};\n\nAstroCalc.j2000ToGalactic = function (ra, dec) {\n    var galactic = CT.eq2G(ra, dec);\n    return new AstroRaDec(galactic.x, galactic.y, 0, false, false);\n};\n\nAstroCalc.getRiseTrinsitSet = function (jd, lat, lng, ra1, dec1, ra2, dec2, ra3, dec3, type) {\n    var alt = -0.5667;\n\n    switch (type) {\n        case 0: // Planet or star\n            alt = -0.5667;\n            break;\n        case 1: // Sun\n            alt = -0.8333;\n            break;\n        case 2:\n            alt = 0.125;\n            break;\n    }\n    var RiseTransitSetTime = CAARiseTransitSet.rise(jd, ra1, dec1, ra2, dec2, ra3, dec3, lng, lat, alt);\n    var neverRises = false;\n    if (!RiseTransitSetTime.bValid) {\n        neverRises = Util.sign(lat) !== Util.sign(dec2);\n    }\n    return new RiseSetDetails(RiseTransitSetTime.bValid, RiseTransitSetTime.rise, RiseTransitSetTime.transit, RiseTransitSetTime.set, neverRises);\n};\n\nvar AstroCalc$ = {};\n\nregisterType(\"AstroCalc\", [AstroCalc, AstroCalc$, null]);\n","// Originally `AAABERRATION.CPP`\n// \"Purpose: Implementation for the algorithms for Aberration\"\n// Last update of original: PJN / 21-04-2005\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { C3D, COR, CT } from \"./coordinate_transformation.js\";\nimport { CAASun } from \"./sun.js\";\n\n\n// ACFT\n\nexport function ACFT(L2, L3, L4, L5, L6, L7, L8, Ldash, D, Mdash, F, xsin, xsint, xcos, xcost, ysin, ysint, ycos, ycost, zsin, zsint, zcos, zcost) {\n    this.l2 = 0;\n    this.l3 = 0;\n    this.l4 = 0;\n    this.l5 = 0;\n    this.l6 = 0;\n    this.l7 = 0;\n    this.l8 = 0;\n    this.ldash = 0;\n    this.d = 0;\n    this.mdash = 0;\n    this.f = 0;\n    this.xsin = 0;\n    this.xsint = 0;\n    this.xcos = 0;\n    this.xcost = 0;\n    this.ysin = 0;\n    this.ysint = 0;\n    this.ycos = 0;\n    this.ycost = 0;\n    this.zsin = 0;\n    this.zsint = 0;\n    this.zcos = 0;\n    this.zcost = 0;\n    this.l2 = L2;\n    this.l3 = L3;\n    this.l4 = L4;\n    this.l5 = L5;\n    this.l6 = L6;\n    this.l7 = L7;\n    this.l8 = L8;\n    this.ldash = Ldash;\n    this.d = D;\n    this.mdash = Mdash;\n    this.f = F;\n    this.xsin = xsin;\n    this.xsint = xsint;\n    this.xcos = xcos;\n    this.xcost = xcost;\n    this.ysin = ysin;\n    this.ysint = ysint;\n    this.ycos = ycos;\n    this.ycost = ycost;\n    this.zsin = zsin;\n    this.zsint = zsint;\n    this.zcos = zcos;\n    this.zcost = zcost;\n}\n\nvar ACFT$ = {};\n\nregisterType(\"ACFT\", [ACFT, ACFT$, null]);\n\n\n// Coefficients\n\nconst g_ACft = [new ACFT(0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1719914, -2, -25, 0, 25, -13, 1578089, 156, 10, 32, 684185, -358), new ACFT(0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6434, 141, 28007, -107, 25697, -95, -5904, -130, 11141, -48, -2559, -55), new ACFT(0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 715, 0, 0, 0, 6, 0, -657, 0, -15, 0, -282, 0), new ACFT(0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 715, 0, 0, 0, 0, 0, -656, 0, 0, 0, -285, 0), new ACFT(0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 486, -5, -236, -4, -216, -4, -446, 5, -94, 0, -193, 0), new ACFT(0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 159, 0, 0, 0, 2, 0, -147, 0, -6, 0, -61, 0), new ACFT(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 26, 0, 0, 0, -59, 0), new ACFT(0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 39, 0, 0, 0, 0, 0, -36, 0, 0, 0, -16, 0), new ACFT(0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 33, 0, -10, 0, -9, 0, -30, 0, -5, 0, -13, 0), new ACFT(0, 2, 0, -1, 0, 0, 0, 0, 0, 0, 0, 31, 0, 1, 0, 1, 0, -28, 0, 0, 0, -12, 0), new ACFT(0, 3, -8, 3, 0, 0, 0, 0, 0, 0, 0, 8, 0, -28, 0, 25, 0, 8, 0, 11, 0, 3, 0), new ACFT(0, 5, -8, 3, 0, 0, 0, 0, 0, 0, 0, 8, 0, -28, 0, -25, 0, -8, 0, -11, 0, -3, 0), new ACFT(2, -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 0, 0, 0, 0, 0, -19, 0, 0, 0, -8, 0), new ACFT(1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -19, 0, 0, 0, 0, 0, 17, 0, 0, 0, 8, 0), new ACFT(0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 17, 0, 0, 0, 0, 0, -16, 0, 0, 0, -7, 0), new ACFT(0, 1, 0, -2, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 15, 0, 1, 0, 7, 0), new ACFT(0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 16, 0, 0, 0, 1, 0, -15, 0, -3, 0, -6, 0), new ACFT(0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 11, 0, -1, 0, -1, 0, -10, 0, -1, 0, -5, 0), new ACFT(2, -2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -11, 0, -10, 0, 0, 0, -4, 0, 0, 0), new ACFT(0, 1, 0, -1, 0, 0, 0, 0, 0, 0, 0, -11, 0, -2, 0, -2, 0, 9, 0, -1, 0, 4, 0), new ACFT(0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, -7, 0, -8, 0, -8, 0, 6, 0, -3, 0, 3, 0), new ACFT(0, 3, 0, -2, 0, 0, 0, 0, 0, 0, 0, -10, 0, 0, 0, 0, 0, 9, 0, 0, 0, 4, 0), new ACFT(1, -2, 0, 0, 0, 0, 0, 0, 0, 0, 0, -9, 0, 0, 0, 0, 0, -9, 0, 0, 0, -4, 0), new ACFT(2, -3, 0, 0, 0, 0, 0, 0, 0, 0, 0, -9, 0, 0, 0, 0, 0, -8, 0, 0, 0, -4, 0), new ACFT(0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, -9, 0, -8, 0, 0, 0, -3, 0, 0, 0), new ACFT(2, -4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -9, 0, 8, 0, 0, 0, 3, 0, 0, 0), new ACFT(0, 3, -2, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, -8, 0, 0, 0, -3, 0), new ACFT(0, 0, 0, 0, 0, 0, 0, 1, 2, -1, 0, 8, 0, 0, 0, 0, 0, -7, 0, 0, 0, -3, 0), new ACFT(8, -12, 0, 0, 0, 0, 0, 0, 0, 0, 0, -4, 0, -7, 0, -6, 0, 4, 0, -3, 0, 2, 0), new ACFT(8, -14, 0, 0, 0, 0, 0, 0, 0, 0, 0, -4, 0, -7, 0, 6, 0, -4, 0, 3, 0, -2, 0), new ACFT(0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, -6, 0, -5, 0, -4, 0, 5, 0, -2, 0, 2, 0), new ACFT(3, -4, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, -1, 0, -2, 0, -7, 0, 1, 0, -4, 0), new ACFT(0, 2, 0, -2, 0, 0, 0, 0, 0, 0, 0, 4, 0, -6, 0, -5, 0, -4, 0, -2, 0, -2, 0), new ACFT(3, -3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -7, 0, -6, 0, 0, 0, -3, 0, 0, 0), new ACFT(0, 2, -2, 0, 0, 0, 0, 0, 0, 0, 0, 5, 0, -5, 0, -4, 0, -5, 0, -2, 0, -2, 0), new ACFT(0, 0, 0, 0, 0, 0, 0, 1, -2, 0, 0, 5, 0, 0, 0, 0, 0, -5, 0, 0, 0, -2, 0)];\n\n\n// ABR - was CAAAberration\n\nexport function ABR() { }\n\nABR.earthVelocity = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var L2 = 3.1761467 + 1021.3285546 * T;\n    var L3 = 1.7534703 + 628.3075849 * T;\n    var L4 = 6.2034809 + 334.0612431 * T;\n    var L5 = 0.5995465 + 52.9690965 * T;\n    var L6 = 0.8740168 + 21.3299095 * T;\n    var L7 = 5.4812939 + 7.4781599 * T;\n    var L8 = 5.3118863 + 3.8133036 * T;\n    var Ldash = 3.8103444 + 8399.6847337 * T;\n    var D = 5.1984667 + 7771.3771486 * T;\n    var Mdash = 2.3555559 + 8328.6914289 * T;\n    var F = 1.6279052 + 8433.4661601 * T;\n    var velocity = new C3D();\n    var nAberrationCoefficients = g_ACft.length;\n    for (var i = 0; i < nAberrationCoefficients; i++) {\n        var Argument = g_ACft[i].l2 * L2 + g_ACft[i].l3 * L3 + g_ACft[i].l4 * L4 + g_ACft[i].l5 * L5 + g_ACft[i].l6 * L6 + g_ACft[i].l7 * L7 + g_ACft[i].l8 * L8 + g_ACft[i].ldash * Ldash + g_ACft[i].d * D + g_ACft[i].mdash * Mdash + g_ACft[i].f * F;\n        velocity.x += (g_ACft[i].xsin + g_ACft[i].xsint * T) * Math.sin(Argument);\n        velocity.x += (g_ACft[i].xcos + g_ACft[i].xcost * T) * Math.cos(Argument);\n        velocity.y += (g_ACft[i].ysin + g_ACft[i].ysint * T) * Math.sin(Argument);\n        velocity.y += (g_ACft[i].ycos + g_ACft[i].ycost * T) * Math.cos(Argument);\n        velocity.z += (g_ACft[i].zsin + g_ACft[i].zsint * T) * Math.sin(Argument);\n        velocity.z += (g_ACft[i].zcos + g_ACft[i].zcost * T) * Math.cos(Argument);\n    }\n    return velocity;\n};\n\nABR.eclipticAberration = function (Lambda, Beta, JD) {\n    var aberration = new COR();\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var e = 0.016708634 - 4.2037E-05 * T - 1.267E-07 * Tsquared;\n    var pi = 102.93735 + 1.71946 * T + 0.00046 * Tsquared;\n    var k = 20.49552;\n    var SunLongitude = CAASun.geometricEclipticLongitude(JD);\n    pi = CT.d2R(pi);\n    Lambda = CT.d2R(Lambda);\n    Beta = CT.d2R(Beta);\n    SunLongitude = CT.d2R(SunLongitude);\n    aberration.x = (-k * Math.cos(SunLongitude - Lambda) + e * k * Math.cos(pi - Lambda)) / Math.cos(Beta) / 3600;\n    aberration.y = -k * Math.sin(Beta) * (Math.sin(SunLongitude - Lambda) - e * Math.sin(pi - Lambda)) / 3600;\n    return aberration;\n};\n\nABR.equatorialAberration = function (Alpha, Delta, JD) {\n    Alpha = CT.d2R(Alpha * 15);\n    Delta = CT.d2R(Delta);\n    var cosAlpha = Math.cos(Alpha);\n    var sinAlpha = Math.sin(Alpha);\n    var cosDelta = Math.cos(Delta);\n    var sinDelta = Math.sin(Delta);\n    var velocity = ABR.earthVelocity(JD);\n    var aberration = new COR();\n    aberration.x = CT.r2H((velocity.y * cosAlpha - velocity.x * sinAlpha) / (17314463350 * cosDelta));\n    aberration.y = CT.r2D(-(((velocity.x * cosAlpha + velocity.y * sinAlpha) * sinDelta - velocity.z * cosDelta) / 17314463350));\n    return aberration;\n};\n\nvar ABR$ = {};\n\nregisterType(\"ABR\", [ABR, ABR$, null]);\n","// Originally `AAANGULARSEPARATION.CPP`\n// \"Purpose: Implementation for the algorithms which obtain various separation distances between celestial objects\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// ASEP - was CAAAngularSeparation\n\nexport function ASEP() { }\n\nASEP.separation = function (Alpha1, Delta1, Alpha2, Delta2) {\n    Delta1 = CT.d2R(Delta1);\n    Delta2 = CT.d2R(Delta2);\n    Alpha1 = CT.h2R(Alpha1);\n    Alpha2 = CT.h2R(Alpha2);\n    var x = Math.cos(Delta1) * Math.sin(Delta2) - Math.sin(Delta1) * Math.cos(Delta2) * Math.cos(Alpha2 - Alpha1);\n    var y = Math.cos(Delta2) * Math.sin(Alpha2 - Alpha1);\n    var z = Math.sin(Delta1) * Math.sin(Delta2) + Math.cos(Delta1) * Math.cos(Delta2) * Math.cos(Alpha2 - Alpha1);\n    var vvalue = Math.atan2(Math.sqrt(x * x + y * y), z);\n    vvalue = CT.r2D(vvalue);\n    if (vvalue < 0) {\n        vvalue += 180;\n    }\n    return vvalue;\n};\n\nASEP.positionAngle = function (alpha1, delta1, alpha2, delta2) {\n    var Alpha1;\n    var Delta1;\n    var Alpha2;\n    var Delta2;\n    Delta1 = CT.d2R(delta1);\n    Delta2 = CT.d2R(delta2);\n    Alpha1 = CT.h2R(alpha1);\n    Alpha2 = CT.h2R(alpha2);\n    var DeltaAlpha = Alpha1 - Alpha2;\n    var demoninator = Math.cos(Delta2) * Math.tan(Delta1) - Math.sin(Delta2) * Math.cos(DeltaAlpha);\n    var numerator = Math.sin(DeltaAlpha);\n    var vvalue = Math.atan2(numerator, demoninator);\n    vvalue = CT.r2D(vvalue);\n    return vvalue;\n};\n\nASEP.distanceFromGreatArc = function (Alpha1, Delta1, Alpha2, Delta2, Alpha3, Delta3) {\n    Delta1 = CT.d2R(Delta1);\n    Delta2 = CT.d2R(Delta2);\n    Delta3 = CT.d2R(Delta3);\n    Alpha1 = CT.h2R(Alpha1);\n    Alpha2 = CT.h2R(Alpha2);\n    Alpha3 = CT.h2R(Alpha3);\n    var X1 = Math.cos(Delta1) * Math.cos(Alpha1);\n    var X2 = Math.cos(Delta2) * Math.cos(Alpha2);\n    var Y1 = Math.cos(Delta1) * Math.sin(Alpha1);\n    var Y2 = Math.cos(Delta2) * Math.sin(Alpha2);\n    var Z1 = Math.sin(Delta1);\n    var Z2 = Math.sin(Delta2);\n    var A = Y1 * Z2 - Z1 * Y2;\n    var B = Z1 * X2 - X1 * Z2;\n    var C = X1 * Y2 - Y1 * X2;\n    var m = Math.tan(Alpha3);\n    var n = Math.tan(Delta3) / Math.cos(Alpha3);\n    var vvalue = Math.asin((A + B * m + C * n) / (Math.sqrt(A * A + B * B + C * C) * Math.sqrt(1 + m * m + n * n)));\n    vvalue = CT.r2D(vvalue);\n    if (vvalue < 0) {\n        vvalue = Math.abs(vvalue);\n    }\n    return vvalue;\n};\n\nvar ASEP$ = {};\n\nregisterType(\"ASEP\", [ASEP, ASEP$, null]);\n","// Originally `AACOORDINATETRANSFORMATION.CPP`\n// \"Purpose: Implementation for the algorithms which convert between the various celestial coordinate systems\"\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\n\n\n// COR - was CAA2DCoordinate\n\nexport function COR() {\n    this.x = 0;\n    this.y = 0;\n    this.x = 0;\n    this.y = 0;\n}\n\nCOR.create = function (x, y) {\n    var item = new COR();\n    item.x = x;\n    item.y = y;\n    return item;\n};\n\nvar COR$ = {};\n\nregisterType(\"COR\", [COR, COR$, null]);\n\n\n// C3D - was CAA3DCoordinate\n\nexport function C3D() {\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n}\n\nC3D.create = function (x, y, z) {\n    var item = new C3D();\n    item.x = x;\n    item.y = y;\n    item.z = z;\n    return item;\n};\n\nvar C3D$ = {};\n\nregisterType(\"C3D\", [C3D, C3D$, null]);\n\n\n// CT - was CAACoordinateTransformation\n\nexport function CT() {\n}\n\nCT.eq2Ec = function (Alpha, Delta, Epsilon) {\n    Alpha = CT.h2R(Alpha);\n    Delta = CT.d2R(Delta);\n    Epsilon = CT.d2R(Epsilon);\n    var Ecliptic = new COR();\n    Ecliptic.x = CT.r2D(Math.atan2(Math.sin(Alpha) * Math.cos(Epsilon) + Math.tan(Delta) * Math.sin(Epsilon), Math.cos(Alpha)));\n    if (Ecliptic.x < 0) {\n        Ecliptic.x += 360;\n    }\n    Ecliptic.y = CT.r2D(Math.asin(Math.sin(Delta) * Math.cos(Epsilon) - Math.cos(Delta) * Math.sin(Epsilon) * Math.sin(Alpha)));\n    return Ecliptic;\n};\n\nCT.ec2Eq = function (Lambda, Beta, Epsilon) {\n    Lambda = CT.d2R(Lambda);\n    Beta = CT.d2R(Beta);\n    Epsilon = CT.d2R(Epsilon);\n    var Equatorial = new COR();\n    Equatorial.x = CT.r2H(Math.atan2(Math.sin(Lambda) * Math.cos(Epsilon) - Math.tan(Beta) * Math.sin(Epsilon), Math.cos(Lambda)));\n    if (Equatorial.x < 0) {\n        Equatorial.x += 24;\n    }\n    Equatorial.y = CT.r2D(Math.asin(Math.sin(Beta) * Math.cos(Epsilon) + Math.cos(Beta) * Math.sin(Epsilon) * Math.sin(Lambda)));\n    return Equatorial;\n};\n\nCT.eq2H = function (LocalHourAngle, Delta, Latitude) {\n    LocalHourAngle = CT.h2R(LocalHourAngle);\n    Delta = CT.d2R(Delta);\n    Latitude = CT.d2R(Latitude);\n    var Horizontal = new COR();\n    Horizontal.x = CT.r2D(Math.atan2(Math.sin(LocalHourAngle), Math.cos(LocalHourAngle) * Math.sin(Latitude) - Math.tan(Delta) * Math.cos(Latitude)));\n    if (Horizontal.x < 0) {\n        Horizontal.x += 360;\n    }\n    Horizontal.y = CT.r2D(Math.asin(Math.sin(Latitude) * Math.sin(Delta) + Math.cos(Latitude) * Math.cos(Delta) * Math.cos(LocalHourAngle)));\n    return Horizontal;\n};\n\nCT.h2Eq = function (Azimuth, Altitude, Latitude) {\n    Azimuth = CT.d2R(Azimuth);\n    Altitude = CT.d2R(Altitude);\n    Latitude = CT.d2R(Latitude);\n    var Equatorial = new COR();\n    Equatorial.x = CT.r2H(Math.atan2(Math.sin(Azimuth), Math.cos(Azimuth) * Math.sin(Latitude) + Math.tan(Altitude) * Math.cos(Latitude)));\n    if (Equatorial.x < 0) {\n        Equatorial.x += 24;\n    }\n    Equatorial.y = CT.r2D(Math.asin(Math.sin(Latitude) * Math.sin(Altitude) - Math.cos(Latitude) * Math.cos(Altitude) * Math.cos(Azimuth)));\n    return Equatorial;\n};\n\nCT.eq2G = function (Alpha, Delta) {\n    Alpha = 192.25 - CT.h2D(Alpha);\n    Alpha = CT.d2R(Alpha);\n    Delta = CT.d2R(Delta);\n    var Galactic = new COR();\n    Galactic.x = CT.r2D(Math.atan2(Math.sin(Alpha), Math.cos(Alpha) * Math.sin(CT.d2R(27.4)) - Math.tan(Delta) * Math.cos(CT.d2R(27.4))));\n    Galactic.x = 303 - Galactic.x;\n    if (Galactic.x >= 360) {\n        Galactic.x -= 360;\n    }\n    Galactic.y = CT.r2D(Math.asin(Math.sin(Delta) * Math.sin(CT.d2R(27.4)) + Math.cos(Delta) * Math.cos(CT.d2R(27.4)) * Math.cos(Alpha)));\n    return Galactic;\n};\n\nCT.g2Eq = function (l, b) {\n    l -= 123;\n    l = CT.d2R(l);\n    b = CT.d2R(b);\n    var Equatorial = new COR();\n    Equatorial.x = CT.r2D(Math.atan2(Math.sin(l), Math.cos(l) * Math.sin(CT.d2R(27.4)) - Math.tan(b) * Math.cos(CT.d2R(27.4))));\n    Equatorial.x += 12.25;\n    if (Equatorial.x < 0) {\n        Equatorial.x += 360;\n    }\n    Equatorial.x = CT.d2H(Equatorial.x);\n    Equatorial.y = CT.r2D(Math.asin(Math.sin(b) * Math.sin(CT.d2R(27.4)) + Math.cos(b) * Math.cos(CT.d2R(27.4)) * Math.cos(l)));\n    return Equatorial;\n};\n\nCT.d2R = function (Degrees) {\n    return Degrees * 0.0174532925199433;\n};\n\nCT.r2D = function (Radians) {\n    return Radians * 57.2957795130823;\n};\n\nCT.r2H = function (Radians) {\n    return Radians * 3.81971863420549;\n};\n\nCT.h2R = function (Hours) {\n    return Hours * 0.261799387799149;\n};\n\nCT.h2D = function (Hours) {\n    return Hours * 15;\n};\n\nCT.d2H = function (Degrees) {\n    return Degrees / 15;\n};\n\nCT.PI = function () {\n    return 3.14159265358979;\n};\n\nCT.m360 = function (Degrees) {\n    return Degrees - Math.floor(Degrees / 360) * 360;\n};\n\nCT.m24 = function (HourAngle) {\n    return HourAngle - Math.floor(HourAngle / 24) * 24;\n};\n\nCT.dmS2D = function (Degrees, Minutes, Seconds) {\n    return CT.dmS2Dp(Degrees, Minutes, Seconds, true);\n};\n\nCT.dmS2Dp = function (Degrees, Minutes, Seconds, bPositive) {\n    if (!bPositive) {\n        console.assert(Degrees >= 0);\n        console.assert(Minutes >= 0);\n        console.assert(Seconds >= 0);\n    }\n    if (bPositive) {\n        return Degrees + Minutes / 60 + Seconds / 3600;\n    }\n    else {\n        return -Degrees - Minutes / 60 - Seconds / 3600;\n    }\n};\n\nvar CT$ = {};\n\nregisterType(\"CT\", [CT, CT$, null]);\n","// Originally `AADATE.CPP`\n// \"Purpose: Implementation for the algorithms which convert between the\n// Gregorian and Julian calendars and the Julian Day\"\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\n\n\n// CalD\n\nexport function CalD() {\n    this.year = 0;\n    this.month = 0;\n    this.day = 0;\n    this.year = 0;\n    this.month = 0;\n    this.day = 0;\n}\n\nCalD.create = function (year, month, day) {\n    var item = new CalD();\n    item.year = year;\n    item.month = month;\n    item.day = day;\n    return item;\n};\n\nvar CalD$ = {};\n\nregisterType(\"CalD\", [CalD, CalD$, null]);\n\n\n// DAY_OF_WEEK\n\nexport var DAY_OF_WEEK = {\n    SUNDAY: 0,\n    MONDAY: 1,\n    TUESDAY: 2,\n    WEDNESDAY: 3,\n    THURSDAY: 4,\n    FRIDAY: 5,\n    SATURDAY: 6\n};\n\nregisterType(\"DAY_OF_WEEK\", DAY_OF_WEEK);\n\n\n// DT\n\nexport function DT() {\n    this.m_dblJulian = 0;\n    this.m_bGregorianCalendar = false;\n    this.m_dblJulian = 0;\n    this.m_bGregorianCalendar = false;\n}\n\nDT.create = function (Year, Month, Day, bGregorianCalendar) {\n    var item = new DT();\n    item.set(Year, Month, Day, 0, 0, 0, bGregorianCalendar);\n    return item;\n};\n\nDT.createHMS = function (Year, Month, Day, Hour, Minute, Second, bGregorianCalendar) {\n    var item = new DT();\n    item.set(Year, Month, Day, Hour, Minute, Second, bGregorianCalendar);\n    return item;\n};\n\nDT.createJD = function (JD, bGregorianCalendar) {\n    var item = new DT();\n    item.setJD(JD, bGregorianCalendar);\n    return item;\n};\n\nDT.dateToJD = function (Year, Month, Day, bGregorianCalendar) {\n    var Y = Year;\n    var M = Month;\n    if (M < 3) {\n        Y = Y - 1;\n        M = M + 12;\n    }\n    var A = 0;\n    var B = 0;\n    if (bGregorianCalendar) {\n        A = ss.truncate((Y / 100));\n        B = 2 - A + ss.truncate((A / 4));\n    }\n    return ss.truncate((365.25 * (Y + 4716))) + ss.truncate((30.6001 * (M + 1))) + Day + B - 1524.5;\n};\n\nDT.isLeap = function (Year, bGregorianCalendar) {\n    if (bGregorianCalendar) {\n        if (!(Year % 100)) {\n            return (!(Year % 400)) ? true : false;\n        }\n        else {\n            return (!(Year % 4)) ? true : false;\n        }\n    }\n    else {\n        return (!(Year % 4)) ? true : false;\n    }\n};\n\nDT.afterPapalReform = function (Year, Month, Day) {\n    return ((Year > 1582) || ((Year === 1582) && (Month > 10)) || ((Year === 1582) && (Month === 10) && (Day >= 15)));\n};\n\nDT.afterPapalReformJD = function (JD) {\n    return (JD >= 2299160.5);\n};\n\nDT.dayOfYearJD = function (JD, Year, bGregorianCalendar) {\n    return JD - DT.dateToJD(Year, 1, 1, bGregorianCalendar) + 1;\n};\n\nDT.daysInMonthForMonth = function (Month, bLeap) {\n    console.assert(Month >= 1 && Month <= 12);\n    var MonthLength = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31, 0];\n    if (bLeap) {\n        MonthLength[1]++;\n    }\n    return MonthLength[Month - 1];\n};\n\nDT.INT = function (vvalue) {\n    if (vvalue >= 0) {\n        return ss.truncate(vvalue);\n    }\n    else {\n        return ss.truncate((vvalue - 1));\n    }\n};\n\nvar DT$ = {\n    julian: function () {\n        return this.m_dblJulian;\n    },\n\n    day: function () {\n        var D = this.get();\n        return ss.truncate(D[2]);\n    },\n\n    month: function () {\n        var D = this.get();\n        return ss.truncate(D[1]);\n    },\n\n    year: function () {\n        var D = this.get();\n        return ss.truncate(D[0]);\n    },\n\n    hour: function () {\n        var D = this.get();\n        return ss.truncate(D[3]);\n    },\n\n    minute: function () {\n        var D = this.get();\n        return ss.truncate(D[4]);\n    },\n\n    second: function () {\n        var D = this.get();\n        return ss.truncate(D[5]);\n    },\n\n    set: function (Year, Month, Day, Hour, Minute, Second, bGregorianCalendar) {\n        var dblDay = Day + (Hour / 24) + (Minute / 1440) + (Second / 86400);\n        this.setJD(DT.dateToJD(Year, Month, dblDay, bGregorianCalendar), bGregorianCalendar);\n    },\n\n    setJD: function (JD, bGregorianCalendar) {\n        this.m_dblJulian = JD;\n        this.setInGregorianCalendar(bGregorianCalendar);\n    },\n\n    setInGregorianCalendar: function (bGregorianCalendar) {\n        var bAfterPapalReform = (this.m_dblJulian >= 2299160.5);\n        this.m_bGregorianCalendar = bGregorianCalendar && bAfterPapalReform;\n    },\n\n    get: function () {\n        var Year;\n        var Month;\n        var Day;\n        var Hour;\n        var Minute;\n        var Second;\n        var JD = this.m_dblJulian + 0.5;\n        var tempZ = Math.floor(JD);\n        var F = JD - tempZ;\n        var Z = ss.truncate(tempZ);\n        var A;\n        if (this.m_bGregorianCalendar) {\n            var alpha = ss.truncate(((Z - 1867216.25) / 36524.25));\n            A = Z + 1 + alpha - ss.truncate((alpha / 4));\n        }\n        else {\n            A = Z;\n        }\n        var B = A + 1524;\n        var C = ss.truncate(((B - 122.1) / 365.25));\n        var D = ss.truncate((365.25 * C));\n        var E = ss.truncate(((B - D) / 30.6001));\n        var dblDay = B - D - ss.truncate((30.6001 * E)) + F;\n        Day = ss.truncate(dblDay);\n        if (E < 14) {\n            Month = E - 1;\n        }\n        else {\n            Month = E - 13;\n        }\n        if (Month > 2) {\n            Year = C - 4716;\n        }\n        else {\n            Year = C - 4715;\n        }\n        tempZ = Math.floor(dblDay);\n        F = dblDay - tempZ;\n        Hour = ss.truncate((F * 24));\n        Minute = ss.truncate(((F - Hour / 24) * 1440));\n        Second = (F - (Hour / 24) - (Minute / 1440)) * 86400;\n        return [Year, Month, Day, Hour, Minute, Second];\n    },\n\n    dayOfWeek: function () {\n        return (ss.truncate((this.m_dblJulian + 1.5)) % 7);\n    },\n\n    dayOfYear: function () {\n        var year = ss.truncate(this.get()[0]);\n        return DT.dayOfYearJD(this.m_dblJulian, year, DT.afterPapalReform(year, 1, 1));\n    },\n\n    daysInMonth: function () {\n        var D = this.get();\n        var Year = ss.truncate(D[0]);\n        var Month = ss.truncate(D[1]);\n        return DT.daysInMonthForMonth(Month, DT.isLeap(Year, this.m_bGregorianCalendar));\n    },\n\n    daysInYear: function () {\n        var D = this.get();\n        var Year = ss.truncate(D[0]);\n        if (DT.isLeap(Year, this.m_bGregorianCalendar)) {\n            return 366;\n        }\n        else {\n            return 365;\n        }\n    },\n\n    leap: function () {\n        return DT.isLeap(this.year(), this.m_bGregorianCalendar);\n    },\n\n    inGregorianCalendar: function () {\n        return this.m_bGregorianCalendar;\n    },\n\n    fractionalYear: function () {\n        var D = this.get();\n        var Year = ss.truncate(D[0]);\n        var Month = ss.truncate(D[1]);\n        var Day = ss.truncate(D[2]);\n        var Hour = ss.truncate(D[3]);\n        var Minute = ss.truncate(D[4]);\n        var Second = D[5];\n        var DaysInYear;\n        if (DT.isLeap(Year, this.m_bGregorianCalendar)) {\n            DaysInYear = 366;\n        }\n        else {\n            DaysInYear = 365;\n        }\n        return Year + ((this.m_dblJulian - DT.dateToJD(Year, 1, 1, DT.afterPapalReform(Year, 1, 1))) / DaysInYear);\n    }\n};\n\nregisterType(\"DT\", [DT, DT$, null]);\n","// Originally `AADYNAMICALTIME.CPP`\n// \"Purpose: Implementation for the algorithms which calculate the difference between Dynamical Time and Universal Time\"\n// Last update of original: PJN / 28-01-2007\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { ss } from \"../ss.js\";\nimport { DT } from \"./date.js\";\n\n\n// Constants\n\nconst deltaTTable = [121, 112, 103, 95, 88, 82, 77, 72, 68, 63, 60, 56, 53, 51, 48, 46, 44, 42, 40, 38, 35, 33, 31, 29, 26, 24, 22, 20, 18, 16, 14, 12, 11, 10, 9, 8, 7, 7, 7, 7, 7, 7, 8, 8, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 12, 12, 12, 12, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 15, 15, 14, 13, 13.1, 12.5, 12.2, 12, 12, 12, 12, 12, 12, 11.9, 11.6, 11, 10.2, 9.2, 8.2, 7.1, 6.2, 5.6, 5.4, 5.3, 5.4, 5.6, 5.9, 6.2, 6.5, 6.8, 7.1, 7.3, 7.5, 7.6, 7.7, 7.3, 6.2, 5.2, 2.7, 1.4, -1.2, -2.8, -3.8, -4.8, -5.5, -5.3, -5.6, -5.7, -5.9, -6, -6.3, -6.5, -6.2, -4.7, -2.8, -0.1, 2.6, 5.3, 7.7, 10.4, 13.3, 16, 18.2, 20.2, 21.2, 22.4, 23.5, 23.8, 24.3, 24, 23.9, 23.9, 23.7, 24, 24.3, 25.3, 26.2, 27.3, 28.2, 29.1, 30, 30.7, 31.4, 32.2, 33.1, 34, 35, 36.5, 38.3, 40.18, 42.2, 44.5, 46.5, 48.5, 50.54, 52.2, 53.8, 54.9, 55.8, 56.86, 58.31, 59.99, 61.63, 62.97];\n\n\n// DYT - was CAADynamicalTime\n\nexport function DYT() { }\n\nDYT.deltaT = function (JD) {\n    var date = DT.createJD(JD, DT.afterPapalReformJD(JD));\n    var y = date.fractionalYear();\n    var T = (y - 2000) / 100;\n    var Delta;\n    if (y < 948) {\n        Delta = 2177 + (497 * T) + (44.1 * T * T);\n    }\n    else if (y < 1620) {\n        Delta = 102 + (102 * T) + (25.3 * T * T);\n    }\n    else if (y < 1998) {\n        var Index = ss.truncate(((y - 1620) / 2));\n        console.assert(Index < deltaTTable.length);\n        y = y / 2 - Index - 810;\n        Delta = (deltaTTable[Index] + (deltaTTable[Index + 1] - deltaTTable[Index]) * y);\n    }\n    else if (y <= 2000) {\n        var nLookupSize = deltaTTable.length;\n        Delta = deltaTTable[nLookupSize - 1];\n    }\n    else if (y < 2100) {\n        Delta = 102 + (102 * T) + (25.3 * T * T) + 0.37 * (y - 2100);\n    }\n    else {\n        Delta = 102 + (102 * T) + (25.3 * T * T);\n    }\n    return Delta;\n};\n\nvar DYT$ = {};\n\nregisterType(\"DYT\", [DYT, DYT$, null]);\n","// Originally `AAEARTH.CPP`\n// \"Purpose: Implementation for the algorithms which calculate the position of Earth\"\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// VSC\n\nexport function VSC(a, b, c) {\n    this.a = 0;\n    this.b = 0;\n    this.c = 0;\n    this.a = a;\n    this.b = b;\n    this.c = c;\n}\n\nvar VSC$ = {};\n\nregisterType(\"VSC\", [VSC, VSC$, null]);\n\n\n// Coefficients\n\nconst g_L0EarthCoefficients = [new VSC(175347046, 0, 0), new VSC(3341656, 4.6692568, 6283.07585), new VSC(34894, 4.6261, 12566.1517), new VSC(3497, 2.7441, 5753.3849), new VSC(3418, 2.8289, 3.5231), new VSC(3136, 3.6277, 77713.7715), new VSC(2676, 4.4181, 7860.4194), new VSC(2343, 6.1352, 3930.2097), new VSC(1324, 0.7425, 11506.7698), new VSC(1273, 2.0371, 529.691), new VSC(1199, 1.1096, 1577.3435), new VSC(990, 5.233, 5884.927), new VSC(902, 2.045, 26.298), new VSC(857, 3.508, 398.149), new VSC(780, 1.179, 5223.694), new VSC(753, 2.533, 5507.553), new VSC(505, 4.583, 18849.228), new VSC(492, 4.205, 775.523), new VSC(357, 2.92, 0.067), new VSC(317, 5.849, 11790.629), new VSC(284, 1.899, 796.288), new VSC(271, 0.315, 10977.079), new VSC(243, 0.345, 5486.778), new VSC(206, 4.806, 2544.314), new VSC(205, 1.869, 5573.143), new VSC(202, 2.458, 6069.777), new VSC(156, 0.833, 213.299), new VSC(132, 3.411, 2942.463), new VSC(126, 1.083, 20.775), new VSC(115, 0.645, 0.98), new VSC(103, 0.636, 4694.003), new VSC(102, 0.976, 15720.839), new VSC(102, 4.267, 7.114), new VSC(99, 6.21, 2146.17), new VSC(98, 0.68, 155.42), new VSC(86, 5.98, 161000.69), new VSC(85, 1.3, 6275.96), new VSC(85, 3.67, 71430.7), new VSC(80, 1.81, 17260.15), new VSC(79, 3.04, 12036.46), new VSC(75, 1.76, 5088.63), new VSC(74, 3.5, 3154.69), new VSC(74, 4.68, 801.82), new VSC(70, 0.83, 9437.76), new VSC(62, 3.98, 8827.39), new VSC(61, 1.82, 7084.9), new VSC(57, 2.78, 6286.6), new VSC(56, 4.39, 14143.5), new VSC(56, 3.47, 6279.55), new VSC(52, 0.19, 12139.55), new VSC(52, 1.33, 1748.02), new VSC(51, 0.28, 5856.48), new VSC(49, 0.49, 1194.45), new VSC(41, 5.37, 8429.24), new VSC(41, 2.4, 19651.05), new VSC(39, 6.17, 10447.39), new VSC(37, 6.04, 10213.29), new VSC(37, 2.57, 1059.38), new VSC(36, 1.71, 2352.87), new VSC(36, 1.78, 6812.77), new VSC(33, 0.59, 17789.85), new VSC(30, 0.44, 83996.85), new VSC(30, 2.74, 1349.87), new VSC(25, 3.16, 4690.48)];\nconst g_L1EarthCoefficients = [new VSC(628331966747, 0, 0), new VSC(206059, 2.678235, 6283.07585), new VSC(4303, 2.6351, 12566.1517), new VSC(425, 1.59, 3.523), new VSC(119, 5.796, 26.298), new VSC(109, 2.966, 1577.344), new VSC(93, 2.59, 18849.23), new VSC(72, 1.14, 529.69), new VSC(68, 1.87, 398.15), new VSC(67, 4.41, 5507.55), new VSC(59, 2.89, 5223.69), new VSC(56, 2.17, 155.42), new VSC(45, 0.4, 796.3), new VSC(36, 0.47, 775.52), new VSC(29, 2.65, 7.11), new VSC(21, 5.43, 0.98), new VSC(19, 1.85, 5486.78), new VSC(19, 4.97, 213.3), new VSC(17, 2.99, 6275.96), new VSC(16, 0.03, 2544.31), new VSC(16, 1.43, 2146.17), new VSC(15, 1.21, 10977.08), new VSC(12, 2.83, 1748.02), new VSC(12, 3.26, 5088.63), new VSC(12, 5.27, 1194.45), new VSC(12, 2.08, 4694), new VSC(11, 0.77, 553.57), new VSC(10, 1.3, 6286.6), new VSC(10, 4.24, 1349.87), new VSC(9, 2.7, 242.73), new VSC(9, 5.64, 951.72), new VSC(8, 5.3, 2352.87), new VSC(6, 2.65, 9437.76), new VSC(6, 4.67, 4690.48)];\nconst g_L2EarthCoefficients = [new VSC(52919, 0, 0), new VSC(8720, 1.0721, 6283.0758), new VSC(309, 0.867, 12566.152), new VSC(27, 0.05, 3.52), new VSC(16, 5.19, 26.3), new VSC(16, 3.68, 155.42), new VSC(10, 0.76, 18849.23), new VSC(9, 2.06, 77713.77), new VSC(7, 0.83, 775.52), new VSC(5, 4.66, 1577.34), new VSC(4, 1.03, 7.11), new VSC(4, 3.44, 5573.14), new VSC(3, 5.14, 796.3), new VSC(3, 6.05, 5507.55), new VSC(3, 1.19, 242.73), new VSC(3, 6.12, 529.69), new VSC(3, 0.31, 398.15), new VSC(3, 2.28, 553.57), new VSC(2, 4.38, 5223.69), new VSC(2, 3.75, 0.98)];\nconst g_L3EarthCoefficients = [new VSC(289, 5.844, 6283.076), new VSC(35, 0, 0), new VSC(17, 5.49, 12566.15), new VSC(3, 5.2, 155.42), new VSC(1, 4.72, 3.52), new VSC(1, 5.3, 18849.23), new VSC(1, 5.97, 242.73)];\nconst g_L4EarthCoefficients = [new VSC(114, 3.142, 0), new VSC(8, 4.13, 6283.08), new VSC(1, 3.84, 12566.15)];\nconst g_L5EarthCoefficients = [new VSC(1, 3.14, 0)];\nconst g_B0EarthCoefficients = [new VSC(280, 3.199, 84334.662), new VSC(102, 5.422, 5507.553), new VSC(80, 3.88, 5223.69), new VSC(44, 3.7, 2352.87), new VSC(32, 4, 1577.34)];\nconst g_B1EarthCoefficients = [new VSC(9, 3.9, 5507.55), new VSC(6, 1.73, 5223.69)];\nconst g_B2EarthCoefficients = [new VSC(22378, 3.38509, 10213.28555), new VSC(282, 0, 0), new VSC(173, 5.256, 20426.571), new VSC(27, 3.87, 30639.86)];\nconst g_B3EarthCoefficients = [new VSC(647, 4.992, 10213.286), new VSC(20, 3.14, 0), new VSC(6, 0.77, 20426.57), new VSC(3, 5.44, 30639.86)];\nconst g_B4EarthCoefficients = [new VSC(14, 0.32, 10213.29)];\nconst g_R0EarthCoefficients = [new VSC(100013989, 0, 0), new VSC(1670700, 3.0984635, 6283.07585), new VSC(13956, 3.05525, 12566.1517), new VSC(3084, 5.1985, 77713.7715), new VSC(1628, 1.1739, 5753.3849), new VSC(1576, 2.8469, 7860.4194), new VSC(925, 5.453, 11506.77), new VSC(542, 4.564, 3930.21), new VSC(472, 3.661, 5884.927), new VSC(346, 0.964, 5507.553), new VSC(329, 5.9, 5223.694), new VSC(307, 0.299, 5573.143), new VSC(243, 4.273, 11790.629), new VSC(212, 5.847, 1577.344), new VSC(186, 5.022, 10977.079), new VSC(175, 3.012, 18849.228), new VSC(110, 5.055, 5486.778), new VSC(98, 0.89, 6069.78), new VSC(86, 5.69, 15720.84), new VSC(86, 1.27, 161000.69), new VSC(65, 0.27, 17260.15), new VSC(63, 0.92, 529.69), new VSC(57, 2.01, 83996.85), new VSC(56, 5.24, 71430.7), new VSC(49, 3.25, 2544.31), new VSC(47, 2.58, 775.52), new VSC(45, 5.54, 9437.76), new VSC(43, 6.01, 6275.96), new VSC(39, 5.36, 4694), new VSC(38, 2.39, 8827.39), new VSC(37, 0.83, 19651.05), new VSC(37, 4.9, 12139.55), new VSC(36, 1.67, 12036.46), new VSC(35, 1.84, 2942.46), new VSC(33, 0.24, 7084.9), new VSC(32, 0.18, 5088.63), new VSC(32, 1.78, 398.15), new VSC(28, 1.21, 6286.6), new VSC(28, 1.9, 6279.55), new VSC(26, 4.59, 10447.39)];\nconst g_R1EarthCoefficients = [new VSC(103019, 1.10749, 6283.07585), new VSC(1721, 1.0644, 12566.1517), new VSC(702, 3.142, 0), new VSC(32, 1.02, 18849.23), new VSC(31, 2.84, 5507.55), new VSC(25, 1.32, 5223.69), new VSC(18, 1.42, 1577.34), new VSC(10, 5.91, 10977.08), new VSC(9, 1.42, 6275.96), new VSC(9, 0.27, 5486.78)];\nconst g_R2EarthCoefficients = [new VSC(4359, 5.7846, 6283.0758), new VSC(124, 5.579, 12566.152), new VSC(12, 3.14, 0), new VSC(9, 3.63, 77713.77), new VSC(6, 1.87, 5573.14), new VSC(3, 5.47, 18849.23)];\nconst g_R3EarthCoefficients = [new VSC(145, 4.273, 6283.076), new VSC(7, 3.92, 12566.15)];\nconst g_R4EarthCoefficients = [new VSC(4, 2.56, 6283.08)];\nconst g_L1EarthCoefficientsJ2000 = [new VSC(628307584999, 0, 0), new VSC(206059, 2.678235, 6283.07585), new VSC(4303, 2.6351, 12566.1517), new VSC(425, 1.59, 3.523), new VSC(119, 5.796, 26.298), new VSC(109, 2.966, 1577.344), new VSC(93, 2.59, 18849.23), new VSC(72, 1.14, 529.69), new VSC(68, 1.87, 398.15), new VSC(67, 4.41, 5507.55), new VSC(59, 2.89, 5223.69), new VSC(56, 2.17, 155.42), new VSC(45, 0.4, 796.3), new VSC(36, 0.47, 775.52), new VSC(29, 2.65, 7.11), new VSC(21, 5.43, 0.98), new VSC(19, 1.85, 5486.78), new VSC(19, 4.97, 213.3), new VSC(17, 2.99, 6275.96), new VSC(16, 0.03, 2544.31), new VSC(16, 1.43, 2146.17), new VSC(15, 1.21, 10977.08), new VSC(12, 2.83, 1748.02), new VSC(12, 3.26, 5088.63), new VSC(12, 5.27, 1194.45), new VSC(12, 2.08, 4694), new VSC(11, 0.77, 553.57), new VSC(10, 1.3, 6286.6), new VSC(10, 4.24, 1349.87), new VSC(9, 2.7, 242.73), new VSC(9, 5.64, 951.72), new VSC(8, 5.3, 2352.87), new VSC(6, 2.65, 9437.76), new VSC(6, 4.67, 4690.48)];\nconst g_L2EarthCoefficientsJ2000 = [new VSC(8722, 1.0725, 6283.0758), new VSC(991, 3.1416, 0), new VSC(295, 0.437, 12566.152), new VSC(27, 0.05, 3.52), new VSC(16, 5.19, 26.3), new VSC(16, 3.69, 155.42), new VSC(9, 0.3, 18849.23), new VSC(9, 2.06, 77713.77), new VSC(7, 0.83, 775.52), new VSC(5, 4.66, 1577.34), new VSC(4, 1.03, 7.11), new VSC(4, 3.44, 5573.14), new VSC(3, 5.14, 796.3), new VSC(3, 6.05, 5507.55), new VSC(3, 1.19, 242.73), new VSC(3, 6.12, 529.69), new VSC(3, 0.3, 398.15), new VSC(3, 2.28, 553.57), new VSC(2, 4.38, 5223.69), new VSC(2, 3.75, 0.98)];\nconst g_L3EarthCoefficientsJ2000 = [new VSC(289, 5.842, 6283.076), new VSC(21, 6.05, 12566.15), new VSC(3, 5.2, 155.42), new VSC(3, 3.14, 0), new VSC(1, 4.72, 3.52), new VSC(1, 5.97, 242.73), new VSC(1, 5.54, 18849.23)];\nconst g_L4EarthCoefficientsJ2000 = [new VSC(8, 4.14, 6283.08), new VSC(1, 3.28, 12566.15)];\nconst g_B1EarthCoefficientsJ2000 = [new VSC(227778, 3.413766, 6283.07585), new VSC(3806, 3.3706, 12566.1517), new VSC(3620, 0, 0), new VSC(72, 3.33, 18849.23), new VSC(8, 3.89, 5507.55), new VSC(8, 1.79, 5223.69), new VSC(6, 5.2, 2352.87)];\nconst g_B2EarthCoefficientsJ2000 = [new VSC(9721, 5.1519, 6283.07585), new VSC(233, 3.1416, 0), new VSC(134, 0.644, 12566.152), new VSC(7, 1.07, 18849.23)];\nconst g_B3EarthCoefficientsJ2000 = [new VSC(276, 0.595, 6283.076), new VSC(17, 3.14, 0), new VSC(4, 0.12, 12566.15)];\nconst g_B4EarthCoefficientsJ2000 = [new VSC(6, 2.27, 6283.08), new VSC(1, 0, 0)];\n\n\n// CAAEarth\n\nexport function CAAEarth() { }\n\nCAAEarth.eclipticLongitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var rho5 = rho4 * rho;\n    var nL0Coefficients = g_L0EarthCoefficients.length;\n    var L0 = 0;\n    var i;\n    for (i = 0; i < nL0Coefficients; i++) {\n        L0 += g_L0EarthCoefficients[i].a * Math.cos(g_L0EarthCoefficients[i].b + g_L0EarthCoefficients[i].c * rho);\n    }\n    var nL1Coefficients = g_L1EarthCoefficients.length;\n    var L1 = 0;\n    for (i = 0; i < nL1Coefficients; i++) {\n        L1 += g_L1EarthCoefficients[i].a * Math.cos(g_L1EarthCoefficients[i].b + g_L1EarthCoefficients[i].c * rho);\n    }\n    var nL2Coefficients = g_L2EarthCoefficients.length;\n    var L2 = 0;\n    for (i = 0; i < nL2Coefficients; i++) {\n        L2 += g_L2EarthCoefficients[i].a * Math.cos(g_L2EarthCoefficients[i].b + g_L2EarthCoefficients[i].c * rho);\n    }\n    var nL3Coefficients = g_L3EarthCoefficients.length;\n    var L3 = 0;\n    for (i = 0; i < nL3Coefficients; i++) {\n        L3 += g_L3EarthCoefficients[i].a * Math.cos(g_L3EarthCoefficients[i].b + g_L3EarthCoefficients[i].c * rho);\n    }\n    var nL4Coefficients = g_L4EarthCoefficients.length;\n    var L4 = 0;\n    for (i = 0; i < nL4Coefficients; i++) {\n        L4 += g_L4EarthCoefficients[i].a * Math.cos(g_L4EarthCoefficients[i].b + g_L4EarthCoefficients[i].c * rho);\n    }\n    var nL5Coefficients = g_L5EarthCoefficients.length;\n    var L5 = 0;\n    for (i = 0; i < nL5Coefficients; i++) {\n        L5 += g_L5EarthCoefficients[i].a * Math.cos(g_L5EarthCoefficients[i].b + g_L5EarthCoefficients[i].c * rho);\n    }\n    var vvalue = (L0 + L1 * rho + L2 * rhosquared + L3 * rhocubed + L4 * rho4 + L5 * rho5) / 100000000;\n    vvalue = CT.m360(CT.r2D(vvalue));\n    return vvalue;\n};\n\nCAAEarth.eclipticLatitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nB0Coefficients = g_B0EarthCoefficients.length;\n    var B0 = 0;\n    var i;\n    for (i = 0; i < nB0Coefficients; i++) {\n        B0 += g_B0EarthCoefficients[i].a * Math.cos(g_B0EarthCoefficients[i].b + g_B0EarthCoefficients[i].c * rho);\n    }\n    var nB1Coefficients = g_B1EarthCoefficients.length;\n    var B1 = 0;\n    for (i = 0; i < nB1Coefficients; i++) {\n        B1 += g_B1EarthCoefficients[i].a * Math.cos(g_B1EarthCoefficients[i].b + g_B1EarthCoefficients[i].c * rho);\n    }\n    var nB2Coefficients = g_B2EarthCoefficients.length;\n    var B2 = 0;\n    for (i = 0; i < nB2Coefficients; i++) {\n        B2 += g_B2EarthCoefficients[i].a * Math.cos(g_B2EarthCoefficients[i].b + g_B2EarthCoefficients[i].c * rho);\n    }\n    var nB3Coefficients = g_B3EarthCoefficients.length;\n    var B3 = 0;\n    for (i = 0; i < nB3Coefficients; i++) {\n        B3 += g_B3EarthCoefficients[i].a * Math.cos(g_B3EarthCoefficients[i].b + g_B3EarthCoefficients[i].c * rho);\n    }\n    var nB4Coefficients = g_B4EarthCoefficients.length;\n    var B4 = 0;\n    for (i = 0; i < nB4Coefficients; i++) {\n        B4 += g_B4EarthCoefficients[i].a * Math.cos(g_B4EarthCoefficients[i].b + g_B4EarthCoefficients[i].c * rho);\n    }\n    var vvalue = (B0 + B1 * rho + B2 * rhosquared + B3 * rhocubed + B4 * rho4) / 100000000;\n    vvalue = CT.r2D(vvalue);\n    return vvalue;\n};\n\nCAAEarth.radiusVector = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nR0Coefficients = g_R0EarthCoefficients.length;\n    var R0 = 0;\n    var i;\n    for (i = 0; i < nR0Coefficients; i++) {\n        R0 += g_R0EarthCoefficients[i].a * Math.cos(g_R0EarthCoefficients[i].b + g_R0EarthCoefficients[i].c * rho);\n    }\n    var nR1Coefficients = g_R1EarthCoefficients.length;\n    var R1 = 0;\n    for (i = 0; i < nR1Coefficients; i++) {\n        R1 += g_R1EarthCoefficients[i].a * Math.cos(g_R1EarthCoefficients[i].b + g_R1EarthCoefficients[i].c * rho);\n    }\n    var nR2Coefficients = g_R2EarthCoefficients.length;\n    var R2 = 0;\n    for (i = 0; i < nR2Coefficients; i++) {\n        R2 += g_R2EarthCoefficients[i].a * Math.cos(g_R2EarthCoefficients[i].b + g_R2EarthCoefficients[i].c * rho);\n    }\n    var nR3Coefficients = g_R3EarthCoefficients.length;\n    var R3 = 0;\n    for (i = 0; i < nR3Coefficients; i++) {\n        R3 += g_R3EarthCoefficients[i].a * Math.cos(g_R3EarthCoefficients[i].b + g_R3EarthCoefficients[i].c * rho);\n    }\n    var nR4Coefficients = g_R4EarthCoefficients.length;\n    var R4 = 0;\n    for (i = 0; i < nR4Coefficients; i++) {\n        R4 += g_R4EarthCoefficients[i].a * Math.cos(g_R4EarthCoefficients[i].b + g_R4EarthCoefficients[i].c * rho);\n    }\n    return (R0 + R1 * rho + R2 * rhosquared + R3 * rhocubed + R4 * rho4) / 100000000;\n};\n\nCAAEarth.sunMeanAnomaly = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(357.5291092 + 35999.0502909 * T - 0.0001536 * Tsquared + Tcubed / 24490000);\n};\n\nCAAEarth.eccentricity = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    return 1 - 0.002516 * T - 7.4E-06 * Tsquared;\n};\n\nCAAEarth.eclipticLongitudeJ2000 = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nL0Coefficients = g_L0EarthCoefficients.length;\n    var L0 = 0;\n    var i;\n    for (i = 0; i < nL0Coefficients; i++) {\n        L0 += g_L0EarthCoefficients[i].a * Math.cos(g_L0EarthCoefficients[i].b + g_L0EarthCoefficients[i].c * rho);\n    }\n    var nL1Coefficients = g_L1EarthCoefficientsJ2000.length;\n    var L1 = 0;\n    for (i = 0; i < nL1Coefficients; i++) {\n        L1 += g_L1EarthCoefficientsJ2000[i].a * Math.cos(g_L1EarthCoefficientsJ2000[i].b + g_L1EarthCoefficientsJ2000[i].c * rho);\n    }\n    var nL2Coefficients = g_L2EarthCoefficientsJ2000.length;\n    var L2 = 0;\n    for (i = 0; i < nL2Coefficients; i++) {\n        L2 += g_L2EarthCoefficientsJ2000[i].a * Math.cos(g_L2EarthCoefficientsJ2000[i].b + g_L2EarthCoefficientsJ2000[i].c * rho);\n    }\n    var nL3Coefficients = g_L3EarthCoefficientsJ2000.length;\n    var L3 = 0;\n    for (i = 0; i < nL3Coefficients; i++) {\n        L3 += g_L3EarthCoefficientsJ2000[i].a * Math.cos(g_L3EarthCoefficientsJ2000[i].b + g_L3EarthCoefficientsJ2000[i].c * rho);\n    }\n    var nL4Coefficients = g_L4EarthCoefficientsJ2000.length;\n    var L4 = 0;\n    for (i = 0; i < nL4Coefficients; i++) {\n        L4 += g_L4EarthCoefficientsJ2000[i].a * Math.cos(g_L4EarthCoefficientsJ2000[i].b + g_L4EarthCoefficientsJ2000[i].c * rho);\n    }\n    var vvalue = (L0 + L1 * rho + L2 * rhosquared + L3 * rhocubed + L4 * rho4) / 100000000;\n    vvalue = CT.m360(CT.r2D(vvalue));\n    return vvalue;\n};\n\nCAAEarth.eclipticLatitudeJ2000 = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nB0Coefficients = g_B0EarthCoefficients.length;\n    var B0 = 0;\n    var i;\n    for (i = 0; i < nB0Coefficients; i++) {\n        B0 += g_B0EarthCoefficients[i].a * Math.cos(g_B0EarthCoefficients[i].b + g_B0EarthCoefficients[i].c * rho);\n    }\n    var nB1Coefficients = g_B1EarthCoefficientsJ2000.length;\n    var B1 = 0;\n    for (i = 0; i < nB1Coefficients; i++) {\n        B1 += g_B1EarthCoefficientsJ2000[i].a * Math.cos(g_B1EarthCoefficientsJ2000[i].b + g_B1EarthCoefficientsJ2000[i].c * rho);\n    }\n    var nB2Coefficients = g_B2EarthCoefficientsJ2000.length;\n    var B2 = 0;\n    for (i = 0; i < nB2Coefficients; i++) {\n        B2 += g_B2EarthCoefficientsJ2000[i].a * Math.cos(g_B2EarthCoefficientsJ2000[i].b + g_B2EarthCoefficientsJ2000[i].c * rho);\n    }\n    var nB3Coefficients = g_B3EarthCoefficientsJ2000.length;\n    var B3 = 0;\n    for (i = 0; i < nB3Coefficients; i++) {\n        B3 += g_B3EarthCoefficientsJ2000[i].a * Math.cos(g_B3EarthCoefficientsJ2000[i].b + g_B3EarthCoefficientsJ2000[i].c * rho);\n    }\n    var nB4Coefficients = g_B4EarthCoefficientsJ2000.length;\n    var B4 = 0;\n    for (i = 0; i < nB4Coefficients; i++) {\n        B4 += g_B4EarthCoefficientsJ2000[i].a * Math.cos(g_B4EarthCoefficientsJ2000[i].b + g_B4EarthCoefficientsJ2000[i].c * rho);\n    }\n    var vvalue = (B0 + B1 * rho + B2 * rhosquared + B3 * rhocubed + B4 * rho4) / 100000000;\n    vvalue = CT.r2D(vvalue);\n    return vvalue;\n};\n\nvar CAAEarth$ = {};\n\nregisterType(\"CAAEarth\", [CAAEarth, CAAEarth$, null]);\n","// Originally `AAECLIPTICALELEMENTS.CPP`\n// \"Purpose: Implementation for the algorithms which map the ecliptical elements from one equinox to another\"\n// Last update of original: PJN / 29-11-2006\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// CAAEclipticalElementDetails\n\nexport function CAAEclipticalElementDetails() {\n    this.i = 0;\n    this.w = 0;\n    this.omega = 0;\n    this.i = 0;\n    this.w = 0;\n    this.omega = 0;\n}\n\nvar CAAEclipticalElementDetails$ = {};\n\nregisterType(\"CAAEclipticalElementDetails\", [CAAEclipticalElementDetails, CAAEclipticalElementDetails$, null]);\n\n\n// CAAEclipticalElements\n\nexport function CAAEclipticalElements() { }\n\nCAAEclipticalElements.calculate = function (i0, w0, omega0, JD0, JD) {\n    var T = (JD0 - 2451545) / 36525;\n    var Tsquared = T * T;\n    var t = (JD - JD0) / 36525;\n    var tsquared = t * t;\n    var tcubed = tsquared * t;\n    var i0rad = CT.d2R(i0);\n    var omega0rad = CT.d2R(omega0);\n    var eta = (47.0029 - 0.06603 * T + 0.000598 * Tsquared) * t + (-0.03302 + 0.000598 * T) * tsquared + 6E-05 * tcubed;\n    eta = CT.d2R(CT.dmS2D(0, 0, eta));\n    var pi = 174.876384 * 3600 + 3289.4789 * T + 0.60622 * Tsquared - (869.8089 + 0.50491 * T) * t + 0.03536 * tsquared;\n    pi = CT.d2R(CT.dmS2D(0, 0, pi));\n    var p = (5029.0966 + 2.22226 * T - 4.2E-05 * Tsquared) * t + (1.11113 - 4.2E-05 * T) * tsquared - 6E-06 * tcubed;\n    p = CT.d2R(CT.dmS2D(0, 0, p));\n    var sini0rad = Math.sin(i0rad);\n    var cosi0rad = Math.cos(i0rad);\n    var sinomega0rad_pi = Math.sin(omega0rad - pi);\n    var cosomega0rad_pi = Math.cos(omega0rad - pi);\n    var sineta = Math.sin(eta);\n    var coseta = Math.cos(eta);\n    var A = sini0rad * sinomega0rad_pi;\n    var B = -sineta * cosi0rad + coseta * sini0rad * cosomega0rad_pi;\n    var irad = Math.asin(Math.sqrt(A * A + B * B));\n    var details = new CAAEclipticalElementDetails();\n    details.i = CT.r2D(irad);\n    var cosi = cosi0rad * coseta + sini0rad * sineta * cosomega0rad_pi;\n    if (cosi < 0) {\n        details.i = 180 - details.i;\n    }\n    var phi = pi + p;\n    details.omega = CT.m360(CT.r2D(Math.atan2(A, B) + phi));\n    A = -sineta * sinomega0rad_pi;\n    B = sini0rad * coseta - cosi0rad * sineta * cosomega0rad_pi;\n    var deltaw = CT.r2D(Math.atan2(A, B));\n    details.w = CT.m360(w0 + deltaw);\n    return details;\n};\n\nCAAEclipticalElements.fK4B1950ToFK5J2000 = function (i0, w0, omega0) {\n    var L = CT.d2R(5.19856209);\n    var J = CT.d2R(0.00651966);\n    var i0rad = CT.d2R(i0);\n    var omega0rad = CT.d2R(omega0);\n    var sini0rad = Math.sin(i0rad);\n    var cosi0rad = Math.cos(i0rad);\n    var cosJ = Math.cos(J);\n    var sinJ = Math.sin(J);\n    var W = L + omega0rad;\n    var cosW = Math.cos(W);\n    var sinW = Math.sin(W);\n    var A = sinJ * sinW;\n    var B = sini0rad * cosJ + cosi0rad * sinJ * cosW;\n    var details = new CAAEclipticalElementDetails();\n    details.i = CT.r2D(Math.asin(Math.sqrt(A * A + B * B)));\n    var cosi = cosi0rad * cosJ - sini0rad * sinJ * cosW;\n    if (cosi < 0) {\n        details.i = 180 - details.i;\n    }\n    details.w = CT.m360(w0 + CT.r2D(Math.atan2(A, B)));\n    details.omega = CT.m360(CT.r2D(Math.atan2(sini0rad * sinW, cosi0rad * sinJ + sini0rad * cosJ * cosW)) - 4.50001688);\n    return details;\n};\n\nvar CAAEclipticalElements$ = {};\n\nregisterType(\"CAAEclipticalElements\", [CAAEclipticalElements, CAAEclipticalElements$, null]);\n","// Originally `AAELEMENTSPLANETARYORBIT.CPP`\n// \"Purpose: Implementation for the algorithms to calculate the elements of the planetary orbits\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// EPO - was CAAElementsPlanetaryOrbit\n\nexport function EPO() { }\n\nEPO.mercuryMeanLongitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(252.250906 + 149474.0722491 * T + 0.0003035 * Tsquared + 1.8E-08 * Tcubed);\n};\n\nEPO.mercurySemimajorAxis = function (UnnamedParameter1) {\n    return 0.38709831;\n};\n\nEPO.mercuryEccentricity = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return 0.20563175 + 2.0407E-05 * T - 2.83E-08 * Tsquared - 1.8E-10 * Tcubed;\n};\n\nEPO.mercuryInclination = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(7.004986 + 0.0018215 * T - 1.81E-05 * Tsquared + 5.6E-08 * Tcubed);\n};\n\nEPO.mercuryLongitudeAscendingNode = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(48.330893 + 1.1861883 * T + 0.00017542 * Tsquared + 2.15E-07 * Tcubed);\n};\n\nEPO.mercuryLongitudePerihelion = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(77.456119 + 1.5564776 * T + 0.00029544 * Tsquared + 9E-09 * Tcubed);\n};\n\nEPO.venusMeanLongitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(181.979801 + 58519.2130302 * T + 0.00031014 * Tsquared + 1.5E-08 * Tcubed);\n};\n\nEPO.venusSemimajorAxis = function (UnnamedParameter1) {\n    return 0.72332982;\n};\n\nEPO.venusEccentricity = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return 0.00677192 - 4.7765E-05 * T + 9.81E-08 * Tsquared + 4.6E-10 * Tcubed;\n};\n\nEPO.venusInclination = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(3.394662 + 0.0010037 * T - 8.8E-07 * Tsquared - 7E-09 * Tcubed);\n};\n\nEPO.venusLongitudeAscendingNode = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(76.67992 + 0.9011206 * T + 0.00040618 * Tsquared - 9.3E-08 * Tcubed);\n};\n\nEPO.venusLongitudePerihelion = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(131.563703 + 1.4022288 * T - 0.00107618 * Tsquared - 5.678E-06 * Tcubed);\n};\n\nEPO.earthMeanLongitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(100.466457 + 36000.7698278 * T + 0.00030322 * Tsquared + 2E-08 * Tcubed);\n};\n\nEPO.earthSemimajorAxis = function (UnnamedParameter1) {\n    return 1.000001018;\n};\n\nEPO.earthEccentricity = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return 0.01670863 - 4.2037E-05 * T - 1.267E-07 * Tsquared + 1.4E-10 * Tcubed;\n};\n\nEPO.earthInclination = function (UnnamedParameter1) {\n    return 0;\n};\n\nEPO.earthLongitudePerihelion = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(102.937348 + 1.17195366 * T + 0.00045688 * Tsquared - 1.8E-08 * Tcubed);\n};\n\nEPO.marsMeanLongitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(355.433 + 19141.6964471 * T + 0.00031052 * Tsquared + 1.6E-08 * Tcubed);\n};\n\nEPO.marsSemimajorAxis = function (UnnamedParameter1) {\n    return 1.523679342;\n};\n\nEPO.marsEccentricity = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return 0.09340065 + 9.0484E-05 * T - 8.06E-08 * Tsquared - 2.5E-10 * Tcubed;\n};\n\nEPO.marsInclination = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(1.849726 - 0.0006011 * T + 1.276E-05 * Tsquared - 7E-09 * Tcubed);\n};\n\nEPO.marsLongitudeAscendingNode = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(49.588093 + 0.7720959 * T + 1.557E-05 * Tsquared + 2.267E-06 * Tcubed);\n};\n\nEPO.marsLongitudePerihelion = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(336.060234 + 1.8410449 * T + 0.00013477 * Tsquared + 5.36E-07 * Tcubed);\n};\n\nEPO.jupiterMeanLongitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(34.351519 + 3036.3027748 * T + 0.0002233 * Tsquared + 3.7E-08 * Tcubed);\n};\n\nEPO.jupiterSemimajorAxis = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    return 5.202603209 + 1.913E-07 * T;\n};\n\nEPO.jupiterEccentricity = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return 0.04849793 + 0.000163225 * T - 4.714E-07 * Tsquared - 2.01E-09 * Tcubed;\n};\n\nEPO.jupiterInclination = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(1.303267 - 0.0054965 * T + 4.66E-06 * Tsquared - 2E-09 * Tcubed);\n};\n\nEPO.jupiterLongitudeAscendingNode = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(100.464407 + 1.0209774 * T + 0.00040315 * Tsquared + 4.04E-07 * Tcubed);\n};\n\nEPO.jupiterLongitudePerihelion = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(14.331207 + 1.6126352 * T + 0.00103042 * Tsquared - 4.464E-06 * Tcubed);\n};\n\nEPO.saturnMeanLongitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(50.077444 + 1223.5110686 * T + 0.00051908 * Tsquared - 3E-08 * Tcubed);\n};\n\nEPO.saturnSemimajorAxis = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    return 9.554909192 - 2.139E-06 * T + 4E-09 * Tsquared;\n};\n\nEPO.saturnEccentricity = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return 0.05554814 - 0.0003446641 * T - 6.436E-07 * Tsquared + 3.4E-09 * Tcubed;\n};\n\nEPO.saturnInclination = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(2.488879 - 0.0037362 * T - 1.519E-05 * Tsquared + 8.7E-08 * Tcubed);\n};\n\nEPO.saturnLongitudeAscendingNode = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(113.665503 + 0.877088 * T - 0.00012176 * Tsquared - 2.249E-06 * Tcubed);\n};\n\nEPO.saturnLongitudePerihelion = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(93.057237 + 1.19637613 * T + 0.00083753 * Tsquared + 4.928E-06 * Tcubed);\n};\n\nEPO.uranusMeanLongitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(314.055005 + 429.8640561 * T + 0.0003039 * Tsquared + 2.6E-08 * Tcubed);\n};\n\nEPO.uranusSemimajorAxis = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    return 19.218446062 - 3.72E-08 * T + 9.8E-10 * Tsquared;\n};\n\nEPO.uranusEccentricity = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return 0.04638122 - 2.7293E-05 * T + 7.89E-08 * Tsquared + 2.4E-10 * Tcubed;\n};\n\nEPO.uranusInclination = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(0.773197 + 0.0007744 * T + 3.749E-05 * Tsquared - 9.2E-08 * Tcubed);\n};\n\nEPO.uranusLongitudeAscendingNode = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(74.005957 + 0.5211278 * T + 0.00133947 * Tsquared + 1.8484E-05 * Tcubed);\n};\n\nEPO.uranusLongitudePerihelion = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(173.005291 + 1.486379 * T + 0.00021406 * Tsquared + 4.34E-07 * Tcubed);\n};\n\nEPO.neptuneMeanLongitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(304.348665 + 219.8833092 * T + 0.00030882 * Tsquared + 1.8E-08 * Tcubed);\n};\n\nEPO.neptuneSemimajorAxis = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    return 30.110386869 - 1.663E-07 * T + 6.9E-10 * Tsquared;\n};\n\nEPO.neptuneEccentricity = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tcubed = T * T * T;\n    return 0.00945575 + 6.033E-06 * T - 5E-11 * Tcubed;\n};\n\nEPO.neptuneInclination = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(1.769953 - 0.0093082 * T - 7.08E-06 * Tsquared + 2.7E-08 * Tcubed);\n};\n\nEPO.neptuneLongitudeAscendingNode = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(131.784057 + 1.1022039 * T + 0.00025952 * Tsquared - 6.37E-07 * Tcubed);\n};\n\nEPO.neptuneLongitudePerihelion = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(48.120276 + 1.4262957 * T + 0.00038434 * Tsquared + 2E-08 * Tcubed);\n};\n\nEPO.mercuryMeanLongitudeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(252.250906 + 149472.6746358 * T - 5.36E-06 * Tsquared + 2E-09 * Tcubed);\n};\n\nEPO.mercuryInclinationJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(7.004986 - 0.0059516 * T + 8E-07 * Tsquared + 4.3E-08 * Tcubed);\n};\n\nEPO.mercuryLongitudeAscendingNodeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(48.330893 - 0.1254227 * T - 8.833E-05 * Tsquared - 2E-07 * Tcubed);\n};\n\nEPO.mercuryLongitudePerihelionJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(77.456119 + 0.1588643 * T - 1.342E-05 * Tsquared - 7E-09 * Tcubed);\n};\n\nEPO.venusMeanLongitudeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(181.979801 + 58517.815676 * T + 1.65E-06 * Tsquared - 2E-09 * Tcubed);\n};\n\nEPO.venusInclinationJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(3.394662 - 0.0008568 * T - 3.244E-05 * Tsquared + 9E-09 * Tcubed);\n};\n\nEPO.venusLongitudeAscendingNodeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(76.67992 - 0.2780134 * T - 0.00014257 * Tsquared - 1.64E-07 * Tcubed);\n};\n\nEPO.venusLongitudePerihelionJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(131.563703 + 0.0048746 * T - 0.00138467 * Tsquared - 5.695E-06 * Tcubed);\n};\n\nEPO.earthMeanLongitudeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(100.466457 + 35999.3728565 * T - 5.68E-06 * Tsquared - 1E-09 * Tcubed);\n};\n\nEPO.earthInclinationJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return 0.0130548 * T - 9.31E-06 * Tsquared - 3.4E-08 * Tcubed;\n};\n\nEPO.earthLongitudeAscendingNodeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(174.873176 - 0.241098 * T + 4.262E-05 * Tsquared + 1E-09 * Tcubed);\n};\n\nEPO.earthLongitudePerihelionJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(102.937348 + 0.3225654 * T + 0.00014799 * Tsquared - 3.9E-08 * Tcubed);\n};\n\nEPO.marsMeanLongitudeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(355.433 + 19140.2993039 * T + 2.62E-06 * Tsquared - 3E-09 * Tcubed);\n};\n\nEPO.marsInclinationJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(1.849726 - 0.0081477 * T - 2.255E-05 * Tsquared - 2.9E-08 * Tcubed);\n};\n\nEPO.marsLongitudeAscendingNodeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(49.588093 - 0.295025 * T - 0.00064048 * Tsquared - 1.964E-06 * Tcubed);\n};\n\nEPO.marsLongitudePerihelionJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(336.060234 + 0.4439016 * T - 0.00017313 * Tsquared + 5.18E-07 * Tcubed);\n};\n\nEPO.jupiterMeanLongitudeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(34.351519 + 3034.9056606 * T - 8.501E-05 * Tsquared + 1.6E-08 * Tcubed);\n};\n\nEPO.jupiterInclinationJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(1.303267 - 0.0019877 * T + 3.32E-05 * Tsquared + 9.7E-08 * Tcubed);\n};\n\nEPO.jupiterLongitudeAscendingNodeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(100.464407 + 0.1767232 * T + 0.000907 * Tsquared - 7.272E-06 * Tcubed);\n};\n\nEPO.jupiterLongitudePerihelionJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(14.331207 + 0.2155209 * T + 0.00072211 * Tsquared - 4.485E-06 * Tcubed);\n};\n\nEPO.saturnMeanLongitudeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(50.077444 + 1222.1138488 * T + 0.00021004 * Tsquared - 4.6E-08 * Tcubed);\n};\n\nEPO.saturnInclinationJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(2.488879 + 0.0025514 * T - 4.906E-05 * Tsquared + 1.7E-08 * Tcubed);\n};\n\nEPO.saturnLongitudeAscendingNodeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(113.665503 - 0.2566722 * T - 0.00018399 * Tsquared + 4.8E-07 * Tcubed);\n};\n\nEPO.saturnLongitudePerihelionJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(93.057237 + 0.5665415 * T + 0.0005285 * Tsquared + 4.912E-06 * Tcubed);\n};\n\nEPO.uranusMeanLongitudeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(314.055005 + 428.4669983 * T - 4.86E-06 * Tsquared + 6E-09 * Tcubed);\n};\n\nEPO.uranusInclinationJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(0.773197 - 0.0016869 * T + 3.49E-06 * Tsquared + 1.6E-08 * Tcubed);\n};\n\nEPO.uranusLongitudeAscendingNodeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(74.005957 + 0.0741431 * T + 0.00040539 * Tsquared + 1.19E-07 * Tcubed);\n};\n\nEPO.uranusLongitudePerihelionJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(173.005291 + 0.0893212 * T - 9.47E-05 * Tsquared + 4.14E-07 * Tcubed);\n};\n\nEPO.neptuneMeanLongitudeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(304.348665 + 218.4862002 * T + 5.9E-07 * Tsquared - 2E-09 * Tcubed);\n};\n\nEPO.neptuneInclinationJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    return CT.m360(1.769953 + 0.0002256 * T + 2.3E-07 * Tsquared);\n};\n\nEPO.neptuneLongitudeAscendingNodeJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    return CT.m360(131.784057 - 0.0061651 * T - 2.19E-06 * Tsquared - 7.8E-08 * Tcubed);\n};\n\nEPO.neptuneLongitudePerihelionJ2000 = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    return CT.m360(48.120276 + 0.0291866 * T + 7.61E-05 * Tsquared);\n};\n\nvar EPO$ = {};\n\nregisterType(\"EPO\", [EPO, EPO$, null]);\n","// Originally `AAELLIPTICAL.CPP`\n// \"Purpose: Implementation for the algorithms for an elliptical orbit\"\n// Last update of original: PJN / 05-06-2006\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { Util } from \"../baseutil.js\";\nimport { C3D, CT } from \"./coordinate_transformation.js\";\nimport { CAAEarth } from \"./earth.js\";\nimport { CAAFK5 } from \"./fk5.js\";\nimport { CAANutation } from \"./nutation.js\";\nimport { CAASun } from \"./sun.js\";\nimport { CAAMercury } from \"./mercury.js\";\nimport { CAAVenus } from \"./venus.js\";\nimport { CAAMars } from \"./mars.js\";\nimport { CAAJupiter } from \"./jupiter.js\";\nimport { CAASaturn } from \"./saturn.js\";\nimport { CAAUranus } from \"./uranus.js\";\nimport { CAANeptune } from \"./neptune.js\";\nimport { CAAPluto } from \"./pluto.js\";\nimport { ABR } from \"./aberration.js\";\nimport { CAAKepler } from \"./kepler.js\";\nimport { Vector3d } from \"../double3d.js\";\n\n\n// EOE - was CAAEllipticalObjectElements\n\nexport function EOE() {\n    this.a = 0;\n    this.e = 0;\n    this.i = 0;\n    this.w = 0;\n    this.omega = 0;\n    this.jdEquinox = 0;\n    this.t = 0;\n    this.n = 0;\n    this.meanAnnomolyOut = 0;\n    this.a = 0;\n    this.e = 0;\n    this.i = 0;\n    this.w = 0;\n    this.omega = 0;\n    this.jdEquinox = 0;\n    this.t = 0;\n}\n\nEOE._create = function (br) {\n    var tmp = new EOE();\n    tmp.a = br.readSingle();\n    tmp.e = br.readSingle();\n    tmp.i = br.readSingle();\n    tmp.w = br.readSingle();\n    tmp.omega = br.readSingle();\n    tmp.jdEquinox = br.readSingle();\n    tmp.t = br.readSingle();\n    return tmp;\n};\n\nvar EOE$ = {};\n\nregisterType(\"EOE\", [EOE, EOE$, null]);\n\n\n// EPD - was CAAEllipticalPlanetaryDetails\n\nexport function EPD() {\n    this.apparentGeocentricLongitude = 0;\n    this.apparentGeocentricLatitude = 0;\n    this.apparentGeocentricDistance = 0;\n    this.apparentLightTime = 0;\n    this.apparentGeocentricRA = 0;\n    this.apparentGeocentricDeclination = 0;\n    this.apparentGeocentricLongitude = 0;\n    this.apparentGeocentricLatitude = 0;\n    this.apparentGeocentricDistance = 0;\n    this.apparentLightTime = 0;\n    this.apparentGeocentricRA = 0;\n    this.apparentGeocentricDeclination = 0;\n}\n\nvar EPD$ = {};\n\nregisterType(\"EPD\", [EPD, EPD$, null]);\n\n\n// EOD - was CAAEllipticalObjectDetails\n\nexport function EOD() {\n    this.heliocentricRectangularEquatorial = new C3D();\n    this.heliocentricRectangularEcliptical = new C3D();\n    this.heliocentricEclipticLongitude = 0;\n    this.heliocentricEclipticLatitude = 0;\n    this.trueGeocentricRA = 0;\n    this.trueGeocentricDeclination = 0;\n    this.trueGeocentricDistance = 0;\n    this.trueGeocentricLightTime = 0;\n    this.astrometricGeocenticRA = 0;\n    this.astrometricGeocentricDeclination = 0;\n    this.astrometricGeocentricDistance = 0;\n    this.astrometricGeocentricLightTime = 0;\n    this.elongation = 0;\n    this.phaseAngle = 0;\n    this.heliocentricEclipticLongitude = 0;\n    this.heliocentricEclipticLatitude = 0;\n    this.trueGeocentricRA = 0;\n    this.trueGeocentricDeclination = 0;\n    this.trueGeocentricDistance = 0;\n    this.trueGeocentricLightTime = 0;\n    this.astrometricGeocenticRA = 0;\n    this.astrometricGeocentricDeclination = 0;\n    this.astrometricGeocentricDistance = 0;\n    this.astrometricGeocentricLightTime = 0;\n    this.elongation = 0;\n    this.phaseAngle = 0;\n}\n\nvar EOD$ = {};\n\nregisterType(\"EOD\", [EOD, EOD$, null]);\n\n\n// EO - was EllipticalObject\n\nexport var EO = {\n    SUN: 0,\n    MERCURY: 1,\n    VENUS: 2,\n    MARS: 3,\n    JUPITER: 4,\n    SATURN: 5,\n    URANUS: 6,\n    NEPTUNE: 7,\n    PLUTO: 8\n};\n\nregisterType(\"EO\", EO);\n\n\n// ELL - was CAAElliptical\n\nexport function ELL() { }\n\nELL.distanceToLightTime = function (Distance) {\n    return Distance * 0.0057755183;\n};\n\nELL.calculate = function (JD, oobject) {\n    var details = new EPD();\n    var JD0 = JD;\n    var L0 = 0;\n    var B0 = 0;\n    var R0 = 0;\n    var cosB0 = 0;\n    if (!!oobject) {\n        L0 = CAAEarth.eclipticLongitude(JD0);\n        B0 = CAAEarth.eclipticLatitude(JD0);\n        R0 = CAAEarth.radiusVector(JD0);\n        L0 = CT.d2R(L0);\n        B0 = CT.d2R(B0);\n        cosB0 = Math.cos(B0);\n    }\n    var L = 0;\n    var B = 0;\n    var R = 0;\n    var Lrad;\n    var Brad;\n    var cosB;\n    var cosL;\n    var x;\n    var y;\n    var z;\n    var bRecalc = true;\n    var bFirstRecalc = true;\n    var LPrevious = 0;\n    var BPrevious = 0;\n    var RPrevious = 0;\n    while (bRecalc) {\n        switch (oobject) {\n            case 0:\n                L = CAASun.geometricEclipticLongitude(JD0);\n                B = CAASun.geometricEclipticLatitude(JD0);\n                R = CAAEarth.radiusVector(JD0);\n                break;\n            case 1:\n                L = CAAMercury.eclipticLongitude(JD0);\n                B = CAAMercury.eclipticLatitude(JD0);\n                R = CAAMercury.radiusVector(JD0);\n                break;\n            case 2:\n                L = CAAVenus.eclipticLongitude(JD0);\n                B = CAAVenus.eclipticLatitude(JD0);\n                R = CAAVenus.radiusVector(JD0);\n                break;\n            case 3:\n                L = CAAMars.eclipticLongitude(JD0);\n                B = CAAMars.eclipticLatitude(JD0);\n                R = CAAMars.radiusVector(JD0);\n                break;\n            case 4:\n                L = CAAJupiter.eclipticLongitude(JD0);\n                B = CAAJupiter.eclipticLatitude(JD0);\n                R = CAAJupiter.radiusVector(JD0);\n                break;\n            case 5:\n                L = CAASaturn.eclipticLongitude(JD0);\n                B = CAASaturn.eclipticLatitude(JD0);\n                R = CAASaturn.radiusVector(JD0);\n                break;\n            case 6:\n                L = CAAUranus.eclipticLongitude(JD0);\n                B = CAAUranus.eclipticLatitude(JD0);\n                R = CAAUranus.radiusVector(JD0);\n                break;\n            case 7:\n                L = CAANeptune.eclipticLongitude(JD0);\n                B = CAANeptune.eclipticLatitude(JD0);\n                R = CAANeptune.radiusVector(JD0);\n                break;\n            case 8:\n                L = CAAPluto.eclipticLongitude(JD0);\n                B = CAAPluto.eclipticLatitude(JD0);\n                R = CAAPluto.radiusVector(JD0);\n                break;\n            default:\n                console.assert(false);\n                break;\n        }\n        if (!bFirstRecalc) {\n            bRecalc = ((Math.abs(L - LPrevious) > 1E-05) || (Math.abs(B - BPrevious) > 1E-05) || (Math.abs(R - RPrevious) > 1E-06));\n            LPrevious = L;\n            BPrevious = B;\n            RPrevious = R;\n        }\n        else {\n            bFirstRecalc = false;\n        }\n        if (bRecalc) {\n            var distance = 0;\n            if (!!oobject) {\n                Lrad = CT.d2R(L);\n                Brad = CT.d2R(B);\n                cosB = Math.cos(Brad);\n                cosL = Math.cos(Lrad);\n                x = R * cosB * cosL - R0 * cosB0 * Math.cos(L0);\n                y = R * cosB * Math.sin(Lrad) - R0 * cosB0 * Math.sin(L0);\n                z = R * Math.sin(Brad) - R0 * Math.sin(B0);\n                distance = Math.sqrt(x * x + y * y + z * z);\n            }\n            else {\n                distance = R;\n            }\n            JD0 = JD - ELL.distanceToLightTime(distance);\n        }\n    }\n    Lrad = CT.d2R(L);\n    Brad = CT.d2R(B);\n    cosB = Math.cos(Brad);\n    cosL = Math.cos(Lrad);\n    x = R * cosB * cosL - R0 * cosB0 * Math.cos(L0);\n    y = R * cosB * Math.sin(Lrad) - R0 * cosB0 * Math.sin(L0);\n    z = R * Math.sin(Brad) - R0 * Math.sin(B0);\n    var x2 = x * x;\n    var y2 = y * y;\n    details.apparentGeocentricLatitude = CT.r2D(Math.atan2(z, Math.sqrt(x2 + y2)));\n    details.apparentGeocentricDistance = Math.sqrt(x2 + y2 + z * z);\n    details.apparentGeocentricLongitude = CT.m360(CT.r2D(Math.atan2(y, x)));\n    details.apparentLightTime = ELL.distanceToLightTime(details.apparentGeocentricDistance);\n    var Aberration = ABR.eclipticAberration(details.apparentGeocentricLongitude, details.apparentGeocentricLatitude, JD);\n    details.apparentGeocentricLongitude += Aberration.x;\n    details.apparentGeocentricLatitude += Aberration.y;\n    var DeltaLong = CAAFK5.correctionInLongitude(details.apparentGeocentricLongitude, details.apparentGeocentricLatitude, JD);\n    details.apparentGeocentricLatitude += CAAFK5.correctionInLatitude(details.apparentGeocentricLongitude, JD);\n    details.apparentGeocentricLongitude += DeltaLong;\n    var NutationInLongitude = CAANutation.nutationInLongitude(JD);\n    var Epsilon = CAANutation.trueObliquityOfEcliptic(JD);\n    details.apparentGeocentricLongitude += CT.dmS2D(0, 0, NutationInLongitude);\n    var ApparentEqu = CT.ec2Eq(details.apparentGeocentricLongitude, details.apparentGeocentricLatitude, Epsilon);\n    details.apparentGeocentricRA = ApparentEqu.x;\n    details.apparentGeocentricDeclination = ApparentEqu.y;\n    return details;\n};\n\nELL.semiMajorAxisFromPerihelionDistance = function (q, e) {\n    return q / (1 - e);\n};\n\nELL.meanMotionFromSemiMajorAxis = function (a) {\n    return 0.9856076686 / (a * Math.sqrt(a));\n};\n\nELL.calculateRectangularJD = function (JD, elements) {\n    var JD0 = JD;\n    var omega = CT.d2R(elements.omega);\n    var w = CT.d2R(elements.w);\n    var i = CT.d2R(elements.i);\n    var sinEpsilon = 0;\n    var cosEpsilon = 1;\n    var sinOmega = Math.sin(omega);\n    var cosOmega = Math.cos(omega);\n    var cosi = Math.cos(i);\n    var sini = Math.sin(i);\n    var F = cosOmega;\n    var G = sinOmega * cosEpsilon;\n    var H = sinOmega * sinEpsilon;\n    var P = -sinOmega * cosi;\n    var Q = cosOmega * cosi * cosEpsilon - sini * sinEpsilon;\n    var R = cosOmega * cosi * sinEpsilon + sini * cosEpsilon;\n    var a = Math.sqrt(F * F + P * P);\n    var b = Math.sqrt(G * G + Q * Q);\n    var c = Math.sqrt(H * H + R * R);\n    var A = Math.atan2(F, P);\n    var B = Math.atan2(G, Q);\n    var C = Math.atan2(H, R);\n    var M = elements.n * (JD0 - elements.t);\n    elements.meanAnnomolyOut = M;\n    var E = CAAKepler.calculate(M, elements.e);\n    E = CT.d2R(E);\n    var v = 2 * Math.atan(Math.sqrt((1 + elements.e) / (1 - elements.e)) * Math.tan(E / 2));\n    var r = elements.a * (1 - elements.e * Math.cos(E));\n    var x = r * a * Math.sin(A + w + v);\n    var y = r * b * Math.sin(B + w + v);\n    var z = r * c * Math.sin(C + w + v);\n    return Vector3d.create(x, z, y);\n};\n\nELL.calculateRectangular = function (elements, meanAnomoly) {\n    var omega = CT.d2R(elements.omega);\n    var w = CT.d2R(elements.w);\n    var i = CT.d2R(elements.i);\n    var sinEpsilon = 0;\n    var cosEpsilon = 1;\n    var sinOmega = Math.sin(omega);\n    var cosOmega = Math.cos(omega);\n    var cosi = Math.cos(i);\n    var sini = Math.sin(i);\n    var F = cosOmega;\n    var G = sinOmega * cosEpsilon;\n    var H = sinOmega * sinEpsilon;\n    var P = -sinOmega * cosi;\n    var Q = cosOmega * cosi * cosEpsilon - sini * sinEpsilon;\n    var R = cosOmega * cosi * sinEpsilon + sini * cosEpsilon;\n    var a = Math.sqrt(F * F + P * P);\n    var b = Math.sqrt(G * G + Q * Q);\n    var c = Math.sqrt(H * H + R * R);\n    var A = Math.atan2(F, P);\n    var B = Math.atan2(G, Q);\n    var C = Math.atan2(H, R);\n    var n = elements.n;\n    var M = meanAnomoly;\n    var E = CAAKepler.calculate(M, elements.e);\n    E = CT.d2R(E);\n    var v = 2 * Math.atan(Math.sqrt((1 + elements.e) / (1 - elements.e)) * Math.tan(E / 2));\n    var r = elements.a * (1 - elements.e * Math.cos(E));\n    var x = r * a * Math.sin(A + w + v);\n    var y = r * b * Math.sin(B + w + v);\n    var z = r * c * Math.sin(C + w + v);\n    return Vector3d.create(x, z, y);\n};\n\nELL.calculateElements = function (JD, elements) {\n    var Epsilon = CAANutation.meanObliquityOfEcliptic(elements.jdEquinox);\n    var JD0 = JD;\n    var details = new EOD();\n    Epsilon = CT.d2R(Epsilon);\n    var omega = CT.d2R(elements.omega);\n    var w = CT.d2R(elements.w);\n    var i = CT.d2R(elements.i);\n    var sinEpsilon = Math.sin(Epsilon);\n    var cosEpsilon = Math.cos(Epsilon);\n    var sinOmega = Math.sin(omega);\n    var cosOmega = Math.cos(omega);\n    var cosi = Math.cos(i);\n    var sini = Math.sin(i);\n    var F = cosOmega;\n    var G = sinOmega * cosEpsilon;\n    var H = sinOmega * sinEpsilon;\n    var P = -sinOmega * cosi;\n    var Q = cosOmega * cosi * cosEpsilon - sini * sinEpsilon;\n    var R = cosOmega * cosi * sinEpsilon + sini * cosEpsilon;\n    var a = Math.sqrt(F * F + P * P);\n    var b = Math.sqrt(G * G + Q * Q);\n    var c = Math.sqrt(H * H + R * R);\n    var A = Math.atan2(F, P);\n    var B = Math.atan2(G, Q);\n    var C = Math.atan2(H, R);\n    var n = ELL.meanMotionFromSemiMajorAxis(elements.a);\n    var SunCoord = CAASun.equatorialRectangularCoordinatesAnyEquinox(JD, elements.jdEquinox);\n    for (var j = 0; j < 2; j++) {\n        var M = n * (JD0 - elements.t);\n        var E = CAAKepler.calculate(M, elements.e);\n        E = CT.d2R(E);\n        var v = 2 * Math.atan(Math.sqrt((1 + elements.e) / (1 - elements.e)) * Math.tan(E / 2));\n        var r = elements.a * (1 - elements.e * Math.cos(E));\n        var x = r * a * Math.sin(A + w + v);\n        var y = r * b * Math.sin(B + w + v);\n        var z = r * c * Math.sin(C + w + v);\n        if (!j) {\n            details.heliocentricRectangularEquatorial.x = x;\n            details.heliocentricRectangularEquatorial.y = y;\n            details.heliocentricRectangularEquatorial.z = z;\n            var u = omega + v;\n            var cosu = Math.cos(u);\n            var sinu = Math.sin(u);\n            details.heliocentricRectangularEcliptical.x = r * (cosOmega * cosu - sinOmega * sinu * cosi);\n            details.heliocentricRectangularEcliptical.y = r * (sinOmega * cosu + cosOmega * sinu * cosi);\n            details.heliocentricRectangularEcliptical.z = r * sini * sinu;\n            details.heliocentricEclipticLongitude = Math.atan2(y, x);\n            details.heliocentricEclipticLongitude = CT.m24(CT.r2D(details.heliocentricEclipticLongitude) / 15);\n            details.heliocentricEclipticLatitude = Math.asin(z / r);\n            details.heliocentricEclipticLatitude = CT.r2D(details.heliocentricEclipticLatitude);\n        }\n        var psi = SunCoord.x + x;\n        var nu = SunCoord.y + y;\n        var sigma = SunCoord.z + z;\n        var Alpha = Math.atan2(nu, psi);\n        Alpha = CT.r2D(Alpha);\n        var Delta = Math.atan2(sigma, Math.sqrt(psi * psi + nu * nu));\n        Delta = CT.r2D(Delta);\n        var Distance = Math.sqrt(psi * psi + nu * nu + sigma * sigma);\n        if (!j) {\n            details.trueGeocentricRA = CT.m24(Alpha / 15);\n            details.trueGeocentricDeclination = Delta;\n            details.trueGeocentricDistance = Distance;\n            details.trueGeocentricLightTime = ELL.distanceToLightTime(Distance);\n        }\n        else {\n            details.astrometricGeocenticRA = CT.m24(Alpha / 15);\n            details.astrometricGeocentricDeclination = Delta;\n            details.astrometricGeocentricDistance = Distance;\n            details.astrometricGeocentricLightTime = ELL.distanceToLightTime(Distance);\n            var RES = Math.sqrt(SunCoord.x * SunCoord.x + SunCoord.y * SunCoord.y + SunCoord.z * SunCoord.z);\n            details.elongation = Math.acos((RES * RES + Distance * Distance - r * r) / (2 * RES * Distance));\n            details.elongation = CT.r2D(details.elongation);\n            details.phaseAngle = Math.acos((r * r + Distance * Distance - RES * RES) / (2 * r * Distance));\n            details.phaseAngle = CT.r2D(details.phaseAngle);\n        }\n        if (!j) {\n            JD0 = JD - details.trueGeocentricLightTime;\n        }\n    }\n    return details;\n};\n\nELL.instantaneousVelocity = function (r, a) {\n    return 42.1219 * Math.sqrt((1 / r) - (1 / (2 * a)));\n};\n\nELL.velocityAtPerihelion = function (e, a) {\n    return 29.7847 / Math.sqrt(a) * Math.sqrt((1 + e) / (1 - e));\n};\n\nELL.velocityAtAphelion = function (e, a) {\n    return 29.7847 / Math.sqrt(a) * Math.sqrt((1 - e) / (1 + e));\n};\n\nELL.lengthOfEllipse = function (e, a) {\n    var b = a * Math.sqrt(1 - e * e);\n    return CT.PI() * (3 * (a + b) - Math.sqrt((a + 3 * b) * (3 * a + b)));\n};\n\nELL.cometMagnitude = function (g, delta, k, r) {\n    return g + 5 * Util.log10(delta) + k * Util.log10(r);\n};\n\nELL.minorPlanetMagnitude = function (H, delta, G, r, PhaseAngle) {\n    PhaseAngle = CT.d2R(PhaseAngle);\n    var phi1 = Math.exp(-3.33 * Math.pow(Math.tan(PhaseAngle / 2), 0.63));\n    var phi2 = Math.exp(-1.87 * Math.pow(Math.tan(PhaseAngle / 2), 1.22));\n    return H + 5 * Util.log10(r * delta) - 2.5 * Util.log10((1 - G) * phi1 + G * phi2);\n};\n\nvar ELL$ = {};\n\nregisterType(\"ELL\", [ELL, ELL$, null]);\n","// Originally `AAEQUATIONOFTIME.CPP`\n// \"Purpose: Implementation for the algorithms to calculate the \"Equation of Time\"\"\n// Last update of original: PJN / 05-07-2005\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { CAANutation } from \"./nutation.js\";\nimport { CAASun } from \"./sun.js\";\n\n\n// EOT\n\nexport function EOT() { }\n\nEOT.calculate = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var rho5 = rho4 * rho;\n    var L0 = CT.m360(280.4664567 + 360007.6982779 * rho + 0.03032028 * rhosquared + rhocubed / 49931 - rho4 / 15300 - rho5 / 2000000);\n    var SunLong = CAASun.apparentEclipticLongitude(JD);\n    var SunLat = CAASun.apparentEclipticLatitude(JD);\n    var epsilon = CAANutation.trueObliquityOfEcliptic(JD);\n    var Equatorial = CT.ec2Eq(SunLong, SunLat, epsilon);\n    epsilon = CT.d2R(epsilon);\n    var E = L0 - 0.0057183 - Equatorial.x * 15 + CT.dmS2D(0, 0, CAANutation.nutationInLongitude(JD)) * Math.cos(epsilon);\n    if (E > 180) {\n        E = -(360 - E);\n    }\n    E *= 4;\n    return E;\n};\n\nvar EOT$ = {};\n\nregisterType(\"EOT\", [EOT, EOT$, null]);\n","// Originally `AAFK5.CPP`\n// \"Purpose: Implementation for the algorithms to convert to the FK5 standard reference frame\"\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { C3D, CT } from \"./coordinate_transformation.js\";\n\n\n// CAAFK5\n\nexport function CAAFK5() { }\n\nCAAFK5.correctionInLongitude = function (Longitude, Latitude, JD) {\n    var T = (JD - 2451545) / 36525;\n    var Ldash = Longitude - 1.397 * T - 0.00031 * T * T;\n    Ldash = CT.d2R(Ldash);\n    Longitude = CT.d2R(Longitude);\n    Latitude = CT.d2R(Latitude);\n    var vvalue = -0.09033 + 0.03916 * (Math.cos(Ldash) + Math.sin(Ldash)) * Math.tan(Latitude);\n    return CT.dmS2D(0, 0, vvalue);\n};\n\nCAAFK5.correctionInLatitude = function (Longitude, JD) {\n    var T = (JD - 2451545) / 36525;\n    var Ldash = Longitude - 1.397 * T - 0.00031 * T * T;\n    Ldash = CT.d2R(Ldash);\n    Longitude = CT.d2R(Longitude);\n    var vvalue = 0.03916 * (Math.cos(Ldash) - Math.sin(Ldash));\n    return CT.dmS2D(0, 0, vvalue);\n};\n\nCAAFK5.convertVSOPToFK5J2000 = function (vvalue) {\n    var result = new C3D();\n    result.x = vvalue.x + 4.4036E-07 * vvalue.y - 1.90919E-07 * vvalue.z;\n    result.y = -4.79966E-07 * vvalue.x + 0.917482137087 * vvalue.y - 0.397776982902 * vvalue.z;\n    result.z = 0.397776982902 * vvalue.y + 0.917482137087 * vvalue.z;\n    return result;\n};\n\nCAAFK5.convertVSOPToFK5B1950 = function (vvalue) {\n    var result = new C3D();\n    result.x = 0.999925702634 * vvalue.x + 0.012189716217 * vvalue.y + 1.1134016E-05 * vvalue.z;\n    result.y = -0.011179418036 * vvalue.x + 0.917413998946 * vvalue.y - 0.397777041885 * vvalue.z;\n    result.z = -0.004859003787 * vvalue.x + 0.397747363646 * vvalue.y + 0.917482111428 * vvalue.z;\n    return result;\n};\n\nCAAFK5.convertVSOPToFK5AnyEquinox = function (vvalue, JDEquinox) {\n    var t = (JDEquinox - 2451545) / 36525;\n    var tsquared = t * t;\n    var tcubed = tsquared * t;\n    var sigma = 2306.2181 * t + 0.30188 * tsquared + 0.017988 * tcubed;\n    sigma = CT.d2R(CT.dmS2D(0, 0, sigma));\n    var zeta = 2306.2181 * t + 1.09468 * tsquared + 0.018203 * tcubed;\n    zeta = CT.d2R(CT.dmS2D(0, 0, zeta));\n    var phi = 2004.3109 * t - 0.42665 * tsquared - 0.041833 * tcubed;\n    phi = CT.d2R(CT.dmS2D(0, 0, phi));\n    var cossigma = Math.cos(sigma);\n    var coszeta = Math.cos(zeta);\n    var cosphi = Math.cos(phi);\n    var sinsigma = Math.sin(sigma);\n    var sinzeta = Math.sin(zeta);\n    var sinphi = Math.sin(phi);\n    var xx = cossigma * coszeta * cosphi - sinsigma * sinzeta;\n    var xy = sinsigma * coszeta + cossigma * sinzeta * cosphi;\n    var xz = cossigma * sinphi;\n    var yx = -cossigma * sinzeta - sinsigma * coszeta * cosphi;\n    var yy = cossigma * coszeta - sinsigma * sinzeta * cosphi;\n    var yz = -sinsigma * sinphi;\n    var zx = -coszeta * sinphi;\n    var zy = -sinzeta * sinphi;\n    var zz = cosphi;\n    var result = new C3D();\n    result.x = xx * vvalue.x + yx * vvalue.y + zx * vvalue.z;\n    result.y = xy * vvalue.x + yy * vvalue.y + zy * vvalue.z;\n    result.z = xz * vvalue.x + yz * vvalue.y + zz * vvalue.z;\n    return result;\n};\n\nvar CAAFK5$ = {};\n\nregisterType(\"CAAFK5\", [CAAFK5, CAAFK5$, null]);\n","// Originally `AAGALILEANMOONS.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the positions of the 4 great moons of Jupiter\"\n// Last update of original: PJN / 06-01-2004\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { C3D, CT } from \"./coordinate_transformation.js\";\nimport { CAASun } from \"./sun.js\";\nimport { CAAEarth } from \"./earth.js\";\nimport { CAAJupiter } from \"./jupiter.js\";\nimport { ELL } from \"./elliptical.js\";\nimport { EPO } from \"./elements_planetary_orbit.js\";\n\n\n// GMD - was CAAGalileanMoonDetail\n\nexport function GMD() {\n    this.meanLongitude = 0;\n    this.trueLongitude = 0;\n    this.tropicalLongitude = 0;\n    this.equatorialLatitude = 0;\n    this.r = 0;\n    this.eclipticRectangularCoordinates = new C3D();\n    this.trueRectangularCoordinates = new C3D();\n    this.apparentRectangularCoordinates = new C3D();\n    this.bInTransit = false;\n    this.bInOccultation = false;\n    this.bInEclipse = false;\n    this.bInShadowTransit = false;\n    this.apparentShadowRectangularCoordinates = new C3D();\n    this.meanLongitude = 0;\n    this.trueLongitude = 0;\n    this.tropicalLongitude = 0;\n    this.equatorialLatitude = 0;\n    this.r = 0;\n    this.bInTransit = false;\n    this.bInOccultation = false;\n    this.bInEclipse = false;\n    this.bInShadowTransit = false;\n}\n\nvar GMD$ = {};\n\nregisterType(\"GMD\", [GMD, GMD$, null]);\n\n\n// GMDS - was CAAGalileanMoonsDetails\n\nexport function GMDS() {\n    this.satellite1 = new GMD();\n    this.satellite2 = new GMD();\n    this.satellite3 = new GMD();\n    this.satellite4 = new GMD();\n}\n\nvar GMDS$ = {};\n\nregisterType(\"GMDS\", [GMDS, GMDS$, null]);\n\n\n// GM - was CAAGalileanMoons\n\nexport function GM() { }\n\nGM.calculate = function (JD) {\n    var sunlong = CAASun.geometricEclipticLongitude(JD);\n    var sunlongrad = CT.d2R(sunlong);\n    var beta = CAASun.geometricEclipticLatitude(JD);\n    var betarad = CT.d2R(beta);\n    var R = CAAEarth.radiusVector(JD);\n    var DELTA = 5;\n    var PreviousEarthLightTravelTime = 0;\n    var EarthLightTravelTime = ELL.distanceToLightTime(DELTA);\n    var JD1 = JD - EarthLightTravelTime;\n    var bIterate = true;\n    var x = 0;\n    var y = 0;\n    var z = 0;\n    var l = 0;\n    var lrad = 0;\n    var b = 0;\n    var brad = 0;\n    var r = 0;\n    while (bIterate) {\n        l = CAAJupiter.eclipticLongitude(JD1);\n        lrad = CT.d2R(l);\n        b = CAAJupiter.eclipticLatitude(JD1);\n        brad = CT.d2R(b);\n        r = CAAJupiter.radiusVector(JD1);\n        x = r * Math.cos(brad) * Math.cos(lrad) + R * Math.cos(sunlongrad);\n        y = r * Math.cos(brad) * Math.sin(lrad) + R * Math.sin(sunlongrad);\n        z = r * Math.sin(brad) + R * Math.sin(betarad);\n        DELTA = Math.sqrt(x * x + y * y + z * z);\n        EarthLightTravelTime = ELL.distanceToLightTime(DELTA);\n        bIterate = (Math.abs(EarthLightTravelTime - PreviousEarthLightTravelTime) > 2E-06);\n        if (bIterate) {\n            JD1 = JD - EarthLightTravelTime;\n            PreviousEarthLightTravelTime = EarthLightTravelTime;\n        }\n    }\n    var details1 = GM.calculateHelper(JD, sunlongrad, betarad, R);\n    GM.fillInPhenomenaDetails(details1.satellite1);\n    GM.fillInPhenomenaDetails(details1.satellite2);\n    GM.fillInPhenomenaDetails(details1.satellite3);\n    GM.fillInPhenomenaDetails(details1.satellite4);\n    JD1 = JD - EarthLightTravelTime;\n    l = CAAJupiter.eclipticLongitude(JD1);\n    lrad = CT.d2R(l);\n    b = CAAJupiter.eclipticLatitude(JD1);\n    brad = CT.d2R(b);\n    r = CAAJupiter.radiusVector(JD1);\n    x = r * Math.cos(brad) * Math.cos(lrad);\n    y = r * Math.cos(brad) * Math.sin(lrad);\n    z = r * Math.sin(brad);\n    DELTA = Math.sqrt(x * x + y * y + z * z);\n    var SunLightTravelTime = ELL.distanceToLightTime(DELTA);\n    var details2 = GM.calculateHelper(JD + SunLightTravelTime - EarthLightTravelTime, sunlongrad, betarad, 0);\n    GM.fillInPhenomenaDetails(details2.satellite1);\n    GM.fillInPhenomenaDetails(details2.satellite2);\n    GM.fillInPhenomenaDetails(details2.satellite3);\n    GM.fillInPhenomenaDetails(details2.satellite4);\n    details1.satellite1.bInEclipse = details2.satellite1.bInOccultation;\n    details1.satellite2.bInEclipse = details2.satellite2.bInOccultation;\n    details1.satellite3.bInEclipse = details2.satellite3.bInOccultation;\n    details1.satellite4.bInEclipse = details2.satellite4.bInOccultation;\n    details1.satellite1.bInShadowTransit = details2.satellite1.bInTransit;\n    details1.satellite2.bInShadowTransit = details2.satellite2.bInTransit;\n    details1.satellite3.bInShadowTransit = details2.satellite3.bInTransit;\n    details1.satellite4.bInShadowTransit = details2.satellite4.bInTransit;\n    details1.satellite1.apparentShadowRectangularCoordinates = details2.satellite1.apparentRectangularCoordinates;\n    details1.satellite2.apparentShadowRectangularCoordinates = details2.satellite2.apparentRectangularCoordinates;\n    details1.satellite3.apparentShadowRectangularCoordinates = details2.satellite3.apparentRectangularCoordinates;\n    details1.satellite4.apparentShadowRectangularCoordinates = details2.satellite4.apparentRectangularCoordinates;\n    return details1;\n};\n\nGM.calculateHelper = function (JD, sunlongrad, betarad, R) {\n    var details = new GMDS();\n    var DELTA = 5;\n    var PreviousLightTravelTime = 0;\n    var LightTravelTime = ELL.distanceToLightTime(DELTA);\n    var x = 0;\n    var y = 0;\n    var z = 0;\n    var l = 0;\n    var lrad = 0;\n    var b = 0;\n    var brad = 0;\n    var r = 0;\n    var JD1 = JD - LightTravelTime;\n    var bIterate = true;\n    while (bIterate) {\n        l = CAAJupiter.eclipticLongitude(JD1);\n        lrad = CT.d2R(l);\n        b = CAAJupiter.eclipticLatitude(JD1);\n        brad = CT.d2R(b);\n        r = CAAJupiter.radiusVector(JD1);\n        x = r * Math.cos(brad) * Math.cos(lrad) + R * Math.cos(sunlongrad);\n        y = r * Math.cos(brad) * Math.sin(lrad) + R * Math.sin(sunlongrad);\n        z = r * Math.sin(brad) + R * Math.sin(betarad);\n        DELTA = Math.sqrt(x * x + y * y + z * z);\n        LightTravelTime = ELL.distanceToLightTime(DELTA);\n        bIterate = (Math.abs(LightTravelTime - PreviousLightTravelTime) > 2E-06);\n        if (bIterate) {\n            JD1 = JD - LightTravelTime;\n            PreviousLightTravelTime = LightTravelTime;\n        }\n    }\n    var lambda0 = Math.atan2(y, x);\n    var beta0 = Math.atan(z / Math.sqrt(x * x + y * y));\n    var t = JD - 2443000.5 - LightTravelTime;\n    var l1 = 106.07719 + 203.48895579 * t;\n    var l1rad = CT.d2R(l1);\n    var l2 = 175.73161 + 101.374724735 * t;\n    var l2rad = CT.d2R(l2);\n    var l3 = 120.55883 + 50.317609207 * t;\n    var l3rad = CT.d2R(l3);\n    var l4 = 84.44459 + 21.571071177 * t;\n    var l4rad = CT.d2R(l4);\n    var pi1 = CT.d2R(CT.m360(97.0881 + 0.16138586 * t));\n    var pi2 = CT.d2R(CT.m360(154.8663 + 0.04726307 * t));\n    var pi3 = CT.d2R(CT.m360(188.184 + 0.00712734 * t));\n    var pi4 = CT.d2R(CT.m360(335.2868 + 0.00184 * t));\n    var w1 = 312.3346 - 0.13279386 * t;\n    var w1rad = CT.d2R(w1);\n    var w2 = 100.4411 - 0.03263064 * t;\n    var w2rad = CT.d2R(w2);\n    var w3 = 119.1942 - 0.00717703 * t;\n    var w3rad = CT.d2R(w3);\n    var w4 = 322.6186 - 0.00175934 * t;\n    var w4rad = CT.d2R(w4);\n    var GAMMA = 0.33033 * Math.sin(CT.d2R(163.679 + 0.0010512 * t)) + 0.03439 * Math.sin(CT.d2R(34.486 - 0.0161731 * t));\n    var philambda = CT.d2R(199.6766 + 0.1737919 * t);\n    var psi = CT.d2R(316.5182 - 2.08E-06 * t);\n    var G = CT.d2R(30.23756 + 0.0830925701 * t + GAMMA);\n    var Gdash = CT.d2R(31.97853 + 0.0334597339 * t);\n    var PI = CT.d2R(13.469942);\n    var Sigma1 = 0.47259 * Math.sin(2 * (l1rad - l2rad)) + -0.03478 * Math.sin(pi3 - pi4) + 0.01081 * Math.sin(l2rad - 2 * l3rad + pi3) + 0.00738 * Math.sin(philambda) + 0.00713 * Math.sin(l2rad - 2 * l3rad + pi2) + -0.00674 * Math.sin(pi1 + pi3 - 2 * PI - 2 * G) + 0.00666 * Math.sin(l2rad - 2 * l3rad + pi4) + 0.00445 * Math.sin(l1rad - pi3) + -0.00354 * Math.sin(l1rad - l2rad) + -0.00317 * Math.sin(2 * psi - 2 * PI) + 0.00265 * Math.sin(l1rad - pi4) + -0.00186 * Math.sin(G) + 0.00162 * Math.sin(pi2 - pi3) + 0.00158 * Math.sin(4 * (l1rad - l2rad)) + -0.00155 * Math.sin(l1rad - l3rad) + -0.00138 * Math.sin(psi + w3rad - 2 * PI - 2 * G) + -0.00115 * Math.sin(2 * (l1rad - 2 * l2rad + w2rad)) + 0.00089 * Math.sin(pi2 - pi4) + 0.00085 * Math.sin(l1rad + pi3 - 2 * PI - 2 * G) + 0.00083 * Math.sin(w2rad - w3rad) + 0.00053 * Math.sin(psi - w2rad);\n    var Sigma2 = 1.06476 * Math.sin(2 * (l2rad - l3rad)) + 0.04256 * Math.sin(l1rad - 2 * l2rad + pi3) + 0.03581 * Math.sin(l2rad - pi3) + 0.02395 * Math.sin(l1rad - 2 * l2rad + pi4) + 0.01984 * Math.sin(l2rad - pi4) + -0.01778 * Math.sin(philambda) + 0.01654 * Math.sin(l2rad - pi2) + 0.01334 * Math.sin(l2rad - 2 * l3rad + pi2) + 0.01294 * Math.sin(pi3 - pi4) + -0.01142 * Math.sin(l2rad - l3rad) + -0.01057 * Math.sin(G) + -0.00775 * Math.sin(2 * (psi - PI)) + 0.00524 * Math.sin(2 * (l1rad - l2rad)) + -0.0046 * Math.sin(l1rad - l3rad) + 0.00316 * Math.sin(psi - 2 * G + w3rad - 2 * PI) + -0.00203 * Math.sin(pi1 + pi3 - 2 * PI - 2 * G) + 0.00146 * Math.sin(psi - w3rad) + -0.00145 * Math.sin(2 * G) + 0.00125 * Math.sin(psi - w4rad) + -0.00115 * Math.sin(l1rad - 2 * l3rad + pi3) + -0.00094 * Math.sin(2 * (l2rad - w2rad)) + 0.00086 * Math.sin(2 * (l1rad - 2 * l2rad + w2rad)) + -0.00086 * Math.sin(5 * Gdash - 2 * G + CT.d2R(52.225)) + -0.00078 * Math.sin(l2rad - l4rad) + -0.00064 * Math.sin(3 * l3rad - 7 * l4rad + 4 * pi4) + 0.00064 * Math.sin(pi1 - pi4) + -0.00063 * Math.sin(l1rad - 2 * l3rad + pi4) + 0.00058 * Math.sin(w3rad - w4rad) + 0.00056 * Math.sin(2 * (psi - PI - G)) + 0.00056 * Math.sin(2 * (l2rad - l4rad)) + 0.00055 * Math.sin(2 * (l1rad - l3rad)) + 0.00052 * Math.sin(3 * l3rad - 7 * l4rad + pi3 + 3 * pi4) + -0.00043 * Math.sin(l1rad - pi3) + 0.00041 * Math.sin(5 * (l2rad - l3rad)) + 0.00041 * Math.sin(pi4 - PI) + 0.00032 * Math.sin(w2rad - w3rad) + 0.00032 * Math.sin(2 * (l3rad - G - PI));\n    var Sigma3 = 0.1649 * Math.sin(l3rad - pi3) + 0.09081 * Math.sin(l3rad - pi4) + -0.06907 * Math.sin(l2rad - l3rad) + 0.03784 * Math.sin(pi3 - pi4) + 0.01846 * Math.sin(2 * (l3rad - l4rad)) + -0.0134 * Math.sin(G) + -0.01014 * Math.sin(2 * (psi - PI)) + 0.00704 * Math.sin(l2rad - 2 * l3rad + pi3) + -0.0062 * Math.sin(l2rad - 2 * l3rad + pi2) + -0.00541 * Math.sin(l3rad - l4rad) + 0.00381 * Math.sin(l2rad - 2 * l3rad + pi4) + 0.00235 * Math.sin(psi - w3rad) + 0.00198 * Math.sin(psi - w4rad) + 0.00176 * Math.sin(philambda) + 0.0013 * Math.sin(3 * (l3rad - l4rad)) + 0.00125 * Math.sin(l1rad - l3rad) + -0.00119 * Math.sin(5 * Gdash - 2 * G + CT.d2R(52.225)) + 0.00109 * Math.sin(l1rad - l2rad) + -0.001 * Math.sin(3 * l3rad - 7 * l4rad + 4 * pi4) + 0.00091 * Math.sin(w3rad - w4rad) + 0.0008 * Math.sin(3 * l3rad - 7 * l4rad + pi3 + 3 * pi4) + -0.00075 * Math.sin(2 * l2rad - 3 * l3rad + pi3) + 0.00072 * Math.sin(pi1 + pi3 - 2 * PI - 2 * G) + 0.00069 * Math.sin(pi4 - PI) + -0.00058 * Math.sin(2 * l3rad - 3 * l4rad + pi4) + -0.00057 * Math.sin(l3rad - 2 * l4rad + pi4) + 0.00056 * Math.sin(l3rad + pi3 - 2 * PI - 2 * G) + -0.00052 * Math.sin(l2rad - 2 * l3rad + pi1) + -0.0005 * Math.sin(pi2 - pi3) + 0.00048 * Math.sin(l3rad - 2 * l4rad + pi3) + -0.00045 * Math.sin(2 * l2rad - 3 * l3rad + pi4) + -0.00041 * Math.sin(pi2 - pi4) + -0.00038 * Math.sin(2 * G) + -0.00037 * Math.sin(pi3 - pi4 + w3rad - w4rad) + -0.00032 * Math.sin(3 * l3rad - 7 * l4rad + 2 * pi3 + 2 * pi4) + 0.0003 * Math.sin(4 * (l3rad - l4rad)) + 0.00029 * Math.sin(l3rad + pi4 - 2 * PI - 2 * G) + -0.00028 * Math.sin(w3rad + psi - 2 * PI - 2 * G) + 0.00026 * Math.sin(l3rad - PI - G) + 0.00024 * Math.sin(l2rad - 3 * l3rad + 2 * l4rad) + 0.00021 * Math.sin(l3rad - PI - G) + -0.00021 * Math.sin(l3rad - pi2) + 0.00017 * Math.sin(2 * (l3rad - pi3));\n    var Sigma4 = 0.84287 * Math.sin(l4rad - pi4) + 0.03431 * Math.sin(pi4 - pi3) + -0.03305 * Math.sin(2 * (psi - PI)) + -0.03211 * Math.sin(G) + -0.01862 * Math.sin(l4rad - pi3) + 0.01186 * Math.sin(psi - w4rad) + 0.00623 * Math.sin(l4rad + pi4 - 2 * G - 2 * PI) + 0.00387 * Math.sin(2 * (l4rad - pi4)) + -0.00284 * Math.sin(5 * Gdash - 2 * G + CT.d2R(52.225)) + -0.00234 * Math.sin(2 * (psi - pi4)) + -0.00223 * Math.sin(l3rad - l4rad) + -0.00208 * Math.sin(l4rad - PI) + 0.00178 * Math.sin(psi + w4rad - 2 * pi4) + 0.00134 * Math.sin(pi4 - PI) + 0.00125 * Math.sin(2 * (l4rad - G - PI)) + -0.00117 * Math.sin(2 * G) + -0.00112 * Math.sin(2 * (l3rad - l4rad)) + 0.00107 * Math.sin(3 * l3rad - 7 * l4rad + 4 * pi4) + 0.00102 * Math.sin(l4rad - G - PI) + 0.00096 * Math.sin(2 * l4rad - psi - w4rad) + 0.00087 * Math.sin(2 * (psi - w4rad)) + -0.00085 * Math.sin(3 * l3rad - 7 * l4rad + pi3 + 3 * pi4) + 0.00085 * Math.sin(l3rad - 2 * l4rad + pi4) + -0.00081 * Math.sin(2 * (l4rad - psi)) + 0.00071 * Math.sin(l4rad + pi4 - 2 * PI - 3 * G) + 0.00061 * Math.sin(l1rad - l4rad) + -0.00056 * Math.sin(psi - w3rad) + -0.00054 * Math.sin(l3rad - 2 * l4rad + pi3) + 0.00051 * Math.sin(l2rad - l4rad) + 0.00042 * Math.sin(2 * (psi - G - PI)) + 0.00039 * Math.sin(2 * (pi4 - w4rad)) + 0.00036 * Math.sin(psi + PI - pi4 - w4rad) + 0.00035 * Math.sin(2 * Gdash - G + CT.d2R(188.37)) + -0.00035 * Math.sin(l4rad - pi4 + 2 * PI - 2 * psi) + -0.00032 * Math.sin(l4rad + pi4 - 2 * PI - G) + 0.0003 * Math.sin(2 * Gdash - 2 * G + CT.d2R(149.15)) + 0.00029 * Math.sin(3 * l3rad - 7 * l4rad + 2 * pi3 + 2 * pi4) + 0.00028 * Math.sin(l4rad - pi4 + 2 * psi - 2 * PI) + -0.00028 * Math.sin(2 * (l4rad - w4rad)) + -0.00027 * Math.sin(pi3 - pi4 + w3rad - w4rad) + -0.00026 * Math.sin(5 * Gdash - 3 * G + CT.d2R(188.37)) + 0.00025 * Math.sin(w4rad - w3rad) + -0.00025 * Math.sin(l2rad - 3 * l3rad + 2 * l4rad) + -0.00023 * Math.sin(3 * (l3rad - l4rad)) + 0.00021 * Math.sin(2 * l4rad - 2 * PI - 3 * G) + -0.00021 * Math.sin(2 * l3rad - 3 * l4rad + pi4) + 0.00019 * Math.sin(l4rad - pi4 - G) + -0.00019 * Math.sin(2 * l4rad - pi3 - pi4) + -0.00018 * Math.sin(l4rad - pi4 + G) + -0.00016 * Math.sin(l4rad + pi3 - 2 * PI - 2 * G);\n    details.satellite1.meanLongitude = CT.m360(l1);\n    details.satellite1.trueLongitude = CT.m360(l1 + Sigma1);\n    var L1 = CT.d2R(details.satellite1.trueLongitude);\n    details.satellite2.meanLongitude = CT.m360(l2);\n    details.satellite2.trueLongitude = CT.m360(l2 + Sigma2);\n    var L2 = CT.d2R(details.satellite2.trueLongitude);\n    details.satellite3.meanLongitude = CT.m360(l3);\n    details.satellite3.trueLongitude = CT.m360(l3 + Sigma3);\n    var L3 = CT.d2R(details.satellite3.trueLongitude);\n    details.satellite4.meanLongitude = CT.m360(l4);\n    details.satellite4.trueLongitude = CT.m360(l4 + Sigma4);\n    var L4 = CT.d2R(details.satellite4.trueLongitude);\n    var B1 = Math.atan(0.0006393 * Math.sin(L1 - w1rad) + 0.0001825 * Math.sin(L1 - w2rad) + 3.29E-05 * Math.sin(L1 - w3rad) + -3.11E-05 * Math.sin(L1 - psi) + 9.3E-06 * Math.sin(L1 - w4rad) + 7.5E-06 * Math.sin(3 * L1 - 4 * l2rad - 1.9927 * Sigma1 + w2rad) + 4.6E-06 * Math.sin(L1 + psi - 2 * PI - 2 * G));\n    details.satellite1.equatorialLatitude = CT.r2D(B1);\n    var B2 = Math.atan(0.0081004 * Math.sin(L2 - w2rad) + 0.0004512 * Math.sin(L2 - w3rad) + -0.0003284 * Math.sin(L2 - psi) + 0.000116 * Math.sin(L2 - w4rad) + 2.72E-05 * Math.sin(l1rad - 2 * l3rad + 1.0146 * Sigma2 + w2rad) + -1.44E-05 * Math.sin(L2 - w1rad) + 1.43E-05 * Math.sin(L2 + psi - 2 * PI - 2 * G) + 3.5E-06 * Math.sin(L2 - psi + G) + -2.8E-06 * Math.sin(l1rad - 2 * l3rad + 1.0146 * Sigma2 + w3rad));\n    details.satellite2.equatorialLatitude = CT.r2D(B2);\n    var B3 = Math.atan(0.0032402 * Math.sin(L3 - w3rad) + -0.0016911 * Math.sin(L3 - psi) + 0.0006847 * Math.sin(L3 - w4rad) + -0.0002797 * Math.sin(L3 - w2rad) + 3.21E-05 * Math.sin(L3 + psi - 2 * PI - 2 * G) + 5.1E-06 * Math.sin(L3 - psi + G) + -4.5E-06 * Math.sin(L3 - psi - G) + -4.5E-06 * Math.sin(L3 + psi - 2 * PI) + 3.7E-06 * Math.sin(L3 + psi - 2 * PI - 3 * G) + 3E-06 * Math.sin(2 * l2rad - 3 * L3 + 4.03 * Sigma3 + w2rad) + -2.1E-06 * Math.sin(2 * l2rad - 3 * L3 + 4.03 * Sigma3 + w3rad));\n    details.satellite3.equatorialLatitude = CT.r2D(B3);\n    var B4 = Math.atan(-0.0076579 * Math.sin(L4 - psi) + 0.0044134 * Math.sin(L4 - w4rad) + -0.0005112 * Math.sin(L4 - w3rad) + 7.73E-05 * Math.sin(L4 + psi - 2 * PI - 2 * G) + 1.04E-05 * Math.sin(L4 - psi + G) + -1.02E-05 * Math.sin(L4 - psi - G) + 8.8E-06 * Math.sin(L4 + psi - 2 * PI - 3 * G) + -3.8E-06 * Math.sin(L4 + psi - 2 * PI - G));\n    details.satellite4.equatorialLatitude = CT.r2D(B4);\n    details.satellite1.r = 5.90569 * (1 + (-0.0041339 * Math.cos(2 * (l1rad - l2rad)) + -3.87E-05 * Math.cos(l1rad - pi3) + -2.14E-05 * Math.cos(l1rad - pi4) + 1.7E-05 * Math.cos(l1rad - l2rad) + -1.31E-05 * Math.cos(4 * (l1rad - l2rad)) + 1.06E-05 * Math.cos(l1rad - l3rad) + -6.6E-06 * Math.cos(l1rad + pi3 - 2 * PI - 2 * G)));\n    details.satellite2.r = 9.39657 * (1 + (0.0093848 * Math.cos(l1rad - l2rad) + -0.0003116 * Math.cos(l2rad - pi3) + -0.0001744 * Math.cos(l2rad - pi4) + -0.0001442 * Math.cos(l2rad - pi2) + 5.53E-05 * Math.cos(l2rad - l3rad) + 5.23E-05 * Math.cos(l1rad - l3rad) + -2.9E-05 * Math.cos(2 * (l1rad - l2rad)) + 1.64E-05 * Math.cos(2 * (l2rad - w2rad)) + 1.07E-05 * Math.cos(l1rad - 2 * l3rad + pi3) + -1.02E-05 * Math.cos(l2rad - pi1) + -9.1E-06 * Math.cos(2 * (l1rad - l3rad))));\n    details.satellite3.r = 14.98832 * (1 + (-0.0014388 * Math.cos(l3rad - pi3) + -0.0007919 * Math.cos(l3rad - pi4) + 0.0006342 * Math.cos(l2rad - l3rad) + -0.0001761 * Math.cos(2 * (l3rad - l4rad)) + 2.94E-05 * Math.cos(l3rad - l4rad) + -1.56E-05 * Math.cos(3 * (l3rad - l4rad)) + 1.56E-05 * Math.cos(l1rad - l3rad) + -1.53E-05 * Math.cos(l1rad - l2rad) + 7E-06 * Math.cos(2 * l2rad - 3 * l3rad + pi3) + -5.1E-06 * Math.cos(l3rad + pi3 - 2 * PI - 2 * G)));\n    details.satellite4.r = 26.36273 * (1 + (-0.0073546 * Math.cos(l4rad - pi4) + 0.0001621 * Math.cos(l4rad - pi3) + 9.74E-05 * Math.cos(l3rad - l4rad) + -5.43E-05 * Math.cos(l4rad + pi4 - 2 * PI - 2 * G) + -2.71E-05 * Math.cos(2 * (l4rad - pi4)) + 1.82E-05 * Math.cos(l4rad - PI) + 1.77E-05 * Math.cos(2 * (l3rad - l4rad)) + -1.67E-05 * Math.cos(2 * l4rad - psi - w4rad) + 1.67E-05 * Math.cos(psi - w4rad) + -1.55E-05 * Math.cos(2 * (l4rad - PI - G)) + 1.42E-05 * Math.cos(2 * (l4rad - psi)) + 1.05E-05 * Math.cos(l1rad - l4rad) + 9.2E-06 * Math.cos(l2rad - l4rad) + -8.9E-06 * Math.cos(l4rad - PI - G) + -6.2E-06 * Math.cos(l4rad + pi4 - 2 * PI - 3 * G) + 4.8E-06 * Math.cos(2 * (l4rad - w4rad))));\n    var T0 = (JD - 2433282.423) / 36525;\n    var P = CT.d2R(1.3966626 * T0 + 0.0003088 * T0 * T0);\n    L1 += P;\n    details.satellite1.tropicalLongitude = CT.m360(CT.r2D(L1));\n    L2 += P;\n    details.satellite2.tropicalLongitude = CT.m360(CT.r2D(L2));\n    L3 += P;\n    details.satellite3.tropicalLongitude = CT.m360(CT.r2D(L3));\n    L4 += P;\n    details.satellite4.tropicalLongitude = CT.m360(CT.r2D(L4));\n    psi += P;\n    var T = (JD - 2415020.5) / 36525;\n    var I = 3.120262 + 0.0006 * T;\n    var Irad = CT.d2R(I);\n    var X1 = details.satellite1.r * Math.cos(L1 - psi) * Math.cos(B1);\n    var X2 = details.satellite2.r * Math.cos(L2 - psi) * Math.cos(B2);\n    var X3 = details.satellite3.r * Math.cos(L3 - psi) * Math.cos(B3);\n    var X4 = details.satellite4.r * Math.cos(L4 - psi) * Math.cos(B4);\n    var X5 = 0;\n    var Y1 = details.satellite1.r * Math.sin(L1 - psi) * Math.cos(B1);\n    var Y2 = details.satellite2.r * Math.sin(L2 - psi) * Math.cos(B2);\n    var Y3 = details.satellite3.r * Math.sin(L3 - psi) * Math.cos(B3);\n    var Y4 = details.satellite4.r * Math.sin(L4 - psi) * Math.cos(B4);\n    var Y5 = 0;\n    var Z1 = details.satellite1.r * Math.sin(B1);\n    var Z2 = details.satellite2.r * Math.sin(B2);\n    var Z3 = details.satellite3.r * Math.sin(B3);\n    var Z4 = details.satellite4.r * Math.sin(B4);\n    var Z5 = 1;\n    var omega = CT.d2R(EPO.jupiterLongitudeAscendingNode(JD));\n    var i = CT.d2R(EPO.jupiterInclination(JD));\n    var A6 = 0;\n    var B6 = 0;\n    var C6 = 0;\n    var north = new C3D();\n    var abc = GM.rotations(X5, Y5, Z5, Irad, psi, i, omega, lambda0, beta0, north);\n    A6 = abc[0];\n    B6 = abc[1];\n    C6 = abc[2];\n    var D = Math.atan2(A6, C6);\n    abc = GM.rotations(X1, Y1, Z1, Irad, psi, i, omega, lambda0, beta0, details.satellite1.eclipticRectangularCoordinates);\n    A6 = abc[0];\n    B6 = abc[1];\n    C6 = abc[2];\n    details.satellite1.trueRectangularCoordinates.x = A6 * Math.cos(D) - C6 * Math.sin(D);\n    details.satellite1.trueRectangularCoordinates.y = A6 * Math.sin(D) + C6 * Math.cos(D);\n    details.satellite1.trueRectangularCoordinates.z = B6;\n    abc = GM.rotations(X2, Y2, Z2, Irad, psi, i, omega, lambda0, beta0, details.satellite2.eclipticRectangularCoordinates);\n    A6 = abc[0];\n    B6 = abc[1];\n    C6 = abc[2];\n    details.satellite2.trueRectangularCoordinates.x = A6 * Math.cos(D) - C6 * Math.sin(D);\n    details.satellite2.trueRectangularCoordinates.y = A6 * Math.sin(D) + C6 * Math.cos(D);\n    details.satellite2.trueRectangularCoordinates.z = B6;\n    abc = GM.rotations(X3, Y3, Z3, Irad, psi, i, omega, lambda0, beta0, details.satellite3.eclipticRectangularCoordinates);\n    A6 = abc[0];\n    B6 = abc[1];\n    C6 = abc[2];\n    details.satellite3.trueRectangularCoordinates.x = A6 * Math.cos(D) - C6 * Math.sin(D);\n    details.satellite3.trueRectangularCoordinates.y = A6 * Math.sin(D) + C6 * Math.cos(D);\n    details.satellite3.trueRectangularCoordinates.z = B6;\n    abc = GM.rotations(X4, Y4, Z4, Irad, psi, i, omega, lambda0, beta0, details.satellite4.eclipticRectangularCoordinates);\n    A6 = abc[0];\n    B6 = abc[1];\n    C6 = abc[2];\n    details.satellite4.trueRectangularCoordinates.x = A6 * Math.cos(D) - C6 * Math.sin(D);\n    details.satellite4.trueRectangularCoordinates.y = A6 * Math.sin(D) + C6 * Math.cos(D);\n    details.satellite4.trueRectangularCoordinates.z = B6;\n    details.satellite1.apparentRectangularCoordinates.x = details.satellite1.trueRectangularCoordinates.x + Math.abs(details.satellite1.trueRectangularCoordinates.z) / 17295 * Math.sqrt(1 - (details.satellite1.trueRectangularCoordinates.x / details.satellite1.r) * (details.satellite1.trueRectangularCoordinates.x / details.satellite1.r));\n    details.satellite1.apparentRectangularCoordinates.y = details.satellite1.trueRectangularCoordinates.y;\n    details.satellite1.apparentRectangularCoordinates.z = details.satellite1.trueRectangularCoordinates.z;\n    details.satellite2.apparentRectangularCoordinates.x = details.satellite2.trueRectangularCoordinates.x + Math.abs(details.satellite2.trueRectangularCoordinates.z) / 21819 * Math.sqrt(1 - (details.satellite2.trueRectangularCoordinates.x / details.satellite2.r) * (details.satellite2.trueRectangularCoordinates.x / details.satellite2.r));\n    details.satellite2.apparentRectangularCoordinates.y = details.satellite2.trueRectangularCoordinates.y;\n    details.satellite2.apparentRectangularCoordinates.z = details.satellite2.trueRectangularCoordinates.z;\n    details.satellite3.apparentRectangularCoordinates.x = details.satellite3.trueRectangularCoordinates.x + Math.abs(details.satellite3.trueRectangularCoordinates.z) / 27558 * Math.sqrt(1 - (details.satellite3.trueRectangularCoordinates.x / details.satellite3.r) * (details.satellite3.trueRectangularCoordinates.x / details.satellite3.r));\n    details.satellite3.apparentRectangularCoordinates.y = details.satellite3.trueRectangularCoordinates.y;\n    details.satellite3.apparentRectangularCoordinates.z = details.satellite3.trueRectangularCoordinates.z;\n    details.satellite4.apparentRectangularCoordinates.x = details.satellite4.trueRectangularCoordinates.x + Math.abs(details.satellite4.trueRectangularCoordinates.z) / 36548 * Math.sqrt(1 - (details.satellite4.trueRectangularCoordinates.x / details.satellite4.r) * (details.satellite4.trueRectangularCoordinates.x / details.satellite4.r));\n    details.satellite4.apparentRectangularCoordinates.y = details.satellite4.trueRectangularCoordinates.y;\n    details.satellite4.apparentRectangularCoordinates.z = details.satellite4.trueRectangularCoordinates.z;\n    var W = DELTA / (DELTA + details.satellite1.trueRectangularCoordinates.z / 2095);\n    details.satellite1.apparentRectangularCoordinates.x *= W;\n    details.satellite1.apparentRectangularCoordinates.y *= W;\n    W = DELTA / (DELTA + details.satellite2.trueRectangularCoordinates.z / 2095);\n    details.satellite2.apparentRectangularCoordinates.x *= W;\n    details.satellite2.apparentRectangularCoordinates.y *= W;\n    W = DELTA / (DELTA + details.satellite3.trueRectangularCoordinates.z / 2095);\n    details.satellite3.apparentRectangularCoordinates.x *= W;\n    details.satellite3.apparentRectangularCoordinates.y *= W;\n    W = DELTA / (DELTA + details.satellite4.trueRectangularCoordinates.z / 2095);\n    details.satellite4.apparentRectangularCoordinates.x *= W;\n    details.satellite4.apparentRectangularCoordinates.y *= W;\n    return details;\n};\n\nGM.rotations = function (X, Y, Z, I, psi, i, omega, lambda0, beta0, eclipticCoord) {\n    var A6;\n    var B6;\n    var C6;\n    var phi = psi - omega;\n    var A1 = X;\n    var B1 = Y * Math.cos(I) - Z * Math.sin(I);\n    var C1 = Y * Math.sin(I) + Z * Math.cos(I);\n    var A2 = A1 * Math.cos(phi) - B1 * Math.sin(phi);\n    var B2 = A1 * Math.sin(phi) + B1 * Math.cos(phi);\n    var C2 = C1;\n    var A3 = A2;\n    var B3 = B2 * Math.cos(i) - C2 * Math.sin(i);\n    var C3 = B2 * Math.sin(i) + C2 * Math.cos(i);\n    var A4 = A3 * Math.cos(omega) - B3 * Math.sin(omega);\n    var B4 = A3 * Math.sin(omega) + B3 * Math.cos(omega);\n    var C4 = C3;\n    var JupiterRadiiToAU = 1 / 2095;\n    eclipticCoord.x = A4 * JupiterRadiiToAU;\n    eclipticCoord.y = B4 * JupiterRadiiToAU;\n    eclipticCoord.z = C4 * JupiterRadiiToAU;\n    var A5 = A4 * Math.sin(lambda0) - B4 * Math.cos(lambda0);\n    var B5 = A4 * Math.cos(lambda0) + B4 * Math.sin(lambda0);\n    var C5 = C4;\n    A6 = A5;\n    B6 = C5 * Math.sin(beta0) + B5 * Math.cos(beta0);\n    C6 = C5 * Math.cos(beta0) - B5 * Math.sin(beta0);\n    return [A6, B6, C6];\n};\n\nGM.fillInPhenomenaDetails = function (detail) {\n    var Y1 = 1.071374 * detail.apparentRectangularCoordinates.y;\n    var r = Y1 * Y1 + detail.apparentRectangularCoordinates.x * detail.apparentRectangularCoordinates.x;\n    if (r < 1) {\n        if (detail.apparentRectangularCoordinates.z < 0) {\n            detail.bInTransit = true;\n            detail.bInOccultation = false;\n        }\n        else {\n            detail.bInTransit = false;\n            detail.bInOccultation = true;\n        }\n    }\n    else {\n        detail.bInTransit = false;\n        detail.bInOccultation = false;\n    }\n};\n\nvar GM$ = {};\n\nregisterType(\"GM\", [GM, GM$, null]);\n","// Originally `AAGLOBE.CPP`\n// \"Purpose: Implementation for the algorithms for the Earth's Globe\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// CAAGlobe\n\nexport function CAAGlobe() { }\n\nCAAGlobe.rhoSinThetaPrime = function (GeographicalLatitude, Height) {\n    GeographicalLatitude = CT.d2R(GeographicalLatitude);\n    var U = Math.atan(0.99664719 * Math.tan(GeographicalLatitude));\n    return 0.99664719 * Math.sin(U) + (Height / 6378149 * Math.sin(GeographicalLatitude));\n};\n\nCAAGlobe.rhoCosThetaPrime = function (GeographicalLatitude, Height) {\n    GeographicalLatitude = CT.d2R(GeographicalLatitude);\n    var U = Math.atan(0.99664719 * Math.tan(GeographicalLatitude));\n    return Math.cos(U) + (Height / 6378149 * Math.cos(GeographicalLatitude));\n};\n\nCAAGlobe.radiusOfParallelOfLatitude = function (GeographicalLatitude) {\n    GeographicalLatitude = CT.d2R(GeographicalLatitude);\n    var sinGeo = Math.sin(GeographicalLatitude);\n    return (6378.14 * Math.cos(GeographicalLatitude)) / Math.sqrt(1 - 0.0066943847614084 * sinGeo * sinGeo);\n};\n\nCAAGlobe.radiusOfCurvature = function (GeographicalLatitude) {\n    GeographicalLatitude = CT.d2R(GeographicalLatitude);\n    var sinGeo = Math.sin(GeographicalLatitude);\n    return (6378.14 * (1 - 0.0066943847614084)) / Math.pow((1 - 0.0066943847614084 * sinGeo * sinGeo), 1.5);\n};\n\nCAAGlobe.distanceBetweenPoints = function (GeographicalLatitude1, GeographicalLongitude1, GeographicalLatitude2, GeographicalLongitude2) {\n    GeographicalLatitude1 = CT.d2R(GeographicalLatitude1);\n    GeographicalLatitude2 = CT.d2R(GeographicalLatitude2);\n    GeographicalLongitude1 = CT.d2R(GeographicalLongitude1);\n    GeographicalLongitude2 = CT.d2R(GeographicalLongitude2);\n    var F = (GeographicalLatitude1 + GeographicalLatitude2) / 2;\n    var G = (GeographicalLatitude1 - GeographicalLatitude2) / 2;\n    var lambda = (GeographicalLongitude1 - GeographicalLongitude2) / 2;\n    var sinG = Math.sin(G);\n    var cosG = Math.cos(G);\n    var cosF = Math.cos(F);\n    var sinF = Math.sin(F);\n    var sinLambda = Math.sin(lambda);\n    var cosLambda = Math.cos(lambda);\n    var S = (sinG * sinG * cosLambda * cosLambda) + (cosF * cosF * sinLambda * sinLambda);\n    var C = (cosG * cosG * cosLambda * cosLambda) + (sinF * sinF * sinLambda * sinLambda);\n    var w = Math.atan(Math.sqrt(S / C));\n    var R = Math.sqrt(S * C) / w;\n    var D = 2 * w * 6378.14;\n    var Hprime = (3 * R - 1) / (2 * C);\n    var Hprime2 = (3 * R + 1) / (2 * S);\n    var f = 0.00335281317789691;\n    return D * (1 + (f * Hprime * sinF * sinF * cosG * cosG) - (f * Hprime2 * cosF * cosF * sinG * sinG));\n};\n\nvar CAAGlobe$ = {};\n\nregisterType(\"CAAGlobe\", [CAAGlobe, CAAGlobe$, null]);\n","// Originally `AAILLUMINATEDFRACTION.CPP`\n// \"Purpose: Implementation for the algorithms for a planet's Phase Angle, Illuminated Fraction and Magnitude\"\n// Last update of original: PJN / 21-01-2005\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { Util } from \"../baseutil.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// IFR\n\nexport function IFR() { }\n\nIFR.phaseAngle = function (r, R, Delta) {\n    return CT.m360(CT.r2D(Math.acos((r * r + Delta * Delta - R * R) / (2 * r * Delta))));\n};\n\nIFR.phaseAngle2 = function (R, R0, B, L, L0, Delta) {\n    B = CT.d2R(B);\n    L = CT.d2R(L);\n    L0 = CT.d2R(L0);\n    return CT.m360(CT.r2D(Math.acos((R - R0 * Math.cos(B) * Math.cos(L - L0)) / Delta)));\n};\n\nIFR.phaseAngleRectangular = function (x, y, z, B, L, Delta) {\n    B = CT.d2R(B);\n    L = CT.d2R(L);\n    var cosB = Math.cos(B);\n    return CT.m360(CT.r2D(Math.acos((x * cosB * Math.cos(L) + y * cosB * Math.sin(L) + z * Math.sin(B)) / Delta)));\n};\n\nIFR.illuminatedFraction = function (PhaseAngle) {\n    PhaseAngle = CT.d2R(PhaseAngle);\n    return (1 + Math.cos(PhaseAngle)) / 2;\n};\n\nIFR.illuminatedFraction2 = function (r, R, Delta) {\n    return (((r + Delta) * (r + Delta) - R * R) / (4 * r * Delta));\n};\n\nIFR.mercuryMagnitudeMuller = function (r, Delta, i) {\n    var I_50 = i - 50;\n    return 1.16 + 5 * Util.log10(r * Delta) + 0.02838 * I_50 + 0.0001023 * I_50 * I_50;\n};\n\nIFR.venusMagnitudeMuller = function (r, Delta, i) {\n    return -4 + 5 * Util.log10(r * Delta) + 0.01322 * i + 4.247E-07 * i * i * i;\n};\n\nIFR.marsMagnitudeMuller = function (r, Delta, i) {\n    return -1.3 + 5 * Util.log10(r * Delta) + 0.01486 * i;\n};\n\nIFR.jupiterMagnitudeMuller = function (r, Delta) {\n    return -8.93 + 5 * Util.log10(r * Delta);\n};\n\nIFR.saturnMagnitudeMuller = function (r, Delta, DeltaU, B) {\n    B = CT.d2R(B);\n    var sinB = Math.sin(B);\n    return -8.68 + 5 * Util.log10(r * Delta) + 0.044 * Math.abs(DeltaU) - 2.6 * Math.sin(Math.abs(B)) + 1.25 * sinB * sinB;\n};\n\nIFR.uranusMagnitudeMuller = function (r, Delta) {\n    return -6.85 + 5 * Util.log10(r * Delta);\n};\n\nIFR.neptuneMagnitudeMuller = function (r, Delta) {\n    return -7.05 + 5 * Util.log10(r * Delta);\n};\n\nIFR.mercuryMagnitudeAA = function (r, Delta, i) {\n    var i2 = i * i;\n    var i3 = i2 * i;\n    return -0.42 + 5 * Util.log10(r * Delta) + 0.038 * i - 0.000273 * i2 + 2E-06 * i3;\n};\n\nIFR.venusMagnitudeAA = function (r, Delta, i) {\n    var i2 = i * i;\n    var i3 = i2 * i;\n    return -4.4 + 5 * Util.log10(r * Delta) + 0.0009 * i + 0.000239 * i2 - 6.5E-07 * i3;\n};\n\nIFR.marsMagnitudeAA = function (r, Delta, i) {\n    return -1.52 + 5 * Util.log10(r * Delta) + 0.016 * i;\n};\n\nIFR.jupiterMagnitudeAA = function (r, Delta, i) {\n    return -9.4 + 5 * Util.log10(r * Delta) + 0.005 * i;\n};\n\nIFR.saturnMagnitudeAA = function (r, Delta, DeltaU, B) {\n    B = CT.d2R(B);\n    var sinB = Math.sin(B);\n    return -8.88 + 5 * Util.log10(r * Delta) + 0.044 * Math.abs(DeltaU) - 2.6 * Math.sin(Math.abs(B)) + 1.25 * sinB * sinB;\n};\n\nIFR.uranusMagnitudeAA = function (r, Delta) {\n    return -7.19 + 5 * Util.log10(r * Delta);\n};\n\nIFR.neptuneMagnitudeAA = function (r, Delta) {\n    return -6.87 + 5 * Util.log10(r * Delta);\n};\n\nIFR.plutoMagnitudeAA = function (r, Delta) {\n    return -1 + 5 * Util.log10(r * Delta);\n};\n\nvar IFR$ = {};\n\nregisterType(\"IFR\", [IFR, IFR$, null]);\n","// Originally `AAINTERPOLATE.CPP`\n// \"Purpose: Implementation for the algorithms for Interpolation\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\n\n\n// INTP - was CAAInterpoate\n\nexport function INTP() { }\n\nINTP.interpolate = function (n, Y1, Y2, Y3) {\n    var a = Y2 - Y1;\n    var b = Y3 - Y2;\n    var c = Y1 + Y3 - 2 * Y2;\n    return Y2 + n / 2 * (a + b + n * c);\n};\n\nINTP.interpolate2 = function (n, Y1, Y2, Y3, Y4, Y5) {\n    var A = Y2 - Y1;\n    var B = Y3 - Y2;\n    var C = Y4 - Y3;\n    var D = Y5 - Y4;\n    var E = B - A;\n    var F = C - B;\n    var G = D - C;\n    var H = F - E;\n    var J = G - F;\n    var K = J - H;\n    var N2 = n * n;\n    var N3 = N2 * n;\n    var N4 = N3 * n;\n    return Y3 + n * ((B + C) / 2 - (H + J) / 12) + N2 * (F / 2 - K / 24) + N3 * ((H + J) / 12) + N4 * (K / 24);\n};\n\nINTP.interpolateToHalves = function (Y1, Y2, Y3, Y4) {\n    return (9 * (Y2 + Y3) - Y1 - Y4) / 16;\n};\n\nINTP.lagrangeInterpolate = function (X, n, pX, pY) {\n    var V = 0;\n    for (var i = 1; i <= n; i++) {\n        var C = 1;\n        for (var j = 1; j <= n; j++) {\n            if (j !== i) {\n                C = C * (X - pX[j - 1]) / (pX[i - 1] - pX[j - 1]);\n            }\n        }\n        V += C * pY[i - 1];\n    }\n    return V;\n};\n\nINTP.zero = function (Y1, Y2, Y3) {\n    var a = Y2 - Y1;\n    var b = Y3 - Y2;\n    var c = Y1 + Y3 - 2 * Y2;\n    var bRecalc = true;\n    var n0prev = 0;\n    var n0 = n0prev;\n    while (bRecalc) {\n        n0 = -2 * Y2 / (a + b + c * n0prev);\n        bRecalc = (Math.abs(n0 - n0prev) > 1E-12);\n        if (bRecalc) {\n            n0prev = n0;\n        }\n    }\n    return n0;\n};\n\nINTP.zeroB = function (Y1, Y2, Y3, Y4, Y5) {\n    var A = Y2 - Y1;\n    var B = Y3 - Y2;\n    var C = Y4 - Y3;\n    var D = Y5 - Y4;\n    var E = B - A;\n    var F = C - B;\n    var G = D - C;\n    var H = F - E;\n    var J = G - F;\n    var K = J - H;\n    var bRecalc = true;\n    var n0prev = 0;\n    var n0 = n0prev;\n    while (bRecalc) {\n        var n0prev2 = n0prev * n0prev;\n        var n0prev3 = n0prev2 * n0prev;\n        var n0prev4 = n0prev3 * n0prev;\n        n0 = (-24 * Y3 + n0prev2 * (K - 12 * F) - 2 * n0prev3 * (H + J) - n0prev4 * K) / (2 * (6 * B + 6 * C - H - J));\n        bRecalc = (Math.abs(n0 - n0prev) > 1E-12);\n        if (bRecalc) {\n            n0prev = n0;\n        }\n    }\n    return n0;\n};\n\nINTP.zero2 = function (Y1, Y2, Y3) {\n    var a = Y2 - Y1;\n    var b = Y3 - Y2;\n    var c = Y1 + Y3 - 2 * Y2;\n    var bRecalc = true;\n    var n0prev = 0;\n    var n0 = n0prev;\n    while (bRecalc) {\n        var deltan0 = -(2 * Y2 + n0prev * (a + b + c * n0prev)) / (a + b + 2 * c * n0prev);\n        n0 = n0prev + deltan0;\n        bRecalc = (Math.abs(deltan0) > 1E-12);\n        if (bRecalc) {\n            n0prev = n0;\n        }\n    }\n    return n0;\n};\n\nINTP.zero2B = function (Y1, Y2, Y3, Y4, Y5) {\n    var A = Y2 - Y1;\n    var B = Y3 - Y2;\n    var C = Y4 - Y3;\n    var D = Y5 - Y4;\n    var E = B - A;\n    var F = C - B;\n    var G = D - C;\n    var H = F - E;\n    var J = G - F;\n    var K = J - H;\n    var M = K / 24;\n    var N = (H + J) / 12;\n    var P = F / 2 - M;\n    var Q = (B + C) / 2 - N;\n    var bRecalc = true;\n    var n0prev = 0;\n    var n0 = n0prev;\n    while (bRecalc) {\n        var n0prev2 = n0prev * n0prev;\n        var n0prev3 = n0prev2 * n0prev;\n        var n0prev4 = n0prev3 * n0prev;\n        var deltan0 = -(M * n0prev4 + N * n0prev3 + P * n0prev2 + Q * n0prev + Y3) / (4 * M * n0prev3 + 3 * N * n0prev2 + 2 * P * n0prev + Q);\n        n0 = n0prev + deltan0;\n        bRecalc = (Math.abs(deltan0) > 1E-12);\n        if (bRecalc) {\n            n0prev = n0;\n        }\n    }\n    return n0;\n};\n\nvar INTP$ = {};\n\nregisterType(\"INTP\", [INTP, INTP$, null]);\n","// Originally `AAJUPITER.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the heliocentric position of Uranus [sic]\"\n// Last update of original: PJN / 31-05-2004\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { VSC } from \"./earth.js\";\n\n\n// Coefficients\n\nconst g_L0JupiterCoefficients = [new VSC(59954691, 0, 0), new VSC(9695899, 5.0619179, 529.6909651), new VSC(573610, 1.444062, 7.113547), new VSC(306389, 5.417347, 1059.38193), new VSC(97178, 4.14265, 632.78374), new VSC(72903, 3.64043, 522.57742), new VSC(64264, 3.41145, 103.09277), new VSC(39806, 2.29377, 419.48464), new VSC(38858, 1.27232, 316.39187), new VSC(27965, 1.78455, 536.80451), new VSC(13590, 5.77481, 1589.0729), new VSC(8769, 3.63, 949.1756), new VSC(8246, 3.5823, 206.1855), new VSC(7368, 5.081, 735.8765), new VSC(6263, 0.025, 213.2991), new VSC(6114, 4.5132, 1162.4747), new VSC(5305, 4.1863, 1052.2684), new VSC(5305, 1.3067, 14.2271), new VSC(4905, 1.3208, 110.2063), new VSC(4647, 4.6996, 3.9322), new VSC(3045, 4.3168, 426.5982), new VSC(2610, 1.5667, 846.0828), new VSC(2028, 1.0638, 3.1814), new VSC(1921, 0.9717, 639.8973), new VSC(1765, 2.1415, 1066.4955), new VSC(1723, 3.8804, 1265.5675), new VSC(1633, 3.582, 515.4639), new VSC(1432, 4.2968, 625.6702), new VSC(973, 4.098, 95.979), new VSC(884, 2.437, 412.371), new VSC(733, 6.085, 838.969), new VSC(731, 3.806, 1581.959), new VSC(709, 1.293, 742.99), new VSC(692, 6.134, 2118.764), new VSC(614, 4.109, 1478.867), new VSC(582, 4.54, 309.278), new VSC(495, 3.756, 323.505), new VSC(441, 2.958, 454.909), new VSC(417, 1.036, 2.488), new VSC(390, 4.897, 1692.166), new VSC(376, 4.703, 1368.66), new VSC(341, 5.715, 533.623), new VSC(330, 4.74, 0.048), new VSC(262, 1.877, 0.963), new VSC(261, 0.82, 380.128), new VSC(257, 3.724, 199.072), new VSC(244, 5.22, 728.763), new VSC(235, 1.227, 909.819), new VSC(220, 1.651, 543.918), new VSC(207, 1.855, 525.759), new VSC(202, 1.807, 1375.774), new VSC(197, 5.293, 1155.361), new VSC(175, 3.73, 942.062), new VSC(175, 3.226, 1898.351), new VSC(175, 5.91, 956.289), new VSC(158, 4.365, 1795.258), new VSC(151, 3.906, 74.782), new VSC(149, 4.377, 1685.052), new VSC(141, 3.136, 491.558), new VSC(138, 1.318, 1169.588), new VSC(131, 4.169, 1045.155), new VSC(117, 2.5, 1596.186), new VSC(117, 3.389, 0.521), new VSC(106, 4.554, 526.51)];\nconst g_L1JupiterCoefficients = [new VSC(52993480757, 0, 0), new VSC(489741, 4.220667, 529.690965), new VSC(228919, 6.026475, 7.113547), new VSC(27655, 4.57266, 1059.38193), new VSC(20721, 5.45939, 522.57742), new VSC(12106, 0.16986, 536.80451), new VSC(6068, 4.4242, 103.0928), new VSC(5434, 3.9848, 419.4846), new VSC(4238, 5.8901, 14.2271), new VSC(2212, 5.2677, 206.1855), new VSC(1746, 4.9267, 1589.0729), new VSC(1296, 5.5513, 3.1814), new VSC(1173, 5.8565, 1052.2684), new VSC(1163, 0.5145, 3.9322), new VSC(1099, 5.307, 515.4639), new VSC(1007, 0.4648, 735.8765), new VSC(1004, 3.1504, 426.5982), new VSC(848, 5.758, 110.206), new VSC(827, 4.803, 213.299), new VSC(816, 0.586, 1066.495), new VSC(725, 5.518, 639.897), new VSC(568, 5.989, 625.67), new VSC(474, 4.132, 412.371), new VSC(413, 5.737, 95.979), new VSC(345, 4.242, 632.784), new VSC(336, 3.732, 1162.475), new VSC(234, 4.035, 949.176), new VSC(234, 6.243, 309.278), new VSC(199, 1.505, 838.969), new VSC(195, 2.219, 323.505), new VSC(187, 6.086, 742.99), new VSC(184, 6.28, 543.918), new VSC(171, 5.417, 199.072), new VSC(131, 0.626, 728.763), new VSC(115, 0.68, 846.083), new VSC(115, 5.286, 2118.764), new VSC(108, 4.493, 956.289), new VSC(80, 5.82, 1045.15), new VSC(72, 5.34, 942.06), new VSC(70, 5.97, 532.87), new VSC(67, 5.73, 21.34), new VSC(66, 0.13, 526.51), new VSC(65, 6.09, 1581.96), new VSC(59, 0.59, 1155.36), new VSC(58, 0.99, 1596.19), new VSC(57, 5.97, 1169.59), new VSC(57, 1.41, 533.62), new VSC(55, 5.43, 10.29), new VSC(52, 5.73, 117.32), new VSC(52, 0.23, 1368.66), new VSC(50, 6.08, 525.76), new VSC(47, 3.63, 1478.87), new VSC(47, 0.51, 1265.57), new VSC(40, 4.16, 1692.17), new VSC(34, 0.1, 302.16), new VSC(33, 5.04, 220.41), new VSC(32, 5.37, 508.35), new VSC(29, 5.42, 1272.68), new VSC(29, 3.36, 4.67), new VSC(29, 0.76, 88.87), new VSC(25, 1.61, 831.86)];\nconst g_L2JupiterCoefficients = [new VSC(47234, 4.32148, 7.11355), new VSC(38966, 0, 0), new VSC(30629, 2.93021, 529.69097), new VSC(3189, 1.055, 522.5774), new VSC(2729, 4.8455, 536.8045), new VSC(2723, 3.4141, 1059.3819), new VSC(1721, 4.1873, 14.2271), new VSC(383, 5.768, 419.485), new VSC(378, 0.76, 515.464), new VSC(367, 6.055, 103.093), new VSC(337, 3.786, 3.181), new VSC(308, 0.694, 206.186), new VSC(218, 3.814, 1589.073), new VSC(199, 5.34, 1066.495), new VSC(197, 2.484, 3.932), new VSC(156, 1.406, 1052.268), new VSC(146, 3.814, 639.897), new VSC(142, 1.634, 426.598), new VSC(130, 5.837, 412.371), new VSC(117, 1.414, 625.67), new VSC(97, 4.03, 110.21), new VSC(91, 1.11, 95.98), new VSC(87, 2.52, 632.78), new VSC(79, 4.64, 543.92), new VSC(72, 2.22, 735.88), new VSC(58, 0.83, 199.07), new VSC(57, 3.12, 213.3), new VSC(49, 1.67, 309.28), new VSC(40, 4.02, 21.34), new VSC(40, 0.62, 323.51), new VSC(36, 2.33, 728.76), new VSC(29, 3.61, 10.29), new VSC(28, 3.24, 838.97), new VSC(26, 4.5, 742.99), new VSC(26, 2.51, 1162.47), new VSC(25, 1.22, 1045.15), new VSC(24, 3.01, 956.29), new VSC(19, 4.29, 532.87), new VSC(18, 0.81, 508.35), new VSC(17, 4.2, 2118.76), new VSC(17, 1.83, 526.51), new VSC(15, 5.81, 1596.19), new VSC(15, 0.68, 942.06), new VSC(15, 4, 117.32), new VSC(14, 5.95, 316.39), new VSC(14, 1.8, 302.16), new VSC(13, 2.52, 88.87), new VSC(13, 4.37, 1169.59), new VSC(11, 4.44, 525.76), new VSC(10, 1.72, 1581.96), new VSC(9, 2.18, 1155.36), new VSC(9, 3.29, 220.41), new VSC(9, 3.32, 831.86), new VSC(8, 5.76, 846.08), new VSC(8, 2.71, 533.62), new VSC(7, 2.18, 1265.57), new VSC(6, 0.5, 949.18)];\nconst g_L3JupiterCoefficients = [new VSC(6502, 2.5986, 7.1135), new VSC(1357, 1.3464, 529.691), new VSC(471, 2.475, 14.227), new VSC(417, 3.245, 536.805), new VSC(353, 2.974, 522.577), new VSC(155, 2.076, 1059.382), new VSC(87, 2.51, 515.46), new VSC(44, 0, 0), new VSC(34, 3.83, 1066.5), new VSC(28, 2.45, 206.19), new VSC(24, 1.28, 412.37), new VSC(23, 2.98, 543.92), new VSC(20, 2.1, 639.9), new VSC(20, 1.4, 419.48), new VSC(19, 1.59, 103.09), new VSC(17, 2.3, 21.34), new VSC(17, 2.6, 1589.07), new VSC(16, 3.15, 625.67), new VSC(16, 3.36, 1052.27), new VSC(13, 2.76, 95.98), new VSC(13, 2.54, 199.07), new VSC(13, 6.27, 426.6), new VSC(9, 1.76, 10.29), new VSC(9, 2.27, 110.21), new VSC(7, 3.43, 309.28), new VSC(7, 4.04, 728.76), new VSC(6, 2.52, 508.35), new VSC(5, 2.91, 1045.15), new VSC(5, 5.25, 323.51), new VSC(4, 4.3, 88.87), new VSC(4, 3.52, 302.16), new VSC(4, 4.09, 735.88), new VSC(3, 1.43, 956.29), new VSC(3, 4.36, 1596.19), new VSC(3, 1.25, 213.3), new VSC(3, 5.02, 838.97), new VSC(3, 2.24, 117.32), new VSC(2, 2.9, 742.99), new VSC(2, 2.36, 942.06)];\nconst g_L4JupiterCoefficients = [new VSC(669, 0.853, 7.114), new VSC(114, 3.142, 0), new VSC(100, 0.743, 14.227), new VSC(50, 1.65, 536.8), new VSC(44, 5.82, 529.69), new VSC(32, 4.86, 522.58), new VSC(15, 4.29, 515.46), new VSC(9, 0.71, 1059.38), new VSC(5, 1.3, 543.92), new VSC(4, 2.32, 1066.5), new VSC(4, 0.48, 21.34), new VSC(3, 3, 412.37), new VSC(2, 0.4, 639.9), new VSC(2, 4.26, 199.07), new VSC(2, 4.91, 625.67), new VSC(2, 4.26, 206.19), new VSC(1, 5.26, 1052.27), new VSC(1, 4.72, 95.98), new VSC(1, 1.29, 1589.07)];\nconst g_L5JupiterCoefficients = [new VSC(50, 5.26, 7.11), new VSC(16, 5.25, 14.23), new VSC(4, 0.01, 536.8), new VSC(2, 1.1, 522.58), new VSC(1, 3.14, 0)];\nconst g_B0JupiterCoefficients = [new VSC(2268616, 3.5585261, 529.6909651), new VSC(110090, 0, 0), new VSC(109972, 3.908093, 1059.38193), new VSC(8101, 3.6051, 522.5774), new VSC(6438, 0.3063, 536.8045), new VSC(6044, 4.2588, 1589.0729), new VSC(1107, 2.9853, 1162.4747), new VSC(944, 1.675, 426.598), new VSC(942, 2.936, 1052.268), new VSC(894, 1.754, 7.114), new VSC(836, 5.179, 103.093), new VSC(767, 2.155, 632.784), new VSC(684, 3.678, 213.299), new VSC(629, 0.643, 1066.495), new VSC(559, 0.014, 846.083), new VSC(532, 2.703, 110.206), new VSC(464, 1.173, 949.176), new VSC(431, 2.608, 419.485), new VSC(351, 4.611, 2118.764), new VSC(132, 4.778, 742.99), new VSC(123, 3.35, 1692.166), new VSC(116, 1.387, 323.505), new VSC(115, 5.049, 316.392), new VSC(104, 3.701, 515.464), new VSC(103, 2.319, 1478.867), new VSC(102, 3.153, 1581.959)];\nconst g_B1JupiterCoefficients = [new VSC(177352, 5.701665, 529.690965), new VSC(3230, 5.7794, 1059.3819), new VSC(3081, 5.4746, 522.5774), new VSC(2212, 4.7348, 536.8045), new VSC(1694, 3.1416, 0), new VSC(346, 4.746, 1052.268), new VSC(234, 5.189, 1066.495), new VSC(196, 6.186, 7.114), new VSC(150, 3.927, 1589.073), new VSC(114, 3.439, 632.784), new VSC(97, 2.91, 949.18), new VSC(82, 5.08, 1162.47), new VSC(77, 2.51, 103.09), new VSC(77, 0.61, 419.48), new VSC(74, 5.5, 515.46), new VSC(61, 5.45, 213.3), new VSC(50, 3.95, 735.88), new VSC(46, 0.54, 110.21), new VSC(45, 1.9, 846.08), new VSC(37, 4.7, 543.92), new VSC(36, 6.11, 316.39), new VSC(32, 4.92, 1581.96)];\nconst g_B2JupiterCoefficients = [new VSC(8094, 1.4632, 529.691), new VSC(813, 3.1416, 0), new VSC(742, 0.957, 522.577), new VSC(399, 2.899, 536.805), new VSC(342, 1.447, 1059.382), new VSC(74, 0.41, 1052.27), new VSC(46, 3.48, 1066.5), new VSC(30, 1.93, 1589.07), new VSC(29, 0.99, 515.46), new VSC(23, 4.27, 7.11), new VSC(14, 2.92, 543.92), new VSC(12, 5.22, 632.78), new VSC(11, 4.88, 949.18), new VSC(6, 6.21, 1045.15)];\nconst g_B3JupiterCoefficients = [new VSC(252, 3.381, 529.691), new VSC(122, 2.733, 522.577), new VSC(49, 1.04, 536.8), new VSC(11, 2.31, 1052.27), new VSC(8, 2.77, 515.46), new VSC(7, 4.25, 1059.38), new VSC(6, 1.78, 1066.5), new VSC(4, 1.13, 543.92), new VSC(3, 3.14, 0)];\nconst g_B4JupiterCoefficients = [new VSC(15, 4.53, 522.58), new VSC(5, 4.47, 529.69), new VSC(4, 5.44, 536.8), new VSC(3, 0, 0), new VSC(2, 4.52, 515.46), new VSC(1, 4.2, 1052.27)];\nconst g_B5JupiterCoefficients = [new VSC(1, 0.09, 522.58)];\nconst g_R0JupiterCoefficients = [new VSC(520887429, 0, 0), new VSC(25209327, 3.4910864, 529.69096509), new VSC(610600, 3.841154, 1059.38193), new VSC(282029, 2.574199, 632.783739), new VSC(187647, 2.075904, 522.577418), new VSC(86793, 0.71001, 419.48464), new VSC(72063, 0.21466, 536.80451), new VSC(65517, 5.97996, 316.39187), new VSC(30135, 2.16132, 949.17561), new VSC(29135, 1.67759, 103.09277), new VSC(23947, 0.27458, 7.11355), new VSC(23453, 3.54023, 735.87651), new VSC(22284, 4.19363, 1589.0729), new VSC(13033, 2.96043, 1162.4747), new VSC(12749, 2.7155, 1052.26838), new VSC(9703, 1.9067, 206.1855), new VSC(9161, 4.4135, 213.2991), new VSC(7895, 2.4791, 426.5982), new VSC(7058, 2.1818, 1265.5675), new VSC(6138, 6.2642, 846.0828), new VSC(5477, 5.6573, 639.8973), new VSC(4170, 2.0161, 515.4639), new VSC(4137, 2.7222, 625.6702), new VSC(3503, 0.5653, 1066.4955), new VSC(2617, 2.0099, 1581.9593), new VSC(2500, 4.5518, 838.9693), new VSC(2128, 6.1275, 742.9901), new VSC(1912, 0.8562, 412.3711), new VSC(1611, 3.0887, 1368.6603), new VSC(1479, 2.6803, 1478.8666), new VSC(1231, 1.8904, 323.5054), new VSC(1217, 1.8017, 110.2063), new VSC(1015, 1.3867, 454.9094), new VSC(999, 2.872, 309.278), new VSC(961, 4.549, 2118.764), new VSC(886, 4.148, 533.623), new VSC(821, 1.593, 1898.351), new VSC(812, 5.941, 909.819), new VSC(777, 3.677, 728.763), new VSC(727, 3.988, 1155.361), new VSC(655, 2.791, 1685.052), new VSC(654, 3.382, 1692.166), new VSC(621, 4.823, 956.289), new VSC(615, 2.276, 942.062), new VSC(562, 0.081, 543.918), new VSC(542, 0.284, 525.759)];\nconst g_R1JupiterCoefficients = [new VSC(1271802, 2.6493751, 529.6909651), new VSC(61662, 3.00076, 1059.38193), new VSC(53444, 3.89718, 522.57742), new VSC(41390, 0, 0), new VSC(31185, 4.88277, 536.80451), new VSC(11847, 2.4133, 419.48464), new VSC(9166, 4.7598, 7.1135), new VSC(3404, 3.3469, 1589.0729), new VSC(3203, 5.2108, 735.8765), new VSC(3176, 2.793, 103.0928), new VSC(2806, 3.7422, 515.4639), new VSC(2677, 4.3305, 1052.2684), new VSC(2600, 3.6344, 206.1855), new VSC(2412, 1.4695, 426.5982), new VSC(2101, 3.9276, 639.8973), new VSC(1646, 4.4163, 1066.4955), new VSC(1641, 4.4163, 625.6702), new VSC(1050, 3.1611, 213.2991), new VSC(1025, 2.5543, 412.3711), new VSC(806, 2.678, 632.784), new VSC(741, 2.171, 1162.475), new VSC(677, 6.25, 838.969), new VSC(567, 4.577, 742.99), new VSC(485, 2.469, 949.176), new VSC(469, 4.71, 543.918), new VSC(445, 0.403, 323.505), new VSC(416, 5.368, 728.763), new VSC(402, 4.605, 309.278), new VSC(347, 4.681, 14.227), new VSC(338, 3.168, 956.289), new VSC(261, 5.343, 846.083), new VSC(247, 3.923, 942.062), new VSC(220, 4.842, 1368.66), new VSC(203, 5.6, 1155.361), new VSC(200, 4.439, 1045.155), new VSC(197, 3.706, 2118.764), new VSC(196, 3.759, 199.072), new VSC(184, 4.265, 95.979), new VSC(180, 4.402, 532.872), new VSC(170, 4.846, 526.51), new VSC(146, 6.13, 533.623), new VSC(133, 1.322, 110.206), new VSC(132, 4.512, 525.759)];\nconst g_R2JupiterCoefficients = [new VSC(79645, 1.35866, 529.69097), new VSC(8252, 5.7777, 522.5774), new VSC(7030, 3.2748, 536.8045), new VSC(5314, 1.8384, 1059.3819), new VSC(1861, 2.9768, 7.1135), new VSC(964, 5.48, 515.464), new VSC(836, 4.199, 419.485), new VSC(498, 3.142, 0), new VSC(427, 2.228, 639.897), new VSC(406, 3.783, 1066.495), new VSC(377, 2.242, 1589.073), new VSC(363, 5.368, 206.186), new VSC(342, 6.099, 1052.268), new VSC(339, 6.127, 625.67), new VSC(333, 0.003, 426.598), new VSC(280, 4.262, 412.371), new VSC(257, 0.963, 632.784), new VSC(230, 0.705, 735.877), new VSC(201, 3.069, 543.918), new VSC(200, 4.429, 103.093), new VSC(139, 2.932, 14.227), new VSC(114, 0.787, 728.763), new VSC(95, 1.7, 838.97), new VSC(86, 5.14, 323.51), new VSC(83, 0.06, 309.28), new VSC(80, 2.98, 742.99), new VSC(75, 1.6, 956.29), new VSC(70, 1.51, 213.3), new VSC(67, 5.47, 199.07), new VSC(62, 6.1, 1045.15), new VSC(56, 0.96, 1162.47), new VSC(52, 5.58, 942.06), new VSC(50, 2.72, 532.87), new VSC(45, 5.52, 508.35), new VSC(44, 0.27, 526.51), new VSC(40, 5.95, 95.98)];\nconst g_R3JupiterCoefficients = [new VSC(3519, 6.058, 529.691), new VSC(1073, 1.6732, 536.8045), new VSC(916, 1.413, 522.577), new VSC(342, 0.523, 1059.382), new VSC(255, 1.196, 7.114), new VSC(222, 0.952, 515.464), new VSC(90, 3.14, 0), new VSC(69, 2.27, 1066.5), new VSC(58, 1.41, 543.92), new VSC(58, 0.53, 639.9), new VSC(51, 5.98, 412.37), new VSC(47, 1.58, 625.67), new VSC(43, 6.12, 419.48), new VSC(37, 1.18, 14.23), new VSC(34, 1.67, 1052.27), new VSC(34, 0.85, 206.19), new VSC(31, 1.04, 1589.07), new VSC(30, 4.63, 426.6), new VSC(21, 2.5, 728.76), new VSC(15, 0.89, 199.07), new VSC(14, 0.96, 508.35), new VSC(13, 1.5, 1045.15), new VSC(12, 2.61, 735.88), new VSC(12, 3.56, 323.51), new VSC(11, 1.79, 309.28), new VSC(11, 6.28, 956.29), new VSC(10, 6.26, 103.09), new VSC(9, 3.45, 838.97)];\nconst g_R4JupiterCoefficients = [new VSC(129, 0.084, 536.805), new VSC(113, 4.249, 529.691), new VSC(83, 3.3, 522.58), new VSC(38, 2.73, 515.46), new VSC(27, 5.69, 7.11), new VSC(18, 5.4, 1059.38), new VSC(13, 6.02, 543.92), new VSC(9, 0.77, 1066.5), new VSC(8, 5.68, 14.23), new VSC(7, 1.43, 412.37), new VSC(6, 5.12, 639.9), new VSC(5, 3.34, 625.67), new VSC(3, 3.4, 1052.27), new VSC(3, 4.16, 728.76), new VSC(3, 2.9, 426.6)];\nconst g_R5JupiterCoefficients = [new VSC(11, 4.75, 536.8), new VSC(4, 5.92, 522.58), new VSC(2, 5.57, 515.46), new VSC(2, 4.3, 543.92), new VSC(2, 3.69, 7.11), new VSC(2, 4.13, 1059.38), new VSC(2, 5.49, 1066.5)];\n\n\n\n// CAAJupiter\n\nexport function CAAJupiter() { }\n\nCAAJupiter.eclipticLongitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var rho5 = rho4 * rho;\n    var nL0Coefficients = g_L0JupiterCoefficients.length;\n    var L0 = 0;\n    var i;\n    for (i = 0; i < nL0Coefficients; i++) {\n        L0 += g_L0JupiterCoefficients[i].a * Math.cos(g_L0JupiterCoefficients[i].b + g_L0JupiterCoefficients[i].c * rho);\n    }\n    var nL1Coefficients = g_L1JupiterCoefficients.length;\n    var L1 = 0;\n    for (i = 0; i < nL1Coefficients; i++) {\n        L1 += g_L1JupiterCoefficients[i].a * Math.cos(g_L1JupiterCoefficients[i].b + g_L1JupiterCoefficients[i].c * rho);\n    }\n    var nL2Coefficients = g_L2JupiterCoefficients.length;\n    var L2 = 0;\n    for (i = 0; i < nL2Coefficients; i++) {\n        L2 += g_L2JupiterCoefficients[i].a * Math.cos(g_L2JupiterCoefficients[i].b + g_L2JupiterCoefficients[i].c * rho);\n    }\n    var nL3Coefficients = g_L3JupiterCoefficients.length;\n    var L3 = 0;\n    for (i = 0; i < nL3Coefficients; i++) {\n        L3 += g_L3JupiterCoefficients[i].a * Math.cos(g_L3JupiterCoefficients[i].b + g_L3JupiterCoefficients[i].c * rho);\n    }\n    var nL4Coefficients = g_L4JupiterCoefficients.length;\n    var L4 = 0;\n    for (i = 0; i < nL4Coefficients; i++) {\n        L4 += g_L4JupiterCoefficients[i].a * Math.cos(g_L4JupiterCoefficients[i].b + g_L4JupiterCoefficients[i].c * rho);\n    }\n    var nL5Coefficients = g_L5JupiterCoefficients.length;\n    var L5 = 0;\n    for (i = 0; i < nL5Coefficients; i++) {\n        L5 += g_L5JupiterCoefficients[i].a * Math.cos(g_L5JupiterCoefficients[i].b + g_L5JupiterCoefficients[i].c * rho);\n    }\n    var vvalue = (L0 + L1 * rho + L2 * rhosquared + L3 * rhocubed + L4 * rho4 + L5 * rho5) / 100000000;\n    vvalue = CT.m360(CT.r2D(vvalue));\n    return vvalue;\n};\n\nCAAJupiter.eclipticLatitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var rho5 = rho4 * rho;\n    var nB0Coefficients = g_B0JupiterCoefficients.length;\n    var B0 = 0;\n    var i;\n    for (i = 0; i < nB0Coefficients; i++) {\n        B0 += g_B0JupiterCoefficients[i].a * Math.cos(g_B0JupiterCoefficients[i].b + g_B0JupiterCoefficients[i].c * rho);\n    }\n    var nB1Coefficients = g_B1JupiterCoefficients.length;\n    var B1 = 0;\n    for (i = 0; i < nB1Coefficients; i++) {\n        B1 += g_B1JupiterCoefficients[i].a * Math.cos(g_B1JupiterCoefficients[i].b + g_B1JupiterCoefficients[i].c * rho);\n    }\n    var nB2Coefficients = g_B2JupiterCoefficients.length;\n    var B2 = 0;\n    for (i = 0; i < nB2Coefficients; i++) {\n        B2 += g_B2JupiterCoefficients[i].a * Math.cos(g_B2JupiterCoefficients[i].b + g_B2JupiterCoefficients[i].c * rho);\n    }\n    var nB3Coefficients = g_B3JupiterCoefficients.length;\n    var B3 = 0;\n    for (i = 0; i < nB3Coefficients; i++) {\n        B3 += g_B3JupiterCoefficients[i].a * Math.cos(g_B3JupiterCoefficients[i].b + g_B3JupiterCoefficients[i].c * rho);\n    }\n    var nB4Coefficients = g_B4JupiterCoefficients.length;\n    var B4 = 0;\n    for (i = 0; i < nB4Coefficients; i++) {\n        B4 += g_B4JupiterCoefficients[i].a * Math.cos(g_B4JupiterCoefficients[i].b + g_B4JupiterCoefficients[i].c * rho);\n    }\n    var nB5Coefficients = g_B5JupiterCoefficients.length;\n    var B5 = 0;\n    for (i = 0; i < nB5Coefficients; i++) {\n        B5 += g_B5JupiterCoefficients[i].a * Math.cos(g_B5JupiterCoefficients[i].b + g_B5JupiterCoefficients[i].c * rho);\n    }\n    var vvalue = (B0 + B1 * rho + B2 * rhosquared + B3 * rhocubed + B4 * rho4 + B5 * rho5) / 100000000;\n    vvalue = CT.r2D(vvalue);\n    return vvalue;\n};\n\nCAAJupiter.radiusVector = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var rho5 = rho4 * rho;\n    var nR0Coefficients = g_R0JupiterCoefficients.length;\n    var R0 = 0;\n    var i;\n    for (i = 0; i < nR0Coefficients; i++) {\n        R0 += g_R0JupiterCoefficients[i].a * Math.cos(g_R0JupiterCoefficients[i].b + g_R0JupiterCoefficients[i].c * rho);\n    }\n    var nR1Coefficients = g_R1JupiterCoefficients.length;\n    var R1 = 0;\n    for (i = 0; i < nR1Coefficients; i++) {\n        R1 += g_R1JupiterCoefficients[i].a * Math.cos(g_R1JupiterCoefficients[i].b + g_R1JupiterCoefficients[i].c * rho);\n    }\n    var nR2Coefficients = g_R2JupiterCoefficients.length;\n    var R2 = 0;\n    for (i = 0; i < nR2Coefficients; i++) {\n        R2 += g_R2JupiterCoefficients[i].a * Math.cos(g_R2JupiterCoefficients[i].b + g_R2JupiterCoefficients[i].c * rho);\n    }\n    var nR3Coefficients = g_R3JupiterCoefficients.length;\n    var R3 = 0;\n    for (i = 0; i < nR3Coefficients; i++) {\n        R3 += g_R3JupiterCoefficients[i].a * Math.cos(g_R3JupiterCoefficients[i].b + g_R3JupiterCoefficients[i].c * rho);\n    }\n    var nR4Coefficients = g_R4JupiterCoefficients.length;\n    var R4 = 0;\n    for (i = 0; i < nR4Coefficients; i++) {\n        R4 += g_R4JupiterCoefficients[i].a * Math.cos(g_R4JupiterCoefficients[i].b + g_R4JupiterCoefficients[i].c * rho);\n    }\n    var nR5Coefficients = g_R5JupiterCoefficients.length;\n    var R5 = 0;\n    for (i = 0; i < nR5Coefficients; i++) {\n        R5 += g_R5JupiterCoefficients[i].a * Math.cos(g_R5JupiterCoefficients[i].b + g_R5JupiterCoefficients[i].c * rho);\n    }\n    return (R0 + R1 * rho + R2 * rhosquared + R3 * rhocubed + R4 * rho4 + R5 * rho5) / 100000000;\n};\n\nvar CAAJupiter$ = {};\n\nregisterType(\"CAAJupiter\", [CAAJupiter, CAAJupiter$, null]);\n","// Originally `AAKEPLER.CPP`\n// \"Purpose: Implementation for the algorithms which solve Kepler's equation\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { ss } from \"../ss.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// CAAKepler\n\nexport function CAAKepler() { }\n\nCAAKepler.calculate = function (M, e) {\n    return CAAKepler.calculateIter(M, e, 53);\n};\n\nCAAKepler.calculateIter = function (M, e, nIterations) {\n    M = CT.d2R(M);\n    var PI = CT.PI();\n    var F = 1;\n    if (M < 0) {\n        F = -1;\n    }\n    M = Math.abs(M) / (2 * PI);\n    M = (M - ss.truncate(M)) * 2 * PI * F;\n    if (M < 0) {\n        M += 2 * PI;\n    }\n    F = 1;\n    if (M > PI) {\n        F = -1;\n    }\n    if (M > PI) {\n        M = 2 * PI - M;\n    }\n    var E = PI / 2;\n    var scale = PI / 4;\n    for (var i = 0; i < nIterations; i++) {\n        var R = E - e * Math.sin(E);\n        if (M > R) {\n            E += scale;\n        }\n        else {\n            E -= scale;\n        }\n        scale /= 2;\n    }\n    return CT.r2D(E) * F;\n};\n\nvar CAAKepler$ = {};\n\nregisterType(\"CAAKepler\", [CAAKepler, CAAKepler$, null]);\n","// Originally `AAMARS.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the heliocentric position of Uranus [sic]\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { VSC } from \"./earth.js\";\n\n\n// Coefficients\n\nconst g_L0MarsCoefficients = [new VSC(620347712, 0, 0), new VSC(18656368, 5.050371, 3340.6124267), new VSC(1108217, 5.4009984, 6681.2248534), new VSC(91798, 5.75479, 10021.83728), new VSC(27745, 5.9705, 3.52312), new VSC(12316, 0.84956, 2810.92146), new VSC(10610, 2.93959, 2281.2305), new VSC(8927, 4.157, 0.0173), new VSC(8716, 6.1101, 13362.4497), new VSC(7775, 3.3397, 5621.8429), new VSC(6798, 0.3646, 398.149), new VSC(4161, 0.2281, 2942.4634), new VSC(3575, 1.6619, 2544.3144), new VSC(3075, 0.857, 191.4483), new VSC(2938, 6.0789, 0.0673), new VSC(2628, 0.6481, 3337.0893), new VSC(2580, 0.03, 3344.1355), new VSC(2389, 5.039, 796.298), new VSC(1799, 0.6563, 529.691), new VSC(1546, 2.9158, 1751.5395), new VSC(1528, 1.1498, 6151.5339), new VSC(1286, 3.068, 2146.1654), new VSC(1264, 3.6228, 5092.152), new VSC(1025, 3.6933, 8962.4553), new VSC(892, 0.183, 16703.062), new VSC(859, 2.401, 2914.014), new VSC(833, 4.495, 3340.63), new VSC(833, 2.464, 3340.595), new VSC(749, 3.822, 155.42), new VSC(724, 0.675, 3738.761), new VSC(713, 3.663, 1059.382), new VSC(655, 0.489, 3127.313), new VSC(636, 2.922, 8432.764), new VSC(553, 4.475, 1748.016), new VSC(550, 3.81, 0.98), new VSC(472, 3.625, 1194.447), new VSC(426, 0.554, 6283.076), new VSC(415, 0.497, 213.299), new VSC(312, 0.999, 6677.702), new VSC(307, 0.381, 6684.748), new VSC(302, 4.486, 3532.061), new VSC(299, 2.783, 6254.627), new VSC(293, 4.221, 20.775), new VSC(284, 5.769, 3149.164), new VSC(281, 5.882, 1349.867), new VSC(274, 0.542, 3340.545), new VSC(274, 0.134, 3340.68), new VSC(239, 5.372, 4136.91), new VSC(236, 5.755, 3333.499), new VSC(231, 1.282, 3870.303), new VSC(221, 3.505, 382.897), new VSC(204, 2.821, 1221.849), new VSC(193, 3.357, 3.59), new VSC(189, 1.491, 9492.146), new VSC(179, 1.006, 951.718), new VSC(174, 2.414, 553.569), new VSC(172, 0.439, 5486.778), new VSC(160, 3.949, 4562.461), new VSC(144, 1.419, 135.065), new VSC(140, 3.326, 2700.715), new VSC(138, 4.301, 7.114), new VSC(131, 4.045, 12303.068), new VSC(128, 2.208, 1592.596), new VSC(128, 1.807, 5088.629), new VSC(117, 3.128, 7903.073), new VSC(113, 3.701, 1589.073), new VSC(110, 1.052, 242.729), new VSC(105, 0.785, 8827.39), new VSC(100, 3.243, 11773.377)];\nconst g_L1MarsCoefficients = [new VSC(334085627474, 0, 0), new VSC(1458227, 3.6042605, 3340.6124267), new VSC(164901, 3.926313, 6681.224853), new VSC(19963, 4.26594, 10021.83728), new VSC(3452, 4.7321, 3.5231), new VSC(2485, 4.6128, 13362.4497), new VSC(842, 4.459, 2281.23), new VSC(538, 5.016, 398.149), new VSC(521, 4.994, 3344.136), new VSC(433, 2.561, 191.448), new VSC(430, 5.316, 155.42), new VSC(382, 3.539, 796.298), new VSC(314, 4.963, 16703.062), new VSC(283, 3.16, 2544.314), new VSC(206, 4.569, 2146.165), new VSC(169, 1.329, 3337.089), new VSC(158, 4.185, 1751.54), new VSC(134, 2.233, 0.98), new VSC(134, 5.974, 1748.016), new VSC(118, 6.024, 6151.534), new VSC(117, 2.213, 1059.382), new VSC(114, 2.129, 1194.447), new VSC(114, 5.428, 3738.761), new VSC(91, 1.1, 1349.87), new VSC(85, 3.91, 553.57), new VSC(83, 5.3, 6684.75), new VSC(81, 4.43, 529.69), new VSC(80, 2.25, 8962.46), new VSC(73, 2.5, 951.72), new VSC(73, 5.84, 242.73), new VSC(71, 3.86, 2914.01), new VSC(68, 5.02, 382.9), new VSC(65, 1.02, 3340.6), new VSC(65, 3.05, 3340.63), new VSC(62, 4.15, 3149.16), new VSC(57, 3.89, 4136.91), new VSC(48, 4.87, 213.3), new VSC(48, 1.18, 3333.5), new VSC(47, 1.31, 3185.19), new VSC(41, 0.71, 1592.6), new VSC(40, 2.73, 7.11), new VSC(40, 5.32, 20043.67), new VSC(33, 5.41, 6283.08), new VSC(28, 0.05, 9492.15), new VSC(27, 3.89, 1221.85), new VSC(27, 5.11, 2700.72)];\nconst g_L2MarsCoefficients = [new VSC(58016, 2.04979, 3340.61243), new VSC(54188, 0, 0), new VSC(13908, 2.45742, 6681.22485), new VSC(2465, 2.8, 10021.8373), new VSC(398, 3.141, 13362.45), new VSC(222, 3.194, 3.523), new VSC(121, 0.543, 155.42), new VSC(62, 3.49, 16703.06), new VSC(54, 3.54, 3344.14), new VSC(34, 6, 2281.23), new VSC(32, 4.14, 191.45), new VSC(30, 2, 796.3), new VSC(23, 4.33, 242.73), new VSC(22, 3.45, 398.15), new VSC(20, 5.42, 553.57), new VSC(16, 0.66, 0.98), new VSC(16, 6.11, 2146.17), new VSC(16, 1.22, 1748.02), new VSC(15, 6.1, 3185.19), new VSC(14, 4.02, 951.72), new VSC(14, 2.62, 1349.87), new VSC(13, 0.6, 1194.45), new VSC(12, 3.86, 6684.75), new VSC(11, 4.72, 2544.31), new VSC(10, 0.25, 382.9), new VSC(9, 0.68, 1059.38), new VSC(9, 3.83, 20043.67), new VSC(9, 3.88, 3738.76), new VSC(8, 5.46, 1751.54), new VSC(7, 2.58, 3149.16), new VSC(7, 2.38, 4136.91), new VSC(6, 5.48, 1592.6), new VSC(6, 2.34, 3097.88)];\nconst g_L3MarsCoefficients = [new VSC(1482, 0.4443, 3340.6124), new VSC(662, 0.885, 6681.225), new VSC(188, 1.288, 10021.837), new VSC(41, 1.65, 13362.45), new VSC(26, 0, 0), new VSC(23, 2.05, 155.42), new VSC(10, 1.58, 3.52), new VSC(8, 2, 16703.06), new VSC(5, 2.82, 242.73), new VSC(4, 2.02, 3344.14), new VSC(3, 4.59, 3185.19), new VSC(3, 0.65, 553.57)];\nconst g_L4MarsCoefficients = [new VSC(114, 3.1416, 0), new VSC(29, 5.64, 6681.22), new VSC(24, 5.14, 3340.61), new VSC(11, 6.03, 10021.84), new VSC(3, 0.13, 13362.45), new VSC(3, 3.56, 155.42), new VSC(1, 0.49, 16703.06), new VSC(1, 1.32, 242.73)];\nconst g_L5MarsCoefficients = [new VSC(1, 3.14, 0), new VSC(1, 4.04, 6681.22)];\nconst g_B0MarsCoefficients = [new VSC(3197135, 3.7683204, 3340.6124267), new VSC(298033, 4.10617, 6681.224853), new VSC(289105, 0, 0), new VSC(31366, 4.44651, 10021.83728), new VSC(3484, 4.7881, 13362.4497), new VSC(443, 5.026, 3344.136), new VSC(443, 5.652, 3337.089), new VSC(399, 5.131, 16703.062), new VSC(293, 3.793, 2281.23), new VSC(182, 6.136, 6151.534), new VSC(163, 4.264, 529.691), new VSC(160, 2.232, 1059.382), new VSC(149, 2.165, 5621.843), new VSC(143, 1.182, 3340.595), new VSC(143, 3.213, 3340.63), new VSC(139, 2.418, 8962.455)];\nconst g_B1MarsCoefficients = [new VSC(350069, 5.368478, 3340.612427), new VSC(14116, 3.14159, 0), new VSC(9671, 5.4788, 6681.2249), new VSC(1472, 3.2021, 10021.8373), new VSC(426, 3.408, 13362.45), new VSC(102, 0.776, 3337.089), new VSC(79, 3.72, 16703.06), new VSC(33, 3.46, 5621.84), new VSC(26, 2.48, 2281.23)];\nconst g_B2MarsCoefficients = [new VSC(16727, 0.60221, 3340.61243), new VSC(4987, 4.1416, 0), new VSC(302, 3.559, 6681.225), new VSC(26, 1.9, 13362.45), new VSC(21, 0.92, 10021.84), new VSC(12, 2.24, 3337.09), new VSC(8, 2.25, 16703.06)];\nconst g_B3MarsCoefficients = [new VSC(607, 1.981, 3340.612), new VSC(43, 0, 0), new VSC(14, 1.8, 6681.22), new VSC(3, 3.45, 10021.84)];\nconst g_B4MarsCoefficients = [new VSC(13, 0, 0), new VSC(11, 3.46, 3340.61), new VSC(1, 0.5, 6681.22)];\nconst g_R0MarsCoefficients = [new VSC(153033488, 0, 0), new VSC(14184953, 3.47971284, 3340.6124267), new VSC(660776, 3.817834, 6681.224853), new VSC(46179, 4.15595, 10021.83728), new VSC(8110, 5.5596, 2810.9215), new VSC(7485, 1.7724, 5621.8429), new VSC(5523, 1.3644, 2281.2305), new VSC(3825, 4.4941, 13362.4497), new VSC(2484, 4.9255, 2942.4634), new VSC(2307, 0.0908, 2544.3144), new VSC(1999, 5.3606, 3337.0893), new VSC(1960, 4.7425, 3344.1355), new VSC(1167, 2.1126, 5092.152), new VSC(1103, 5.0091, 398.149), new VSC(992, 5.839, 6151.534), new VSC(899, 4.408, 529.691), new VSC(807, 2.102, 1059.382), new VSC(798, 3.448, 796.298), new VSC(741, 1.499, 2146.165), new VSC(726, 1.245, 8432.764), new VSC(692, 2.134, 8962.455), new VSC(633, 0.894, 3340.595), new VSC(633, 2.924, 3340.63), new VSC(630, 1.287, 1751.54), new VSC(574, 0.829, 2914.014), new VSC(526, 5.383, 3738.761), new VSC(473, 5.199, 3127.313), new VSC(348, 4.832, 16703.062), new VSC(284, 2.907, 3532.061), new VSC(280, 5.257, 6283.076), new VSC(276, 1.218, 6254.627), new VSC(275, 2.908, 1748.016), new VSC(270, 3.764, 5884.927), new VSC(239, 2.037, 1194.447), new VSC(234, 5.105, 5486.778), new VSC(228, 3.255, 6872.673), new VSC(223, 4.199, 3149.164), new VSC(219, 5.583, 191.448), new VSC(208, 5.255, 3340.545), new VSC(208, 4.846, 3340.68), new VSC(186, 5.699, 6677.702), new VSC(183, 5.081, 6684.748), new VSC(179, 4.184, 3333.499), new VSC(176, 5.953, 3870.303), new VSC(164, 3.799, 4136.91)];\nconst g_R1MarsCoefficients = [new VSC(1107433, 2.0325052, 3340.6124267), new VSC(103176, 2.370718, 6681.224853), new VSC(12877, 0, 0), new VSC(10816, 2.70888, 10021.83728), new VSC(1195, 3.047, 13362.4497), new VSC(439, 2.888, 2281.23), new VSC(396, 3.423, 3344.136), new VSC(183, 1.584, 2544.314), new VSC(136, 3.385, 16703.062), new VSC(128, 6.043, 3337.089), new VSC(128, 0.63, 1059.382), new VSC(127, 1.954, 796.298), new VSC(118, 2.998, 2146.165), new VSC(88, 3.42, 398.15), new VSC(83, 3.86, 3738.76), new VSC(76, 4.45, 6151.53), new VSC(72, 2.76, 529.69), new VSC(67, 2.55, 1751.54), new VSC(66, 4.41, 1748.02), new VSC(58, 0.54, 1194.45), new VSC(54, 0.68, 8962.46), new VSC(51, 3.73, 6684.75), new VSC(49, 5.73, 3340.6), new VSC(49, 1.48, 3340.63), new VSC(48, 2.58, 3149.16), new VSC(48, 2.29, 2914.01), new VSC(39, 2.32, 4136.91)];\nconst g_R2MarsCoefficients = [new VSC(44242, 0.47931, 3340.61243), new VSC(8138, 0.87, 6681.2249), new VSC(1275, 1.2259, 10021.8373), new VSC(187, 1.573, 13362.45), new VSC(52, 3.14, 0), new VSC(41, 1.97, 3344.14), new VSC(27, 1.92, 16703.06), new VSC(18, 4.43, 2281.23), new VSC(12, 4.53, 3185.19), new VSC(10, 5.39, 1059.38), new VSC(10, 0.42, 796.3)];\nconst g_R3MarsCoefficients = [new VSC(1113, 5.1499, 3340.6124), new VSC(424, 5.613, 6681.225), new VSC(100, 5.997, 10021.837), new VSC(20, 0.08, 13362.45), new VSC(5, 3.14, 0), new VSC(3, 0.43, 16703.06)];\nconst g_R4MarsCoefficients = [new VSC(20, 3.58, 3340.61), new VSC(16, 4.05, 6681.22), new VSC(6, 4.46, 10021.84), new VSC(2, 4.84, 13362.45)];\n\n\n// CAAMars\n\nexport function CAAMars() { }\n\nCAAMars.eclipticLongitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var rho5 = rho4 * rho;\n    var nL0Coefficients = g_L0MarsCoefficients.length;\n    var L0 = 0;\n    var i;\n    for (i = 0; i < nL0Coefficients; i++) {\n        L0 += g_L0MarsCoefficients[i].a * Math.cos(g_L0MarsCoefficients[i].b + g_L0MarsCoefficients[i].c * rho);\n    }\n    var nL1Coefficients = g_L1MarsCoefficients.length;\n    var L1 = 0;\n    for (i = 0; i < nL1Coefficients; i++) {\n        L1 += g_L1MarsCoefficients[i].a * Math.cos(g_L1MarsCoefficients[i].b + g_L1MarsCoefficients[i].c * rho);\n    }\n    var nL2Coefficients = g_L2MarsCoefficients.length;\n    var L2 = 0;\n    for (i = 0; i < nL2Coefficients; i++) {\n        L2 += g_L2MarsCoefficients[i].a * Math.cos(g_L2MarsCoefficients[i].b + g_L2MarsCoefficients[i].c * rho);\n    }\n    var nL3Coefficients = g_L3MarsCoefficients.length;\n    var L3 = 0;\n    for (i = 0; i < nL3Coefficients; i++) {\n        L3 += g_L3MarsCoefficients[i].a * Math.cos(g_L3MarsCoefficients[i].b + g_L3MarsCoefficients[i].c * rho);\n    }\n    var nL4Coefficients = g_L4MarsCoefficients.length;\n    var L4 = 0;\n    for (i = 0; i < nL4Coefficients; i++) {\n        L4 += g_L4MarsCoefficients[i].a * Math.cos(g_L4MarsCoefficients[i].b + g_L4MarsCoefficients[i].c * rho);\n    }\n    var nL5Coefficients = g_L5MarsCoefficients.length;\n    var L5 = 0;\n    for (i = 0; i < nL5Coefficients; i++) {\n        L5 += g_L5MarsCoefficients[i].a * Math.cos(g_L5MarsCoefficients[i].b + g_L5MarsCoefficients[i].c * rho);\n    }\n    var vvalue = (L0 + L1 * rho + L2 * rhosquared + L3 * rhocubed + L4 * rho4 + L5 * rho5) / 100000000;\n    vvalue = CT.m360(CT.r2D(vvalue));\n    return vvalue;\n};\n\nCAAMars.eclipticLatitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nB0Coefficients = g_B0MarsCoefficients.length;\n    var B0 = 0;\n    var i;\n    for (i = 0; i < nB0Coefficients; i++) {\n        B0 += g_B0MarsCoefficients[i].a * Math.cos(g_B0MarsCoefficients[i].b + g_B0MarsCoefficients[i].c * rho);\n    }\n    var nB1Coefficients = g_B1MarsCoefficients.length;\n    var B1 = 0;\n    for (i = 0; i < nB1Coefficients; i++) {\n        B1 += g_B1MarsCoefficients[i].a * Math.cos(g_B1MarsCoefficients[i].b + g_B1MarsCoefficients[i].c * rho);\n    }\n    var nB2Coefficients = g_B2MarsCoefficients.length;\n    var B2 = 0;\n    for (i = 0; i < nB2Coefficients; i++) {\n        B2 += g_B2MarsCoefficients[i].a * Math.cos(g_B2MarsCoefficients[i].b + g_B2MarsCoefficients[i].c * rho);\n    }\n    var nB3Coefficients = g_B3MarsCoefficients.length;\n    var B3 = 0;\n    for (i = 0; i < nB3Coefficients; i++) {\n        B3 += g_B3MarsCoefficients[i].a * Math.cos(g_B3MarsCoefficients[i].b + g_B3MarsCoefficients[i].c * rho);\n    }\n    var nB4Coefficients = g_B4MarsCoefficients.length;\n    var B4 = 0;\n    for (i = 0; i < nB4Coefficients; i++) {\n        B4 += g_B4MarsCoefficients[i].a * Math.cos(g_B4MarsCoefficients[i].b + g_B4MarsCoefficients[i].c * rho);\n    }\n    var vvalue = (B0 + B1 * rho + B2 * rhosquared + B3 * rhocubed + B4 * rho4) / 100000000;\n    vvalue = CT.r2D(vvalue);\n    return vvalue;\n};\n\nCAAMars.radiusVector = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nR0Coefficients = g_R0MarsCoefficients.length;\n    var R0 = 0;\n    var i;\n    for (i = 0; i < nR0Coefficients; i++) {\n        R0 += g_R0MarsCoefficients[i].a * Math.cos(g_R0MarsCoefficients[i].b + g_R0MarsCoefficients[i].c * rho);\n    }\n    var nR1Coefficients = g_R1MarsCoefficients.length;\n    var R1 = 0;\n    for (i = 0; i < nR1Coefficients; i++) {\n        R1 += g_R1MarsCoefficients[i].a * Math.cos(g_R1MarsCoefficients[i].b + g_R1MarsCoefficients[i].c * rho);\n    }\n    var nR2Coefficients = g_R2MarsCoefficients.length;\n    var R2 = 0;\n    for (i = 0; i < nR2Coefficients; i++) {\n        R2 += g_R2MarsCoefficients[i].a * Math.cos(g_R2MarsCoefficients[i].b + g_R2MarsCoefficients[i].c * rho);\n    }\n    var nR3Coefficients = g_R3MarsCoefficients.length;\n    var R3 = 0;\n    for (i = 0; i < nR3Coefficients; i++) {\n        R3 += g_R3MarsCoefficients[i].a * Math.cos(g_R3MarsCoefficients[i].b + g_R3MarsCoefficients[i].c * rho);\n    }\n    var nR4Coefficients = g_R4MarsCoefficients.length;\n    var R4 = 0;\n    for (i = 0; i < nR4Coefficients; i++) {\n        R4 += g_R4MarsCoefficients[i].a * Math.cos(g_R4MarsCoefficients[i].b + g_R4MarsCoefficients[i].c * rho);\n    }\n    return (R0 + R1 * rho + R2 * rhosquared + R3 * rhocubed + R4 * rho4) / 100000000;\n};\n\nvar CAAMars$ = {};\n\nregisterType(\"CAAMars\", [CAAMars, CAAMars$, null]);\n","// Originally `AAMERCURY.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the heliocentric position of Mercury\"\n// Last update of original: PJN / 12-05-2006\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { VSC } from \"./earth.js\";\n\n\n// Coefficients\n\nconst g_L0MercuryCoefficients = [new VSC(440250710, 0, 0), new VSC(40989415, 1.48302034, 26087.90314157), new VSC(5046294, 4.47785449, 52175.8062831), new VSC(855347, 1.165203, 78263.709425), new VSC(165590, 4.119692, 104351.612566), new VSC(34562, 0.77931, 130439.51571), new VSC(7583, 3.7135, 156527.4188), new VSC(3560, 1.512, 1109.3786), new VSC(1803, 4.1033, 5661.332), new VSC(1726, 0.3583, 182615.322), new VSC(1590, 2.9951, 25028.5212), new VSC(1365, 4.5992, 27197.2817), new VSC(1017, 0.8803, 31749.2352), new VSC(714, 1.541, 24978.525), new VSC(644, 5.303, 21535.95), new VSC(451, 6.05, 51116.424), new VSC(404, 3.282, 208703.225), new VSC(352, 5.242, 20426.571), new VSC(345, 2.792, 15874.618), new VSC(343, 5.765, 955.6), new VSC(339, 5.863, 25558.212), new VSC(325, 1.337, 53285.185), new VSC(273, 2.495, 529.691), new VSC(264, 3.917, 57837.138), new VSC(260, 0.987, 4551.953), new VSC(239, 0.113, 1059.382), new VSC(235, 0.267, 11322.664), new VSC(217, 0.66, 13521.751), new VSC(209, 2.092, 47623.853), new VSC(183, 2.629, 27043.503), new VSC(182, 2.434, 25661.305), new VSC(176, 4.536, 51066.428), new VSC(173, 2.452, 24498.83), new VSC(142, 3.36, 37410.567), new VSC(138, 0.291, 10213.286), new VSC(125, 3.721, 39609.655), new VSC(118, 2.781, 77204.327), new VSC(106, 4.206, 19804.827)];\nconst g_L1MercuryCoefficients = [new VSC(2608814706223, 0, 0), new VSC(1126008, 6.2170397, 26087.9031416), new VSC(303471, 3.055655, 52175.806283), new VSC(80538, 6.10455, 78263.70942), new VSC(21245, 2.83532, 104351.61257), new VSC(5592, 5.8268, 130439.5157), new VSC(1472, 2.5185, 156527.4188), new VSC(388, 5.48, 182615.322), new VSC(352, 3.052, 1109.379), new VSC(103, 2.149, 208703.225), new VSC(94, 6.12, 27197.28), new VSC(91, 0, 24978.52), new VSC(52, 5.62, 5661.33), new VSC(44, 4.57, 25028.52), new VSC(28, 3.04, 51066.43), new VSC(27, 5.09, 234791.13)];\nconst g_L2MercuryCoefficients = [new VSC(53050, 0, 0), new VSC(16904, 4.69072, 26087.90314), new VSC(7397, 1.3474, 52175.8063), new VSC(3018, 4.4564, 78263.7094), new VSC(1107, 1.264, 104351.6126), new VSC(378, 4.32, 130439.516), new VSC(123, 1.069, 156527.419), new VSC(39, 4.08, 182615.32), new VSC(15, 4.63, 1109.38), new VSC(12, 0.79, 208703.23)];\nconst g_L3MercuryCoefficients = [new VSC(188, 0.035, 52175.806), new VSC(142, 3.125, 26087.903), new VSC(97, 3, 78263.71), new VSC(44, 6.02, 104351.61), new VSC(35, 0, 0), new VSC(18, 2.78, 130439.52), new VSC(7, 5.82, 156527.42), new VSC(3, 2.57, 182615.32)];\nconst g_L4MercuryCoefficients = [new VSC(114, 3.1416, 0), new VSC(2, 2.03, 26087.9), new VSC(2, 1.42, 78263.71), new VSC(2, 4.5, 52175.81), new VSC(1, 4.5, 104351.61), new VSC(1, 1.27, 130439.52)];\nconst g_L5MercuryCoefficients = [new VSC(1, 3.14, 0)];\nconst g_B0MercuryCoefficients = [new VSC(11737529, 1.98357499, 26087.90314157), new VSC(2388077, 5.0373896, 52175.8062831), new VSC(1222840, 3.1415927, 0), new VSC(543252, 1.796444, 78263.709425), new VSC(129779, 4.832325, 104351.612566), new VSC(31867, 1.58088, 130439.51571), new VSC(7963, 4.6097, 156527.4188), new VSC(2014, 1.3532, 182615.322), new VSC(514, 4.378, 208703.325), new VSC(209, 2.02, 24978.525), new VSC(208, 4.918, 27197.282), new VSC(132, 1.119, 234791.128), new VSC(121, 1.813, 53285.185), new VSC(100, 5.657, 20426.571)];\nconst g_B1MercuryCoefficients = [new VSC(429151, 3.501698, 26087.903142), new VSC(146234, 3.141593, 0), new VSC(22675, 0.01515, 52175.80628), new VSC(10895, 0.4854, 78263.70942), new VSC(6353, 3.4294, 104351.6126), new VSC(2496, 0.1605, 130439.5157), new VSC(860, 3.185, 156527.419), new VSC(278, 6.21, 182615.322), new VSC(86, 2.95, 208703.23), new VSC(28, 0.29, 27197.28), new VSC(26, 5.98, 234791.13)];\nconst g_B2MercuryCoefficients = [new VSC(11831, 4.79066, 26087.90314), new VSC(1914, 0, 0), new VSC(1045, 1.2122, 52175.8063), new VSC(266, 4.434, 78263.709), new VSC(170, 1.623, 104351.613), new VSC(96, 4.8, 130439.52), new VSC(45, 1.61, 156527.42), new VSC(18, 4.67, 182615.32), new VSC(7, 1.43, 208703.23)];\nconst g_B3MercuryCoefficients = [new VSC(235, 0.354, 26087.903), new VSC(161, 0, 0), new VSC(19, 4.36, 52175.81), new VSC(6, 2.51, 78263.71), new VSC(5, 6.14, 104351.61), new VSC(3, 3.12, 130439.52), new VSC(2, 6.27, 156527.42)];\nconst g_B4MercuryCoefficients = [new VSC(4, 1.75, 26087.9), new VSC(1, 3.14, 0)];\nconst g_R0MercuryCoefficients = [new VSC(39528272, 0, 0), new VSC(7834132, 6.1923372, 26087.9031416), new VSC(795526, 2.959897, 52175.806283), new VSC(121282, 6.010642, 78263.709425), new VSC(21922, 2.7782, 104351.61257), new VSC(4354, 5.8289, 130439.5157), new VSC(918, 2.597, 156527.419), new VSC(290, 1.424, 25028.521), new VSC(260, 3.028, 27197.282), new VSC(202, 5.647, 182615.322), new VSC(201, 5.592, 31749.235), new VSC(142, 6.253, 24978.525), new VSC(100, 3.734, 21535.95)];\nconst g_R1MercuryCoefficients = [new VSC(217348, 4.656172, 26087.903142), new VSC(44142, 1.42386, 52175.80628), new VSC(10094, 4.47466, 78263.70942), new VSC(2433, 1.2423, 104351.6126), new VSC(1624, 0, 0), new VSC(604, 4.293, 130439.516), new VSC(153, 1.061, 156527.419), new VSC(39, 4.11, 182615.32)];\nconst g_R2MercuryCoefficients = [new VSC(3118, 3.0823, 26087.9031), new VSC(1245, 6.1518, 52175.8063), new VSC(425, 2.926, 78263.709), new VSC(136, 5.98, 104351.613), new VSC(42, 2.75, 130439.52), new VSC(22, 3.14, 0), new VSC(13, 5.8, 156527.42)];\nconst g_R3MercuryCoefficients = [new VSC(33, 1.68, 26087.9), new VSC(24, 4.63, 52175.81), new VSC(12, 1.39, 78263.71), new VSC(5, 4.44, 104351.61), new VSC(2, 1.21, 130439.52)];\n\n\n// CAAMercury\n\nexport function CAAMercury() { }\n\nCAAMercury.eclipticLongitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var rho5 = rho4 * rho;\n    var nL0Coefficients = g_L0MercuryCoefficients.length;\n    var L0 = 0;\n    var i;\n    for (i = 0; i < nL0Coefficients; i++) {\n        L0 += g_L0MercuryCoefficients[i].a * Math.cos(g_L0MercuryCoefficients[i].b + g_L0MercuryCoefficients[i].c * rho);\n    }\n    var nL1Coefficients = g_L1MercuryCoefficients.length;\n    var L1 = 0;\n    for (i = 0; i < nL1Coefficients; i++) {\n        L1 += g_L1MercuryCoefficients[i].a * Math.cos(g_L1MercuryCoefficients[i].b + g_L1MercuryCoefficients[i].c * rho);\n    }\n    var nL2Coefficients = g_L2MercuryCoefficients.length;\n    var L2 = 0;\n    for (i = 0; i < nL2Coefficients; i++) {\n        L2 += g_L2MercuryCoefficients[i].a * Math.cos(g_L2MercuryCoefficients[i].b + g_L2MercuryCoefficients[i].c * rho);\n    }\n    var nL3Coefficients = g_L3MercuryCoefficients.length;\n    var L3 = 0;\n    for (i = 0; i < nL3Coefficients; i++) {\n        L3 += g_L3MercuryCoefficients[i].a * Math.cos(g_L3MercuryCoefficients[i].b + g_L3MercuryCoefficients[i].c * rho);\n    }\n    var nL4Coefficients = g_L4MercuryCoefficients.length;\n    var L4 = 0;\n    for (i = 0; i < nL4Coefficients; i++) {\n        L4 += g_L4MercuryCoefficients[i].a * Math.cos(g_L4MercuryCoefficients[i].b + g_L4MercuryCoefficients[i].c * rho);\n    }\n    var nL5Coefficients = g_L5MercuryCoefficients.length;\n    var L5 = 0;\n    for (i = 0; i < nL5Coefficients; i++) {\n        L5 += g_L5MercuryCoefficients[i].a * Math.cos(g_L5MercuryCoefficients[i].b + g_L5MercuryCoefficients[i].c * rho);\n    }\n    var vvalue = (L0 + L1 * rho + L2 * rhosquared + L3 * rhocubed + L4 * rho4 + L5 * rho5) / 100000000;\n    vvalue = CT.m360(CT.r2D(vvalue));\n    return vvalue;\n};\n\nCAAMercury.eclipticLatitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nB0Coefficients = g_B0MercuryCoefficients.length;\n    var B0 = 0;\n    var i;\n    for (i = 0; i < nB0Coefficients; i++) {\n        B0 += g_B0MercuryCoefficients[i].a * Math.cos(g_B0MercuryCoefficients[i].b + g_B0MercuryCoefficients[i].c * rho);\n    }\n    var nB1Coefficients = g_B1MercuryCoefficients.length;\n    var B1 = 0;\n    for (i = 0; i < nB1Coefficients; i++) {\n        B1 += g_B1MercuryCoefficients[i].a * Math.cos(g_B1MercuryCoefficients[i].b + g_B1MercuryCoefficients[i].c * rho);\n    }\n    var nB2Coefficients = g_B2MercuryCoefficients.length;\n    var B2 = 0;\n    for (i = 0; i < nB2Coefficients; i++) {\n        B2 += g_B2MercuryCoefficients[i].a * Math.cos(g_B2MercuryCoefficients[i].b + g_B2MercuryCoefficients[i].c * rho);\n    }\n    var nB3Coefficients = g_B3MercuryCoefficients.length;\n    var B3 = 0;\n    for (i = 0; i < nB3Coefficients; i++) {\n        B3 += g_B3MercuryCoefficients[i].a * Math.cos(g_B3MercuryCoefficients[i].b + g_B3MercuryCoefficients[i].c * rho);\n    }\n    var nB4Coefficients = g_B4MercuryCoefficients.length;\n    var B4 = 0;\n    for (i = 0; i < nB4Coefficients; i++) {\n        B4 += g_B4MercuryCoefficients[i].a * Math.cos(g_B4MercuryCoefficients[i].b + g_B4MercuryCoefficients[i].c * rho);\n    }\n    var vvalue = (B0 + B1 * rho + B2 * rhosquared + B3 * rhocubed + B4 * rho4) / 100000000;\n    vvalue = CT.r2D(vvalue);\n    return vvalue;\n};\n\nCAAMercury.radiusVector = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var nR0Coefficients = g_R0MercuryCoefficients.length;\n    var R0 = 0;\n    var i;\n    for (i = 0; i < nR0Coefficients; i++) {\n        R0 += g_R0MercuryCoefficients[i].a * Math.cos(g_R0MercuryCoefficients[i].b + g_R0MercuryCoefficients[i].c * rho);\n    }\n    var nR1Coefficients = g_R1MercuryCoefficients.length;\n    var R1 = 0;\n    for (i = 0; i < nR1Coefficients; i++) {\n        R1 += g_R1MercuryCoefficients[i].a * Math.cos(g_R1MercuryCoefficients[i].b + g_R1MercuryCoefficients[i].c * rho);\n    }\n    var nR2Coefficients = g_R2MercuryCoefficients.length;\n    var R2 = 0;\n    for (i = 0; i < nR2Coefficients; i++) {\n        R2 += g_R2MercuryCoefficients[i].a * Math.cos(g_R2MercuryCoefficients[i].b + g_R2MercuryCoefficients[i].c * rho);\n    }\n    var nR3Coefficients = g_R3MercuryCoefficients.length;\n    var R3 = 0;\n    for (i = 0; i < nR3Coefficients; i++) {\n        R3 += g_R3MercuryCoefficients[i].a * Math.cos(g_R3MercuryCoefficients[i].b + g_R3MercuryCoefficients[i].c * rho);\n    }\n    return (R0 + R1 * rho + R2 * rhosquared + R3 * rhocubed) / 100000000;\n};\n\nvar CAAMercury$ = {};\n\nregisterType(\"CAAMercury\", [CAAMercury, CAAMercury$, null]);\n","// Originally `AAABERRATION.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the position of the Moon\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { CAAEarth } from \"./earth.js\";\nimport { CAANutation } from \"./nutation.js\";\n\n\n// MoonCoefficient1\n\nexport function MoonCoefficient1(d, m, mdash, f) {\n    this.d = 0;\n    this.m = 0;\n    this.mdash = 0;\n    this.f = 0;\n    this.d = d;\n    this.m = m;\n    this.mdash = mdash;\n    this.f = f;\n}\n\nvar MoonCoefficient1$ = {};\n\nregisterType(\"MoonCoefficient1\", [MoonCoefficient1, MoonCoefficient1$, null]);\n\n\n// MoonCoefficient2\n\nexport function MoonCoefficient2(a, b) {\n    this.a = 0;\n    this.b = 0;\n    this.a = a;\n    this.b = b;\n}\n\nvar MoonCoefficient2$ = {};\n\nregisterType(\"MoonCoefficient2\", [MoonCoefficient2, MoonCoefficient2$, null]);\n\n\n// Constants\n\nconst g_MoonCoefficients1 = [new MoonCoefficient1(0, 0, 1, 0), new MoonCoefficient1(2, 0, -1, 0), new MoonCoefficient1(2, 0, 0, 0), new MoonCoefficient1(0, 0, 2, 0), new MoonCoefficient1(0, 1, 0, 0), new MoonCoefficient1(0, 0, 0, 2), new MoonCoefficient1(2, 0, -2, 0), new MoonCoefficient1(2, -1, -1, 0), new MoonCoefficient1(2, 0, 1, 0), new MoonCoefficient1(2, -1, 0, 0), new MoonCoefficient1(0, 1, -1, 0), new MoonCoefficient1(1, 0, 0, 0), new MoonCoefficient1(0, 1, 1, 0), new MoonCoefficient1(2, 0, 0, -2), new MoonCoefficient1(0, 0, 1, 2), new MoonCoefficient1(0, 0, 1, -2), new MoonCoefficient1(4, 0, -1, 0), new MoonCoefficient1(0, 0, 3, 0), new MoonCoefficient1(4, 0, -2, 0), new MoonCoefficient1(2, 1, -1, 0), new MoonCoefficient1(2, 1, 0, 0), new MoonCoefficient1(1, 0, -1, 0), new MoonCoefficient1(1, 1, 0, 0), new MoonCoefficient1(2, -1, 1, 0), new MoonCoefficient1(2, 0, 2, 0), new MoonCoefficient1(4, 0, 0, 0), new MoonCoefficient1(2, 0, -3, 0), new MoonCoefficient1(0, 1, -2, 0), new MoonCoefficient1(2, 0, -1, 2), new MoonCoefficient1(2, -1, -2, 0), new MoonCoefficient1(1, 0, 1, 0), new MoonCoefficient1(2, -2, 0, 0), new MoonCoefficient1(0, 1, 2, 0), new MoonCoefficient1(0, 2, 0, 0), new MoonCoefficient1(2, -2, -1, 0), new MoonCoefficient1(2, 0, 1, -2), new MoonCoefficient1(2, 0, 0, 2), new MoonCoefficient1(4, -1, -1, 0), new MoonCoefficient1(0, 0, 2, 2), new MoonCoefficient1(3, 0, -1, 0), new MoonCoefficient1(2, 1, 1, 0), new MoonCoefficient1(4, -1, -2, 0), new MoonCoefficient1(0, 2, -1, 0), new MoonCoefficient1(2, 2, -1, 0), new MoonCoefficient1(2, 1, -2, 0), new MoonCoefficient1(2, -1, 0, -2), new MoonCoefficient1(4, 0, 1, 0), new MoonCoefficient1(0, 0, 4, 0), new MoonCoefficient1(4, -1, 0, 0), new MoonCoefficient1(1, 0, -2, 0), new MoonCoefficient1(2, 1, 0, -2), new MoonCoefficient1(0, 0, 2, -2), new MoonCoefficient1(1, 1, 1, 0), new MoonCoefficient1(3, 0, -2, 0), new MoonCoefficient1(4, 0, -3, 0), new MoonCoefficient1(2, -1, 2, 0), new MoonCoefficient1(0, 2, 1, 0), new MoonCoefficient1(1, 1, -1, 0), new MoonCoefficient1(2, 0, 3, 0), new MoonCoefficient1(2, 0, -1, -2)];\nconst g_MoonCoefficients2 = [new MoonCoefficient2(6288774, -20905355), new MoonCoefficient2(1274027, -3699111), new MoonCoefficient2(658314, -2955968), new MoonCoefficient2(213618, -569925), new MoonCoefficient2(-185116, 48888), new MoonCoefficient2(-114332, -3149), new MoonCoefficient2(58793, 246158), new MoonCoefficient2(57066, -152138), new MoonCoefficient2(53322, -170733), new MoonCoefficient2(45758, -204586), new MoonCoefficient2(-40923, -129620), new MoonCoefficient2(-34720, 108743), new MoonCoefficient2(-30383, 104755), new MoonCoefficient2(15327, 10321), new MoonCoefficient2(-12528, 0), new MoonCoefficient2(10980, 79661), new MoonCoefficient2(10675, -34782), new MoonCoefficient2(10034, -23210), new MoonCoefficient2(8548, -21636), new MoonCoefficient2(-7888, 24208), new MoonCoefficient2(-6766, 30824), new MoonCoefficient2(-5163, -8379), new MoonCoefficient2(4987, -16675), new MoonCoefficient2(4036, -12831), new MoonCoefficient2(3994, -10445), new MoonCoefficient2(3861, -11650), new MoonCoefficient2(3665, 14403), new MoonCoefficient2(-2689, -7003), new MoonCoefficient2(-2602, 0), new MoonCoefficient2(2390, 10056), new MoonCoefficient2(-2348, 6322), new MoonCoefficient2(2236, -9884), new MoonCoefficient2(-2120, 5751), new MoonCoefficient2(-2069, 0), new MoonCoefficient2(2048, -4950), new MoonCoefficient2(-1773, 4130), new MoonCoefficient2(-1595, 0), new MoonCoefficient2(1215, -3958), new MoonCoefficient2(-1110, 0), new MoonCoefficient2(-892, 3258), new MoonCoefficient2(-810, 2616), new MoonCoefficient2(759, -1897), new MoonCoefficient2(-713, -2117), new MoonCoefficient2(-700, 2354), new MoonCoefficient2(691, 0), new MoonCoefficient2(596, 0), new MoonCoefficient2(549, -1423), new MoonCoefficient2(537, -1117), new MoonCoefficient2(520, -1571), new MoonCoefficient2(-487, -1739), new MoonCoefficient2(-399, 0), new MoonCoefficient2(-381, -4421), new MoonCoefficient2(351, 0), new MoonCoefficient2(-340, 0), new MoonCoefficient2(330, 0), new MoonCoefficient2(327, 0), new MoonCoefficient2(-323, 1165), new MoonCoefficient2(299, 0), new MoonCoefficient2(294, 0), new MoonCoefficient2(0, 8752)];\nconst g_MoonCoefficients3 = [new MoonCoefficient1(0, 0, 0, 1), new MoonCoefficient1(0, 0, 1, 1), new MoonCoefficient1(0, 0, 1, -1), new MoonCoefficient1(2, 0, 0, -1), new MoonCoefficient1(2, 0, -1, 1), new MoonCoefficient1(2, 0, -1, -1), new MoonCoefficient1(2, 0, 0, 1), new MoonCoefficient1(0, 0, 2, 1), new MoonCoefficient1(2, 0, 1, -1), new MoonCoefficient1(0, 0, 2, -1), new MoonCoefficient1(2, -1, 0, -1), new MoonCoefficient1(2, 0, -2, -1), new MoonCoefficient1(2, 0, 1, 1), new MoonCoefficient1(2, 1, 0, -1), new MoonCoefficient1(2, -1, -1, 1), new MoonCoefficient1(2, -1, 0, 1), new MoonCoefficient1(2, -1, -1, -1), new MoonCoefficient1(0, 1, -1, -1), new MoonCoefficient1(4, 0, -1, -1), new MoonCoefficient1(0, 1, 0, 1), new MoonCoefficient1(0, 0, 0, 3), new MoonCoefficient1(0, 1, -1, 1), new MoonCoefficient1(1, 0, 0, 1), new MoonCoefficient1(0, 1, 1, 1), new MoonCoefficient1(0, 1, 1, -1), new MoonCoefficient1(0, 1, 0, -1), new MoonCoefficient1(1, 0, 0, -1), new MoonCoefficient1(0, 0, 3, 1), new MoonCoefficient1(4, 0, 0, -1), new MoonCoefficient1(4, 0, -1, 1), new MoonCoefficient1(0, 0, 1, -3), new MoonCoefficient1(4, 0, -2, 1), new MoonCoefficient1(2, 0, 0, -3), new MoonCoefficient1(2, 0, 2, -1), new MoonCoefficient1(2, -1, 1, -1), new MoonCoefficient1(2, 0, -2, 1), new MoonCoefficient1(0, 0, 3, -1), new MoonCoefficient1(2, 0, 2, 1), new MoonCoefficient1(2, 0, -3, -1), new MoonCoefficient1(2, 1, -1, 1), new MoonCoefficient1(2, 1, 0, 1), new MoonCoefficient1(4, 0, 0, 1), new MoonCoefficient1(2, -1, 1, 1), new MoonCoefficient1(2, -2, 0, -1), new MoonCoefficient1(0, 0, 1, 3), new MoonCoefficient1(2, 1, 1, -1), new MoonCoefficient1(1, 1, 0, -1), new MoonCoefficient1(1, 1, 0, 1), new MoonCoefficient1(0, 1, -2, -1), new MoonCoefficient1(2, 1, -1, -1), new MoonCoefficient1(1, 0, 1, 1), new MoonCoefficient1(2, -1, -2, -1), new MoonCoefficient1(0, 1, 2, 1), new MoonCoefficient1(4, 0, -2, -1), new MoonCoefficient1(4, -1, -1, -1), new MoonCoefficient1(1, 0, 1, -1), new MoonCoefficient1(4, 0, 1, -1), new MoonCoefficient1(1, 0, -1, -1), new MoonCoefficient1(4, -1, 0, -1), new MoonCoefficient1(2, -2, 0, 1)];\nconst g_MoonCoefficients4 = [5128122, 280602, 277693, 173237, 55413, 46271, 32573, 17198, 9266, 8822, 8216, 4324, 4200, -3359, 2463, 2211, 2065, -1870, 1828, -1794, -1749, -1565, -1491, -1475, -1410, -1344, -1335, 1107, 1021, 833, 777, 671, 607, 596, 491, -451, 439, 422, 421, -366, -351, 331, 315, 302, -283, -229, 223, 223, -220, -220, -185, 181, -177, 176, 166, -164, 132, -119, 115, 107];\n\n\n// CAAMoon\n\nexport function CAAMoon() { }\n\nCAAMoon.meanLongitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    return CT.m360(218.3164477 + 481267.88123421 * T - 0.0015786 * Tsquared + Tcubed / 538841 - T4 / 65194000);\n};\n\nCAAMoon.meanElongation = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    return CT.m360(297.8501921 + 445267.1114034 * T - 0.0018819 * Tsquared + Tcubed / 545868 - T4 / 113065000);\n};\n\nCAAMoon.meanAnomaly = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    return CT.m360(134.9633964 + 477198.8675055 * T + 0.0087414 * Tsquared + Tcubed / 69699 - T4 / 14712000);\n};\n\nCAAMoon.argumentOfLatitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    return CT.m360(93.272095 + 483202.0175233 * T - 0.0036539 * Tsquared - Tcubed / 3526000 + T4 / 863310000);\n};\n\nCAAMoon.meanLongitudeAscendingNode = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    return CT.m360(125.0445479 - 1934.1362891 * T + 0.0020754 * Tsquared + Tcubed / 467441 - T4 / 60616000);\n};\n\nCAAMoon.meanLongitudePerigee = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    return CT.m360(83.3532465 + 4069.0137287 * T - 0.01032 * Tsquared - Tcubed / 80053 + T4 / 18999000);\n};\n\nCAAMoon.trueLongitudeAscendingNode = function (JD) {\n    var TrueAscendingNode = CAAMoon.meanLongitudeAscendingNode(JD);\n    var D = CAAMoon.meanElongation(JD);\n    D = CT.d2R(D);\n    var M = CAAEarth.sunMeanAnomaly(JD);\n    M = CT.d2R(M);\n    var Mdash = CAAMoon.meanAnomaly(JD);\n    Mdash = CT.d2R(Mdash);\n    var F = CAAMoon.argumentOfLatitude(JD);\n    F = CT.d2R(F);\n    TrueAscendingNode -= 1.4979 * Math.sin(2 * (D - F));\n    TrueAscendingNode -= 0.15 * Math.sin(M);\n    TrueAscendingNode -= 0.1226 * Math.sin(2 * D);\n    TrueAscendingNode += 0.1176 * Math.sin(2 * F);\n    TrueAscendingNode -= 0.0801 * Math.sin(2 * (Mdash - F));\n    return CT.m360(TrueAscendingNode);\n};\n\nCAAMoon.eclipticLongitude = function (JD) {\n    var Ldash = CAAMoon.meanLongitude(JD);\n    var LdashDegrees = Ldash;\n    Ldash = CT.d2R(Ldash);\n    var D = CAAMoon.meanElongation(JD);\n    D = CT.d2R(D);\n    var M = CAAEarth.sunMeanAnomaly(JD);\n    M = CT.d2R(M);\n    var Mdash = CAAMoon.meanAnomaly(JD);\n    Mdash = CT.d2R(Mdash);\n    var F = CAAMoon.argumentOfLatitude(JD);\n    F = CT.d2R(F);\n    var E = CAAEarth.eccentricity(JD);\n    var T = (JD - 2451545) / 36525;\n    var A1 = CT.m360(119.75 + 131.849 * T);\n    A1 = CT.d2R(A1);\n    var A2 = CT.m360(53.09 + 479264.29 * T);\n    A2 = CT.d2R(A2);\n    var A3 = CT.m360(313.45 + 481266.484 * T);\n    A3 = CT.d2R(A3);\n    var nLCoefficients = g_MoonCoefficients1.length;\n    console.assert(g_MoonCoefficients2.length === nLCoefficients);\n    var SigmaL = 0;\n    for (var i = 0; i < nLCoefficients; i++) {\n        var ThisSigma = g_MoonCoefficients2[i].a * Math.sin(g_MoonCoefficients1[i].d * D + g_MoonCoefficients1[i].m * M + g_MoonCoefficients1[i].mdash * Mdash + g_MoonCoefficients1[i].f * F);\n        if (!!g_MoonCoefficients1[i].m) {\n            ThisSigma *= E;\n        }\n        SigmaL += ThisSigma;\n    }\n    SigmaL += 3958 * Math.sin(A1);\n    SigmaL += 1962 * Math.sin(Ldash - F);\n    SigmaL += 318 * Math.sin(A2);\n    var NutationInLong = CAANutation.nutationInLongitude(JD);\n    return CT.m360(LdashDegrees + SigmaL / 1000000 + NutationInLong / 3600);\n};\n\nCAAMoon.eclipticLatitude = function (JD) {\n    var Ldash = CAAMoon.meanLongitude(JD);\n    Ldash = CT.d2R(Ldash);\n    var D = CAAMoon.meanElongation(JD);\n    D = CT.d2R(D);\n    var M = CAAEarth.sunMeanAnomaly(JD);\n    M = CT.d2R(M);\n    var Mdash = CAAMoon.meanAnomaly(JD);\n    Mdash = CT.d2R(Mdash);\n    var F = CAAMoon.argumentOfLatitude(JD);\n    F = CT.d2R(F);\n    var E = CAAEarth.eccentricity(JD);\n    var T = (JD - 2451545) / 36525;\n    var A1 = CT.m360(119.75 + 131.849 * T);\n    A1 = CT.d2R(A1);\n    var A2 = CT.m360(53.09 + 479264.29 * T);\n    A2 = CT.d2R(A2);\n    var A3 = CT.m360(313.45 + 481266.484 * T);\n    A3 = CT.d2R(A3);\n    var nBCoefficients = g_MoonCoefficients3.length;\n    console.assert(g_MoonCoefficients4.length === nBCoefficients);\n    var SigmaB = 0;\n    for (var i = 0; i < nBCoefficients; i++) {\n        var ThisSigma = g_MoonCoefficients4[i] * Math.sin(g_MoonCoefficients3[i].d * D + g_MoonCoefficients3[i].m * M + g_MoonCoefficients3[i].mdash * Mdash + g_MoonCoefficients3[i].f * F);\n        if (!!g_MoonCoefficients3[i].m) {\n            ThisSigma *= E;\n        }\n        SigmaB += ThisSigma;\n    }\n    SigmaB -= 2235 * Math.sin(Ldash);\n    SigmaB += 382 * Math.sin(A3);\n    SigmaB += 175 * Math.sin(A1 - F);\n    SigmaB += 175 * Math.sin(A1 + F);\n    SigmaB += 127 * Math.sin(Ldash - Mdash);\n    SigmaB -= 115 * Math.sin(Ldash + Mdash);\n    return SigmaB / 1000000;\n};\n\nCAAMoon.radiusVector = function (JD) {\n    var Ldash = CAAMoon.meanLongitude(JD);\n    Ldash = CT.d2R(Ldash);\n    var D = CAAMoon.meanElongation(JD);\n    D = CT.d2R(D);\n    var M = CAAEarth.sunMeanAnomaly(JD);\n    M = CT.d2R(M);\n    var Mdash = CAAMoon.meanAnomaly(JD);\n    Mdash = CT.d2R(Mdash);\n    var F = CAAMoon.argumentOfLatitude(JD);\n    F = CT.d2R(F);\n    var E = CAAEarth.eccentricity(JD);\n    var T = (JD - 2451545) / 36525;\n    var A1 = CT.m360(119.75 + 131.849 * T);\n    A1 = CT.d2R(A1);\n    var A2 = CT.m360(53.09 + 479264.29 * T);\n    A2 = CT.d2R(A2);\n    var A3 = CT.m360(313.45 + 481266.484 * T);\n    A3 = CT.d2R(A3);\n    var nRCoefficients = g_MoonCoefficients1.length;\n    console.assert(g_MoonCoefficients2.length === nRCoefficients);\n    var SigmaR = 0;\n    for (var i = 0; i < nRCoefficients; i++) {\n        var ThisSigma = g_MoonCoefficients2[i].b * Math.cos(g_MoonCoefficients1[i].d * D + g_MoonCoefficients1[i].m * M + g_MoonCoefficients1[i].mdash * Mdash + g_MoonCoefficients1[i].f * F);\n        if (!!g_MoonCoefficients1[i].m) {\n            ThisSigma *= E;\n        }\n        SigmaR += ThisSigma;\n    }\n    return 385000.56 + SigmaR / 1000;\n};\n\nCAAMoon.radiusVectorToHorizontalParallax = function (RadiusVector) {\n    return CT.r2D(Math.asin(6378.14 / RadiusVector));\n};\n\nCAAMoon.horizontalParallaxToRadiusVector = function (Parallax) {\n    return 6378.14 / Math.sin(CT.d2R(Parallax));\n};\n\nvar CAAMoon$ = {};\n\nregisterType(\"CAAMoon\", [CAAMoon, CAAMoon$, null]);\n","// Originally `AAMOONILLUMINATEDFRACTION.CPP`\n// \"Purpose: Implementation for the algorithms for the Moon's Elongation, Phase Angle and Illuminated Fraction\"\n// Last update of original: PJN / 26-01-2007\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// MIFR\n\nexport function MIFR() {\n}\n\nMIFR.geocentricElongation = function (ObjectAlpha, ObjectDelta, SunAlpha, SunDelta) {\n    ObjectAlpha = CT.d2R(ObjectAlpha * 15);\n    SunAlpha = CT.d2R(SunAlpha * 15);\n    ObjectDelta = CT.d2R(ObjectDelta);\n    SunDelta = CT.d2R(SunDelta);\n    return CT.r2D(Math.acos(Math.sin(SunDelta) * Math.sin(ObjectDelta) + Math.cos(SunDelta) * Math.cos(ObjectDelta) * Math.cos(SunAlpha - ObjectAlpha)));\n};\n\nMIFR.phaseAngle = function (GeocentricElongation, EarthObjectDistance, EarthSunDistance) {\n    GeocentricElongation = CT.d2R(GeocentricElongation);\n    return CT.m360(CT.r2D(Math.atan2(EarthSunDistance * Math.sin(GeocentricElongation), EarthObjectDistance - EarthSunDistance * Math.cos(GeocentricElongation))));\n};\n\nMIFR.illuminatedFraction = function (PhaseAngle) {\n    PhaseAngle = CT.d2R(PhaseAngle);\n    return (1 + Math.cos(PhaseAngle)) / 2;\n};\n\nMIFR.positionAngle = function (Alpha0, Delta0, Alpha, Delta) {\n    Alpha0 = CT.h2R(Alpha0);\n    Alpha = CT.h2R(Alpha);\n    Delta0 = CT.d2R(Delta0);\n    Delta = CT.d2R(Delta);\n    return CT.m360(CT.r2D(Math.atan2(Math.cos(Delta0) * Math.sin(Alpha0 - Alpha), Math.sin(Delta0) * Math.cos(Delta) - Math.cos(Delta0) * Math.sin(Delta) * Math.cos(Alpha0 - Alpha))));\n};\n\nvar MIFR$ = {};\n\nregisterType(\"MIFR\", [MIFR, MIFR$, null]);\n","// Originally `AAMOONNODES.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the dates when the Moon passes thro its nodes\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// CAAMoonNodes\n\nexport function CAAMoonNodes() { }\n\nCAAMoonNodes.k = function (Year) {\n    return 13.4223 * (Year - 2000.05);\n};\n\nCAAMoonNodes.passageThroNode = function (k) {\n    var T = k / 1342.23;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    var D = CT.m360(183.638 + 331.73735682 * k + 0.0014852 * Tsquared + 2.09E-06 * Tcubed - 1E-08 * T4);\n    var M = CT.m360(17.4006 + 26.8203725 * k + 0.0001186 * Tsquared + 6E-08 * Tcubed);\n    var Mdash = CT.m360(38.3776 + 355.52747313 * k + 0.0123499 * Tsquared + 1.4627E-05 * Tcubed - 6.9E-08 * T4);\n    var omega = CT.m360(123.9767 - 1.44098956 * k + 0.0020608 * Tsquared + 2.14E-06 * Tcubed - 1.6E-08 * T4);\n    var V = CT.m360(299.75 + 132.85 * T - 0.009173 * Tsquared);\n    var P = CT.m360(omega + 272.75 - 2.3 * T);\n    var E = 1 - 0.002516 * T - 7.4E-06 * Tsquared;\n    D = CT.d2R(D);\n    var D2 = 2 * D;\n    var D4 = D2 * D2;\n    M = CT.d2R(M);\n    Mdash = CT.d2R(Mdash);\n    var Mdash2 = 2 * Mdash;\n    omega = CT.d2R(omega);\n    V = CT.d2R(V);\n    P = CT.d2R(P);\n    var JD = 2451565.1619 + 27.212220817 * k + 0.0002762 * Tsquared + 2.1E-08 * Tcubed - 8.8E-11 * T4 - 0.4721 * Math.sin(Mdash) - 0.1649 * Math.sin(D2) - 0.0868 * Math.sin(D2 - Mdash) + 0.0084 * Math.sin(D2 + Mdash) - E * 0.0083 * Math.sin(D2 - M) - E * 0.0039 * Math.sin(D2 - M - Mdash) + 0.0034 * Math.sin(Mdash2) - 0.0031 * Math.sin(D2 - Mdash2) + E * 0.003 * Math.sin(D2 + M) + E * 0.0028 * Math.sin(M - Mdash) + E * 0.0026 * Math.sin(M) + 0.0025 * Math.sin(D4) + 0.0024 * Math.sin(D) + E * 0.0022 * Math.sin(M + Mdash) + 0.0017 * Math.sin(omega) + 0.0014 * Math.sin(D4 - Mdash) + E * 0.0005 * Math.sin(D2 + M - Mdash) + E * 0.0004 * Math.sin(D2 - M + Mdash) - E * 0.0003 * Math.sin(D2 - M * M) + E * 0.0003 * Math.sin(D4 - M) + 0.0003 * Math.sin(V) + 0.0003 * Math.sin(P);\n    return JD;\n};\n\nvar CAAMoonNodes$ = {};\n\nregisterType(\"CAAMoonNodes\", [CAAMoonNodes, CAAMoonNodes$, null]);\n","// Originally `AAMOONPERIGEEAPOGEE.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the dates of Lunar Apogee and Perigee\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// MPAC - was MoonPerigeeApogeeCoefficient\n\nexport function MPAC(D, M, F, C, T) {\n    this.d = 0;\n    this.m = 0;\n    this.f = 0;\n    this.c = 0;\n    this.t = 0;\n    this.d = D;\n    this.m = M;\n    this.f = F;\n    this.c = C;\n    this.t = T;\n}\n\nvar MPAC$ = {};\n\nregisterType(\"MPAC\", [MPAC, MPAC$, null]);\n\n\n// Constants\n\nconst g_MoonPerigeeApogeeCoefficients1 = [new MPAC(2, 0, 0, -1.6769, 0), new MPAC(4, 0, 0, 0.4589, 0), new MPAC(6, 0, 0, -0.1856, 0), new MPAC(8, 0, 0, 0.0883, 0), new MPAC(2, -1, 0, -0.0773, 0.00019), new MPAC(0, 1, 0, 0.0502, -0.00013), new MPAC(10, 0, 0, -0.046, 0), new MPAC(4, -1, 0, 0.0422, -0.00011), new MPAC(6, -1, 0, -0.0256, 0), new MPAC(12, 0, 0, 0.0253, 0), new MPAC(1, 0, 0, 0.0237, 0), new MPAC(8, -1, 0, 0.0162, 0), new MPAC(14, 0, 0, -0.0145, 0), new MPAC(0, 0, 2, 0.0129, 0), new MPAC(3, 0, 0, -0.0112, 0), new MPAC(10, -1, 0, -0.0104, 0), new MPAC(16, 0, 0, 0.0086, 0), new MPAC(12, -1, 0, 0.0069, 0), new MPAC(5, 0, 0, 0.0066, 0), new MPAC(2, 0, 2, -0.0053, 0), new MPAC(18, 0, 0, -0.0052, 0), new MPAC(14, -1, 0, -0.0046, 0), new MPAC(7, 0, 0, -0.0041, 0), new MPAC(2, 1, 0, 0.004, 0), new MPAC(20, 0, 0, 0.0032, 0), new MPAC(1, 1, 0, -0.0032, 0), new MPAC(16, -1, 0, 0.0031, 0), new MPAC(4, 1, 0, -0.0029, 0), new MPAC(9, 0, 0, 0.0027, 0), new MPAC(4, 0, 2, 0.0027, 0), new MPAC(2, -2, 0, -0.0027, 0), new MPAC(4, -2, 0, 0.0024, 0), new MPAC(6, -2, 0, -0.0021, 0), new MPAC(22, 0, 0, -0.0021, 0), new MPAC(18, -1, 0, -0.0021, 0), new MPAC(6, 1, 0, 0.0019, 0), new MPAC(11, 0, 0, -0.0018, 0), new MPAC(8, 1, 0, -0.0014, 0), new MPAC(4, 0, -2, -0.0014, 0), new MPAC(6, 0, 2, -0.0014, 0), new MPAC(3, 1, 0, 0.0014, 0), new MPAC(5, 1, 0, -0.0014, 0), new MPAC(13, 0, 0, 0.0013, 0), new MPAC(20, -1, 0, 0.0013, 0), new MPAC(3, 2, 0, 0.0011, 0), new MPAC(4, -2, 2, -0.0011, 0), new MPAC(1, 2, 0, -0.0011, 0), new MPAC(22, -1, 0, -0.0009, 0), new MPAC(0, 0, 4, -0.0008, 0), new MPAC(6, 0, -2, 0.0008, 0), new MPAC(2, 1, -2, 0.0008, 0), new MPAC(0, 2, 0, 0.0007, 0), new MPAC(0, -1, 2, 0.0007, 0), new MPAC(2, 0, 4, 0.0007, 0), new MPAC(0, -2, 2, -0.0006, 0), new MPAC(2, 2, -2, -0.0006, 0), new MPAC(24, 0, 0, 0.0006, 0), new MPAC(4, 0, -4, 0.0005, 0), new MPAC(2, 2, 0, 0.0005, 0), new MPAC(1, -1, 0, -0.0004, 0)];\nconst g_MoonPerigeeApogeeCoefficients2 = [new MPAC(2, 0, 0, 0.4392, 0), new MPAC(4, 0, 0, 0.0684, 0), new MPAC(0, 1, 0, 0.0456, -0.00011), new MPAC(2, -1, 0, 0.0426, -0.00011), new MPAC(0, 0, 2, 0.0212, 0), new MPAC(1, 0, 0, -0.0189, 0), new MPAC(6, 0, 0, 0.0144, 0), new MPAC(4, -1, 0, 0.0113, 0), new MPAC(2, 0, 2, 0.0047, 0), new MPAC(1, 1, 0, 0.0036, 0), new MPAC(8, 0, 0, 0.0035, 0), new MPAC(6, -1, 0, 0.0034, 0), new MPAC(2, 0, -2, -0.0034, 0), new MPAC(2, -2, 0, 0.0022, 0), new MPAC(3, 0, 0, -0.0017, 0), new MPAC(4, 0, 2, 0.0013, 0), new MPAC(8, -1, 0, 0.0011, 0), new MPAC(4, -2, 0, 0.001, 0), new MPAC(10, 0, 0, 0.0009, 0), new MPAC(3, 1, 0, 0.0007, 0), new MPAC(0, 2, 0, 0.0006, 0), new MPAC(2, 1, 0, 0.0005, 0), new MPAC(2, 2, 0, 0.0005, 0), new MPAC(6, 0, 2, 0.0004, 0), new MPAC(6, -2, 0, 0.0004, 0), new MPAC(10, -1, 0, 0.0004, 0), new MPAC(5, 0, 0, -0.0004, 0), new MPAC(4, 0, -2, -0.0004, 0), new MPAC(0, 1, 2, 0.0003, 0), new MPAC(12, 0, 0, 0.0003, 0), new MPAC(2, -1, 2, 0.0003, 0), new MPAC(1, -1, 0, -0.0003, 0)];\nconst g_MoonPerigeeApogeeCoefficients3 = [new MPAC(2, 0, 0, 63.224, 0), new MPAC(4, 0, 0, -6.99, 0), new MPAC(2, -1, 0, 2.834, 0), new MPAC(2, -1, 0, 0, -0.0071), new MPAC(6, 0, 0, 1.927, 0), new MPAC(1, 0, 0, -1.263, 0), new MPAC(8, 0, 0, -0.702, 0), new MPAC(0, 1, 0, 0.696, 0), new MPAC(0, 1, 0, 0, -0.0017), new MPAC(0, 0, 2, -0.69, 0), new MPAC(4, -1, 0, -0.629, 0), new MPAC(4, -1, 0, 0, 0.0016), new MPAC(2, 0, -2, -0.392, 0), new MPAC(10, 0, 0, 0.297, 0), new MPAC(6, -1, 0, 0.26, 0), new MPAC(3, 0, 0, 0.201, 0), new MPAC(2, 1, 0, -0.161, 0), new MPAC(1, 1, 0, 0.157, 0), new MPAC(12, 0, 0, -0.138, 0), new MPAC(8, -1, 0, -0.127, 0), new MPAC(2, 0, 2, 0.104, 0), new MPAC(2, -2, 0, 0.104, 0), new MPAC(5, 0, 0, -0.079, 0), new MPAC(14, 0, 0, 0.068, 0), new MPAC(10, -1, 0, 0.067, 0), new MPAC(4, 1, 0, 0.054, 0), new MPAC(12, -1, 0, -0.038, 0), new MPAC(4, -2, 0, -0.038, 0), new MPAC(7, 0, 0, 0.037, 0), new MPAC(4, 0, 2, -0.037, 0), new MPAC(16, 0, 0, -0.035, 0), new MPAC(3, 1, 0, -0.03, 0), new MPAC(1, -1, 0, 0.029, 0), new MPAC(6, 1, 0, -0.025, 0), new MPAC(0, 2, 0, 0.023, 0), new MPAC(14, -1, 0, 0.023, 0), new MPAC(2, 2, 0, -0.023, 0), new MPAC(6, -2, 0, 0.022, 0), new MPAC(2, -1, -2, -0.021, 0), new MPAC(9, 0, 0, -0.02, 0), new MPAC(18, 0, 0, 0.019, 0), new MPAC(6, 0, 2, 0.017, 0), new MPAC(0, -1, 2, 0.014, 0), new MPAC(16, -1, 0, -0.014, 0), new MPAC(4, 0, -20, 0.013, 0), new MPAC(8, 1, 0, 0.012, 0), new MPAC(11, 0, 0, 0.011, 0), new MPAC(5, 1, 0, 0.01, 0), new MPAC(20, 0, 0, -0.01, 0)];\nconst g_MoonPerigeeApogeeCoefficients4 = [new MPAC(2, 0, 0, -9.147, 0), new MPAC(1, 0, 0, -0.841, 0), new MPAC(0, 0, 2, 0.697, 0), new MPAC(0, 1, 0, -0.656, 0.0016), new MPAC(4, 0, 0, 0.355, 0), new MPAC(2, -1, 0, 0.159, 0), new MPAC(1, 1, 0, 0.127, 0), new MPAC(4, -1, 0, 0.065, 0), new MPAC(6, 0, 0, 0.052, 0), new MPAC(2, 1, 0, 0.043, 0), new MPAC(2, 0, 2, 0.031, 0), new MPAC(2, 0, -2, -0.023, 0), new MPAC(2, -2, 0, 0.022, 0), new MPAC(2, 2, 0, 0.019, 0), new MPAC(0, 2, 0, -0.016, 0), new MPAC(6, -1, 0, 0.014, 0), new MPAC(8, 0, 0, 0.01, 0)];\n\n\n// CAAMoonPerigeeApogee\n\nexport function CAAMoonPerigeeApogee() { }\n\nCAAMoonPerigeeApogee.k = function (Year) {\n    return 13.2555 * (Year - 1999.97);\n};\n\nCAAMoonPerigeeApogee.meanPerigee = function (k) {\n    var T = k / 1325.55;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    return 2451534.6698 + 27.55454989 * k - 0.0006691 * Tsquared - 1.098E-06 * Tcubed + 5.2E-09 * T4;\n};\n\nCAAMoonPerigeeApogee.meanApogee = function (k) {\n    return CAAMoonPerigeeApogee.meanPerigee(k);\n};\n\nCAAMoonPerigeeApogee.truePerigee = function (k) {\n    var MeanJD = CAAMoonPerigeeApogee.meanPerigee(k);\n    var T = k / 1325.55;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    var D = CT.m360(171.9179 + 335.9106046 * k - 0.0100383 * Tsquared - 1.156E-05 * Tcubed + 5.5E-08 * T4);\n    D = CT.d2R(D);\n    var M = CT.m360(347.3477 + 27.1577721 * k - 0.000813 * Tsquared - 1E-06 * Tcubed);\n    M = CT.d2R(M);\n    var F = CT.m360(316.6109 + 364.5287911 * k - 0.0125053 * Tsquared - 1.48E-05 * Tcubed);\n    F = CT.d2R(F);\n    var nPerigeeCoefficients = g_MoonPerigeeApogeeCoefficients1.length;\n    var Sigma = 0;\n    for (var i = 0; i < nPerigeeCoefficients; i++) {\n        Sigma += g_MoonPerigeeApogeeCoefficients1[i].c * Math.sin(D * g_MoonPerigeeApogeeCoefficients1[i].d + M * g_MoonPerigeeApogeeCoefficients1[i].m + F * g_MoonPerigeeApogeeCoefficients1[i].f + T * g_MoonPerigeeApogeeCoefficients1[i].t);\n    }\n    return MeanJD + Sigma;\n};\n\nCAAMoonPerigeeApogee.trueApogee = function (k) {\n    var MeanJD = CAAMoonPerigeeApogee.meanApogee(k);\n    var T = k / 1325.55;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    var D = CT.m360(171.9179 + 335.9106046 * k - 0.0100383 * Tsquared - 1.156E-05 * Tcubed + 5.5E-08 * T4);\n    D = CT.d2R(D);\n    var M = CT.m360(347.3477 + 27.1577721 * k - 0.000813 * Tsquared - 1E-06 * Tcubed);\n    M = CT.d2R(M);\n    var F = CT.m360(316.6109 + 364.5287911 * k - 0.0125053 * Tsquared - 1.48E-05 * Tcubed);\n    F = CT.d2R(F);\n    var nApogeeCoefficients = g_MoonPerigeeApogeeCoefficients2.length;\n    var Sigma = 0;\n    for (var i = 0; i < nApogeeCoefficients; i++) {\n        Sigma += (g_MoonPerigeeApogeeCoefficients2[i].c + T * g_MoonPerigeeApogeeCoefficients2[i].t) * Math.sin(D * g_MoonPerigeeApogeeCoefficients2[i].d + M * g_MoonPerigeeApogeeCoefficients2[i].m + F * g_MoonPerigeeApogeeCoefficients2[i].f);\n    }\n    return MeanJD + Sigma;\n};\n\nCAAMoonPerigeeApogee.perigeeParallax = function (k) {\n    var T = k / 1325.55;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    var D = CT.m360(171.9179 + 335.9106046 * k - 0.0100383 * Tsquared - 1.156E-05 * Tcubed + 5.5E-08 * T4);\n    D = CT.d2R(D);\n    var M = CT.m360(347.3477 + 27.1577721 * k - 0.000813 * Tsquared - 1E-06 * Tcubed);\n    M = CT.d2R(M);\n    var F = CT.m360(316.6109 + 364.5287911 * k - 0.0125053 * Tsquared - 1.48E-05 * Tcubed);\n    F = CT.d2R(F);\n    var nPerigeeCoefficients = g_MoonPerigeeApogeeCoefficients3.length;\n    var Parallax = 3629.215;\n    for (var i = 0; i < nPerigeeCoefficients; i++) {\n        Parallax += (g_MoonPerigeeApogeeCoefficients3[i].c + T * g_MoonPerigeeApogeeCoefficients3[i].t) * Math.cos(D * g_MoonPerigeeApogeeCoefficients3[i].d + M * g_MoonPerigeeApogeeCoefficients3[i].m + F * g_MoonPerigeeApogeeCoefficients3[i].f);\n    }\n    return Parallax / 3600;\n};\n\nCAAMoonPerigeeApogee.apogeeParallax = function (k) {\n    var T = k / 1325.55;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var T4 = Tcubed * T;\n    var D = CT.m360(171.9179 + 335.9106046 * k - 0.0100383 * Tsquared - 1.156E-05 * Tcubed + 5.5E-08 * T4);\n    D = CT.d2R(D);\n    var M = CT.m360(347.3477 + 27.1577721 * k - 0.000813 * Tsquared - 1E-06 * Tcubed);\n    M = CT.d2R(M);\n    var F = CT.m360(316.6109 + 364.5287911 * k - 0.0125053 * Tsquared - 1.48E-05 * Tcubed);\n    F = CT.d2R(F);\n    var nApogeeCoefficients = g_MoonPerigeeApogeeCoefficients4.length;\n    var Parallax = 3245.251;\n    for (var i = 0; i < nApogeeCoefficients; i++) {\n        Parallax += (g_MoonPerigeeApogeeCoefficients4[i].c + T * g_MoonPerigeeApogeeCoefficients4[i].t) * Math.cos(D * g_MoonPerigeeApogeeCoefficients4[i].d + M * g_MoonPerigeeApogeeCoefficients4[i].m + F * g_MoonPerigeeApogeeCoefficients4[i].f);\n    }\n    return Parallax / 3600;\n};\n\nvar CAAMoonPerigeeApogee$ = {};\n\nregisterType(\"CAAMoonPerigeeApogee\", [CAAMoonPerigeeApogee, CAAMoonPerigeeApogee$, null]);\n","// Originally `AAMOONPHASES.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the dates for the phases of the Moon\"\n// Last update of original: PJN / 22-02-2004\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// CAAMoonPhases\n\nexport function CAAMoonPhases() { }\n\nCAAMoonPhases.k = function (Year) {\n    return 12.3685 * (Year - 2000);\n};\n\nCAAMoonPhases.meanPhase = function (k) {\n    var T = k / 1236.85;\n    var T2 = T * T;\n    var T3 = T2 * T;\n    var T4 = T3 * T;\n    return 2451550.09766 + 29.530588861 * k + 0.00015437 * T2 - 1.5E-07 * T3 + 7.3E-10 * T4;\n};\n\nCAAMoonPhases.truePhase = function (k) {\n    var JD = CAAMoonPhases.meanPhase(k);\n    var T = k / 1236.85;\n    var T2 = T * T;\n    var T3 = T2 * T;\n    var T4 = T3 * T;\n    var E = 1 - 0.002516 * T - 7.4E-06 * T2;\n    var E2 = E * E;\n    var M = CT.m360(2.5534 + 29.1053567 * k - 1.4E-06 * T2 - 1.1E-07 * T3);\n    M = CT.d2R(M);\n    var Mdash = CT.m360(201.5643 + 385.81693528 * k + 0.0107582 * T2 + 1.238E-05 * T3 - 5.8E-08 * T4);\n    Mdash = CT.d2R(Mdash);\n    var F = CT.m360(160.7108 + 390.67050284 * k - 0.0016118 * T2 - 2.27E-06 * T3 + 1E-08 * T4);\n    F = CT.d2R(F);\n    var omega = CT.m360(124.7746 - 1.56375588 * k + 0.0020672 * T2 + 2.15E-06 * T3);\n    omega = CT.d2R(omega);\n    var A1 = CT.m360(299.77 + 0.107408 * k - 0.009173 * T2);\n    A1 = CT.d2R(A1);\n    var A2 = CT.m360(251.88 + 0.016321 * k);\n    A2 = CT.d2R(A2);\n    var A3 = CT.m360(251.83 + 26.651886 * k);\n    A3 = CT.d2R(A3);\n    var A4 = CT.m360(349.42 + 36.412478 * k);\n    A4 = CT.d2R(A4);\n    var A5 = CT.m360(84.66 + 18.206239 * k);\n    A5 = CT.d2R(A5);\n    var A6 = CT.m360(141.74 + 53.303771 * k);\n    A6 = CT.d2R(A6);\n    var A7 = CT.m360(207.14 + 2.453732 * k);\n    A7 = CT.d2R(A7);\n    var A8 = CT.m360(154.84 + 7.30686 * k);\n    A8 = CT.d2R(A8);\n    var A9 = CT.m360(34.52 + 27.261239 * k);\n    A9 = CT.d2R(A9);\n    var A10 = CT.m360(207.19 + 0.121824 * k);\n    A10 = CT.d2R(A10);\n    var A11 = CT.m360(291.34 + 1.844379 * k);\n    A11 = CT.d2R(A11);\n    var A12 = CT.m360(161.72 + 24.198154 * k);\n    A12 = CT.d2R(A12);\n    var A13 = CT.m360(239.56 + 25.513099 * k);\n    A13 = CT.d2R(A13);\n    var A14 = CT.m360(331.55 + 3.592518 * k);\n    A14 = CT.d2R(A14);\n    var kint = Math.floor(k);\n    var kfrac = k - kint;\n    if (kfrac < 0) {\n        kfrac = 1 + kfrac;\n    }\n    if (!kfrac) {\n        var DeltaJD = -0.4072 * Math.sin(Mdash) + 0.17241 * E * Math.sin(M) + 0.01608 * Math.sin(2 * Mdash) + 0.01039 * Math.sin(2 * F) + 0.00739 * E * Math.sin(Mdash - M) + -0.00514 * E * Math.sin(Mdash + M) + 0.00208 * E2 * Math.sin(2 * M) + -0.00111 * Math.sin(Mdash - 2 * F) + -0.00057 * Math.sin(Mdash + 2 * F) + 0.00056 * E * Math.sin(2 * Mdash + M) + -0.00042 * Math.sin(3 * Mdash) + 0.00042 * E * Math.sin(M + 2 * F) + 0.00038 * E * Math.sin(M - 2 * F) + -0.00024 * E * Math.sin(2 * Mdash - M) + -0.00017 * Math.sin(omega) + -7E-05 * Math.sin(Mdash + 2 * M) + 4E-05 * Math.sin(2 * Mdash - 2 * F) + 4E-05 * Math.sin(3 * M) + 3E-05 * Math.sin(Mdash + M - 2 * F) + 3E-05 * Math.sin(2 * Mdash + 2 * F) + -3E-05 * Math.sin(Mdash + M + 2 * F) + 3E-05 * Math.sin(Mdash - M + 2 * F) + -2E-05 * Math.sin(Mdash - M - 2 * F) + -2E-05 * Math.sin(3 * Mdash + M) + 2E-05 * Math.sin(4 * Mdash);\n        JD += DeltaJD;\n    }\n    else if ((kfrac === 0.25) || (kfrac === 0.75)) {\n        var DeltaJD = -0.62801 * Math.sin(Mdash) + 0.17172 * E * Math.sin(M) + -0.01183 * E * Math.sin(Mdash + M) + 0.00862 * Math.sin(2 * Mdash) + 0.00804 * Math.sin(2 * F) + 0.00454 * E * Math.sin(Mdash - M) + 0.00204 * E2 * Math.sin(2 * M) + -0.0018 * Math.sin(Mdash - 2 * F) + -0.0007 * Math.sin(Mdash + 2 * F) + -0.0004 * Math.sin(3 * Mdash) + -0.00034 * E * Math.sin(2 * Mdash - M) + 0.00032 * E * Math.sin(M + 2 * F) + 0.00032 * E * Math.sin(M - 2 * F) + -0.00028 * E2 * Math.sin(Mdash + 2 * M) + 0.00027 * E * Math.sin(2 * Mdash + M) + -0.00017 * Math.sin(omega) + -5E-05 * Math.sin(Mdash - M - 2 * F) + 4E-05 * Math.sin(2 * Mdash + 2 * F) + -4E-05 * Math.sin(Mdash + M + 2 * F) + 4E-05 * Math.sin(Mdash - 2 * M) + 3E-05 * Math.sin(Mdash + M - 2 * F) + 3E-05 * Math.sin(3 * M) + 2E-05 * Math.sin(2 * Mdash - 2 * F) + 2E-05 * Math.sin(Mdash - M + 2 * F) + -2E-05 * Math.sin(3 * Mdash + M);\n        JD += DeltaJD;\n        var W = 0.00306 - 0.00038 * E * Math.cos(M) + 0.00026 * Math.cos(Mdash) - 2E-05 * Math.cos(Mdash - M) + 2E-05 * Math.cos(Mdash + M) + 2E-05 * Math.cos(2 * F);\n        if (kfrac === 0.25) {\n            JD += W;\n        }\n        else {\n            JD -= W;\n        }\n    }\n    else if (kfrac === 0.5) {\n        var DeltaJD = -0.40614 * Math.sin(Mdash) + 0.17302 * E * Math.sin(M) + 0.01614 * Math.sin(2 * Mdash) + 0.01043 * Math.sin(2 * F) + 0.00734 * E * Math.sin(Mdash - M) + -0.00514 * E * Math.sin(Mdash + M) + 0.00209 * E2 * Math.sin(2 * M) + -0.00111 * Math.sin(Mdash - 2 * F) + -0.00057 * Math.sin(Mdash + 2 * F) + 0.00056 * E * Math.sin(2 * Mdash + M) + -0.00042 * Math.sin(3 * Mdash) + 0.00042 * E * Math.sin(M + 2 * F) + 0.00038 * E * Math.sin(M - 2 * F) + -0.00024 * E * Math.sin(2 * Mdash - M) + -0.00017 * Math.sin(omega) + -7E-05 * Math.sin(Mdash + 2 * M) + 4E-05 * Math.sin(2 * Mdash - 2 * F) + 4E-05 * Math.sin(3 * M) + 3E-05 * Math.sin(Mdash + M - 2 * F) + 3E-05 * Math.sin(2 * Mdash + 2 * F) + -3E-05 * Math.sin(Mdash + M + 2 * F) + 3E-05 * Math.sin(Mdash - M + 2 * F) + -2E-05 * Math.sin(Mdash - M - 2 * F) + -2E-05 * Math.sin(3 * Mdash + M) + 2E-05 * Math.sin(4 * Mdash);\n        JD += DeltaJD;\n    }\n    else {\n        console.assert(false);\n    }\n    var DeltaJD2 = 0.000325 * Math.sin(A1) + 0.000165 * Math.sin(A2) + 0.000164 * Math.sin(A3) + 0.000126 * Math.sin(A4) + 0.00011 * Math.sin(A5) + 6.2E-05 * Math.sin(A6) + 6E-05 * Math.sin(A7) + 5.6E-05 * Math.sin(A8) + 4.7E-05 * Math.sin(A9) + 4.2E-05 * Math.sin(A10) + 4E-05 * Math.sin(A11) + 3.7E-05 * Math.sin(A12) + 3.5E-05 * Math.sin(A13) + 2.3E-05 * Math.sin(A14);\n    JD += DeltaJD2;\n    return JD;\n};\n\nvar CAAMoonPhases$ = {};\n\nregisterType(\"CAAMoonPhases\", [CAAMoonPhases, CAAMoonPhases$, null]);\n","// Originally `AANEPTUNE.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the heliocentric position of Neptune\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { VSC } from \"./earth.js\";\n\n\n// Coefficients\n\nconst g_L0NC = [new VSC(531188633, 0, 0), new VSC(1798476, 2.9010127, 38.1330356), new VSC(1019728, 0.4858092, 1.4844727), new VSC(124532, 4.830081, 36.648563), new VSC(42064, 5.41055, 2.96895), new VSC(37715, 6.09222, 35.16409), new VSC(33785, 1.24489, 76.26607), new VSC(16483, 8E-05, 491.55793), new VSC(9199, 4.9375, 39.6175), new VSC(8994, 0.2746, 175.1661), new VSC(4216, 1.9871, 73.2971), new VSC(3365, 1.0359, 33.6796), new VSC(2285, 4.2061, 4.4534), new VSC(1434, 2.7834, 74.7816), new VSC(900, 2.076, 109.946), new VSC(745, 3.19, 71.813), new VSC(506, 5.748, 114.399), new VSC(400, 0.35, 1021.249), new VSC(345, 3.462, 41.102), new VSC(340, 3.304, 77.751), new VSC(323, 2.248, 32.195), new VSC(306, 0.497, 0.521), new VSC(287, 4.505, 0.048), new VSC(282, 2.246, 146.594), new VSC(267, 4.889, 0.963), new VSC(252, 5.782, 388.465), new VSC(245, 1.247, 9.561), new VSC(233, 2.505, 137.033), new VSC(227, 1.797, 453.425), new VSC(170, 3.324, 108.461), new VSC(151, 2.192, 33.94), new VSC(150, 2.997, 5.938), new VSC(148, 0.859, 111.43), new VSC(119, 3.677, 2.448), new VSC(109, 2.416, 183.243), new VSC(103, 0.041, 0.261), new VSC(103, 4.404, 70.328), new VSC(102, 5.705, 0.112)];\nconst g_L1NC = [new VSC(3837687717, 0, 0), new VSC(16604, 4.86319, 1.48447), new VSC(15807, 2.27923, 38.13304), new VSC(3335, 3.682, 76.2661), new VSC(1306, 3.6732, 2.9689), new VSC(605, 1.505, 35.164), new VSC(179, 3.453, 39.618), new VSC(107, 2.451, 4.453), new VSC(106, 2.755, 33.68), new VSC(73, 5.49, 36.65), new VSC(57, 1.86, 114.4), new VSC(57, 5.22, 0.52), new VSC(35, 4.52, 74.78), new VSC(32, 5.9, 77.75), new VSC(30, 3.67, 388.47), new VSC(29, 5.17, 9.56), new VSC(29, 5.17, 2.45), new VSC(26, 5.25, 168.05)];\nconst g_L2NC = [new VSC(53893, 0, 0), new VSC(296, 1.855, 1.484), new VSC(281, 1.191, 38.133), new VSC(270, 5.721, 76.266), new VSC(23, 1.21, 2.97), new VSC(9, 4.43, 35.16), new VSC(7, 0.54, 2.45)];\nconst g_L3NC = [new VSC(31, 0, 0), new VSC(15, 1.35, 76.27), new VSC(12, 6.04, 1.48), new VSC(12, 6.11, 38.13)];\nconst g_L4NC = [new VSC(114, 3.142, 0)];\nconst g_B0NC = [new VSC(3088623, 1.4410437, 38.1330356), new VSC(27789, 5.91272, 76.26607), new VSC(27624, 0, 0), new VSC(15448, 3.50877, 39.61751), new VSC(15355, 2.52124, 36.64856), new VSC(2000, 1.51, 74.7816), new VSC(1968, 4.3778, 1.4845), new VSC(1015, 3.2156, 35.1641), new VSC(606, 2.802, 73.297), new VSC(595, 2.129, 41.102), new VSC(589, 3.187, 2.969), new VSC(402, 4.169, 114.399), new VSC(280, 1.682, 77.751), new VSC(262, 3.767, 213.299), new VSC(254, 3.271, 453.425), new VSC(206, 4.257, 529.691), new VSC(140, 3.53, 137.033)];\nconst g_B1NC = [new VSC(227279, 3.807931, 38.133036), new VSC(1803, 1.9758, 76.2661), new VSC(1433, 3.1416, 0), new VSC(1386, 4.8256, 36.6486), new VSC(1073, 6.0805, 39.6175), new VSC(148, 3.858, 74.782), new VSC(136, 0.478, 1.484), new VSC(70, 6.19, 35.16), new VSC(52, 5.05, 73.3), new VSC(43, 0.31, 114.4), new VSC(37, 4.89, 41.1), new VSC(37, 5.76, 2.97), new VSC(26, 5.22, 213.3)];\nconst g_B2NC = [new VSC(9691, 5.5712, 38.133), new VSC(79, 3.63, 76.27), new VSC(72, 0.45, 36.65), new VSC(59, 3.14, 0), new VSC(30, 1.61, 39.62), new VSC(6, 5.61, 74.78)];\nconst g_B3NC = [new VSC(273, 1.017, 38.133), new VSC(2, 0, 0), new VSC(2, 2.37, 36.65), new VSC(2, 5.33, 76.27)];\nconst g_B4NC = [new VSC(6, 2.67, 38.13)];\nconst g_R0NC = [new VSC(3007013206, 0, 0), new VSC(27062259, 1.32999459, 38.13303564), new VSC(1691764, 3.2518614, 36.6485629), new VSC(807831, 5.185928, 1.484473), new VSC(537761, 4.521139, 35.16409), new VSC(495726, 1.571057, 491.557929), new VSC(274572, 1.845523, 175.16606), new VSC(135134, 3.372206, 39.617508), new VSC(121802, 5.797544, 76.266071), new VSC(100895, 0.377027, 73.297126), new VSC(69792, 3.79617, 2.96895), new VSC(46688, 5.74938, 33.67962), new VSC(24594, 0.50802, 109.94569), new VSC(16939, 1.59422, 71.81265), new VSC(14230, 1.07786, 74.7816), new VSC(12012, 1.92062, 1021.24889), new VSC(8395, 0.6782, 146.5943), new VSC(7572, 1.0715, 388.4652), new VSC(5721, 2.5906, 4.4534), new VSC(4840, 1.9069, 41.102), new VSC(4483, 2.9057, 529.691), new VSC(4421, 1.7499, 108.4612), new VSC(4354, 0.6799, 32.1951), new VSC(4270, 3.4134, 453.4249), new VSC(3381, 0.8481, 183.2428), new VSC(2881, 1.986, 137.033), new VSC(2879, 3.6742, 350.3321), new VSC(2636, 3.0976, 213.2991), new VSC(2530, 5.7984, 490.0735), new VSC(2523, 0.4863, 493.0424), new VSC(2306, 2.8096, 70.3282), new VSC(2087, 0.6186, 33.9402)];\nconst g_R1NC = [new VSC(236339, 0.70498, 38.133036), new VSC(13220, 3.32015, 1.48447), new VSC(8622, 6.2163, 35.1641), new VSC(2702, 1.8814, 39.6175), new VSC(2155, 2.0943, 2.9689), new VSC(2153, 5.1687, 76.2661), new VSC(1603, 0, 0), new VSC(1464, 1.1842, 33.6796), new VSC(1136, 3.9189, 36.6486), new VSC(898, 5.241, 388.465), new VSC(790, 0.533, 168.053), new VSC(760, 0.021, 182.28), new VSC(607, 1.077, 1021.249), new VSC(572, 3.401, 484.444), new VSC(561, 2.887, 498.671)];\nconst g_R2NC = [new VSC(4247, 5.8991, 38.133), new VSC(218, 0.346, 1.484), new VSC(163, 2.239, 168.053), new VSC(156, 4.594, 182.28), new VSC(127, 2.848, 35.164)];\nconst g_R3NC = [new VSC(166, 4.552, 38.133)];\n\n\n// CAANeptune\n\nexport function CAANeptune() { }\n\nCAANeptune.eclipticLongitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nL0Coefficients = g_L0NC.length;\n    var L0 = 0;\n    var i;\n    for (i = 0; i < nL0Coefficients; i++) {\n        L0 += g_L0NC[i].a * Math.cos(g_L0NC[i].b + g_L0NC[i].c * rho);\n    }\n    var nL1Coefficients = g_L1NC.length;\n    var L1 = 0;\n    for (i = 0; i < nL1Coefficients; i++) {\n        L1 += g_L1NC[i].a * Math.cos(g_L1NC[i].b + g_L1NC[i].c * rho);\n    }\n    var nL2Coefficients = g_L2NC.length;\n    var L2 = 0;\n    for (i = 0; i < nL2Coefficients; i++) {\n        L2 += g_L2NC[i].a * Math.cos(g_L2NC[i].b + g_L2NC[i].c * rho);\n    }\n    var nL3Coefficients = g_L3NC.length;\n    var L3 = 0;\n    for (i = 0; i < nL3Coefficients; i++) {\n        L3 += g_L3NC[i].a * Math.cos(g_L3NC[i].b + g_L3NC[i].c * rho);\n    }\n    var nL4Coefficients = g_L4NC.length;\n    var L4 = 0;\n    for (i = 0; i < nL4Coefficients; i++) {\n        L4 += g_L4NC[i].a * Math.cos(g_L4NC[i].b + g_L4NC[i].c * rho);\n    }\n    var vvalue = (L0 + L1 * rho + L2 * rhosquared + L3 * rhocubed + L4 * rho4) / 100000000;\n    vvalue = CT.m360(CT.r2D(vvalue));\n    return vvalue;\n};\n\nCAANeptune.eclipticLatitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nB0Coefficients = g_B0NC.length;\n    var B0 = 0;\n    var i;\n    for (i = 0; i < nB0Coefficients; i++) {\n        B0 += g_B0NC[i].a * Math.cos(g_B0NC[i].b + g_B0NC[i].c * rho);\n    }\n    var nB1Coefficients = g_B1NC.length;\n    var B1 = 0;\n    for (i = 0; i < nB1Coefficients; i++) {\n        B1 += g_B1NC[i].a * Math.cos(g_B1NC[i].b + g_B1NC[i].c * rho);\n    }\n    var nB2Coefficients = g_B2NC.length;\n    var B2 = 0;\n    for (i = 0; i < nB2Coefficients; i++) {\n        B2 += g_B2NC[i].a * Math.cos(g_B2NC[i].b + g_B2NC[i].c * rho);\n    }\n    var nB3Coefficients = g_B3NC.length;\n    var B3 = 0;\n    for (i = 0; i < nB3Coefficients; i++) {\n        B3 += g_B3NC[i].a * Math.cos(g_B3NC[i].b + g_B3NC[i].c * rho);\n    }\n    var nB4Coefficients = g_B4NC.length;\n    var B4 = 0;\n    for (i = 0; i < nB4Coefficients; i++) {\n        B4 += g_B4NC[i].a * Math.cos(g_B4NC[i].b + g_B4NC[i].c * rho);\n    }\n    var vvalue = (B0 + B1 * rho + B2 * rhosquared + B3 * rhocubed + B4 * rho4) / 100000000;\n    vvalue = CT.r2D(vvalue);\n    return vvalue;\n};\n\nCAANeptune.radiusVector = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var nR0Coefficients = g_R0NC.length;\n    var R0 = 0;\n    var i;\n    for (i = 0; i < nR0Coefficients; i++) {\n        R0 += g_R0NC[i].a * Math.cos(g_R0NC[i].b + g_R0NC[i].c * rho);\n    }\n    var nR1Coefficients = g_R1NC.length;\n    var R1 = 0;\n    for (i = 0; i < nR1Coefficients; i++) {\n        R1 += g_R1NC[i].a * Math.cos(g_R1NC[i].b + g_R1NC[i].c * rho);\n    }\n    var nR2Coefficients = g_R2NC.length;\n    var R2 = 0;\n    for (i = 0; i < nR2Coefficients; i++) {\n        R2 += g_R2NC[i].a * Math.cos(g_R2NC[i].b + g_R2NC[i].c * rho);\n    }\n    var nR3Coefficients = g_R3NC.length;\n    var R3 = 0;\n    for (i = 0; i < nR3Coefficients; i++) {\n        R3 += g_R3NC[i].a * Math.cos(g_R3NC[i].b + g_R3NC[i].c * rho);\n    }\n    return (R0 + R1 * rho + R2 * rhosquared + R3 * rhocubed) / 100000000;\n};\n\nvar CAANeptune$ = {};\n\nregisterType(\"CAANeptune\", [CAANeptune, CAANeptune$, null]);\n","// Originally `AANUTATION.CPP`\n// \"Purpose: Implementation for the algorithms for Nutation\"\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { C3D, CT } from \"./coordinate_transformation.js\";\nimport { CAAEarth } from \"./earth.js\";\n\n\n// NUC - was NutationCoefficient\n\nexport function NUC(D, M, Mprime, F, omega, sincoeff1, sincoeff2, coscoeff1, coscoeff2) {\n    this.d = 0;\n    this.m = 0;\n    this.mprime = 0;\n    this.f = 0;\n    this.omega = 0;\n    this.sincoeff1 = 0;\n    this.sincoeff2 = 0;\n    this.coscoeff1 = 0;\n    this.coscoeff2 = 0;\n    this.d = D;\n    this.m = M;\n    this.mprime = Mprime;\n    this.f = F;\n    this.omega = omega;\n    this.sincoeff1 = sincoeff1;\n    this.sincoeff2 = sincoeff2;\n    this.coscoeff1 = coscoeff1;\n    this.coscoeff2 = coscoeff2;\n}\n\nvar NUC$ = {};\n\nregisterType(\"NUC\", [NUC, NUC$, null]);\n\n\n// Coefficients\n\nconst g_NuC = [new NUC(0, 0, 0, 0, 1, -171996, -174.2, 92025, 8.9), new NUC(-2, 0, 0, 2, 2, -13187, -1.6, 5736, -3.1), new NUC(0, 0, 0, 2, 2, -2274, -0.2, 977, -0.5), new NUC(0, 0, 0, 0, 2, 2062, 0.2, -895, 0.5), new NUC(0, 1, 0, 0, 0, 1426, -3.4, 54, -0.1), new NUC(0, 0, 1, 0, 0, 712, 0.1, -7, 0), new NUC(-2, 1, 0, 2, 2, -517, 1.2, 224, -0.6), new NUC(0, 0, 0, 2, 1, -386, -0.4, 200, 0), new NUC(0, 0, 1, 2, 2, -301, 0, 129, -0.1), new NUC(-2, -1, 0, 2, 2, 217, -0.5, -95, 0.3), new NUC(-2, 0, 1, 0, 0, -158, 0, 0, 0), new NUC(-2, 0, 0, 2, 1, 129, 0.1, -70, 0), new NUC(0, 0, -1, 2, 2, 123, 0, -53, 0), new NUC(2, 0, 0, 0, 0, 63, 0, 0, 0), new NUC(0, 0, 1, 0, 1, 63, 0.1, -33, 0), new NUC(2, 0, -1, 2, 2, -59, 0, 26, 0), new NUC(0, 0, -1, 0, 1, -58, -0.1, 32, 0), new NUC(0, 0, 1, 2, 1, -51, 0, 27, 0), new NUC(-2, 0, 2, 0, 0, 48, 0, 0, 0), new NUC(0, 0, -2, 2, 1, 46, 0, -24, 0), new NUC(2, 0, 0, 2, 2, -38, 0, 16, 0), new NUC(0, 0, 2, 2, 2, -31, 0, 13, 0), new NUC(0, 0, 2, 0, 0, 29, 0, 0, 0), new NUC(-2, 0, 1, 2, 2, 29, 0, -12, 0), new NUC(0, 0, 0, 2, 0, 26, 0, 0, 0), new NUC(-2, 0, 0, 2, 0, -22, 0, 0, 0), new NUC(0, 0, -1, 2, 1, 21, 0, -10, 0), new NUC(0, 2, 0, 0, 0, 17, -0.1, 0, 0), new NUC(2, 0, -1, 0, 1, 16, 0, -8, 0), new NUC(-2, 2, 0, 2, 2, -16, 0.1, 7, 0), new NUC(0, 1, 0, 0, 1, -15, 0, 9, 0), new NUC(-2, 0, 1, 0, 1, -13, 0, 7, 0), new NUC(0, -1, 0, 0, 1, -12, 0, 6, 0), new NUC(0, 0, 2, -2, 0, 11, 0, 0, 0), new NUC(2, 0, -1, 2, 1, -10, 0, 5, 0), new NUC(2, 0, 1, 2, 2, -8, 0, 3, 0), new NUC(0, 1, 0, 2, 2, 7, 0, -3, 0), new NUC(-2, 1, 1, 0, 0, -7, 0, 0, 0), new NUC(0, -1, 0, 2, 2, -7, 0, 3, 0), new NUC(2, 0, 0, 2, 1, -7, 0, 3, 0), new NUC(2, 0, 1, 0, 0, 6, 0, 0, 0), new NUC(-2, 0, 2, 2, 2, 6, 0, -3, 0), new NUC(-2, 0, 1, 2, 1, 6, 0, -3, 0), new NUC(2, 0, -2, 0, 1, -6, 0, 3, 0), new NUC(2, 0, 0, 0, 1, -6, 0, 3, 0), new NUC(0, -1, 1, 0, 0, 5, 0, 0, 0), new NUC(-2, -1, 0, 2, 1, -5, 0, 3, 0), new NUC(-2, 0, 0, 0, 1, -5, 0, 3, 0), new NUC(0, 0, 2, 2, 1, -5, 0, 3, 0), new NUC(-2, 0, 2, 0, 1, 4, 0, 0, 0), new NUC(-2, 1, 0, 2, 1, 4, 0, 0, 0), new NUC(0, 0, 1, -2, 0, 4, 0, 0, 0), new NUC(-1, 0, 1, 0, 0, -4, 0, 0, 0), new NUC(-2, 1, 0, 0, 0, -4, 0, 0, 0), new NUC(1, 0, 0, 0, 0, -4, 0, 0, 0), new NUC(0, 0, 1, 2, 0, 3, 0, 0, 0), new NUC(0, 0, -2, 2, 2, -3, 0, 0, 0), new NUC(-1, -1, 1, 0, 0, -3, 0, 0, 0), new NUC(0, 1, 1, 0, 0, -3, 0, 0, 0), new NUC(0, -1, 1, 2, 2, -3, 0, 0, 0), new NUC(2, -1, -1, 2, 2, -3, 0, 0, 0), new NUC(0, 0, 3, 2, 2, -3, 0, 0, 0), new NUC(2, -1, 0, 2, 2, -3, 0, 0, 0)];\n\n\n// CAANutation\n\nexport function CAANutation() { }\n\nCAANutation.nutationInLongitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var D = 297.85036 + 445267.11148 * T - 0.0019142 * Tsquared + Tcubed / 189474;\n    D = CT.m360(D);\n    var M = 357.52772 + 35999.05034 * T - 0.0001603 * Tsquared - Tcubed / 300000;\n    M = CT.m360(M);\n    var Mprime = 134.96298 + 477198.867398 * T + 0.0086972 * Tsquared + Tcubed / 56250;\n    Mprime = CT.m360(Mprime);\n    var F = 93.27191 + 483202.017538 * T - 0.0036825 * Tsquared + Tcubed / 327270;\n    F = CT.m360(F);\n    var omega = 125.04452 - 1934.136261 * T + 0.0020708 * Tsquared + Tcubed / 450000;\n    omega = CT.m360(omega);\n    var nCoefficients = g_NuC.length;\n    var vvalue = 0;\n    for (var i = 0; i < nCoefficients; i++) {\n        var argument = g_NuC[i].d * D + g_NuC[i].m * M + g_NuC[i].mprime * Mprime + g_NuC[i].f * F + g_NuC[i].omega * omega;\n        var radargument = CT.d2R(argument);\n        vvalue += (g_NuC[i].sincoeff1 + g_NuC[i].sincoeff2 * T) * Math.sin(radargument) * 0.0001;\n    }\n    return vvalue;\n};\n\nCAANutation.nutationInObliquity = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var Tsquared = T * T;\n    var Tcubed = Tsquared * T;\n    var D = 297.85036 + 445267.11148 * T - 0.0019142 * Tsquared + Tcubed / 189474;\n    D = CT.m360(D);\n    var M = 357.52772 + 35999.05034 * T - 0.0001603 * Tsquared - Tcubed / 300000;\n    M = CT.m360(M);\n    var Mprime = 134.96298 + 477198.867398 * T + 0.0086972 * Tsquared + Tcubed / 56250;\n    Mprime = CT.m360(Mprime);\n    var F = 93.27191 + 483202.017538 * T - 0.0036825 * Tsquared + Tcubed / 327270;\n    F = CT.m360(F);\n    var omega = 125.04452 - 1934.136261 * T + 0.0020708 * Tsquared + Tcubed / 450000;\n    omega = CT.m360(omega);\n    var nCoefficients = g_NuC.length;\n    var vvalue = 0;\n    for (var i = 0; i < nCoefficients; i++) {\n        var argument = g_NuC[i].d * D + g_NuC[i].m * M + g_NuC[i].mprime * Mprime + g_NuC[i].f * F + g_NuC[i].omega * omega;\n        var radargument = CT.d2R(argument);\n        vvalue += (g_NuC[i].coscoeff1 + g_NuC[i].coscoeff2 * T) * Math.cos(radargument) * 0.0001;\n    }\n    return vvalue;\n};\n\nCAANutation.nutationInRightAscension = function (Alpha, Delta, Obliquity, NutationInLongitude, NutationInObliquity) {\n    Alpha = CT.h2R(Alpha);\n    Delta = CT.d2R(Delta);\n    Obliquity = CT.d2R(Obliquity);\n    return (Math.cos(Obliquity) + Math.sin(Obliquity) * Math.sin(Alpha) * Math.tan(Delta)) * NutationInLongitude - Math.cos(Alpha) * Math.tan(Delta) * NutationInObliquity;\n};\n\nCAANutation.nutationInDeclination = function (Alpha, Delta, Obliquity, NutationInLongitude, NutationInObliquity) {\n    Alpha = CT.h2R(Alpha);\n    Delta = CT.d2R(Delta);\n    Obliquity = CT.d2R(Obliquity);\n    return Math.sin(Obliquity) * Math.cos(Alpha) * NutationInLongitude + Math.sin(Alpha) * NutationInObliquity;\n};\n\nCAANutation.meanObliquityOfEcliptic = function (JD) {\n    var U = (JD - 2451545) / 3652500;\n    var Usquared = U * U;\n    var Ucubed = Usquared * U;\n    var U4 = Ucubed * U;\n    var U5 = U4 * U;\n    var U6 = U5 * U;\n    var U7 = U6 * U;\n    var U8 = U7 * U;\n    var U9 = U8 * U;\n    var U10 = U9 * U;\n    return CT.dmS2D(23, 26, 21.448) - CT.dmS2D(0, 0, 4680.93) * U - CT.dmS2D(0, 0, 1.55) * Usquared + CT.dmS2D(0, 0, 1999.25) * Ucubed - CT.dmS2D(0, 0, 51.38) * U4 - CT.dmS2D(0, 0, 249.67) * U5 - CT.dmS2D(0, 0, 39.05) * U6 + CT.dmS2D(0, 0, 7.12) * U7 + CT.dmS2D(0, 0, 27.87) * U8 + CT.dmS2D(0, 0, 5.79) * U9 + CT.dmS2D(0, 0, 2.45) * U10;\n};\n\nCAANutation.trueObliquityOfEcliptic = function (JD) {\n    return CAANutation.meanObliquityOfEcliptic(JD) + CT.dmS2D(0, 0, CAANutation.nutationInObliquity(JD));\n};\n\nvar CAANutation$ = {};\n\nregisterType(\"CAANutation\", [CAANutation, CAANutation$, null]);\n","// Originally `AAPARALLAX.CPP`\n// \"Purpose: Implementation for the algorithms which convert a geocentric set of coordinates to their topocentric equivalent\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { COR, CT } from \"./coordinate_transformation.js\";\nimport { CAAGlobe } from \"./globe.js\";\nimport { CAASidereal } from \"./sidereal.js\";\n\n\n// CAATopocentricEclipticDetails\n\nexport function CAATopocentricEclipticDetails() {\n    this.lambda = 0;\n    this.beta = 0;\n    this.semidiameter = 0;\n    this.lambda = 0;\n    this.beta = 0;\n    this.semidiameter = 0;\n}\n\nvar CAATopocentricEclipticDetails$ = {};\n\nregisterType(\"CAATopocentricEclipticDetails\", [CAATopocentricEclipticDetails, CAATopocentricEclipticDetails$, null]);\n\n\n// Constants\n\nconst g_AAParallax_C1 = Math.sin(CT.d2R(CT.dmS2D(0, 0, 8.794)));\n\n\n// CAAParallax\n\nexport function CAAParallax() { }\n\nCAAParallax.equatorial2TopocentricDelta = function (Alpha, Delta, Distance, Longitude, Latitude, Height, JD) {\n    var RhoSinThetaPrime = CAAGlobe.rhoSinThetaPrime(Latitude, Height);\n    var RhoCosThetaPrime = CAAGlobe.rhoCosThetaPrime(Latitude, Height);\n    var theta = CAASidereal.apparentGreenwichSiderealTime(JD);\n    Delta = CT.d2R(Delta);\n    var cosDelta = Math.cos(Delta);\n    var pi = Math.asin(g_AAParallax_C1 / Distance);\n    var H = CT.h2R(theta - Longitude / 15 - Alpha);\n    var cosH = Math.cos(H);\n    var sinH = Math.sin(H);\n    var DeltaTopocentric = new COR();\n    DeltaTopocentric.x = CT.r2H(-pi * RhoCosThetaPrime * sinH / cosDelta);\n    DeltaTopocentric.y = CT.r2D(-pi * (RhoSinThetaPrime * cosDelta - RhoCosThetaPrime * cosH * Math.sin(Delta)));\n    return DeltaTopocentric;\n};\n\nCAAParallax.equatorial2Topocentric = function (Alpha, Delta, Distance, Longitude, Latitude, Height, JD) {\n    var RhoSinThetaPrime = CAAGlobe.rhoSinThetaPrime(Latitude, Height);\n    var RhoCosThetaPrime = CAAGlobe.rhoCosThetaPrime(Latitude, Height);\n    var theta = CAASidereal.apparentGreenwichSiderealTime(JD);\n    Delta = CT.d2R(Delta);\n    var cosDelta = Math.cos(Delta);\n    var pi = Math.asin(g_AAParallax_C1 / Distance);\n    var sinpi = Math.sin(pi);\n    var H = CT.h2R(theta - Longitude / 15 - Alpha);\n    var cosH = Math.cos(H);\n    var sinH = Math.sin(H);\n    var DeltaAlpha = Math.atan2(-RhoCosThetaPrime * sinpi * sinH, cosDelta - RhoCosThetaPrime * sinpi * cosH);\n    var Topocentric = new COR();\n    Topocentric.x = CT.m24(Alpha + CT.r2H(DeltaAlpha));\n    Topocentric.y = CT.r2D(Math.atan2((Math.sin(Delta) - RhoSinThetaPrime * sinpi) * Math.cos(DeltaAlpha), cosDelta - RhoCosThetaPrime * sinpi * cosH));\n    return Topocentric;\n};\n\nCAAParallax.ecliptic2Topocentric = function (Lambda, Beta, Semidiameter, Distance, Epsilon, Longitude, Latitude, Height, JD) {\n    var S = CAAGlobe.rhoSinThetaPrime(Latitude, Height);\n    var C = CAAGlobe.rhoCosThetaPrime(Latitude, Height);\n    Lambda = CT.d2R(Lambda);\n    Beta = CT.d2R(Beta);\n    Epsilon = CT.d2R(Epsilon);\n    Longitude = CT.d2R(Longitude);\n    Latitude = CT.d2R(Latitude);\n    Semidiameter = CT.d2R(Semidiameter);\n    var sine = Math.sin(Epsilon);\n    var cose = Math.cos(Epsilon);\n    var cosBeta = Math.cos(Beta);\n    var sinBeta = Math.sin(Beta);\n    var theta = CAASidereal.apparentGreenwichSiderealTime(JD);\n    theta = CT.h2R(theta);\n    var sintheta = Math.sin(theta);\n    var pi = Math.asin(g_AAParallax_C1 / Distance);\n    var sinpi = Math.sin(pi);\n    var N = Math.cos(Lambda) * cosBeta - C * sinpi * Math.cos(theta);\n    var Topocentric = new CAATopocentricEclipticDetails();\n    Topocentric.lambda = Math.atan2(Math.sin(Lambda) * cosBeta - sinpi * (S * sine + C * cose * sintheta), N);\n    var cosTopocentricLambda = Math.cos(Topocentric.lambda);\n    Topocentric.beta = Math.atan(cosTopocentricLambda * (sinBeta - sinpi * (S * cose - C * sine * sintheta)) / N);\n    Topocentric.semidiameter = Math.asin(cosTopocentricLambda * Math.cos(Topocentric.beta) * Math.sin(Semidiameter) / N);\n    Topocentric.semidiameter = CT.r2D(Topocentric.semidiameter);\n    Topocentric.lambda = CT.m360(CT.r2D(Topocentric.lambda));\n    Topocentric.beta = CT.r2D(Topocentric.beta);\n    return Topocentric;\n};\n\nCAAParallax.parallaxToDistance = function (Parallax) {\n    return g_AAParallax_C1 / Math.sin(CT.d2R(Parallax));\n};\n\nCAAParallax.distanceToParallax = function (Distance) {\n    var pi = Math.asin(g_AAParallax_C1 / Distance);\n    return CT.r2D(pi);\n};\n\nvar CAAParallax$ = {};\n\nregisterType(\"CAAParallax\", [CAAParallax, CAAParallax$, null]);\n","// Originally `AAPHYSICALJUPITER.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the physical parameters of the Jupiter\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { CAANutation } from \"./nutation.js\";\nimport { CAAEarth } from \"./earth.js\";\nimport { CAAJupiter } from \"./jupiter.js\";\n\n\n// CAAPhysicalJupiterDetails\n\nexport function CAAPhysicalJupiterDetails() {\n    this.DE = 0;\n    this.DS = 0;\n    this.geometricw1 = 0;\n    this.geometricw2 = 0;\n    this.apparentw1 = 0;\n    this.apparentw2 = 0;\n    this.p = 0;\n    this.DE = 0;\n    this.DS = 0;\n    this.geometricw1 = 0;\n    this.geometricw2 = 0;\n    this.apparentw1 = 0;\n    this.apparentw2 = 0;\n    this.p = 0;\n}\n\nvar CAAPhysicalJupiterDetails$ = {};\n\nregisterType(\"CAAPhysicalJupiterDetails\", [CAAPhysicalJupiterDetails, CAAPhysicalJupiterDetails$, null]);\n\n\n// CAAPhysicalJupiter\n\nexport function CAAPhysicalJupiter() { }\n\nCAAPhysicalJupiter.calculate = function (JD) {\n    var details = new CAAPhysicalJupiterDetails();\n    var d = JD - 2433282.5;\n    var T1 = d / 36525;\n    var alpha0 = 268 + 0.1061 * T1;\n    var alpha0rad = CT.d2R(alpha0);\n    var delta0 = 64.5 - 0.0164 * T1;\n    var delta0rad = CT.d2R(delta0);\n    var W1 = CT.m360(17.71 + 877.90003539 * d);\n    var W2 = CT.m360(16.838 + 870.27003539 * d);\n    var l0 = CAAEarth.eclipticLongitude(JD);\n    var l0rad = CT.d2R(l0);\n    var b0 = CAAEarth.eclipticLatitude(JD);\n    var b0rad = CT.d2R(b0);\n    var R = CAAEarth.radiusVector(JD);\n    var l = CAAJupiter.eclipticLongitude(JD);\n    var lrad = CT.d2R(l);\n    var b = CAAJupiter.eclipticLatitude(JD);\n    var brad = CT.d2R(b);\n    var r = CAAJupiter.radiusVector(JD);\n    var x = r * Math.cos(brad) * Math.cos(lrad) - R * Math.cos(l0rad);\n    var y = r * Math.cos(brad) * Math.sin(lrad) - R * Math.sin(l0rad);\n    var z = r * Math.sin(brad) - R * Math.sin(b0rad);\n    var DELTA = Math.sqrt(x * x + y * y + z * z);\n    l -= 0.01299 * DELTA / (r * r);\n    lrad = CT.d2R(l);\n    x = r * Math.cos(brad) * Math.cos(lrad) - R * Math.cos(l0rad);\n    y = r * Math.cos(brad) * Math.sin(lrad) - R * Math.sin(l0rad);\n    z = r * Math.sin(brad) - R * Math.sin(b0rad);\n    DELTA = Math.sqrt(x * x + y * y + z * z);\n    var e0 = CAANutation.meanObliquityOfEcliptic(JD);\n    var e0rad = CT.d2R(e0);\n    var alphas = Math.atan2(Math.cos(e0rad) * Math.sin(lrad) - Math.sin(e0rad) * Math.tan(brad), Math.cos(lrad));\n    var deltas = Math.asin(Math.cos(e0rad) * Math.sin(brad) + Math.sin(e0rad) * Math.cos(brad) * Math.sin(lrad));\n    details.DS = CT.r2D(Math.asin(-Math.sin(delta0rad) * Math.sin(deltas) - Math.cos(delta0rad) * Math.cos(deltas) * Math.cos(alpha0rad - alphas)));\n    var u = y * Math.cos(e0rad) - z * Math.sin(e0rad);\n    var v = y * Math.sin(e0rad) + z * Math.cos(e0rad);\n    var alpharad = Math.atan2(u, x);\n    var alpha = CT.r2D(alpharad);\n    var deltarad = Math.atan2(v, Math.sqrt(x * x + u * u));\n    var delta = CT.r2D(deltarad);\n    var xi = Math.atan2(Math.sin(delta0rad) * Math.cos(deltarad) * Math.cos(alpha0rad - alpharad) - Math.sin(deltarad) * Math.cos(delta0rad), Math.cos(deltarad) * Math.sin(alpha0rad - alpharad));\n    details.DE = CT.r2D(Math.asin(-Math.sin(delta0rad) * Math.sin(deltarad) - Math.cos(delta0rad) * Math.cos(deltarad) * Math.cos(alpha0rad - alpharad)));\n    details.geometricw1 = CT.m360(W1 - CT.r2D(xi) - 5.07033 * DELTA);\n    details.geometricw2 = CT.m360(W2 - CT.r2D(xi) - 5.02626 * DELTA);\n    var C = 57.2958 * (2 * r * DELTA + R * R - r * r - DELTA * DELTA) / (4 * r * DELTA);\n    if (Math.sin(lrad - l0rad) > 0) {\n        details.apparentw1 = CT.m360(details.geometricw1 + C);\n        details.apparentw2 = CT.m360(details.geometricw2 + C);\n    }\n    else {\n        details.apparentw1 = CT.m360(details.geometricw1 - C);\n        details.apparentw2 = CT.m360(details.geometricw2 - C);\n    }\n    var NutationInLongitude = CAANutation.nutationInLongitude(JD);\n    var NutationInObliquity = CAANutation.nutationInObliquity(JD);\n    e0 += NutationInObliquity / 3600;\n    e0rad = CT.d2R(e0);\n    alpha += 0.005693 * (Math.cos(alpharad) * Math.cos(l0rad) * Math.cos(e0rad) + Math.sin(alpharad) * Math.sin(l0rad)) / Math.cos(deltarad);\n    alpha = CT.m360(alpha);\n    alpharad = CT.d2R(alpha);\n    delta += 0.005693 * (Math.cos(l0rad) * Math.cos(e0rad) * (Math.tan(e0rad) * Math.cos(deltarad) - Math.sin(alpharad) * Math.sin(deltarad)) + Math.cos(alpharad) * Math.sin(deltarad) * Math.sin(l0rad));\n    deltarad = CT.d2R(delta);\n    var NutationRA = CAANutation.nutationInRightAscension(alpha / 15, delta, e0, NutationInLongitude, NutationInObliquity);\n    var alphadash = alpha + NutationRA / 3600;\n    var alphadashrad = CT.d2R(alphadash);\n    var NutationDec = CAANutation.nutationInDeclination(alpha / 15, delta, e0, NutationInLongitude, NutationInObliquity);\n    var deltadash = delta + NutationDec / 3600;\n    var deltadashrad = CT.d2R(deltadash);\n    NutationRA = CAANutation.nutationInRightAscension(alpha0 / 15, delta0, e0, NutationInLongitude, NutationInObliquity);\n    var alpha0dash = alpha0 + NutationRA / 3600;\n    var alpha0dashrad = CT.d2R(alpha0dash);\n    NutationDec = CAANutation.nutationInDeclination(alpha0 / 15, delta0, e0, NutationInLongitude, NutationInObliquity);\n    var delta0dash = delta0 + NutationDec / 3600;\n    var delta0dashrad = CT.d2R(delta0dash);\n    details.p = CT.m360(CT.r2D(Math.atan2(Math.cos(delta0dashrad) * Math.sin(alpha0dashrad - alphadashrad), Math.sin(delta0dashrad) * Math.cos(deltadashrad) - Math.cos(delta0dashrad) * Math.sin(deltadashrad) * Math.cos(alpha0dashrad - alphadashrad))));\n    return details;\n};\n\nvar CAAPhysicalJupiter$ = {};\n\nregisterType(\"CAAPhysicalJupiter\", [CAAPhysicalJupiter, CAAPhysicalJupiter$, null]);\n","// Originally `AAPHYSICALMARS.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the physical parameters of Mars\"\n// Last update of original: PJN / 04-01-2004\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { CAANutation } from \"./nutation.js\";\nimport { CAASun } from \"./sun.js\";\nimport { CAAEarth } from \"./earth.js\";\nimport { CAAMars } from \"./mars.js\";\nimport { ELL } from \"./elliptical.js\";\nimport { IFR } from \"./illuminated_fraction.js\";\nimport { MIFR } from \"./moon_illuminated_fraction.js\";\n\n// CAAPhysicalMarsDetails\n\nexport function CAAPhysicalMarsDetails() {\n    this.DE = 0;\n    this.DS = 0;\n    this.w = 0;\n    this.p = 0;\n    this.x = 0;\n    this.k = 0;\n    this.q = 0;\n    this.d = 0;\n    this.DE = 0;\n    this.DS = 0;\n    this.w = 0;\n    this.p = 0;\n    this.x = 0;\n    this.k = 0;\n    this.q = 0;\n    this.d = 0;\n}\n\nvar CAAPhysicalMarsDetails$ = {};\n\nregisterType(\"CAAPhysicalMarsDetails\", [CAAPhysicalMarsDetails, CAAPhysicalMarsDetails$, null]);\n\n\n// CAAPhysicalMars\n\nexport function CAAPhysicalMars() { }\n\nCAAPhysicalMars.calculate = function (JD) {\n    var details = new CAAPhysicalMarsDetails();\n    var T = (JD - 2451545) / 36525;\n    var Lambda0 = 352.9065 + 1.1733 * T;\n    var Lambda0rad = CT.d2R(Lambda0);\n    var Beta0 = 63.2818 - 0.00394 * T;\n    var Beta0rad = CT.d2R(Beta0);\n    var l0 = CAAEarth.eclipticLongitude(JD);\n    var l0rad = CT.d2R(l0);\n    var b0 = CAAEarth.eclipticLatitude(JD);\n    var b0rad = CT.d2R(b0);\n    var R = CAAEarth.radiusVector(JD);\n    var PreviousLightTravelTime = 0;\n    var LightTravelTime = 0;\n    var x = 0;\n    var y = 0;\n    var z = 0;\n    var bIterate = true;\n    var DELTA = 0;\n    var l = 0;\n    var lrad = 0;\n    var b = 0;\n    var brad = 0;\n    var r = 0;\n    while (bIterate) {\n        var JD2 = JD - LightTravelTime;\n        l = CAAMars.eclipticLongitude(JD2);\n        lrad = CT.d2R(l);\n        b = CAAMars.eclipticLatitude(JD2);\n        brad = CT.d2R(b);\n        r = CAAMars.radiusVector(JD2);\n        x = r * Math.cos(brad) * Math.cos(lrad) - R * Math.cos(l0rad);\n        y = r * Math.cos(brad) * Math.sin(lrad) - R * Math.sin(l0rad);\n        z = r * Math.sin(brad) - R * Math.sin(b0rad);\n        DELTA = Math.sqrt(x * x + y * y + z * z);\n        LightTravelTime = ELL.distanceToLightTime(DELTA);\n        bIterate = (Math.abs(LightTravelTime - PreviousLightTravelTime) > 2E-06);\n        if (bIterate) {\n            PreviousLightTravelTime = LightTravelTime;\n        }\n    }\n    var lambdarad = Math.atan2(y, x);\n    var lambda = CT.r2D(lambdarad);\n    var betarad = Math.atan2(z, Math.sqrt(x * x + y * y));\n    var beta = CT.r2D(betarad);\n    details.DE = CT.r2D(Math.asin(-Math.sin(Beta0rad) * Math.sin(betarad) - Math.cos(Beta0rad) * Math.cos(betarad) * Math.cos(Lambda0rad - lambdarad)));\n    var N = 49.5581 + 0.7721 * T;\n    var Nrad = CT.d2R(N);\n    var ldash = l - 0.00697 / r;\n    var ldashrad = CT.d2R(ldash);\n    var bdash = b - 0.000225 * (Math.cos(lrad - Nrad) / r);\n    var bdashrad = CT.d2R(bdash);\n    details.DS = CT.r2D(Math.asin(-Math.sin(Beta0rad) * Math.sin(bdashrad) - Math.cos(Beta0rad) * Math.cos(bdashrad) * Math.cos(Lambda0rad - ldashrad)));\n    var W = CT.m360(11.504 + 350.89200025 * (JD - LightTravelTime - 2433282.5));\n    var e0 = CAANutation.meanObliquityOfEcliptic(JD);\n    var e0rad = CT.d2R(e0);\n    var PoleEquatorial = CT.ec2Eq(Lambda0, Beta0, e0);\n    var alpha0rad = CT.h2R(PoleEquatorial.x);\n    var delta0rad = CT.d2R(PoleEquatorial.y);\n    var u = y * Math.cos(e0rad) - z * Math.sin(e0rad);\n    var v = y * Math.sin(e0rad) + z * Math.cos(e0rad);\n    var alpharad = Math.atan2(u, x);\n    var alpha = CT.r2H(alpharad);\n    var deltarad = Math.atan2(v, Math.sqrt(x * x + u * u));\n    var delta = CT.r2D(deltarad);\n    var xi = Math.atan2(Math.sin(delta0rad) * Math.cos(deltarad) * Math.cos(alpha0rad - alpharad) - Math.sin(deltarad) * Math.cos(delta0rad), Math.cos(deltarad) * Math.sin(alpha0rad - alpharad));\n    details.w = CT.m360(W - CT.r2D(xi));\n    var NutationInLongitude = CAANutation.nutationInLongitude(JD);\n    var NutationInObliquity = CAANutation.nutationInObliquity(JD);\n    lambda += 0.005693 * Math.cos(l0rad - lambdarad) / Math.cos(betarad);\n    beta += 0.005693 * Math.sin(l0rad - lambdarad) * Math.sin(betarad);\n    Lambda0 += NutationInLongitude / 3600;\n    Lambda0rad = CT.d2R(Lambda0);\n    lambda += NutationInLongitude / 3600;\n    lambdarad = CT.d2R(lambda);\n    e0 += NutationInObliquity / 3600;\n    e0rad = CT.d2R(e0rad);\n    var ApparentPoleEquatorial = CT.ec2Eq(Lambda0, Beta0, e0);\n    var alpha0dash = CT.h2R(ApparentPoleEquatorial.x);\n    var delta0dash = CT.d2R(ApparentPoleEquatorial.y);\n    var ApparentMars = CT.ec2Eq(lambda, beta, e0);\n    var alphadash = CT.h2R(ApparentMars.x);\n    var deltadash = CT.d2R(ApparentMars.y);\n    details.p = CT.m360(CT.r2D(Math.atan2(Math.cos(delta0dash) * Math.sin(alpha0dash - alphadash), Math.sin(delta0dash) * Math.cos(deltadash) - Math.cos(delta0dash) * Math.sin(deltadash) * Math.cos(alpha0dash - alphadash))));\n    var SunLambda = CAASun.geometricEclipticLongitude(JD);\n    var SunBeta = CAASun.geometricEclipticLatitude(JD);\n    var SunEquatorial = CT.ec2Eq(SunLambda, SunBeta, e0);\n    details.x = MIFR.positionAngle(SunEquatorial.x, SunEquatorial.y, alpha, delta);\n    details.d = 9.36 / DELTA;\n    details.k = IFR.illuminatedFraction2(r, R, DELTA);\n    details.q = (1 - details.k) * details.d;\n    return details;\n};\n\nvar CAAPhysicalMars$ = {};\n\nregisterType(\"CAAPhysicalMars\", [CAAPhysicalMars, CAAPhysicalMars$, null]);\n","// Originally `AAPHYSICALSUN.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the physical parameters of the Sun\"\n// Last update of original: PJN / 16-06-2004\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { CAANutation } from \"./nutation.js\";\nimport { CAAEarth } from \"./earth.js\";\n\n\n// CAAPhysicalSunDetails\n\nexport function CAAPhysicalSunDetails() {\n    this.p = 0;\n    this.b0 = 0;\n    this.l0 = 0;\n    this.p = 0;\n    this.b0 = 0;\n    this.l0 = 0;\n}\n\nvar CAAPhysicalSunDetails$ = {};\n\nregisterType(\"CAAPhysicalSunDetails\", [CAAPhysicalSunDetails, CAAPhysicalSunDetails$, null]);\n\n\n// CAAPhysicalSun\n\nexport function CAAPhysicalSun() { }\n\nCAAPhysicalSun.calculate = function (JD) {\n    var theta = CT.m360((JD - 2398220) * 360 / 25.38);\n    var I = 7.25;\n    var K = 73.6667 + 1.3958333 * (JD - 2396758) / 36525;\n    var L = CAAEarth.eclipticLongitude(JD);\n    var R = CAAEarth.radiusVector(JD);\n    var SunLong = L + 180 - CT.dmS2D(0, 0, 20.4898 / R);\n    var SunLongDash = SunLong + CT.dmS2D(0, 0, CAANutation.nutationInLongitude(JD));\n    var epsilon = CAANutation.trueObliquityOfEcliptic(JD);\n    epsilon = CT.d2R(epsilon);\n    SunLong = CT.d2R(SunLong);\n    SunLongDash = CT.d2R(SunLongDash);\n    K = CT.d2R(K);\n    I = CT.d2R(I);\n    theta = CT.d2R(theta);\n    var x = Math.atan(-Math.cos(SunLong) * Math.tan(epsilon));\n    var y = Math.atan(-Math.cos(SunLong - K) * Math.tan(I));\n    var details = new CAAPhysicalSunDetails();\n    details.p = CT.r2D(x + y);\n    details.b0 = CT.r2D(Math.asin(Math.sin(SunLong - K) * Math.sin(I)));\n    var eta = Math.atan(Math.tan(SunLong - K) * Math.cos(I));\n    details.l0 = CT.m360(CT.r2D(eta - theta));\n    return details;\n};\n\nCAAPhysicalSun.timeOfStartOfRotation = function (C) {\n    var JED = 2398140.227 + 27.2752316 * C;\n    var M = CT.m360(281.96 + 26.882476 * C);\n    M = CT.d2R(M);\n    JED += (0.1454 * Math.sin(M) - 0.0085 * Math.sin(2 * M) - 0.0141 * Math.cos(2 * M));\n    return JED;\n};\n\nvar CAAPhysicalSun$ = {};\n\nregisterType(\"CAAPhysicalSun\", [CAAPhysicalSun, CAAPhysicalSun$, null]);\n","// Originally `AAPLUTO.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the heliocentric position of Pluto\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\n\n\n// PlutoCoefficient1\n\nexport function PlutoCoefficient1(j, s, p) {\n    this.j = 0;\n    this.s = 0;\n    this.p = 0;\n    this.j = j;\n    this.s = s;\n    this.p = p;\n}\n\nvar PlutoCoefficient1$ = {};\n\nregisterType(\"PlutoCoefficient1\", [PlutoCoefficient1, PlutoCoefficient1$, null]);\n\n\n// PlutoCoefficient2\n\nexport function PlutoCoefficient2(a, b) {\n    this.a = 0;\n    this.b = 0;\n    this.a = a;\n    this.b = b;\n}\n\nvar PlutoCoefficient2$ = {};\n\nregisterType(\"PlutoCoefficient2\", [PlutoCoefficient2, PlutoCoefficient2$, null]);\n\n\n// Coefficients\n\nconst g_PlutoArgumentCoefficients = [new PlutoCoefficient1(0, 0, 1), new PlutoCoefficient1(0, 0, 2), new PlutoCoefficient1(0, 0, 3), new PlutoCoefficient1(0, 0, 4), new PlutoCoefficient1(0, 0, 5), new PlutoCoefficient1(0, 0, 6), new PlutoCoefficient1(0, 1, -1), new PlutoCoefficient1(0, 1, 0), new PlutoCoefficient1(0, 1, 1), new PlutoCoefficient1(0, 1, 2), new PlutoCoefficient1(0, 1, 3), new PlutoCoefficient1(0, 2, -2), new PlutoCoefficient1(0, 2, -1), new PlutoCoefficient1(0, 2, 0), new PlutoCoefficient1(1, -1, 0), new PlutoCoefficient1(1, -1, 1), new PlutoCoefficient1(1, 0, -3), new PlutoCoefficient1(1, 0, -2), new PlutoCoefficient1(1, 0, -1), new PlutoCoefficient1(1, 0, 0), new PlutoCoefficient1(1, 0, 1), new PlutoCoefficient1(1, 0, 2), new PlutoCoefficient1(1, 0, 3), new PlutoCoefficient1(1, 0, 4), new PlutoCoefficient1(1, 1, -3), new PlutoCoefficient1(1, 1, -2), new PlutoCoefficient1(1, 1, -1), new PlutoCoefficient1(1, 1, 0), new PlutoCoefficient1(1, 1, 1), new PlutoCoefficient1(1, 1, 3), new PlutoCoefficient1(2, 0, -6), new PlutoCoefficient1(2, 0, -5), new PlutoCoefficient1(2, 0, -4), new PlutoCoefficient1(2, 0, -3), new PlutoCoefficient1(2, 0, -2), new PlutoCoefficient1(2, 0, -1), new PlutoCoefficient1(2, 0, 0), new PlutoCoefficient1(2, 0, 1), new PlutoCoefficient1(2, 0, 2), new PlutoCoefficient1(2, 0, 3), new PlutoCoefficient1(3, 0, -2), new PlutoCoefficient1(3, 0, -1), new PlutoCoefficient1(3, 0, 0)];\nconst g_PlutoLongitudeCoefficients = [new PlutoCoefficient2(-19799805, 19850055), new PlutoCoefficient2(897144, -4954829), new PlutoCoefficient2(611149, 1211027), new PlutoCoefficient2(-341243, -189585), new PlutoCoefficient2(129287, -34992), new PlutoCoefficient2(-38164, 30893), new PlutoCoefficient2(20442, -9987), new PlutoCoefficient2(-4063, -5071), new PlutoCoefficient2(-6016, -3336), new PlutoCoefficient2(-3956, 3039), new PlutoCoefficient2(-667, 3572), new PlutoCoefficient2(1276, 501), new PlutoCoefficient2(1152, -917), new PlutoCoefficient2(630, -1277), new PlutoCoefficient2(2571, -459), new PlutoCoefficient2(899, -1449), new PlutoCoefficient2(-1016, 1043), new PlutoCoefficient2(-2343, -1012), new PlutoCoefficient2(7042, 788), new PlutoCoefficient2(1199, -338), new PlutoCoefficient2(418, -67), new PlutoCoefficient2(120, -274), new PlutoCoefficient2(-60, -159), new PlutoCoefficient2(-82, -29), new PlutoCoefficient2(-36, -29), new PlutoCoefficient2(-40, 7), new PlutoCoefficient2(-14, 22), new PlutoCoefficient2(4, 13), new PlutoCoefficient2(5, 2), new PlutoCoefficient2(-1, 0), new PlutoCoefficient2(2, 0), new PlutoCoefficient2(-4, 5), new PlutoCoefficient2(4, -7), new PlutoCoefficient2(14, 24), new PlutoCoefficient2(-49, -34), new PlutoCoefficient2(163, -48), new PlutoCoefficient2(9, -24), new PlutoCoefficient2(-4, 1), new PlutoCoefficient2(-3, 1), new PlutoCoefficient2(1, 3), new PlutoCoefficient2(-3, -1), new PlutoCoefficient2(5, -3), new PlutoCoefficient2(0, 0)];\nconst g_PlutoLatitudeCoefficients = [new PlutoCoefficient2(-5452852, -14974862), new PlutoCoefficient2(3527812, 1672790), new PlutoCoefficient2(-1050748, 327647), new PlutoCoefficient2(178690, -292153), new PlutoCoefficient2(18650, 100340), new PlutoCoefficient2(-30697, -25823), new PlutoCoefficient2(4878, 11248), new PlutoCoefficient2(226, -64), new PlutoCoefficient2(2030, -836), new PlutoCoefficient2(69, -604), new PlutoCoefficient2(-247, -567), new PlutoCoefficient2(-57, 1), new PlutoCoefficient2(-122, 175), new PlutoCoefficient2(-49, -164), new PlutoCoefficient2(-197, 199), new PlutoCoefficient2(-25, 217), new PlutoCoefficient2(589, -248), new PlutoCoefficient2(-269, 711), new PlutoCoefficient2(185, 193), new PlutoCoefficient2(315, 807), new PlutoCoefficient2(-130, -43), new PlutoCoefficient2(5, 3), new PlutoCoefficient2(2, 17), new PlutoCoefficient2(2, 5), new PlutoCoefficient2(2, 3), new PlutoCoefficient2(3, 1), new PlutoCoefficient2(2, -1), new PlutoCoefficient2(1, -1), new PlutoCoefficient2(0, -1), new PlutoCoefficient2(0, 0), new PlutoCoefficient2(0, -2), new PlutoCoefficient2(2, 2), new PlutoCoefficient2(-7, 0), new PlutoCoefficient2(10, -8), new PlutoCoefficient2(-3, 20), new PlutoCoefficient2(6, 5), new PlutoCoefficient2(14, 17), new PlutoCoefficient2(-2, 0), new PlutoCoefficient2(0, 0), new PlutoCoefficient2(0, 0), new PlutoCoefficient2(0, 1), new PlutoCoefficient2(0, 0), new PlutoCoefficient2(1, 0)];\nconst g_PlutoRadiusCoefficients = [new PlutoCoefficient2(66865439, 68951812), new PlutoCoefficient2(-11827535, -332538), new PlutoCoefficient2(1593179, -1438890), new PlutoCoefficient2(-18444, 483220), new PlutoCoefficient2(-65977, -85431), new PlutoCoefficient2(31174, -6032), new PlutoCoefficient2(-5794, 22161), new PlutoCoefficient2(4601, 4032), new PlutoCoefficient2(-1729, 234), new PlutoCoefficient2(-415, 702), new PlutoCoefficient2(239, 723), new PlutoCoefficient2(67, -67), new PlutoCoefficient2(1034, -451), new PlutoCoefficient2(-129, 504), new PlutoCoefficient2(480, -231), new PlutoCoefficient2(2, -441), new PlutoCoefficient2(-3359, 265), new PlutoCoefficient2(7856, -7832), new PlutoCoefficient2(36, 45763), new PlutoCoefficient2(8663, 8547), new PlutoCoefficient2(-809, -769), new PlutoCoefficient2(263, -144), new PlutoCoefficient2(-126, 32), new PlutoCoefficient2(-35, -16), new PlutoCoefficient2(-19, -4), new PlutoCoefficient2(-15, 8), new PlutoCoefficient2(-4, 12), new PlutoCoefficient2(5, 6), new PlutoCoefficient2(3, 1), new PlutoCoefficient2(6, -2), new PlutoCoefficient2(2, 2), new PlutoCoefficient2(-2, -2), new PlutoCoefficient2(14, 13), new PlutoCoefficient2(-63, 13), new PlutoCoefficient2(136, -236), new PlutoCoefficient2(273, 1065), new PlutoCoefficient2(251, 149), new PlutoCoefficient2(-25, -9), new PlutoCoefficient2(9, -2), new PlutoCoefficient2(-8, 7), new PlutoCoefficient2(2, -10), new PlutoCoefficient2(19, 35), new PlutoCoefficient2(10, 3)];\n\n\n// CAAPluto\n\nexport function CAAPluto() { }\n\nCAAPluto.eclipticLongitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var J = 34.35 + 3034.9057 * T;\n    var S = 50.08 + 1222.1138 * T;\n    var P = 238.96 + 144.96 * T;\n    var L = 0;\n    var nPlutoCoefficients = g_PlutoArgumentCoefficients.length;\n    for (var i = 0; i < nPlutoCoefficients; i++) {\n        var Alpha = g_PlutoArgumentCoefficients[i].j * J + g_PlutoArgumentCoefficients[i].s * S + g_PlutoArgumentCoefficients[i].p * P;\n        Alpha = CT.d2R(Alpha);\n        L += ((g_PlutoLongitudeCoefficients[i].a * Math.sin(Alpha)) + (g_PlutoLongitudeCoefficients[i].b * Math.cos(Alpha)));\n    }\n    L = L / 1000000;\n    L += (238.958116 + 144.96 * T);\n    L = CT.m360(L);\n    return L;\n};\n\nCAAPluto.eclipticLatitude = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var J = 34.35 + 3034.9057 * T;\n    var S = 50.08 + 1222.1138 * T;\n    var P = 238.96 + 144.96 * T;\n    var L = 0;\n    var nPlutoCoefficients = g_PlutoArgumentCoefficients.length;\n    for (var i = 0; i < nPlutoCoefficients; i++) {\n        var Alpha = g_PlutoArgumentCoefficients[i].j * J + g_PlutoArgumentCoefficients[i].s * S + g_PlutoArgumentCoefficients[i].p * P;\n        Alpha = CT.d2R(Alpha);\n        L += ((g_PlutoLatitudeCoefficients[i].a * Math.sin(Alpha)) + (g_PlutoLatitudeCoefficients[i].b * Math.cos(Alpha)));\n    }\n    L = L / 1000000;\n    L += -3.908239;\n    return L;\n};\n\nCAAPluto.radiusVector = function (JD) {\n    var T = (JD - 2451545) / 36525;\n    var J = 34.35 + 3034.9057 * T;\n    var S = 50.08 + 1222.1138 * T;\n    var P = 238.96 + 144.96 * T;\n    var R = 0;\n    var nPlutoCoefficients = g_PlutoArgumentCoefficients.length;\n    for (var i = 0; i < nPlutoCoefficients; i++) {\n        var Alpha = g_PlutoArgumentCoefficients[i].j * J + g_PlutoArgumentCoefficients[i].s * S + g_PlutoArgumentCoefficients[i].p * P;\n        Alpha = CT.d2R(Alpha);\n        R += ((g_PlutoRadiusCoefficients[i].a * Math.sin(Alpha)) + (g_PlutoRadiusCoefficients[i].b * Math.cos(Alpha)));\n    }\n    R = R / 10000000;\n    R += 40.7241346;\n    return R;\n};\n\nvar CAAPluto$ = {};\n\nregisterType(\"CAAPluto\", [CAAPluto, CAAPluto$, null]);\n","// Originally `AAPRECESSION.CPP`\n// \"Purpose: Implementation for the algorithms for Precession\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { COR, CT } from \"./coordinate_transformation.js\";\n\n\n// CAAPrecession\n\nexport function CAAPrecession() { }\n\nCAAPrecession.precessEquatorial = function (Alpha, Delta, JD0, JD) {\n    var T = (JD0 - 2451545) / 36525;\n    var Tsquared = T * T;\n    var t = (JD - JD0) / 36525;\n    var tsquared = t * t;\n    var tcubed = tsquared * t;\n    Alpha = CT.h2R(Alpha);\n    Delta = CT.d2R(Delta);\n    var sigma = (2306.2181 + 1.39656 * T - 0.000139 * Tsquared) * t + (0.30188 - 3.44E-05 * T) * tsquared + 0.017988 * tcubed;\n    sigma = CT.d2R(CT.dmS2D(0, 0, sigma));\n    var zeta = (2306.2181 + 1.39656 * T - 0.000138 * Tsquared) * t + (1.09468 + 6.6E-05 * T) * tsquared + 0.018203 * tcubed;\n    zeta = CT.d2R(CT.dmS2D(0, 0, zeta));\n    var phi = (2004.3109 - 0.8533 * T - 0.000217 * Tsquared) * t - (0.42665 + 0.000217 * T) * tsquared - 0.041833 * tcubed;\n    phi = CT.d2R(CT.dmS2D(0, 0, phi));\n    var A = Math.cos(Delta) * Math.sin(Alpha + sigma);\n    var B = Math.cos(phi) * Math.cos(Delta) * Math.cos(Alpha + sigma) - Math.sin(phi) * Math.sin(Delta);\n    var C = Math.sin(phi) * Math.cos(Delta) * Math.cos(Alpha + sigma) + Math.cos(phi) * Math.sin(Delta);\n    var vvalue = new COR();\n    vvalue.x = CT.r2H(Math.atan2(A, B) + zeta);\n    if (vvalue.x < 0) {\n        vvalue.x += 24;\n    }\n    vvalue.y = CT.r2D(Math.asin(C));\n    return vvalue;\n};\n\nCAAPrecession.precessEquatorialFK4 = function (Alpha, Delta, JD0, JD) {\n    var T = (JD0 - 2415020.3135) / 36524.2199;\n    var t = (JD - JD0) / 36524.2199;\n    var tsquared = t * t;\n    var tcubed = tsquared * t;\n    Alpha = CT.h2R(Alpha);\n    Delta = CT.d2R(Delta);\n    var sigma = (2304.25 + 1.396 * T) * t + 0.302 * tsquared + 0.018 * tcubed;\n    sigma = CT.d2R(CT.dmS2D(0, 0, sigma));\n    var zeta = 0.791 * tsquared + 0.001 * tcubed;\n    zeta = CT.d2R(CT.dmS2D(0, 0, zeta));\n    zeta += sigma;\n    var phi = (2004.682 - 0.853 * T) * t - 0.426 * tsquared - 0.042 * tcubed;\n    phi = CT.d2R(CT.dmS2D(0, 0, phi));\n    var A = Math.cos(Delta) * Math.sin(Alpha + sigma);\n    var B = Math.cos(phi) * Math.cos(Delta) * Math.cos(Alpha + sigma) - Math.sin(phi) * Math.sin(Delta);\n    var C = Math.sin(phi) * Math.cos(Delta) * Math.cos(Alpha + sigma) + Math.cos(phi) * Math.sin(Delta);\n    var vvalue = new COR();\n    vvalue.x = CT.r2H(Math.atan2(A, B) + zeta);\n    if (vvalue.x < 0) {\n        vvalue.x += 24;\n    }\n    vvalue.y = CT.r2D(Math.asin(C));\n    return vvalue;\n};\n\nCAAPrecession.precessEcliptic = function (Lambda, Beta, JD0, JD) {\n    var T = (JD0 - 2451545) / 36525;\n    var Tsquared = T * T;\n    var t = (JD - JD0) / 36525;\n    var tsquared = t * t;\n    var tcubed = tsquared * t;\n    Lambda = CT.d2R(Lambda);\n    Beta = CT.d2R(Beta);\n    var eta = (47.0029 - 0.06603 * T + 0.000598 * Tsquared) * t + (-0.03302 + 0.000598 * T) * tsquared + 6E-05 * tcubed;\n    eta = CT.d2R(CT.dmS2D(0, 0, eta));\n    var pi = 174.876384 * 3600 + 3289.4789 * T + 0.60622 * Tsquared - (869.8089 + 0.50491 * T) * t + 0.03536 * tsquared;\n    pi = CT.d2R(CT.dmS2D(0, 0, pi));\n    var p = (5029.0966 + 2.22226 * T - 4.2E-05 * Tsquared) * t + (1.11113 - 4.2E-05 * T) * tsquared - 6E-06 * tcubed;\n    p = CT.d2R(CT.dmS2D(0, 0, p));\n    var A = Math.cos(eta) * Math.cos(Beta) * Math.sin(pi - Lambda) - Math.sin(eta) * Math.sin(Beta);\n    var B = Math.cos(Beta) * Math.cos(pi - Lambda);\n    var C = Math.cos(eta) * Math.sin(Beta) + Math.sin(eta) * Math.cos(Beta) * Math.sin(pi - Lambda);\n    var vvalue = new COR();\n    vvalue.x = CT.r2D(p + pi - Math.atan2(A, B));\n    if (vvalue.x < 0) {\n        vvalue.x += 360;\n    }\n    vvalue.y = CT.r2D(Math.asin(C));\n    return vvalue;\n};\n\nCAAPrecession.equatorialPMToEcliptic = function (Alpha, Delta, Beta, PMAlpha, PMDelta, Epsilon) {\n    Epsilon = CT.d2R(Epsilon);\n    Alpha = CT.h2R(Alpha);\n    Delta = CT.d2R(Delta);\n    Beta = CT.d2R(Beta);\n    var cosb = Math.cos(Beta);\n    var sinEpsilon = Math.sin(Epsilon);\n    var vvalue = new COR();\n    vvalue.x = (PMDelta * sinEpsilon * Math.cos(Alpha) + PMAlpha * Math.cos(Delta) * (Math.cos(Epsilon) * Math.cos(Delta) + sinEpsilon * Math.sin(Delta) * Math.sin(Alpha))) / (cosb * cosb);\n    vvalue.y = (PMDelta * (Math.cos(Epsilon) * Math.cos(Delta) + sinEpsilon * Math.sin(Delta) * Math.sin(Alpha)) - PMAlpha * sinEpsilon * Math.cos(Alpha) * Math.cos(Delta)) / cosb;\n    return vvalue;\n};\n\nCAAPrecession.adjustPositionUsingUniformProperMotion = function (t, Alpha, Delta, PMAlpha, PMDelta) {\n    var vvalue = new COR();\n    vvalue.x = Alpha + (PMAlpha * t / 3600);\n    vvalue.y = Delta + (PMDelta * t / 3600);\n    return vvalue;\n};\n\nCAAPrecession.adjustPositionUsingMotionInSpace = function (r, DeltaR, t, Alpha, Delta, PMAlpha, PMDelta) {\n    DeltaR /= 977792;\n    PMAlpha /= 13751;\n    PMDelta /= 206265;\n    Alpha = CT.h2R(Alpha);\n    Delta = CT.d2R(Delta);\n    var x = r * Math.cos(Delta) * Math.cos(Alpha);\n    var y = r * Math.cos(Delta) * Math.sin(Alpha);\n    var z = r * Math.sin(Delta);\n    var DeltaX = x / r * DeltaR - z * PMDelta * Math.cos(Alpha) - y * PMAlpha;\n    var DeltaY = y / r * DeltaR - z * PMDelta * Math.sin(Alpha) + x * PMAlpha;\n    var DeltaZ = z / r * DeltaR + r * PMDelta * Math.cos(Delta);\n    x += t * DeltaX;\n    y += t * DeltaY;\n    z += t * DeltaZ;\n    var vvalue = new COR();\n    vvalue.x = CT.r2H(Math.atan2(y, x));\n    if (vvalue.x < 0) {\n        vvalue.x += 24;\n    }\n    vvalue.y = CT.r2D(Math.atan2(z, Math.sqrt(x * x + y * y)));\n    return vvalue;\n};\n\nvar CAAPrecession$ = {};\n\nregisterType(\"CAAPrecession\", [CAAPrecession, CAAPrecession$, null]);\n","// Originally `AARISETRANSITSET.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the Rise, Transit and Set times\"\n// Last update of original: PJN / 15-10-2004\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { DYT } from \"./dynamical_time.js\";\nimport { INTP } from \"./interpolate.js\";\nimport { CAASidereal } from \"./sidereal.js\";\n\n\n// CAARiseTransitSetDetails\n\nexport function CAARiseTransitSetDetails() {\n    this.bValid = false;\n    this.rise = 0;\n    this.transit = 0;\n    this.set = 0;\n    this.bValid = false;\n    this.rise = 0;\n    this.transit = 0;\n    this.set = 0;\n}\n\nvar CAARiseTransitSetDetails$ = {};\n\nregisterType(\"CAARiseTransitSetDetails\", [CAARiseTransitSetDetails, CAARiseTransitSetDetails$, null]);\n\n\n// CAARiseTransitSet\n\nexport function CAARiseTransitSet() { }\n\nCAARiseTransitSet.rise = function (JD, Alpha1, Delta1, Alpha2, Delta2, Alpha3, Delta3, Longitude, Latitude, h0) {\n    var details = new CAARiseTransitSetDetails();\n    details.bValid = false;\n    var theta0 = CAASidereal.apparentGreenwichSiderealTime(JD);\n    theta0 *= 15;\n    var deltaT = DYT.deltaT(JD);\n    var Delta2Rad = CT.d2R(Delta2);\n    var LatitudeRad = CT.d2R(Latitude);\n    var h0Rad = CT.d2R(h0);\n    var cosH0 = (Math.sin(h0Rad) - Math.sin(LatitudeRad) * Math.sin(Delta2Rad)) / (Math.cos(LatitudeRad) * Math.cos(Delta2Rad));\n    if ((cosH0 > 1) || (cosH0 < -1)) {\n        return details;\n    }\n    var H0 = Math.acos(cosH0);\n    H0 = CT.r2D(H0);\n    var M0 = (Alpha2 * 15 + Longitude - theta0) / 360;\n    var M1 = M0 - H0 / 360;\n    var M2 = M0 + H0 / 360;\n    if (M0 > 1) {\n        M0 -= 1;\n    }\n    else if (M0 < 0) {\n        M0 += 1;\n    }\n    if (M1 > 1) {\n        M1 -= 1;\n    }\n    else if (M1 < 0) {\n        M1 += 1;\n    }\n    if (M2 > 1) {\n        M2 -= 1;\n    }\n    else if (M2 < 0) {\n        M2 += 1;\n    }\n    for (var i = 0; i < 2; i++) {\n        var theta1 = theta0 + 360.985647 * M1;\n        theta1 = CT.m360(theta1);\n        var n = M1 + deltaT / 86400;\n        var Alpha = INTP.interpolate(n, Alpha1, Alpha2, Alpha3);\n        var Delta = INTP.interpolate(n, Delta1, Delta2, Delta3);\n        var H = theta1 - Longitude - Alpha * 15;\n        var Horizontal = CT.eq2H(H / 15, Delta, Latitude);\n        var DeltaM = (Horizontal.y - h0) / (360 * Math.cos(CT.d2R(Delta)) * Math.cos(LatitudeRad) * Math.sin(CT.d2R(H)));\n        M1 += DeltaM;\n        theta1 = theta0 + 360.985647 * M0;\n        theta1 = CT.m360(theta1);\n        n = M0 + deltaT / 86400;\n        Alpha = INTP.interpolate(n, Alpha1, Alpha2, Alpha3);\n        H = theta1 - Longitude - Alpha * 15;\n        if (H < -180) {\n            H += 360;\n        }\n        DeltaM = -H / 360;\n        M0 += DeltaM;\n        theta1 = theta0 + 360.985647 * M2;\n        theta1 = CT.m360(theta1);\n        n = M2 + deltaT / 86400;\n        Alpha = INTP.interpolate(n, Alpha1, Alpha2, Alpha3);\n        Delta = INTP.interpolate(n, Delta1, Delta2, Delta3);\n        H = theta1 - Longitude - Alpha * 15;\n        Horizontal = CT.eq2H(H / 15, Delta, Latitude);\n        DeltaM = (Horizontal.y - h0) / (360 * Math.cos(CT.d2R(Delta)) * Math.cos(LatitudeRad) * Math.sin(CT.d2R(H)));\n        M2 += DeltaM;\n    }\n    details.bValid = true;\n    details.rise = M1 * 24;\n    details.set = M2 * 24;\n    details.transit = M0 * 24;\n    return details;\n};\n\nvar CAARiseTransitSet$ = {};\n\nregisterType(\"CAARiseTransitSet\", [CAARiseTransitSet, CAARiseTransitSet$, null]);\n","// Originally `AASATURN.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the heliocentric position of Saturn\"\n// Last update of original: PJN / 31-05-2004\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { VSC } from \"./earth.js\";\n\n\n// Coefficients\n\nconst g_L0SaturnCoefficients = [new VSC(87401354, 0, 0), new VSC(11107660, 3.9620509, 213.29909544), new VSC(1414151, 4.5858152, 7.113547), new VSC(398379, 0.52112, 206.185548), new VSC(350769, 3.303299, 426.598191), new VSC(206816, 0.246584, 103.092774), new VSC(79271, 3.84007, 220.41264), new VSC(23990, 4.66977, 110.20632), new VSC(16574, 0.43719, 419.48464), new VSC(15820, 0.93809, 632.78374), new VSC(15054, 2.7167, 639.89729), new VSC(14907, 5.76903, 316.39187), new VSC(14610, 1.56519, 3.93215), new VSC(13160, 4.44891, 14.22709), new VSC(13005, 5.98119, 11.0457), new VSC(10725, 3.1294, 202.2534), new VSC(6126, 1.7633, 277.035), new VSC(5863, 0.2366, 529.691), new VSC(5228, 4.2078, 3.1814), new VSC(5020, 3.1779, 433.7117), new VSC(4593, 0.6198, 199.072), new VSC(4006, 2.2448, 63.7359), new VSC(3874, 3.2228, 138.5175), new VSC(3269, 0.7749, 949.1756), new VSC(2954, 0.9828, 95.9792), new VSC(2461, 2.0316, 735.8765), new VSC(1758, 3.2658, 522.5774), new VSC(1640, 5.505, 846.0828), new VSC(1581, 4.3727, 309.2783), new VSC(1391, 4.0233, 323.5054), new VSC(1124, 2.8373, 415.5525), new VSC(1087, 4.1834, 2.4477), new VSC(1017, 3.717, 227.5262), new VSC(957, 0.507, 1265.567), new VSC(853, 3.421, 175.166), new VSC(849, 3.191, 209.367), new VSC(789, 5.007, 0.963), new VSC(749, 2.144, 853.196), new VSC(744, 5.253, 224.345), new VSC(687, 1.747, 1052.268), new VSC(654, 1.599, 0.048), new VSC(634, 2.299, 412.371), new VSC(625, 0.97, 210.118), new VSC(580, 3.093, 74.782), new VSC(546, 2.127, 350.332), new VSC(543, 1.518, 9.561), new VSC(530, 4.449, 117.32), new VSC(478, 2.965, 137.033), new VSC(474, 5.475, 742.99), new VSC(452, 1.044, 490.334), new VSC(449, 1.29, 127.472), new VSC(372, 2.278, 217.231), new VSC(355, 3.013, 838.969), new VSC(347, 1.539, 340.771), new VSC(343, 0.246, 0.521), new VSC(330, 0.247, 1581.959), new VSC(322, 0.961, 203.738), new VSC(322, 2.572, 647.011), new VSC(309, 3.495, 216.48), new VSC(287, 2.37, 351.817), new VSC(278, 0.4, 211.815), new VSC(249, 1.47, 1368.66), new VSC(227, 4.91, 12.53), new VSC(220, 4.204, 200.769), new VSC(209, 1.345, 625.67), new VSC(208, 0.483, 1162.475), new VSC(208, 1.283, 39.357), new VSC(204, 6.011, 265.989), new VSC(185, 3.503, 149.563), new VSC(184, 0.973, 4.193), new VSC(182, 5.491, 2.921), new VSC(174, 1.863, 0.751), new VSC(165, 0.44, 5.417), new VSC(149, 5.736, 52.69), new VSC(148, 1.535, 5.629), new VSC(146, 6.231, 195.14), new VSC(140, 4.295, 21.341), new VSC(131, 4.068, 10.295), new VSC(125, 6.277, 1898.351), new VSC(122, 1.976, 4.666), new VSC(118, 5.341, 554.07), new VSC(117, 2.679, 1155.361), new VSC(114, 5.594, 1059.382), new VSC(112, 1.105, 191.208), new VSC(110, 0.166, 1.484), new VSC(109, 3.438, 536.805), new VSC(107, 4.012, 956.289), new VSC(104, 2.192, 88.866), new VSC(103, 1.197, 1685.052), new VSC(101, 4.965, 269.921)];\nconst g_L1SaturnCoefficients = [new VSC(21354295596, 0, 0), new VSC(1296855, 1.8282054, 213.2990954), new VSC(564348, 2.885001, 7.113547), new VSC(107679, 2.277699, 206.185548), new VSC(98323, 1.0807, 426.59819), new VSC(40255, 2.04128, 220.41264), new VSC(19942, 1.27955, 103.09277), new VSC(10512, 2.7488, 14.22709), new VSC(6939, 0.4049, 639.8973), new VSC(4803, 2.4419, 419.4846), new VSC(4056, 2.9217, 110.2063), new VSC(3769, 3.6497, 3.9322), new VSC(3385, 2.4169, 3.1814), new VSC(3302, 1.2626, 433.7117), new VSC(3071, 2.3274, 199.072), new VSC(1953, 3.5639, 11.0457), new VSC(1249, 2.628, 95.9792), new VSC(922, 1.961, 227.526), new VSC(706, 4.417, 529.691), new VSC(650, 6.174, 202.253), new VSC(628, 6.111, 309.278), new VSC(487, 6.04, 853.196), new VSC(479, 4.988, 522.577), new VSC(468, 4.617, 63.736), new VSC(417, 2.117, 323.505), new VSC(408, 1.299, 209.367), new VSC(352, 2.317, 632.784), new VSC(344, 3.959, 412.371), new VSC(340, 3.634, 316.392), new VSC(336, 3.772, 735.877), new VSC(332, 2.861, 210.118), new VSC(289, 2.733, 117.32), new VSC(281, 5.744, 2.448), new VSC(266, 0.543, 647.011), new VSC(230, 1.644, 216.48), new VSC(192, 2.965, 224.345), new VSC(173, 4.077, 846.083), new VSC(167, 2.597, 21.341), new VSC(136, 2.286, 10.295), new VSC(131, 3.441, 742.99), new VSC(128, 4.095, 217.231), new VSC(109, 6.161, 415.552), new VSC(98, 4.73, 838.97), new VSC(94, 3.48, 1052.27), new VSC(92, 3.95, 88.87), new VSC(87, 1.22, 440.83), new VSC(83, 3.11, 625.67), new VSC(78, 6.24, 302.16), new VSC(67, 0.29, 4.67), new VSC(66, 5.65, 9.56), new VSC(62, 4.29, 127.47), new VSC(62, 1.83, 195.14), new VSC(58, 2.48, 191.96), new VSC(57, 5.02, 137.03), new VSC(55, 0.28, 74.78), new VSC(54, 5.13, 490.33), new VSC(51, 1.46, 536.8), new VSC(47, 1.18, 149.56), new VSC(47, 5.15, 515.46), new VSC(46, 2.23, 956.29), new VSC(44, 2.71, 5.42), new VSC(40, 0.41, 269.92), new VSC(40, 3.89, 728.76), new VSC(38, 0.65, 422.67), new VSC(38, 2.53, 12.53), new VSC(37, 3.78, 2.92), new VSC(35, 6.08, 5.63), new VSC(34, 3.21, 1368.66), new VSC(33, 4.64, 277.03), new VSC(33, 5.43, 1066.5), new VSC(33, 0.3, 351.82), new VSC(32, 4.39, 1155.36), new VSC(31, 2.43, 52.69), new VSC(30, 2.84, 203), new VSC(30, 6.19, 284.15), new VSC(30, 3.39, 1059.38), new VSC(29, 2.03, 330.62), new VSC(28, 2.74, 265.99), new VSC(26, 4.51, 340.77)];\nconst g_L2SaturnCoefficients = [new VSC(116441, 1.179879, 7.113547), new VSC(91921, 0.07425, 213.2991), new VSC(90592, 0, 0), new VSC(15277, 4.06492, 206.18555), new VSC(10631, 0.25778, 220.41264), new VSC(10605, 5.40964, 426.59819), new VSC(4265, 1.046, 14.2271), new VSC(1216, 2.9186, 103.0928), new VSC(1165, 4.6094, 639.8973), new VSC(1082, 5.6913, 433.7117), new VSC(1045, 4.0421, 199.072), new VSC(1020, 0.6337, 3.1814), new VSC(634, 4.388, 419.485), new VSC(549, 5.573, 3.932), new VSC(457, 1.268, 110.206), new VSC(425, 0.209, 227.526), new VSC(274, 4.288, 95.979), new VSC(162, 1.381, 11.046), new VSC(129, 1.566, 309.278), new VSC(117, 3.881, 853.196), new VSC(105, 4.9, 647.011), new VSC(101, 0.893, 21.341), new VSC(96, 2.91, 316.39), new VSC(95, 5.63, 412.37), new VSC(85, 5.73, 209.37), new VSC(83, 6.05, 216.48), new VSC(82, 1.02, 117.32), new VSC(75, 4.76, 210.12), new VSC(67, 0.46, 522.58), new VSC(66, 0.48, 10.29), new VSC(64, 0.35, 323.51), new VSC(61, 4.88, 632.78), new VSC(53, 2.75, 529.69), new VSC(46, 5.69, 440.83), new VSC(45, 1.67, 202.25), new VSC(42, 5.71, 88.87), new VSC(32, 0.07, 63.74), new VSC(32, 1.67, 302.16), new VSC(31, 4.16, 191.96), new VSC(27, 0.83, 224.34), new VSC(25, 5.66, 735.88), new VSC(20, 5.94, 217.23), new VSC(18, 4.9, 625.67), new VSC(17, 1.63, 742.99), new VSC(16, 0.58, 515.46), new VSC(14, 0.21, 838.97), new VSC(14, 3.76, 195.14), new VSC(12, 4.72, 203), new VSC(12, 0.13, 234.64), new VSC(12, 3.12, 846.08), new VSC(11, 5.92, 536.8), new VSC(11, 5.6, 728.76), new VSC(11, 3.2, 1066.5), new VSC(10, 4.99, 422.67), new VSC(10, 0.26, 330.62), new VSC(10, 4.15, 860.31), new VSC(9, 0.46, 956.29), new VSC(8, 2.14, 269.92), new VSC(8, 5.25, 429.78), new VSC(8, 4.03, 9.56), new VSC(7, 5.4, 1052.27), new VSC(6, 4.46, 284.15), new VSC(6, 5.93, 405.26)];\nconst g_L3SaturnCoefficients = [new VSC(16039, 5.73945, 7.11355), new VSC(4250, 4.5854, 213.2991), new VSC(1907, 4.7608, 220.4126), new VSC(1466, 5.9133, 206.1855), new VSC(1162, 5.6197, 14.2271), new VSC(1067, 3.6082, 426.5982), new VSC(239, 3.861, 433.712), new VSC(237, 5.768, 199.072), new VSC(166, 5.116, 3.181), new VSC(151, 2.736, 639.897), new VSC(131, 4.743, 227.526), new VSC(63, 0.23, 419.48), new VSC(62, 4.74, 103.09), new VSC(40, 5.47, 21.34), new VSC(40, 5.96, 95.98), new VSC(39, 5.83, 110.21), new VSC(28, 3.01, 647.01), new VSC(25, 0.99, 3.93), new VSC(19, 1.92, 853.2), new VSC(18, 4.97, 10.29), new VSC(18, 1.03, 412.37), new VSC(18, 4.2, 216.48), new VSC(18, 3.32, 309.28), new VSC(16, 3.9, 440.83), new VSC(16, 5.62, 117.32), new VSC(13, 1.18, 88.87), new VSC(11, 5.58, 11.05), new VSC(11, 5.93, 191.96), new VSC(10, 3.95, 209.37), new VSC(9, 3.39, 302.16), new VSC(8, 4.88, 323.51), new VSC(7, 0.38, 632.78), new VSC(6, 2.25, 522.58), new VSC(6, 1.06, 210.12), new VSC(5, 4.64, 234.64), new VSC(4, 3.14, 0), new VSC(4, 2.31, 515.46), new VSC(3, 2.2, 860.31), new VSC(3, 0.59, 529.69), new VSC(3, 4.93, 224.34), new VSC(3, 0.42, 625.67), new VSC(2, 4.77, 330.62), new VSC(2, 3.35, 429.78), new VSC(2, 3.2, 202.25), new VSC(2, 1.19, 1066.5), new VSC(2, 1.35, 405.26), new VSC(2, 4.16, 223.59), new VSC(2, 3.07, 654.12)];\nconst g_L4SaturnCoefficients = [new VSC(1662, 3.9983, 7.1135), new VSC(257, 2.984, 220.413), new VSC(236, 3.902, 14.227), new VSC(149, 2.741, 213.299), new VSC(114, 3.142, 0), new VSC(110, 1.515, 206.186), new VSC(68, 1.72, 426.6), new VSC(40, 2.05, 433.71), new VSC(38, 1.24, 199.07), new VSC(31, 3.01, 227.53), new VSC(15, 0.83, 639.9), new VSC(9, 3.71, 21.34), new VSC(6, 2.42, 419.48), new VSC(6, 1.16, 647.01), new VSC(4, 1.45, 95.98), new VSC(4, 2.12, 440.83), new VSC(3, 4.09, 110.21), new VSC(3, 2.77, 412.37), new VSC(3, 3.01, 88.87), new VSC(3, 0, 853.2), new VSC(3, 0.39, 103.09), new VSC(2, 3.78, 117.32), new VSC(2, 2.83, 234.64), new VSC(2, 5.08, 309.28), new VSC(2, 2.24, 216.48), new VSC(2, 5.19, 302.16), new VSC(1, 1.55, 191.96)];\nconst g_L5SaturnCoefficients = [new VSC(124, 2.259, 7.114), new VSC(34, 2.16, 14.23), new VSC(28, 1.2, 220.41), new VSC(6, 1.22, 227.53), new VSC(5, 0.24, 433.71), new VSC(4, 6.23, 426.6), new VSC(3, 2.97, 199.07), new VSC(3, 4.29, 206.19), new VSC(2, 6.25, 213.3), new VSC(1, 5.28, 639.9), new VSC(1, 0.24, 440.83), new VSC(1, 3.14, 0)];\nconst g_B0SaturnCoefficients = [new VSC(4330678, 3.6028443, 213.2990954), new VSC(240348, 2.852385, 426.598191), new VSC(84746, 0, 0), new VSC(34116, 0.57297, 206.18555), new VSC(30863, 3.48442, 220.41264), new VSC(14734, 2.11847, 639.89729), new VSC(9917, 5.79, 419.4846), new VSC(6994, 4.736, 7.1135), new VSC(4808, 5.4331, 316.3919), new VSC(4788, 4.9651, 110.2063), new VSC(3432, 2.7326, 433.7117), new VSC(1506, 6.013, 103.0928), new VSC(1060, 5.631, 529.691), new VSC(969, 5.204, 632.784), new VSC(942, 1.396, 853.196), new VSC(708, 3.803, 323.505), new VSC(552, 5.131, 202.253), new VSC(400, 3.359, 227.526), new VSC(319, 3.626, 209.367), new VSC(316, 1.997, 647.011), new VSC(314, 0.465, 217.231), new VSC(284, 4.886, 224.345), new VSC(236, 2.139, 11.046), new VSC(215, 5.95, 846.083), new VSC(209, 2.12, 415.552), new VSC(207, 0.73, 199.072), new VSC(179, 2.954, 63.736), new VSC(141, 0.644, 490.334), new VSC(139, 4.595, 14.227), new VSC(139, 1.998, 735.877), new VSC(135, 5.245, 742.99), new VSC(122, 3.115, 522.577), new VSC(116, 3.109, 216.48), new VSC(114, 0.963, 210.118)];\nconst g_B1SaturnCoefficients = [new VSC(397555, 5.3329, 213.299095), new VSC(49479, 3.14159, 0), new VSC(18572, 6.09919, 426.59819), new VSC(14801, 2.30586, 206.18555), new VSC(9644, 1.6967, 220.4126), new VSC(3757, 1.2543, 419.4846), new VSC(2717, 5.9117, 639.8973), new VSC(1455, 0.8516, 433.7117), new VSC(1291, 2.9177, 7.1135), new VSC(853, 0.436, 316.392), new VSC(298, 0.919, 632.784), new VSC(292, 5.316, 853.196), new VSC(284, 1.619, 227.526), new VSC(275, 3.889, 103.093), new VSC(172, 0.052, 647.011), new VSC(166, 2.444, 199.072), new VSC(158, 5.209, 110.206), new VSC(128, 1.207, 529.691), new VSC(110, 2.457, 217.231), new VSC(82, 2.76, 210.12), new VSC(81, 2.86, 14.23), new VSC(69, 1.66, 202.25), new VSC(65, 1.26, 216.48), new VSC(61, 1.25, 209.37), new VSC(59, 1.82, 323.51), new VSC(46, 0.82, 440.83), new VSC(36, 1.82, 224.34), new VSC(34, 2.84, 117.32), new VSC(33, 1.31, 412.37), new VSC(32, 1.19, 846.08), new VSC(27, 4.65, 1066.5), new VSC(27, 4.44, 11.05)];\nconst g_B2SaturnCoefficients = [new VSC(20630, 0.50482, 213.2991), new VSC(3720, 3.9983, 206.1855), new VSC(1627, 6.1819, 220.4126), new VSC(1346, 0, 0), new VSC(706, 3.039, 419.485), new VSC(365, 5.099, 426.598), new VSC(330, 5.279, 433.712), new VSC(219, 3.828, 639.897), new VSC(139, 1.043, 7.114), new VSC(104, 6.157, 227.526), new VSC(93, 1.98, 316.39), new VSC(71, 4.15, 199.07), new VSC(52, 2.88, 632.78), new VSC(49, 4.43, 647.01), new VSC(41, 3.16, 853.2), new VSC(29, 4.53, 210.12), new VSC(24, 1.12, 14.23), new VSC(21, 4.35, 217.23), new VSC(20, 5.31, 440.83), new VSC(18, 0.85, 110.21), new VSC(17, 5.68, 216.48), new VSC(16, 4.26, 103.09), new VSC(14, 3, 412.37), new VSC(12, 2.53, 529.69), new VSC(8, 3.32, 202.25), new VSC(7, 5.56, 209.37), new VSC(7, 0.29, 323.51), new VSC(6, 1.16, 117.32), new VSC(6, 3.61, 869.31)];\nconst g_B3SaturnCoefficients = [new VSC(666, 1.99, 213.299), new VSC(632, 5.698, 206.186), new VSC(398, 0, 0), new VSC(188, 4.338, 220.413), new VSC(92, 4.84, 419.48), new VSC(52, 3.42, 433.71), new VSC(42, 2.38, 426.6), new VSC(26, 4.4, 227.53), new VSC(21, 5.85, 199.07), new VSC(18, 1.99, 639.9), new VSC(11, 5.37, 7.11), new VSC(10, 2.55, 647.01), new VSC(7, 3.46, 316.39), new VSC(6, 4.8, 632.78), new VSC(6, 0.02, 210.12), new VSC(6, 3.52, 440.83), new VSC(5, 5.64, 14.23), new VSC(5, 1.22, 853.2), new VSC(4, 4.71, 412.37), new VSC(3, 0.63, 103.09), new VSC(2, 3.72, 216.48)];\nconst g_B4SaturnCoefficients = [new VSC(80, 1.12, 206.19), new VSC(32, 3.12, 213.3), new VSC(17, 2.48, 220.41), new VSC(12, 3.14, 0), new VSC(9, 0.38, 419.48), new VSC(6, 1.56, 433.71), new VSC(5, 2.63, 227.53), new VSC(5, 1.28, 199.07), new VSC(1, 1.43, 426.6), new VSC(1, 0.67, 647.01), new VSC(1, 1.72, 440.83), new VSC(1, 6.18, 639.9)];\nconst g_B5SaturnCoefficients = [new VSC(8, 2.82, 206.19), new VSC(1, 0.51, 220.41)];\nconst g_R0SaturnCoefficients = [new VSC(955758136, 0, 0), new VSC(52921382, 2.3922622, 213.29909544), new VSC(1873680, 5.2354961, 206.1855484), new VSC(1464664, 1.6476305, 426.5981909), new VSC(821891, 5.9352, 316.39187), new VSC(547507, 5.015326, 103.092774), new VSC(371684, 2.271148, 220.412642), new VSC(361778, 3.139043, 7.113547), new VSC(140618, 5.704067, 632.783739), new VSC(108975, 3.293136, 110.206321), new VSC(69007, 5.941, 419.48464), new VSC(61053, 0.94038, 639.89729), new VSC(48913, 1.55733, 202.2534), new VSC(34144, 0.19519, 277.03499), new VSC(32402, 5.47085, 949.17561), new VSC(20937, 0.46349, 735.87651), new VSC(20839, 1.52103, 433.71174), new VSC(20747, 5.33256, 199.072), new VSC(15298, 3.05944, 529.69097), new VSC(14296, 2.60434, 323.50542), new VSC(12884, 1.64892, 138.5175), new VSC(11993, 5.98051, 846.08283), new VSC(11380, 1.73106, 522.57742), new VSC(9796, 5.2048, 1265.5675), new VSC(7753, 5.8519, 95.9792), new VSC(6771, 3.0043, 14.2271), new VSC(6466, 0.1773, 1052.2684), new VSC(5850, 1.4552, 415.5525), new VSC(5307, 0.5974, 63.7359), new VSC(4696, 2.1492, 227.5262), new VSC(4044, 1.6401, 209.3669), new VSC(3688, 0.7802, 412.3711), new VSC(3461, 1.8509, 175.1661), new VSC(3420, 4.9455, 1581.9593), new VSC(3401, 0.5539, 350.3321), new VSC(3376, 3.6953, 224.3448), new VSC(2976, 5.6847, 210.1177), new VSC(2885, 1.3876, 838.9693), new VSC(2881, 0.1796, 853.1964), new VSC(2508, 3.5385, 742.9901), new VSC(2448, 6.1841, 1368.6603), new VSC(2406, 2.9656, 117.3199), new VSC(2174, 0.0151, 340.7709), new VSC(2024, 5.0541, 11.0457)];\nconst g_R1SaturnCoefficients = [new VSC(6182981, 0.2584352, 213.2990954), new VSC(506578, 0.711147, 206.185548), new VSC(341394, 5.796358, 426.598191), new VSC(188491, 0.472157, 220.412642), new VSC(186262, 3.141593, 0), new VSC(143891, 1.407449, 7.113547), new VSC(49621, 6.01744, 103.09277), new VSC(20928, 5.09246, 639.89729), new VSC(19953, 1.1756, 419.48464), new VSC(18840, 1.6082, 110.20632), new VSC(13877, 0.75886, 199.072), new VSC(12893, 5.9433, 433.71174), new VSC(5397, 1.2885, 14.2271), new VSC(4869, 0.8679, 323.5054), new VSC(4247, 0.393, 227.5262), new VSC(3252, 1.2585, 95.9792), new VSC(3081, 3.4366, 522.5774), new VSC(2909, 4.6068, 202.2534), new VSC(2856, 2.1673, 735.8765), new VSC(1988, 2.4505, 412.3711), new VSC(1941, 6.0239, 209.3669), new VSC(1581, 1.2919, 210.1177), new VSC(1340, 4.308, 853.1964), new VSC(1316, 1.253, 117.3199), new VSC(1203, 1.8665, 316.3919), new VSC(1091, 0.0753, 216.4805), new VSC(966, 0.48, 632.784), new VSC(954, 5.152, 647.011), new VSC(898, 0.983, 529.691), new VSC(882, 1.885, 1052.268), new VSC(874, 1.402, 224.345), new VSC(785, 3.064, 838.969), new VSC(740, 1.382, 625.67), new VSC(658, 4.144, 309.278), new VSC(650, 1.725, 742.99), new VSC(613, 3.033, 63.736), new VSC(599, 2.549, 217.231), new VSC(503, 2.13, 3.932)];\nconst g_R2SaturnCoefficients = [new VSC(436902, 4.786717, 213.299095), new VSC(71923, 2.5007, 206.18555), new VSC(49767, 4.97168, 220.41264), new VSC(43221, 3.8694, 426.59819), new VSC(29646, 5.9631, 7.11355), new VSC(4721, 2.4753, 199.072), new VSC(4142, 4.1067, 433.7117), new VSC(3789, 3.0977, 639.8973), new VSC(2964, 1.3721, 103.0928), new VSC(2556, 2.8507, 419.4846), new VSC(2327, 0, 0), new VSC(2208, 6.2759, 110.2063), new VSC(2188, 5.8555, 14.2271), new VSC(1957, 4.9245, 227.5262), new VSC(924, 5.464, 323.505), new VSC(706, 2.971, 95.979), new VSC(546, 4.129, 412.371), new VSC(431, 5.178, 522.577), new VSC(405, 4.173, 209.367), new VSC(391, 4.481, 216.48), new VSC(374, 5.834, 117.32), new VSC(361, 3.277, 647.011), new VSC(356, 3.192, 210.118), new VSC(326, 2.269, 853.196), new VSC(207, 4.022, 735.877), new VSC(204, 0.088, 202.253), new VSC(180, 3.597, 632.784), new VSC(178, 4.097, 440.825), new VSC(154, 3.135, 625.67), new VSC(148, 0.136, 302.165), new VSC(133, 2.594, 191.958), new VSC(132, 5.933, 309.278)];\nconst g_R3SaturnCoefficients = [new VSC(20315, 3.02187, 213.2991), new VSC(8924, 3.1914, 220.4126), new VSC(6909, 4.3517, 206.1855), new VSC(4087, 4.2241, 7.1135), new VSC(3879, 2.0106, 426.5982), new VSC(1071, 4.2036, 199.072), new VSC(907, 2.283, 433.712), new VSC(606, 3.175, 227.526), new VSC(597, 4.135, 14.227), new VSC(483, 1.173, 639.897), new VSC(393, 0, 0), new VSC(229, 4.698, 419.485), new VSC(188, 4.59, 110.206), new VSC(150, 3.202, 103.093), new VSC(121, 3.768, 323.505), new VSC(102, 4.71, 95.979), new VSC(101, 5.819, 412.371), new VSC(93, 1.44, 647.01), new VSC(84, 2.63, 216.48), new VSC(73, 4.15, 117.32), new VSC(62, 2.31, 440.83), new VSC(55, 0.31, 853.2), new VSC(50, 2.39, 209.37), new VSC(45, 4.37, 191.96), new VSC(41, 0.69, 522.58), new VSC(40, 1.84, 302.16), new VSC(38, 5.94, 88.87), new VSC(32, 4.01, 21.34)];\nconst g_R4SaturnCoefficients = [new VSC(1202, 1.415, 220.4126), new VSC(708, 1.162, 213.299), new VSC(516, 6.24, 206.186), new VSC(427, 2.469, 7.114), new VSC(268, 0.187, 426.598), new VSC(170, 5.959, 199.072), new VSC(150, 0.48, 433.712), new VSC(145, 1.442, 227.526), new VSC(121, 2.405, 14.227), new VSC(47, 5.57, 639.9), new VSC(19, 5.86, 647.01), new VSC(17, 0.53, 440.83), new VSC(16, 2.9, 110.21), new VSC(15, 0.3, 419.48), new VSC(14, 1.3, 412.37), new VSC(13, 2.09, 323.51), new VSC(11, 0.22, 95.98), new VSC(11, 2.46, 117.32), new VSC(10, 3.14, 0), new VSC(9, 1.56, 88.87), new VSC(9, 2.28, 21.34), new VSC(9, 0.68, 216.48), new VSC(8, 1.27, 234.64)];\nconst g_R5SaturnCoefficients = [new VSC(129, 5.913, 220.413), new VSC(32, 0.69, 7.11), new VSC(27, 5.91, 227.53), new VSC(20, 4.95, 433.71), new VSC(20, 0.67, 14.23), new VSC(14, 2.67, 206.19), new VSC(14, 1.46, 199.07), new VSC(13, 4.59, 426.6), new VSC(7, 4.63, 213.3), new VSC(5, 3.61, 639.9), new VSC(4, 4.9, 440.83), new VSC(3, 4.07, 647.01), new VSC(3, 4.66, 191.96), new VSC(3, 0.49, 323.51), new VSC(3, 3.18, 419.48), new VSC(2, 3.7, 88.87), new VSC(2, 3.32, 95.98), new VSC(2, 0.56, 117.32)];\n\n\n// CAASaturn\n\nexport function CAASaturn() { }\n\nCAASaturn.eclipticLongitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var rho5 = rho4 * rho;\n    var nL0Coefficients = g_L0SaturnCoefficients.length;\n    var L0 = 0;\n    var i;\n    for (i = 0; i < nL0Coefficients; i++) {\n        L0 += g_L0SaturnCoefficients[i].a * Math.cos(g_L0SaturnCoefficients[i].b + g_L0SaturnCoefficients[i].c * rho);\n    }\n    var nL1Coefficients = g_L1SaturnCoefficients.length;\n    var L1 = 0;\n    for (i = 0; i < nL1Coefficients; i++) {\n        L1 += g_L1SaturnCoefficients[i].a * Math.cos(g_L1SaturnCoefficients[i].b + g_L1SaturnCoefficients[i].c * rho);\n    }\n    var nL2Coefficients = g_L2SaturnCoefficients.length;\n    var L2 = 0;\n    for (i = 0; i < nL2Coefficients; i++) {\n        L2 += g_L2SaturnCoefficients[i].a * Math.cos(g_L2SaturnCoefficients[i].b + g_L2SaturnCoefficients[i].c * rho);\n    }\n    var nL3Coefficients = g_L3SaturnCoefficients.length;\n    var L3 = 0;\n    for (i = 0; i < nL3Coefficients; i++) {\n        L3 += g_L3SaturnCoefficients[i].a * Math.cos(g_L3SaturnCoefficients[i].b + g_L3SaturnCoefficients[i].c * rho);\n    }\n    var nL4Coefficients = g_L4SaturnCoefficients.length;\n    var L4 = 0;\n    for (i = 0; i < nL4Coefficients; i++) {\n        L4 += g_L4SaturnCoefficients[i].a * Math.cos(g_L4SaturnCoefficients[i].b + g_L4SaturnCoefficients[i].c * rho);\n    }\n    var nL5Coefficients = g_L5SaturnCoefficients.length;\n    var L5 = 0;\n    for (i = 0; i < nL5Coefficients; i++) {\n        L5 += g_L5SaturnCoefficients[i].a * Math.cos(g_L5SaturnCoefficients[i].b + g_L5SaturnCoefficients[i].c * rho);\n    }\n    var vvalue = (L0 + L1 * rho + L2 * rhosquared + L3 * rhocubed + L4 * rho4 + L5 * rho5) / 100000000;\n    vvalue = CT.m360(CT.r2D(vvalue));\n    return vvalue;\n};\n\nCAASaturn.eclipticLatitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var rho5 = rho4 * rho;\n    var nB0Coefficients = g_B0SaturnCoefficients.length;\n    var B0 = 0;\n    var i;\n    for (i = 0; i < nB0Coefficients; i++) {\n        B0 += g_B0SaturnCoefficients[i].a * Math.cos(g_B0SaturnCoefficients[i].b + g_B0SaturnCoefficients[i].c * rho);\n    }\n    var nB1Coefficients = g_B1SaturnCoefficients.length;\n    var B1 = 0;\n    for (i = 0; i < nB1Coefficients; i++) {\n        B1 += g_B1SaturnCoefficients[i].a * Math.cos(g_B1SaturnCoefficients[i].b + g_B1SaturnCoefficients[i].c * rho);\n    }\n    var nB2Coefficients = g_B2SaturnCoefficients.length;\n    var B2 = 0;\n    for (i = 0; i < nB2Coefficients; i++) {\n        B2 += g_B2SaturnCoefficients[i].a * Math.cos(g_B2SaturnCoefficients[i].b + g_B2SaturnCoefficients[i].c * rho);\n    }\n    var nB3Coefficients = g_B3SaturnCoefficients.length;\n    var B3 = 0;\n    for (i = 0; i < nB3Coefficients; i++) {\n        B3 += g_B3SaturnCoefficients[i].a * Math.cos(g_B3SaturnCoefficients[i].b + g_B3SaturnCoefficients[i].c * rho);\n    }\n    var nB4Coefficients = g_B4SaturnCoefficients.length;\n    var B4 = 0;\n    for (i = 0; i < nB4Coefficients; i++) {\n        B4 += g_B4SaturnCoefficients[i].a * Math.cos(g_B4SaturnCoefficients[i].b + g_B4SaturnCoefficients[i].c * rho);\n    }\n    var nB5Coefficients = g_B5SaturnCoefficients.length;\n    var B5 = 0;\n    for (i = 0; i < nB5Coefficients; i++) {\n        B5 += g_B5SaturnCoefficients[i].a * Math.cos(g_B5SaturnCoefficients[i].b + g_B5SaturnCoefficients[i].c * rho);\n    }\n    var vvalue = (B0 + B1 * rho + B2 * rhosquared + B3 * rhocubed + B4 * rho4 + B5 * rho5) / 100000000;\n    vvalue = CT.r2D(vvalue);\n    return vvalue;\n};\n\nCAASaturn.radiusVector = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var rho5 = rho4 * rho;\n    var nR0Coefficients = g_R0SaturnCoefficients.length;\n    var R0 = 0;\n    var i;\n    for (i = 0; i < nR0Coefficients; i++) {\n        R0 += g_R0SaturnCoefficients[i].a * Math.cos(g_R0SaturnCoefficients[i].b + g_R0SaturnCoefficients[i].c * rho);\n    }\n    var nR1Coefficients = g_R1SaturnCoefficients.length;\n    var R1 = 0;\n    for (i = 0; i < nR1Coefficients; i++) {\n        R1 += g_R1SaturnCoefficients[i].a * Math.cos(g_R1SaturnCoefficients[i].b + g_R1SaturnCoefficients[i].c * rho);\n    }\n    var nR2Coefficients = g_R2SaturnCoefficients.length;\n    var R2 = 0;\n    for (i = 0; i < nR2Coefficients; i++) {\n        R2 += g_R2SaturnCoefficients[i].a * Math.cos(g_R2SaturnCoefficients[i].b + g_R2SaturnCoefficients[i].c * rho);\n    }\n    var nR3Coefficients = g_R3SaturnCoefficients.length;\n    var R3 = 0;\n    for (i = 0; i < nR3Coefficients; i++) {\n        R3 += g_R3SaturnCoefficients[i].a * Math.cos(g_R3SaturnCoefficients[i].b + g_R3SaturnCoefficients[i].c * rho);\n    }\n    var nR4Coefficients = g_R4SaturnCoefficients.length;\n    var R4 = 0;\n    for (i = 0; i < nR4Coefficients; i++) {\n        R4 += g_R4SaturnCoefficients[i].a * Math.cos(g_R4SaturnCoefficients[i].b + g_R4SaturnCoefficients[i].c * rho);\n    }\n    var nR5Coefficients = g_R5SaturnCoefficients.length;\n    var R5 = 0;\n    for (i = 0; i < nR5Coefficients; i++) {\n        R5 += g_R5SaturnCoefficients[i].a * Math.cos(g_R5SaturnCoefficients[i].b + g_R5SaturnCoefficients[i].c * rho);\n    }\n    return (R0 + R1 * rho + R2 * rhosquared + R3 * rhocubed + R4 * rho4 + R5 * rho5) / 100000000;\n};\n\nvar CAASaturn$ = {};\n\nregisterType(\"CAASaturn\", [CAASaturn, CAASaturn$, null]);\n","// Originally `AASATURNRINGS.CPP`\n// \"Purpose: Implementation for the algorithms which calculate various parameters related to the Rings of Saturn\"\n// Last update of original: PJN / 08-01-2004\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { CAAFK5 } from \"./fk5.js\";\nimport { ELL } from \"./elliptical.js\";\nimport { CAANutation } from \"./nutation.js\";\nimport { CAAEarth } from \"./earth.js\";\nimport { CAASaturn } from \"./saturn.js\";\n\n// CAASaturnRingDetails\n\nexport function CAASaturnRingDetails() {\n    this.b = 0;\n    this.bdash = 0;\n    this.p = 0;\n    this.a = 0;\n    this.b = 0;\n    this.deltaU = 0;\n    this.b = 0;\n    this.bdash = 0;\n    this.p = 0;\n    this.a = 0;\n    this.b = 0;\n    this.deltaU = 0;\n}\n\nvar CAASaturnRingDetails$ = {};\n\nregisterType(\"CAASaturnRingDetails\", [CAASaturnRingDetails, CAASaturnRingDetails$, null]);\n\n\n// CAASaturnRings\n\nexport function CAASaturnRings() { }\n\nCAASaturnRings.calculate = function (JD) {\n    var details = new CAASaturnRingDetails();\n    var T = (JD - 2451545) / 36525;\n    var T2 = T * T;\n    var i = 28.075216 - 0.012998 * T + 4E-06 * T2;\n    var irad = CT.d2R(i);\n    var omega = 169.50847 + 1.394681 * T + 0.000412 * T2;\n    var omegarad = CT.d2R(omega);\n    var l0 = CAAEarth.eclipticLongitude(JD);\n    var b0 = CAAEarth.eclipticLatitude(JD);\n    l0 += CAAFK5.correctionInLongitude(l0, b0, JD);\n    var l0rad = CT.d2R(l0);\n    b0 += CAAFK5.correctionInLatitude(l0, JD);\n    var b0rad = CT.d2R(b0);\n    var R = CAAEarth.radiusVector(JD);\n    var DELTA = 9;\n    var PreviousEarthLightTravelTime = 0;\n    var EarthLightTravelTime = ELL.distanceToLightTime(DELTA);\n    var JD1 = JD - EarthLightTravelTime;\n    var bIterate = true;\n    var x = 0;\n    var y = 0;\n    var z = 0;\n    var l = 0;\n    var b = 0;\n    var r = 0;\n    while (bIterate) {\n        l = CAASaturn.eclipticLongitude(JD1);\n        b = CAASaturn.eclipticLatitude(JD1);\n        l += CAAFK5.correctionInLongitude(l, b, JD1);\n        b += CAAFK5.correctionInLatitude(l, JD1);\n        var lrad = CT.d2R(l);\n        var brad = CT.d2R(b);\n        r = CAASaturn.radiusVector(JD1);\n        x = r * Math.cos(brad) * Math.cos(lrad) - R * Math.cos(l0rad);\n        y = r * Math.cos(brad) * Math.sin(lrad) - R * Math.sin(l0rad);\n        z = r * Math.sin(brad) - R * Math.sin(b0rad);\n        DELTA = Math.sqrt(x * x + y * y + z * z);\n        EarthLightTravelTime = ELL.distanceToLightTime(DELTA);\n        bIterate = (Math.abs(EarthLightTravelTime - PreviousEarthLightTravelTime) > 2E-06);\n        if (bIterate) {\n            JD1 = JD - EarthLightTravelTime;\n            PreviousEarthLightTravelTime = EarthLightTravelTime;\n        }\n    }\n    var lambda = Math.atan2(y, x);\n    var beta = Math.atan2(z, Math.sqrt(x * x + y * y));\n    details.b = Math.asin(Math.sin(irad) * Math.cos(beta) * Math.sin(lambda - omegarad) - Math.cos(irad) * Math.sin(beta));\n    details.a = 375.35 / DELTA;\n    details.b = details.a * Math.sin(Math.abs(details.b));\n    details.b = CT.r2D(details.b);\n    var N = 113.6655 + 0.8771 * T;\n    var Nrad = CT.d2R(N);\n    var ldash = l - 0.01759 / r;\n    var ldashrad = CT.d2R(ldash);\n    var bdash = b - 0.000764 * Math.cos(ldashrad - Nrad) / r;\n    var bdashrad = CT.d2R(bdash);\n    details.bdash = CT.r2D(Math.asin(Math.sin(irad) * Math.cos(bdashrad) * Math.sin(ldashrad - omegarad) - Math.cos(irad) * Math.sin(bdashrad)));\n    var U1 = Math.atan2(Math.sin(irad) * Math.sin(bdashrad) + Math.cos(irad) * Math.cos(bdashrad) * Math.sin(ldashrad - omegarad), Math.cos(bdashrad) * Math.cos(ldashrad - omegarad));\n    var U2 = Math.atan2(Math.sin(irad) * Math.sin(beta) + Math.cos(irad) * Math.cos(beta) * Math.sin(lambda - omegarad), Math.cos(beta) * Math.cos(lambda - omegarad));\n    details.deltaU = CT.r2D(Math.abs(U1 - U2));\n    var Obliquity = CAANutation.trueObliquityOfEcliptic(JD);\n    var NutationInLongitude = CAANutation.nutationInLongitude(JD);\n    var lambda0 = omega - 90;\n    var beta0 = 90 - i;\n    lambda += CT.d2R(0.005693 * Math.cos(l0rad - lambda) / Math.cos(beta));\n    beta += CT.d2R(0.005693 * Math.sin(l0rad - lambda) * Math.sin(beta));\n    lambda = CT.r2D(lambda);\n    lambda += NutationInLongitude / 3600;\n    lambda = CT.m360(lambda);\n    lambda0 += NutationInLongitude / 3600;\n    lambda0 = CT.m360(lambda0);\n    beta = CT.r2D(beta);\n    var GeocentricEclipticSaturn = CT.ec2Eq(lambda, beta, Obliquity);\n    var alpha = CT.h2R(GeocentricEclipticSaturn.x);\n    var delta = CT.d2R(GeocentricEclipticSaturn.y);\n    var GeocentricEclipticNorthPole = CT.ec2Eq(lambda0, beta0, Obliquity);\n    var alpha0 = CT.h2R(GeocentricEclipticNorthPole.x);\n    var delta0 = CT.d2R(GeocentricEclipticNorthPole.y);\n    details.p = CT.r2D(Math.atan2(Math.cos(delta0) * Math.sin(alpha0 - alpha), Math.sin(delta0) * Math.cos(delta) - Math.cos(delta0) * Math.sin(delta) * Math.cos(alpha0 - alpha)));\n    return details;\n};\n\nvar CAASaturnRings$ = {};\n\nregisterType(\"CAASaturnRings\", [CAASaturnRings, CAASaturnRings$, null]);\n","// Originally `AASIDEREAL.CPP`\n// \"Purpose: Implementation for the algorithms which obtain sidereal time\"\n// Last update of original: PJN / 28-01-2007\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { ss } from \"../ss.js\";\nimport { DT } from \"./date.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { CAANutation } from \"./nutation.js\";\n\n\n// CAASidereal\n\nexport function CAASidereal() { }\n\nCAASidereal.meanGreenwichSiderealTime = function (JD) {\n    var date = new DT();\n    date.setJD(JD, DT.afterPapalReformJD(JD));\n    var D = date.get();\n    var Year = ss.truncate(D[0]);\n    var Month = ss.truncate(D[1]);\n    var Day = ss.truncate(D[2]);\n    var Hour = ss.truncate(D[3]);\n    var Minute = ss.truncate(D[4]);\n    var Second = D[5];\n    date.set(Year, Month, Day, 0, 0, 0, date.inGregorianCalendar());\n    var JDMidnight = date.julian();\n    var T = (JDMidnight - 2451545) / 36525;\n    var TSquared = T * T;\n    var TCubed = TSquared * T;\n    var Value = 100.46061837 + (36000.770053608 * T) + (0.000387933 * TSquared) - (TCubed / 38710000);\n    Value += (((Hour * 15) + (Minute * 0.25) + (Second * 0.00416666666666667)) * 1.00273790935);\n    Value = CT.d2H(Value);\n    return CT.m24(Value);\n};\n\nCAASidereal.apparentGreenwichSiderealTime = function (JD) {\n    var MeanObliquity = CAANutation.meanObliquityOfEcliptic(JD);\n    var TrueObliquity = MeanObliquity + CAANutation.nutationInObliquity(JD) / 3600;\n    var NutationInLongitude = CAANutation.nutationInLongitude(JD);\n    var Value = CAASidereal.meanGreenwichSiderealTime(JD) + (NutationInLongitude * Math.cos(CT.d2R(TrueObliquity)) / 54000);\n    return CT.m24(Value);\n};\n\nvar CAASidereal$ = {};\n\nregisterType(\"CAASidereal\", [CAASidereal, CAASidereal$, null]);\n","// Originally `AASTELLARMAGNITUDES.CPP`\n// \"Purpose: Implementation for the algorithms which operate on the stellar magntidue system\"\n// Last update of original: PJN / 12-02-2004\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { Util } from \"../baseutil.js\";\n\n\n// CAAStellarMagnitudes\n\nexport function CAAStellarMagnitudes() { }\n\nCAAStellarMagnitudes.combinedMagnitude = function (m1, m2) {\n    var x = 0.4 * (m2 - m1);\n    return m2 - 2.5 * Util.log10(Math.pow(10, x) + 1);\n};\n\nCAAStellarMagnitudes.combinedMagnitude2 = function (Magnitudes, pMagnitudes) {\n    var vvalue = 0;\n    for (var i = 0; i < Magnitudes; i++) {\n        vvalue += Math.pow(10, -0.4 * pMagnitudes[i]);\n    }\n    return -2.5 * Util.log10(vvalue);\n};\n\nCAAStellarMagnitudes.brightnessRatio = function (m1, m2) {\n    var x = 0.4 * (m2 - m1);\n    return Math.pow(10, x);\n};\n\nCAAStellarMagnitudes.magnitudeDifference = function (brightnessRatio) {\n    return 2.5 * Util.log10(brightnessRatio);\n};\n\nvar CAAStellarMagnitudes$ = {};\n\nregisterType(\"CAAStellarMagnitudes\", [CAAStellarMagnitudes, CAAStellarMagnitudes$, null]);\n","// Originally `AASUN.CPP`\n// \"Purpose: Implementation for the algorithms which calculate the position of Earth\"\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { C3D, CT } from \"./coordinate_transformation.js\";\nimport { CAAEarth } from \"./earth.js\";\nimport { CAAFK5 } from \"./fk5.js\";\nimport { CAANutation } from \"./nutation.js\";\n\n// CAASun\n\nexport function CAASun() { }\n\nCAASun.geometricEclipticLongitude = function (JD) {\n    return CT.m360(CAAEarth.eclipticLongitude(JD) + 180);\n};\n\nCAASun.geometricEclipticLatitude = function (JD) {\n    return -CAAEarth.eclipticLatitude(JD);\n};\n\nCAASun.geometricEclipticLongitudeJ2000 = function (JD) {\n    return CT.m360(CAAEarth.eclipticLongitudeJ2000(JD) + 180);\n};\n\nCAASun.geometricEclipticLatitudeJ2000 = function (JD) {\n    return -CAAEarth.eclipticLatitudeJ2000(JD);\n};\n\nCAASun.geometricFK5EclipticLongitude = function (JD) {\n    var Longitude = CAASun.geometricEclipticLongitude(JD);\n    var Latitude = CAASun.geometricEclipticLatitude(JD);\n    Longitude += CAAFK5.correctionInLongitude(Longitude, Latitude, JD);\n    return Longitude;\n};\n\nCAASun.geometricFK5EclipticLatitude = function (JD) {\n    var Longitude = CAASun.geometricEclipticLongitude(JD);\n    var Latitude = CAASun.geometricEclipticLatitude(JD);\n    var SunLatCorrection = CAAFK5.correctionInLatitude(Longitude, JD);\n    Latitude += SunLatCorrection;\n    return Latitude;\n};\n\nCAASun.apparentEclipticLongitude = function (JD) {\n    var Longitude = CAASun.geometricFK5EclipticLongitude(JD);\n    Longitude += CT.dmS2D(0, 0, CAANutation.nutationInLongitude(JD));\n    var R = CAAEarth.radiusVector(JD);\n    Longitude -= CT.dmS2D(0, 0, 20.4898 / R);\n    return Longitude;\n};\n\nCAASun.apparentEclipticLatitude = function (JD) {\n    return CAASun.geometricFK5EclipticLatitude(JD);\n};\n\nCAASun.eclipticRectangularCoordinatesMeanEquinox = function (JD) {\n    var Longitude = CT.d2R(CAASun.geometricFK5EclipticLongitude(JD));\n    var Latitude = CT.d2R(CAASun.geometricFK5EclipticLatitude(JD));\n    var R = CAAEarth.radiusVector(JD);\n    var epsilon = CT.d2R(CAANutation.meanObliquityOfEcliptic(JD));\n    var vvalue = new C3D();\n    vvalue.x = R * Math.cos(Latitude) * Math.cos(Longitude);\n    vvalue.y = R * (Math.cos(Latitude) * Math.sin(Longitude) * Math.cos(epsilon) - Math.sin(Latitude) * Math.sin(epsilon));\n    vvalue.z = R * (Math.cos(Latitude) * Math.sin(Longitude) * Math.sin(epsilon) + Math.sin(Latitude) * Math.cos(epsilon));\n    return vvalue;\n};\n\nCAASun.eclipticRectangularCoordinatesJ2000 = function (JD) {\n    var Longitude = CAASun.geometricEclipticLongitudeJ2000(JD);\n    Longitude = CT.d2R(Longitude);\n    var Latitude = CAASun.geometricEclipticLatitudeJ2000(JD);\n    Latitude = CT.d2R(Latitude);\n    var R = CAAEarth.radiusVector(JD);\n    var vvalue = new C3D();\n    var coslatitude = Math.cos(Latitude);\n    vvalue.x = R * coslatitude * Math.cos(Longitude);\n    vvalue.y = R * coslatitude * Math.sin(Longitude);\n    vvalue.z = R * Math.sin(Latitude);\n    return vvalue;\n};\n\nCAASun.equatorialRectangularCoordinatesJ2000 = function (JD) {\n    var vvalue = CAASun.eclipticRectangularCoordinatesJ2000(JD);\n    vvalue = CAAFK5.convertVSOPToFK5J2000(vvalue);\n    return vvalue;\n};\n\nCAASun.equatorialRectangularCoordinatesB1950 = function (JD) {\n    var vvalue = CAASun.eclipticRectangularCoordinatesJ2000(JD);\n    vvalue = CAAFK5.convertVSOPToFK5B1950(vvalue);\n    return vvalue;\n};\n\nCAASun.equatorialRectangularCoordinatesAnyEquinox = function (JD, JDEquinox) {\n    var vvalue = CAASun.equatorialRectangularCoordinatesJ2000(JD);\n    vvalue = CAAFK5.convertVSOPToFK5AnyEquinox(vvalue, JDEquinox);\n    return vvalue;\n};\n\nvar CAASun$ = {};\n\nregisterType(\"CAASun\", [CAASun, CAASun$, null]);\n","// Originally `AAURANUS.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the heliocentric position of Uranus\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { VSC } from \"./earth.js\";\n\n\n// Coefficients\n\nconst g_L0UranusCoefficients = [new VSC(548129294, 0, 0), new VSC(9260408, 0.8910642, 74.7815986), new VSC(1504248, 3.6271926, 1.4844727), new VSC(365982, 1.899622, 73.297126), new VSC(272328, 3.358237, 149.563197), new VSC(70328, 5.39254, 63.7359), new VSC(68893, 6.09292, 76.26607), new VSC(61999, 2.26952, 2.96895), new VSC(61951, 2.85099, 11.0457), new VSC(26469, 3.14152, 71.81265), new VSC(25711, 6.1138, 454.90937), new VSC(21079, 4.36059, 148.07872), new VSC(17819, 1.74437, 36.64856), new VSC(14613, 4.73732, 3.93215), new VSC(11163, 5.82682, 224.3448), new VSC(10998, 0.48865, 138.5175), new VSC(9527, 2.9552, 35.1641), new VSC(7546, 5.2363, 109.9457), new VSC(4220, 3.2333, 70.8494), new VSC(4052, 2.2775, 151.0477), new VSC(3490, 5.4831, 146.5943), new VSC(3355, 1.0655, 4.4534), new VSC(3144, 4.752, 77.7505), new VSC(2927, 4.629, 9.5612), new VSC(2922, 5.3524, 85.8273), new VSC(2273, 4.366, 70.3282), new VSC(2149, 0.6075, 38.133), new VSC(2051, 1.5177, 0.1119), new VSC(1992, 4.9244, 277.035), new VSC(1667, 3.6274, 380.1278), new VSC(1533, 2.5859, 52.6902), new VSC(1376, 2.0428, 65.2204), new VSC(1372, 4.1964, 111.4302), new VSC(1284, 3.1135, 202.2534), new VSC(1282, 0.5427, 222.8603), new VSC(1244, 0.9161, 2.4477), new VSC(1221, 0.199, 108.4612), new VSC(1151, 4.179, 33.6796), new VSC(1150, 0.9334, 3.1814), new VSC(1090, 1.775, 12.5302), new VSC(1072, 0.2356, 62.2514), new VSC(946, 1.192, 127.472), new VSC(708, 5.183, 213.299), new VSC(653, 0.966, 78.714), new VSC(628, 0.182, 984.6), new VSC(607, 5.432, 529.691), new VSC(559, 3.358, 0.521), new VSC(524, 2.013, 299.126), new VSC(483, 2.106, 0.963), new VSC(471, 1.407, 184.727), new VSC(467, 0.415, 145.11), new VSC(434, 5.521, 183.243), new VSC(405, 5.987, 8.077), new VSC(399, 0.338, 415.552), new VSC(396, 5.87, 351.817), new VSC(379, 2.35, 56.622), new VSC(310, 5.833, 145.631), new VSC(300, 5.644, 22.091), new VSC(294, 5.839, 39.618), new VSC(252, 1.637, 221.376), new VSC(249, 4.746, 225.829), new VSC(239, 2.35, 137.033), new VSC(224, 0.516, 84.343), new VSC(223, 2.843, 0.261), new VSC(220, 1.922, 67.668), new VSC(217, 6.142, 5.938), new VSC(216, 4.778, 340.771), new VSC(208, 5.58, 68.844), new VSC(202, 1.297, 0.048), new VSC(199, 0.956, 152.532), new VSC(194, 1.888, 456.394), new VSC(193, 0.916, 453.425), new VSC(187, 1.319, 0.16), new VSC(182, 3.536, 79.235), new VSC(173, 1.539, 160.609), new VSC(172, 5.68, 219.891), new VSC(170, 3.677, 5.417), new VSC(169, 5.879, 18.159), new VSC(165, 1.424, 106.977), new VSC(163, 3.05, 112.915), new VSC(158, 0.738, 54.175), new VSC(147, 1.263, 59.804), new VSC(143, 1.3, 35.425), new VSC(139, 5.386, 32.195), new VSC(139, 4.26, 909.819), new VSC(124, 1.374, 7.114), new VSC(110, 2.027, 554.07), new VSC(109, 5.706, 77.963), new VSC(104, 5.028, 0.751), new VSC(104, 1.458, 24.379), new VSC(103, 0.681, 14.978)];\nconst g_L1UranusCoefficients = [new VSC(7502543122, 0, 0), new VSC(154458, 5.242017, 74.781599), new VSC(24456, 1.71256, 1.48447), new VSC(9258, 0.4284, 11.0457), new VSC(8266, 1.5022, 63.7359), new VSC(7842, 1.3198, 149.5632), new VSC(3899, 0.4648, 3.9322), new VSC(2284, 4.1737, 76.2661), new VSC(1927, 0.5301, 2.9689), new VSC(1233, 1.5863, 70.8494), new VSC(791, 5.436, 3.181), new VSC(767, 1.996, 73.297), new VSC(482, 2.984, 85.827), new VSC(450, 4.138, 138.517), new VSC(446, 3.723, 224.345), new VSC(427, 4.731, 71.813), new VSC(354, 2.583, 148.079), new VSC(348, 2.454, 9.561), new VSC(317, 5.579, 52.69), new VSC(206, 2.363, 2.448), new VSC(189, 4.202, 56.622), new VSC(184, 0.284, 151.048), new VSC(180, 5.684, 12.53), new VSC(171, 3.001, 78.714), new VSC(158, 2.909, 0.963), new VSC(155, 5.591, 4.453), new VSC(154, 4.652, 35.164), new VSC(152, 2.942, 77.751), new VSC(143, 2.59, 62.251), new VSC(121, 4.148, 127.472), new VSC(116, 3.732, 65.22), new VSC(102, 4.188, 145.631), new VSC(102, 6.034, 0.112), new VSC(88, 3.99, 18.16), new VSC(88, 6.16, 202.25), new VSC(81, 2.64, 22.09), new VSC(72, 6.05, 70.33), new VSC(69, 4.05, 77.96), new VSC(59, 3.7, 67.67), new VSC(47, 3.54, 351.82), new VSC(44, 5.91, 7.11), new VSC(43, 5.72, 5.42), new VSC(39, 4.92, 222.86), new VSC(36, 5.9, 33.68), new VSC(36, 3.29, 8.08), new VSC(36, 3.33, 71.6), new VSC(35, 5.08, 38.13), new VSC(31, 5.62, 984.6), new VSC(31, 5.5, 59.8), new VSC(31, 5.46, 160.61), new VSC(30, 1.66, 447.8), new VSC(29, 1.15, 462.02), new VSC(29, 4.52, 84.34), new VSC(27, 5.54, 131.4), new VSC(27, 6.15, 299.13), new VSC(26, 4.99, 137.03), new VSC(25, 5.74, 380.13)];\nconst g_L2UranusCoefficients = [new VSC(53033, 0, 0), new VSC(2358, 2.2601, 74.7816), new VSC(769, 4.526, 11.046), new VSC(552, 3.258, 63.736), new VSC(542, 2.276, 3.932), new VSC(529, 4.923, 1.484), new VSC(258, 3.691, 3.181), new VSC(239, 5.858, 149.563), new VSC(182, 6.218, 70.849), new VSC(54, 1.44, 76.27), new VSC(49, 6.03, 56.62), new VSC(45, 3.91, 2.45), new VSC(45, 0.81, 85.83), new VSC(38, 1.78, 52.69), new VSC(37, 4.46, 2.97), new VSC(33, 0.86, 9.56), new VSC(29, 5.1, 73.3), new VSC(24, 2.11, 18.16), new VSC(22, 5.99, 138.52), new VSC(22, 4.82, 78.71), new VSC(21, 2.4, 77.96), new VSC(21, 2.17, 224.34), new VSC(17, 2.54, 145.63), new VSC(17, 3.47, 12.53), new VSC(12, 0.02, 22.09), new VSC(11, 0.08, 127.47), new VSC(10, 5.16, 71.6), new VSC(10, 4.46, 62.25), new VSC(9, 4.26, 7.11), new VSC(8, 5.5, 67.67), new VSC(7, 1.25, 5.42), new VSC(6, 3.36, 447.8), new VSC(6, 5.45, 65.22), new VSC(6, 4.52, 151.05), new VSC(6, 5.73, 462.02)];\nconst g_L3UranusCoefficients = [new VSC(121, 0.024, 74.782), new VSC(68, 4.12, 3.93), new VSC(53, 2.39, 11.05), new VSC(46, 0, 0), new VSC(45, 2.04, 3.18), new VSC(44, 2.96, 1.48), new VSC(25, 4.89, 63.74), new VSC(21, 4.55, 70.85), new VSC(20, 2.31, 149.56), new VSC(9, 1.58, 56.62), new VSC(4, 0.23, 18.16), new VSC(4, 5.39, 76.27), new VSC(4, 0.95, 77.96), new VSC(3, 4.98, 85.83), new VSC(3, 4.13, 52.69), new VSC(3, 0.37, 78.71), new VSC(2, 0.86, 145.63), new VSC(2, 5.66, 9.56)];\nconst g_L4UranusCoefficients = [new VSC(114, 3.142, 0), new VSC(6, 4.58, 74.78), new VSC(3, 0.35, 11.05), new VSC(1, 3.42, 56.62)];\nconst g_B0UranusCoefficients = [new VSC(1346278, 2.6187781, 74.7815986), new VSC(62341, 5.08111, 149.5632), new VSC(61601, 3.14159, 0), new VSC(9964, 1.616, 76.2661), new VSC(9926, 0.5763, 73.2971), new VSC(3259, 1.2612, 224.3448), new VSC(2972, 2.2437, 1.4845), new VSC(2010, 6.0555, 148.0787), new VSC(1522, 0.2796, 63.7359), new VSC(924, 4.038, 151.048), new VSC(761, 6.14, 71.813), new VSC(522, 3.321, 138.517), new VSC(463, 0.743, 85.827), new VSC(437, 3.381, 529.691), new VSC(435, 0.341, 77.751), new VSC(431, 3.554, 213.299), new VSC(420, 5.213, 11.046), new VSC(245, 0.788, 2.969), new VSC(233, 2.257, 222.86), new VSC(216, 1.591, 38.133), new VSC(180, 3.725, 299.126), new VSC(175, 1.236, 146.594), new VSC(174, 1.937, 380.128), new VSC(160, 5.336, 111.43), new VSC(144, 5.962, 35.164), new VSC(116, 5.739, 70.849), new VSC(106, 0.941, 70.328), new VSC(102, 2.619, 78.714)];\nconst g_B1UranusCoefficients = [new VSC(206366, 4.123943, 74.781599), new VSC(8563, 0.3382, 149.5632), new VSC(1726, 2.1219, 73.2971), new VSC(1374, 0, 0), new VSC(1369, 3.0686, 76.2661), new VSC(451, 3.777, 1.484), new VSC(400, 2.848, 224.345), new VSC(307, 1.255, 148.079), new VSC(154, 3.786, 63.736), new VSC(112, 5.573, 151.048), new VSC(111, 5.329, 138.517), new VSC(83, 3.59, 71.81), new VSC(56, 3.4, 85.83), new VSC(54, 1.7, 77.75), new VSC(42, 1.21, 11.05), new VSC(41, 4.45, 78.71), new VSC(32, 3.77, 222.86), new VSC(30, 2.56, 2.97), new VSC(27, 5.34, 213.3), new VSC(26, 0.42, 380.13)];\nconst g_B2UranusCoefficients = [new VSC(9212, 5.8004, 74.7816), new VSC(557, 0, 0), new VSC(286, 2.177, 149.563), new VSC(95, 3.84, 73.3), new VSC(45, 4.88, 76.27), new VSC(20, 5.46, 1.48), new VSC(15, 0.88, 138.52), new VSC(14, 2.85, 148.08), new VSC(14, 5.07, 63.74), new VSC(10, 5, 224.34), new VSC(8, 6.27, 78.71)];\nconst g_B3UranusCoefficients = [new VSC(268, 1.251, 74.782), new VSC(11, 3.14, 0), new VSC(6, 4.01, 149.56), new VSC(3, 5.78, 73.3)];\nconst g_B4UranusCoefficients = [new VSC(6, 2.85, 74.78)];\nconst g_R0UranusCoefficients = [new VSC(1921264848, 0, 0), new VSC(88784984, 5.60377527, 74.78159857), new VSC(3440836, 0.328361, 73.2971259), new VSC(2055653, 1.7829517, 149.5631971), new VSC(649322, 4.522473, 76.266071), new VSC(602248, 3.860038, 63.735898), new VSC(496404, 1.401399, 454.909367), new VSC(338526, 1.580027, 138.517497), new VSC(243508, 1.570866, 71.812653), new VSC(190522, 1.998094, 1.484473), new VSC(161858, 2.791379, 148.078724), new VSC(143706, 1.383686, 11.0457), new VSC(93192, 0.17437, 36.64856), new VSC(89806, 3.66105, 109.94569), new VSC(71424, 4.24509, 224.3448), new VSC(46677, 1.39977, 35.16409), new VSC(39026, 3.36235, 277.03499), new VSC(39010, 1.66971, 70.84945), new VSC(36755, 3.88649, 146.59425), new VSC(30349, 0.701, 151.04767), new VSC(29156, 3.18056, 77.75054), new VSC(25786, 3.78538, 85.8273), new VSC(25620, 5.25656, 380.12777), new VSC(22637, 0.72519, 529.69097), new VSC(20473, 2.7964, 70.32818), new VSC(20472, 1.55589, 202.2534), new VSC(17901, 0.55455, 2.96895), new VSC(15503, 5.35405, 38.13304), new VSC(14702, 4.90434, 108.46122), new VSC(12897, 2.62154, 111.43016), new VSC(12328, 5.96039, 127.4718), new VSC(11959, 1.75044, 984.60033), new VSC(11853, 0.99343, 52.6902), new VSC(11696, 3.29826, 3.93215), new VSC(11495, 0.43774, 65.22037), new VSC(10793, 1.42105, 213.2991), new VSC(9111, 4.9964, 62.2514), new VSC(8421, 5.2535, 222.8603), new VSC(8402, 5.0388, 415.5525), new VSC(7449, 0.7949, 351.8166), new VSC(7329, 3.9728, 183.2428), new VSC(6046, 5.6796, 78.7138), new VSC(5524, 3.115, 9.5612), new VSC(5445, 5.1058, 145.1098), new VSC(5238, 2.6296, 33.6796), new VSC(4079, 3.2206, 340.7709), new VSC(3919, 4.2502, 39.6175), new VSC(3802, 6.1099, 184.7273), new VSC(3781, 3.4584, 456.3938), new VSC(3687, 2.4872, 453.4249), new VSC(3102, 4.1403, 219.8914), new VSC(2963, 0.8298, 56.6224), new VSC(2942, 0.4239, 299.1264), new VSC(2940, 2.1464, 137.033), new VSC(2938, 3.6766, 140.002), new VSC(2865, 0.31, 12.5302), new VSC(2538, 4.8546, 131.4039), new VSC(2364, 0.4425, 554.07), new VSC(2183, 2.9404, 305.3462)];\nconst g_R1UranusCoefficients = [new VSC(1479896, 3.6720571, 74.7815986), new VSC(71212, 6.22601, 63.7359), new VSC(68627, 6.13411, 149.5632), new VSC(24060, 3.14159, 0), new VSC(21468, 2.60177, 76.26607), new VSC(20857, 5.24625, 11.0457), new VSC(11405, 0.01848, 70.84945), new VSC(7497, 0.4236, 73.2971), new VSC(4244, 1.4169, 85.8273), new VSC(3927, 3.1551, 71.8127), new VSC(3578, 2.3116, 224.3448), new VSC(3506, 2.5835, 138.5175), new VSC(3229, 5.255, 3.9322), new VSC(3060, 0.1532, 1.4845), new VSC(2564, 0.9808, 148.0787), new VSC(2429, 3.9944, 52.6902), new VSC(1645, 2.6535, 127.4718), new VSC(1584, 1.4305, 78.7138), new VSC(1508, 5.06, 151.0477), new VSC(1490, 2.6756, 56.6224), new VSC(1413, 4.5746, 202.2534), new VSC(1403, 1.3699, 77.7505), new VSC(1228, 1.047, 62.2514), new VSC(1033, 0.2646, 131.4039), new VSC(992, 2.172, 65.22), new VSC(862, 5.055, 351.817), new VSC(744, 3.076, 35.164), new VSC(687, 2.499, 77.963), new VSC(647, 4.473, 70.328), new VSC(624, 0.863, 9.561), new VSC(604, 0.907, 984.6), new VSC(575, 3.231, 447.796), new VSC(562, 2.718, 462.023), new VSC(530, 5.917, 213.299), new VSC(528, 5.151, 2.969)];\nconst g_R2UranusCoefficients = [new VSC(22440, 0.69953, 74.7816), new VSC(4727, 1.699, 63.7359), new VSC(1682, 4.6483, 70.8494), new VSC(1650, 3.0966, 11.0457), new VSC(1434, 3.5212, 149.5632), new VSC(770, 0, 0), new VSC(500, 6.172, 76.266), new VSC(461, 0.767, 3.932), new VSC(390, 4.496, 56.622), new VSC(390, 5.527, 85.827), new VSC(292, 0.204, 52.69), new VSC(287, 3.534, 73.297), new VSC(273, 3.847, 138.517), new VSC(220, 1.964, 131.404), new VSC(216, 0.848, 77.963), new VSC(205, 3.248, 78.714), new VSC(149, 4.898, 127.472), new VSC(129, 2.081, 3.181)];\nconst g_R3UranusCoefficients = [new VSC(1164, 4.7345, 74.7816), new VSC(212, 3.343, 63.736), new VSC(196, 2.98, 70.849), new VSC(105, 0.958, 11.046), new VSC(73, 1, 149.56), new VSC(72, 0.03, 56.62), new VSC(55, 2.59, 3.93), new VSC(36, 5.65, 77.96), new VSC(34, 3.82, 76.27), new VSC(32, 3.6, 131.4)];\nconst g_R4UranusCoefficients = [new VSC(53, 3.01, 74.78), new VSC(10, 1.91, 56.62)];\n\n\n// CAAUranus\n\nexport function CAAUranus() { }\n\nCAAUranus.eclipticLongitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nL0Coefficients = g_L0UranusCoefficients.length;\n    var L0 = 0;\n    var i;\n    for (i = 0; i < nL0Coefficients; i++) {\n        L0 += g_L0UranusCoefficients[i].a * Math.cos(g_L0UranusCoefficients[i].b + g_L0UranusCoefficients[i].c * rho);\n    }\n    var nL1Coefficients = g_L1UranusCoefficients.length;\n    var L1 = 0;\n    for (i = 0; i < nL1Coefficients; i++) {\n        L1 += g_L1UranusCoefficients[i].a * Math.cos(g_L1UranusCoefficients[i].b + g_L1UranusCoefficients[i].c * rho);\n    }\n    var nL2Coefficients = g_L2UranusCoefficients.length;\n    var L2 = 0;\n    for (i = 0; i < nL2Coefficients; i++) {\n        L2 += g_L2UranusCoefficients[i].a * Math.cos(g_L2UranusCoefficients[i].b + g_L2UranusCoefficients[i].c * rho);\n    }\n    var nL3Coefficients = g_L3UranusCoefficients.length;\n    var L3 = 0;\n    for (i = 0; i < nL3Coefficients; i++) {\n        L3 += g_L3UranusCoefficients[i].a * Math.cos(g_L3UranusCoefficients[i].b + g_L3UranusCoefficients[i].c * rho);\n    }\n    var nL4Coefficients = g_L4UranusCoefficients.length;\n    var L4 = 0;\n    for (i = 0; i < nL4Coefficients; i++) {\n        L4 += g_L4UranusCoefficients[i].a * Math.cos(g_L4UranusCoefficients[i].b + g_L4UranusCoefficients[i].c * rho);\n    }\n    var vvalue = (L0 + L1 * rho + L2 * rhosquared + L3 * rhocubed + L4 * rho4) / 100000000;\n    vvalue = CT.m360(CT.r2D(vvalue));\n    return vvalue;\n};\n\nCAAUranus.eclipticLatitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nB0Coefficients = g_B0UranusCoefficients.length;\n    var B0 = 0;\n    var i;\n    for (i = 0; i < nB0Coefficients; i++) {\n        B0 += g_B0UranusCoefficients[i].a * Math.cos(g_B0UranusCoefficients[i].b + g_B0UranusCoefficients[i].c * rho);\n    }\n    var nB1Coefficients = g_B1UranusCoefficients.length;\n    var B1 = 0;\n    for (i = 0; i < nB1Coefficients; i++) {\n        B1 += g_B1UranusCoefficients[i].a * Math.cos(g_B1UranusCoefficients[i].b + g_B1UranusCoefficients[i].c * rho);\n    }\n    var nB2Coefficients = g_B2UranusCoefficients.length;\n    var B2 = 0;\n    for (i = 0; i < nB2Coefficients; i++) {\n        B2 += g_B2UranusCoefficients[i].a * Math.cos(g_B2UranusCoefficients[i].b + g_B2UranusCoefficients[i].c * rho);\n    }\n    var nB3Coefficients = g_B3UranusCoefficients.length;\n    var B3 = 0;\n    for (i = 0; i < nB3Coefficients; i++) {\n        B3 += g_B3UranusCoefficients[i].a * Math.cos(g_B3UranusCoefficients[i].b + g_B3UranusCoefficients[i].c * rho);\n    }\n    var nB4Coefficients = g_B4UranusCoefficients.length;\n    var B4 = 0;\n    for (i = 0; i < nB4Coefficients; i++) {\n        B4 += g_B4UranusCoefficients[i].a * Math.cos(g_B4UranusCoefficients[i].b + g_B4UranusCoefficients[i].c * rho);\n    }\n    var vvalue = (B0 + B1 * rho + B2 * rhosquared + B3 * rhocubed + B4 * rho4) / 100000000;\n    vvalue = CT.r2D(vvalue);\n    return vvalue;\n};\n\nCAAUranus.radiusVector = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nR0Coefficients = g_R0UranusCoefficients.length;\n    var R0 = 0;\n    var i;\n    for (i = 0; i < nR0Coefficients; i++) {\n        R0 += g_R0UranusCoefficients[i].a * Math.cos(g_R0UranusCoefficients[i].b + g_R0UranusCoefficients[i].c * rho);\n    }\n    var nR1Coefficients = g_R1UranusCoefficients.length;\n    var R1 = 0;\n    for (i = 0; i < nR1Coefficients; i++) {\n        R1 += g_R1UranusCoefficients[i].a * Math.cos(g_R1UranusCoefficients[i].b + g_R1UranusCoefficients[i].c * rho);\n    }\n    var nR2Coefficients = g_R2UranusCoefficients.length;\n    var R2 = 0;\n    for (i = 0; i < nR2Coefficients; i++) {\n        R2 += g_R2UranusCoefficients[i].a * Math.cos(g_R2UranusCoefficients[i].b + g_R2UranusCoefficients[i].c * rho);\n    }\n    var nR3Coefficients = g_R3UranusCoefficients.length;\n    var R3 = 0;\n    for (i = 0; i < nR3Coefficients; i++) {\n        R3 += g_R3UranusCoefficients[i].a * Math.cos(g_R3UranusCoefficients[i].b + g_R3UranusCoefficients[i].c * rho);\n    }\n    var nR4Coefficients = g_R4UranusCoefficients.length;\n    var R4 = 0;\n    for (i = 0; i < nR4Coefficients; i++) {\n        R4 += g_R4UranusCoefficients[i].a * Math.cos(g_R4UranusCoefficients[i].b + g_R4UranusCoefficients[i].c * rho);\n    }\n    return (R0 + R1 * rho + R2 * rhosquared + R3 * rhocubed + R4 * rho4) / 100000000;\n};\n\nvar CAAUranus$ = {};\n\nregisterType(\"CAAUranus\", [CAAUranus, CAAUranus$, null]);\n\n","// Originally `AAVENUS.CPP`\n// \"Purpose: Implementation for the algorithms which obtain the heliocentric position of Venus\"\n// Last update of original: PJN / 29-12-2003\n//\n// Translated into C# and released by Microsoft, then transpiled into JavaScript\n// by ScriptSharp, for the WorldWide Telescope project.\n//\n// The legal notices in the original code are as follows:\n//\n// Copyright (c) 2003 - 2007 by PJ Naughter (Web: www.naughter.com, Email: pjna@naughter.com)\n//\n// All rights reserved.\n//\n// Copyright / Usage Details:\n//\n// You are allowed to include the source code in any product (commercial, shareware, freeware or otherwise)\n// when your product is released in binary form. You are allowed to modify the source code in any way you want\n// except you cannot modify the copyright details at the top of each module. If you want to distribute source\n// code with your application, then you are only allowed to distribute versions released by the author. This is\n// to maintain a single distribution point for the source code.\n\nimport { registerType } from \"../typesystem.js\";\nimport { CT } from \"./coordinate_transformation.js\";\nimport { VSC } from \"./earth.js\";\n\n\n// Coefficients\n\nconst g_L0VenusCoefficients = [new VSC(317614667, 0, 0), new VSC(1353968, 5.5931332, 10213.2855462), new VSC(89892, 5.3065, 20426.57109), new VSC(5477, 4.4163, 7860.4194), new VSC(3456, 2.6996, 11790.6291), new VSC(2372, 2.9938, 3930.2097), new VSC(1664, 4.2502, 1577.3435), new VSC(1438, 4.1575, 9683.5946), new VSC(1317, 5.1867, 26.2983), new VSC(1201, 6.1536, 30639.8566), new VSC(769, 0.816, 9437.763), new VSC(761, 1.95, 529.691), new VSC(708, 1.065, 775.523), new VSC(585, 3.998, 191.448), new VSC(500, 4.123, 15720.839), new VSC(429, 3.586, 19367.189), new VSC(327, 5.677, 5507.553), new VSC(326, 4.591, 10404.734), new VSC(232, 3.163, 9153.904), new VSC(180, 4.653, 1109.379), new VSC(155, 5.57, 19651.048), new VSC(128, 4.226, 20.775), new VSC(128, 0.962, 5661.332), new VSC(106, 1.537, 801.821)];\nconst g_L1VenusCoefficients = [new VSC(1021352943053, 0, 0), new VSC(95708, 2.46424, 10213.28555), new VSC(14445, 0.51625, 20426.57109), new VSC(213, 1.795, 30639.857), new VSC(174, 2.655, 26.298), new VSC(152, 6.106, 1577.344), new VSC(82, 5.7, 191.45), new VSC(70, 2.68, 9437.76), new VSC(52, 3.6, 775.52), new VSC(38, 1.03, 529.69), new VSC(30, 1.25, 5507.55), new VSC(25, 6.11, 10404.73)];\nconst g_L2VenusCoefficients = [new VSC(54127, 0, 0), new VSC(3891, 0.3451, 10213.2855), new VSC(1338, 2.0201, 20426.5711), new VSC(24, 2.05, 26.3), new VSC(19, 3.54, 30639.86), new VSC(10, 3.97, 775.52), new VSC(7, 1.52, 1577.34), new VSC(6, 1, 191.45)];\nconst g_L3VenusCoefficients = [new VSC(136, 4.804, 10213.286), new VSC(78, 3.67, 20426.57), new VSC(26, 0, 0)];\nconst g_L4VenusCoefficients = [new VSC(114, 3.1416, 0), new VSC(3, 5.21, 20426.57), new VSC(2, 2.51, 10213.29)];\nconst g_L5VenusCoefficients = [new VSC(1, 3.14, 0)];\nconst g_B0VenusCoefficients = [new VSC(5923638, 0.2670278, 10213.2855462), new VSC(40108, 1.14737, 20426.57109), new VSC(32815, 3.14737, 0), new VSC(1011, 1.0895, 30639.8566), new VSC(149, 6.254, 18073.705), new VSC(138, 0.86, 1577.344), new VSC(130, 3.672, 9437.763), new VSC(120, 3.705, 2352.866), new VSC(108, 4.539, 22003.915)];\nconst g_B1VenusCoefficients = [new VSC(513348, 1.803643, 10213.285546), new VSC(4380, 3.3862, 20426.5711), new VSC(199, 0, 0), new VSC(197, 2.53, 30639.857)];\nconst g_B2VenusCoefficients = [new VSC(22378, 3.38509, 10213.28555), new VSC(282, 0, 0), new VSC(173, 5.256, 20426.571), new VSC(27, 3.87, 30639.86)];\nconst g_B3VenusCoefficients = [new VSC(647, 4.992, 10213.286), new VSC(20, 3.14, 0), new VSC(6, 0.77, 20426.57), new VSC(3, 5.44, 30639.86)];\nconst g_B4VenusCoefficients = [new VSC(14, 0.32, 10213.29)];\nconst g_R0VenusCoefficients = [new VSC(72334821, 0, 0), new VSC(489824, 4.021518, 10213.285546), new VSC(1658, 4.9021, 20426.5711), new VSC(1632, 2.8455, 7860.4194), new VSC(1378, 1.1285, 11790.6291), new VSC(498, 2.587, 9683.595), new VSC(374, 1.423, 3930.21), new VSC(264, 5.529, 9437.763), new VSC(237, 2.551, 15720.839), new VSC(222, 2.013, 19367.189), new VSC(126, 2.728, 1577.344), new VSC(119, 3.02, 10404.734)];\nconst g_R1VenusCoefficients = [new VSC(34551, 0.89199, 10213.28555), new VSC(234, 1.772, 20426.571), new VSC(234, 3.142, 0)];\nconst g_R2VenusCoefficients = [new VSC(1407, 5.0637, 10213.2855), new VSC(16, 5.47, 20426.57), new VSC(13, 0, 0)];\nconst g_R3VenusCoefficients = [new VSC(50, 3.22, 10213.29)];\nconst g_R4VenusCoefficients = [new VSC(1, 0.92, 10213.29)];\n\n\n// CAAVenus\n\nexport function CAAVenus() { }\n\nCAAVenus.eclipticLongitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var rho5 = rho4 * rho;\n    var nL0Coefficients = g_L0VenusCoefficients.length;\n    var L0 = 0;\n    var i;\n    for (i = 0; i < nL0Coefficients; i++) {\n        L0 += g_L0VenusCoefficients[i].a * Math.cos(g_L0VenusCoefficients[i].b + g_L0VenusCoefficients[i].c * rho);\n    }\n    var nL1Coefficients = g_L1VenusCoefficients.length;\n    var L1 = 0;\n    for (i = 0; i < nL1Coefficients; i++) {\n        L1 += g_L1VenusCoefficients[i].a * Math.cos(g_L1VenusCoefficients[i].b + g_L1VenusCoefficients[i].c * rho);\n    }\n    var nL2Coefficients = g_L2VenusCoefficients.length;\n    var L2 = 0;\n    for (i = 0; i < nL2Coefficients; i++) {\n        L2 += g_L2VenusCoefficients[i].a * Math.cos(g_L2VenusCoefficients[i].b + g_L2VenusCoefficients[i].c * rho);\n    }\n    var nL3Coefficients = g_L3VenusCoefficients.length;\n    var L3 = 0;\n    for (i = 0; i < nL3Coefficients; i++) {\n        L3 += g_L3VenusCoefficients[i].a * Math.cos(g_L3VenusCoefficients[i].b + g_L3VenusCoefficients[i].c * rho);\n    }\n    var nL4Coefficients = g_L4VenusCoefficients.length;\n    var L4 = 0;\n    for (i = 0; i < nL4Coefficients; i++) {\n        L4 += g_L4VenusCoefficients[i].a * Math.cos(g_L4VenusCoefficients[i].b + g_L4VenusCoefficients[i].c * rho);\n    }\n    var nL5Coefficients = g_L5VenusCoefficients.length;\n    var L5 = 0;\n    for (i = 0; i < nL5Coefficients; i++) {\n        L5 += g_L5VenusCoefficients[i].a * Math.cos(g_L5VenusCoefficients[i].b + g_L5VenusCoefficients[i].c * rho);\n    }\n    var vvalue = (L0 + L1 * rho + L2 * rhosquared + L3 * rhocubed + L4 * rho4 + L5 * rho5) / 100000000;\n    vvalue = CT.m360(CT.r2D(vvalue));\n    return vvalue;\n};\n\nCAAVenus.eclipticLatitude = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nB0Coefficients = g_B0VenusCoefficients.length;\n    var B0 = 0;\n    var i;\n    for (i = 0; i < nB0Coefficients; i++) {\n        B0 += g_B0VenusCoefficients[i].a * Math.cos(g_B0VenusCoefficients[i].b + g_B0VenusCoefficients[i].c * rho);\n    }\n    var nB1Coefficients = g_B1VenusCoefficients.length;\n    var B1 = 0;\n    for (i = 0; i < nB1Coefficients; i++) {\n        B1 += g_B1VenusCoefficients[i].a * Math.cos(g_B1VenusCoefficients[i].b + g_B1VenusCoefficients[i].c * rho);\n    }\n    var nB2Coefficients = g_B2VenusCoefficients.length;\n    var B2 = 0;\n    for (i = 0; i < nB2Coefficients; i++) {\n        B2 += g_B2VenusCoefficients[i].a * Math.cos(g_B2VenusCoefficients[i].b + g_B2VenusCoefficients[i].c * rho);\n    }\n    var nB3Coefficients = g_B3VenusCoefficients.length;\n    var B3 = 0;\n    for (i = 0; i < nB3Coefficients; i++) {\n        B3 += g_B3VenusCoefficients[i].a * Math.cos(g_B3VenusCoefficients[i].b + g_B3VenusCoefficients[i].c * rho);\n    }\n    var nB4Coefficients = g_B4VenusCoefficients.length;\n    var B4 = 0;\n    for (i = 0; i < nB4Coefficients; i++) {\n        B4 += g_B4VenusCoefficients[i].a * Math.cos(g_B4VenusCoefficients[i].b + g_B4VenusCoefficients[i].c * rho);\n    }\n    var vvalue = (B0 + B1 * rho + B2 * rhosquared + B3 * rhocubed + B4 * rho4) / 100000000;\n    vvalue = CT.r2D(vvalue);\n    return vvalue;\n};\n\nCAAVenus.radiusVector = function (JD) {\n    var rho = (JD - 2451545) / 365250;\n    var rhosquared = rho * rho;\n    var rhocubed = rhosquared * rho;\n    var rho4 = rhocubed * rho;\n    var nR0Coefficients = g_R0VenusCoefficients.length;\n    var R0 = 0;\n    var i;\n    for (i = 0; i < nR0Coefficients; i++) {\n        R0 += g_R0VenusCoefficients[i].a * Math.cos(g_R0VenusCoefficients[i].b + g_R0VenusCoefficients[i].c * rho);\n    }\n    var nR1Coefficients = g_R1VenusCoefficients.length;\n    var R1 = 0;\n    for (i = 0; i < nR1Coefficients; i++) {\n        R1 += g_R1VenusCoefficients[i].a * Math.cos(g_R1VenusCoefficients[i].b + g_R1VenusCoefficients[i].c * rho);\n    }\n    var nR2Coefficients = g_R2VenusCoefficients.length;\n    var R2 = 0;\n    for (i = 0; i < nR2Coefficients; i++) {\n        R2 += g_R2VenusCoefficients[i].a * Math.cos(g_R2VenusCoefficients[i].b + g_R2VenusCoefficients[i].c * rho);\n    }\n    var nR3Coefficients = g_R3VenusCoefficients.length;\n    var R3 = 0;\n    for (i = 0; i < nR3Coefficients; i++) {\n        R3 += g_R3VenusCoefficients[i].a * Math.cos(g_R3VenusCoefficients[i].b + g_R3VenusCoefficients[i].c * rho);\n    }\n    var nR4Coefficients = g_R4VenusCoefficients.length;\n    var R4 = 0;\n    for (i = 0; i < nR4Coefficients; i++) {\n        R4 += g_R4VenusCoefficients[i].a * Math.cos(g_R4VenusCoefficients[i].b + g_R4VenusCoefficients[i].c * rho);\n    }\n    return (R0 + R1 * rho + R2 * rhosquared + R3 * rhocubed + R4 * rho4) / 100000000;\n};\n\nvar CAAVenus$ = {};\n\nregisterType(\"CAAVenus\", [CAAVenus, CAAVenus$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Planet-related code that can come lower in the dependency graph.\n\nimport { registerType } from \"./typesystem.js\";\nimport { Vector3d } from \"./double3d.js\";\nimport { Dates, PointList } from \"./graphics/primitives3d.js\";\n\n\n// BasePlanets\n\nexport function BasePlanets() { }\n\nBasePlanets.drawPointPlanet = function (renderContext, location, size, color, zOrder) {\n    var center = location;\n    var rad = size / 2;\n    if (renderContext.gl != null) {\n        var ppList = new PointList(renderContext);\n        ppList.minSize = 20;\n        ppList.addPoint(location.copy(), color._clone(), new Dates(0, 1), size / 100);\n        ppList.depthBuffered = true;\n        ppList.draw(renderContext, 1, false);\n    }\n    else {\n        var screenSpacePnt = renderContext.WVP.transform(center);\n        if (screenSpacePnt.z < 0) {\n            return;\n        }\n        if (!zOrder) {\n            if (Vector3d.dot(renderContext.get_viewPoint(), center) < 0.55) {\n                return;\n            }\n        }\n        var ctx = renderContext.device;\n        ctx.save();\n        ctx.beginPath();\n        ctx.arc(screenSpacePnt.x, screenSpacePnt.y, rad, 0, Math.PI * 2, true);\n        ctx.lineWidth = 1;\n        ctx.fillStyle = color.toString();\n        if (true) {\n            ctx.fill();\n        }\n        ctx.globalAlpha = 1;\n        ctx.strokeStyle = color.toString();\n        ctx.stroke();\n        ctx.restore();\n    }\n};\n\nregisterType(\"BasePlanets\", [BasePlanets, {}, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Miscellaneous utilities.\n\nimport { registerType } from \"./typesystem.js\";\nimport { ss } from \"./ss.js\";\n\n// wwtlib.Util\n\nexport function Util() {\n}\n\nUtil.splitString = function (target, split) {\n    var parts = [];\n    var start = 0;\n    var end = 0;\n    for (var i = 0; i < target.length; i++) {\n        var found = false;\n        for (var j = 0; j < split.length; j++) {\n            if (target[i] === split[j]) {\n                parts.push(target.substring(start, end - start));\n                found = true;\n                continue;\n            }\n            start = i + 1;\n            end = i + 1;\n        }\n        if (!found) {\n            end++;\n        }\n    }\n    if (end > start) {\n        parts.push(target.substring(start, end - start));\n    }\n    return parts;\n};\n\nUtil.stringContains = function (target, chars) {\n    for (var i = 0; i < chars.length; i++) {\n        if (target.indexOf(chars[i]) > -1) {\n            return true;\n        }\n    }\n    return false;\n};\n\nUtil.getHashCode = function (target) {\n    var hash = 0;\n    if (!target.length) {\n        return hash;\n    }\n    for (var i = 0; i < target.length; i++) {\n        var c = target.charCodeAt(i);\n        hash = ((hash << 5) - hash) + c;\n    }\n    return hash;\n};\n\nUtil.compare = function (l, r) {\n    if (l === r) {\n        return 0;\n    }\n    if (l > r) {\n        return 1;\n    }\n    return -1;\n};\n\nUtil.logN = function (num, b) {\n    return Math.log(num) / Math.log(b);\n};\n\n// Parse timespan into int with milliseconds\nUtil.parseTimeSpan = function (timespan) {\n    var val = 0;\n    var parts = timespan.split(':');\n    if (parts.length === 3) {\n        val += parseInt(parts[0]) * 3600000;\n        val += parseInt(parts[1]) * 60000;\n        val += ss.truncate((parseFloat(parts[2]) * 1000));\n    }\n    return val;\n};\n\n// convert duration to HH:MM:SS.S\nUtil.xmlDuration = function (duration) {\n    var s = duration / 1000;\n    var hours = Math.floor(s / 3600);\n    var min = Math.floor(s / 60) - (hours * 60);\n    var sec = s - ((hours * 3600) + min * 60);\n    return ss.format('{0}:{1}:{2}', hours, min, sec);\n};\n\nUtil.xmlDate = function (d) {\n    var hours = d.getHours();\n    var amPm = 'AM';\n    if (hours > 12) {\n        hours -= 12;\n        amPm = 'PM';\n    }\n    return (d.getMonth() + 1).toString() + '/' + d.getDate().toString() + '/' + d.getFullYear().toString() + ' ' + hours.toString() + ':' + d.getMinutes().toString() + ':' + d.getSeconds().toString() + ' ' + amPm;\n};\n\nUtil.selectSingleNode = function (parent, name) {\n    var node = null;\n    var $enum1 = ss.enumerate(parent.childNodes);\n    while ($enum1.moveNext()) {\n        var child = $enum1.current;\n        if (child.nodeName === name) {\n            node = child;\n            break;\n        }\n    }\n    return node;\n};\n\nUtil.getInnerText = function (node) {\n    if (ss.emptyString(node.text)) {\n        var cn = node;\n        return cn.textContent;\n    }\n    else {\n        return node.text;\n    }\n};\n\nUtil.getWrappedText = function (ctx, text, width) {\n    var lines = [];\n    lines.push(text);\n    return lines;\n};\n\nUtil.toHex = function (number) {\n    var num = Math.max(0, Math.min(ss.truncate(number), 255));\n    return '0123456789ABCDEF'.substr((num - num % 16) / 16, 1) + '0123456789ABCDEF'.substr(num % 16, 1);\n};\n\nUtil.fromHex = function (data) {\n    var val = 0;\n    switch (data.substr(1, 1).toUpperCase()) {\n        case 'A':\n            val += 10;\n            break;\n        case 'B':\n            val += 11;\n            break;\n        case 'C':\n            val += 12;\n            break;\n        case 'D':\n            val += 13;\n            break;\n        case 'E':\n            val += 14;\n            break;\n        case 'F':\n            val += 15;\n            break;\n        default:\n            val += parseInt(data.substr(1, 1));\n            break;\n    }\n    switch (data.substr(0, 1).toUpperCase()) {\n        case 'A':\n            val += 10 * 16;\n            break;\n        case 'B':\n            val += 11 * 16;\n            break;\n        case 'C':\n            val += 12 * 16;\n            break;\n        case 'D':\n            val += 13 * 16;\n            break;\n        case 'E':\n            val += 14 * 16;\n            break;\n        case 'F':\n            val += 15 * 16;\n            break;\n        default:\n            val += parseInt(data.substr(0, 1)) * 16;\n            break;\n    }\n    return val;\n};\n\nUtil._openUrl = function (url) {\n    window.open(url);\n};\n\nUtil.log10 = function (num) {\n    return Math.log(num) / 2.30258509299405;\n};\n\nUtil.sign = function (num) {\n    if (num < 0) {\n        return -1;\n    }\n    return 1;\n};\n\nvar Util$ = {};\n\nregisterType(\"Util\", [Util, Util$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Blend state.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\n\n\n// wwtlib.BlendState\n\nexport function BlendState() {\n    this._switchedTime = new Date(1990, 0, 0, 0, 0, 0, 0);\n    this._state = false;\n    this._targetState = this._state;\n    this._delayTime = 1000;\n}\n\nBlendState.create = function (initialState, delayTime) {\n    var temp = new BlendState();\n    temp._state = initialState;\n    temp._targetState = initialState;\n    temp._delayTime = delayTime;\n    return temp;\n};\n\nvar BlendState$ = {\n    get_state: function () {\n        if (this._targetState !== this._state) {\n            var ts = ss.now() - this._switchedTime;\n            if (ts > this._delayTime) {\n                this._state = this._targetState;\n            }\n            return true;\n        }\n        return this._state;\n    },\n\n    set_state: function (value) {\n        this._switchedTime = new Date(1990, 0, 0, 0, 0, 0, 0);\n        this._state = value;\n        this._targetState = this._state;\n        return value;\n    },\n\n    get_targetState: function () {\n        return this._targetState;\n    },\n\n    set_targetState: function (value) {\n        if (this._targetState !== value) {\n            this._switchedTime = ss.now();\n            this._targetState = value;\n        }\n        return value;\n    },\n\n    get_opacity: function () {\n        if (this._targetState !== this._state) {\n            var ts = ss.now() - this._switchedTime;\n            if (ts > this._delayTime) {\n                this._state = this._targetState;\n            }\n            else {\n                var opacity = (ts / this._delayTime);\n                return (this._targetState) ? opacity : 1 - opacity;\n            }\n        }\n        return (this._state) ? 1 : 0;\n    },\n\n    get_delayTime: function () {\n        return this._delayTime;\n    },\n\n    set_delayTime: function (value) {\n        this._delayTime = value;\n        return value;\n    }\n};\n\nregisterType(\"BlendState\", [BlendState, BlendState$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Camera parameters.\n\nimport { registerType, registerEnum } from \"./typesystem.js\";\nimport { ss } from \"./ss.js\";\nimport { Vector3d } from \"./double3d.js\";\nimport { Coordinates } from \"./coordinates.js\";\n\n\n// wwtlib.SolarSystemObjects\n\nexport var SolarSystemObjects = {\n    sun: 0,\n    mercury: 1,\n    venus: 2,\n    mars: 3,\n    jupiter: 4,\n    saturn: 5,\n    uranus: 6,\n    neptune: 7,\n    pluto: 8,\n    moon: 9,\n    io: 10,\n    europa: 11,\n    ganymede: 12,\n    callisto: 13,\n    ioShadow: 14,\n    europaShadow: 15,\n    ganymedeShadow: 16,\n    callistoShadow: 17,\n    sunEclipsed: 18,\n    earth: 19,\n    custom: 20,\n    undefined: 65536\n};\n\nregisterType(\"SolarSystemObjects\", SolarSystemObjects);\nregisterEnum(\"SolarSystemObjects\", SolarSystemObjects);\n\n\n// wwtlib.InterpolationType\n\nexport var InterpolationType = {\n    linear: 0,\n    easeIn: 1,\n    easeOut: 2,\n    easeInOut: 3,\n    exponential: 4,\n    defaultV: 5\n};\n\nregisterType(\"InterpolationType\", InterpolationType);\nregisterEnum(\"InterpolationType\", InterpolationType);\n\n\n\n// wwtlib.CameraParameters\n\nexport function CameraParameters() {\n    this.lat = 0;\n    this.lng = 0;\n    this.zoom = 0;\n    this.rotation = 0;\n    this.angle = 0;\n    this.raDec = false;\n    this.opacity = 0;\n    this.target = 0;\n    this.zoom = 360;\n    this.viewTarget = new Vector3d();\n}\n\nCameraParameters.create = function (lat, lng, zoom, rotation, angle, opactity) {\n    var temp = new CameraParameters();\n    temp.lat = lat;\n    temp.lng = lng;\n    temp.zoom = zoom;\n    temp.rotation = rotation;\n    temp.angle = angle;\n    temp.raDec = false;\n    temp.opacity = opactity;\n    temp.viewTarget = Vector3d.create(0, 0, 0);\n    temp.target = 20;\n    temp.targetReferenceFrame = '';\n    return temp;\n};\n\nCameraParameters.logN = function (num, b) {\n    return Math.log(num) / Math.log(b);\n};\n\nCameraParameters.sinh = function (v) {\n    return (Math.exp(v) - Math.exp(-v)) / 2;\n};\n\nCameraParameters.interpolate = function (from, to, alphaIn, type, fastDirectionMove) {\n    var result = new CameraParameters();\n    var alpha = CameraParameters.easeCurve(alphaIn, type);\n    var alphaBIn = Math.min(1, alphaIn * 2);\n    var alphaB = CameraParameters.easeCurve(alphaBIn, type);\n    result.angle = to.angle * alpha + from.angle * (1 - alpha);\n    result.rotation = to.rotation * alpha + from.rotation * (1 - alpha);\n    if (fastDirectionMove) {\n        result.lat = to.lat * alphaB + from.lat * (1 - alphaB);\n        result.lng = to.lng * alphaB + from.lng * (1 - alphaB);\n    }\n    else {\n        result.lat = to.lat * alpha + from.lat * (1 - alpha);\n        result.lng = to.lng * alpha + from.lng * (1 - alpha);\n    }\n    result.zoom = Math.pow(2, CameraParameters.logN(to.zoom, 2) * alpha + CameraParameters.logN(from.zoom, 2) * (1 - alpha));\n    result.opacity = (to.opacity * alpha + from.opacity * (1 - alpha));\n    result.viewTarget = Vector3d.lerp(from.viewTarget, to.viewTarget, alpha);\n    result.targetReferenceFrame = to.targetReferenceFrame;\n    if (to.target === from.target) {\n        result.target = to.target;\n    }\n    else {\n        result.target = 20;\n    }\n    return result;\n};\n\nCameraParameters.interpolateGreatCircle = function (from, to, alphaIn, type, fastDirectionMove) {\n    var result = new CameraParameters();\n    var alpha = CameraParameters.easeCurve(alphaIn, type);\n    var alphaBIn = Math.min(1, alphaIn * 2);\n    var alphaB = CameraParameters.easeCurve(alphaBIn, type);\n    result.angle = to.angle * alpha + from.angle * (1 - alpha);\n    result.rotation = to.rotation * alpha + from.rotation * (1 - alpha);\n    var left = Coordinates.geoTo3dDouble(from.lat, from.lng);\n    var right = Coordinates.geoTo3dDouble(to.lat, to.lng);\n    var mid = Vector3d.slerp(left, right, alpha);\n    var midV2 = Coordinates.cartesianToLatLng(mid);\n    result.lat = midV2.y;\n    result.lng = midV2.x;\n    result.zoom = Math.pow(2, CameraParameters.logN(to.zoom, 2) * alpha + CameraParameters.logN(from.zoom, 2) * (1 - alpha));\n    result.opacity = (to.opacity * alpha + from.opacity * (1 - alpha));\n    result.viewTarget = Vector3d.lerp(from.viewTarget, to.viewTarget, alpha);\n    result.targetReferenceFrame = to.targetReferenceFrame;\n    if (to.target === from.target) {\n        result.target = to.target;\n    }\n    else {\n        result.target = 20;\n    }\n    return result;\n};\n\nCameraParameters.easeCurve = function (alpha, type) {\n    switch (type) {\n        case 0:\n            return alpha;\n        case 4:\n            return Math.pow(alpha, 2);\n        case 1:\n            return ((1 - alpha) * CameraParameters.sinh(alpha / (0.1085712344 * 2)) / 100) + alpha * alpha;\n        case 2:\n            return (alpha * (1 - CameraParameters.sinh((1 - alpha) / (0.1085712344 * 2)) / 100)) + (1 - alpha) * alpha;\n        case 3:\n            if (alpha < 0.5) {\n                return CameraParameters.sinh(alpha / 0.1085712344) / 100;\n            }\n            else {\n                return 1 - (CameraParameters.sinh((1 - alpha) / 0.1085712344) / 100);\n            }\n        default:\n            return alpha;\n    }\n};\n\nvar CameraParameters$ = {\n    copy: function () {\n        var temp = new CameraParameters();\n        temp.lat = this.lat;\n        temp.lng = this.lng;\n        temp.zoom = this.zoom;\n        temp.rotation = this.rotation;\n        temp.angle = this.angle;\n        temp.raDec = this.raDec;\n        temp.opacity = this.opacity;\n        temp.viewTarget = this.viewTarget.copy();\n        temp.target = this.target;\n        temp.targetReferenceFrame = this.targetReferenceFrame;\n        return temp;\n    },\n\n    get_RA: function () {\n        return ((((180 - (this.lng - 180)) / 360) * 24) % 24);\n    },\n\n    set_RA: function (value) {\n        this.lng = 180 - (value / 24 * 360) - 180;\n        this.raDec = true;\n        return value;\n    },\n\n    get_dec: function () {\n        return this.lat;\n    },\n\n    set_dec: function (value) {\n        this.lat = value;\n        return value;\n    },\n\n    equals: function (obj) {\n        if (ss.canCast(obj, CameraParameters)) {\n            var cam = obj;\n            if (Math.abs(cam.angle - this.angle) > 0.01 || Math.abs(cam.lat - this.lat) > (cam.zoom / 10000) || Math.abs(cam.get_RA() - this.get_RA()) > (cam.zoom / 1000) || Math.abs(cam.rotation - this.rotation) > 0.1 || Math.abs(cam.zoom - this.zoom) > (Math.abs(cam.zoom) / 1000)) {\n                return false;\n            }\n            return true;\n        } else {\n            return false;\n        }\n    }\n};\n\nregisterType(\"CameraParameters\", [CameraParameters, CameraParameters$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Basic color types.\n\nimport { registerType } from \"./typesystem.js\";\nimport { ss } from \"./ss.js\";\nimport { Util } from \"./util.js\";\n\n// wwtlib.Color\n\nexport function Color() {\n    this.a = 255;\n    this.b = 255;\n    this.g = 255;\n    this.r = 255;\n    this.name = '';\n}\n\nColor.fromArgb = function (a, r, g, b) {\n    var temp = new Color();\n    temp.a = a;\n    temp.r = r;\n    temp.g = g;\n    temp.b = b;\n    return temp;\n};\n\nColor._fromArgbColor = function (a, col) {\n    var temp = new Color();\n    temp.a = a;\n    temp.r = col.r;\n    temp.g = col.g;\n    temp.b = col.b;\n    return temp;\n};\n\nColor.fromName = function (name) {\n    var temp = Color.load(name);\n    return temp;\n};\n\nColor.load = function (color) {\n    var a = 255, r = 255, g = 255, b = 255;\n    var pieces = color.split(':');\n    if (pieces.length === 5) {\n        a = parseInt(pieces[1]);\n        r = parseInt(pieces[2]);\n        g = parseInt(pieces[3]);\n        b = parseInt(pieces[4]);\n    }\n    else if (pieces.length === 2) {\n        return Color.fromName(pieces[1].toLowerCase());\n    }\n    else if (pieces.length === 1 && ss.startsWith(pieces[0], '#')) {\n        return Color.fromHex(pieces[0]);\n    }\n    else if (pieces.length === 1 && pieces[0].length === 8) {\n        return Color.fromSimpleHex(pieces[0]);\n    }\n    else if (pieces.length === 1) {\n        return Color._fromWindowsNamedColor(pieces[0]);\n    }\n    return Color.fromArgb(a, r, g, b);\n};\n\nColor._fromWindowsNamedColor = function (color) {\n    switch (color.toLowerCase()) {\n        case 'activeborder':\n            return Color.fromArgb(255, 180, 180, 180);\n        case 'activecaption':\n            return Color.fromArgb(255, 153, 180, 209);\n        case 'activecaptiontext':\n            return Color.fromArgb(255, 0, 0, 0);\n        case 'appworkspace':\n            return Color.fromArgb(255, 171, 171, 171);\n        case 'control':\n            return Color.fromArgb(255, 240, 240, 240);\n        case 'controldark':\n            return Color.fromArgb(255, 160, 160, 160);\n        case 'controldarkdark':\n            return Color.fromArgb(255, 105, 105, 105);\n        case 'controllight':\n            return Color.fromArgb(255, 227, 227, 227);\n        case 'controllightlight':\n            return Color.fromArgb(255, 255, 255, 255);\n        case 'controltext':\n            return Color.fromArgb(255, 0, 0, 0);\n        case 'desktop':\n            return Color.fromArgb(255, 255, 255, 255);\n        case 'graytext':\n            return Color.fromArgb(255, 109, 109, 109);\n        case 'highlight':\n            return Color.fromArgb(255, 51, 153, 255);\n        case 'highlighttext':\n            return Color.fromArgb(255, 255, 255, 255);\n        case 'hottrack':\n            return Color.fromArgb(255, 0, 102, 204);\n        case 'inactiveborder':\n            return Color.fromArgb(255, 244, 247, 252);\n        case 'inactivecaption':\n            return Color.fromArgb(255, 191, 205, 219);\n        case 'inactivecaptiontext':\n            return Color.fromArgb(255, 0, 0, 0);\n        case 'info':\n            return Color.fromArgb(255, 255, 255, 225);\n        case 'infotext':\n            return Color.fromArgb(255, 0, 0, 0);\n        case 'menu':\n            return Color.fromArgb(255, 240, 240, 240);\n        case 'menutext':\n            return Color.fromArgb(255, 0, 0, 0);\n        case 'scrollbar':\n            return Color.fromArgb(255, 200, 200, 200);\n        case 'window':\n            return Color.fromArgb(255, 255, 255, 255);\n        case 'windowframe':\n            return Color.fromArgb(255, 100, 100, 100);\n        case 'windowtext':\n            return Color.fromArgb(255, 0, 0, 0);\n        case 'transparent':\n            return Color.fromArgb(0, 255, 255, 255);\n        case 'aliceblue':\n            return Color.fromArgb(255, 240, 248, 255);\n        case 'antiquewhite':\n            return Color.fromArgb(255, 250, 235, 215);\n        case 'aqua':\n            return Color.fromArgb(255, 0, 255, 255);\n        case 'aquamarine':\n            return Color.fromArgb(255, 127, 255, 212);\n        case 'azure':\n            return Color.fromArgb(255, 240, 255, 255);\n        case 'beige':\n            return Color.fromArgb(255, 245, 245, 220);\n        case 'bisque':\n            return Color.fromArgb(255, 255, 228, 196);\n        case 'black':\n            return Color.fromArgb(255, 0, 0, 0);\n        case 'blanchedalmond':\n            return Color.fromArgb(255, 255, 235, 205);\n        case 'blue':\n            return Color.fromArgb(255, 0, 0, 255);\n        case 'blueviolet':\n            return Color.fromArgb(255, 138, 43, 226);\n        case 'brown':\n            return Color.fromArgb(255, 165, 42, 42);\n        case 'burlywood':\n            return Color.fromArgb(255, 222, 184, 135);\n        case 'cadetblue':\n            return Color.fromArgb(255, 95, 158, 160);\n        case 'chartreuse':\n            return Color.fromArgb(255, 127, 255, 0);\n        case 'chocolate':\n            return Color.fromArgb(255, 210, 105, 30);\n        case 'coral':\n            return Color.fromArgb(255, 255, 127, 80);\n        case 'cornflowerblue':\n            return Color.fromArgb(255, 100, 149, 237);\n        case 'cornsilk':\n            return Color.fromArgb(255, 255, 248, 220);\n        case 'crimson':\n            return Color.fromArgb(255, 220, 20, 60);\n        case 'cyan':\n            return Color.fromArgb(255, 0, 255, 255);\n        case 'darkblue':\n            return Color.fromArgb(255, 0, 0, 139);\n        case 'darkcyan':\n            return Color.fromArgb(255, 0, 139, 139);\n        case 'darkgoldenrod':\n            return Color.fromArgb(255, 184, 134, 11);\n        case 'darkgray':\n            return Color.fromArgb(255, 169, 169, 169);\n        case 'darkgreen':\n            return Color.fromArgb(255, 0, 100, 0);\n        case 'darkkhaki':\n            return Color.fromArgb(255, 189, 183, 107);\n        case 'darkmagenta':\n            return Color.fromArgb(255, 139, 0, 139);\n        case 'darkolivegreen':\n            return Color.fromArgb(255, 85, 107, 47);\n        case 'darkorange':\n            return Color.fromArgb(255, 255, 140, 0);\n        case 'darkorchid':\n            return Color.fromArgb(255, 153, 50, 204);\n        case 'darkred':\n            return Color.fromArgb(255, 139, 0, 0);\n        case 'darksalmon':\n            return Color.fromArgb(255, 233, 150, 122);\n        case 'darkseagreen':\n            return Color.fromArgb(255, 143, 188, 139);\n        case 'darkslateblue':\n            return Color.fromArgb(255, 72, 61, 139);\n        case 'darkslategray':\n            return Color.fromArgb(255, 47, 79, 79);\n        case 'darkturquoise':\n            return Color.fromArgb(255, 0, 206, 209);\n        case 'darkviolet':\n            return Color.fromArgb(255, 148, 0, 211);\n        case 'deeppink':\n            return Color.fromArgb(255, 255, 20, 147);\n        case 'deepskyblue':\n            return Color.fromArgb(255, 0, 191, 255);\n        case 'dimgray':\n            return Color.fromArgb(255, 105, 105, 105);\n        case 'dodgerblue':\n            return Color.fromArgb(255, 30, 144, 255);\n        case 'firebrick':\n            return Color.fromArgb(255, 178, 34, 34);\n        case 'floralwhite':\n            return Color.fromArgb(255, 255, 250, 240);\n        case 'forestgreen':\n            return Color.fromArgb(255, 34, 139, 34);\n        case 'fuchsia':\n            return Color.fromArgb(255, 255, 0, 255);\n        case 'gainsboro':\n            return Color.fromArgb(255, 220, 220, 220);\n        case 'ghostwhite':\n            return Color.fromArgb(255, 248, 248, 255);\n        case 'gold':\n            return Color.fromArgb(255, 255, 215, 0);\n        case 'goldenrod':\n            return Color.fromArgb(255, 218, 165, 32);\n        case 'gray':\n            return Color.fromArgb(255, 128, 128, 128);\n        case 'green':\n            return Color.fromArgb(255, 0, 128, 0);\n        case 'greenyellow':\n            return Color.fromArgb(255, 173, 255, 47);\n        case 'honeydew':\n            return Color.fromArgb(255, 240, 255, 240);\n        case 'hotpink':\n            return Color.fromArgb(255, 255, 105, 180);\n        case 'indianred':\n            return Color.fromArgb(255, 205, 92, 92);\n        case 'indigo':\n            return Color.fromArgb(255, 75, 0, 130);\n        case 'ivory':\n            return Color.fromArgb(255, 255, 255, 240);\n        case 'khaki':\n            return Color.fromArgb(255, 240, 230, 140);\n        case 'lavender':\n            return Color.fromArgb(255, 230, 230, 250);\n        case 'lavenderblush':\n            return Color.fromArgb(255, 255, 240, 245);\n        case 'lawngreen':\n            return Color.fromArgb(255, 124, 252, 0);\n        case 'lemonchiffon':\n            return Color.fromArgb(255, 255, 250, 205);\n        case 'lightblue':\n            return Color.fromArgb(255, 173, 216, 230);\n        case 'lightcoral':\n            return Color.fromArgb(255, 240, 128, 128);\n        case 'lightcyan':\n            return Color.fromArgb(255, 224, 255, 255);\n        case 'lightgoldenrodyellow':\n            return Color.fromArgb(255, 250, 250, 210);\n        case 'lightgray':\n            return Color.fromArgb(255, 211, 211, 211);\n        case 'lightgreen':\n            return Color.fromArgb(255, 144, 238, 144);\n        case 'lightpink':\n            return Color.fromArgb(255, 255, 182, 193);\n        case 'lightsalmon':\n            return Color.fromArgb(255, 255, 160, 122);\n        case 'lightseagreen':\n            return Color.fromArgb(255, 32, 178, 170);\n        case 'lightskyblue':\n            return Color.fromArgb(255, 135, 206, 250);\n        case 'lightslategray':\n            return Color.fromArgb(255, 119, 136, 153);\n        case 'lightsteelblue':\n            return Color.fromArgb(255, 176, 196, 222);\n        case 'lightyellow':\n            return Color.fromArgb(255, 255, 255, 224);\n        case 'lime':\n            return Color.fromArgb(255, 0, 255, 0);\n        case 'limegreen':\n            return Color.fromArgb(255, 50, 205, 50);\n        case 'linen':\n            return Color.fromArgb(255, 250, 240, 230);\n        case 'magenta':\n            return Color.fromArgb(255, 255, 0, 255);\n        case 'maroon':\n            return Color.fromArgb(255, 128, 0, 0);\n        case 'mediumaquamarine':\n            return Color.fromArgb(255, 102, 205, 170);\n        case 'mediumblue':\n            return Color.fromArgb(255, 0, 0, 205);\n        case 'mediumorchid':\n            return Color.fromArgb(255, 186, 85, 211);\n        case 'mediumpurple':\n            return Color.fromArgb(255, 147, 112, 219);\n        case 'mediumseagreen':\n            return Color.fromArgb(255, 60, 179, 113);\n        case 'mediumslateblue':\n            return Color.fromArgb(255, 123, 104, 238);\n        case 'mediumspringgreen':\n            return Color.fromArgb(255, 0, 250, 154);\n        case 'mediumturquoise':\n            return Color.fromArgb(255, 72, 209, 204);\n        case 'mediumvioletred':\n            return Color.fromArgb(255, 199, 21, 133);\n        case 'midnightblue':\n            return Color.fromArgb(255, 25, 25, 112);\n        case 'mintcream':\n            return Color.fromArgb(255, 245, 255, 250);\n        case 'mistyrose':\n            return Color.fromArgb(255, 255, 228, 225);\n        case 'moccasin':\n            return Color.fromArgb(255, 255, 228, 181);\n        case 'navajowhite':\n            return Color.fromArgb(255, 255, 222, 173);\n        case 'navy':\n            return Color.fromArgb(255, 0, 0, 128);\n        case 'oldlace':\n            return Color.fromArgb(255, 253, 245, 230);\n        case 'olive':\n            return Color.fromArgb(255, 128, 128, 0);\n        case 'olivedrab':\n            return Color.fromArgb(255, 107, 142, 35);\n        case 'orange':\n            return Color.fromArgb(255, 255, 165, 0);\n        case 'orangered':\n            return Color.fromArgb(255, 255, 69, 0);\n        case 'orchid':\n            return Color.fromArgb(255, 218, 112, 214);\n        case 'palegoldenrod':\n            return Color.fromArgb(255, 238, 232, 170);\n        case 'palegreen':\n            return Color.fromArgb(255, 152, 251, 152);\n        case 'paleturquoise':\n            return Color.fromArgb(255, 175, 238, 238);\n        case 'palevioletred':\n            return Color.fromArgb(255, 219, 112, 147);\n        case 'papayawhip':\n            return Color.fromArgb(255, 255, 239, 213);\n        case 'peachpuff':\n            return Color.fromArgb(255, 255, 218, 185);\n        case 'peru':\n            return Color.fromArgb(255, 205, 133, 63);\n        case 'pink':\n            return Color.fromArgb(255, 255, 192, 203);\n        case 'plum':\n            return Color.fromArgb(255, 221, 160, 221);\n        case 'powderblue':\n            return Color.fromArgb(255, 176, 224, 230);\n        case 'purple':\n            return Color.fromArgb(255, 128, 0, 128);\n        case 'red':\n            return Color.fromArgb(255, 255, 0, 0);\n        case 'rosybrown':\n            return Color.fromArgb(255, 188, 143, 143);\n        case 'royalblue':\n            return Color.fromArgb(255, 65, 105, 225);\n        case 'saddlebrown':\n            return Color.fromArgb(255, 139, 69, 19);\n        case 'salmon':\n            return Color.fromArgb(255, 250, 128, 114);\n        case 'sandybrown':\n            return Color.fromArgb(255, 244, 164, 96);\n        case 'seagreen':\n            return Color.fromArgb(255, 46, 139, 87);\n        case 'seashell':\n            return Color.fromArgb(255, 255, 245, 238);\n        case 'sienna':\n            return Color.fromArgb(255, 160, 82, 45);\n        case 'silver':\n            return Color.fromArgb(255, 192, 192, 192);\n        case 'skyblue':\n            return Color.fromArgb(255, 135, 206, 235);\n        case 'slateblue':\n            return Color.fromArgb(255, 106, 90, 205);\n        case 'slategray':\n            return Color.fromArgb(255, 112, 128, 144);\n        case 'snow':\n            return Color.fromArgb(255, 255, 250, 250);\n        case 'springgreen':\n            return Color.fromArgb(255, 0, 255, 127);\n        case 'steelblue':\n            return Color.fromArgb(255, 70, 130, 180);\n        case 'tan':\n            return Color.fromArgb(255, 210, 180, 140);\n        case 'teal':\n            return Color.fromArgb(255, 0, 128, 128);\n        case 'thistle':\n            return Color.fromArgb(255, 216, 191, 216);\n        case 'tomato':\n            return Color.fromArgb(255, 255, 99, 71);\n        case 'turquoise':\n            return Color.fromArgb(255, 64, 224, 208);\n        case 'violet':\n            return Color.fromArgb(255, 238, 130, 238);\n        case 'wheat':\n            return Color.fromArgb(255, 245, 222, 179);\n        case 'white':\n            return Color.fromArgb(255, 255, 255, 255);\n        case 'whitesmoke':\n            return Color.fromArgb(255, 245, 245, 245);\n        case 'yellow':\n            return Color.fromArgb(255, 255, 255, 0);\n        case 'yellowgreen':\n            return Color.fromArgb(255, 154, 205, 50);\n        case 'buttonface':\n            return Color.fromArgb(255, 240, 240, 240);\n        case 'buttonhighlight':\n            return Color.fromArgb(255, 255, 255, 255);\n        case 'buttonshadow':\n            return Color.fromArgb(255, 160, 160, 160);\n        case 'gradientactivecaption':\n            return Color.fromArgb(255, 185, 209, 234);\n        case 'gradientinactivecaption':\n            return Color.fromArgb(255, 215, 228, 242);\n        case 'menubar':\n            return Color.fromArgb(255, 240, 240, 240);\n        case 'menuhighlight':\n            return Color.fromArgb(255, 51, 153, 255);\n    }\n    return Color.fromArgb(255, 255, 255, 255);\n};\n\nColor.fromHex = function (data) {\n    var r = Util.fromHex(data.substr(1, 2));\n    var g = Util.fromHex(data.substr(3, 2));\n    var b = Util.fromHex(data.substr(5, 2));\n    var a = 255;\n    return Color.fromArgb(a, r, g, b);\n};\n\nColor.fromSimpleHex = function (data) {\n    var a = Util.fromHex(data.substr(0, 2));\n    var r = Util.fromHex(data.substr(2, 2));\n    var g = Util.fromHex(data.substr(4, 2));\n    var b = Util.fromHex(data.substr(6, 2));\n    return Color.fromArgb(a, r, g, b);\n};\n\nColor.fromInt = function (color) {\n    var r = (color & 4278190080) >>> 24;\n    var g = (color & 16711680) >>> 16;\n    var b = (color & 65280) >>> 8;\n    var a = (color & 255);\n    return Color.fromArgb(a, r, g, b);\n};\n\nvar Color$ = {\n    toFormat: function () {\n        if (ss.emptyString(this.name)) {\n            return ss.format('rgb({0},{1},{2})', this.r.toString(), this.g.toString(), this.b.toString());\n        }\n        else {\n            return this.name;\n        }\n    },\n\n    save: function () {\n        if (!ss.emptyString(this.name)) {\n            return ss.format('{0}:{1}', 0, this.name);\n        }\n        else {\n            return ss.format('{0}:{1}:{2}:{3}:{4}', 1, this.a, this.r, this.g, this.b);\n        }\n    },\n\n    toString: function () {\n        if (ss.emptyString(this.name)) {\n            return ss.format('#{0}{1}{2}', Util.toHex(this.r), Util.toHex(this.g), Util.toHex(this.b));\n        }\n        else {\n            return this.name;\n        }\n    },\n\n    toSimpleHex: function () {\n        if (ss.emptyString(this.name)) {\n            return ss.format('{0}{1}{2}{3}', Util.toHex(this.a), Util.toHex(this.r), Util.toHex(this.g), Util.toHex(this.b));\n        }\n        else {\n            return this.name;\n        }\n    },\n\n    _clone: function () {\n        return Color.fromArgb(this.a, this.r, this.g, this.b);\n    }\n};\n\nregisterType(\"Color\", [Color, Color$, null]);\n\n\n// wwtlib.Colors\n\nexport function Colors() { }\n\nColors.get_black = function () {\n    return Color.fromArgb(255, 0, 0, 0);\n};\n\nColors.get_blue = function () {\n    return Color.fromArgb(255, 0, 0, 255);\n};\n\nColors.get_brown = function () {\n    return Color.fromArgb(255, 165, 42, 42);\n};\n\nColors.get_cyan = function () {\n    return Color.fromArgb(255, 0, 255, 255);\n};\n\nColors.get_darkGray = function () {\n    return Color.fromArgb(255, 169, 169, 169);\n};\n\nColors.get_gray = function () {\n    return Color.fromArgb(255, 128, 128, 128);\n};\n\nColors.get_green = function () {\n    return Color.fromArgb(255, 0, 255, 0);\n};\n\nColors.get_lightGray = function () {\n    return Color.fromArgb(255, 211, 211, 211);\n};\n\nColors.get_magenta = function () {\n    return Color.fromArgb(255, 255, 0, 255);\n};\n\nColors.get_orange = function () {\n    return Color.fromArgb(255, 255, 165, 0);\n};\n\nColors.get_purple = function () {\n    return Color.fromArgb(255, 128, 0, 128);\n};\n\nColors.get_red = function () {\n    return Color.fromArgb(255, 255, 0, 0);\n};\n\nColors.get_transparent = function () {\n    return Color.fromArgb(0, 255, 255, 255);\n};\n\nColors.get_white = function () {\n    return Color.fromArgb(255, 255, 255, 255);\n};\n\nColors.get_yellow = function () {\n    return Color.fromArgb(255, 255, 255, 0);\n};\n\nvar Colors$ = {};\n\nregisterType(\"Colors\", [Colors, Colors$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A filter that can match various sets of constellations.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { BlendState } from \"./blend_state.js\";\n\n\n// wwtlib.ConstellationFilter\n//\n// This type was defined in `Constellations.js`, but we've moved it here to\n// break circular dependencies.\n\nexport function ConstellationFilter() {\n    this.bits = new Array(3);\n    this.oldBits = new Array(3);\n    this.blendState = BlendState.create(false, 1000);\n    this.internal = false;\n    this.settingsOwned = false;\n    for (var i = 0; i < 3; i++) {\n        this.bits[i] = ~this.bits[i];\n        this.oldBits[i] = this.bits[i];\n    }\n}\n\nConstellationFilter.families = {};\n\n// These are populated in `Constellations._centroidsReady()`.\nConstellationFilter.bitIDs = {};\n\nConstellationFilter.buildConstellationFilters = function () {\n    var all = ConstellationFilter.get_allConstellation();\n    all.internal = true;\n    ConstellationFilter.families['AllConstellation'] = all;\n    ConstellationFilter.families['Zodiacal'] = ConstellationFilter.get_zodiacal();\n    ConstellationFilter.families['Ursa Major Family'] = ConstellationFilter.get_ursaMajorFamily();\n    ConstellationFilter.families['Perseus Family'] = ConstellationFilter.get_perseusFamily();\n    ConstellationFilter.families['Hercules Family'] = ConstellationFilter.get_herculesFamily();\n    ConstellationFilter.families['Orion Family'] = ConstellationFilter.get_orionFamily();\n    ConstellationFilter.families['Heavenly Waters'] = ConstellationFilter.get_heavenlyWaters();\n    ConstellationFilter.families['Bayer Family'] = ConstellationFilter.get_bayerFamily();\n    ConstellationFilter.families['La Caille Family'] = ConstellationFilter.get_laCaileFamily();\n};\n\nConstellationFilter.saveCustomFilters = function () {\n    var sb = new ss.StringBuilder();\n    var $dict1 = ConstellationFilter.families;\n    for (var $key2 in $dict1) {\n        var kv = { key: $key2, value: $dict1[$key2] };\n        if (!kv.value.internal) {\n            sb.append(kv.key);\n            sb.append(';');\n            sb.appendLine(kv.value.toString());\n        }\n    }\n};\n\nConstellationFilter.get_allConstellation = function () {\n    var all = new ConstellationFilter();\n    all.setAll(true);\n    return all;\n};\n\nConstellationFilter.get_zodiacal = function () {\n    var zodiacal = new ConstellationFilter();\n    zodiacal.set('ARI', true);\n    zodiacal.set('TAU', true);\n    zodiacal.set('GEM', true);\n    zodiacal.set('CNC', true);\n    zodiacal.set('LEO', true);\n    zodiacal.set('VIR', true);\n    zodiacal.set('LIB', true);\n    zodiacal.set('SCO', true);\n    zodiacal.set('SGR', true);\n    zodiacal.set('CAP', true);\n    zodiacal.set('AQR', true);\n    zodiacal.set('PSC', true);\n    zodiacal.internal = true;\n    return zodiacal;\n};\n\nConstellationFilter.get_ursaMajorFamily = function () {\n    var uma = new ConstellationFilter();\n    uma.set('UMA', true);\n    uma.set('UMI', true);\n    uma.set('DRA', true);\n    uma.set('CVN', true);\n    uma.set('BOO', true);\n    uma.set('COM', true);\n    uma.set('CRB', true);\n    uma.set('CAM', true);\n    uma.set('LYN', true);\n    uma.set('LMI', true);\n    uma.internal = true;\n    return uma;\n};\n\nConstellationFilter.get_perseusFamily = function () {\n    var Perseus = new ConstellationFilter();\n    Perseus.set('CAS', true);\n    Perseus.set('CEP', true);\n    Perseus.set('AND', true);\n    Perseus.set('PER', true);\n    Perseus.set('PEG', true);\n    Perseus.set('CET', true);\n    Perseus.set('AUR', true);\n    Perseus.set('LAC', true);\n    Perseus.set('TRI', true);\n    Perseus.internal = true;\n    return Perseus;\n};\n\nConstellationFilter.get_herculesFamily = function () {\n    var hercules = new ConstellationFilter();\n    hercules.set('HER', true);\n    hercules.set('SGE', true);\n    hercules.set('AQL', true);\n    hercules.set('LYR', true);\n    hercules.set('CYG', true);\n    hercules.set('VUL', true);\n    hercules.set('HYA', true);\n    hercules.set('SEX', true);\n    hercules.set('CRT', true);\n    hercules.set('CRV', true);\n    hercules.set('OPH', true);\n    hercules.set('SER1', true);\n    hercules.set('SER2', true);\n    hercules.set('SCT', true);\n    hercules.set('CEN', true);\n    hercules.set('LUP', true);\n    hercules.set('CRA', true);\n    hercules.set('ARA', true);\n    hercules.set('TRA', true);\n    hercules.set('CRU', true);\n    hercules.internal = true;\n    return hercules;\n};\n\nConstellationFilter.get_orionFamily = function () {\n    var orion = new ConstellationFilter();\n    orion.set('ORI', true);\n    orion.set('CMA', true);\n    orion.set('CMI', true);\n    orion.set('MON', true);\n    orion.set('LEP', true);\n    orion.internal = true;\n    return orion;\n};\n\nConstellationFilter.get_heavenlyWaters = function () {\n    var waters = new ConstellationFilter();\n    waters.set('DEL', true);\n    waters.set('EQU', true);\n    waters.set('ERI', true);\n    waters.set('PSA', true);\n    waters.set('CAR', true);\n    waters.set('PUP', true);\n    waters.set('VEL', true);\n    waters.set('PYX', true);\n    waters.set('COL', true);\n    waters.internal = true;\n    return waters;\n};\n\nConstellationFilter.get_bayerFamily = function () {\n    var bayer = new ConstellationFilter();\n    bayer.set('HYA', true);\n    bayer.set('DOR', true);\n    bayer.set('VOL', true);\n    bayer.set('APS', true);\n    bayer.set('PAV', true);\n    bayer.set('GRU', true);\n    bayer.set('PHE', true);\n    bayer.set('TUC', true);\n    bayer.set('IND', true);\n    bayer.set('CHA', true);\n    bayer.set('MUS', true);\n    bayer.internal = true;\n    return bayer;\n};\n\nConstellationFilter.get_laCaileFamily = function () {\n    var LaCaile = new ConstellationFilter();\n    LaCaile.set('NOR', true);\n    LaCaile.set('CIR', true);\n    LaCaile.set('TEL', true);\n    LaCaile.set('MIC', true);\n    LaCaile.set('SCL', true);\n    LaCaile.set('FOR', true);\n    LaCaile.set('CAE', true);\n    LaCaile.set('HOR', true);\n    LaCaile.set('OCT', true);\n    LaCaile.set('MEN', true);\n    LaCaile.set('RET', true);\n    LaCaile.set('PIC', true);\n    LaCaile.set('ANT', true);\n    LaCaile.internal = true;\n    return LaCaile;\n};\n\nConstellationFilter.parse = function (val) {\n    var parts = (val).split(',');\n    var cf = new ConstellationFilter();\n    try {\n        for (var i = 0; i < 3; i++) {\n            cf.bits[i] = parseInt(parts[i]);\n        }\n    }\n    catch ($e1) { }\n    return cf;\n};\n\nvar ConstellationFilter$ = {\n    _saveBits: function () {\n        for (var i = 0; i < 3; i++) {\n            this.oldBits[i] = this.bits[i];\n        }\n    },\n\n    _isChanged: function () {\n        for (var i = 0; i < 3; i++) {\n            if (this.oldBits[i] !== this.bits[i]) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    _checkChanged: function () {\n        if (this._isChanged()) {\n            this._fireChanged();\n        }\n    },\n\n    isEnabled: function (abbrev) {\n        var bitID = ConstellationFilter.bitIDs[abbrev];\n        var index = bitID / 32;\n        bitID = bitID % 32;\n        return this.blendState.get_state() && !!((1 << bitID) & this.bits[index]);\n    },\n\n    isSet: function (abbrev) {\n        this._saveBits();\n        var bitID = ConstellationFilter.bitIDs[abbrev];\n        var index = ss.truncate((bitID / 32));\n        bitID = bitID % 32;\n        return !!((1 << bitID) & this.bits[index]);\n    },\n\n    set: function (abbrev, state) {\n        this._saveBits();\n        var bitID = ConstellationFilter.bitIDs[abbrev];\n        var index = bitID / 32;\n        bitID = bitID % 32;\n        if (state) {\n            this.bits[index] = this.bits[index] | (1 << bitID);\n        } else {\n            this.bits[index] = this.bits[index] ^ (1 << bitID);\n        }\n        this._checkChanged();\n    },\n\n    setAll: function (state) {\n        this._saveBits();\n        for (var bitID = 0; bitID < 89; bitID++) {\n            var index = bitID / 32;\n            var bit = bitID % 32;\n            if (state) {\n                this.bits[index] = this.bits[index] | (1 << bit);\n            }\n            else {\n                this.bits[index] = this.bits[index] ^ (1 << bit);\n            }\n        }\n        this._checkChanged();\n    },\n\n    setBits: function (bits) {\n        this._saveBits();\n        for (var i = 0; i < 3; i++) {\n            this.bits[i] = (bits[i * 4]) + ((bits[i * 4 + 1]) << 8) + ((bits[i * 4 + 2]) << 16) + ((bits[i * 4 + 3]) << 24);\n        }\n        this._checkChanged();\n    },\n\n    getBits: function () {\n        var bits = new Array(12);\n        var index = 0;\n        for (var i = 0; i < 3; i++) {\n            bits[index++] = this.bits[i];\n            bits[index++] = (this.bits[i] >> 8);\n            bits[index++] = (this.bits[i] >> 16);\n            bits[index++] = (this.bits[i] >> 24);\n        }\n        return bits;\n    },\n\n    cloneFilter: function (filter) {\n        this._saveBits();\n        for (var i = 0; i < 3; i++) {\n            this.bits[i] = filter.bits[i];\n        }\n        this._checkChanged();\n    },\n\n    clone: function () {\n        var newFilter = new ConstellationFilter();\n        newFilter.cloneFilter(this);\n        return newFilter;\n    },\n\n    combine: function (filter) {\n        this._saveBits();\n        for (var i = 0; i < 3; i++) {\n            this.bits[i] = this.bits[i] | filter.bits[i];\n        }\n        this._checkChanged();\n    },\n\n    remove: function (filter) {\n        this._saveBits();\n        for (var i = 0; i < 3; i++) {\n            this.bits[i] = this.bits[i] & ~filter.bits[i];\n        }\n        this._checkChanged();\n    },\n\n    _fireChanged: function () {\n        if (this.settingsOwned) {\n        }\n    },\n\n    toString: function () {\n        return ss.format('{0},{1},{2}', this.bits[0], this.bits[1], this.bits[2]);\n    }\n};\n\nregisterType(\"ConstellationFilter\", [ConstellationFilter, ConstellationFilter$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Constellations in the sky.\n\nimport { ss } from \"./ss.js\";\nimport { registerType, registerEnum } from \"./typesystem.js\";\nimport { Vector3d } from \"./double3d.js\";\nimport { createPlace, makeNewFolder } from \"./data_globals.js\";\nimport { SimpleLineList } from \"./graphics/primitives3d.js\";\nimport { BlendState } from \"./blend_state.js\";\nimport { Color } from \"./color.js\";\nimport { ConstellationFilter } from \"./constellation_filter.js\";\nimport { Coordinates } from \"./coordinates.js\";\nimport { Settings } from \"./settings.js\";\nimport { Text3d, Text3dBatch } from \"./sky_text.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { WebFile } from \"./web_file.js\";\n\n\n// wwtlib.PointType\n\nexport var PointType = {\n    move: 0,\n    line: 1,\n    dash: 2,\n    start: 3\n};\n\nregisterType(\"PointType\", PointType);\nregisterEnum(\"PointType\", PointType);\n\n\n// wwtlib.Lineset\n\nexport function Lineset(name) {\n    this._name = name;\n    this.points = [];\n}\n\nvar Lineset$ = {\n    get_name: function () {\n        return this._name;\n    },\n\n    set_name: function (value) {\n        this._name = value;\n        return value;\n    },\n\n    add: function (ra, dec, pointType, name) {\n        this.points.push(new Linepoint(ra, dec, pointType, name));\n    }\n};\n\nregisterType(\"Lineset\", [Lineset, Lineset$, null]);\n\n\n// wwtlib.Linepoint\n\nexport function Linepoint(ra, dec, type, name) {\n    this.RA = 0;\n    this.dec = 0;\n    this.pointType = 0;\n    this.name = null;\n    this.RA = ra;\n    this.dec = dec;\n    this.pointType = type;\n    this.name = name;\n}\n\nvar Linepoint$ = {\n    toString: function () {\n        if (ss.emptyString(this.name)) {\n            return Coordinates.formatDMS((((this.RA / 360) * 24 + 12) % 24)) + ', ' + Coordinates.formatDMS(this.dec) + ', ' + this.pointType.toString();\n        } else {\n            return this.name + ', ' + this.pointType.toString();\n        }\n    }\n};\n\nregisterType(\"Linepoint\", [Linepoint, Linepoint$, null]);\n\n\n// wwtlib.Constellations\n\nexport function Constellations() {\n    this._pointCount = 0;\n    this._boundry = false;\n    this._noInterpollation = false;\n    this.readOnly = false;\n    this.radius = 1;\n    this._drawCount = 0;\n    this._constellationVertexBuffers = {};\n}\n\nConstellations.RC = 0.017453292519943;\nConstellations._maxSeperation = 0.745;\nConstellations.containment = null;  // initialized in InitializeConstellations\nConstellations._constToDraw = '';\nConstellations.selectedSegment = null;\nConstellations._artFile = null;\nConstellations.artwork = null;\nConstellations.boundries = null;\nConstellations.pictureBlendStates = {};\n\nConstellations.createBasic = function (name) {\n    var temp = new Constellations();\n    temp._name = name;\n    temp._url = null;\n    temp.lines = [];\n    var $enum1 = ss.enumerate(ss.keys(Constellations.fullNames));\n    while ($enum1.moveNext()) {\n        var abbrv = $enum1.current;\n        temp.lines.push(new Lineset(abbrv));\n    }\n    return temp;\n};\n\nConstellations.create = function (name, url, boundry, noInterpollation, resource) {\n    var temp = new Constellations();\n    temp._noInterpollation = noInterpollation;\n    temp._boundry = boundry;\n    temp._name = name;\n    temp._url = url;\n    temp.getFile();\n    return temp;\n};\n\nConstellations.drawConstellationNames = function (renderContext, opacity, drawColor) {\n    if (Constellations._namesBatch == null) {\n        Constellations.initializeConstellationNames();\n        if (Constellations._namesBatch == null) {\n            return;\n        }\n    }\n    Constellations._namesBatch.draw(renderContext, opacity, drawColor);\n};\n\nConstellations.initializeConstellationNames = function () {\n    if (Constellations.constellationCentroids == null) {\n        return;\n    }\n    Constellations._namesBatch = new Text3dBatch(Settings.get_active().get_constellationLabelsHeight());\n    var $enum1 = ss.enumerate(ss.keys(Constellations.constellationCentroids));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var centroid = Constellations.constellationCentroids[key];\n        var center = Coordinates.raDecTo3dAu(centroid.get_RA(), centroid.get_dec(), 1);\n        var up = Vector3d.create(0, 1, 0);\n        var name = centroid.get_name();\n        if (centroid.get_name() === 'Triangulum Australe') {\n            name = ss.replaceString(name, ' ', '\\n   ');\n        }\n        Constellations._namesBatch.add(new Text3d(center, up, name, Settings.get_active().get_constellationLabelsHeight(), 0.000125));\n    }\n};\n\n// The WWTControl driver will not (and should not) call this function in\n// \"freestanding mode\", because the functionality depends on a\n// worldwidetelescope.org API.\nConstellations.drawArtwork = function (renderContext) {\n    if (Constellations.artwork == null) {\n        if (Constellations._artFile == null) {\n            Constellations._artFile = makeNewFolder();\n            Constellations._artFile.loadFromUrl(URLHelpers.singleton.coreStaticUrl('wwtweb/catalog.aspx?W=hevelius'), Constellations._onArtReady);\n        }\n        return;\n    }\n    Constellations._maxSeperation = Math.max(0.5, Math.cos((renderContext.get_fovAngle() * 2) / 180 * Math.PI));\n    var $enum1 = ss.enumerate(Constellations.artwork);\n    while ($enum1.moveNext()) {\n        var place = $enum1.current;\n        var bs = Constellations.pictureBlendStates[place.get_constellation()];\n        bs.set_targetState(Settings.get_active().get_constellationArtFilter().isSet(place.get_constellation()));\n        if (bs.get_state()) {\n            var reverse = false;\n            var centroid = Constellations.constellationCentroids[place.get_constellation()];\n            if (centroid != null) {\n                var pos = Coordinates.raDecTo3d((reverse) ? -centroid.get_RA() - 6 : centroid.get_RA(), (reverse) ? centroid.get_dec() : centroid.get_dec());\n                if (Vector3d.dot(renderContext.get_viewPoint(), pos) > Constellations._maxSeperation) {\n                    renderContext.drawImageSet(place.get_studyImageset(), 100);\n                }\n            }\n        }\n    }\n};\n\nConstellations._onArtReady = function () {\n    Constellations._artFile.childLoadCallback(Constellations._loadArtList);\n};\n\nConstellations._loadArtList = function () {\n    Constellations.artwork = Constellations._artFile.get_places();\n};\n\n// Repeated invocations of this function are OK.\nConstellations.initializeConstellations = function () {\n    if (Constellations.containment == null) {\n        var url = URLHelpers.singleton.engineAssetUrl('ConstellationNamePositions_EN.txt');\n        Constellations._webFileConstNames = new WebFile(url);\n        Constellations._webFileConstNames.onStateChange = Constellations._loadNames;\n        Constellations._webFileConstNames.send();\n        Constellations.containment = Constellations.create(\n            'Constellations',\n            URLHelpers.singleton.engineAssetUrl('constellations.txt'),\n            true, // \"boundry\"\n            true, // \"noInterpollation\"\n            true, // \"resource\"\n        );\n    }\n};\n\nConstellations._loadNames = function () {\n    if (Constellations._webFileConstNames.get_state() === 2) {\n        alert(Constellations._webFileConstNames.get_message());\n    }\n    else if (Constellations._webFileConstNames.get_state() === 1) {\n        Constellations._centroidsReady(Constellations._webFileConstNames.getText());\n    }\n};\n\nConstellations._centroidsReady = function (file) {\n    Constellations.constellationCentroids = {};\n    Constellations.fullNames = {};\n    Constellations.abbreviations = {};\n    var rows = file.split('\\r\\n');\n    var id = 0;\n    var line;\n    var $enum1 = ss.enumerate(rows);\n\n    while ($enum1.moveNext()) {\n        var row = $enum1.current;\n        line = row;\n        var data = line.split(',');\n        Constellations.fullNames[data[1]] = data[0];\n        Constellations.abbreviations[data[0]] = data[1];\n        ConstellationFilter.bitIDs[data[1]] = id++;\n        Constellations.pictureBlendStates[data[1]] = BlendState.create(true, 1000);\n        Constellations.constellationCentroids[data[1]] = createPlace(data[0], parseFloat(data[3]), parseFloat(data[2]), 128, data[1], 2, 360);\n    }\n\n    ConstellationFilter.buildConstellationFilters();\n};\n\nConstellations.fullName = function (name) {\n    if (ss.keyExists(Constellations.fullNames, name)) {\n        return Constellations.fullNames[name];\n    }\n    return name;\n};\n\nConstellations.abbreviation = function (name) {\n    if (Constellations.abbreviations != null && !ss.emptyString(name) && ss.keyExists(Constellations.abbreviations, name)) {\n        return Constellations.abbreviations[name];\n    }\n    return name;\n};\n\nvar Constellations$ = {\n    get_name: function () {\n        return this._name;\n    },\n\n    set_name: function (value) {\n        this._name = value;\n        return value;\n    },\n\n    getFile: function () {\n        this._webFile = new WebFile(this._url);\n        this._webFile.onStateChange = ss.bind('fileStateChange', this);\n        this._webFile.send();\n    },\n\n    fileStateChange: function () {\n        if (this._webFile.get_state() === 2) {\n            alert(this._webFile.get_message());\n        } else if (this._webFile.get_state() === 1) {\n            this._loadConstellationData(this._webFile.getText());\n        }\n    },\n\n    _loadConstellationData: function (data) {\n        if (this._boundry && !this._noInterpollation) {\n            Constellations.boundries = {};\n        }\n        this.lines = [];\n        var lineSet = null;\n        try {\n            var rows = data.split('\\r\\n');\n            var abrv;\n            var abrvOld = '';\n            var ra;\n            var dec;\n            var lastRa = 0;\n            var type = 0;\n            var $enum1 = ss.enumerate(rows);\n            while ($enum1.moveNext()) {\n                var row = $enum1.current;\n                var line = row;\n                if (line.substr(11, 2) === '- ') {\n                    line = line.substr(0, 11) + ' -' + line.substr(13, (line.length - 13));\n                }\n                if (line.substr(11, 2) === '+ ') {\n                    line = line.substr(0, 11) + ' +' + line.substr(13, (line.length - 13));\n                }\n                dec = parseFloat(line.substr(11, 10));\n                if (this._noInterpollation) {\n                    ra = parseFloat(line.substr(0, 10));\n                }\n                else {\n                    ra = parseFloat(line.substr(0, 10));\n                }\n                abrv = ss.trim(line.substr(23, 4));\n                if (!this._boundry) {\n                    if (!!ss.trim(line.substr(28, 1))) {\n                        type = parseInt(line.substr(28, 1));\n                    }\n                }\n                else {\n                    if (this._noInterpollation && line.substr(28, 1) !== 'O') {\n                        continue;\n                    }\n                }\n                if (abrv !== abrvOld) {\n                    type = 3;\n                    lineSet = new Lineset(abrv);\n                    this.lines.push(lineSet);\n                    if (this._boundry && !this._noInterpollation) {\n                        Constellations.boundries[abrv] = lineSet;\n                    }\n                    abrvOld = abrv;\n                    lastRa = 0;\n                }\n                if (this._noInterpollation) {\n                    if (Math.abs(ra - lastRa) > 12) {\n                        ra = ra - (24 * (((ra - lastRa) < 0) ? -1 : 1));\n                    }\n                    lastRa = ra;\n                }\n                var starName = null;\n                if (line.length > 30) {\n                    starName = ss.trim(line.substr(30));\n                }\n                if (starName == null || starName !== 'Empty') {\n                    lineSet.add(ra, dec, type, starName);\n                }\n                this._pointCount++;\n                type = 1;\n            }\n        }\n        catch ($e2) {\n        }\n    },\n\n    draw: function (renderContext, showOnlySelected, focusConsteallation, clearExisting) {\n        Constellations._maxSeperation = Math.max(0.6, Math.cos((renderContext.get_fovAngle() * 2) / 180 * Math.PI));\n        this._drawCount = 0;\n        var lsSelected = null;\n        if (this.lines == null || Constellations.constellationCentroids == null) {\n            return;\n        }\n        Constellations._constToDraw = focusConsteallation;\n        var $enum1 = ss.enumerate(this.lines);\n        while ($enum1.moveNext()) {\n            var ls = $enum1.current;\n            if (Constellations._constToDraw === ls.get_name() && this._boundry) {\n                lsSelected = ls;\n            }\n            else if (!showOnlySelected || !this._boundry) {\n                this._drawSingleConstellation(renderContext, ls, 1);\n            }\n        }\n        if (lsSelected != null) {\n            this._drawSingleConstellation(renderContext, lsSelected, 1);\n        }\n    },\n\n    _drawSingleConstellation: function (renderContext, ls, opacity) {\n        var reverse = false;\n        var centroid = Constellations.constellationCentroids[ls.get_name()];\n        if (centroid != null) {\n            var pos = Coordinates.raDecTo3d((reverse) ? -centroid.get_RA() - 6 : centroid.get_RA(), (reverse) ? centroid.get_dec() : centroid.get_dec());\n            if (Vector3d.dot(renderContext.get_viewPoint(), pos) < Constellations._maxSeperation) {\n                return;\n            }\n        }\n        if (!ss.keyExists(this._constellationVertexBuffers, ls.get_name())) {\n            var count = ls.points.length;\n            var linelist = new SimpleLineList();\n            linelist.set_depthBuffered(false);\n            this._constellationVertexBuffers[ls.get_name()] = linelist;\n            var currentPoint = new Vector3d();\n            var temp;\n            for (var i = 0; i < count; i++) {\n                if (!ls.points[i].pointType || !i) {\n                    currentPoint = Coordinates.raDecTo3d(ls.points[i].RA, ls.points[i].dec);\n                }\n                else {\n                    temp = Coordinates.raDecTo3d(ls.points[i].RA, ls.points[i].dec);\n                    linelist.addLine(currentPoint, temp);\n                    currentPoint = temp;\n                }\n            }\n            if (this._boundry) {\n                temp = Coordinates.raDecTo3d(ls.points[0].RA, ls.points[0].dec);\n                linelist.addLine(currentPoint, temp);\n            }\n        }\n        var col = 'red';\n        if (this._boundry) {\n            if (Constellations._constToDraw !== ls.get_name()) {\n                col = Settings.get_globalSettings().get_constellationBoundryColor();\n            }\n            else {\n                col = Settings.get_globalSettings().get_constellationSelectionColor();\n            }\n        } else {\n            col = Settings.get_globalSettings().get_constellationFigureColor();\n        }\n        this._constellationVertexBuffers[ls.get_name()].drawLines(renderContext, opacity, Color.load(col));\n    },\n\n    _drawSingleConstellationOld: function (renderContext, ls) {\n        var reverse = false;\n        var centroid = Constellations.constellationCentroids[ls.get_name()];\n        if (centroid != null) {\n            var pos = Coordinates.raDecTo3d((reverse) ? -centroid.get_RA() - 6 : centroid.get_RA(), (reverse) ? centroid.get_dec() : centroid.get_dec());\n            if (Vector3d.dot(renderContext.get_viewPoint(), pos) < Constellations._maxSeperation) {\n                return;\n            }\n        }\n        this._drawCount++;\n        var col;\n        if (this._boundry) {\n            if (Constellations._constToDraw !== ls.get_name()) {\n                col = Settings.get_globalSettings().get_constellationBoundryColor();\n            }\n            else {\n                col = Settings.get_globalSettings().get_constellationSelectionColor();\n            }\n        } else {\n            col = Settings.get_globalSettings().get_constellationFigureColor();\n        }\n        if (renderContext.gl == null) {\n            var ctx = renderContext.device;\n            var count = ls.points.length;\n            var lastPoint = new Vector3d();\n            ctx.save();\n            var linePending = false;\n            ctx.beginPath();\n            ctx.strokeStyle = col;\n            ctx.lineWidth = 2;\n            ctx.globalAlpha = 0.25;\n            for (var i = 0; i < count; i++) {\n                if (!ls.points[i].pointType || !i) {\n                    if (linePending) {\n                        ctx.stroke();\n                    }\n                    lastPoint = renderContext.WVP.transform(Coordinates.raDecTo3d(ls.points[i].RA, ls.points[i].dec));\n                    ctx.moveTo(lastPoint.x, lastPoint.y);\n                }\n                else {\n                    var newPoint = renderContext.WVP.transform(Coordinates.raDecTo3d(ls.points[i].RA, ls.points[i].dec));\n                    ctx.lineTo(newPoint.x, newPoint.y);\n                    linePending = true;\n                }\n            }\n            if (this._boundry) {\n                ctx.closePath();\n            }\n            ctx.stroke();\n            ctx.restore();\n        } else {\n            //todo add webgl method of drawing\n        }\n    },\n\n    findConstellationForPoint: function (ra, dec) {\n        if (dec > 88.402 || this.lines == null) {\n            return 'UMI';\n        }\n        var $enum1 = ss.enumerate(this.lines);\n        while ($enum1.moveNext()) {\n            var ls = $enum1.current;\n            var count = ls.points.length;\n            var i;\n            var j;\n            var inside = false;\n            for (i = 0, j = count - 1; i < count; j = i++) {\n                if ((((ls.points[i].dec <= dec) && (dec < ls.points[j].dec)) || ((ls.points[j].dec <= dec) && (dec < ls.points[i].dec))) && (ra < (ls.points[j].RA - ls.points[i].RA) * (dec - ls.points[i].dec) / (ls.points[j].dec - ls.points[i].dec) + ls.points[i].RA)) {\n                    inside = !inside;\n                }\n            }\n            if (inside) {\n                return ls.get_name();\n            }\n        }\n        if (ra > 0) {\n            return this.findConstellationForPoint(ra - 24, dec);\n        }\n        // Ursa Minor is tricky since it wraps around the poles. It can evade the point in rect test\n        if (dec > 65.5) {\n            return 'UMI';\n        }\n        if (dec < -65.5) {\n            return 'OCT';\n        }\n        return 'Error';\n    }\n};\n\nregisterType(\"Constellations\", [Constellations, Constellations$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Routines for coordinate transformations\n//\n// NB: these functions are redundant in the webclient because we don't have the\n// single-precision `Vector3` type that's distinguished from `Vector3d`. To\n// minimize the code delta from Windows, we keep both names for simplicity. But\n// the `...Rad` functions are added because ScriptSharp can't deal with\n// overloads.\n\nimport { registerType } from \"./typesystem.js\";\nimport { ss } from \"./ss.js\";\nimport { Util } from \"./baseutil.js\";\nimport { Vector2d, Vector3d } from \"./double3d.js\";\n\n\n// wwtlib.Coordinates\n\nexport function Coordinates(ascention, declination) {\n    // Held in radians\n    this._ascention = 0;\n    this._declination = 0;\n    this._ascention = ascention + (Math.PI * 80) % (Math.PI * 2);\n    this._declination = declination;\n}\n\nCoordinates.RC = (3.1415927 / 180);\nCoordinates.RCRA = (3.1415927 / 12);\nCoordinates.radius = 1;\nCoordinates._rotationMatrix = null;\n\nCoordinates.geoTo3d = function (lat, lng) {\n    return Vector3d.create(Math.cos(lng * Coordinates.RC) * Math.cos(lat * Coordinates.RC) * 1, Math.sin(lat * Coordinates.RC) * 1, Math.sin(lng * Coordinates.RC) * Math.cos(lat * Coordinates.RC) * 1);\n};\n\nCoordinates.geoTo3dDouble = function (lat, lng) {\n    return Vector3d.create(Math.cos(lng * Coordinates.RC) * Math.cos(lat * Coordinates.RC) * 1, Math.sin(lat * Coordinates.RC) * 1, Math.sin(lng * Coordinates.RC) * Math.cos(lat * Coordinates.RC) * 1);\n};\n\nCoordinates.geoTo3dRad = function (lat, lng, radius) {\n    return Vector3d.create(Math.cos(lng * Coordinates.RC) * Math.cos(lat * Coordinates.RC) * radius, Math.sin(lat * Coordinates.RC) * radius, Math.sin(lng * Coordinates.RC) * Math.cos(lat * Coordinates.RC) * radius);\n};\n\nCoordinates.raDecTo3d = function (ra, dec) {\n    return Vector3d.create(Math.cos(ra * Coordinates.RCRA) * Math.cos(dec * Coordinates.RC) * 1, Math.sin(dec * Coordinates.RC) * 1, Math.sin(ra * Coordinates.RCRA) * Math.cos(dec * Coordinates.RC) * 1);\n};\n\nCoordinates.raDecTo3dAu = function (ra, dec, au) {\n    return Vector3d.create(Math.cos(ra * Coordinates.RCRA) * Math.cos(dec * Coordinates.RC) * au, Math.sin(dec * Coordinates.RC) * au, Math.sin(ra * Coordinates.RCRA) * Math.cos(dec * Coordinates.RC) * au);\n};\n\nCoordinates.raDecTo3dMat = function (ra, dec, mat) {\n    return Vector3d._transformCoordinate(Vector3d.create((Math.cos(ra * Coordinates.RCRA) * Math.cos(dec * Coordinates.RC) * 1), (Math.sin(dec * Coordinates.RC) * 1), (Math.sin(ra * Coordinates.RCRA) * Math.cos(dec * Coordinates.RC) * 1)), mat);\n};\n\nCoordinates.raDecTo3dPointRad = function (point, radius) {\n    point.set_dec(-point.get_dec());\n    return Vector3d.create((Math.cos(point.get_RA() * Coordinates.RCRA) * Math.cos(point.get_dec() * Coordinates.RC) * radius), (Math.sin(point.get_dec() * Coordinates.RC) * radius), (Math.sin(point.get_RA() * Coordinates.RCRA) * Math.cos(point.get_dec() * Coordinates.RC) * radius));\n};\n\nCoordinates.sterographicTo3d = function (x, y, radius, standardLat, meridean, falseEasting, falseNorthing, scale, north) {\n    var lat = 90;\n    var lng = 0;\n    x -= falseEasting;\n    y -= falseNorthing;\n    if (!!x || !!y) {\n        var re = (1 + Math.sin(Math.abs(standardLat) / 180 * Math.PI)) * 6371000 / scale;\n        var rere = re * re;\n        var c1 = 180 / Math.PI;\n        if (!x) {\n            lng = (90 * y < 0) ? -1 : 1;\n        } else {\n            lng = Math.atan2(y, x) * c1;\n        }\n        var len = (x * x) + (y * y);\n        lat = (rere - len) / (rere + len);\n        lat = Math.asin(lat) * c1;\n        if (!north) {\n            lat = -lat;\n            lng = -lng;\n            meridean = -meridean;\n        }\n    }\n    return Coordinates.geoTo3dRad(lat, 90 + lng + meridean, radius);\n};\n\nCoordinates.equitorialToHorizon = function (equitorial, location, utc) {\n    var hourAngle = Coordinates.mstFromUTC2(utc, location.get_lng()) - (equitorial.get_RA() * 15);\n    if (hourAngle < 0) {\n        hourAngle += 360;\n    }\n    var ha = hourAngle * Coordinates.RC;\n    var dec = equitorial.get_dec() * Coordinates.RC;\n    var lat = location.get_lat() * Coordinates.RC;\n    var sinAlt = Math.sin(dec) * Math.sin(lat) + Math.cos(dec) * Math.cos(lat) * Math.cos(ha);\n    var altitude = Math.asin(sinAlt);\n    var cosAzimith = (Math.sin(dec) - Math.sin(altitude) * Math.sin(lat)) / (Math.cos(altitude) * Math.cos(lat));\n    var azimuth = Math.acos(cosAzimith);\n    var altAz = new Coordinates(azimuth, altitude);\n    if (Math.sin(ha) > 0) {\n        altAz.set_az((360 - altAz.get_az()));\n    }\n    return altAz;\n};\n\nCoordinates.horizonToEquitorial = function (altAz, location, utc) {\n    var hourAngle = Coordinates.mstFromUTC2(utc, location.get_lng());\n    var haLocal;\n    var declination;\n    var raDec = Coordinates._altAzToRaDec(altAz.get_alt() * Coordinates.RC, altAz.get_az() * Coordinates.RC, location.get_lat() * Coordinates.RC);\n    haLocal = raDec.x;\n    declination = raDec.y;\n    var ha = (haLocal / Coordinates.RC);\n    hourAngle += ha;\n    if (hourAngle < 0) {\n        hourAngle += 360;\n    }\n    if (hourAngle > 360) {\n        hourAngle -= 360;\n    }\n    return Coordinates.fromRaDec(hourAngle / 15, declination / Coordinates.RC);\n};\n\nCoordinates._altAzToRaDec = function (Altitude, Azimuth, Latitude) {\n    var hrAngle = 0;\n    var dec = 0;\n    Azimuth = Math.PI - Azimuth;\n    if (Azimuth < 0) {\n        Azimuth += Math.PI * 2;\n    }\n    hrAngle = Math.atan2(Math.sin(Azimuth), Math.cos(Azimuth) * Math.sin(Latitude) + Math.tan(Altitude) * Math.cos(Latitude));\n    if (hrAngle < 0) {\n        hrAngle += Math.PI * 2;\n    }\n    dec = Math.asin(Math.sin(Latitude) * Math.sin(Altitude) - Math.cos(Latitude) * Math.cos(Altitude) * Math.cos(Azimuth));\n    return Vector2d.create(hrAngle, dec);\n};\n\nCoordinates.mstFromUTC2 = function (utc, lng) {\n    var year = utc.getUTCFullYear();\n    var month = utc.getUTCMonth() + 1;\n    var day = utc.getUTCDate();\n    var hour = utc.getUTCHours();\n    var minute = utc.getUTCMinutes();\n    var second = utc.getUTCSeconds() + utc.getUTCMilliseconds() / 1000;\n    if (month === 1 || month === 2) {\n        year -= 1;\n        month += 12;\n    }\n    var a = ss.truncate((year / 100));\n    var b = 2 - a + Math.floor((a / 4));\n    var c = Math.floor(365.25 * year);\n    var d = Math.floor(30.6001 * (month + 1));\n    var julianDays;\n    var julianCenturies;\n    var mst;\n    julianDays = b + c + d - 730550.5 + day + (hour + minute / 60 + second / 3600) / 24;\n    julianCenturies = julianDays / 36525;\n    mst = 280.46061837 + 360.98564736629 * julianDays + 0.000387933 * julianCenturies * julianCenturies - julianCenturies * julianCenturies * julianCenturies / 38710000 + lng;\n    if (mst > 0) {\n        while (mst > 360) {\n            mst = mst - 360;\n        }\n    }\n    else {\n        while (mst < 0) {\n            mst = mst + 360;\n        }\n    }\n    return mst;\n};\n\nCoordinates.cartesianToSpherical = function (vector) {\n    var ascention;\n    var declination;\n    var radius = Math.sqrt(vector.x * vector.x + vector.y * vector.y + vector.z * vector.z);\n    var XZ = Math.sqrt(vector.x * vector.x + vector.z * vector.z);\n    declination = Math.asin(vector.y / radius);\n    if (0 < vector.x) {\n        ascention = Math.asin(vector.z / XZ);\n    }\n    else if (0 > vector.x) {\n        ascention = Math.PI - Math.asin(vector.z / XZ);\n    }\n    else {\n        ascention = 0;\n    }\n    return new Coordinates(ascention, declination);\n};\n\nCoordinates.cartesianToSpherical2 = function (vector) {\n    var rho = Math.sqrt(vector.x * vector.x + vector.y * vector.y + vector.z * vector.z);\n    var longitude = Math.atan2(vector.z, vector.x);\n    var latitude = Math.asin(vector.y / rho);\n    return new Coordinates(longitude, latitude);\n};\n\nCoordinates.cartesianToSphericalSky = function (vector) {\n    var rho = Math.sqrt(vector.x * vector.x + vector.y * vector.y + vector.z * vector.z);\n    var ra = Math.atan2(vector.z, vector.x);\n    var dec = Math.asin(-vector.y / rho);\n    return Vector2d.create(ra / Math.PI * 12, dec / Math.PI * 180);\n};\n\nCoordinates.sphericalSkyToCartesian = function (vector) {\n    var ra = vector.x * (Math.PI / 12);\n    var dec = vector.y * (Math.PI / 180);\n    var x = Math.cos(ra) * Math.cos(dec);\n    var y = -Math.sin(dec);\n    var z = Math.sin(ra) * Math.cos(dec);\n    return Vector3d.create(x, y, z);\n};\n\nCoordinates.cartesianToLatLng = function (vector) {\n    var rho = Math.sqrt(vector.x * vector.x + vector.y * vector.y + vector.z * vector.z);\n    var longitude = Math.atan2(vector.z, vector.x);\n    var latitude = Math.asin(vector.y / rho);\n    return Vector2d.create(longitude * 180 / Math.PI, latitude * 180 / Math.PI);\n};\n\nCoordinates.cartesianToSpherical3 = function (vector) {\n    var rho = Math.sqrt(vector.x * vector.x + vector.y * vector.y + vector.z * vector.z);\n    var longitude = Math.atan2(vector.z, vector.x);\n    var latitude = Math.asin(vector.y / rho);\n    return new Coordinates(longitude, latitude);\n};\n\nCoordinates.sign = function (target) {\n    return (target < 0) ? -1 : 1;\n};\n\nCoordinates.formatDMSSign = function (angle, sign) {\n    try {\n        angle += (Coordinates.sign(angle) * 0.0001388888888889);\n        var degrees = ss.truncate(angle);\n        var minutes = ((angle - ss.truncate(angle)) * 60);\n        var seconds = ((minutes - ss.truncate(minutes)) * 60);\n        if (sign) {\n            var signString = (angle > 0) ? '+' : '-';\n            return ss.format('{3}{0:00;00}:{1:00}:{2:00}', degrees, Math.abs(ss.truncate(minutes)), Math.abs(ss.truncate(seconds)), signString);\n        } else {\n            return ss.format('{0:00}:{1:00}:{2:00}', degrees, Math.abs(ss.truncate(minutes)), Math.abs(ss.truncate(seconds)));\n        }\n    }\n    catch ($e1) {\n        return '';\n    }\n};\n\nCoordinates.twoPlaces = function (val) {\n    var num = val.toString();\n    if (num.length < 2) {\n        num = '0' + num;\n    }\n    return num;\n};\n\nCoordinates.formatDMS = function (angle) {\n    try {\n        angle += (((angle < 0) ? -1 : 1) * 0.0001388888888889);\n        var degrees = Math.abs(ss.truncate(angle));\n        var minutes = ((angle - ss.truncate(angle)) * 60);\n        var seconds = ((minutes - ss.truncate(minutes)) * 60);\n        var sign = (angle < 0) ? '-' : '';\n        return ss.format('{3}{0}:{1}:{2}', Math.abs(degrees), Coordinates.twoPlaces(Math.abs(ss.truncate(minutes))), Coordinates.twoPlaces(Math.abs(ss.truncate(seconds))), sign);\n    }\n    catch ($e1) {\n        return '';\n    }\n};\n\nCoordinates.formatDMSWide = function (angle) {\n    try {\n        angle += (Coordinates.sign(angle) * 0.0001388888888889);\n        var degrees = Math.abs(ss.truncate(angle));\n        var minutes = ((angle - ss.truncate(angle)) * 60);\n        var seconds = ((minutes - ss.truncate(minutes)) * 60);\n        var sign = (angle < 0) ? '-' : '';\n        return ss.format('{3}{0:00} : {1:00} : {2:00}', degrees, Math.abs(ss.truncate(minutes)), Math.abs(ss.truncate(seconds)), sign);\n    }\n    catch ($e1) {\n        return '';\n    }\n};\n\nCoordinates.formatHMS = function (angle) {\n    try {\n        angle += (Coordinates.sign(angle) * 0.0001388888888889);\n        var degrees = ss.truncate(angle);\n        var minutes = ((angle - ss.truncate(angle)) * 60);\n        var seconds = ((minutes - ss.truncate(minutes)) * 60);\n        return ss.format('{0:00}h{1:00}m{2:00}s', degrees, Math.abs(ss.truncate(minutes)), Math.abs(ss.truncate(seconds)));\n    }\n    catch ($e1) {\n        return '';\n    }\n};\n\nCoordinates.parseRA = function (data, degrees) {\n    data = ss.trim(data).toLowerCase();\n    if (data.indexOf('d') > -1 || data.indexOf('\\u00b0') > -1) {\n        degrees = true;\n    }\n    if (data.indexOf('h') > -1 || data.indexOf(':') > -1) {\n        degrees = false;\n    }\n    var ra = Coordinates.parse(data) / ((degrees) ? 15 : 1);\n    return Math.max(Math.min(ra, 24), 0);\n};\n\nCoordinates.parseDec = function (data) {\n    var dec = Coordinates.parse(data);\n    return Math.max(Math.min(dec, 90), -90);\n};\n\nCoordinates.parse = function (data) {\n    try {\n        data = ss.trim(data).toLowerCase();\n        data = ss.replaceString(ss.replaceString(ss.replaceString(ss.replaceString(ss.replaceString(ss.replaceString(data, 'd ', 'd'), 'h ', 'h'), 'm ', 'm'), 's ', 's'), \"' \", \"'\"), '\" ', '\"');\n        if (Util.stringContains(data, [':', ' ', 'd', 'h', 'm', 's', \"'\", '\"', '\\u00b0'])) {\n            var hours = 0;\n            var minutes = 0;\n            var seconds = 0;\n            var sign = 0;\n            var parts = Util.splitString(data, [':', ' ', 'd', 'h', 'm', 's', \"'\", '\"', '\\u00b0']);\n            if (parts.length > 0) {\n                if (!ss.emptyString(parts[0])) {\n                    hours = Math.abs(parseFloat(parts[0]));\n                    sign = (parseFloat(parts[0]) < 0) ? -1 : 1;\n                    if (parts[0].indexOf('-') > -1) {\n                        sign = -1;\n                    }\n                }\n            }\n            if (parts.length > 1) {\n                if (!ss.emptyString(parts[1])) {\n                    minutes = parseFloat(parts[1]);\n                }\n            }\n            if (parts.length > 2) {\n                if (!ss.emptyString(parts[2])) {\n                    seconds = parseFloat(parts[2]);\n                }\n            }\n            if (!sign) {\n                sign = 1;\n            }\n            return sign * (hours + minutes / 60 + seconds / 3600);\n        } else {\n            var val = 0;\n            try {\n                val = parseFloat(data);\n            }\n            catch ($e1) {\n                val = 0;\n            }\n            return val;\n        }\n    }\n    catch ($e2) {\n        return 0;\n    }\n};\n\nCoordinates.fromRaDec = function (ra, dec) {\n    return new Coordinates((ra - 12) * 15 * Coordinates.RC, dec * Coordinates.RC);\n};\n\nCoordinates.fromLatLng = function (lat, lng) {\n    return new Coordinates(lng * Coordinates.RC, lat * Coordinates.RC);\n};\n\nCoordinates.dmsToDegrees = function (Degrees, Minutes, Seconds) {\n    return Degrees + Minutes / 60 + Seconds / 3600;\n};\n\nCoordinates.degreesToRadians = function (Degrees) {\n    return Degrees * 0.0174532925199433;\n};\n\nCoordinates.radiansToDegrees = function (Radians) {\n    return Radians * 57.2957795130823;\n};\n\nCoordinates.radiansToHours = function (Radians) {\n    return Radians * 3.81971863420549;\n};\n\nCoordinates.hoursToRadians = function (Hours) {\n    return Hours * 0.261799387799149;\n};\n\nCoordinates.hoursToDegrees = function (Hours) {\n    return Hours * 15;\n};\n\nCoordinates.degreesToHours = function (Degrees) {\n    return Degrees / 15;\n};\n\nCoordinates.PI = function () {\n    return 3.14159265358979;\n};\n\nCoordinates.mapTo0To360Range = function (Degrees) {\n    var Value = Degrees;\n    while (Value < 0) {\n        Value += 360;\n    }\n    while (Value > 360) {\n        Value -= 360;\n    }\n    return Value;\n};\n\nCoordinates.mapTo0To24Range = function (HourAngle) {\n    var Value = HourAngle;\n    while (Value < 0) {\n        Value += 24;\n    }\n    while (Value > 24) {\n        Value -= 24;\n    }\n    return Value;\n};\n\nCoordinates.meanObliquityOfEcliptic = function (JD) {\n    var U = (JD - 2451545) / 3652500;\n    var Usquared = U * U;\n    var Ucubed = Usquared * U;\n    var U4 = Ucubed * U;\n    var U5 = U4 * U;\n    var U6 = U5 * U;\n    var U7 = U6 * U;\n    var U8 = U7 * U;\n    var U9 = U8 * U;\n    var U10 = U9 * U;\n    return Coordinates.dmsToDegrees(23, 26, 21.448) - Coordinates.dmsToDegrees(0, 0, 4680.93) * U - Coordinates.dmsToDegrees(0, 0, 1.55) * Usquared + Coordinates.dmsToDegrees(0, 0, 1999.25) * Ucubed - Coordinates.dmsToDegrees(0, 0, 51.38) * U4 - Coordinates.dmsToDegrees(0, 0, 249.67) * U5 - Coordinates.dmsToDegrees(0, 0, 39.05) * U6 + Coordinates.dmsToDegrees(0, 0, 7.12) * U7 + Coordinates.dmsToDegrees(0, 0, 27.87) * U8 + Coordinates.dmsToDegrees(0, 0, 5.79) * U9 + Coordinates.dmsToDegrees(0, 0, 2.45) * U10;\n};\n\nCoordinates.j2000toGalactic = function (J2000RA, J2000DEC) {\n    var J2000pos = [Math.cos(J2000RA / 180 * Math.PI) * Math.cos(J2000DEC / 180 * Math.PI), Math.sin(J2000RA / 180 * Math.PI) * Math.cos(J2000DEC / 180 * Math.PI), Math.sin(J2000DEC / 180 * Math.PI)];\n    if (Coordinates._rotationMatrix == null) {\n        Coordinates._rotationMatrix = new Array(3);\n        Coordinates._rotationMatrix[0] = [-0.0548755604, -0.8734370902, -0.4838350155];\n        Coordinates._rotationMatrix[1] = [0.4941094279, -0.44482963, 0.7469822445];\n        Coordinates._rotationMatrix[2] = [-0.867666149, -0.1980763734, 0.4559837762];\n    }\n    var Galacticpos = new Array(3);\n    for (var i = 0; i < 3; i++) {\n        Galacticpos[i] = J2000pos[0] * Coordinates._rotationMatrix[i][0] + J2000pos[1] * Coordinates._rotationMatrix[i][1] + J2000pos[2] * Coordinates._rotationMatrix[i][2];\n    }\n    var GalacticL2 = Math.atan2(Galacticpos[1], Galacticpos[0]);\n    if (GalacticL2 < 0) {\n        GalacticL2 = GalacticL2 + 2 * Math.PI;\n    }\n    if (GalacticL2 > 2 * Math.PI) {\n        GalacticL2 = GalacticL2 - 2 * Math.PI;\n    }\n    var GalacticB2 = Math.atan2(Galacticpos[2], Math.sqrt(Galacticpos[0] * Galacticpos[0] + Galacticpos[1] * Galacticpos[1]));\n    return [GalacticL2 / Math.PI * 180, GalacticB2 / Math.PI * 180];\n};\n\nCoordinates.galacticTo3dDouble = function (l, b) {\n    var result = Coordinates.galactictoJ2000(l, b);\n    return Coordinates.raDecTo3dAu(result[0] / 15, result[1], 1);\n};\n\nCoordinates.galactictoJ2000 = function (GalacticL2, GalacticB2) {\n    var Galacticpos = [Math.cos(GalacticL2 / 180 * Math.PI) * Math.cos(GalacticB2 / 180 * Math.PI), Math.sin(GalacticL2 / 180 * Math.PI) * Math.cos(GalacticB2 / 180 * Math.PI), Math.sin(GalacticB2 / 180 * Math.PI)];\n    if (Coordinates._rotationMatrix == null) {\n        Coordinates._rotationMatrix = new Array(3);\n        Coordinates._rotationMatrix[0] = [-0.0548755604, -0.8734370902, -0.4838350155];\n        Coordinates._rotationMatrix[1] = [0.4941094279, -0.44482963, 0.7469822445];\n        Coordinates._rotationMatrix[2] = [-0.867666149, -0.1980763734, 0.4559837762];\n    }\n    var J2000pos = new Array(3);\n    for (var i = 0; i < 3; i++) {\n        J2000pos[i] = Galacticpos[0] * Coordinates._rotationMatrix[0][i] + Galacticpos[1] * Coordinates._rotationMatrix[1][i] + Galacticpos[2] * Coordinates._rotationMatrix[2][i];\n    }\n    var J2000RA = Math.atan2(J2000pos[1], J2000pos[0]);\n    if (J2000RA < 0) {\n        J2000RA = J2000RA + 2 * Math.PI;\n    }\n    if (J2000RA > 2 * Math.PI) {\n        J2000RA = J2000RA - 2 * Math.PI;\n    }\n    var J2000DEC = Math.atan2(J2000pos[2], Math.sqrt(J2000pos[0] * J2000pos[0] + J2000pos[1] * J2000pos[1]));\n    return [J2000RA / Math.PI * 180, J2000DEC / Math.PI * 180];\n};\n\nvar Coordinates$ = {\n    distance: function (pointB) {\n        var y = this.get_lat();\n        var x = this.get_lng() * Math.cos(y * Coordinates.RC);\n        var y1 = pointB.get_lat();\n        var x1 = pointB.get_lng() * Math.cos(y1 * Coordinates.RC);\n        return Math.sqrt((y - y1) * (y - y1) + (x - x1) * (x - x1));\n    },\n\n    distance3d: function (pointB) {\n        var pnt1 = Coordinates.geoTo3dDouble(pointB.get_lat(), pointB.get_lng());\n        var pnt2 = Coordinates.geoTo3dDouble(this.get_lat(), this.get_lng());\n        var pntDiff = Vector3d.subtractVectors(pnt1, pnt2);\n        return pntDiff.length() / Coordinates.RC;\n    },\n\n    angle: function (pointB) {\n        var y = this.get_lat();\n        var x = this.get_lng() * Math.cos(y * Coordinates.RC);\n        var y1 = pointB.get_lat();\n        var x1 = pointB.get_lng() * Math.cos(y1 * Coordinates.RC);\n        return Math.atan2((y1 - y), (x1 - x));\n    },\n\n    get_RA: function () {\n        return (((this._ascention / Math.PI) * 12) + 12) % 24;\n    },\n\n    set_RA: function (value) {\n        this._ascention = (value / 12) * Math.PI;\n        return value;\n    },\n\n    get_dec: function () {\n        return this._declination / Coordinates.RC;\n    },\n\n    set_dec: function (value) {\n        this._declination = value * Coordinates.RC;\n        return value;\n    },\n\n    get_lat: function () {\n        return this._declination / Coordinates.RC;\n    },\n\n    set_lat: function (value) {\n        this._declination = value * Coordinates.RC;\n        return value;\n    },\n\n    get_lng: function () {\n        var lng = this._ascention / Coordinates.RC;\n        if (lng <= 180) {\n            return lng;\n        } else {\n            return (-180 + (180 - lng));\n        }\n    },\n\n    set_lng: function (value) {\n        //todo This was broken check callers to see what effect it had.\n        this._ascention = ((value * Coordinates.RC) + (Math.PI * 2) % (Math.PI * 2));\n        return value;\n    },\n\n    get_alt: function () {\n        return this._declination / Coordinates.RC;\n    },\n\n    set_alt: function (value) {\n        this._declination = value * Coordinates.RC;\n        return value;\n    },\n\n    get_az: function () {\n        return this._ascention / Coordinates.RC;\n    },\n\n    set_az: function (value) {\n        this._ascention = value * Coordinates.RC;\n        return value;\n    },\n\n    toString: function () {\n        return ss.format('Lat: {0}, Lng: {1}', this.get_lat(), this.get_lng());\n    }\n};\n\nregisterType(\"Coordinates\", [Coordinates, Coordinates$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Various global variables associated with data assets.\n//\n// See `render_globals.js` for a general rationale for this kind of module.\n\n// This used to be WWTControl(.singleton).freestandingMode. It sets whether the\n// engine will avoid accessing the central WWT servers.\nexport var freestandingMode = false;\n\nexport function set_freestandingMode(value) {\n    freestandingMode = !!value;\n}\n\n// This is equivalent to `new HipsProperties(imageset)`. We abstract\n// the function to avoid circular dependencies in the type hierarchy.\nexport var makeNewHipsProperties = null;\n\nexport function set_makeNewHipsProperties(value) {\n    makeNewHipsProperties = value;\n}\n\n// This is equivalent to `new Folder()`. We abstract\n// the function to avoid circular dependencies in the type hierarchy.\nexport var makeNewFolder = null;\n\nexport function set_makeNewFolder(value) {\n    makeNewFolder = value;\n}\n\n// This is equivalent to `Place.create(name, lat, lng, classification,\n// constellation, type, zoomFactor)`. We abstract the function to avoid circular\n// dependencies in the type hierarchy.\nexport var createPlace = null;\n\nexport function set_createPlace(value) {\n    createPlace = value;\n}\n\n// This is another way to access `WWTControl.singleton`. It's the\n// global singleton WWTControl instance.\nexport var globalWWTControl = null;\n\nexport function set_globalWWTControl(value) {\n    globalWWTControl = value;\n}\n\n// This is another way to access the `WWTControl.scriptInterface` singleton. It's\n// the global singleton ScriptInterface instance.\nexport var globalScriptInterface = null;\n\nexport function set_globalScriptInterface(value) {\n    globalScriptInterface = value;\n}\n\n// This is another way to access `LayerManager.setVisibleLayerList()`. Once\n// again, we need this to break some circular dependencies in the module\n// structure.\nexport var setManagerVisibleLayerList = null;\n\nexport function set_setManagerVisibleLayerList(value) {\n    setManagerVisibleLayerList = value;\n}\n\n// This is another way to access `TourDocument.fromUrlRaw()`.  Once again, we\n// need this to break some circular dependencies in the module structure.\n\nexport var tourDocumentFromUrlRaw = null;\n\nexport function set_tourDocumentFromUrlRaw(value) {\n    tourDocumentFromUrlRaw = value;\n}\n\n// This is another way to access `LayerManager.getAllMaps()`.  Once again, we\n// need this to break some circular dependencies in the module structure.\n\nexport var layerManagerGetAllMaps = null;\n\nexport function set_layerManagerGetAllMaps(value) {\n    layerManagerGetAllMaps = value;\n}\n\n// This is another way to access `Wtml.getWtmlFile()`.  Once again, we\n// need this to break some circular dependencies in the module structure.\n\nexport var loadWtmlFile = null;\n\nexport function set_loadWtmlFile(value) {\n    loadWtmlFile = value;\n}\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Basic vector datatypes and the like.\n\nimport { registerType } from \"./typesystem.js\";\nimport { ss } from \"./ss.js\";\nimport { Color } from \"./color.js\";\nimport { tileUvMultiple } from \"./render_globals.js\";\n\n\n// Break some circular dependencies\n//\n// `Vector2d.cartesianToSpherical2` is almost the same as\n// `Coordinates.cartesianToSpherical2`, but the resulting angles are measured in\n// degrees rather than radians, and the Coordinates class applies some\n// transformations in various places. Out of an abundance of caution we\n// reproduce its calculations rotely.\n\nconst RC = (3.1415927 / 180); // not thrilled about the low precision!\n\nfunction geoTo3dDouble(lat, lng) {\n    return Vector3d.create(\n        Math.cos(lng * RC) * Math.cos(lat * RC) * 1,\n        Math.sin(lat * RC) * 1,\n        Math.sin(lng * RC) * Math.cos(lat * RC) * 1\n    );\n}\n\nfunction coords_cartesianToSpherical2(vector) {\n    var rho = Math.sqrt(vector.x * vector.x + vector.y * vector.y + vector.z * vector.z);\n    var longitude = Math.atan2(vector.z, vector.x);\n    var latitude = Math.asin(vector.y / rho);\n\n    // I don't love this approach but it's what the Coords constructor does\n    longitude = longitude + (Math.PI * 80) % (Math.PI * 2);\n\n    // Coordinates.get_lng():\n    var lng = longitude / RC;\n    if (lng > 180) {\n        lng = (-180 + (180 - lng));\n    }\n\n    // Coordinates.get_lat():\n    var lat = latitude / RC;\n\n    return [lat, lng];\n}\n\n\n// wwtlib.LocationHint\n//\n// Summary:\n//     Describes a custom vertex format structure that contains position and one\n//     set of texture coordinates.\n\nexport var LocationHint = {\n    slash: 0,\n    backslash: 1,\n    top: 2\n};\n\nregisterType(\"LocationHint\", LocationHint);\n\n\n// wwtlib.PositionTexture\n\nexport function PositionTexture() {\n    this.tu = 0;\n    this.tv = 0;\n    this.position = new Vector3d();\n}\n\n// Summary:\n//     Initializes a new instance of the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured\n//     class.\n//\n// Parameters:\n//   pos:\n//     A Microsoft.DirectX.Vector3d object that contains the vertex position.\n//\n//   u:\n//     Floating-point value that represents the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured.#ctor()\n//     component of the texture coordinate.\n//\n//   v:\n//     Floating-point value that represents the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured.#ctor()\n//     component of the texture coordinate.\nPositionTexture.createPos = function (pos, u, v) {\n    var temp = new PositionTexture();\n    temp.tu = u * tileUvMultiple;\n    temp.tv = v * tileUvMultiple;\n    temp.position = pos;\n    return temp;\n};\n\nPositionTexture.createPosRaw = function (pos, u, v) {\n    var temp = new PositionTexture();\n    temp.tu = u;\n    temp.tv = v;\n    temp.position = pos;\n    return temp;\n};\n\nPositionTexture.createPosSize = function (pos, u, v, width, height) {\n    var temp = new PositionTexture();\n    temp.tu = u * width;\n    temp.tv = v * height;\n    temp.position = pos;\n    return temp;\n};\n\n// Summary:\n//     Initializes a new instance of the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured\n//     class.\n//\n// Parameters:\n//   xvalue:\n//     Floating-point value that represents the x coordinate of the position.\n//\n//   yvalue:\n//     Floating-point value that represents the y coordinate of the position.\n//\n//   zvalue:\n//     Floating-point value that represents the z coordinate of the position.\n//\n//   u:\n//     Floating-point value that represents the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured.#ctor()\n//     component of the texture coordinate.\n//\n//   v:\n//     Floating-point value that represents the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured.#ctor()\n//     component of the texture coordinate.\nPositionTexture.create = function (xvalue, yvalue, zvalue, u, v) {\n    var temp = new PositionTexture();\n    temp.position = Vector3d.create(xvalue, yvalue, zvalue);\n    temp.tu = u * tileUvMultiple;\n    temp.tv = v * tileUvMultiple;\n    return temp;\n};\n\nvar PositionTexture$ = {\n    copy: function () {\n        var temp = new PositionTexture();\n        temp.position = Vector3d.makeCopy(this.position);\n        temp.tu = this.tu;\n        temp.tv = this.tv;\n        return temp;\n    },\n\n    toString: function () {\n        return ss.format('{0}, {1}, {2}, {3}, {4}', this.position.x, this.position.y, this.position.z, this.tu, this.tv);\n    }\n};\n\nregisterType(\"PositionTexture\", [PositionTexture, PositionTexture$, null]);\n\n\n// wwtlib.PositionColoredTextured\n\nexport function PositionColoredTextured() {\n    this.tu = 0;\n    this.tv = 0;\n    this.color = new Color();\n    this.position = new Vector3d();\n}\n\n// Summary:\n//     Initializes a new instance of the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured\n//     class.\n//\n// Parameters:\n//   pos:\n//     A Microsoft.DirectX.Vector3d object that contains the vertex position.\n//\n//   u:\n//     Floating-point value that represents the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured.#ctor()\n//     component of the texture coordinate.\n//\n//   v:\n//     Floating-point value that represents the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured.#ctor()\n//     component of the texture coordinate.\nPositionColoredTextured.createPos = function (pos, u, v) {\n    var temp = new PositionColoredTextured();\n    temp.tu = u * tileUvMultiple;\n    temp.tv = v * tileUvMultiple;\n    temp.position = pos;\n    return temp;\n};\n\nPositionColoredTextured.createPosRaw = function (pos, u, v) {\n    var temp = new PositionColoredTextured();\n    temp.tu = u;\n    temp.tv = v;\n    temp.position = pos;\n    return temp;\n};\n\nPositionColoredTextured.createPosSize = function (pos, u, v, width, height) {\n    var temp = new PositionColoredTextured();\n    temp.tu = u * width;\n    temp.tv = v * height;\n    temp.position = pos;\n    return temp;\n};\n\n// ** Is it a mistake that this is creating a PositionTexture, not PositionColoredTextured? **\n//\n// Summary:\n//     Initializes a new instance of the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured\n//     class.\n//\n// Parameters:\n//   xvalue:\n//     Floating-point value that represents the x coordinate of the position.\n//\n//   yvalue:\n//     Floating-point value that represents the y coordinate of the position.\n//\n//   zvalue:\n//     Floating-point value that represents the z coordinate of the position.\n//\n//   u:\n//     Floating-point value that represents the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured.#ctor()\n//     component of the texture coordinate.\n//\n//   v:\n//     Floating-point value that represents the Microsoft.DirectX.Direct3D.CustomVertex.PositionTextured.#ctor()\n//     component of the texture coordinate.\nPositionColoredTextured.create = function (xvalue, yvalue, zvalue, u, v) {\n    var temp = new PositionTexture();\n    temp.position = Vector3d.create(xvalue, yvalue, zvalue);\n    temp.tu = u * tileUvMultiple;\n    temp.tv = v * tileUvMultiple;\n    return temp;\n};\n\nvar PositionColoredTextured$ = {\n    copy: function () {\n        var temp = new PositionTexture();\n        temp.position = Vector3d.makeCopy(this.position);\n        temp.tu = this.tu;\n        temp.tv = this.tv;\n        return temp;\n    },\n    toString: function () {\n        return ss.format('{0}, {1}, {2}, {3}, {4}', this.position.x, this.position.y, this.position.z, this.tu, this.tv);\n    }\n};\n\nregisterType(\"PositionColoredTextured\", [PositionColoredTextured, PositionColoredTextured$, null]);\n\n\n// wwtlib.PositionColored\n\nexport function PositionColored(pos, color) {\n    this.color = new Color();\n    this.color = color._clone();\n    this.position = pos.copy();\n}\n\nvar PositionColored$ = {\n    copy: function () {\n        var temp = new PositionColored(this.position, this.color);\n        return temp;\n    },\n\n    toString: function () {\n        return ss.format('{0}, {1}, {2}, {3}', this.position.x, this.position.y, this.position.z, this.color.toString());\n    }\n};\n\nregisterType(\"PositionColored\", [PositionColored, PositionColored$, null]);\n\n\n// wwtlib.PositionNormalTexturedTangent\n//\n// Summary:\n//    Custom vertex format with position, normal, texture coordinate, and tangent vector. The\n//    tangent vector is stored in the second texture coordinate.\n\nexport function PositionNormalTexturedTangent(position, normal, texCoord, tangent) {\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n    this.nx = 0;\n    this.ny = 0;\n    this.nz = 0;\n    this.tu = 0;\n    this.tv = 0;\n    this.tanx = 0;\n    this.tany = 0;\n    this.tanz = 0;\n    this.x = position.x;\n    this.y = position.y;\n    this.z = position.z;\n    this.nx = normal.x;\n    this.ny = normal.y;\n    this.nz = normal.z;\n    this.tu = texCoord.x;\n    this.tv = texCoord.y;\n    this.tanx = tangent.x;\n    this.tany = tangent.y;\n    this.tanz = tangent.z;\n}\n\nvar PositionNormalTexturedTangent$ = {\n    get_normal: function () {\n        return Vector3d.create(this.nx, this.ny, this.nz);\n    },\n\n    set_normal: function (value) {\n        this.nx = value.x;\n        this.ny = value.y;\n        this.nz = value.z;\n        return value;\n    },\n\n    get_position: function () {\n        return Vector3d.create(this.x, this.y, this.z);\n    },\n\n    set_position: function (value) {\n        this.x = value.x;\n        this.y = value.y;\n        this.z = value.z;\n        return value;\n    },\n\n    get_texCoord: function () {\n        return Vector2d.create(this.tu, this.tv);\n    },\n\n    set_texCoord: function (value) {\n        this.tu = value.x;\n        this.tv = value.y;\n        return value;\n    },\n\n    get_tangent: function () {\n        return Vector3d.create(this.tanx, this.tany, this.tanz);\n    },\n\n    set_tangent: function (value) {\n        this.tanx = value.x;\n        this.tany = value.y;\n        this.tanz = value.z;\n        return value;\n    },\n\n    toString: function () {\n        return ss.format('X={0}, Y={1}, Z={2}, Nx={3}, Ny={4}, Nz={5}, U={6}, V={7}, TanX={8}, TanY={9}, TanZ={10}', this.x, this.y, this.z, this.nx, this.ny, this.nz, this.tu, this.tv, this.tanx, this.tany, this.tanz);\n    }\n};\n\nregisterType(\"PositionNormalTexturedTangent\", [PositionNormalTexturedTangent, PositionNormalTexturedTangent$, null]);\n\n\n// wwtlib.Vector3d\n\nexport function Vector3d() {\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n}\n\nVector3d.create = function (valueX, valueY, valueZ) {\n    var temp = new Vector3d();\n    temp.x = valueX;\n    temp.y = valueY;\n    temp.z = valueZ;\n    return temp;\n};\n\nVector3d.makeCopy = function (value) {\n    var temp = new Vector3d();\n    temp.x = value.x;\n    temp.y = value.y;\n    temp.z = value.z;\n    return temp;\n};\n\nVector3d.negate = function (vec) {\n    return Vector3d.create(-vec.x, -vec.y, -vec.z);\n};\n\nVector3d.midPoint = function (left, right) {\n    var result = Vector3d.create((left.x + right.x) / 2, (left.y + right.y) / 2, (left.z + right.z) / 2);\n    return result;\n};\n\nVector3d.midPointByLength = function (left, right) {\n    var result = Vector3d.create((left.x + right.x) / 2, (left.y + right.y) / 2, (left.z + right.z) / 2);\n    result.normalize();\n    result.multiply(left.length());\n    return result;\n};\n\nVector3d.get_empty = function () {\n    return Vector3d.create(0, 0, 0);\n};\n\nVector3d.addVectors = function (left, right) {\n    return Vector3d.create(left.x + right.x, left.y + right.y, left.z + right.z);\n};\n\nVector3d.cross = function (left, right) {\n    return Vector3d.create(left.y * right.z - left.z * right.y, left.z * right.x - left.x * right.z, left.x * right.y - left.y * right.x);\n};\n\nVector3d.dot = function (left, right) {\n    return left.x * right.x + left.y * right.y + left.z * right.z;\n};\n\nVector3d.getLength = function (source) {\n    return Math.sqrt(source.x * source.x + source.y * source.y + source.z * source.z);\n};\n\nVector3d.getLengthSq = function (source) {\n    return source.x * source.x + source.y * source.y + source.z * source.z;\n};\n\n// Summary:\n//     Performs a linear interpolation between two 3-D vectors.\n//\n// Parameters:\n//   left:\n//     Source Microsoft.DirectX.Vector3d structure.\n//\n//   right:\n//     Source Microsoft.DirectX.Vector3d structure.\n//\n//   interpolater:\n//     Parameter that linearly interpolates between the vectors.\n//\n// Returns:\n//     A Microsoft.DirectX.Vector3d structure that is the result of the linear interpolation.\nVector3d.lerp = function (left, right, interpolater) {\n    return Vector3d.create(left.x * (1 - interpolater) + right.x * interpolater, left.y * (1 - interpolater) + right.y * interpolater, left.z * (1 - interpolater) + right.z * interpolater);\n};\n\nVector3d.midpoint = function (left, right) {\n    var tmp = Vector3d.create(left.x * (0.5) + right.x * 0.5, left.y * (0.5) + right.y * 0.5, left.z * (0.5) + right.z * 0.5);\n    tmp.normalize();\n    return tmp;\n};\n\nVector3d.slerp = function (left, right, interpolater) {\n    var dot = Vector3d.dot(left, right);\n    while (dot < 0.98) {\n        var middle = Vector3d.midpoint(left, right);\n        if (interpolater > 0.5) {\n            left = middle;\n            interpolater -= 0.5;\n            interpolater *= 2;\n        }\n        else {\n            right = middle;\n            interpolater *= 2;\n        }\n        dot = Vector3d.dot(left, right);\n    }\n    var tmp = Vector3d.lerp(left, right, interpolater);\n    tmp.normalize();\n    return tmp;\n};\n\nVector3d.multiplyScalar = function (source, f) {\n    var result = source.copy();\n    result.multiply(f);\n    return result;\n};\n\nVector3d.scale = function (source, scalingFactor) {\n    var result = source;\n    result.multiply(scalingFactor);\n    return result;\n};\n\nVector3d.subtractVectors = function (left, right) {\n    var result = left.copy();\n    result.subtract(right);\n    return result;\n};\n\nVector3d.parse = function (data) {\n    var newVector = new Vector3d();\n    var list = data.split(',');\n    if (list.length === 3) {\n        newVector.x = parseFloat(list[0]);\n        newVector.y = parseFloat(list[1]);\n        newVector.z = parseFloat(list[2]);\n    }\n    return newVector;\n};\n\nVector3d._transformCoordinate = function (vector3d, mat) {\n    return mat.transform(vector3d);\n};\n\nvar Vector3d$ = {\n    set: function (valueX, valueY, valueZ) {\n        this.x = valueX;\n        this.y = valueY;\n        this.z = valueZ;\n    },\n\n    copy: function () {\n        var temp = new Vector3d();\n        temp.x = this.x;\n        temp.y = this.y;\n        temp.z = this.z;\n        return temp;\n    },\n\n    round: function () {\n        this.x = ss.truncate((this.x * 65536)) / 65536;\n        this.y = ss.truncate((this.y * 65536)) / 65536;\n        this.z = ss.truncate((this.z * 65536)) / 65536;\n    },\n\n    add: function (source) {\n        this.x += source.x;\n        this.y += source.y;\n        this.z += source.z;\n    },\n\n    length: function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    },\n\n    lengthSq: function () {\n        return this.x * this.x + this.y * this.y + this.z * this.z;\n    },\n\n    multiply: function (s) {\n        this.x *= s;\n        this.y *= s;\n        this.z *= s;\n    },\n\n    normalize: function () {\n        var length = this.length();\n        if (!!length) {\n            this.x /= length;\n            this.y /= length;\n            this.z /= length;\n        }\n    },\n\n    rotateX: function (radians) {\n        var zTemp;\n        var yTemp;\n        yTemp = this.y * Math.cos(radians) - this.z * Math.sin(radians);\n        zTemp = this.y * Math.sin(radians) + this.z * Math.cos(radians);\n        this.z = zTemp;\n        this.y = yTemp;\n    },\n\n    rotateZ: function (radians) {\n        var xTemp;\n        var yTemp;\n        xTemp = this.x * Math.cos(radians) - this.y * Math.sin(radians);\n        yTemp = this.x * Math.sin(radians) + this.y * Math.cos(radians);\n        this.y = yTemp;\n        this.x = xTemp;\n    },\n\n    rotateY: function (radians) {\n        var zTemp;\n        var xTemp;\n        zTemp = this.z * Math.cos(radians) - this.x * Math.sin(radians);\n        xTemp = this.z * Math.sin(radians) + this.x * Math.cos(radians);\n        this.x = xTemp;\n        this.z = zTemp;\n    },\n\n    subtract: function (source) {\n        this.x -= source.x;\n        this.y -= source.y;\n        this.z -= source.z;\n        return this;\n    },\n\n    toString: function () {\n        return ss.format('{0}, {1}, {2}', this.x, this.y, this.z);\n    },\n\n    toSpherical: function () {\n        var ascention;\n        var declination;\n        var radius = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n        var XZ = Math.sqrt(this.x * this.x + this.z * this.z);\n        declination = Math.asin(this.y / radius);\n        if (!XZ) {\n            ascention = 0;\n        }\n        else if (0 <= this.x) {\n            ascention = Math.asin(this.z / XZ);\n        }\n        else {\n            ascention = Math.PI - Math.asin(this.z / XZ);\n        }\n        return Vector2d.create(((ascention + Math.PI) % (2 * Math.PI)), (declination + (Math.PI / 2)));\n    },\n\n    toRaDec: function () {\n        var point = this.toSpherical();\n        point.x = point.x / Math.PI * 12;\n        point.y = (point.y / Math.PI * 180) - 90;\n        return point;\n    },\n\n    distanceToLine: function (x1, x2) {\n        var t1 = Vector3d.subtractVectors(x2, x1);\n        var t2 = Vector3d.subtractVectors(x1, this);\n        var t3 = Vector3d.cross(t1, t2);\n        var d1 = t3.length();\n        var t4 = Vector3d.subtractVectors(x2, x1);\n        var d2 = t4.length();\n        return d1 / d2;\n    },\n\n    _transformByMatrics: function (lookAtAdjust) {\n        var temp = lookAtAdjust.transform(this);\n        this.x = temp.x;\n        this.y = temp.y;\n        this.z = temp.z;\n    }\n};\n\nregisterType(\"Vector3d\", [Vector3d, Vector3d$, null]);\n\nVector3d.zero = new Vector3d();\n\n\n// wwtlib.Vector2d\n\nexport function Vector2d() {\n    this.x = 0;\n    this.y = 0;\n}\n\nVector2d.lerp = function (left, right, interpolater) {\n    return Vector2d.create(left.x * (1 - interpolater) + right.x * interpolater, left.y * (1 - interpolater) + right.y * interpolater);\n};\n\nVector2d.cartesianToSpherical2 = function (vector) {\n    var rho = Math.sqrt(vector.x * vector.x + vector.y * vector.y + vector.z * vector.z);\n    var longitude = Math.atan2(vector.z, vector.x);\n    var latitude = Math.asin(vector.y / rho);\n    return Vector2d.create(longitude / Math.PI * 180, latitude / Math.PI * 180);\n};\n\nVector2d.average3d = function (left, right) {\n    var pntLeft = geoTo3dDouble(left.y, left.x);\n    var pntRight = geoTo3dDouble(right.y, right.x);\n    var pntOut = Vector3d.addVectors(pntLeft, pntRight);\n    pntOut.multiply(0.5);\n    pntOut.normalize();\n    return Vector2d.cartesianToSpherical2(pntOut);\n};\n\nVector2d.create = function (x, y) {\n    var temp = new Vector2d();\n    temp.x = x;\n    temp.y = y;\n    return temp;\n};\n\nVector2d.subtract = function (left, right) {\n    return Vector2d.create(left.x - right.x, left.y - right.y);\n};\n\nvar Vector2d$ = {\n    distance3d: function (pointB) {\n        var pnt1 = geoTo3dDouble(pointB.y, pointB.x);\n        var pnt2 = geoTo3dDouble(this.y, this.x);\n        var pntDiff = Vector3d.subtractVectors(pnt1, pnt2);\n        return pntDiff.length() / Math.PI * 180;\n    },\n\n    get_length: function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    normalize: function () {\n        var length = this.get_length();\n        if (!!length) {\n            this.x /= length;\n            this.y /= length;\n        }\n    },\n\n    extend: function (factor) {\n        this.x = this.x * factor;\n        this.y = this.y * factor;\n    }\n};\n\nregisterType(\"Vector2d\", [Vector2d, Vector2d$, null]);\n\n\n// wwtlib.Matrix3d\n\nexport function Matrix3d() {\n    this._m11 = 0;\n    this._m12 = 0;\n    this._m13 = 0;\n    this._m14 = 0;\n    this._m21 = 0;\n    this._m22 = 0;\n    this._m23 = 0;\n    this._m24 = 0;\n    this._m31 = 0;\n    this._m32 = 0;\n    this._m33 = 0;\n    this._m34 = 0;\n    this._offsetX = 0;\n    this._offsetY = 0;\n    this._offsetZ = 0;\n    this._m44 = 0;\n    this._isNotKnownToBeIdentity = false;\n}\n\nMatrix3d.create = function (m11, m12, m13, m14, m21, m22, m23, m24, m31, m32, m33, m34, offsetX, offsetY, offsetZ, m44) {\n    var temp = new Matrix3d();\n    temp._m11 = m11;\n    temp._m12 = m12;\n    temp._m13 = m13;\n    temp._m14 = m14;\n    temp._m21 = m21;\n    temp._m22 = m22;\n    temp._m23 = m23;\n    temp._m24 = m24;\n    temp._m31 = m31;\n    temp._m32 = m32;\n    temp._m33 = m33;\n    temp._m34 = m34;\n    temp._offsetX = offsetX;\n    temp._offsetY = offsetY;\n    temp._offsetZ = offsetZ;\n    temp._m44 = m44;\n    temp._isNotKnownToBeIdentity = true;\n    return temp;\n};\n\nMatrix3d.get_identity = function () {\n    var temp = new Matrix3d();\n    temp.set(Matrix3d._s_identity);\n    return temp;\n};\n\nMatrix3d.multiplyMatrix = function (matrix1, matrix2) {\n    if (matrix1.get__isDistinguishedIdentity()) {\n        return matrix2;\n    }\n    if (matrix2.get__isDistinguishedIdentity()) {\n        return matrix1;\n    }\n    return Matrix3d.create((((matrix1._m11 * matrix2._m11) + (matrix1._m12 * matrix2._m21)) + (matrix1._m13 * matrix2._m31)) + (matrix1._m14 * matrix2._offsetX), (((matrix1._m11 * matrix2._m12) + (matrix1._m12 * matrix2._m22)) + (matrix1._m13 * matrix2._m32)) + (matrix1._m14 * matrix2._offsetY), (((matrix1._m11 * matrix2._m13) + (matrix1._m12 * matrix2._m23)) + (matrix1._m13 * matrix2._m33)) + (matrix1._m14 * matrix2._offsetZ), (((matrix1._m11 * matrix2._m14) + (matrix1._m12 * matrix2._m24)) + (matrix1._m13 * matrix2._m34)) + (matrix1._m14 * matrix2._m44), (((matrix1._m21 * matrix2._m11) + (matrix1._m22 * matrix2._m21)) + (matrix1._m23 * matrix2._m31)) + (matrix1._m24 * matrix2._offsetX), (((matrix1._m21 * matrix2._m12) + (matrix1._m22 * matrix2._m22)) + (matrix1._m23 * matrix2._m32)) + (matrix1._m24 * matrix2._offsetY), (((matrix1._m21 * matrix2._m13) + (matrix1._m22 * matrix2._m23)) + (matrix1._m23 * matrix2._m33)) + (matrix1._m24 * matrix2._offsetZ), (((matrix1._m21 * matrix2._m14) + (matrix1._m22 * matrix2._m24)) + (matrix1._m23 * matrix2._m34)) + (matrix1._m24 * matrix2._m44), (((matrix1._m31 * matrix2._m11) + (matrix1._m32 * matrix2._m21)) + (matrix1._m33 * matrix2._m31)) + (matrix1._m34 * matrix2._offsetX), (((matrix1._m31 * matrix2._m12) + (matrix1._m32 * matrix2._m22)) + (matrix1._m33 * matrix2._m32)) + (matrix1._m34 * matrix2._offsetY), (((matrix1._m31 * matrix2._m13) + (matrix1._m32 * matrix2._m23)) + (matrix1._m33 * matrix2._m33)) + (matrix1._m34 * matrix2._offsetZ), (((matrix1._m31 * matrix2._m14) + (matrix1._m32 * matrix2._m24)) + (matrix1._m33 * matrix2._m34)) + (matrix1._m34 * matrix2._m44), (((matrix1._offsetX * matrix2._m11) + (matrix1._offsetY * matrix2._m21)) + (matrix1._offsetZ * matrix2._m31)) + (matrix1._m44 * matrix2._offsetX), (((matrix1._offsetX * matrix2._m12) + (matrix1._offsetY * matrix2._m22)) + (matrix1._offsetZ * matrix2._m32)) + (matrix1._m44 * matrix2._offsetY), (((matrix1._offsetX * matrix2._m13) + (matrix1._offsetY * matrix2._m23)) + (matrix1._offsetZ * matrix2._m33)) + (matrix1._m44 * matrix2._offsetZ), (((matrix1._offsetX * matrix2._m14) + (matrix1._offsetY * matrix2._m24)) + (matrix1._offsetZ * matrix2._m34)) + (matrix1._m44 * matrix2._m44));\n};\n\nMatrix3d.lookAtLH = function (cameraPosition, cameraTarget, cameraUpVector) {\n    var zaxis = Vector3d.subtractVectors(cameraTarget, cameraPosition);\n    zaxis.normalize();\n    var xaxis = Vector3d.cross(cameraUpVector, zaxis);\n    xaxis.normalize();\n    var yaxis = Vector3d.cross(zaxis, xaxis);\n    var mat = Matrix3d.create(xaxis.x, yaxis.x, zaxis.x, 0, xaxis.y, yaxis.y, zaxis.y, 0, xaxis.z, yaxis.z, zaxis.z, 0, -Vector3d.dot(xaxis, cameraPosition), -Vector3d.dot(yaxis, cameraPosition), -Vector3d.dot(zaxis, cameraPosition), 1);\n    return mat;\n};\n\nMatrix3d._createIdentity = function () {\n    var matrixd = Matrix3d.create(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    matrixd.set__isDistinguishedIdentity(true);\n    return matrixd;\n};\n\nMatrix3d.equals = function (matrix1, matrix2) {\n    if (matrix1.get__isDistinguishedIdentity() || matrix2.get__isDistinguishedIdentity()) {\n        return (matrix1.get_isIdentity() === matrix2.get_isIdentity());\n    }\n    if ((((matrix1.get_m11() === matrix2.get_m11() && matrix1.get_m12() === matrix2.get_m12()) && (matrix1.get_m13() === matrix2.get_m13() && matrix1.get_m14() === matrix2.get_m14())) && ((matrix1.get_m21() === matrix2.get_m21() && matrix1.get_m22() === matrix2.get_m22()) && (matrix1.get_m23() === matrix2.get_m23() && matrix1.get_m24() === matrix2.get_m24()))) && (((matrix1.get_m31() === matrix2.get_m31() && matrix1.get_m32() === matrix2.get_m32()) && (matrix1.get_m33() === matrix2.get_m33() && matrix1.get_m34() === matrix2.get_m34())) && ((matrix1.get_offsetX() === matrix2.get_offsetX() && matrix1.get_offsetY() === matrix2.get_offsetY()) && matrix1.get_offsetZ() === matrix2.get_offsetZ()))) {\n        return matrix1.get_m44() === matrix2.get_m44();\n    }\n    return false;\n};\n\nMatrix3d.fromMatrix2d = function (mat) {\n    var mat3d = Matrix3d._createIdentity();\n    mat3d.set_m11(mat.m11);\n    mat3d.set_m12(mat.m12);\n    mat3d.set_m13(mat.m13);\n    mat3d.set_m21(mat.m21);\n    mat3d.set_m22(mat.m22);\n    mat3d.set_m23(mat.m23);\n    mat3d.set_m31(mat.m31);\n    mat3d.set_m32(mat.m32);\n    mat3d.set_m33(mat.m33);\n    mat3d._isNotKnownToBeIdentity = true;\n    return mat3d;\n};\n\nMatrix3d.rotationYawPitchRoll = function (heading, pitch, roll) {\n    var matX = Matrix3d._rotationX(pitch);\n    var matY = Matrix3d._rotationY(heading);\n    var matZ = Matrix3d._rotationZ(roll);\n    return Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(matY, matX), matZ);\n};\n\nMatrix3d._rotationY = function (p) {\n    var v = p;\n    var matNew = Matrix3d.get_identity();\n    matNew._m11 = Math.cos(v);\n    matNew._m22 = 1;\n    matNew._m31 = Math.sin(v);\n    matNew._m13 = -Math.sin(v);\n    matNew._m33 = Math.cos(v);\n    matNew._isNotKnownToBeIdentity = true;\n    return matNew;\n};\n\nMatrix3d._rotationX = function (p) {\n    var v = p;\n    var matNew = Matrix3d.get_identity();\n    matNew._m11 = 1;\n    matNew._m22 = Math.cos(v);\n    matNew._m32 = -Math.sin(v);\n    matNew._m23 = Math.sin(v);\n    matNew._m33 = Math.cos(v);\n    matNew._isNotKnownToBeIdentity = true;\n    return matNew;\n};\n\nMatrix3d._rotationZ = function (p) {\n    var v = p;\n    var matNew = Matrix3d.get_identity();\n    matNew._m11 = Math.cos(v);\n    matNew._m21 = -Math.sin(v);\n    matNew._m12 = Math.sin(v);\n    matNew._m22 = Math.cos(v);\n    matNew._m33 = 1;\n    matNew._isNotKnownToBeIdentity = true;\n    return matNew;\n};\n\nMatrix3d._scaling = function (x, y, z) {\n    var matNew = Matrix3d.get_identity();\n    matNew._m11 = x;\n    matNew._m22 = y;\n    matNew._m33 = z;\n    matNew._isNotKnownToBeIdentity = true;\n    return matNew;\n};\n\nMatrix3d._translationXYZ = function (x, y, z) {\n    var matNew = Matrix3d.get_identity();\n    matNew.set_offsetX(x);\n    matNew.set_offsetY(y);\n    matNew.set_offsetZ(z);\n    matNew._isNotKnownToBeIdentity = true;\n    return matNew;\n};\n\nMatrix3d.perspectiveFovLH = function (fieldOfViewY, aspectRatio, znearPlane, zfarPlane) {\n    var h = 1 / Math.tan(fieldOfViewY / 2);\n    var w = h / aspectRatio;\n    return Matrix3d.create(w, 0, 0, 0, 0, h, 0, 0, 0, 0, zfarPlane / (zfarPlane - znearPlane), 1, 0, 0, -znearPlane * zfarPlane / (zfarPlane - znearPlane), 0);\n};\n\nMatrix3d.perspectiveOffCenterLH = function (left, right, bottom, top, znearPlane, zfarPlane) {\n    return Matrix3d.create(2 * znearPlane / (right - left), 0, 0, 0, 0, 2 * znearPlane / (top - bottom), 0, 0, (left + right) / (left - right), (top + bottom) / (bottom - top), zfarPlane / (zfarPlane - znearPlane), 1, 0, 0, znearPlane * zfarPlane / (znearPlane - zfarPlane), 0);\n};\n\nMatrix3d.invertMatrix = function (matrix3d) {\n    var mat = matrix3d.clone();\n    mat.invert();\n    return mat;\n};\n\nMatrix3d.translation = function (vector3d) {\n    return Matrix3d._translationXYZ(vector3d.x, vector3d.y, vector3d.z);\n};\n\nMatrix3d.getMapMatrix = function (center, fieldWidth, fieldHeight, rotation) {\n    var offsetX = 0;\n    var offsetY = 0;\n    offsetX = -((center.get_lng() + 180 - (fieldWidth / 2)) / 360);\n    offsetY = -(1 - ((center.get_lat() + 90 + (fieldHeight / 2)) / 180));\n    var mat = new Matrix2d();\n    var scaleX = 0;\n    var scaleY = 0;\n    scaleX = 360 / fieldWidth;\n    scaleY = 180 / fieldHeight;\n    mat = Matrix2d.multiply(mat, Matrix2d.translation(offsetX, offsetY));\n    mat = Matrix2d.multiply(mat, Matrix2d.scaling(scaleX, scaleY));\n    if (!!rotation) {\n        mat = Matrix2d.multiply(mat, Matrix2d.translation(-0.5, -0.5));\n        mat = Matrix2d.multiply(mat, Matrix2d.rotation(rotation));\n        mat = Matrix2d.multiply(mat, Matrix2d.translation(0.5, 0.5));\n    }\n    return Matrix3d.fromMatrix2d(mat);\n};\n\nvar Matrix3d$ = {\n    clone: function () {\n        var tmp = new Matrix3d();\n        tmp.set(this);\n        return tmp;\n    },\n\n    setIdentity: function () {\n        this.set(Matrix3d._s_identity);\n    },\n\n    set: function (mat) {\n        this._m11 = mat._m11;\n        this._m12 = mat._m12;\n        this._m13 = mat._m13;\n        this._m14 = mat._m14;\n        this._m21 = mat._m21;\n        this._m22 = mat._m22;\n        this._m23 = mat._m23;\n        this._m24 = mat._m24;\n        this._m31 = mat._m31;\n        this._m32 = mat._m32;\n        this._m33 = mat._m33;\n        this._m34 = mat._m34;\n        this._offsetX = mat._offsetX;\n        this._offsetY = mat._offsetY;\n        this._offsetZ = mat._offsetZ;\n        this._m44 = mat._m44;\n        this._isNotKnownToBeIdentity = true;\n    },\n\n    floatArray: function () {\n        var array = new Array(16);\n        array[0] = this._m11;\n        array[1] = this._m12;\n        array[2] = this._m13;\n        array[3] = this._m14;\n        array[4] = this._m21;\n        array[5] = this._m22;\n        array[6] = this._m23;\n        array[7] = this._m24;\n        array[8] = this._m31;\n        array[9] = this._m32;\n        array[10] = this._m33;\n        array[11] = this._m34;\n        array[12] = this._offsetX;\n        array[13] = this._offsetY;\n        array[14] = this._offsetZ;\n        array[15] = this._m44;\n        return array;\n    },\n\n    get_isIdentity: function () {\n        if (this.get__isDistinguishedIdentity()) {\n            return true;\n        }\n        if (((((this._m11 === 1) && (!this._m12)) && ((!this._m13) && (!this._m14))) && (((!this._m21) && (this._m22 === 1)) && ((!this._m23) && (!this._m24)))) && ((((!this._m31) && (!this._m32)) && ((this._m33 === 1) && (!this._m34))) && (((!this._offsetX) && (!this._offsetY)) && ((!this._offsetZ) && (this._m44 === 1))))) {\n            this.set__isDistinguishedIdentity(true);\n            return true;\n        }\n        return false;\n    },\n\n    prepend: function (matrix) {\n        this.set(Matrix3d.multiplyMatrix(matrix, this));\n    },\n\n    append: function (matrix) {\n        this._multiply(matrix);\n    },\n\n    scale: function (scale) {\n        if (this.get__isDistinguishedIdentity()) {\n            this._setScaleMatrix(scale);\n        }\n        else {\n            this._m11 *= scale.x;\n            this._m12 *= scale.y;\n            this._m13 *= scale.z;\n            this._m21 *= scale.x;\n            this._m22 *= scale.y;\n            this._m23 *= scale.z;\n            this._m31 *= scale.x;\n            this._m32 *= scale.y;\n            this._m33 *= scale.z;\n            this._offsetX *= scale.x;\n            this._offsetY *= scale.y;\n            this._offsetZ *= scale.z;\n        }\n    },\n\n    scalePrepend: function (scale) {\n        if (this.get__isDistinguishedIdentity()) {\n            this._setScaleMatrix(scale);\n        }\n        else {\n            this._m11 *= scale.x;\n            this._m12 *= scale.x;\n            this._m13 *= scale.x;\n            this._m14 *= scale.x;\n            this._m21 *= scale.y;\n            this._m22 *= scale.y;\n            this._m23 *= scale.y;\n            this._m24 *= scale.y;\n            this._m31 *= scale.z;\n            this._m32 *= scale.z;\n            this._m33 *= scale.z;\n            this._m34 *= scale.z;\n        }\n    },\n\n    scaleAt: function (scale, center) {\n        if (this.get__isDistinguishedIdentity()) {\n            this._setScaleMatrixCenter(scale, center);\n        }\n        else {\n            var num = this._m14 * center.x;\n            this._m11 = num + (scale.x * (this._m11 - num));\n            num = this._m14 * center.y;\n            this._m12 = num + (scale.y * (this._m12 - num));\n            num = this._m14 * center.z;\n            this._m13 = num + (scale.z * (this._m13 - num));\n            num = this._m24 * center.x;\n            this._m21 = num + (scale.x * (this._m21 - num));\n            num = this._m24 * center.y;\n            this._m22 = num + (scale.y * (this._m22 - num));\n            num = this._m24 * center.z;\n            this._m23 = num + (scale.z * (this._m23 - num));\n            num = this._m34 * center.x;\n            this._m31 = num + (scale.x * (this._m31 - num));\n            num = this._m34 * center.y;\n            this._m32 = num + (scale.y * (this._m32 - num));\n            num = this._m34 * center.z;\n            this._m33 = num + (scale.z * (this._m33 - num));\n            num = this._m44 * center.x;\n            this._offsetX = num + (scale.x * (this._offsetX - num));\n            num = this._m44 * center.y;\n            this._offsetY = num + (scale.y * (this._offsetY - num));\n            num = this._m44 * center.z;\n            this._offsetZ = num + (scale.z * (this._offsetZ - num));\n        }\n    },\n\n    scaleAtPrepend: function (scale, center) {\n        if (this.get__isDistinguishedIdentity()) {\n            this._setScaleMatrixCenter(scale, center);\n        }\n        else {\n            var num3 = center.x - (center.x * scale.x);\n            var num2 = center.y - (center.y * scale.y);\n            var num = center.z - (center.z * scale.z);\n            this._offsetX += ((this._m11 * num3) + (this._m21 * num2)) + (this._m31 * num);\n            this._offsetY += ((this._m12 * num3) + (this._m22 * num2)) + (this._m32 * num);\n            this._offsetZ += ((this._m13 * num3) + (this._m23 * num2)) + (this._m33 * num);\n            this._m44 += ((this._m14 * num3) + (this._m24 * num2)) + (this._m34 * num);\n            this._m11 *= scale.x;\n            this._m12 *= scale.x;\n            this._m13 *= scale.x;\n            this._m14 *= scale.x;\n            this._m21 *= scale.y;\n            this._m22 *= scale.y;\n            this._m23 *= scale.y;\n            this._m24 *= scale.y;\n            this._m31 *= scale.z;\n            this._m32 *= scale.z;\n            this._m33 *= scale.z;\n            this._m34 *= scale.z;\n        }\n    },\n\n    translate: function (offset) {\n        if (this.get__isDistinguishedIdentity()) {\n            this._setTranslationMatrix(offset);\n        }\n        else {\n            this._m11 += this._m14 * offset.x;\n            this._m12 += this._m14 * offset.y;\n            this._m13 += this._m14 * offset.z;\n            this._m21 += this._m24 * offset.x;\n            this._m22 += this._m24 * offset.y;\n            this._m23 += this._m24 * offset.z;\n            this._m31 += this._m34 * offset.x;\n            this._m32 += this._m34 * offset.y;\n            this._m33 += this._m34 * offset.z;\n            this._offsetX += this._m44 * offset.x;\n            this._offsetY += this._m44 * offset.y;\n            this._offsetZ += this._m44 * offset.z;\n        }\n    },\n\n    translatePrepend: function (offset) {\n        if (this.get__isDistinguishedIdentity()) {\n            this._setTranslationMatrix(offset);\n        }\n        else {\n            this._offsetX += ((this._m11 * offset.x) + (this._m21 * offset.y)) + (this._m31 * offset.z);\n            this._offsetY += ((this._m12 * offset.x) + (this._m22 * offset.y)) + (this._m32 * offset.z);\n            this._offsetZ += ((this._m13 * offset.x) + (this._m23 * offset.y)) + (this._m33 * offset.z);\n            this._m44 += ((this._m14 * offset.x) + (this._m24 * offset.y)) + (this._m34 * offset.z);\n        }\n    },\n\n    transform: function (point) {\n        var temp = new Vector3d();\n        if (!this.get__isDistinguishedIdentity()) {\n            var x = point.x;\n            var y = point.y;\n            var z = point.z;\n            temp.x = (((x * this._m11) + (y * this._m21)) + (z * this._m31)) + this._offsetX;\n            temp.y = (((x * this._m12) + (y * this._m22)) + (z * this._m32)) + this._offsetY;\n            temp.z = (((x * this._m13) + (y * this._m23)) + (z * this._m33)) + this._offsetZ;\n            if (!this.get_isAffine()) {\n                var num4 = (((x * this._m14) + (y * this._m24)) + (z * this._m34)) + this._m44;\n                temp.x /= num4;\n                temp.y /= num4;\n                temp.z /= num4;\n            }\n        }\n        return temp;\n    },\n\n    _transformTo: function (input, output) {\n        output.x = (((input.x * this._m11) + (input.y * this._m21)) + (input.z * this._m31)) + this._offsetX;\n        output.y = (((input.x * this._m12) + (input.y * this._m22)) + (input.z * this._m32)) + this._offsetY;\n        output.z = (((input.x * this._m13) + (input.y * this._m23)) + (input.z * this._m33)) + this._offsetZ;\n        var num4 = (((input.x * this._m14) + (input.y * this._m24)) + (input.z * this._m34)) + this._m44;\n        output.x /= num4;\n        output.y /= num4;\n        output.z /= num4;\n    },\n\n    transformArray: function (points) {\n        if (points != null) {\n            for (var i = 0; i < points.length; i++) {\n                this._multiplyPoint(points[i]);\n            }\n        }\n    },\n\n    projectArrayToScreen: function (input, output) {\n        if (input != null && output != null) {\n            var affine = this.get_isAffine();\n            for (var i = 0; i < input.length; i++) {\n                var x = input[i].x;\n                var y = input[i].y;\n                var z = input[i].z;\n                if (affine) {\n                    output[i].x = ((((x * this._m11) + (y * this._m21)) + (z * this._m31)) + this._offsetX);\n                    output[i].y = ((((x * this._m12) + (y * this._m22)) + (z * this._m32)) + this._offsetY);\n                    output[i].z = (((x * this._m13) + (y * this._m23)) + (z * this._m33)) + this._offsetZ;\n                }\n                else {\n                    var num4 = (((x * this._m14) + (y * this._m24)) + (z * this._m34)) + this._m44;\n                    output[i].x = (((((x * this._m11) + (y * this._m21)) + (z * this._m31)) + this._offsetX) / num4);\n                    output[i].y = (((((x * this._m12) + (y * this._m22)) + (z * this._m32)) + this._offsetY) / num4);\n                    output[i].z = ((((x * this._m13) + (y * this._m23)) + (z * this._m33)) + this._offsetZ) / num4;\n                }\n            }\n        }\n    },\n\n    projectToScreen: function (input, width, height) {\n        var output = new Vector3d();\n        var x = input.x;\n        var y = input.y;\n        var z = input.z;\n        if (this.get_isAffine()) {\n            output.x = (((((x * this._m11) + (y * this._m21)) + (z * this._m31)) + this._offsetX) + 0.5) * width;\n            output.y = (-((((x * this._m12) + (y * this._m22)) + (z * this._m32)) + this._offsetY) + 0.5) * height;\n            output.z = (((x * this._m13) + (y * this._m23)) + (z * this._m33)) + this._offsetZ;\n        }\n        else {\n            var num4 = (((x * this._m14) + (y * this._m24)) + (z * this._m34)) + this._m44;\n            output.x = ((((((x * this._m11) + (y * this._m21)) + (z * this._m31)) + this._offsetX) / num4) + 0.5) * width;\n            output.y = (-(((((x * this._m12) + (y * this._m22)) + (z * this._m32)) + this._offsetY) / num4) + 0.5) * height;\n            output.z = ((((x * this._m13) + (y * this._m23)) + (z * this._m33)) + this._offsetZ) / num4;\n        }\n        return output;\n    },\n\n    get_isAffine: function () {\n        if (this.get__isDistinguishedIdentity()) {\n            return true;\n        }\n        if (((!this._m14) && (!this._m24)) && (!this._m34)) {\n            return (this._m44 === 1);\n        }\n        return false;\n    },\n\n    get_determinant: function () {\n        if (this.get__isDistinguishedIdentity()) {\n            return 1;\n        }\n        if (this.get_isAffine()) {\n            return this._getNormalizedAffineDeterminant();\n        }\n        var num6 = (this._m13 * this._m24) - (this._m23 * this._m14);\n        var num5 = (this._m13 * this._m34) - (this._m33 * this._m14);\n        var num4 = (this._m13 * this._m44) - (this._offsetZ * this._m14);\n        var num3 = (this._m23 * this._m34) - (this._m33 * this._m24);\n        var num2 = (this._m23 * this._m44) - (this._offsetZ * this._m24);\n        var num = (this._m33 * this._m44) - (this._offsetZ * this._m34);\n        var num10 = ((this._m22 * num5) - (this._m32 * num6)) - (this._m12 * num3);\n        var num9 = ((this._m12 * num2) - (this._m22 * num4)) + (this._offsetY * num6);\n        var num8 = ((this._m32 * num4) - (this._offsetY * num5)) - (this._m12 * num);\n        var num7 = ((this._m22 * num) - (this._m32 * num2)) + (this._offsetY * num3);\n        return ((((this._offsetX * num10) + (this._m31 * num9)) + (this._m21 * num8)) + (this._m11 * num7));\n    },\n\n    get_hasInverse: function () {\n        return !DoubleUtilities.isZero(this.get_determinant());\n    },\n\n    invert: function () {\n        if (!this._invertCore()) {\n            return;\n        }\n    },\n\n    transpose: function () {\n        var that = new Matrix3d();\n        that.set(this);\n        this._m12 = that._m21;\n        this._m13 = that._m31;\n        this._m14 = that._offsetX;\n        this._m23 = that._m32;\n        this._m24 = that._offsetY;\n        this._m34 = that._offsetZ;\n        this._m21 = that._m12;\n        this._m31 = that._m13;\n        this._offsetX = that._m14;\n        this._m32 = that._m23;\n        this._offsetY = that._m24;\n        this._offsetZ = that._m34;\n    },\n\n    get_m11: function () {\n        if (this.get__isDistinguishedIdentity()) {\n            return 1;\n        }\n        return this._m11;\n    },\n\n    set_m11: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m11 = value;\n        return value;\n    },\n\n    get_m12: function () {\n        return this._m12;\n    },\n\n    set_m12: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m12 = value;\n        return value;\n    },\n\n    get_m13: function () {\n        return this._m13;\n    },\n\n    set_m13: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m13 = value;\n        return value;\n    },\n\n    get_m14: function () {\n        return this._m14;\n    },\n\n    set_m14: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m14 = value;\n        return value;\n    },\n\n    get_m21: function () {\n        return this._m21;\n    },\n\n    set_m21: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m21 = value;\n        return value;\n    },\n\n    get_m22: function () {\n        if (this.get__isDistinguishedIdentity()) {\n            return 1;\n        }\n        return this._m22;\n    },\n\n    set_m22: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m22 = value;\n        return value;\n    },\n\n    get_m23: function () {\n        return this._m23;\n    },\n\n    set_m23: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m23 = value;\n        return value;\n    },\n\n    get_m24: function () {\n        return this._m24;\n    },\n\n    set_m24: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m24 = value;\n        return value;\n    },\n\n    get_m31: function () {\n        return this._m31;\n    },\n\n    set_m31: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m31 = value;\n        return value;\n    },\n\n    get_m32: function () {\n        return this._m32;\n    },\n\n    set_m32: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m32 = value;\n        return value;\n    },\n\n    get_m33: function () {\n        if (this.get__isDistinguishedIdentity()) {\n            return 1;\n        }\n        return this._m33;\n    },\n\n    set_m33: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m33 = value;\n        return value;\n    },\n\n    get_m34: function () {\n        return this._m34;\n    },\n\n    set_m34: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m34 = value;\n        return value;\n    },\n\n    get_m41: function () {\n        return this.get_offsetX();\n    },\n\n    set_m41: function (value) {\n        this.set_offsetX(value);\n        return value;\n    },\n\n    get_m42: function () {\n        return this.get_offsetY();\n    },\n\n    set_m42: function (value) {\n        this.set_offsetY(value);\n        return value;\n    },\n\n    get_m43: function () {\n        return this.get_offsetZ();\n    },\n\n    set_m43: function (value) {\n        this.set_offsetZ(value);\n        return value;\n    },\n\n    get_offsetX: function () {\n        return this._offsetX;\n    },\n\n    set_offsetX: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._offsetX = value;\n        return value;\n    },\n\n    get_offsetY: function () {\n        return this._offsetY;\n    },\n\n    set_offsetY: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._offsetY = value;\n        return value;\n    },\n\n    get_offsetZ: function () {\n        return this._offsetZ;\n    },\n\n    set_offsetZ: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._offsetZ = value;\n        return value;\n    },\n\n    get_m44: function () {\n        if (this.get__isDistinguishedIdentity()) {\n            return 1;\n        }\n        return this._m44;\n    },\n\n    set_m44: function (value) {\n        if (this.get__isDistinguishedIdentity()) {\n            this.set(Matrix3d._s_identity);\n            this.set__isDistinguishedIdentity(false);\n        }\n        this._m44 = value;\n        return value;\n    },\n\n    _setScaleMatrix: function (scale) {\n        this._m11 = scale.x;\n        this._m22 = scale.y;\n        this._m33 = scale.z;\n        this._m44 = 1;\n        this.set__isDistinguishedIdentity(false);\n    },\n\n    _setScaleMatrixCenter: function (scale, center) {\n        this._m11 = scale.x;\n        this._m22 = scale.y;\n        this._m33 = scale.z;\n        this._m44 = 1;\n        this._offsetX = center.x - (center.x * scale.x);\n        this._offsetY = center.y - (center.y * scale.y);\n        this._offsetZ = center.z - (center.z * scale.z);\n        this.set__isDistinguishedIdentity(false);\n    },\n\n    _setTranslationMatrix: function (offset) {\n        this._m11 = this._m22 = this._m33 = this._m44 = 1;\n        this._offsetX = offset.x;\n        this._offsetY = offset.y;\n        this._offsetZ = offset.z;\n        this.set__isDistinguishedIdentity(false);\n    },\n\n    _multiplyPoint: function (point) {\n        if (!this.get__isDistinguishedIdentity()) {\n            var x = point.x;\n            var y = point.y;\n            var z = point.z;\n            point.x = (((x * this._m11) + (y * this._m21)) + (z * this._m31)) + this._offsetX;\n            point.y = (((x * this._m12) + (y * this._m22)) + (z * this._m32)) + this._offsetY;\n            point.z = (((x * this._m13) + (y * this._m23)) + (z * this._m33)) + this._offsetZ;\n            if (!this.get_isAffine()) {\n                var num4 = (((x * this._m14) + (y * this._m24)) + (z * this._m34)) + this._m44;\n                point.x /= num4;\n                point.y /= num4;\n                point.z /= num4;\n            }\n        }\n    },\n\n    multiplyVector: function (vector) {\n        if (!this.get__isDistinguishedIdentity()) {\n            var x = vector.x;\n            var y = vector.y;\n            var z = vector.z;\n            vector.x = ((x * this._m11) + (y * this._m21)) + (z * this._m31);\n            vector.y = ((x * this._m12) + (y * this._m22)) + (z * this._m32);\n            vector.z = ((x * this._m13) + (y * this._m23)) + (z * this._m33);\n        }\n    },\n\n    _getNormalizedAffineDeterminant: function () {\n        var num3 = (this._m12 * this._m23) - (this._m22 * this._m13);\n        var num2 = (this._m32 * this._m13) - (this._m12 * this._m33);\n        var num = (this._m22 * this._m33) - (this._m32 * this._m23);\n        return (((this._m31 * num3) + (this._m21 * num2)) + (this._m11 * num));\n    },\n\n    _normalizedAffineInvert: function () {\n        var num11 = (this._m12 * this._m23) - (this._m22 * this._m13);\n        var num10 = (this._m32 * this._m13) - (this._m12 * this._m33);\n        var num9 = (this._m22 * this._m33) - (this._m32 * this._m23);\n        var num8 = ((this._m31 * num11) + (this._m21 * num10)) + (this._m11 * num9);\n        if (DoubleUtilities.isZero(num8)) {\n            return false;\n        }\n        var num20 = (this._m21 * this._m13) - (this._m11 * this._m23);\n        var num19 = (this._m11 * this._m33) - (this._m31 * this._m13);\n        var num18 = (this._m31 * this._m23) - (this._m21 * this._m33);\n        var num7 = (this._m11 * this._m22) - (this._m21 * this._m12);\n        var num6 = (this._m11 * this._m32) - (this._m31 * this._m12);\n        var num5 = (this._m11 * this._offsetY) - (this._offsetX * this._m12);\n        var num4 = (this._m21 * this._m32) - (this._m31 * this._m22);\n        var num3 = (this._m21 * this._offsetY) - (this._offsetX * this._m22);\n        var num2 = (this._m31 * this._offsetY) - (this._offsetX * this._m32);\n        var num17 = ((this._m23 * num5) - (this._offsetZ * num7)) - (this._m13 * num3);\n        var num16 = ((this._m13 * num2) - (this._m33 * num5)) + (this._offsetZ * num6);\n        var num15 = ((this._m33 * num3) - (this._offsetZ * num4)) - (this._m23 * num2);\n        var num14 = num7;\n        var num13 = -num6;\n        var num12 = num4;\n        var num = 1 / num8;\n        this._m11 = num9 * num;\n        this._m12 = num10 * num;\n        this._m13 = num11 * num;\n        this._m21 = num18 * num;\n        this._m22 = num19 * num;\n        this._m23 = num20 * num;\n        this._m31 = num12 * num;\n        this._m32 = num13 * num;\n        this._m33 = num14 * num;\n        this._offsetX = num15 * num;\n        this._offsetY = num16 * num;\n        this._offsetZ = num17 * num;\n        return true;\n    },\n\n    _invertCore: function () {\n        if (!this.get__isDistinguishedIdentity()) {\n            if (this.get_isAffine()) {\n                return this._normalizedAffineInvert();\n            }\n            var num7 = (this._m13 * this._m24) - (this._m23 * this._m14);\n            var num6 = (this._m13 * this._m34) - (this._m33 * this._m14);\n            var num5 = (this._m13 * this._m44) - (this._offsetZ * this._m14);\n            var num4 = (this._m23 * this._m34) - (this._m33 * this._m24);\n            var num3 = (this._m23 * this._m44) - (this._offsetZ * this._m24);\n            var num2 = (this._m33 * this._m44) - (this._offsetZ * this._m34);\n            var num12 = ((this._m22 * num6) - (this._m32 * num7)) - (this._m12 * num4);\n            var num11 = ((this._m12 * num3) - (this._m22 * num5)) + (this._offsetY * num7);\n            var num10 = ((this._m32 * num5) - (this._offsetY * num6)) - (this._m12 * num2);\n            var num9 = ((this._m22 * num2) - (this._m32 * num3)) + (this._offsetY * num4);\n            var num8 = (((this._offsetX * num12) + (this._m31 * num11)) + (this._m21 * num10)) + (this._m11 * num9);\n            if (DoubleUtilities.isZero(num8)) {\n                return false;\n            }\n            var num24 = ((this._m11 * num4) - (this._m21 * num6)) + (this._m31 * num7);\n            var num23 = ((this._m21 * num5) - (this._offsetX * num7)) - (this._m11 * num3);\n            var num22 = ((this._m11 * num2) - (this._m31 * num5)) + (this._offsetX * num6);\n            var num21 = ((this._m31 * num3) - (this._offsetX * num4)) - (this._m21 * num2);\n            num7 = (this._m11 * this._m22) - (this._m21 * this._m12);\n            num6 = (this._m11 * this._m32) - (this._m31 * this._m12);\n            num5 = (this._m11 * this._offsetY) - (this._offsetX * this._m12);\n            num4 = (this._m21 * this._m32) - (this._m31 * this._m22);\n            num3 = (this._m21 * this._offsetY) - (this._offsetX * this._m22);\n            num2 = (this._m31 * this._offsetY) - (this._offsetX * this._m32);\n            var num20 = ((this._m13 * num4) - (this._m23 * num6)) + (this._m33 * num7);\n            var num19 = ((this._m23 * num5) - (this._offsetZ * num7)) - (this._m13 * num3);\n            var num18 = ((this._m13 * num2) - (this._m33 * num5)) + (this._offsetZ * num6);\n            var num17 = ((this._m33 * num3) - (this._offsetZ * num4)) - (this._m23 * num2);\n            var num16 = ((this._m24 * num6) - (this._m34 * num7)) - (this._m14 * num4);\n            var num15 = ((this._m14 * num3) - (this._m24 * num5)) + (this._m44 * num7);\n            var num14 = ((this._m34 * num5) - (this._m44 * num6)) - (this._m14 * num2);\n            var num13 = ((this._m24 * num2) - (this._m34 * num3)) + (this._m44 * num4);\n            var num = 1 / num8;\n            this._m11 = num9 * num;\n            this._m12 = num10 * num;\n            this._m13 = num11 * num;\n            this._m14 = num12 * num;\n            this._m21 = num21 * num;\n            this._m22 = num22 * num;\n            this._m23 = num23 * num;\n            this._m24 = num24 * num;\n            this._m31 = num13 * num;\n            this._m32 = num14 * num;\n            this._m33 = num15 * num;\n            this._m34 = num16 * num;\n            this._offsetX = num17 * num;\n            this._offsetY = num18 * num;\n            this._offsetZ = num19 * num;\n            this._m44 = num20 * num;\n        }\n        return true;\n    },\n\n    get__isDistinguishedIdentity: function () {\n        return !this._isNotKnownToBeIdentity;\n    },\n\n    set__isDistinguishedIdentity: function (value) {\n        this._isNotKnownToBeIdentity = !value;\n        return value;\n    },\n\n    _multiply: function (mat) {\n        this.set(Matrix3d.multiplyMatrix(this, mat));\n    }\n};\n\nregisterType(\"Matrix3d\", [Matrix3d, Matrix3d$, null]);\n\nMatrix3d._s_identity = Matrix3d._createIdentity();\n\n\n// wwtlib.Matrix2d\n\nexport function Matrix2d() {\n    this.m11 = 1;\n    this.m12 = 0;\n    this.m13 = 0;\n    this.m21 = 0;\n    this.m22 = 1;\n    this.m23 = 0;\n    this.m31 = 0;\n    this.m32 = 0;\n    this.m33 = 1;\n}\n\nMatrix2d.create = function (m11, m12, m13, m21, m22, m23, m31, m32, m33) {\n    var mat = new Matrix2d();\n    mat.m11 = m11;\n    mat.m12 = m12;\n    mat.m13 = m13;\n    mat.m21 = m21;\n    mat.m22 = m22;\n    mat.m23 = m23;\n    mat.m31 = m31;\n    mat.m32 = m32;\n    mat.m33 = m33;\n    return mat;\n};\n\nMatrix2d.rotation = function (angle) {\n    var mat = new Matrix2d();\n    mat.m11 = Math.cos(angle);\n    mat.m21 = -Math.sin(angle);\n    mat.m12 = Math.sin(angle);\n    mat.m22 = Math.cos(angle);\n    return mat;\n};\n\nMatrix2d.translation = function (x, y) {\n    var mat = new Matrix2d();\n    mat.m31 = x;\n    mat.m32 = y;\n    return mat;\n};\n\nMatrix2d.scaling = function (x, y) {\n    var mat = new Matrix2d();\n    mat.m11 = x;\n    mat.m22 = y;\n    return mat;\n};\n\nMatrix2d.multiply = function (matrix1, matrix2) {\n    return Matrix2d.create((((matrix1.m11 * matrix2.m11) + (matrix1.m12 * matrix2.m21)) + (matrix1.m13 * matrix2.m31)), (((matrix1.m11 * matrix2.m12) + (matrix1.m12 * matrix2.m22)) + (matrix1.m13 * matrix2.m32)), (((matrix1.m11 * matrix2.m13) + (matrix1.m12 * matrix2.m23)) + (matrix1.m13 * matrix2.m33)), (((matrix1.m21 * matrix2.m11) + (matrix1.m22 * matrix2.m21)) + (matrix1.m23 * matrix2.m31)), (((matrix1.m21 * matrix2.m12) + (matrix1.m22 * matrix2.m22)) + (matrix1.m23 * matrix2.m32)), (((matrix1.m21 * matrix2.m13) + (matrix1.m22 * matrix2.m23)) + (matrix1.m23 * matrix2.m33)), (((matrix1.m31 * matrix2.m11) + (matrix1.m32 * matrix2.m21)) + (matrix1.m33 * matrix2.m31)), (((matrix1.m31 * matrix2.m12) + (matrix1.m32 * matrix2.m22)) + (matrix1.m33 * matrix2.m32)), (((matrix1.m31 * matrix2.m13) + (matrix1.m32 * matrix2.m23)) + (matrix1.m33 * matrix2.m33)));\n};\n\nMatrix2d.rotateAt = function (angle, pnt) {\n    var matT0 = Matrix2d.translation(-pnt.x, -pnt.y);\n    var matR = Matrix2d.rotation(angle);\n    var matT1 = Matrix2d.translation(pnt.x, pnt.y);\n    return Matrix2d.multiply(Matrix2d.multiply(matT0, matR), matT1);\n};\n\nvar Matrix2d$ = {\n    _transformPoints: function (points) {\n        var $enum1 = ss.enumerate(points);\n        while ($enum1.moveNext()) {\n            var pnt = $enum1.current;\n            this.multiplyPoint(pnt);\n        }\n    },\n\n    multiplyPoint: function (point) {\n        var x = point.x;\n        var y = point.y;\n        point.x = (((x * this.m11) + (y * this.m21)) + this.m31);\n        point.y = (((x * this.m12) + (y * this.m22)) + this.m32);\n    }\n};\n\nregisterType(\"Matrix2d\", [Matrix2d, Matrix2d$, null]);\n\n\n// wwtlib.DoubleUtilities\n\nexport function DoubleUtilities() { }\n\nDoubleUtilities.isZero = function (value) {\n    return (Math.abs(value) < 2.22044604925031E-50);\n};\n\nDoubleUtilities.isOne = function (value) {\n    return (Math.abs(value - 1) < 2.22044604925031E-50);\n};\n\nDoubleUtilities.radiansToDegrees = function (radians) {\n    return radians * 180 / Math.PI;\n};\n\nDoubleUtilities.degreesToRadians = function (degrees) {\n    return degrees * Math.PI / 180;\n};\n\nDoubleUtilities.clamp = function (x, min, max) {\n    return Math.max(min, Math.min(x, max));\n};\n\nregisterType(\"DoubleUtilities\", [DoubleUtilities, null, null]);\n\n\n// wwtlib.PlaneD\n\nexport function PlaneD(valuePointA, valuePointB, valuePointC, valuePointD) {\n    this.a = 0;\n    this.b = 0;\n    this.c = 0;\n    this.d = 0;\n    this.a = valuePointA;\n    this.b = valuePointB;\n    this.c = valuePointC;\n    this.d = valuePointD;\n}\n\nvar PlaneD$ = {\n    normalize: function () {\n        var length = Math.sqrt(this.a * this.a + this.b * this.b + this.c * this.c);\n        this.a /= length;\n        this.b /= length;\n        this.c /= length;\n        this.d /= length;\n    },\n\n    dot: function (v) {\n        return this.b * v.y + this.c * v.z + this.d * v.w + this.a * v.x;\n    }\n};\n\nregisterType(\"PlaneD\", [PlaneD, PlaneD$, null]);\n\n\n// wwtlib.Vector4d\n\nexport function Vector4d(valueX, valueY, valueZ, valueW) {\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n    this.w = 0;\n    this.x = valueX;\n    this.y = valueY;\n    this.z = valueZ;\n    this.w = valueW;\n}\n\nvar Vector4d$ = {};\n\nregisterType(\"Vector4d\", [Vector4d, Vector4d$, null]);\n\n\n// wwtlib.PositionNormalTexturedX2\n\n// Summary:\n//     Initializes a new instance of the PositionNormalTexturedX2\n//     class.\n//\n// Parameters:\n//   pos:\n//     A Microsoft.DirectX.Vector3 object that contains the vertex position.\n//\n//   nor:\n//     A Microsoft.DirectX.Vector3 object that contains the vertex normal data.\n//\n//   u:\n//     Floating-point value that represents the PositionNormalTexturedX2.#ctor()\n//     component of the texture coordinate.\n//\n//   v:\n//     Floating-point value that represents the PositionNormalTexturedX2.#ctor()\n//     component of the texture coordinate.\nexport function PositionNormalTexturedX2() {\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n    this.nx = 0;\n    this.ny = 0;\n    this.nz = 0;\n    this.tu = 0;\n    this.tv = 0;\n    this.tu1 = 0;\n    this.tv1 = 0;\n}\n\nPositionNormalTexturedX2.create2UV = function (pos, nor, u, v, u1, v1) {\n    var temp = new PositionNormalTexturedX2();\n    temp.x = pos.x;\n    temp.y = pos.y;\n    temp.z = pos.z;\n    temp.nx = nor.x;\n    temp.ny = nor.y;\n    temp.nz = nor.z;\n    temp.tu = u;\n    temp.tv = v;\n    temp.tu1 = u1;\n    temp.tv1 = v1;\n    return temp;\n};\n\nPositionNormalTexturedX2.create = function (pos, nor, u, v) {\n    var temp = new PositionNormalTexturedX2();\n    temp.x = pos.x;\n    temp.y = pos.y;\n    temp.z = pos.z;\n    temp.nx = nor.x;\n    temp.ny = nor.y;\n    temp.nz = nor.z;\n    temp.tu = u;\n    temp.tv = v;\n    var result = coords_cartesianToSpherical2(nor);\n    temp.tu1 = ((result[1] + 180) / 360);\n    temp.tv1 = (1 - ((result[0] + 90) / 180));\n    return temp;\n};\n\n// Summary:\n//     Initializes a new instance of the PositionNormalTexturedX2\n//     class.\n//\n// Parameters:\n//   xvalue:\n//     Floating-point value that represents the x coordinate of the position.\n//\n//   yvalue:\n//     Floating-point value that represents the y coordinate of the position.\n//\n//   zvalue:\n//     Floating-point value that represents the z coordinate of the position.\n//\n//   nxvalue:\n//     Floating-point value that represents the nx coordinate of the vertex normal.\n//\n//   nyvalue:\n//     Floating-point value that represents the ny coordinate of the vertex normal.\n//\n//   nzvalue:\n//     Floating-point value that represents the nz coordinate of the vertex normal.\n//\n//   u:\n//     Floating-point value that represents the PositionNormalTexturedX2.#ctor()\n//     component of the texture coordinate.\n//\n//   v:\n//     Floating-point value that represents the PositionNormalTexturedX2.#ctor()\n//     component of the texture coordinate.\nPositionNormalTexturedX2.createLong2UV = function (xvalue, yvalue, zvalue, nxvalue, nyvalue, nzvalue, u, v, u1, v1) {\n    var temp = new PositionNormalTexturedX2();\n    temp.x = xvalue;\n    temp.y = yvalue;\n    temp.z = zvalue;\n    temp.nx = nxvalue;\n    temp.ny = nyvalue;\n    temp.nz = nzvalue;\n    temp.tu = u;\n    temp.tv = v;\n    temp.tu1 = u1;\n    temp.tv1 = v1;\n    return temp;\n};\n\nPositionNormalTexturedX2.get_strideSize = function () {\n    return 40;\n};\n\nvar PositionNormalTexturedX2$ = {\n    get_lat: function () {\n        return (1 - this.tv1) * 180 - 90;\n    },\n\n    set_lat: function (value) {\n        this.tv1 = (1 - ((value + 90) / 180));\n        return value;\n    },\n\n    get_lng: function () {\n        return this.tu1 * 360 - 180;\n    },\n\n    set_lng: function (value) {\n        this.tu1 = ((value + 180) / 360);\n        return value;\n    },\n\n    createLong: function (xvalue, yvalue, zvalue, nxvalue, nyvalue, nzvalue, u, v) {\n        var temp = new PositionNormalTexturedX2();\n        temp.x = xvalue;\n        temp.y = yvalue;\n        temp.z = zvalue;\n        temp.nx = nxvalue;\n        temp.ny = nyvalue;\n        temp.nz = nzvalue;\n        temp.tu = u;\n        temp.tv = v;\n        var result = coords_cartesianToSpherical2(Vector3d.create(this.nx, this.ny, this.nz));\n        temp.tu1 = ((result[1] + 180) / 360);\n        temp.tv1 = (1 - ((result[0] + 90) / 180));\n        return temp;\n    },\n\n    get_normal: function () {\n        return Vector3d.create(this.nx, this.ny, this.nz);\n    },\n\n    set_normal: function (value) {\n        this.nx = value.x;\n        this.ny = value.y;\n        this.nz = value.z;\n        return value;\n    },\n\n    get_position: function () {\n        return Vector3d.create(this.x, this.y, this.y);\n    },\n\n    set_position: function (value) {\n        this.x = value.x;\n        this.y = value.y;\n        this.z = value.z;\n        return value;\n    },\n\n    toString: function () {\n        return ss.format('X={0}, Y={1}, Z={2}, Nx={3}, Ny={4}, Nz={5}, U={6}, V={7}, U1={8}, U2={9}', this.x, this.y, this.z, this.nx, this.ny, this.nz, this.tu, this.tv, this.tu1, this.tv1);\n    }\n};\n\nregisterType(\"PositionNormalTexturedX2\", [PositionNormalTexturedX2, PositionNormalTexturedX2$, null]);\n\n\n// wwtlib.PositionNormalTextured\n\n// Summary:\n//     Initializes a new instance of the PositionNormalTextured\n//     class.\n//\n// Parameters:\n//   pos:\n//     A Microsoft.DirectX.Vector3 object that contains the vertex position.\n//\n//   nor:\n//     A Microsoft.DirectX.Vector3 object that contains the vertex normal data.\n//\n//   u:\n//     Floating-point value that represents the PositionNormalTextured.#ctor()\n//     component of the texture coordinate.\n//\n//   v:\n//     Floating-point value that represents the PositionNormalTextured.#ctor()\n//     component of the texture coordinate.\nexport function PositionNormalTextured() {\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n    this.nx = 0;\n    this.ny = 0;\n    this.nz = 0;\n    this.tu = 0;\n    this.tv = 0;\n}\n\nPositionNormalTextured.createShort = function (pos, nor, u, v) {\n    var temp = new PositionNormalTextured();\n    temp.x = pos.x;\n    temp.y = pos.y;\n    temp.z = pos.z;\n    temp.nx = nor.x;\n    temp.ny = nor.y;\n    temp.nz = nor.z;\n    temp.tu = u;\n    temp.tv = v;\n    return temp;\n};\n\nPositionNormalTextured._create = function (x, y, z, nx, ny, nz, tu, tv) {\n    var temp = new PositionNormalTextured();\n    temp.x = x;\n    temp.y = y;\n    temp.z = z;\n    temp.nx = nx;\n    temp.ny = ny;\n    temp.nz = nz;\n    temp.tu = tu;\n    temp.tv = tv;\n    return temp;\n};\n\nPositionNormalTextured.createUV = function (pos, nor, uv) {\n    var temp = new PositionNormalTextured();\n    temp.x = pos.x;\n    temp.y = pos.y;\n    temp.z = pos.z;\n    temp.nx = nor.x;\n    temp.ny = nor.y;\n    temp.nz = nor.z;\n    temp.tu = uv.x;\n    temp.tv = uv.y;\n    return temp;\n};\n\nvar PositionNormalTextured$ = {\n    // ** is it a mistake that this returns an X2 class? almost surely! **\n    //\n    // Summary:\n    //     Initializes a new instance of the PositionNormalTextured\n    //     class.\n    //\n    // Parameters:\n    //   xvalue:\n    //     Floating-point value that represents the x coordinate of the position.\n    //\n    //   yvalue:\n    //     Floating-point value that represents the y coordinate of the position.\n    //\n    //   zvalue:\n    //     Floating-point value that represents the z coordinate of the position.\n    //\n    //   nxvalue:\n    //     Floating-point value that represents the nx coordinate of the vertex normal.\n    //\n    //   nyvalue:\n    //     Floating-point value that represents the ny coordinate of the vertex normal.\n    //\n    //   nzvalue:\n    //     Floating-point value that represents the nz coordinate of the vertex normal.\n    //\n    //   u:\n    //     Floating-point value that represents the PositionNormalTexturedX2.#ctor()\n    //     component of the texture coordinate.\n    //\n    //   v:\n    //     Floating-point value that represents the PositionNormalTexturedX2.#ctor()\n    //     component of the texture coordinate.\n    createLong: function (xvalue, yvalue, zvalue, nxvalue, nyvalue, nzvalue, u, v) {\n        var temp = new PositionNormalTexturedX2();\n        temp.x = xvalue;\n        temp.y = yvalue;\n        temp.z = zvalue;\n        temp.nx = nxvalue;\n        temp.ny = nyvalue;\n        temp.nz = nzvalue;\n        temp.tu = u;\n        temp.tv = v;\n        return temp;\n    },\n\n    get_normal: function () {\n        return Vector3d.create(this.nx, this.ny, this.nz);\n    },\n\n    set_normal: function (value) {\n        this.nx = value.x;\n        this.ny = value.y;\n        this.nz = value.z;\n        return value;\n    },\n\n    get_position: function () {\n        return Vector3d.create(this.x, this.y, this.z);\n    },\n\n    set_position: function (value) {\n        this.x = value.x;\n        this.y = value.y;\n        this.z = value.z;\n        return value;\n    },\n\n    toString: function () {\n        return ss.format('X={0}, Y={1}, Z={2}, Nx={3}, Ny={4}, Nz={5}, U={6}, V={7}, U1={8}, U2={9}', this.x, this.y, this.z, this.nx, this.ny, this.nz, this.tu, this.tv);\n    }\n};\n\nregisterType(\"PositionNormalTextured\", [PositionNormalTextured, PositionNormalTextured$, null]);\n\n\n// wwtlib.SphereHull\n\nexport function SphereHull() {\n    this.radius = 0;\n}\n\nSphereHull._create = function (Center, Radius) {\n    var temp = new SphereHull();\n    temp.center = Center;\n    temp.radius = Radius;\n    return temp;\n};\n\nvar SphereHull$ = {};\n\nregisterType(\"SphereHull\", [SphereHull, SphereHull$, null]);\n\n\n\n// wwtlib.ConvexHull\n\nexport function ConvexHull() {\n}\n\nConvexHull.findEnclosingSphereFast = function (points) {\n    var result = new SphereHull();\n\n    //Find the center of all points.\n\n    var count = points.length;\n    var center = Vector3d.zero;\n    for (var i = 0; i < count; ++i) {\n        center.add(points[i]);\n    }\n\n    //This is the center of our sphere.\n    center.multiply(1 / count);\n\n    //Find the radius of the sphere\n    var radius = 0;\n    for (var i = 0; i < count; ++i) {\n        //We are doing a relative distance comparison to find the maximum\n        //distance from the center of our sphere.\n        var distance = Vector3d.getLengthSq(Vector3d.subtractVectors(points[i], center));\n        if (distance > radius) {\n            radius = distance;\n        }\n    }\n\n    //Find the real distance from the DistanceSquared.\n    radius = Math.sqrt(radius);\n\n    //Construct the sphere.\n    result.center = center;\n    result.radius = radius;\n    return result;\n};\n\nConvexHull.findEnclosingSphere = function (list) {\n    var Center = new Vector3d();\n    var Radius = 0;\n    var count = list.length;\n    var i;\n    var dx;\n    var dy;\n    var dz;\n    var rad_sq;\n    var xspan;\n    var yspan;\n    var zspan;\n    var maxspan;\n    var old_to_p;\n    var old_to_p_sq;\n    var old_to_new;\n    var xmin = new Vector3d();\n    var xmax = new Vector3d();\n    var ymin = new Vector3d();\n    var ymax = new Vector3d();\n    var zmin = new Vector3d();\n    var zmax = new Vector3d();\n    var dia1 = new Vector3d();\n    var dia2 = new Vector3d();\n\n    // FIRST PASS: find 6 minima/maxima points\n    xmin.x = ymin.y = zmin.z = 100000000;\n    xmax.x = ymax.y = zmax.z = -1000000000;\n    for (i = 0; i < count; i++) {\n        var current = list[i];\n        if (current.x < xmin.x) {\n            xmin = current;\n        }\n        if (current.x > xmax.x) {\n            xmax = current;\n        }\n        if (current.y < ymin.y) {\n            ymin = current;\n        }\n        if (current.y > ymax.y) {\n            ymax = current;\n        }\n        if (current.z < zmin.z) {\n            zmin = current;\n        }\n        if (current.z > zmax.z) {\n            zmax = current;\n        }\n    }\n\n    // Set xspan = distance between the 2 points xmin & xmax (squared)\n    dx = xmax.x - xmin.x;\n    dy = xmax.y - xmin.y;\n    dz = xmax.z - xmin.z;\n    xspan = dx * dx + dy * dy + dz * dz;\n\n    // Same for y & z spans\n    dx = ymax.x - ymin.x;\n    dy = ymax.y - ymin.y;\n    dz = ymax.z - ymin.z;\n    yspan = dx * dx + dy * dy + dz * dz;\n    dx = zmax.x - zmin.x;\n    dy = zmax.y - zmin.y;\n    dz = zmax.z - zmin.z;\n    zspan = dx * dx + dy * dy + dz * dz;\n    dia1 = xmin;\n    dia2 = xmax;\n    maxspan = xspan;\n    if (yspan > maxspan) {\n        maxspan = yspan;\n        dia1 = ymin;\n        dia2 = ymax;\n    }\n    if (zspan > maxspan) {\n        dia1 = zmin;\n        dia2 = zmax;\n    }\n\n    // dia1,dia2 is a diameter of initial sphere\n    // calc initial center\n    Center.x = (dia1.x + dia2.x) / 2;\n    Center.y = (dia1.y + dia2.y) / 2;\n    Center.z = (dia1.z + dia2.z) / 2;\n\n    // calculate initial radius**2 and radius\n    dx = dia2.x - Center.x;\n    dy = dia2.y - Center.y;\n    dz = dia2.z - Center.z;\n    rad_sq = dx * dx + dy * dy + dz * dz;\n    Radius = Math.sqrt(rad_sq);\n\n    // SECOND PASS: increment current sphere\n    for (i = 0; i < count; i++) {\n        var current = list[i];\n        dx = current.x - Center.x;\n        dy = current.y - Center.y;\n        dz = current.z - Center.z;\n        old_to_p_sq = dx * dx + dy * dy + dz * dz;\n        if (old_to_p_sq > rad_sq) {\n            // this point is outside of current sphere\n            old_to_p = Math.sqrt(old_to_p_sq);\n\n            // calc radius of new sphere\n            Radius = (Radius + old_to_p) / 2;\n            rad_sq = Radius * Radius;\n            old_to_new = old_to_p - Radius;\n\n            // calc center of new sphere\n            Center.x = (Radius * Center.x + old_to_new * current.x) / old_to_p;\n            Center.y = (Radius * Center.y + old_to_new * current.y) / old_to_p;\n            Center.z = (Radius * Center.z + old_to_new * current.z) / old_to_p;\n        }\n    }\n\n    return SphereHull._create(Center, Radius);\n};\n\nvar ConvexHull$ = {};\n\nregisterType(\"ConvexHull\", [ConvexHull, ConvexHull$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A tile in a pyramid that uses an equirectangular projection.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { tilePrepDevice } from \"./render_globals.js\";\nimport { PositionTexture } from \"./double3d.js\";\nimport { WEBGL } from \"./graphics/webgl_constants.js\";\nimport { RenderTriangle } from \"./render_triangle.js\";\nimport { Tile } from \"./tile.js\";\n\n\n// wwtlib.EquirectangularTile\n\nexport function EquirectangularTile() {\n    this._tileDegrees$1 = 0;\n    this._topDown$1 = true;\n    this._subDivisionLevel$1 = 1;\n    Tile.call(this);\n}\n\nEquirectangularTile.create = function (level, x, y, dataset, parent) {\n    var temp = new EquirectangularTile();\n    temp.parent = parent;\n    temp.level = level;\n    temp.tileX = x;\n    temp.tileY = y;\n    temp.dataset = dataset;\n    temp._topDown$1 = !dataset.get_bottomsUp();\n    temp.computeBoundingSphere();\n    return temp;\n};\n\nvar EquirectangularTile$ = {\n    computeBoundingSphere: function () {\n        if (!this._topDown$1) {\n            this.computeBoundingSphereBottomsUp();\n            return;\n        }\n        this._tileDegrees$1 = this.dataset.get_baseTileDegrees() / Math.pow(2, this.level);\n        var latMin = (90 - ((this.tileY) * this._tileDegrees$1));\n        var latMax = (90 - (((this.tileY + 1)) * this._tileDegrees$1));\n        var lngMin = ((this.tileX * this._tileDegrees$1) - 180);\n        var lngMax = ((((this.tileX + 1)) * this._tileDegrees$1) - 180);\n        var latCenter = (latMin + latMax) / 2;\n        var lngCenter = (lngMin + lngMax) / 2;\n        this.sphereCenter = this.geoTo3d(latCenter, lngCenter, false);\n        this.topLeft = this.geoTo3d(latMin, lngMin, false);\n        this.bottomRight = this.geoTo3d(latMax, lngMax, false);\n        this.topRight = this.geoTo3d(latMin, lngMax, false);\n        this.bottomLeft = this.geoTo3d(latMax, lngMin, false);\n        var distVect = this.geoTo3d(latMin, lngMin, false);\n        distVect.subtract(this.sphereCenter);\n        this.sphereRadius = distVect.length();\n        this._tileDegrees$1 = lngMax - lngMin;\n    },\n\n    computeBoundingSphereBottomsUp: function () {\n        var tileDegrees = this.dataset.get_baseTileDegrees() / (Math.pow(2, this.level));\n        var latMin = (-90 + (((this.tileY + 1)) * tileDegrees));\n        var latMax = (-90 + ((this.tileY) * tileDegrees));\n        var lngMin = ((this.tileX * tileDegrees) - 180);\n        var lngMax = ((((this.tileX + 1)) * tileDegrees) - 180);\n        var latCenter = (latMin + latMax) / 2;\n        var lngCenter = (lngMin + lngMax) / 2;\n        this.sphereCenter = this.geoTo3d(latCenter, lngCenter, false);\n        this.topLeft = this.geoTo3d(latMin, lngMin, false);\n        this.bottomRight = this.geoTo3d(latMax, lngMax, false);\n        this.topRight = this.geoTo3d(latMin, lngMax, false);\n        this.bottomLeft = this.geoTo3d(latMax, lngMin, false);\n        var distVect = this.topLeft;\n        distVect.subtract(this.sphereCenter);\n        this.sphereRadius = distVect.length();\n        tileDegrees = lngMax - lngMin;\n    },\n\n    createGeometry: function (renderContext) {\n        Tile.prototype.createGeometry.call(this, renderContext);\n        if (renderContext.gl == null) {\n            if (!this.dataset.get_dataSetType() || this.dataset.get_dataSetType() === 1) {\n                this._subDivisionLevel$1 = Math.max(2, (4 - this.level) * 2);\n            }\n        } else {\n            this._subDivisionLevel$1 = 32;\n        }\n        try {\n            for (var i = 0; i < 4; i++) {\n                this._renderTriangleLists[i] = [];\n            }\n            if (!this._topDown$1) {\n                return this._createGeometryBottomsUp$1(renderContext);\n            }\n            var lat, lng;\n            var index = 0;\n            var tileDegrees = this.dataset.get_baseTileDegrees() / Math.pow(2, this.level);\n            var latMin = (90 - ((this.tileY) * tileDegrees));\n            var latMax = (90 - (((this.tileY + 1)) * tileDegrees));\n            var lngMin = ((this.tileX * tileDegrees) - 180);\n            var lngMax = ((((this.tileX + 1)) * tileDegrees) - 180);\n            var tileDegreesX = lngMax - lngMin;\n            var tileDegreesY = latMax - latMin;\n            this.topLeft = this.geoTo3d(latMin, lngMin, false);\n            this.bottomRight = this.geoTo3d(latMax, lngMax, false);\n            this.topRight = this.geoTo3d(latMin, lngMax, false);\n            this.bottomLeft = this.geoTo3d(latMax, lngMin, false);\n\n            // Create a vertex buffer\n            var verts = new Array((this._subDivisionLevel$1 + 1) * (this._subDivisionLevel$1 + 1));\n            var x, y;\n            var textureStep = 1 / this._subDivisionLevel$1;\n            for (y = 0; y <= this._subDivisionLevel$1; y++) {\n                if (y !== this._subDivisionLevel$1) {\n                    lat = latMin + (textureStep * tileDegreesY * y);\n                }\n                else {\n                    lat = latMax;\n                }\n                for (x = 0; x <= this._subDivisionLevel$1; x++) {\n                    if (x !== this._subDivisionLevel$1) {\n                        lng = lngMin + (textureStep * tileDegreesX * x);\n                    }\n                    else {\n                        lng = lngMax;\n                    }\n                    index = y * (this._subDivisionLevel$1 + 1) + x;\n                    verts[index] = PositionTexture.createPos(this.geoTo3d(lat, lng, false), x * textureStep, y * textureStep);\n                }\n            }\n            this.triangleCount = this._subDivisionLevel$1 * this._subDivisionLevel$1 * 2;\n            var quarterDivisions = this._subDivisionLevel$1 / 2;\n            var part = 0;\n            if (renderContext.gl == null) {\n                for (var y2 = 0; y2 < 2; y2++) {\n                    for (var x2 = 0; x2 < 2; x2++) {\n                        index = 0;\n                        for (var y1 = (quarterDivisions * y2); y1 < (quarterDivisions * (y2 + 1)); y1++) {\n                            for (var x1 = (quarterDivisions * x2); x1 < (quarterDivisions * (x2 + 1)); x1++) {\n                                var p1;\n                                var p2;\n                                var p3;\n\n                                // First triangle in quad\n                                p1 = verts[(y1 * (this._subDivisionLevel$1 + 1) + x1)];\n                                p2 = verts[((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1)];\n                                p3 = verts[(y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1))];\n                                this._renderTriangleLists[part].push(RenderTriangle.create(p1, p3, p2, this.texture, this.level));\n\n                                // Second triangle in quad\n                                p1 = verts[(y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1))];\n                                p2 = verts[((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1)];\n                                p3 = verts[((y1 + 1) * (this._subDivisionLevel$1 + 1) + (x1 + 1))];\n                                this._renderTriangleLists[part].push(RenderTriangle.create(p1, p3, p2, this.texture, this.level));\n                            }\n                        }\n                        part++;\n                    }\n                }\n            } else {\n                //process vertex list\n                this._vertexBuffer = tilePrepDevice.createBuffer();\n                tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this._vertexBuffer);\n                var f32array = new Float32Array(verts.length * 5);\n                var buffer = f32array;\n                index = 0;\n                var $enum1 = ss.enumerate(verts);\n                while ($enum1.moveNext()) {\n                    var pt = $enum1.current;\n                    index = this.addVertex(buffer, index, pt);\n                }\n                tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n                for (var y2 = 0; y2 < 2; y2++) {\n                    for (var x2 = 0; x2 < 2; x2++) {\n                        var ui16array = new Uint16Array(this.triangleCount * 3);\n                        var indexArray = ui16array;\n                        index = 0;\n                        for (var y1 = (quarterDivisions * y2); y1 < (quarterDivisions * (y2 + 1)); y1++) {\n                            for (var x1 = (quarterDivisions * x2); x1 < (quarterDivisions * (x2 + 1)); x1++) {\n                                // First triangle in quad\n                                indexArray[index++] = (y1 * (this._subDivisionLevel$1 + 1) + x1);\n                                indexArray[index++] = ((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1);\n                                indexArray[index++] = (y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1));\n\n                                // Second triangle in quad\n                                indexArray[index++] = (y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1));\n                                indexArray[index++] = ((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1);\n                                indexArray[index++] = ((y1 + 1) * (this._subDivisionLevel$1 + 1) + (x1 + 1));\n                            }\n                        }\n                        this._indexBuffers[part] = tilePrepDevice.createBuffer();\n                        tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, this._indexBuffers[part]);\n                        tilePrepDevice.bufferData(WEBGL.ELEMENT_ARRAY_BUFFER, ui16array, WEBGL.STATIC_DRAW);\n                        part++;\n                    }\n                }\n            }\n        }\n        catch ($e2) {\n        }\n        return true;\n    },\n\n    _createGeometryBottomsUp$1: function (renderContext) {\n        var lat, lng;\n        var index = 0;\n        var tileDegrees = this.dataset.get_baseTileDegrees() / Math.pow(2, this.level);\n        var latMin = (-90 + (((this.tileY + 1)) * tileDegrees));\n        var latMax = (-90 + ((this.tileY) * tileDegrees));\n        var lngMin = ((this.tileX * tileDegrees) - 180);\n        var lngMax = ((((this.tileX + 1)) * tileDegrees) - 180);\n        var tileDegreesX = lngMax - lngMin;\n        var tileDegreesY = latMax - latMin;\n\n        // Create a vertex buffer\n        var verts = new Array((this._subDivisionLevel$1 + 1) * (this._subDivisionLevel$1 + 1));\n        var x, y;\n        var textureStep = 1 / this._subDivisionLevel$1;\n        for (y = 0; y <= this._subDivisionLevel$1; y++) {\n            if (y !== this._subDivisionLevel$1) {\n                lat = latMin + (textureStep * tileDegreesY * y);\n            }\n            else {\n                lat = latMax;\n            }\n            for (x = 0; x <= this._subDivisionLevel$1; x++) {\n                if (x !== this._subDivisionLevel$1) {\n                    lng = lngMin + (textureStep * tileDegreesX * x);\n                }\n                else {\n                    lng = lngMax;\n                }\n                index = y * (this._subDivisionLevel$1 + 1) + x;\n                verts[index] = PositionTexture.createPos(this.geoTo3d(lat, lng, false), x * textureStep, y * textureStep);\n            }\n        }\n        this.triangleCount = this._subDivisionLevel$1 * this._subDivisionLevel$1 * 2;\n        var quarterDivisions = this._subDivisionLevel$1 / 2;\n        var part = 0;\n        if (renderContext.gl == null) {\n            for (var y2 = 0; y2 < 2; y2++) {\n                for (var x2 = 0; x2 < 2; x2++) {\n                    index = 0;\n                    for (var y1 = (quarterDivisions * y2); y1 < (quarterDivisions * (y2 + 1)); y1++) {\n                        for (var x1 = (quarterDivisions * x2); x1 < (quarterDivisions * (x2 + 1)); x1++) {\n                            var p1;\n                            var p2;\n                            var p3;\n\n                            // First triangle in quad\n                            p1 = verts[(y1 * (this._subDivisionLevel$1 + 1) + x1)];\n                            p2 = verts[((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1)];\n                            p3 = verts[(y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1))];\n                            this._renderTriangleLists[part].push(RenderTriangle.create(p1, p3, p2, this.texture, this.level));\n\n                            // Second triangle in quad\n                            p1 = verts[(y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1))];\n                            p2 = verts[((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1)];\n                            p3 = verts[((y1 + 1) * (this._subDivisionLevel$1 + 1) + (x1 + 1))];\n                            this._renderTriangleLists[part].push(RenderTriangle.create(p1, p3, p2, this.texture, this.level));\n                        }\n                    }\n                    part++;\n                }\n            }\n        } else {\n            //process vertex list\n            this._vertexBuffer = tilePrepDevice.createBuffer();\n            tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this._vertexBuffer);\n            var f32array = new Float32Array(verts.length * 5);\n            var buffer = f32array;\n            index = 0;\n            var $enum1 = ss.enumerate(verts);\n            while ($enum1.moveNext()) {\n                var pt = $enum1.current;\n                index = this.addVertex(buffer, index, pt);\n            }\n            tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n            for (var y2 = 0; y2 < 2; y2++) {\n                for (var x2 = 0; x2 < 2; x2++) {\n                    var ui16array = new Uint16Array(this.triangleCount * 3);\n                    var indexArray = ui16array;\n                    index = 0;\n                    for (var y1 = (quarterDivisions * y2); y1 < (quarterDivisions * (y2 + 1)); y1++) {\n                        for (var x1 = (quarterDivisions * x2); x1 < (quarterDivisions * (x2 + 1)); x1++) {\n                            // First triangle in quad\n                            indexArray[index++] = (y1 * (this._subDivisionLevel$1 + 1) + x1);\n                            indexArray[index++] = ((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1);\n                            indexArray[index++] = (y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1));\n\n                            // Second triangle in quad\n                            indexArray[index++] = (y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1));\n                            indexArray[index++] = ((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1);\n                            indexArray[index++] = ((y1 + 1) * (this._subDivisionLevel$1 + 1) + (x1 + 1));\n                        }\n                    }\n                    this._indexBuffers[part] = tilePrepDevice.createBuffer();\n                    tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, this._indexBuffers[part]);\n                    tilePrepDevice.bufferData(WEBGL.ELEMENT_ARRAY_BUFFER, ui16array, WEBGL.STATIC_DRAW);\n                    part++;\n                }\n            }\n        }\n\n        return true;\n    }\n};\n\nregisterType(\"EquirectangularTile\", [EquirectangularTile, EquirectangularTile$, Tile]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// \"Fast math\" routines \"from Healpix Java package\"\n\nimport { registerType } from \"./typesystem.js\";\n\n\n// wwtlib.FastMath\n\nexport function FastMath() { }\n\nconst pI4_A = 0.785398155450821;\nconst pI4_B = 7.94662735614793E-09;\nconst pI4_C = 3.06161699786838E-17;\nconst m_1_PI = 0.318309886183791;\n\nFastMath._mulsign = function (x, y) {\n    return FastMath._sign(y) * x;\n};\n\nFastMath._isnan = function (d) {\n    return d !== d;\n};\n\nFastMath._isinf = function (d) {\n    // TODO: this was documented as checking for negative infinity as well, and\n    // almost surely should do that!\n    return Math.abs(d) === Number.POSITIVE_INFINITY;\n};\n\nFastMath._sign = function (d) {\n    if (!d) {\n        return 0;\n    }\n    return (d > 0) ? 1 : -1;\n};\n\nFastMath._atanhelper = function (s) {\n    var t = s * s;\n    var u = -1.88796008463073E-05;\n    u = u * t + (0.000209850076645817);\n    u = u * t + (-0.00110611831486672);\n    u = u * t + (0.00370026744188713);\n    u = u * t + (-0.00889896195887655);\n    u = u * t + (0.0165993297735292);\n    u = u * t + (-0.0254517624932313);\n    u = u * t + (0.0337852580001353);\n    u = u * t + (-0.0407629191276837);\n    u = u * t + (0.0466667150077841);\n    u = u * t + (-0.0523674852303482);\n    u = u * t + (0.0587666392926674);\n    u = u * t + (-0.0666573579361081);\n    u = u * t + (0.076921953831177);\n    u = u * t + (-0.090908995008245);\n    u = u * t + (0.111111105648261);\n    u = u * t + (-0.142857142667713);\n    u = u * t + (0.199999999996591);\n    u = u * t + (-0.333333333333311);\n    return u * t * s + s;\n};\n\nFastMath._atan2k = function (y, x) {\n    var q = 0;\n    if (x < 0) {\n        x = -x;\n        q = -2;\n    }\n    if (y > x) {\n        var t = x;\n        x = y;\n        y = -t;\n        q += 1;\n    }\n    return FastMath._atanhelper(y / x) + q * (Math.PI / 2);\n};\n\n// This method calculates the arc tangent of y/x in radians, using the signs of\n// the two arguments to determine the quadrant of the result. The results may\n// have maximum error of 2 ulps.\nFastMath.atan2 = function (y, x) {\n    var r = FastMath._atan2k(Math.abs(y), x);\n    r = FastMath._mulsign(r, x);\n    if (FastMath._isinf(x) || !x) {\n        r = Math.PI / 2 - ((FastMath._isinf(x)) ? (FastMath._sign(x) * (Math.PI / 2)) : 0);\n    }\n    if (FastMath._isinf(y)) {\n        r = Math.PI / 2 - ((FastMath._isinf(x)) ? (FastMath._sign(x) * (Math.PI * 1 / 4)) : 0);\n    }\n    if (!y) {\n        r = ((FastMath._sign(x) === -1) ? Math.PI : 0);\n    }\n    return (FastMath._isnan(x) || FastMath._isnan(y)) ? Number.NaN : FastMath._mulsign(r, y);\n};\n\n// This method calculates the arc sine of x in radians. The return value is in\n// the range [-pi/2, pi/2]. The results may have maximum error of 3 ulps.\nFastMath.asin = function (d) {\n    return FastMath._mulsign(FastMath._atan2k(Math.abs(d), Math.sqrt((1 + d) * (1 - d))), d);\n};\n\n// This method calculates the arc cosine of x in radians. The return value is in\n// the range [0, pi]. The results may have maximum error of 3 ulps.\nFastMath.acos = function (d) {\n    return FastMath._mulsign(FastMath._atan2k(Math.sqrt((1 + d) * (1 - d)), Math.abs(d)), d) + ((d < 0) ? Math.PI : 0);\n};\n\n// Returns the arc tangent of an angle. The results may have maximum error of 2\n// ulps.\nFastMath.atan = function (s) {\n    var q = 0;\n    if (s < 0) {\n        s = -s;\n        q = 2;\n    }\n    if (s > 1) {\n        s = 1 / s;\n        q |= 1;\n    }\n    var t = FastMath._atanhelper(s);\n    if (!!(q & 1)) {\n        t = 1.5707963267949 - t;\n    }\n    if (!!(q & 2)) {\n        t = -t;\n    }\n    return t;\n};\n\nFastMath._sincoshelper = function (d) {\n    var s = d * d;\n    var u = -7.97255955009038E-18;\n    u = u * s + 2.81009972710863E-15;\n    u = u * s - 7.64712219118159E-13;\n    u = u * s + 1.60590430605665E-10;\n    u = u * s - 2.50521083763502E-08;\n    u = u * s + 2.75573192239199E-06;\n    u = u * s - 0.000198412698412696;\n    u = u * s + 0.00833333333333333;\n    u = u * s - 0.166666666666667;\n    return s * u * d + d;\n};\n\n// Returns the trigonometric sine of an angle. The results may have maximum\n// error of 2 ulps.\nFastMath.sin = function (d) {\n    var u = d * m_1_PI;\n    var q = Math.floor((u < 0) ? u - 0.5 : u + 0.5);\n    var x = 4 * q;\n    d -= x * pI4_A;\n    d -= x * pI4_B;\n    d -= x * pI4_C;\n    if (!!(q & 1)) {\n        d = -d;\n    }\n    return FastMath._sincoshelper(d);\n};\n\n// Returns the trigonometric cosine of an angle. The results may have maximum\n// error of 2 ulps.\nFastMath.cos = function (d) {\n    var u = d * m_1_PI - 0.5;\n    var q = 1 + 2 * Math.floor((u < 0) ? u - 0.5 : u + 0.5);\n    var x = 2 * q;\n    d -= x * pI4_A;\n    d -= x * pI4_B;\n    d -= x * pI4_C;\n    if (!(q & 2)) {\n        d = -d;\n    }\n    return FastMath._sincoshelper(d);\n};\n\nvar FastMath$ = {};\n\nregisterType(\"FastMath\", [FastMath, FastMath$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Properties about FITS data.\n\nimport { registerType, registerEnum } from \"./typesystem.js\";\n\n\n// wwtlib.ScaleTypes\n\nexport var ScaleTypes = {\n    linear: 0,\n    log: 1,\n    power: 2,\n    squareRoot: 3,\n    histogramEqualization: 4\n};\n\nregisterType(\"ScaleTypes\", ScaleTypes);\nregisterEnum(\"ScaleTypes\", ScaleTypes);\n\n\n// wwtlib.FitsProperties\n\nexport function FitsProperties() {\n    this.bZero = 0;\n    this.bScale = 1;\n    this.containsBlanks = false;\n    this.blankValue = Number.MIN_VALUE;\n    this.maxVal = Number.MIN_VALUE;\n    this.minVal = Number.MAX_VALUE;\n    this.upperCut = Number.MIN_VALUE;\n    this.lowerCut = Number.MAX_VALUE;\n    this.transparentBlack = false;\n    this.colorMapName = 'viridis';\n    this.scaleType = 0;\n\n    // This field exists to support non-HiPS tiled FITS imagesets. We need a\n    // mechanism to notify callers when the top-level tile is loaded,\n    // because only after that has happened is it possible to set up\n    // trustworthy values for properties like LowerCut here. *HiPS* tiled\n    // FITS imagesets don't need this because they have a separate top-level\n    // \"properties\" file that can be used to trigger a callback.\n    //\n    // We need to load the top-level tile to properly set up the properties\n    // here because (1) they can't be determined well from the level-0 tile\n    // data alone, (2) we want to give the dataset author a chance to\n    // customize them, and (3) the tiled FITS data-loaders don't calculate\n    // min/max from the data for performance reasons. And we'd prefer not to\n    // add the relevant values to the ImageSet XML definition.\n    //\n    // Anyway, the tangent tile image loading code will cause this action to\n    // be triggered when the level-0 tile loads successfully. It would make\n    // sense to also trigger this action for when a non-tiled FITS file is\n    // loaded, but in that use case the existing WcsLoaded callback\n    // suffices. The tiling framework already uses WcsLoaded so for that\n    // case we need to add this extra hook.\n    this.onMainImageLoaded = null;\n    this.mainImageLoadedEventHasFired = false;\n}\n\nvar FitsProperties$ = {\n    // See description of the onMainImageLoaded field. This method exists to\n    // help non-HiPS tiled FITS datasets notify callers when the initial\n    // data have loaded and these FitsProperties can be trusted.\n    _fireMainImageLoaded: function (image) {\n        if (this.onMainImageLoaded != null && !this.mainImageLoadedEventHasFired) {\n            this.mainImageLoadedEventHasFired = true;\n            this.onMainImageLoaded(image);\n        }\n    }\n};\n\nregisterType(\"FitsProperties\", [FitsProperties, FitsProperties$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A WTML folder of different kinds of WWT content.\n\nimport { ss } from \"./ss.js\";\nimport { registerType, registerEnum } from \"./typesystem.js\";\nimport { set_makeNewFolder } from \"./data_globals.js\";\nimport { Util } from \"./baseutil.js\";\nimport { IThumbnail } from \"./interfaces.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { FolderUp } from \"./folder_up.js\";\nimport { Imageset } from \"./imageset.js\";\nimport { Place } from \"./place.js\";\nimport { Tour } from \"./tour.js\";\nimport { WebFile } from \"./web_file.js\";\n\n\n// wwtlib.FolderGroup\n\nexport var FolderGroup = {\n    explorer: 0,\n    tour: 1,\n    search: 2,\n    constellation: 3,\n    view: 4,\n    goTo: 5,\n    community: 6,\n    context: 7,\n    voTable: 8,\n    imageStack: 9\n};\n\nregisterType(\"FolderGroup\", FolderGroup);\nregisterEnum(\"FolderGroup\", FolderGroup);\n\n\n// wwtlib.FolderRefreshType\n\nexport var FolderRefreshType = {\n    interval: 0,\n    conditionalGet: 1,\n    viewChange: 2\n};\n\nregisterType(\"FolderRefreshType\", FolderRefreshType);\nregisterEnum(\"FolderRefreshType\", FolderRefreshType);\n\n\n// wwtlib.FolderType\n\nexport var FolderType = {\n    earth: 0,\n    planet: 1,\n    sky: 2,\n    panorama: 3\n};\n\nregisterType(\"FolderType\", FolderType);\nregisterEnum(\"FolderType\", FolderType);\n\n\n// wwtlib.Folder\n\nexport function Folder() {\n    this.parent = null;\n    this.isProxy = false;\n    this._versionDependent = false;\n    this._readOnly = true;\n    this._dirty = false;\n    this._thumbnail = null;\n    this._proxyFolder = null;\n    this._lastUpdate = new Date();\n    this._childList = [];\n    this._itemsField = [];\n    this._imagesets = [];\n    this._tours = [];\n    this._folders = [];\n    this._places = [];\n    this._groupField = 0;\n    this._refreshTypeField = 0;\n    this._refreshTypeFieldSpecified = false;\n    this._browseableField = true;\n    this._browseableFieldSpecified = false;\n    this._searchableField = false;\n    this._typeField = 0;\n    this._communityIdField = 0;\n    this._componentIdField = 0;\n    this._permissionField = 0;\n}\n\nvar Folder$ = {\n    toString: function () {\n        return this._nameField;\n    },\n\n    get_versionDependent: function () {\n        return this._versionDependent;\n    },\n\n    set_versionDependent: function (value) {\n        this._versionDependent = value;\n        var $enum1 = ss.enumerate(this._folders);\n        while ($enum1.moveNext()) {\n            var folder = $enum1.current;\n            folder.set_versionDependent(this._versionDependent);\n        }\n        return value;\n    },\n\n    get_readOnly: function () {\n        return this._readOnly;\n    },\n\n    set_readOnly: function (value) {\n        this._readOnly = value;\n        return value;\n    },\n\n    get_dirty: function () {\n        return this._dirty;\n    },\n\n    set_dirty: function (value) {\n        this._dirty = value;\n        return value;\n    },\n\n    loadFromUrlWithErrorCallback: function (url, complete, onError) {\n        this._onError = onError;\n        this.loadFromUrl(url, complete);\n    },\n\n    loadFromUrl: function (url, complete) {\n        this._onComplete = complete;\n        this._webFile = new WebFile(URLHelpers.singleton.rewrite(url, 1));\n        this._webFile.onStateChange = ss.bind('_loadData', this);\n        this._webFile.send();\n    },\n\n    _loadData: function () {\n        if (this._webFile.get_state() === 2) {\n            console.error(this._webFile.get_message());\n            if (this._onError != null) {\n                this._onError();\n            }\n        } else if (this._webFile.get_state() === 1) {\n            var node = Util.selectSingleNode(this._webFile.getXml(), 'Folder');\n            if (node == null) {\n                var doc = this._webFile.getXml();\n                if (doc != null) {\n                    node = Util.selectSingleNode(doc, 'Folder');\n                }\n            }\n            if (node != null) {\n                this._clearChildren();\n                this._parseXML(node);\n            }\n            if (this._onComplete != null) {\n                this._onComplete();\n            }\n        }\n    },\n\n    _clearChildren: function () {\n        this._folders.length = 0;\n        this._tours.length = 0;\n        this._places.length = 0;\n        this.get_imagesets().length = 0;\n    },\n\n    _parseXML: function (node) {\n        if (node.attributes.getNamedItem('Name') != null) {\n            this._nameField = node.attributes.getNamedItem('Name').nodeValue;\n        } else {\n            this._nameField = '';\n        }\n        if (node.attributes.getNamedItem('Url') != null) {\n            this._urlField = node.attributes.getNamedItem('Url').nodeValue;\n        }\n        if (node.attributes.getNamedItem('Thumbnail') != null) {\n            this._thumbnailUrlField = node.attributes.getNamedItem('Thumbnail').nodeValue;\n        }\n\n        // load Children\n\n        var $enum1 = ss.enumerate(node.childNodes);\n        while ($enum1.moveNext()) {\n            var child = $enum1.current;\n            switch (child.nodeName) {\n                case 'Folder':\n                    var temp = new Folder();\n                    temp.parent = this;\n                    temp._parseXML(child);\n                    this._folders.push(temp);\n                    break;\n                case 'Place':\n                    this._places.push(Place._fromXml(child));\n                    break;\n                case 'ImageSet':\n                    this.get_imagesets().push(Imageset.fromXMLNode(child));\n                    break;\n                case 'Tour':\n                    this.get_tours().push(Tour._fromXml(child));\n                    break;\n            }\n        }\n    },\n\n    addChildFolder: function (child) {\n        this._folders.push(child);\n        this._dirty = true;\n    },\n\n    removeChildFolder: function (child) {\n        ss.remove(this._folders, child);\n        this._dirty = true;\n    },\n\n    addChildPlace: function (child) {\n        this._places.push(child);\n        this._dirty = true;\n    },\n\n    removeChildPlace: function (child) {\n        ss.remove(this._places, child);\n        this._dirty = true;\n    },\n\n    get_thumbnail: function () {\n        return this._thumbnail;\n    },\n\n    set_thumbnail: function (value) {\n        this._thumbnail = value;\n        return value;\n    },\n\n    get_bounds: function () {\n        return this._bounds;\n    },\n\n    set_bounds: function (value) {\n        this._bounds = value;\n        return value;\n    },\n\n    get_isImage: function () {\n        return false;\n    },\n\n    get_isTour: function () {\n        return false;\n    },\n\n    get_isFolder: function () {\n        return true;\n    },\n\n    get_isCloudCommunityItem: function () {\n        return !!this._communityIdField || this._permissionField > 0;\n    },\n\n    refresh: function () {\n        if (this._proxyFolder == null) {\n            this._proxyFolder = new Folder();\n            this._proxyFolder.isProxy = true;\n            this._proxyFolder.parent = this.parent;\n        }\n\n        //Also listening to errors, to make sure clients do not wait forever in\n        //the case of a 404 or similar. Especially useful for recursive\n        //downloads, where potentially dozens of URL's are downloaded. In case\n        //of errors during downloads, the clients will have an empty folder\n        //during the callback.\n        this._proxyFolder.loadFromUrlWithErrorCallback(this._urlField, this._childReadyCallback, this._childReadyCallback);\n        this._childReadyCallback = null;\n    },\n\n    childLoadCallback: function (callback) {\n        this._childReadyCallback = callback;\n        var temp = this.get_children();\n        if (this._proxyFolder == null) {\n            callback();\n        }\n    },\n\n    get_children: function () {\n        if (ss.emptyString(this._urlField)) {\n            this._childList.length = 0;\n            if (this.parent != null) {\n                var folderUp = new FolderUp();\n                folderUp.parent = this.parent;\n                this._childList.push(folderUp);\n            }\n            if (this.get_folders() != null) {\n                var $enum1 = ss.enumerate(this.get_folders());\n                while ($enum1.moveNext()) {\n                    var folder = $enum1.current;\n                    this._childList.push(folder);\n                }\n            }\n            if (this.get_imagesets() != null) {\n                var $enum2 = ss.enumerate(this.get_imagesets());\n                while ($enum2.moveNext()) {\n                    var imset = $enum2.current;\n                    this._childList.push(imset);\n                }\n            }\n            if (this.get_places() != null) {\n                var $enum3 = ss.enumerate(this.get_places());\n                while ($enum3.moveNext()) {\n                    var place = $enum3.current;\n                    this._childList.push(place);\n                }\n            }\n            if (this.get_tours() != null) {\n                var $enum4 = ss.enumerate(this.get_tours());\n                while ($enum4.moveNext()) {\n                    var tour = $enum4.current;\n                    this._childList.push(tour);\n                }\n            }\n            return this._childList;\n        } else {\n            var ts = (this._lastUpdate - ss.now()) / 1000;\n            if (this.get_refreshType() === 1 || this._proxyFolder == null || (!this.get_refreshType() && (parseInt(this._refreshIntervalField) < ts))) {\n                this.refresh();\n            }\n            if (this._proxyFolder != null) {\n                return this._proxyFolder.get_children();\n            }\n            else {\n                return null;\n            }\n        }\n    },\n\n    get_msrCommunityId: function () {\n        return this._communityIdField;\n    },\n\n    set_msrCommunityId: function (value) {\n        this._communityIdField = value;\n        return value;\n    },\n\n    get_msrComponentId: function () {\n        return this._componentIdField;\n    },\n\n    set_msrComponentId: function (value) {\n        this._componentIdField = value;\n        return value;\n    },\n\n    get_permission: function () {\n        return this._permissionField;\n    },\n\n    set_permission: function (value) {\n        this._permissionField = value;\n        return value;\n    },\n\n    get_folders: function () {\n        return this._folders;\n    },\n\n    set_folders: function (value) {\n        this._folders = value;\n        return value;\n    },\n\n    get_places: function () {\n        return this._places;\n    },\n\n    set_places: function (value) {\n        this._places = value;\n        return value;\n    },\n\n    get_imagesets: function () {\n        return this._imagesets;\n    },\n\n    set_imagesets: function (value) {\n        this._imagesets = value;\n        return value;\n    },\n\n    get_tours: function () {\n        return this._tours;\n    },\n\n    set_tours: function (value) {\n        this._tours = value;\n        return value;\n    },\n\n    get_name: function () {\n        if (this._nameField == null) {\n            return '';\n        } else {\n            return this._nameField;\n        }\n    },\n\n    set_name: function (value) {\n        this._nameField = value;\n        return value;\n    },\n\n    get_group: function () {\n        return this._groupField;\n    },\n\n    set_group: function (value) {\n        this._groupField = value;\n        return value;\n    },\n\n    get_url: function () {\n        return this._urlField;\n    },\n\n    set_url: function (value) {\n        this._urlField = value;\n        return value;\n    },\n\n    get_thumbnailUrl: function () {\n        if (ss.emptyString(this._thumbnailUrlField)) {\n            return URLHelpers.singleton.engineAssetUrl('thumb_folder.jpg');\n        }\n        return this._thumbnailUrlField;\n    },\n\n    set_thumbnailUrl: function (value) {\n        this._thumbnailUrlField = value;\n        return value;\n    },\n\n    get_refreshType: function () {\n        return this._refreshTypeField;\n    },\n\n    set_refreshType: function (value) {\n        this._refreshTypeField = value;\n        this.set_refreshTypeSpecified(true);\n        return value;\n    },\n\n    get_refreshTypeSpecified: function () {\n        return this._refreshTypeFieldSpecified;\n    },\n\n    set_refreshTypeSpecified: function (value) {\n        this._refreshTypeFieldSpecified = value;\n        return value;\n    },\n\n    get_refreshInterval: function () {\n        return this._refreshIntervalField;\n    },\n\n    set_refreshInterval: function (value) {\n        this._refreshIntervalField = value;\n        return value;\n    },\n\n    get_browseable: function () {\n        return this._browseableField;\n    },\n\n    set_browseable: function (value) {\n        this._browseableField = value;\n        this._browseableFieldSpecified = true;\n        return value;\n    },\n\n    get_browseableSpecified: function () {\n        return this._browseableFieldSpecified;\n    },\n\n    set_browseableSpecified: function (value) {\n        this._browseableFieldSpecified = value;\n        return value;\n    },\n\n    get_searchable: function () {\n        return this._searchableField;\n    },\n\n    set_searchable: function (value) {\n        this._searchableField = value;\n        return value;\n    },\n\n    get_type: function () {\n        return this._typeField;\n    },\n\n    set_type: function (value) {\n        this._typeField = value;\n        return value;\n    },\n\n    get_subType: function () {\n        return this._subTypeField;\n    },\n\n    set_subType: function (value) {\n        this._subTypeField = value;\n        return value;\n    }\n};\n\nregisterType(\"Folder\", [Folder, Folder$, null, IThumbnail]);\n\nset_makeNewFolder(function () {\n    return new Folder();\n});\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Infrastructure for browsing the WWT folder structure.\n\nimport { ss } from \"./ss.js\";\nimport { registerType, registerEnum } from \"./typesystem.js\";\nimport { globalWWTControl } from \"./data_globals.js\";\nimport { globalRenderContext } from \"./render_globals.js\";\nimport { Vector2d } from \"./double3d.js\";\nimport { Folder } from \"./folder.js\";\nimport { FolderUp } from \"./folder_up.js\";\nimport { Imageset } from \"./imageset.js\";\nimport { Place } from \"./place.js\";\nimport { RenderTriangle } from \"./render_triangle.js\";\nimport { Tour } from \"./tour.js\";\nimport { Mouse, Rectangle } from \"./util.js\";\n\n\n// wwtlib.ThumbnailSize\n\nexport var ThumbnailSize = {\n    small: 0,\n    big: 1\n};\n\nregisterType(\"ThumbnailSize\", ThumbnailSize);\nregisterEnum(\"ThumbnailSize\", ThumbnailSize);\n\n\n// wwtlib.FolderBrowser\n\nexport function FolderBrowser() {\n    this._items = [];\n    this.top = 10;\n    this.left = 10;\n    this._indexTouchDown = -1;\n    this._mouseDown = false;\n    this._lastX = 0;\n    this._lastY = 0;\n    this._ignoreClick = false;\n    this._thumbnailSize = 0;\n    this._horzSpacing = 110;\n    this._vertSpacing = 75;\n    this._thumbHeight = 65;\n    this._thumbWidth = 110;\n    this._horzMultiple = 110;\n    this._rowCount = 1;\n    this._colCount = 6;\n    this._dragging = false;\n    this._startIndex = 0;\n    this._startOffset = 0;\n    this._selectedItem = -1;\n    this._hoverItem = -1;\n    this.showAddButton = false;\n    this.width = 0;\n    this.height = 0;\n    this._addButtonHover = false;\n    this.imageClicked = false;\n}\n\nFolderBrowser._downloading = false;\nFolderBrowser._imagesLoaded = false;\nFolderBrowser._imageLoadCount = 0;\n\nFolderBrowser.create = function () {\n    var temp = new FolderBrowser();\n    temp.height = 85;\n    temp.width = 1920;\n    temp.canvas = document.createElement('canvas');\n    temp.canvas.width = temp.width;\n    temp.canvas.height = temp.height;\n    temp.setup();\n    temp.loadImages();\n    return temp;\n};\n\nvar FolderBrowser$ = {\n    setup: function () {\n        this.canvas.addEventListener('click', ss.bind('onClick', this), false);\n        this.canvas.addEventListener('dblclick', ss.bind('onDoubleClick', this), false);\n        this.canvas.addEventListener('mousemove', ss.bind('onMouseMove', this), false);\n        this.canvas.addEventListener('mouseup', ss.bind('onMouseUp', this), false);\n        this.canvas.addEventListener('mousedown', ss.bind('onMouseDown', this), false);\n        this.canvas.addEventListener('touchstart', ss.bind('onTouchStart', this), false);\n        this.canvas.addEventListener('touchmove', ss.bind('onTouchMove', this), false);\n        this.canvas.addEventListener('touchend', ss.bind('onTouchEnd', this), false);\n        this.canvas.addEventListener('mouseout', ss.bind('onMouseUp', this), false);\n    },\n\n    onTouchStart: function (e) {\n        var ev = e;\n        ev.preventDefault();\n        this._mouseDown = true;\n        this._lastX = ev.targetTouches[0].pageX;\n        this._lastY = ev.targetTouches[0].pageY;\n        this._indexTouchDown = this._getItemIndexFromCursor(Vector2d.create(ev.targetTouches[0].pageX, ev.targetTouches[0].pageY));\n    },\n\n    onTouchMove: function (e) {\n        var ev = e;\n        ev.preventDefault();\n        if (this._mouseDown) {\n            var curX = ev.targetTouches[0].pageX - this._lastX;\n            var curY = ev.targetTouches[0].pageY - this._lastY;\n            if (this._mouseDown) {\n                this._dragging = true;\n            }\n            if (!this._dragging) {\n                var newHover = this._getItemIndexFromCursor(Vector2d.create(ev.targetTouches[0].pageX, ev.targetTouches[0].pageY));\n                if (this._hoverItem !== newHover) {\n                    this._hoverItem = newHover;\n                }\n            }\n            else {\n                var tiles = Math.round(((ev.targetTouches[0].pageX - this._lastX) + this._startOffset) / this._horzSpacing);\n                var offset = Math.round(((ev.targetTouches[0].pageX - this._lastX) + this._startOffset) - (tiles * this._horzSpacing));\n                this._startOffset = offset;\n                this._startIndex -= tiles;\n                if (this._startIndex < 0) {\n                    this._startOffset -= (this._horzSpacing * this._startIndex);\n                    this._startIndex = 0;\n                }\n                this._lastX = ev.targetTouches[0].pageX;\n                this._lastY = ev.targetTouches[0].pageY;\n            }\n            this.refresh();\n        }\n    },\n\n    onTouchEnd: function (e) {\n        var ev = e;\n        ev.preventDefault();\n        if (this._dragging) {\n            this._dragging = false;\n            this._ignoreClick = true;\n        } else if (this._indexTouchDown > -1 && this._mouseDown) {\n            this._handleClick(this._indexTouchDown);\n        }\n        this._startOffset = 0;\n        this._mouseDown = false;\n        this.refresh();\n    },\n\n    onClick: function (e) {\n        if (!this._ignoreClick) {\n            var index = this._getItemIndexFromCursor(Vector2d.create(e.offsetX, e.offsetY));\n            this._handleClick(index);\n        } else {\n            this._ignoreClick = false;\n        }\n    },\n\n    _handleClick: function (index) {\n        var $this = this;\n\n        if (index > -1) {\n            if (ss.canCast(this._items[index], Place)) {\n                var place = this._items[index];\n                globalWWTControl.gotoTarget(place, false, false, true);\n                return;\n            }\n            if (ss.canCast(this._items[index], Imageset)) {\n                var imageset = this._items[index];\n                globalRenderContext.set_backgroundImageset(imageset);\n                return;\n            }\n            if (ss.canCast(this._items[index], Tour)) {\n                var tour = this._items[index];\n                globalWWTControl.playTour(tour.get_tourUrl());\n                return;\n            }\n            if (ss.canCast(this._items[index], Folder)) {\n                var folder = this._items[index];\n                this._startIndex = 0;\n                folder.childLoadCallback(function () {\n                    $this._items = folder.get_children();\n                    $this.refresh();\n                });\n                return;\n            }\n            if (ss.canCast(this._items[index], FolderUp)) {\n                var folderUp = this._items[index];\n                if (folderUp.parent != null) {\n                    this._startIndex = 0;\n                    folderUp.parent.childLoadCallback(function () {\n                        $this._items = folderUp.parent.get_children();\n                        $this.refresh();\n                    });\n                }\n                return;\n            }\n        }\n        return;\n    },\n\n    onDoubleClick: function (e) {\n        RenderTriangle.renderingOn = !RenderTriangle.renderingOn;\n    },\n\n    onGestureChange: function (e) {\n        var g = e;\n        this._mouseDown = false;\n        var delta = g.scale;\n    },\n\n    onMouseDown: function (e) {\n        this._mouseDown = true;\n        this._lastX = Mouse.offsetX(this.canvas, e);\n        this._lastY = Mouse.offsetY(this.canvas, e);\n    },\n\n    onMouseMove: function (e) {\n        if (this._mouseDown) {\n            this._dragging = true;\n        }\n        if (!this._dragging) {\n            var newHover = this._getItemIndexFromCursor(Vector2d.create(Mouse.offsetX(this.canvas, e), Mouse.offsetY(this.canvas, e)));\n            if (this._hoverItem !== newHover) {\n                this._hoverItem = newHover;\n            }\n        } else {\n            var tiles = Math.round(((Mouse.offsetX(this.canvas, e) - this._lastX) + this._startOffset) / this._horzSpacing);\n            var offset = Math.round(((Mouse.offsetX(this.canvas, e) - this._lastX) + this._startOffset) - (tiles * this._horzSpacing));\n            this._startOffset = offset;\n            this._startIndex -= tiles;\n            if (this._startIndex < 0) {\n                this._startOffset -= (this._horzSpacing * this._startIndex);\n                this._startIndex = 0;\n            }\n            this._lastX = Mouse.offsetX(this.canvas, e);\n            this._lastY = Mouse.offsetY(this.canvas, e);\n        }\n        this.refresh();\n    },\n\n    onMouseUp: function (e) {\n        if (this._dragging) {\n            this._startOffset = 0;\n            this._dragging = false;\n            this._ignoreClick = true;\n        }\n        this._mouseDown = false;\n        this.refresh();\n    },\n\n    loadImages: function () {\n        var $this = this;\n\n        if (!FolderBrowser._imagesLoaded && !FolderBrowser._downloading) {\n            FolderBrowser._imageLoadCount = 0;\n            FolderBrowser._imagesLoaded = false;\n            FolderBrowser._downloading = true;\n            FolderBrowser._bmpBackground = document.createElement('img');\n            FolderBrowser._bmpBackground.src = 'images/thumbBackground.png';\n            FolderBrowser._bmpBackground.addEventListener('load', function (e) {\n                FolderBrowser._imageLoadCount++;\n                if (FolderBrowser._imageLoadCount === 5) {\n                    FolderBrowser._downloading = false;\n                    FolderBrowser._imagesLoaded = true;\n                    $this.refresh();\n                }\n            }, false);\n            FolderBrowser._bmpBackgroundHover = document.createElement('img');\n            FolderBrowser._bmpBackgroundHover.src = 'images/thumbBackgroundHover.png';\n            FolderBrowser._bmpBackgroundHover.addEventListener('load', function (e) {\n                FolderBrowser._imageLoadCount++;\n                if (FolderBrowser._imageLoadCount === 5) {\n                    FolderBrowser._downloading = false;\n                    FolderBrowser._imagesLoaded = true;\n                    $this.refresh();\n                }\n            }, false);\n            FolderBrowser._bmpBackgroundWide = document.createElement('img');\n            FolderBrowser._bmpBackgroundWide.src = 'images/thumbBackgroundWide.png';\n            FolderBrowser._bmpBackgroundWide.addEventListener('load', function (e) {\n                FolderBrowser._imageLoadCount++;\n                if (FolderBrowser._imageLoadCount === 5) {\n                    FolderBrowser._downloading = false;\n                    FolderBrowser._imagesLoaded = true;\n                    $this.refresh();\n                }\n            }, false);\n            FolderBrowser._bmpBackgroundWideHover = document.createElement('img');\n            FolderBrowser._bmpBackgroundWideHover.src = 'images/thumbBackgroundWideHover.png';\n            FolderBrowser._bmpBackgroundWideHover.addEventListener('load', function (e) {\n                FolderBrowser._imageLoadCount++;\n                if (FolderBrowser._imageLoadCount === 5) {\n                    FolderBrowser._downloading = false;\n                    FolderBrowser._imagesLoaded = true;\n                    $this.refresh();\n                }\n            }, false);\n            FolderBrowser._bmpDropInsertMarker = document.createElement('img');\n            FolderBrowser._bmpDropInsertMarker.src = 'images/dragInsertMarker.png';\n            FolderBrowser._bmpDropInsertMarker.addEventListener('load', function (e) {\n                FolderBrowser._imageLoadCount++;\n                if (FolderBrowser._imageLoadCount === 5) {\n                    FolderBrowser._downloading = false;\n                    FolderBrowser._imagesLoaded = true;\n                    $this.refresh();\n                }\n            }, false);\n        }\n    },\n\n    get_thumbnailSize: function () {\n        return this._thumbnailSize;\n    },\n\n    set_thumbnailSize: function (value) {\n        this._thumbnailSize = value;\n        switch (value) {\n            case 1:\n                this._horzSpacing = 180;\n                this._vertSpacing = 75;\n                this._thumbHeight = 65;\n                this._thumbWidth = 180;\n                break;\n            case 0:\n                this._horzSpacing = 110;\n                this._vertSpacing = 75;\n                this._thumbHeight = 65;\n                this._thumbWidth = 110;\n                break;\n        }\n        this._updatePaginator();\n        this.refresh();\n        return value;\n    },\n\n    refresh: function () {\n        if (this.width !== window.innerWidth) {\n            this.width = window.innerWidth;\n        }\n        this.paint();\n    },\n\n    get_rowCount: function () {\n        return this._rowCount;\n    },\n\n    set_rowCount: function (value) {\n        if (this._rowCount !== value) {\n            this._rowCount = value;\n            this._updatePaginator();\n        }\n        return value;\n    },\n\n    _updatePaginator: function () { },\n\n    get_colCount: function () {\n        return this._colCount;\n    },\n\n    set_colCount: function (value) {\n        if (this._colCount !== value) {\n            this._colCount = value;\n            this._updatePaginator();\n        }\n        return value;\n    },\n\n    get_itemsPerPage: function () {\n        return this._rowCount * this._colCount;\n    },\n\n    get_currentPage: function () {\n        return this._startIndex / this.get_itemsPerPage();\n    },\n\n    get_pageCount: function () {\n        return Math.max(1, ((this._items.length + this.get_itemsPerPage() - 1) + ((this.showAddButton) ? 1 : 0)) / this.get_itemsPerPage());\n    },\n\n    paint: function () {\n        var $this = this;\n\n        var g = this.canvas.getContext('2d');\n        g.fillStyle = 'rgb(20, 22, 31)';\n        g.fillRect(0, 0, this.width, this.height);\n        if (!FolderBrowser._imagesLoaded) {\n            return;\n        }\n        var netHeight = (this.height - 10 * 2);\n        var netWidth = (this.width - 10 * 2);\n        this.set_rowCount(Math.round(Math.max(netHeight / this._thumbHeight, 1)));\n        this.set_colCount(Math.round(Math.max(netWidth / this._horzSpacing, 1)));\n        this._horzMultiple = (netWidth + 13) / this.get_colCount();\n        this._startIndex = Math.round((this._startIndex / this.get_itemsPerPage()) * this.get_itemsPerPage());\n        var rectf;\n        var index = this._startIndex;\n        for (var y = 0; y < this._rowCount; y++) {\n            for (var x = 0; x < this._colCount; x++) {\n                if (index >= this._items.length) {\n                    if (!this._items.length || this.showAddButton) {\n                        rectf = Rectangle.create(this.left + x * this._horzMultiple + 3 + this._startOffset, this.top + y * this._vertSpacing, this._thumbWidth - 10, 60);\n                        g.drawImage((this._thumbnailSize === 1) ? FolderBrowser._bmpBackgroundWide : FolderBrowser._bmpBackground, ss.truncate((x * this._horzMultiple)) + this._startOffset, y * this._vertSpacing);\n                    }\n                    break;\n                }\n                rectf = Rectangle.create(this.left + x * this._horzMultiple + 3 + this._startOffset, this.top + y * this._vertSpacing, this._thumbWidth - 14, 60);\n                var textBrush = 'white';\n                if (index === this._hoverItem || (index === this._selectedItem && this._hoverItem === -1)) {\n                    g.drawImage((this._thumbnailSize === 1) ? FolderBrowser._bmpBackgroundWideHover : FolderBrowser._bmpBackgroundHover, this.left + ss.truncate((x * this._horzMultiple)) + this._startOffset, this.top + y * this._vertSpacing);\n                    textBrush = 'yellow';\n                }\n                else {\n                    g.drawImage((this._thumbnailSize === 1) ? FolderBrowser._bmpBackgroundWide : FolderBrowser._bmpBackground, this.left + ss.truncate((x * this._horzMultiple)) + this._startOffset, this.top + y * this._vertSpacing);\n                }\n                this._items[index].set_bounds(Rectangle.create((this.left + x * this._horzMultiple) + this._startOffset, this.top + (y * this._vertSpacing), ss.truncate(this._horzMultiple), this._vertSpacing));\n                try {\n                    var bmpThumb = this._items[index].get_thumbnail();\n                    if (bmpThumb != null) {\n                        g.drawImage(bmpThumb, this.left + (x * this._horzMultiple) + 2 + this._startOffset, this.top + y * this._vertSpacing + 3);\n                        g.strokeStyle = 'rgb(0,0,0)';\n                        g.rect(this.left + ss.truncate((x * this._horzMultiple)) + 2 + this._startOffset, this.top + y * this._vertSpacing + 3, this._items[index].get_thumbnail().width, this._items[index].get_thumbnail().height);\n                    }\n                    else {\n                        this._items[index].set_thumbnail(document.createElement('img'));\n                        this._items[index].get_thumbnail().src = this._items[index].get_thumbnailUrl();\n                        this._items[index].get_thumbnail().addEventListener('load', function (e) {\n                            $this.refresh();\n                        }, false);\n                    }\n                }\n                catch ($e1) {\n                }\n                g.fillStyle = textBrush;\n                g.strokeStyle = textBrush;\n                g.lineWidth = 1;\n                g.font = 'normal 8pt Arial';\n                g.fillText(this._items[index].get_name(), rectf.x, rectf.y + rectf.height, rectf.width);\n                index++;\n            }\n            if (index >= this._items.length) {\n                break;\n            }\n        }\n    },\n\n    _getItemIndexFromCursor: function (testPointIn) {\n        var testPoint = Vector2d.create(testPointIn.x + this.left, testPointIn.y + this.top);\n        this.imageClicked = false;\n        var index = -1;\n        var xpos = ss.truncate((testPoint.x / this._horzMultiple));\n        var xPart = ss.truncate((testPoint.x % this._horzMultiple));\n        if (xpos >= this._colCount) {\n            return -1;\n        }\n        if (xpos < 0) {\n            return -1;\n        }\n        var ypos = ss.truncate((testPoint.y / this._vertSpacing));\n        var yPart = ss.truncate((testPoint.y % this._vertSpacing));\n        if (ypos >= this._rowCount) {\n            return -1;\n        }\n        if (ypos < 0) {\n            return -1;\n        }\n        index = this._startIndex + ypos * this._colCount + xpos;\n        if (index === this._items.length) {\n            this._addButtonHover = true;\n        } else {\n            this._addButtonHover = false;\n        }\n        if (index > this._items.length - 1) {\n            return -1;\n        }\n        if ((this._items[index]).get_isImage() && yPart < 16 && xPart > 78) {\n            this.imageClicked = true;\n        }\n        return index;\n    },\n\n    _addItems: function (list) {\n        this._items = list;\n    }\n};\n\nregisterType(\"FolderBrowser\", [FolderBrowser, FolderBrowser$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// An icon for a \"move up one folder\" item.\n\nimport { registerType } from \"./typesystem.js\";\nimport { IThumbnail } from \"./interfaces.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { Rectangle } from \"./util.js\";\n\n\n// wwtlib.FolderUp\n\nexport function FolderUp() {\n    this.parent = null;\n    this._bounds = new Rectangle();\n}\n\nvar FolderUp$ = {\n    get_name: function () {\n        return 'Up Level';\n    },\n\n    get_thumbnail: function () {\n        return this._thumbnail;\n    },\n\n    set_thumbnail: function (value) {\n        this._thumbnail = value;\n        return value;\n    },\n\n    get_thumbnailUrl: function () {\n        return URLHelpers.singleton.engineAssetUrl('thumb_folderup.jpg');\n    },\n\n    set_thumbnailUrl: function (value) {\n        return value;\n    },\n\n    get_bounds: function () {\n        return this._bounds;\n    },\n\n    set_bounds: function (value) {\n        this._bounds = value;\n        return value;\n    },\n\n    get_isImage: function () {\n        return false;\n    },\n\n    get_isTour: function () {\n        return false;\n    },\n\n    get_isFolder: function () {\n        return false;\n    },\n\n    get_isCloudCommunityItem: function () {\n        return false;\n    },\n\n    get_readOnly: function () {\n        return false;\n    },\n\n    get_children: function () {\n        if (this.parent == null) {\n            return [];\n        } else {\n            return this.parent.get_children();\n        }\n    }\n};\n\nregisterType(\"FolderUp\", [FolderUp, FolderUp$, null, IThumbnail]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Numerical routines supporting the Healpix implementation.\n\nimport { registerType } from \"./typesystem.js\";\nimport { ss } from \"./ss.js\";\nimport { HealpixTables } from \"./healpix_tables.js\";\nimport { HealpixUtils } from \"./healpix_utils.js\";\nimport { Hploc } from \"./hploc.js\";\n\n\n// wwtlib.Fxyf\n\nexport function Fxyf() {\n    // x-coordinate within the basis pixel, range [0.0;1.0]\n    this.fx = 0;\n\n    // y-coordinate within the basis pixel, range [0.0;1.0]\n    this.fy = 0;\n\n    // index of the HEALPix basis pixel, range [0;11]\n    this.face = 0;\n    HealpixTables.call(this);\n}\n\nFxyf._halfpi$1 = Math.PI / 2;\nFxyf._inv_halfpi$1 = 2 / Math.PI;\nFxyf._twothird$1 = 2 / 3;\n\nFxyf.create = function (x, y, f) {\n    var temp = new Fxyf();\n    temp.fx = x;\n    temp.fy = y;\n    temp.face = f;\n    return temp;\n};\n\nFxyf._fromHploc$1 = function (loc) {\n    var temp = new Fxyf();\n    var z = loc.z, phi = loc.phi;\n    var za = Math.abs(z);\n    var tt = HealpixUtils.fmodulo((phi * Fxyf._inv_halfpi$1), 4); // in [0,4)\n\n    if (za <= Fxyf._twothird$1) { // Equatorial region\n        var temp1 = 0.5 + tt;\n        var temp2 = z * 0.75;\n        var jp = temp1 - temp2; // index of  ascending edge line\n        var jm = temp1 + temp2; // index of descending edge line\n        var ifp = jp; // in {0,4}\n        var ifm = jm;\n        var face_num = (ifp === ifm) ? (ifp | 4) : ((ifp < ifm) ? ifp : (ifm + 8));\n        temp.fx = HealpixUtils.fmodulo(jm, 1);\n        temp.fy = 1 - HealpixUtils.fmodulo(jp, 1);\n        temp.face = face_num;\n    } else { // polar region, za > 2/3\n        var ntt = Math.min(3, ss.truncate(tt));\n        var tp = tt - ntt;\n        var tmp;\n        if ((za < 0.99) || (!loc.have_sth)) {\n            tmp = Math.sqrt(3 * (1 - za));\n        } else {\n            tmp = loc.sth / Math.sqrt((1 + za) / 3);\n        }\n        var jp = tp * tmp; // increasing edge line index\n        var jm = (1 - tp) * tmp; // decreasing edge line index\n        if (jp >= 1) {\n            jp = 1; // for points too close to the boundary\n        }\n        if (jm >= 1) {\n            jm = 1;\n        }\n        if (z >= 0) {\n            temp.fx = 1 - jm;\n            temp.fy = 1 - jp;\n            temp.face = ntt;\n        } else {\n            temp.fx = jp;\n            temp.fy = jm;\n            temp.face = ntt + 8;\n        }\n    }\n    return temp;\n};\n\nFxyf.fromVector = function (v) {\n    return Fxyf._fromHploc$1(Hploc.create(v));\n};\n\nvar Fxyf$ = {\n    toHploc: function () {\n        var loc = new Hploc();\n        var jr = HealpixTables.jrll[this.face] - this.fx - this.fy;\n        var nr;\n        var tmp;\n        if (jr < 1) {\n            nr = jr;\n            tmp = nr * nr / 3;\n            loc.z = 1 - tmp;\n            if (loc.z > 0.99) {\n                loc.sth = Math.sqrt(tmp * (2 - tmp));\n                loc.have_sth = true;\n            }\n        } else if (jr > 3) {\n            nr = 4 - jr;\n            tmp = nr * nr / 3;\n            loc.z = tmp - 1;\n            if (loc.z < -0.99) {\n                loc.sth = Math.sqrt(tmp * (2 - tmp));\n                loc.have_sth = true;\n            }\n        } else {\n            nr = 1;\n            loc.z = (2 - jr) * 2 / 3;\n        }\n        tmp = HealpixTables.jpll[this.face] * nr + this.fx - this.fy;\n        if (tmp < 0) {\n            tmp += 8;\n        }\n        if (tmp >= 8) {\n            tmp -= 8;\n        }\n        loc.phi = (nr < 1E-15) ? 0 : (0.5 * Fxyf._halfpi$1 * tmp) / nr;\n        return loc;\n    },\n\n    toVec3: function () {\n        return this.toHploc().toVec3();\n    }\n};\n\nregisterType(\"Fxyf\", [Fxyf, Fxyf$, HealpixTables]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// WebGL buffer types.\n\nimport { registerType } from \"../typesystem.js\";\nimport { ss } from \"../ss.js\";\nimport { tilePrepDevice } from \"../render_globals.js\";\nimport { WEBGL } from \"./webgl_constants.js\";\n\n\n// wwtlib.ShortIndexBuffer\n\nexport function ShortIndexBuffer(indexes) {\n    this.buffer = tilePrepDevice.createBuffer();\n    tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, this.buffer);\n    tilePrepDevice.bufferData(WEBGL.ELEMENT_ARRAY_BUFFER, indexes, WEBGL.STATIC_DRAW);\n}\n\nvar ShortIndexBuffer$ = {};\n\nregisterType(\"ShortIndexBuffer\", [ShortIndexBuffer, ShortIndexBuffer$, null]);\n\n\n// wwtlib.IndexBuffer\n\nexport function IndexBuffer(indexes) {\n    this.buffer = tilePrepDevice.createBuffer();\n    tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, this.buffer);\n    tilePrepDevice.bufferData(WEBGL.ELEMENT_ARRAY_BUFFER, indexes, WEBGL.STATIC_DRAW);\n}\n\nvar IndexBuffer$ = {\n    dispose: function () {\n        tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, null);\n        tilePrepDevice.deleteBuffer(this.buffer);\n        this.buffer = null;\n    }\n};\n\nregisterType(\"IndexBuffer\", [IndexBuffer, IndexBuffer$, null, ss.IDisposable]);\n\n\n// wwtlib.VertexBufferBase\n\nexport function VertexBufferBase() { }\n\nvar VertexBufferBase$ = {\n    dispose: function () {\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, null);\n        tilePrepDevice.deleteBuffer(this.vertexBuffer);\n        this.vertexBuffer = null;\n    }\n};\n\nregisterType(\"VertexBufferBase\", [VertexBufferBase, VertexBufferBase$, null, ss.IDisposable]);\n\n\n// wwtlib.PositionVertexBuffer\n\nexport function PositionVertexBuffer(count) {\n    this.count = 0;\n    this._verts$1 = null;\n    VertexBufferBase.call(this);\n    this.count = count;\n}\n\nvar PositionVertexBuffer$ = {\n    lock: function () {\n        this._verts$1 = new Array(this.count);\n        return this._verts$1;\n    },\n\n    unlock: function () {\n        this.vertexBuffer = tilePrepDevice.createBuffer();\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this.vertexBuffer);\n        var f32array = new Float32Array(this.count * 3);\n        var buffer = f32array;\n        var index = 0;\n        var $enum1 = ss.enumerate(this._verts$1);\n        while ($enum1.moveNext()) {\n            var pt = $enum1.current;\n            buffer[index++] = pt.x;\n            buffer[index++] = pt.y;\n            buffer[index++] = pt.z;\n        }\n        tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n    }\n};\n\nregisterType(\"PositionVertexBuffer\", [PositionVertexBuffer, PositionVertexBuffer$, VertexBufferBase]);\n\n\n// wwtlib.PositionTextureVertexBuffer\n\nexport function PositionTextureVertexBuffer(count) {\n    this.count = 0;\n    this._verts$1 = null;\n    VertexBufferBase.call(this);\n    this.count = count;\n}\n\nPositionTextureVertexBuffer.create = function (data) {\n    var buffer = new PositionTextureVertexBuffer(data.length);\n    buffer._verts$1 = data;\n    buffer.unlock();\n    return buffer;\n};\n\nvar PositionTextureVertexBuffer$ = {\n    lock: function () {\n        this._verts$1 = new Array(this.count);\n        return this._verts$1;\n    },\n\n    unlock: function () {\n        this.vertexBuffer = tilePrepDevice.createBuffer();\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this.vertexBuffer);\n        var f32array = new Float32Array(this.count * 5);\n        var buffer = f32array;\n        var index = 0;\n        var $enum1 = ss.enumerate(this._verts$1);\n        while ($enum1.moveNext()) {\n            var pt = $enum1.current;\n            buffer[index++] = pt.position.x;\n            buffer[index++] = pt.position.y;\n            buffer[index++] = pt.position.z;\n            buffer[index++] = pt.tu;\n            buffer[index++] = pt.tv;\n        }\n        tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n    }\n};\n\nregisterType(\"PositionTextureVertexBuffer\", [PositionTextureVertexBuffer, PositionTextureVertexBuffer$, VertexBufferBase]);\n\n\n// wwtlib.PositionNormalTexturedVertexBuffer\n\nexport function PositionNormalTexturedVertexBuffer(count) {\n    this.count = 0;\n    this._verts$1 = null;\n    VertexBufferBase.call(this);\n    this.count = count;\n}\n\nPositionNormalTexturedVertexBuffer.create = function (data) {\n    var buffer = new PositionNormalTexturedVertexBuffer(data.length);\n    buffer._verts$1 = data;\n    buffer.unlock();\n    return buffer;\n};\n\nvar PositionNormalTexturedVertexBuffer$ = {\n    lock: function () {\n        this._verts$1 = new Array(this.count);\n        return this._verts$1;\n    },\n\n    unlock: function () {\n        this.vertexBuffer = tilePrepDevice.createBuffer();\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this.vertexBuffer);\n        var f32array = new Float32Array(this.count * 8);\n        var buffer = f32array;\n        var index = 0;\n        var $enum1 = ss.enumerate(this._verts$1);\n        while ($enum1.moveNext()) {\n            var pt = $enum1.current;\n            buffer[index++] = pt.x;\n            buffer[index++] = pt.y;\n            buffer[index++] = pt.z;\n            buffer[index++] = pt.nx;\n            buffer[index++] = pt.ny;\n            buffer[index++] = pt.nz;\n            buffer[index++] = pt.tu;\n            buffer[index++] = pt.tv;\n        }\n        tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n    }\n};\n\nregisterType(\"PositionNormalTexturedVertexBuffer\", [PositionNormalTexturedVertexBuffer, PositionNormalTexturedVertexBuffer$, VertexBufferBase]);\n\n\n// wwtlib.PositionNormalTexturedTangentVertexBuffer\n\nexport function PositionNormalTexturedTangentVertexBuffer(count) {\n    this.count = 0;\n    this._verts$1 = null;\n    VertexBufferBase.call(this);\n    this.count = count;\n}\n\nPositionNormalTexturedTangentVertexBuffer.create = function (data) {\n    var buffer = new PositionNormalTexturedTangentVertexBuffer(data.length);\n    buffer._verts$1 = data;\n    buffer.unlock();\n    return buffer;\n};\n\nvar PositionNormalTexturedTangentVertexBuffer$ = {\n    lock: function () {\n        this._verts$1 = new Array(this.count);\n        return this._verts$1;\n    },\n\n    unlock: function () {\n        this.vertexBuffer = tilePrepDevice.createBuffer();\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this.vertexBuffer);\n        var f32array = new Float32Array(this.count * 11);\n        var buffer = f32array;\n        var index = 0;\n        var $enum1 = ss.enumerate(this._verts$1);\n        while ($enum1.moveNext()) {\n            var pt = $enum1.current;\n            buffer[index++] = pt.x;\n            buffer[index++] = pt.y;\n            buffer[index++] = pt.z;\n            buffer[index++] = pt.nx;\n            buffer[index++] = pt.ny;\n            buffer[index++] = pt.nz;\n            buffer[index++] = pt.tanx;\n            buffer[index++] = pt.tany;\n            buffer[index++] = pt.tanz;\n            buffer[index++] = pt.tu;\n            buffer[index++] = pt.tv;\n        }\n        tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n    }\n};\n\nregisterType(\"PositionNormalTexturedTangentVertexBuffer\", [PositionNormalTexturedTangentVertexBuffer, PositionNormalTexturedTangentVertexBuffer$, VertexBufferBase]);\n\n\n// wwtlib.KeplerVertexBuffer\n\nexport function KeplerVertexBuffer(count) {\n    this.count = 0;\n    this._verts$1 = null;\n    VertexBufferBase.call(this);\n    this.count = count;\n}\n\nKeplerVertexBuffer.create = function (items) {\n    var tmp = new KeplerVertexBuffer(items.length);\n    tmp._verts$1 = items;\n    return tmp;\n};\n\nvar KeplerVertexBuffer$ = {\n    lock: function () {\n        this._verts$1 = new Array(this.count);\n        return this._verts$1;\n    },\n\n    unlock: function () {\n        this.vertexBuffer = tilePrepDevice.createBuffer();\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this.vertexBuffer);\n        var f32array = new Float32Array(this.count * 19);\n        var buffer = f32array;\n        var index = 0;\n        var $enum1 = ss.enumerate(this._verts$1);\n        while ($enum1.moveNext()) {\n            var pt = $enum1.current;\n            buffer[index++] = pt.ABC.x;\n            buffer[index++] = pt.ABC.y;\n            buffer[index++] = pt.ABC.z;\n            buffer[index++] = pt.abc1.x;\n            buffer[index++] = pt.abc1.y;\n            buffer[index++] = pt.abc1.z;\n            buffer[index++] = pt.pointSize;\n            buffer[index++] = pt.color.r / 255;\n            buffer[index++] = pt.color.g / 255;\n            buffer[index++] = pt.color.b / 255;\n            buffer[index++] = pt.color.a / 255;\n            buffer[index++] = pt.w;\n            buffer[index++] = pt.e;\n            buffer[index++] = pt.n;\n            buffer[index++] = pt.t;\n            buffer[index++] = pt.a;\n            buffer[index++] = pt.z;\n            buffer[index++] = pt.orbitPos;\n            buffer[index++] = pt.orbits;\n        }\n        tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n    }\n};\n\nregisterType(\"KeplerVertexBuffer\", [KeplerVertexBuffer, KeplerVertexBuffer$, VertexBufferBase]);\n\n\n// wwtlib.TimeSeriesLineVertexBuffer\n\nexport function TimeSeriesLineVertexBuffer(count) {\n    this.count = 0;\n    this._verts$1 = null;\n    VertexBufferBase.call(this);\n    this.count = count;\n}\n\nvar TimeSeriesLineVertexBuffer$ = {\n    lock: function () {\n        this._verts$1 = new Array(this.count);\n        return this._verts$1;\n    },\n\n    unlock: function () {\n        this.vertexBuffer = tilePrepDevice.createBuffer();\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this.vertexBuffer);\n        var f32array = new Float32Array(this.count * 9);\n        var buffer = f32array;\n        var index = 0;\n        var $enum1 = ss.enumerate(this._verts$1);\n        while ($enum1.moveNext()) {\n            var pt = $enum1.current;\n            buffer[index++] = pt.position.x;\n            buffer[index++] = pt.position.y;\n            buffer[index++] = pt.position.z;\n            buffer[index++] = pt.get_color().r / 255;\n            buffer[index++] = pt.get_color().g / 255;\n            buffer[index++] = pt.get_color().b / 255;\n            buffer[index++] = pt.get_color().a / 255;\n            buffer[index++] = pt.tu;\n            buffer[index++] = pt.tv;\n        }\n        tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n    }\n};\n\nregisterType(\"TimeSeriesLineVertexBuffer\", [TimeSeriesLineVertexBuffer, TimeSeriesLineVertexBuffer$, VertexBufferBase]);\n\n\n// wwtlib.TimeSeriesPointVertexBuffer\n\nexport function TimeSeriesPointVertexBuffer(count) {\n    this.count = 0;\n    this._verts$1 = null;\n    VertexBufferBase.call(this);\n    this.count = count;\n}\n\nvar TimeSeriesPointVertexBuffer$ = {\n    lock: function () {\n        this._verts$1 = new Array(this.count);\n        return this._verts$1;\n    },\n\n    unlock: function () {\n        this.vertexBuffer = tilePrepDevice.createBuffer();\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this.vertexBuffer);\n        var f32array = new Float32Array(this.count * 10);\n        var buffer = f32array;\n        var index = 0;\n        var $enum1 = ss.enumerate(this._verts$1);\n        while ($enum1.moveNext()) {\n            var pt = $enum1.current;\n            buffer[index++] = pt.position.x;\n            buffer[index++] = pt.position.y;\n            buffer[index++] = pt.position.z;\n            buffer[index++] = pt.get_color().r / 255;\n            buffer[index++] = pt.get_color().g / 255;\n            buffer[index++] = pt.get_color().b / 255;\n            buffer[index++] = pt.get_color().a / 255;\n            buffer[index++] = pt.tu;\n            buffer[index++] = pt.tv;\n            buffer[index++] = pt.pointSize;\n        }\n        tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n    },\n\n    dispose: function () {\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, null);\n        tilePrepDevice.deleteBuffer(this.vertexBuffer);\n        this.vertexBuffer = null;\n    }\n};\n\nregisterType(\"TimeSeriesPointVertexBuffer\", [TimeSeriesPointVertexBuffer, TimeSeriesPointVertexBuffer$, VertexBufferBase]);\n\n\n// wwtlib.PositionColoredVertexBuffer\n\nexport function PositionColoredVertexBuffer(count) {\n    this.count = 0;\n    this._verts$1 = null;\n    VertexBufferBase.call(this);\n    this.count = count;\n}\n\nvar PositionColoredVertexBuffer$ = {\n    lock: function () {\n        this._verts$1 = new Array(this.count);\n        return this._verts$1;\n    },\n\n    unlock: function () {\n        this.vertexBuffer = tilePrepDevice.createBuffer();\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this.vertexBuffer);\n        var f32array = new Float32Array(this.count * 7);\n        var buffer = f32array;\n        var index = 0;\n        var $enum1 = ss.enumerate(this._verts$1);\n        while ($enum1.moveNext()) {\n            var pt = $enum1.current;\n            buffer[index++] = pt.position.x;\n            buffer[index++] = pt.position.y;\n            buffer[index++] = pt.position.z;\n            buffer[index++] = pt.color.r / 255;\n            buffer[index++] = pt.color.g / 255;\n            buffer[index++] = pt.color.b / 255;\n            buffer[index++] = pt.color.a / 255;\n        }\n        tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n    }\n};\n\nregisterType(\"PositionColoredVertexBuffer\", [PositionColoredVertexBuffer, PositionColoredVertexBuffer$, VertexBufferBase]);\n\n\n// wwtlib.PositionColoredTexturedVertexBuffer\n\nexport function PositionColoredTexturedVertexBuffer(count) {\n    this.count = 0;\n    this._verts$1 = null;\n    VertexBufferBase.call(this);\n    this.count = count;\n}\n\nvar PositionColoredTexturedVertexBuffer$ = {\n    lock: function () {\n        this._verts$1 = new Array(this.count);\n        return this._verts$1;\n    },\n\n    unlock: function () {\n        this.vertexBuffer = tilePrepDevice.createBuffer();\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this.vertexBuffer);\n        var f32array = new Float32Array(this.count * 9);\n        var buffer = f32array;\n        var index = 0;\n        var $enum1 = ss.enumerate(this._verts$1);\n        while ($enum1.moveNext()) {\n            var pt = $enum1.current;\n            buffer[index++] = pt.position.x;\n            buffer[index++] = pt.position.y;\n            buffer[index++] = pt.position.z;\n            buffer[index++] = pt.color.r / 255;\n            buffer[index++] = pt.color.g / 255;\n            buffer[index++] = pt.color.b / 255;\n            buffer[index++] = pt.color.a / 255;\n            buffer[index++] = pt.tu;\n            buffer[index++] = pt.tv;\n        }\n        tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n    }\n};\n\nregisterType(\"PositionColoredTexturedVertexBuffer\", [PositionColoredTexturedVertexBuffer, PositionColoredTexturedVertexBuffer$, VertexBufferBase]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Various GL primitives.\n\nimport { registerType, registerEnum } from \"../typesystem.js\";\nimport { ss } from \"../ss.js\";\nimport { Matrix3d, Vector3d, PositionColored } from \"../double3d.js\";\nimport { Color } from \"../color.js\";\nimport { URLHelpers } from \"../url_helpers.js\";\nimport { WEBGL } from \"./webgl_constants.js\";\nimport {\n    PositionVertexBuffer,\n    PositionColoredVertexBuffer,\n    TimeSeriesLineVertexBuffer,\n    TimeSeriesPointVertexBuffer,\n} from \"./gl_buffers.js\";\nimport { Texture } from \"./texture.js\";\nimport {\n    SimpleLineShader,\n    SimpleLineShader2D,\n    OrbitLineShader,\n    LineShaderNormalDates,\n    TimeSeriesPointSpriteShader,\n} from \"./shaders.js\";\n\n\n// wwtlib.CullMode\n\nexport var CullMode = {\n    none: 0,\n    counterClockwise: 2,\n    clockwise: 1\n};\n\nregisterType(\"CullMode\", CullMode);\nregisterEnum(\"CullMode\", CullMode);\n\n\n// wwtlib.PointScaleTypes\n\nexport var PointScaleTypes = {\n    linear: 0,\n    power: 1,\n    log: 2,\n    constant: 3,\n    stellarMagnitude: 4\n};\n\nregisterType(\"PointScaleTypes\", PointScaleTypes);\nregisterEnum(\"PointScaleTypes\", PointScaleTypes);\n\n\n// wwtlib.DataItem\n//\n// This type was originally defined in VizLayer.cs, but it's quite simple\n// and is used here.\n\nexport function DataItem() {\n    this.size = 0;\n}\n\nvar DataItem$ = {\n    getColor: function () {\n        return 'Red';\n    }\n};\n\nregisterType(\"DataItem\", [DataItem, DataItem$, null]);\n\n\n// wwtlib.Dates\n\nexport function Dates(start, end) {\n    this.startDate = 0;\n    this.endDate = 0;\n    this.startDate = start;\n    this.endDate = end;\n}\n\nDates.empty = function () {\n    return new Dates(0, 0);\n};\n\nvar Dates$ = {\n    copy: function () {\n        return new Dates(this.startDate, this.endDate);\n    }\n};\n\nregisterType(\"Dates\", [Dates, Dates$, null]);\n\n\n// wwtlib.SimpleLineList\n\nexport function SimpleLineList() {\n    this._zBuffer = true;\n    this._linePoints = [];\n    this._usingLocalCenter = false;\n    this.sky = true;\n    this.aaFix = true;\n    this.pure2D = false;\n    this.viewTransform = Matrix3d.get_identity();\n    this._lineBuffers = [];\n    this._lineBufferCounts = [];\n    this.useLocalCenters = false;\n}\n\nvar SimpleLineList$ = {\n    get_depthBuffered: function () {\n        return this._zBuffer;\n    },\n\n    set_depthBuffered: function (value) {\n        this._zBuffer = value;\n        return value;\n    },\n\n    addLine: function (v1, v2) {\n        this._linePoints.push(v1);\n        this._linePoints.push(v2);\n        this._emptyLineBuffer();\n    },\n\n    clear: function () {\n        this._linePoints.length = 0;\n        this._emptyLineBuffer();\n    },\n\n    drawLines: function (renderContext, opacity, color) {\n        if (this._linePoints.length < 2) {\n            return;\n        }\n        this._initLineBuffer(renderContext);\n        var count = this._linePoints.length;\n        if (renderContext.gl == null) {\n            var viewPoint = Vector3d._transformCoordinate(renderContext.get_viewPoint(), this.viewTransform);\n            var ctx = renderContext.device;\n            ctx.save();\n            ctx.strokeStyle = color.toString();\n            ctx.lineWidth = 2;\n            ctx.globalAlpha = 0.25;\n            var firstPoint = new Vector3d();\n            var secondPoint = new Vector3d();\n            for (var i = 0; i < count; i += 2) {\n                firstPoint = renderContext.WVP.transform(this._linePoints[i]);\n                secondPoint = renderContext.WVP.transform(this._linePoints[i + 1]);\n                if (Vector3d.dot(this._linePoints[i], viewPoint) > 0.6) {\n                    ctx.beginPath();\n                    ctx.moveTo(firstPoint.x, firstPoint.y);\n                    ctx.lineTo(secondPoint.x, secondPoint.y);\n                    ctx.stroke();\n                }\n            }\n            ctx.restore();\n        } else {\n            var $enum1 = ss.enumerate(this._lineBuffers);\n            while ($enum1.moveNext()) {\n                var lineBuffer = $enum1.current;\n                if (this.pure2D) {\n                    SimpleLineShader2D.use(renderContext, lineBuffer.vertexBuffer, color, this._zBuffer);\n                }\n                else {\n                    SimpleLineShader.use(renderContext, lineBuffer.vertexBuffer, color, this._zBuffer);\n                }\n                renderContext.gl.drawArrays(WEBGL.LINES, 0, lineBuffer.count);\n            }\n        }\n    },\n\n    _initLineBuffer: function (renderContext) {\n        if (renderContext.gl != null) {\n            if (!this._lineBuffers.length) {\n                var count = this._linePoints.length;\n                var lineBuffer = null;\n                var linePointList = null;\n                this._localCenter = new Vector3d();\n                if (this.get_depthBuffered()) {\n                    var $enum1 = ss.enumerate(this._linePoints);\n\n                    // compute the local center\n                    while ($enum1.moveNext()) {\n                        var point = $enum1.current;\n                        this._localCenter.add(point);\n                    }\n                    this._localCenter.x /= count;\n                    this._localCenter.y /= count;\n                    this._localCenter.z /= count;\n                }\n                var countLeft = count;\n                var index = 0;\n                var counter = 0;\n                var temp;\n                var $enum2 = ss.enumerate(this._linePoints);\n                while ($enum2.moveNext()) {\n                    var point = $enum2.current;\n                    if (counter >= 100000 || linePointList == null) {\n                        if (lineBuffer != null) {\n                            lineBuffer.unlock();\n                        }\n                        var thisCount = Math.min(100000, countLeft);\n                        countLeft -= thisCount;\n                        lineBuffer = new PositionVertexBuffer(thisCount);\n                        linePointList = lineBuffer.lock(); // Lock the buffer (which will return our structs)\n                        this._lineBuffers.push(lineBuffer);\n                        this._lineBufferCounts.push(thisCount);\n                        counter = 0;\n                    }\n                    if (this.useLocalCenters) {\n                        temp = Vector3d.subtractVectors(point, this._localCenter);\n                        linePointList[counter] = temp;\n                    }\n                    else {\n                        linePointList[counter] = point;\n                    }\n                    index++;\n                    counter++;\n                }\n                if (lineBuffer != null) {\n                    lineBuffer.unlock();\n                }\n            }\n        }\n    },\n\n    _emptyLineBuffer: function () { }\n};\n\nregisterType(\"SimpleLineList\", [SimpleLineList, SimpleLineList$, null]);\n\n\n// wwtlib.OrbitLineList\n\nexport function OrbitLineList() {\n    this._zBuffer = true;\n    this._linePoints = [];\n    this._lineColors = [];\n    this.sky = true;\n    this.aaFix = true;\n    this.viewTransform = Matrix3d.get_identity();\n    this._lineBuffers = [];\n    this._lineBufferCounts = [];\n    this.useLocalCenters = false;\n}\n\nvar OrbitLineList$ = {\n    get_depthBuffered: function () {\n        return this._zBuffer;\n    },\n\n    set_depthBuffered: function (value) {\n        this._zBuffer = value;\n        return value;\n    },\n\n    addLine: function (v1, v2, c1, c2) {\n        this._linePoints.push(v1);\n        this._lineColors.push(c1);\n        this._linePoints.push(v2);\n        this._lineColors.push(c2);\n        this._emptyLineBuffer();\n    },\n\n    clear: function () {\n        this._linePoints.length = 0;\n        this._emptyLineBuffer();\n    },\n\n    drawLines: function (renderContext, opacity, color) {\n        if (this._linePoints.length < 2) {\n            return;\n        }\n        this._initLineBuffer(renderContext);\n        var count = this._linePoints.length;\n        var $enum1 = ss.enumerate(this._lineBuffers);\n        while ($enum1.moveNext()) {\n            var lineBuffer = $enum1.current;\n            OrbitLineShader.use(renderContext, lineBuffer.vertexBuffer, color);\n            renderContext.gl.drawArrays(WEBGL.LINES, 0, lineBuffer.count);\n        }\n    },\n\n    _initLineBuffer: function (renderContext) {\n        if (renderContext.gl != null) {\n            if (!this._lineBuffers.length) {\n                var count = this._linePoints.length;\n                var lineBuffer = null;\n                var linePointList = null;\n                this._localCenter = new Vector3d();\n                if (this.get_depthBuffered()) {\n                    var $enum1 = ss.enumerate(this._linePoints);\n\n                    // compute the local center\n                    while ($enum1.moveNext()) {\n                        var point = $enum1.current;\n                        this._localCenter.add(point);\n                    }\n                    this._localCenter.x /= count;\n                    this._localCenter.y /= count;\n                    this._localCenter.z /= count;\n                }\n                var countLeft = count;\n                var index = 0;\n                var counter = 0;\n                var temp;\n                var $enum2 = ss.enumerate(this._linePoints);\n                while ($enum2.moveNext()) {\n                    var point = $enum2.current;\n                    if (counter >= 100000 || linePointList == null) {\n                        if (lineBuffer != null) {\n                            lineBuffer.unlock();\n                        }\n                        var thisCount = Math.min(100000, countLeft);\n                        countLeft -= thisCount;\n                        lineBuffer = new PositionColoredVertexBuffer(thisCount);\n                        linePointList = lineBuffer.lock(); // Lock the buffer (which will return our structs)\n                        this._lineBuffers.push(lineBuffer);\n                        this._lineBufferCounts.push(thisCount);\n                        counter = 0;\n                    }\n                    if (this.useLocalCenters) {\n                        temp = Vector3d.subtractVectors(point, this._localCenter);\n                        linePointList[counter] = new PositionColored(temp, this._lineColors[index]);\n                    }\n                    else {\n                        linePointList[counter] = new PositionColored(point, this._lineColors[index]);\n                    }\n                    index++;\n                    counter++;\n                }\n                if (lineBuffer != null) {\n                    lineBuffer.unlock();\n                }\n            }\n        }\n    },\n\n    _emptyLineBuffer: function () {\n        var $enum1 = ss.enumerate(this._lineBuffers);\n        while ($enum1.moveNext()) {\n            var lineBuffer = $enum1.current;\n            lineBuffer.dispose();\n        }\n        this._lineBuffers.length = 0;\n    }\n};\n\nregisterType(\"OrbitLineList\", [OrbitLineList, OrbitLineList$, null]);\n\n\n// wwtlib.LineList\n\nexport function LineList() {\n    this._zBuffer = true;\n    this.timeSeries = false;\n    this.showFarSide = true;\n    this.sky = false;\n    this.decay = 0;\n    this.useNonRotatingFrame = false;\n    this.jNow = 0;\n    this._linePoints = [];\n    this._lineColors = [];\n    this._lineDates = [];\n    this._usingLocalCenter = true;\n    this._lineBuffers = [];\n    this._lineBufferCounts = [];\n}\n\nvar LineList$ = {\n    get_depthBuffered: function () {\n        return this._zBuffer;\n    },\n\n    set_depthBuffered: function (value) {\n        this._zBuffer = value;\n        return value;\n    },\n\n    addLine: function (v1, v2, color, date) {\n        this._linePoints.push(v1);\n        this._linePoints.push(v2);\n        this._lineColors.push(color);\n        this._lineDates.push(date);\n        this._emptyLineBuffer();\n    },\n\n    addLineNoDate: function (v1, v2, color) {\n        this._linePoints.push(v1);\n        this._linePoints.push(v2);\n        this._lineColors.push(color);\n        this._lineDates.push(new Dates(0, 0));\n        this._emptyLineBuffer();\n    },\n\n    clear: function () {\n        this._linePoints.length = 0;\n        this._lineColors.length = 0;\n        this._lineDates.length = 0;\n    },\n\n    drawLines: function (renderContext, opacity) {\n        if (this._linePoints.length < 2 || opacity <= 0) {\n            return;\n        }\n        if (renderContext.gl == null) {\n            //todo draw with HTML5\n        } else {\n            this._initLineBuffer();\n            var $enum1 = ss.enumerate(this._lineBuffers);\n            while ($enum1.moveNext()) {\n                var lineBuffer = $enum1.current;\n                LineShaderNormalDates.use(renderContext, lineBuffer.vertexBuffer, Color.fromArgb(255, 255, 255, 255), this._zBuffer, this.jNow, (this.timeSeries) ? this.decay : 0);\n                renderContext.gl.drawArrays(WEBGL.LINES, 0, lineBuffer.count);\n            }\n        }\n    },\n\n    _initLineBuffer: function () {\n        if (!this._lineBuffers.length) {\n            var count = this._linePoints.length;\n            var lineBuffer = null;\n            var linePointList = null;\n            var countLeft = count;\n            var index = 0;\n            var counter = 0;\n            var temp;\n            var $enum1 = ss.enumerate(this._linePoints);\n            while ($enum1.moveNext()) {\n                var point = $enum1.current;\n                if (counter >= 100000 || linePointList == null) {\n                    if (lineBuffer != null) {\n                        lineBuffer.unlock();\n                    }\n                    var thisCount = Math.min(100000, countLeft);\n                    countLeft -= thisCount;\n                    lineBuffer = new TimeSeriesLineVertexBuffer(thisCount);\n                    linePointList = lineBuffer.lock(); // Lock the buffer (which will return our structs)\n                    this._lineBuffers.push(lineBuffer);\n                    this._lineBufferCounts.push(thisCount);\n                    counter = 0;\n                }\n                var div2 = ss.truncate((index / 2));\n                temp = point;  // -localCenter;\n                linePointList[counter] = new TimeSeriesLineVertex();\n                linePointList[counter].position = temp;\n                linePointList[counter].normal = point;\n                linePointList[counter].tu = this._lineDates[div2].startDate;\n                linePointList[counter].tv = this._lineDates[div2].endDate;\n                linePointList[counter].set_color(this._lineColors[div2]);\n                index++;\n                counter++;\n            }\n            if (lineBuffer != null) {\n                lineBuffer.unlock();\n            }\n        }\n    },\n\n    _emptyLineBuffer: function () { }\n};\n\nregisterType(\"LineList\", [LineList, LineList$, null]);\n\n\n// wwtlib.TriangleList\n\nexport function TriangleList() {\n    this._trianglePoints = [];\n    this._triangleColors = [];\n    this._triangleDates = [];\n    this.timeSeries = false;\n    this.showFarSide = false;\n    this.sky = false;\n    this.depthBuffered = true;\n    this.writeZbuffer = false;\n    this.decay = 0;\n    this.autoTime = true;\n    this.jNow = 0;\n    this._dataToDraw = false;\n    this._triangleBuffers = [];\n    this._triangleBufferCounts = [];\n}\n\nvar TriangleList$ = {\n    addTriangle: function (v1, v2, v3, color, date) {\n        this._trianglePoints.push(v1);\n        this._trianglePoints.push(v2);\n        this._trianglePoints.push(v3);\n        this._triangleColors.push(color);\n        this._triangleDates.push(date);\n        this._emptyTriangleBuffer();\n    },\n\n    addSubdividedTriangles: function (v1, v2, v3, color, date, subdivisions) {\n        subdivisions--;\n        if (subdivisions < 0) {\n            this.addTriangle(v1, v2, v3, color, date);\n        } else {\n            var v12;\n            var v23;\n            var v31;\n            v12 = Vector3d.midPointByLength(v1, v2);\n            v23 = Vector3d.midPointByLength(v2, v3);\n            v31 = Vector3d.midPointByLength(v3, v1);\n            this.addSubdividedTriangles(v1, v12, v31, color, date, subdivisions);\n            this.addSubdividedTriangles(v12, v23, v31, color, date, subdivisions);\n            this.addSubdividedTriangles(v12, v2, v23, color, date, subdivisions);\n            this.addSubdividedTriangles(v23, v3, v31, color, date, subdivisions);\n        }\n    },\n\n    addQuad: function (v1, v2, v3, v4, color, date) {\n        this._trianglePoints.push(v1);\n        this._trianglePoints.push(v3);\n        this._trianglePoints.push(v2);\n        this._trianglePoints.push(v2);\n        this._trianglePoints.push(v3);\n        this._trianglePoints.push(v4);\n        this._triangleColors.push(color);\n        this._triangleDates.push(date);\n        this._triangleColors.push(color);\n        this._triangleDates.push(date);\n        this._emptyTriangleBuffer();\n    },\n\n    clear: function () {\n        this._triangleColors.length = 0;\n        this._trianglePoints.length = 0;\n        this._triangleDates.length = 0;\n        this._emptyTriangleBuffer();\n    },\n\n    _emptyTriangleBuffer: function () { },\n\n    _initTriangleBuffer: function () {\n        if (!this._triangleBuffers.length) {\n            var count = this._trianglePoints.length;\n            var triangleBuffer = null;\n            var triPointList = null;\n            var countLeft = count;\n            var index = 0;\n            var counter = 0;\n            var $enum1 = ss.enumerate(this._trianglePoints);\n            while ($enum1.moveNext()) {\n                var point = $enum1.current;\n                if (counter >= 90000 || triangleBuffer == null) {\n                    if (triangleBuffer != null) {\n                        triangleBuffer.unlock();\n                    }\n                    var thisCount = Math.min(90000, countLeft);\n                    countLeft -= thisCount;\n                    triangleBuffer = new TimeSeriesLineVertexBuffer(thisCount);\n                    this._triangleBuffers.push(triangleBuffer);\n                    this._triangleBufferCounts.push(thisCount);\n                    triPointList = triangleBuffer.lock(); // Lock the buffer (which will return our structs)\n                    counter = 0;\n                }\n                triPointList[counter] = new TimeSeriesLineVertex();\n                triPointList[counter].position = point;\n                triPointList[counter].normal = point;\n                var div3 = ss.truncate((index / 3));\n                triPointList[counter].set_color(this._triangleColors[div3]);\n                triPointList[counter].tu = this._triangleDates[div3].startDate;\n                triPointList[counter].tv = this._triangleDates[div3].endDate;\n                index++;\n                counter++;\n            }\n            if (triangleBuffer != null) {\n                triangleBuffer.unlock();\n            }\n            this._triangleColors.length = 0;\n            this._triangleDates.length = 0;\n            this._trianglePoints.length = 0;\n            this._dataToDraw = true;\n        }\n    },\n\n    draw: function (renderContext, opacity, cull) {\n        if (this._trianglePoints.length < 1 && !this._dataToDraw) {\n            return;\n        }\n        if (renderContext.gl == null) {\n            //todo implement HTML5 version\n        } else {\n            this._initTriangleBuffer();\n            var $enum1 = ss.enumerate(this._triangleBuffers);\n            while ($enum1.moveNext()) {\n                var triBuffer = $enum1.current;\n                LineShaderNormalDates.use(renderContext, triBuffer.vertexBuffer, Color.fromArgb(255, 255, 255, 255), this.depthBuffered, this.jNow, (this.timeSeries) ? this.decay : 0);\n                renderContext.gl.drawArrays(WEBGL.TRIANGLES, 0, triBuffer.count);\n            }\n        }\n    }\n};\n\nregisterType(\"TriangleList\", [TriangleList, TriangleList$, null]);\n\n\n// wwtlib.TriangleFanList\n\nexport function TriangleFanList() {\n    this._zBuffer = true;\n    this.timeSeries = false;\n    this.decay = 0;\n    this.jNow = 0;\n    this._shapes = [];\n    this._colors = [];\n    this._dates = [];\n    this._buffers = [];\n    this._bufferCounts = [];\n}\n\nvar TriangleFanList$ = {\n    get_depthBuffered: function () {\n        return this._zBuffer;\n    },\n\n    set_depthBuffered: function (value) {\n        this._zBuffer = value;\n        return value;\n    },\n\n    addShape: function (shapePoints, color, date) {\n        this._shapes.push(shapePoints);\n        this._colors.push(color);\n        this._dates.push(date);\n    },\n\n    draw: function (renderContext, opacity) {\n        if (opacity <= 0) {\n            return;\n        }\n        if (renderContext.gl != null) {\n            this._initBuffer();\n            var $enum1 = ss.enumerate(this._buffers);\n            while ($enum1.moveNext()) {\n                var buffer = $enum1.current;\n                LineShaderNormalDates.use(renderContext, buffer.vertexBuffer, Color.fromArgb(255, 255, 255, 255), this._zBuffer, this.jNow, (this.timeSeries) ? this.decay : 0);\n                renderContext.gl.drawArrays(WEBGL.TRIANGLE_FAN, 0, buffer.count);\n            }\n        }\n    },\n\n    _initBuffer: function () {\n        if (this._buffers.length !== this._shapes.length) {\n            this._buffers.length = 0;\n            var index = 0;\n            var $enum1 = ss.enumerate(this._shapes);\n            while ($enum1.moveNext()) {\n                var shape = $enum1.current;\n                var buffer = new TimeSeriesLineVertexBuffer(shape.length);\n                var pointList = buffer.lock();  // Lock the buffer (which will return our structs)\n                this._buffers.push(buffer);\n                this._bufferCounts.push(shape.length);\n                var counter = 0;\n                var $enum2 = ss.enumerate(shape);\n                while ($enum2.moveNext()) {\n                    var point = $enum2.current;\n                    pointList[counter] = new TimeSeriesLineVertex();\n                    pointList[counter].position = point;\n                    pointList[counter].tu = this._dates[index].startDate;\n                    pointList[counter].tv = this._dates[index].endDate;\n                    pointList[counter].set_color(this._colors[index]);\n                    counter++;\n                }\n                index++;\n                if (buffer != null) {\n                    buffer.unlock();\n                }\n            }\n        }\n    }\n};\n\nregisterType(\"TriangleFanList\", [TriangleFanList, TriangleFanList$, null]);\n\n\n// wwtlib.PointList\n\nexport function PointList(device) {\n    this._points = [];\n    this._colors = [];\n    this._dates = [];\n    this._sizes = [];\n    this.timeSeries = false;\n    this.showFarSide = false;\n    this.sky = false;\n    this.depthBuffered = true;\n    this.decay = 0;\n    this.scale = 1;\n    this.autoTime = true;\n    this.jNow = 0;\n    this._dataToDraw = false;\n    this.items = [];\n    this._imageReady = false;\n    this._init = false;\n    this.minSize = 2;\n    this._pointBuffers = [];\n    this._pointBufferCounts = [];\n    this._device = device;\n}\n\nPointList.starTexture = null;\n\nvar PointList$ = {\n    addPoint: function (v1, color, date, size) {\n        this._points.push(v1);\n        this._colors.push(color._clone());\n        this._dates.push(date);\n        this._sizes.push(size);\n        this._emptyPointBuffer();\n    },\n\n    clear: function () {\n        this._colors.length = 0;\n        this._points.length = 0;\n        this._dates.length = 0;\n        this._sizes.length = 0;\n        this._emptyPointBuffer();\n    },\n\n    _emptyPointBuffer: function () {\n        var $enum1 = ss.enumerate(this._pointBuffers);\n        while ($enum1.moveNext()) {\n            var pointBuffer = $enum1.current;\n            pointBuffer.dispose();\n        }\n        this._pointBuffers.length = 0;\n        this._init = false;\n    },\n\n    _initBuffer: function (renderContext) {\n        var $this = this;\n\n        if (!this._init) {\n            if (renderContext.gl == null) {\n                this._starProfile = document.createElement('img');\n                this._starProfile.addEventListener('load', function (e) {\n                    $this._imageReady = true;\n                }, false);\n                this._starProfile.src = URLHelpers.singleton.engineAssetUrl('StarProfileAlpha.png');\n                this._worldList = new Array(this._points.length);\n                this._transformedList = new Array(this._points.length);\n                var index = 0;\n                var $enum1 = ss.enumerate(this._points);\n                while ($enum1.moveNext()) {\n                    // todo filter by date\n                    var pnt = $enum1.current;\n                    var item = new DataItem();\n                    item.location = pnt;\n                    item.tranformed = new Vector3d();\n                    item.size = this._sizes[index];\n                    item.color = this._colors[index];\n                    this._worldList[index] = item.location;\n                    this._transformedList[index] = item.tranformed;\n                    this.items.push(item);\n                    index++;\n                }\n            } else {\n                if (!this._pointBuffers.length) {\n                    if (PointList.starTexture == null) {\n                        PointList.starTexture = Texture.fromUrl(URLHelpers.singleton.engineAssetUrl('StarProfileAlpha.png'));\n                    }\n                    var count = this._points.length;\n                    var pointBuffer = null;\n                    var pointList = null;\n                    var countLeft = count;\n                    var index = 0;\n                    var counter = 0;\n                    var $enum2 = ss.enumerate(this._points);\n                    while ($enum2.moveNext()) {\n                        var point = $enum2.current;\n                        if (counter >= 100000 || pointList == null) {\n                            if (pointBuffer != null) {\n                                pointBuffer.unlock();\n                            }\n                            var thisCount = Math.min(100000, countLeft);\n                            countLeft -= thisCount;\n                            pointBuffer = new TimeSeriesPointVertexBuffer(thisCount);\n                            pointList = pointBuffer.lock(); // Lock the buffer (which will return our structs)\n                            this._pointBuffers.push(pointBuffer);\n                            this._pointBufferCounts.push(thisCount);\n                            counter = 0;\n                        }\n                        pointList[counter] = new TimeSeriesPointVertex();\n                        pointList[counter].position = point;\n                        pointList[counter].pointSize = this._sizes[index];\n                        pointList[counter].tu = this._dates[index].startDate;\n                        pointList[counter].tv = this._dates[index].endDate;\n                        pointList[counter].set_color(this._colors[index]);\n                        index++;\n                        counter++;\n                    }\n                    if (pointBuffer != null) {\n                        pointBuffer.unlock();\n                    }\n                }\n            }\n            this._init = true;\n        }\n    },\n\n    draw: function (renderContext, opacity, cull) {\n        this._initBuffer(renderContext);\n        if (renderContext.gl == null) {\n            if (!this._imageReady) {\n                return;\n            }\n            renderContext.device.save();\n            renderContext.WVP.projectArrayToScreen(this._worldList, this._transformedList);\n            var ctx = renderContext.device;\n            ctx.globalAlpha = 0.4;\n            var width = renderContext.width;\n            var height = renderContext.height;\n            var viewPoint = Vector3d.makeCopy(renderContext.get_viewPoint());\n            var scaleFactor = renderContext.get_fovScale() / 100;\n            var $enum1 = ss.enumerate(this.items);\n            while ($enum1.moveNext()) {\n                // todo filter by date\n                var item = $enum1.current;\n                if (item.tranformed.z < 1) {\n                    var x = item.tranformed.x;\n                    var y = item.tranformed.y;\n                    var size = 0.1 * item.size / scaleFactor;\n                    var half = size / 2;\n                    if (x > -half && x < width + half && y > -half && y < height + half) {\n                        ctx.beginPath();\n                        ctx.fillStyle = item.color.toFormat();\n                        ctx.arc(x, y, size, 0, Math.PI * 2, true);\n                        ctx.fill();\n                    }\n                }\n            }\n            renderContext.device.restore();\n        } else {\n            var zero = new Vector3d();\n            var matInv = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n            matInv.invert();\n            var cam = Vector3d._transformCoordinate(zero, matInv);\n            var $enum2 = ss.enumerate(this._pointBuffers);\n            while ($enum2.moveNext()) {\n                var pointBuffer = $enum2.current;\n                TimeSeriesPointSpriteShader.use(renderContext, pointBuffer.vertexBuffer, PointList.starTexture.texture2d, Color.fromArgb(255 * opacity, 255, 255, 255), this.depthBuffered, this.jNow, (this.timeSeries) ? this.decay : 0, cam, (this.scale * (renderContext.height / 960)), this.minSize, this.showFarSide, this.sky);\n                renderContext.gl.drawArrays(WEBGL.POINTS, 0, pointBuffer.count);\n            }\n        }\n    },\n\n    drawTextured: function (renderContext, texture, opacity) {\n        this._initBuffer(renderContext);\n        var zero = new Vector3d();\n        var matInv = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        matInv.invert();\n        var cam = Vector3d._transformCoordinate(zero, matInv);\n        var $enum1 = ss.enumerate(this._pointBuffers);\n        while ($enum1.moveNext()) {\n            var pointBuffer = $enum1.current;\n            TimeSeriesPointSpriteShader.use(renderContext, pointBuffer.vertexBuffer, texture, Color.fromArgb(255 * opacity, 255, 255, 255), this.depthBuffered, this.jNow, this.decay, cam, (this.scale * (renderContext.height / 960)), this.minSize, this.showFarSide, this.sky);\n            renderContext.gl.drawArrays(WEBGL.POINTS, 0, pointBuffer.count);\n        }\n    }\n};\n\nregisterType(\"PointList\", [PointList, PointList$, null]);\n\n\n// wwtlib.TimeSeriesLineVertex\n\nexport function TimeSeriesLineVertex() {\n    this.position = new Vector3d();\n    this.normal = new Vector3d();\n    this.tu = 0;\n    this.tv = 0;\n}\n\nTimeSeriesLineVertex.create = function (position, normal, time, color) {\n    var temp = new TimeSeriesLineVertex();\n    temp.position = position;\n    temp.normal = normal;\n    temp.tu = time;\n    temp.tv = 0;\n    temp.color = color;\n    return temp;\n};\n\nvar TimeSeriesLineVertex$ = {\n    get_color: function () {\n        return this.color;\n    },\n\n    set_color: function (value) {\n        this.color = value;\n        return value;\n    }\n};\n\nregisterType(\"TimeSeriesLineVertex\", [TimeSeriesLineVertex, TimeSeriesLineVertex$, null]);\n\n\n// wwtlib.TimeSeriesPointVertex\n\nexport function TimeSeriesPointVertex() {\n    this.pointSize = 0;\n    this.tu = 0;\n    this.tv = 0;\n}\n\nTimeSeriesPointVertex.create = function (position, size, time, color) {\n    var tmp = new TimeSeriesPointVertex();\n    tmp.position = position;\n    tmp.pointSize = size;\n    tmp.tu = time;\n    tmp.tv = 0;\n    tmp.color = color;\n    return tmp;\n};\n\nvar TimeSeriesPointVertex$ = {\n    get_color: function () {\n        return this.color;\n    },\n\n    set_color: function (value) {\n        this.color = value;\n        return value;\n    }\n};\n\nregisterType(\"TimeSeriesPointVertex\", [TimeSeriesPointVertex, TimeSeriesPointVertex$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Core WebGL shaders for the WWT engine.\n\nimport { registerType } from \"../typesystem.js\";\nimport { Matrix3d, Vector3d } from \"../double3d.js\";\nimport { Color } from \"../color.js\";\nimport { set_tileUvMultiple, set_tileDemEnabled } from \"../render_globals.js\";\nimport { WEBGL } from \"./webgl_constants.js\";\nimport { Texture } from \"./texture.js\";\n\n\n// wwtlib.SimpleLineShader\n\nexport function SimpleLineShader() { }\n\nSimpleLineShader.vertLoc = 0;\nSimpleLineShader.initialized = false;\nSimpleLineShader._prog = null;\n\nSimpleLineShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision highp float;\n        uniform vec4 lineColor;\n\n        void main(void) {\n            gl_FragColor = lineColor;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n\n        void main(void) {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        }\n    `;\n\n    SimpleLineShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(SimpleLineShader._frag, fragShaderText);\n    gl.compileShader(SimpleLineShader._frag);\n    var stat = gl.getShaderParameter(SimpleLineShader._frag, WEBGL.COMPILE_STATUS);\n    SimpleLineShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(SimpleLineShader._vert, vertexShaderText);\n    gl.compileShader(SimpleLineShader._vert);\n    var stat1 = gl.getShaderParameter(SimpleLineShader._vert, WEBGL.COMPILE_STATUS);\n    SimpleLineShader._prog = gl.createProgram();\n    gl.attachShader(SimpleLineShader._prog, SimpleLineShader._vert);\n    gl.attachShader(SimpleLineShader._prog, SimpleLineShader._frag);\n    gl.linkProgram(SimpleLineShader._prog);\n    var errcode = gl.getProgramParameter(SimpleLineShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(SimpleLineShader._prog);\n    SimpleLineShader.vertLoc = gl.getAttribLocation(SimpleLineShader._prog, 'aVertexPosition');\n    SimpleLineShader.lineColorLoc = gl.getUniformLocation(SimpleLineShader._prog, 'lineColor');\n    SimpleLineShader.projMatLoc = gl.getUniformLocation(SimpleLineShader._prog, 'uPMatrix');\n    SimpleLineShader.mvMatLoc = gl.getUniformLocation(SimpleLineShader._prog, 'uMVMatrix');\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    SimpleLineShader.initialized = true;\n};\n\nSimpleLineShader.use = function (renderContext, vertex, lineColor, useDepth) {\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!SimpleLineShader.initialized) {\n            SimpleLineShader.init(renderContext);\n        }\n        gl.useProgram(SimpleLineShader._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniformMatrix4fv(SimpleLineShader.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(SimpleLineShader.projMatLoc, false, renderContext.get_projection().floatArray());\n        gl.uniform4f(SimpleLineShader.lineColorLoc, lineColor.r / 255, lineColor.g / 255, lineColor.b / 255, 1);\n        if (renderContext.space || !useDepth) {\n            gl.disable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.enable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.enableVertexAttribArray(SimpleLineShader.vertLoc);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, null);\n        gl.vertexAttribPointer(SimpleLineShader.vertLoc, 3, WEBGL.FLOAT, false, 0, 0);\n        gl.lineWidth(1);\n        gl.enable(WEBGL.BLEND);\n        gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    }\n};\n\nvar SimpleLineShader$ = {};\n\nregisterType(\"SimpleLineShader\", [SimpleLineShader, SimpleLineShader$, null]);\n\n\n// wwtlib.SimpleLineShader2D\n\nexport function SimpleLineShader2D() { }\n\nSimpleLineShader2D.vertLoc = 0;\nSimpleLineShader2D.initialized = false;\nSimpleLineShader2D._prog = null;\n\nSimpleLineShader2D.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n       precision highp float;\n       uniform vec4 lineColor;\n\n       void main(void) {\n           gl_FragColor = lineColor;\n       }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n\n        void main(void) {\n            gl_Position = vec4(aVertexPosition, 1.0);\n        }\n    `;\n\n    SimpleLineShader2D._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(SimpleLineShader2D._frag, fragShaderText);\n    gl.compileShader(SimpleLineShader2D._frag);\n    var stat = gl.getShaderParameter(SimpleLineShader2D._frag, WEBGL.COMPILE_STATUS);\n    SimpleLineShader2D._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(SimpleLineShader2D._vert, vertexShaderText);\n    gl.compileShader(SimpleLineShader2D._vert);\n    var stat1 = gl.getShaderParameter(SimpleLineShader2D._vert, WEBGL.COMPILE_STATUS);\n    SimpleLineShader2D._prog = gl.createProgram();\n    gl.attachShader(SimpleLineShader2D._prog, SimpleLineShader2D._vert);\n    gl.attachShader(SimpleLineShader2D._prog, SimpleLineShader2D._frag);\n    gl.linkProgram(SimpleLineShader2D._prog);\n    var errcode = gl.getProgramParameter(SimpleLineShader2D._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(SimpleLineShader2D._prog);\n    SimpleLineShader2D.vertLoc = gl.getAttribLocation(SimpleLineShader2D._prog, 'aVertexPosition');\n    SimpleLineShader2D.lineColorLoc = gl.getUniformLocation(SimpleLineShader2D._prog, 'lineColor');\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    SimpleLineShader2D.initialized = true;\n};\n\nSimpleLineShader2D.use = function (renderContext, vertex, lineColor, useDepth) {\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!SimpleLineShader2D.initialized) {\n            SimpleLineShader2D.init(renderContext);\n        }\n        gl.useProgram(SimpleLineShader2D._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniform4f(SimpleLineShader2D.lineColorLoc, lineColor.r / 255, lineColor.g / 255, lineColor.b / 255, 1);\n        if (renderContext.space || !useDepth) {\n            gl.disable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.enable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.enableVertexAttribArray(SimpleLineShader2D.vertLoc);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, null);\n        gl.vertexAttribPointer(SimpleLineShader2D.vertLoc, 3, WEBGL.FLOAT, false, 0, 0);\n        gl.lineWidth(1);\n        gl.enable(WEBGL.BLEND);\n        gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    }\n};\n\nvar SimpleLineShader2D$ = {};\n\nregisterType(\"SimpleLineShader2D\", [SimpleLineShader2D, SimpleLineShader2D$, null]);\n\n\n// wwtlib.OrbitLineShader\n\nexport function OrbitLineShader() { }\n\nOrbitLineShader.vertLoc = 0;\nOrbitLineShader.colorLoc = 0;\nOrbitLineShader.initialized = false;\nOrbitLineShader._prog = null;\n\nOrbitLineShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision highp float;\n        uniform vec4 lineColor;\n        varying lowp vec4 vColor;\n\n        void main(void) {\n            gl_FragColor = lineColor * vColor;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n        attribute vec4 aVertexColor;\n\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n        varying lowp vec4 vColor;\n\n        void main(void) {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            vColor = aVertexColor;\n        }\n    `;\n\n    OrbitLineShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(OrbitLineShader._frag, fragShaderText);\n    gl.compileShader(OrbitLineShader._frag);\n    var stat = gl.getShaderParameter(OrbitLineShader._frag, WEBGL.COMPILE_STATUS);\n    OrbitLineShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(OrbitLineShader._vert, vertexShaderText);\n    gl.compileShader(OrbitLineShader._vert);\n    var stat1 = gl.getShaderParameter(OrbitLineShader._vert, WEBGL.COMPILE_STATUS);\n    OrbitLineShader._prog = gl.createProgram();\n    gl.attachShader(OrbitLineShader._prog, OrbitLineShader._vert);\n    gl.attachShader(OrbitLineShader._prog, OrbitLineShader._frag);\n    gl.linkProgram(OrbitLineShader._prog);\n    var errcode = gl.getProgramParameter(OrbitLineShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(OrbitLineShader._prog);\n    OrbitLineShader.vertLoc = gl.getAttribLocation(OrbitLineShader._prog, 'aVertexPosition');\n    OrbitLineShader.colorLoc = gl.getAttribLocation(OrbitLineShader._prog, 'aVertexColor');\n    OrbitLineShader.lineColorLoc = gl.getUniformLocation(OrbitLineShader._prog, 'lineColor');\n    OrbitLineShader.projMatLoc = gl.getUniformLocation(OrbitLineShader._prog, 'uPMatrix');\n    OrbitLineShader.mvMatLoc = gl.getUniformLocation(OrbitLineShader._prog, 'uMVMatrix');\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    OrbitLineShader.initialized = true;\n};\n\nOrbitLineShader.use = function (renderContext, vertex, lineColor) {\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!OrbitLineShader.initialized) {\n            OrbitLineShader.init(renderContext);\n        }\n        gl.useProgram(OrbitLineShader._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniformMatrix4fv(OrbitLineShader.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(OrbitLineShader.projMatLoc, false, renderContext.get_projection().floatArray());\n        gl.uniform4f(OrbitLineShader.lineColorLoc, lineColor.r / 255, lineColor.g / 255, lineColor.b / 255, 1);\n        if (renderContext.space) {\n            gl.disable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.enable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(OrbitLineShader.vertLoc);\n        gl.enableVertexAttribArray(OrbitLineShader.colorLoc);\n        gl.vertexAttribPointer(OrbitLineShader.vertLoc, 3, WEBGL.FLOAT, false, 28, 0);\n        gl.vertexAttribPointer(OrbitLineShader.colorLoc, 4, WEBGL.FLOAT, false, 28, 12);\n        gl.lineWidth(1);\n        gl.enable(WEBGL.BLEND);\n        gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    }\n};\n\nvar OrbitLineShader$ = {};\n\nregisterType(\"OrbitLineShader\", [OrbitLineShader, OrbitLineShader$, null]);\n\n\n// wwtlib.LineShaderNormalDates\n\nexport function LineShaderNormalDates() { }\n\nLineShaderNormalDates.vertLoc = 0;\nLineShaderNormalDates.colorLoc = 0;\nLineShaderNormalDates.timeLoc = 0;\nLineShaderNormalDates.initialized = false;\nLineShaderNormalDates._prog = null;\n\nLineShaderNormalDates.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision highp float;\n        uniform vec4 lineColor;\n        varying lowp vec4 vColor;\n\n        void main(void)\n        {\n            gl_FragColor = lineColor * vColor;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n        attribute vec4 aVertexColor;\n        attribute vec2 aTime;\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n        uniform float jNow;\n        uniform float decay;\n\n        varying lowp vec4 vColor;\n\n        void main(void)\n        {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            float dAlpha = 1.0;\n\n            if (decay > 0.0)\n            {\n                    dAlpha = 1.0 - ((jNow - aTime.y) / decay);\n                    if (dAlpha > 1.0 )\n                    {\n                        dAlpha = 1.0;\n                    }\n            }\n\n            if (jNow < aTime.x && decay > 0.0)\n            {\n                vColor = vec4(1, 1, 1, 1);\n            }\n            else\n            {\n                vColor = vec4(aVertexColor.r, aVertexColor.g, aVertexColor.b, dAlpha * aVertexColor.a);\n            }\n        }\n    `;\n\n    LineShaderNormalDates._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(LineShaderNormalDates._frag, fragShaderText);\n    gl.compileShader(LineShaderNormalDates._frag);\n    var stat = gl.getShaderParameter(LineShaderNormalDates._frag, WEBGL.COMPILE_STATUS);\n    LineShaderNormalDates._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(LineShaderNormalDates._vert, vertexShaderText);\n    gl.compileShader(LineShaderNormalDates._vert);\n    var stat1 = gl.getShaderParameter(LineShaderNormalDates._vert, WEBGL.COMPILE_STATUS);\n    LineShaderNormalDates._prog = gl.createProgram();\n    gl.attachShader(LineShaderNormalDates._prog, LineShaderNormalDates._vert);\n    gl.attachShader(LineShaderNormalDates._prog, LineShaderNormalDates._frag);\n    gl.linkProgram(LineShaderNormalDates._prog);\n    var errcode = gl.getProgramParameter(LineShaderNormalDates._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(LineShaderNormalDates._prog);\n    LineShaderNormalDates.vertLoc = gl.getAttribLocation(LineShaderNormalDates._prog, 'aVertexPosition');\n    LineShaderNormalDates.colorLoc = gl.getAttribLocation(LineShaderNormalDates._prog, 'aVertexColor');\n    LineShaderNormalDates.timeLoc = gl.getAttribLocation(LineShaderNormalDates._prog, 'aTime');\n    LineShaderNormalDates.lineColorLoc = gl.getUniformLocation(LineShaderNormalDates._prog, 'lineColor');\n    LineShaderNormalDates.projMatLoc = gl.getUniformLocation(LineShaderNormalDates._prog, 'uPMatrix');\n    LineShaderNormalDates.mvMatLoc = gl.getUniformLocation(LineShaderNormalDates._prog, 'uMVMatrix');\n    LineShaderNormalDates.jNowLoc = gl.getUniformLocation(LineShaderNormalDates._prog, 'jNow');\n    LineShaderNormalDates.decayLoc = gl.getUniformLocation(LineShaderNormalDates._prog, 'decay');\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    LineShaderNormalDates.initialized = true;\n};\n\nLineShaderNormalDates.use = function (renderContext, vertex, lineColor, zBuffer, jNow, decay) {\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!LineShaderNormalDates.initialized) {\n            LineShaderNormalDates.init(renderContext);\n        }\n        gl.useProgram(LineShaderNormalDates._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniformMatrix4fv(LineShaderNormalDates.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(LineShaderNormalDates.projMatLoc, false, renderContext.get_projection().floatArray());\n        gl.uniform4f(LineShaderNormalDates.lineColorLoc, lineColor.r / 255, lineColor.g / 255, lineColor.b / 255, 1);\n        gl.uniform1f(LineShaderNormalDates.jNowLoc, jNow);\n        gl.uniform1f(LineShaderNormalDates.decayLoc, decay);\n        if (zBuffer) {\n            gl.enable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.disable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(LineShaderNormalDates.vertLoc);\n        gl.enableVertexAttribArray(LineShaderNormalDates.colorLoc);\n        gl.vertexAttribPointer(LineShaderNormalDates.vertLoc, 3, WEBGL.FLOAT, false, 36, 0);\n        gl.vertexAttribPointer(LineShaderNormalDates.colorLoc, 4, WEBGL.FLOAT, false, 36, 12);\n        gl.vertexAttribPointer(LineShaderNormalDates.timeLoc, 2, WEBGL.FLOAT, false, 36, 28);\n        gl.lineWidth(1);\n        gl.enable(WEBGL.BLEND);\n        gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    }\n};\n\nvar LineShaderNormalDates$ = {};\n\nregisterType(\"LineShaderNormalDates\", [LineShaderNormalDates, LineShaderNormalDates$, null]);\n\n\n// wwtlib.TimeSeriesPointSpriteShader\n\nexport function TimeSeriesPointSpriteShader() { }\n\nTimeSeriesPointSpriteShader.vertLoc = 0;\nTimeSeriesPointSpriteShader.colorLoc = 0;\nTimeSeriesPointSpriteShader.pointSizeLoc = 0;\nTimeSeriesPointSpriteShader.timeLoc = 0;\nTimeSeriesPointSpriteShader.initialized = false;\nTimeSeriesPointSpriteShader._prog = null;\n\nTimeSeriesPointSpriteShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision mediump float;\n        uniform vec4 lineColor;\n        varying lowp vec4 vColor;\n        uniform sampler2D uSampler;\n\n        void main(void)\n        {\n            vec4 texColor;\n            texColor = texture2D(uSampler, gl_PointCoord);\n            gl_FragColor = lineColor * vColor * texColor;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n        attribute vec4 aVertexColor;\n        attribute vec2 aTime;\n        attribute float aPointSize;\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n        uniform float jNow;\n        uniform vec3 cameraPosition;\n        uniform float decay;\n        uniform float scale;\n        uniform float minSize;\n        uniform float sky;\n        uniform float showFarSide;\n\n        varying lowp vec4 vColor;\n\n        void main(void)\n        {\n            float dotCam = dot( normalize(cameraPosition-aVertexPosition), normalize(aVertexPosition));\n            float dist = distance(aVertexPosition, cameraPosition);\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            float dAlpha = 1.0;\n\n            if ( decay > 0.0)\n            {\n                    dAlpha = 1.0 - ((jNow - aTime.y) / decay);\n                    if (dAlpha > 1.0 )\n                    {\n                        dAlpha = 1.0;\n                    }\n            }\n\n            if ( showFarSide == 0.0 && (dotCam * sky) < 0.0 || (jNow < aTime.x && decay > 0.0))\n            {\n                vColor = vec4(0.0, 0.0, 0.0, 0.0);\n            }\n            else\n            {\n                vColor = vec4(aVertexColor.r, aVertexColor.g, aVertexColor.b, dAlpha);\n            }\n\n            float lSize = scale;\n\n            if (scale < 0.0)\n            {\n                lSize = -scale;\n                dist = 1.0;\n            }\n\n            gl_PointSize = max(minSize, (lSize * ( aPointSize ) / dist));\n        }\n    `;\n\n    TimeSeriesPointSpriteShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(TimeSeriesPointSpriteShader._frag, fragShaderText);\n    gl.compileShader(TimeSeriesPointSpriteShader._frag);\n    var stat = gl.getShaderParameter(TimeSeriesPointSpriteShader._frag, WEBGL.COMPILE_STATUS);\n    TimeSeriesPointSpriteShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(TimeSeriesPointSpriteShader._vert, vertexShaderText);\n    gl.compileShader(TimeSeriesPointSpriteShader._vert);\n    var stat1 = gl.getShaderParameter(TimeSeriesPointSpriteShader._vert, WEBGL.COMPILE_STATUS);\n    var compilationLog = gl.getShaderInfoLog(TimeSeriesPointSpriteShader._vert);\n    TimeSeriesPointSpriteShader._prog = gl.createProgram();\n    gl.attachShader(TimeSeriesPointSpriteShader._prog, TimeSeriesPointSpriteShader._vert);\n    gl.attachShader(TimeSeriesPointSpriteShader._prog, TimeSeriesPointSpriteShader._frag);\n    gl.linkProgram(TimeSeriesPointSpriteShader._prog);\n    var errcode = gl.getProgramParameter(TimeSeriesPointSpriteShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(TimeSeriesPointSpriteShader._prog);\n    TimeSeriesPointSpriteShader.vertLoc = gl.getAttribLocation(TimeSeriesPointSpriteShader._prog, 'aVertexPosition');\n    TimeSeriesPointSpriteShader.colorLoc = gl.getAttribLocation(TimeSeriesPointSpriteShader._prog, 'aVertexColor');\n    TimeSeriesPointSpriteShader.pointSizeLoc = gl.getAttribLocation(TimeSeriesPointSpriteShader._prog, 'aPointSize');\n    TimeSeriesPointSpriteShader.timeLoc = gl.getAttribLocation(TimeSeriesPointSpriteShader._prog, 'aTime');\n    TimeSeriesPointSpriteShader.projMatLoc = gl.getUniformLocation(TimeSeriesPointSpriteShader._prog, 'uPMatrix');\n    TimeSeriesPointSpriteShader.mvMatLoc = gl.getUniformLocation(TimeSeriesPointSpriteShader._prog, 'uMVMatrix');\n    TimeSeriesPointSpriteShader.sampLoc = gl.getUniformLocation(TimeSeriesPointSpriteShader._prog, 'uSampler');\n    TimeSeriesPointSpriteShader.jNowLoc = gl.getUniformLocation(TimeSeriesPointSpriteShader._prog, 'jNow');\n    TimeSeriesPointSpriteShader.decayLoc = gl.getUniformLocation(TimeSeriesPointSpriteShader._prog, 'decay');\n    TimeSeriesPointSpriteShader.lineColorLoc = gl.getUniformLocation(TimeSeriesPointSpriteShader._prog, 'lineColor');\n    TimeSeriesPointSpriteShader.cameraPosLoc = gl.getUniformLocation(TimeSeriesPointSpriteShader._prog, 'cameraPosition');\n    TimeSeriesPointSpriteShader.scaleLoc = gl.getUniformLocation(TimeSeriesPointSpriteShader._prog, 'scale');\n    TimeSeriesPointSpriteShader.skyLoc = gl.getUniformLocation(TimeSeriesPointSpriteShader._prog, 'sky');\n    TimeSeriesPointSpriteShader.showFarSideLoc = gl.getUniformLocation(TimeSeriesPointSpriteShader._prog, 'showFarSide');\n    TimeSeriesPointSpriteShader.minSizeLoc = gl.getUniformLocation(TimeSeriesPointSpriteShader._prog, 'minSize');\n    gl.enable(WEBGL.BLEND);\n    TimeSeriesPointSpriteShader.initialized = true;\n};\n\nTimeSeriesPointSpriteShader.use = function (renderContext, vertex, texture, lineColor, zBuffer, jNow, decay, camera, scale, minSize, showFarSide, sky) {\n    if (texture == null) {\n        texture = Texture.getEmpty();\n    }\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!TimeSeriesPointSpriteShader.initialized) {\n            TimeSeriesPointSpriteShader.init(renderContext);\n        }\n        gl.useProgram(TimeSeriesPointSpriteShader._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniformMatrix4fv(TimeSeriesPointSpriteShader.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(TimeSeriesPointSpriteShader.projMatLoc, false, renderContext.get_projection().floatArray());\n        gl.uniform1i(TimeSeriesPointSpriteShader.sampLoc, 0);\n        gl.uniform1f(TimeSeriesPointSpriteShader.jNowLoc, jNow);\n        gl.uniform1f(TimeSeriesPointSpriteShader.decayLoc, decay);\n        gl.uniform4f(TimeSeriesPointSpriteShader.lineColorLoc, lineColor.r / 255, lineColor.g / 255, lineColor.b / 255, lineColor.a / 255);\n        gl.uniform3f(TimeSeriesPointSpriteShader.cameraPosLoc, camera.x, camera.y, camera.z);\n        gl.uniform1f(TimeSeriesPointSpriteShader.scaleLoc, scale);\n        gl.uniform1f(TimeSeriesPointSpriteShader.minSizeLoc, minSize);\n        gl.uniform1f(TimeSeriesPointSpriteShader.showFarSideLoc, (showFarSide) ? 1 : 0);\n        gl.uniform1f(TimeSeriesPointSpriteShader.skyLoc, (sky) ? -1 : 1);\n        if (zBuffer) {\n            gl.enable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.disable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(TimeSeriesPointSpriteShader.vertLoc);\n        gl.enableVertexAttribArray(TimeSeriesPointSpriteShader.colorLoc);\n        gl.enableVertexAttribArray(TimeSeriesPointSpriteShader.pointSizeLoc);\n        gl.enableVertexAttribArray(TimeSeriesPointSpriteShader.timeLoc);\n        gl.vertexAttribPointer(TimeSeriesPointSpriteShader.vertLoc, 3, WEBGL.FLOAT, false, 40, 0);\n        gl.vertexAttribPointer(TimeSeriesPointSpriteShader.colorLoc, 4, WEBGL.FLOAT, false, 40, 12);\n        gl.vertexAttribPointer(TimeSeriesPointSpriteShader.pointSizeLoc, 1, WEBGL.FLOAT, false, 40, 36);\n        gl.vertexAttribPointer(TimeSeriesPointSpriteShader.timeLoc, 2, WEBGL.FLOAT, false, 40, 28);\n        gl.activeTexture(WEBGL.TEXTURE0);\n        gl.bindTexture(WEBGL.TEXTURE_2D, texture);\n        gl.lineWidth(1);\n        gl.enable(WEBGL.BLEND);\n        gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE);\n    }\n};\n\nvar TimeSeriesPointSpriteShader$ = {};\n\nregisterType(\"TimeSeriesPointSpriteShader\", [TimeSeriesPointSpriteShader, TimeSeriesPointSpriteShader$, null]);\n\n// wwtlib.KeplerPointSpriteShader\n\nexport function KeplerPointSpriteShader() { }\n\nKeplerPointSpriteShader.abcLoc = 0;\nKeplerPointSpriteShader.abcLoc1 = 0;\nKeplerPointSpriteShader.pointSizeLoc = 0;\nKeplerPointSpriteShader.colorLoc = 0;\nKeplerPointSpriteShader.weLoc = 0;\nKeplerPointSpriteShader.nTLoc = 0;\nKeplerPointSpriteShader.azLoc = 0;\nKeplerPointSpriteShader.orbitLoc = 0;\nKeplerPointSpriteShader.initialized = false;\nKeplerPointSpriteShader._prog = null;\n\nKeplerPointSpriteShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision mediump float;\n        uniform vec4 lineColor;\n        varying lowp vec4 vColor;\n        uniform sampler2D uSampler;\n\n        void main(void)\n        {\n            vec4 texColor;\n            texColor = texture2D(uSampler, gl_PointCoord);\n            gl_FragColor = lineColor * vColor * texColor;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 ABC;\n        attribute vec3 abc;\n        attribute float PointSize;\n        attribute vec4 Color;\n        attribute vec2 we;\n        attribute vec2 nT;\n        attribute vec2 az;\n        attribute vec2 orbit;\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n        uniform float jNow;\n        uniform vec3 cameraPosition;\n        uniform float MM;\n        uniform float scaling;\n        uniform float minSize;\n        uniform float opacity;\n        varying lowp vec4 vColor;\n\n        void main(void)\n        {\n            float M = nT.x * (jNow - nT.y) * 0.01745329251994;\n            float e = we.y;\n            float a = az.x;\n            float PI = 3.1415926535897932384;\n            float w = we.x* 0.01745329251994;\n            float F = 1.0;\n\n            if (M < 0.0)\n                F = -1.0;\n\n            M = abs(M) / (2.0 * PI);\n            M = (M - float(int(M)))*2.0 *PI *F;\n\n            if (MM != 0.0)\n            {\n                M = MM + (1.0- orbit.x) *2.0 *PI;\n                if (M > (2.0*PI))\n                    M = M - (2.0*PI);\n            }\n\n            if (M < 0.0)\n                M += 2.0 *PI;\n\n            F = 1.0;\n            if (M > PI)\n                F = -1.0;\n\n            if (M > PI)\n                M = 2.0 *PI - M;\n\n            float E = PI / 2.0;\n            float scale = PI / 4.0;\n\n            for (int i =0; i<23; i++)\n            {\n                float R = E - e *sin(E);\n                if (M > R)\n                    E += scale;\n                else\n                    E -= scale;\n                scale /= 2.0;\n            }\n\n            E = E * F;\n\n            float v = 2.0 * atan(sqrt((1.0 + e) / (1.0 -e )) * tan(E/2.0));\n            float r = a * (1.0-e * cos(E));\n\n            vec4 pnt;\n            pnt.x = r * abc.x * sin(ABC.x + w + v);\n            pnt.z = r * abc.y * sin(ABC.y + w + v);\n            pnt.y = r * abc.z * sin(ABC.z + w + v);\n            pnt.w = 1.0;\n\n            float dist = distance(pnt.xyz, cameraPosition.xyz);\n            gl_Position = uPMatrix * uMVMatrix * pnt;\n            vColor.a = opacity * (1.0-(orbit.x));\n            vColor.r = Color.r;\n            vColor.g = Color.g;\n            vColor.b = Color.b;\n            gl_PointSize = max(minSize, scaling * (PointSize / dist));\n        }\n    `;\n\n    KeplerPointSpriteShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(KeplerPointSpriteShader._frag, fragShaderText);\n    gl.compileShader(KeplerPointSpriteShader._frag);\n    var stat = gl.getShaderParameter(KeplerPointSpriteShader._frag, WEBGL.COMPILE_STATUS);\n    KeplerPointSpriteShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(KeplerPointSpriteShader._vert, vertexShaderText);\n    gl.compileShader(KeplerPointSpriteShader._vert);\n    var stat1 = gl.getShaderParameter(KeplerPointSpriteShader._vert, WEBGL.COMPILE_STATUS);\n    var compilationLog = gl.getShaderInfoLog(KeplerPointSpriteShader._vert);\n    KeplerPointSpriteShader._prog = gl.createProgram();\n    gl.attachShader(KeplerPointSpriteShader._prog, KeplerPointSpriteShader._vert);\n    gl.attachShader(KeplerPointSpriteShader._prog, KeplerPointSpriteShader._frag);\n    gl.linkProgram(KeplerPointSpriteShader._prog);\n    var errcode = gl.getProgramParameter(KeplerPointSpriteShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(KeplerPointSpriteShader._prog);\n    KeplerPointSpriteShader.abcLoc1 = gl.getAttribLocation(KeplerPointSpriteShader._prog, 'abc');\n    KeplerPointSpriteShader.abcLoc = gl.getAttribLocation(KeplerPointSpriteShader._prog, 'ABC');\n    KeplerPointSpriteShader.pointSizeLoc = gl.getAttribLocation(KeplerPointSpriteShader._prog, 'PointSize');\n    KeplerPointSpriteShader.colorLoc = gl.getAttribLocation(KeplerPointSpriteShader._prog, 'Color');\n    KeplerPointSpriteShader.weLoc = gl.getAttribLocation(KeplerPointSpriteShader._prog, 'we');\n    KeplerPointSpriteShader.nTLoc = gl.getAttribLocation(KeplerPointSpriteShader._prog, 'nT');\n    KeplerPointSpriteShader.azLoc = gl.getAttribLocation(KeplerPointSpriteShader._prog, 'az');\n    KeplerPointSpriteShader.orbitLoc = gl.getAttribLocation(KeplerPointSpriteShader._prog, 'orbit');\n    KeplerPointSpriteShader.projMatLoc = gl.getUniformLocation(KeplerPointSpriteShader._prog, 'uPMatrix');\n    KeplerPointSpriteShader.mvMatLoc = gl.getUniformLocation(KeplerPointSpriteShader._prog, 'uMVMatrix');\n    KeplerPointSpriteShader.jNowLoc = gl.getUniformLocation(KeplerPointSpriteShader._prog, 'jNow');\n    KeplerPointSpriteShader.cameraPosLoc = gl.getUniformLocation(KeplerPointSpriteShader._prog, 'cameraPosition');\n    KeplerPointSpriteShader.mmLoc = gl.getUniformLocation(KeplerPointSpriteShader._prog, 'MM');\n    KeplerPointSpriteShader.scaleLoc = gl.getUniformLocation(KeplerPointSpriteShader._prog, 'scaling');\n    KeplerPointSpriteShader.minSizeLoc = gl.getUniformLocation(KeplerPointSpriteShader._prog, 'minSize');\n    KeplerPointSpriteShader.lineColorLoc = gl.getUniformLocation(KeplerPointSpriteShader._prog, 'lineColor');\n    KeplerPointSpriteShader.opacityLoc = gl.getUniformLocation(KeplerPointSpriteShader._prog, 'opacity');\n    KeplerPointSpriteShader.sampLoc = gl.getUniformLocation(KeplerPointSpriteShader._prog, 'uSampler');\n    gl.enable(WEBGL.BLEND);\n    KeplerPointSpriteShader.initialized = true;\n};\n\nKeplerPointSpriteShader.use = function (renderContext, worldView, vertex, texture, lineColor, opacity, zBuffer, jNow, MM, camera, scale, minSize) {\n    if (texture == null) {\n        texture = Texture.getEmpty();\n    }\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!KeplerPointSpriteShader.initialized) {\n            KeplerPointSpriteShader.init(renderContext);\n        }\n        gl.useProgram(KeplerPointSpriteShader._prog);\n        gl.uniformMatrix4fv(KeplerPointSpriteShader.mvMatLoc, false, worldView.floatArray());\n        gl.uniformMatrix4fv(KeplerPointSpriteShader.projMatLoc, false, renderContext.get_projection().floatArray());\n        gl.uniform1i(KeplerPointSpriteShader.sampLoc, 0);\n        gl.uniform1f(KeplerPointSpriteShader.jNowLoc, jNow);\n        gl.uniform1f(KeplerPointSpriteShader.mmLoc, MM);\n        gl.uniform4f(KeplerPointSpriteShader.lineColorLoc, lineColor.r / 255, lineColor.g / 255, lineColor.b / 255, lineColor.a / 255);\n        gl.uniform1f(KeplerPointSpriteShader.opacityLoc, opacity);\n        gl.uniform3f(KeplerPointSpriteShader.cameraPosLoc, camera.x, camera.y, camera.z);\n        gl.uniform1f(KeplerPointSpriteShader.scaleLoc, scale);\n        gl.uniform1f(KeplerPointSpriteShader.minSizeLoc, minSize);\n        if (zBuffer) {\n            gl.enable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.disable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, null);\n        gl.enableVertexAttribArray(KeplerPointSpriteShader.abcLoc);\n        gl.enableVertexAttribArray(KeplerPointSpriteShader.abcLoc1);\n        gl.enableVertexAttribArray(KeplerPointSpriteShader.colorLoc);\n        gl.enableVertexAttribArray(KeplerPointSpriteShader.pointSizeLoc);\n        gl.enableVertexAttribArray(KeplerPointSpriteShader.weLoc);\n        gl.enableVertexAttribArray(KeplerPointSpriteShader.nTLoc);\n        gl.enableVertexAttribArray(KeplerPointSpriteShader.azLoc);\n        gl.enableVertexAttribArray(KeplerPointSpriteShader.orbitLoc);\n        gl.enableVertexAttribArray(KeplerPointSpriteShader.weLoc);\n        gl.vertexAttribPointer(KeplerPointSpriteShader.abcLoc, 3, WEBGL.FLOAT, false, 76, 0);\n        gl.vertexAttribPointer(KeplerPointSpriteShader.abcLoc1, 3, WEBGL.FLOAT, false, 76, 12);\n        gl.vertexAttribPointer(KeplerPointSpriteShader.pointSizeLoc, 1, WEBGL.FLOAT, false, 76, 24);\n        gl.vertexAttribPointer(KeplerPointSpriteShader.colorLoc, 4, WEBGL.FLOAT, false, 76, 28);\n        gl.vertexAttribPointer(KeplerPointSpriteShader.weLoc, 2, WEBGL.FLOAT, false, 76, 44);\n        gl.vertexAttribPointer(KeplerPointSpriteShader.nTLoc, 2, WEBGL.FLOAT, false, 76, 52);\n        gl.vertexAttribPointer(KeplerPointSpriteShader.azLoc, 2, WEBGL.FLOAT, false, 76, 60);\n        gl.vertexAttribPointer(KeplerPointSpriteShader.orbitLoc, 2, WEBGL.FLOAT, false, 76, 68);\n        gl.activeTexture(WEBGL.TEXTURE0);\n        gl.bindTexture(WEBGL.TEXTURE_2D, texture);\n        gl.lineWidth(1);\n        gl.enable(WEBGL.BLEND);\n        gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE);\n    }\n};\n\nvar KeplerPointSpriteShader$ = {};\n\nregisterType(\"KeplerPointSpriteShader\", [KeplerPointSpriteShader, KeplerPointSpriteShader$, null]);\n\n\n// wwtlib.EllipseShader\n\nexport function EllipseShader() { }\n\nEllipseShader.angleLoc = 0;\nEllipseShader.initialized = false;\nEllipseShader._prog = null;\n\nEllipseShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision mediump float;\n        varying lowp vec4 vColor;\n\n        void main(void)\n        {\n            gl_FragColor = vColor;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 Angle;\n        uniform mat4 matWVP;\n        uniform mat4 matPosition;\n        uniform vec3 positionNow;\n        uniform float semiMajorAxis;\n        uniform float eccentricity;\n        uniform vec4 color;\n        uniform float eccentricAnomaly;\n        varying lowp vec4 vColor;\n\n        void main(void)\n        {\n            float fade = (1.0 - Angle.x);\n            float PI = 3.1415927;\n            float E = eccentricAnomaly - Angle.x * 2.0 * PI;\n            vec2 semiAxes = vec2(1.0, sqrt(1.0 - eccentricity * eccentricity)) * semiMajorAxis;\n            vec2 planePos = semiAxes * vec2(cos(E) - eccentricity, sin(E));\n\n            if (Angle.x == 0.0)\n                gl_Position =  matPosition * vec4(positionNow, 1.0);\n            else\n                gl_Position = matWVP * vec4(planePos.x, planePos.y, 0.0, 1.0);\n\n            vColor = vec4(color.rgb, fade * color.a);\n        }\n    `;\n\n    EllipseShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(EllipseShader._frag, fragShaderText);\n    gl.compileShader(EllipseShader._frag);\n    var stat = gl.getShaderParameter(EllipseShader._frag, WEBGL.COMPILE_STATUS);\n    EllipseShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(EllipseShader._vert, vertexShaderText);\n    gl.compileShader(EllipseShader._vert);\n    var stat1 = gl.getShaderParameter(EllipseShader._vert, WEBGL.COMPILE_STATUS);\n    var compilationLog = gl.getShaderInfoLog(EllipseShader._vert);\n    EllipseShader._prog = gl.createProgram();\n    gl.attachShader(EllipseShader._prog, EllipseShader._vert);\n    gl.attachShader(EllipseShader._prog, EllipseShader._frag);\n    gl.linkProgram(EllipseShader._prog);\n    var errcode = gl.getProgramParameter(EllipseShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(EllipseShader._prog);\n    EllipseShader.angleLoc = gl.getAttribLocation(EllipseShader._prog, 'Angle');\n    EllipseShader.matWVPLoc = gl.getUniformLocation(EllipseShader._prog, 'matWVP');\n    EllipseShader.matPositionLoc = gl.getUniformLocation(EllipseShader._prog, 'matPosition');\n    EllipseShader.positionNowLoc = gl.getUniformLocation(EllipseShader._prog, 'positionNow');\n    EllipseShader.colorLoc = gl.getUniformLocation(EllipseShader._prog, 'color');\n    EllipseShader.semiMajorAxisLoc = gl.getUniformLocation(EllipseShader._prog, 'semiMajorAxis');\n    EllipseShader.eccentricityLoc = gl.getUniformLocation(EllipseShader._prog, 'eccentricity');\n    EllipseShader.eccentricAnomalyLoc = gl.getUniformLocation(EllipseShader._prog, 'eccentricAnomaly');\n    gl.enable(WEBGL.BLEND);\n    EllipseShader.initialized = true;\n};\n\nEllipseShader.use = function (renderContext, semiMajorAxis, eccentricity, eccentricAnomaly, lineColor, opacity, world, positionNow) {\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!EllipseShader.initialized) {\n            EllipseShader.init(renderContext);\n        }\n        gl.useProgram(EllipseShader._prog);\n        var WVPPos = Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(world, renderContext.get_view()), renderContext.get_projection());\n        var WVP = Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view()), renderContext.get_projection());\n        gl.uniformMatrix4fv(EllipseShader.matWVPLoc, false, WVP.floatArray());\n        gl.uniformMatrix4fv(EllipseShader.matPositionLoc, false, WVPPos.floatArray());\n        gl.uniform3f(EllipseShader.positionNowLoc, positionNow.x, positionNow.y, positionNow.z);\n        gl.uniform4f(EllipseShader.colorLoc, lineColor.r / 255, lineColor.g / 255, lineColor.b / 255, lineColor.a / 255);\n        gl.uniform1f(EllipseShader.semiMajorAxisLoc, semiMajorAxis);\n        gl.uniform1f(EllipseShader.eccentricityLoc, eccentricity);\n        gl.uniform1f(EllipseShader.eccentricAnomalyLoc, eccentricAnomaly);\n        gl.disable(WEBGL.DEPTH_TEST);\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.enableVertexAttribArray(EllipseShader.angleLoc);\n        gl.vertexAttribPointer(EllipseShader.angleLoc, 3, WEBGL.FLOAT, false, 0, 0);\n        gl.lineWidth(1);\n        gl.enable(WEBGL.BLEND);\n        gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE);\n    }\n};\n\nvar EllipseShader$ = {};\n\nregisterType(\"EllipseShader\", [EllipseShader, EllipseShader$, null]);\n\n\n// wwtlib.ModelShader\n\nexport function ModelShader() { }\n\nModelShader.vertLoc = 0;\nModelShader.normalLoc = 0;\nModelShader.textureLoc = 0;\nModelShader.initialized = false;\nModelShader._prog = null;\nModelShader.sunPosition = Vector3d.create(-1, -1, -1);\nModelShader.minLightingBrightness = 1;\nModelShader.atmosphereColor = Color.fromArgb(0, 0, 0, 0);\n\nModelShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision mediump float;\n\n        varying vec2 vTextureCoord;\n        varying vec3 vNormal;\n        varying vec3 vCamVector;\n\n        uniform sampler2D uSampler;\n        uniform float opacity;\n        uniform vec3 uSunPosition;\n        uniform float uMinBrightness;\n        uniform vec3 uAtmosphereColor;\n\n        void main(void) {\n            vec3 normal = normalize(vNormal);\n            vec3 camVN = normalize(vCamVector);\n            vec3 cam = normalize(vec3(0.0,0.0,-1.0));\n            float dt = uMinBrightness + pow(max(0.0,- dot(normal,uSunPosition)),0.5);\n            float atm = max(0.0, 1.0 - 2.5 * dot(cam,camVN)) + 0.3 * dt;\n            atm = (dt > uMinBrightness) ? atm : 0.0;\n            if ( uMinBrightness == 1.0 ) { dt = 1.0; atm= 0.0; }\n            vec4 col = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n            gl_FragColor = col * opacity;\n            gl_FragColor.rgb *= dt;\n            gl_FragColor.rgb += atm * uAtmosphereColor;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n        attribute vec3 aNormal;\n        attribute vec2 aTextureCoord;\n\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n\n        varying vec2 vTextureCoord;\n        varying vec3 vNormal;\n        varying vec3 vCamVector;\n\n        void main(void) {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            vCamVector = normalize((mat3(uMVMatrix) * aVertexPosition).xyz);\n            vec3 normalT = normalize(mat3(uMVMatrix) * aNormal);\n            vTextureCoord = aTextureCoord;\n            vNormal = normalT;\n        }\n    `;\n\n    ModelShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(ModelShader._frag, fragShaderText);\n    gl.compileShader(ModelShader._frag);\n    var stat = gl.getShaderParameter(ModelShader._frag, WEBGL.COMPILE_STATUS);\n    if (!stat) {\n        var errorF = gl.getShaderInfoLog(ModelShader._frag);\n    }\n    ModelShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(ModelShader._vert, vertexShaderText);\n    gl.compileShader(ModelShader._vert);\n    var stat1 = gl.getShaderParameter(ModelShader._vert, WEBGL.COMPILE_STATUS);\n    if (!stat1) {\n        var errorV = gl.getShaderInfoLog(ModelShader._vert);\n    }\n    ModelShader._prog = gl.createProgram();\n    gl.attachShader(ModelShader._prog, ModelShader._vert);\n    gl.attachShader(ModelShader._prog, ModelShader._frag);\n    gl.linkProgram(ModelShader._prog);\n    var errcode = gl.getProgramParameter(ModelShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(ModelShader._prog);\n    ModelShader.vertLoc = gl.getAttribLocation(ModelShader._prog, 'aVertexPosition');\n    ModelShader.normalLoc = gl.getAttribLocation(ModelShader._prog, 'aNormal');\n    ModelShader.textureLoc = gl.getAttribLocation(ModelShader._prog, 'aTextureCoord');\n    ModelShader.projMatLoc = gl.getUniformLocation(ModelShader._prog, 'uPMatrix');\n    ModelShader.mvMatLoc = gl.getUniformLocation(ModelShader._prog, 'uMVMatrix');\n    ModelShader.sampLoc = gl.getUniformLocation(ModelShader._prog, 'uSampler');\n    ModelShader.sunLoc = gl.getUniformLocation(ModelShader._prog, 'uSunPosition');\n    ModelShader.minBrightnessLoc = gl.getUniformLocation(ModelShader._prog, 'uMinBrightness');\n    ModelShader.opacityLoc = gl.getUniformLocation(ModelShader._prog, 'opacity');\n    ModelShader.atmosphereColorLoc = gl.getUniformLocation(ModelShader._prog, 'uAtmosphereColor');\n    set_tileUvMultiple(1);\n    set_tileDemEnabled(true);\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    ModelShader.initialized = true;\n};\n\nModelShader.use = function (renderContext, vertex, index, texture, opacity, noDepth, stride) {\n    if (texture == null) {\n        texture = Texture.getEmpty();\n    }\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!ModelShader.initialized) {\n            ModelShader.init(renderContext);\n        }\n        gl.useProgram(ModelShader._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniform1f(ModelShader.opacityLoc, opacity);\n        gl.uniform1f(ModelShader.minBrightnessLoc, (renderContext.lighting) ? ModelShader.minLightingBrightness : 1);\n        if (renderContext.lighting) {\n            gl.uniform3f(ModelShader.atmosphereColorLoc, ModelShader.atmosphereColor.r / 255, ModelShader.atmosphereColor.g / 255, ModelShader.atmosphereColor.b / 255);\n        } else {\n            gl.uniform3f(ModelShader.atmosphereColorLoc, 0, 0, 0);\n        }\n        gl.uniformMatrix4fv(ModelShader.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(ModelShader.projMatLoc, false, renderContext.get_projection().floatArray());\n        ModelShader.sunPosition.normalize();\n        var mvInv = renderContext.get_view().clone();\n        mvInv.set_m41(0);\n        mvInv.set_m42(0);\n        mvInv.set_m43(0);\n        mvInv.set_m44(1);\n        var sp = Vector3d._transformCoordinate(ModelShader.sunPosition, mvInv);\n        sp.normalize();\n        gl.uniform3f(ModelShader.sunLoc, sp.x, sp.y, sp.z);\n        gl.uniform1i(ModelShader.sampLoc, 0);\n        if (renderContext.space || noDepth) {\n            gl.disable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.enable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.enableVertexAttribArray(ModelShader.vertLoc);\n        gl.enableVertexAttribArray(ModelShader.normalLoc);\n        gl.enableVertexAttribArray(ModelShader.textureLoc);\n        gl.vertexAttribPointer(ModelShader.vertLoc, 3, WEBGL.FLOAT, false, stride, 0);\n        gl.vertexAttribPointer(ModelShader.normalLoc, 3, WEBGL.FLOAT, false, stride, 12);\n        gl.vertexAttribPointer(ModelShader.textureLoc, 2, WEBGL.FLOAT, false, stride, stride - 8);\n        gl.activeTexture(WEBGL.TEXTURE0);\n        gl.bindTexture(WEBGL.TEXTURE_2D, texture);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, index);\n        gl.enable(WEBGL.BLEND);\n        if (noDepth) {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE);\n        } else {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n        }\n    }\n};\n\nvar ModelShader$ = {};\n\nregisterType(\"ModelShader\", [ModelShader, ModelShader$, null]);\n\n\n// wwtlib.ModelShaderTan\n\nexport function ModelShaderTan() { }\n\nModelShaderTan.vertLoc = 0;\nModelShaderTan.normalLoc = 0;\nModelShaderTan.textureLoc = 0;\nModelShaderTan.initialized = false;\nModelShaderTan._prog = null;\nModelShaderTan.sunPosition = Vector3d.create(-1, -1, -1);\nModelShaderTan.minLightingBrightness = 1;\nModelShaderTan.atmosphereColor = Color.fromArgb(0, 0, 0, 0);\n\nModelShaderTan.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision mediump float;\n\n        varying vec2 vTextureCoord;\n        varying vec3 vNormal;\n        varying vec3 vCamVector;\n\n        uniform sampler2D uSampler;\n        uniform float opacity;\n        uniform vec3 uSunPosition;\n        uniform float uMinBrightness;\n        uniform vec3 uAtmosphereColor;\n\n        void main(void) {\n            vec3 normal = normalize(vNormal);\n            vec3 camVN = normalize(vCamVector);\n            vec3 cam = normalize(vec3(0.0,0.0,-1.0));\n            float dt = uMinBrightness + pow(max(0.0,- dot(normal,uSunPosition)),0.5);\n            float atm = max(0.0, 1.0 - 2.5 * dot(cam,camVN)) + 0.3 * dt;\n            atm = (dt > uMinBrightness) ? atm : 0.0;\n            if ( uMinBrightness == 1.0 ) { dt = 1.0; atm= 0.0; }\n            vec4 col = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n            gl_FragColor = col * opacity;\n            gl_FragColor.rgb *= dt;\n            gl_FragColor.rgb += atm * uAtmosphereColor;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n        attribute vec3 aNormal;\n        attribute vec2 aTextureCoord;\n\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n\n        varying vec2 vTextureCoord;\n        varying vec3 vNormal;\n        varying vec3 vCamVector;\n\n        void main(void) {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            vCamVector = normalize((mat3(uMVMatrix) * aVertexPosition).xyz);\n            vec3 normalT = normalize(mat3(uMVMatrix) * aNormal);\n            vTextureCoord = aTextureCoord;\n            vNormal = normalT;\n        }\n    `;\n\n    ModelShaderTan._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(ModelShaderTan._frag, fragShaderText);\n    gl.compileShader(ModelShaderTan._frag);\n    var stat = gl.getShaderParameter(ModelShaderTan._frag, WEBGL.COMPILE_STATUS);\n    if (!stat) {\n        var errorF = gl.getShaderInfoLog(ModelShaderTan._frag);\n    }\n    ModelShaderTan._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(ModelShaderTan._vert, vertexShaderText);\n    gl.compileShader(ModelShaderTan._vert);\n    var stat1 = gl.getShaderParameter(ModelShaderTan._vert, WEBGL.COMPILE_STATUS);\n    if (!stat1) {\n        var errorV = gl.getShaderInfoLog(ModelShaderTan._vert);\n    }\n    ModelShaderTan._prog = gl.createProgram();\n    gl.attachShader(ModelShaderTan._prog, ModelShaderTan._vert);\n    gl.attachShader(ModelShaderTan._prog, ModelShaderTan._frag);\n    gl.linkProgram(ModelShaderTan._prog);\n    var errcode = gl.getProgramParameter(ModelShaderTan._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(ModelShaderTan._prog);\n    ModelShaderTan.vertLoc = gl.getAttribLocation(ModelShaderTan._prog, 'aVertexPosition');\n    ModelShaderTan.normalLoc = gl.getAttribLocation(ModelShaderTan._prog, 'aNormal');\n    ModelShaderTan.textureLoc = gl.getAttribLocation(ModelShaderTan._prog, 'aTextureCoord');\n    ModelShaderTan.projMatLoc = gl.getUniformLocation(ModelShaderTan._prog, 'uPMatrix');\n    ModelShaderTan.mvMatLoc = gl.getUniformLocation(ModelShaderTan._prog, 'uMVMatrix');\n    ModelShaderTan.sampLoc = gl.getUniformLocation(ModelShaderTan._prog, 'uSampler');\n    ModelShaderTan.sunLoc = gl.getUniformLocation(ModelShaderTan._prog, 'uSunPosition');\n    ModelShaderTan.minBrightnessLoc = gl.getUniformLocation(ModelShaderTan._prog, 'uMinBrightness');\n    ModelShaderTan.opacityLoc = gl.getUniformLocation(ModelShaderTan._prog, 'opacity');\n    ModelShaderTan.atmosphereColorLoc = gl.getUniformLocation(ModelShaderTan._prog, 'uAtmosphereColor');\n    set_tileUvMultiple(1);\n    set_tileDemEnabled(true);\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    ModelShaderTan.initialized = true;\n};\n\nModelShaderTan.use = function (renderContext, vertex, index, texture, opacity, noDepth, stride) {\n    if (texture == null) {\n        texture = Texture.getEmpty();\n    }\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!ModelShaderTan.initialized) {\n            ModelShaderTan.init(renderContext);\n        }\n        gl.useProgram(ModelShaderTan._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniform1f(ModelShaderTan.opacityLoc, opacity);\n        gl.uniform1f(ModelShaderTan.minBrightnessLoc, (renderContext.lighting) ? ModelShaderTan.minLightingBrightness : 1);\n        if (renderContext.lighting) {\n            gl.uniform3f(ModelShaderTan.atmosphereColorLoc, ModelShaderTan.atmosphereColor.r / 255, ModelShaderTan.atmosphereColor.g / 255, ModelShaderTan.atmosphereColor.b / 255);\n        } else {\n            gl.uniform3f(ModelShaderTan.atmosphereColorLoc, 0, 0, 0);\n        }\n        gl.uniformMatrix4fv(ModelShaderTan.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(ModelShaderTan.projMatLoc, false, renderContext.get_projection().floatArray());\n        ModelShaderTan.sunPosition.normalize();\n        var mvInv = renderContext.get_view().clone();\n        mvInv.set_m41(0);\n        mvInv.set_m42(0);\n        mvInv.set_m43(0);\n        mvInv.set_m44(1);\n        var sp = Vector3d._transformCoordinate(ModelShaderTan.sunPosition, mvInv);\n        sp.normalize();\n        gl.uniform3f(ModelShaderTan.sunLoc, -sp.x, -sp.y, -sp.z);\n        gl.uniform1i(ModelShaderTan.sampLoc, 0);\n        if (renderContext.space || noDepth) {\n            gl.disable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.enable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.enableVertexAttribArray(ModelShaderTan.vertLoc);\n        gl.enableVertexAttribArray(ModelShaderTan.normalLoc);\n        gl.enableVertexAttribArray(ModelShaderTan.textureLoc);\n        gl.vertexAttribPointer(ModelShaderTan.vertLoc, 3, WEBGL.FLOAT, false, stride, 0);\n        gl.vertexAttribPointer(ModelShaderTan.normalLoc, 3, WEBGL.FLOAT, false, stride, 12);\n        gl.vertexAttribPointer(ModelShaderTan.textureLoc, 2, WEBGL.FLOAT, false, stride, stride - 8);\n        gl.activeTexture(WEBGL.TEXTURE0);\n        gl.bindTexture(WEBGL.TEXTURE_2D, texture);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, index);\n        gl.enable(WEBGL.BLEND);\n        if (noDepth) {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE);\n        } else {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n        }\n    }\n};\n\nvar ModelShaderTan$ = {};\n\nregisterType(\"ModelShaderTan\", [ModelShaderTan, ModelShaderTan$, null]);\n\n\n// wwtlib.TileShader\n\nexport function TileShader() { }\n\nTileShader.vertLoc = 0;\nTileShader.textureLoc = 0;\nTileShader.initialized = false;\nTileShader._prog = null;\nTileShader.sunPosition = Vector3d.create(-1, -1, -1);\nTileShader.minLightingBrightness = 1;\nTileShader.atmosphereColor = Color.fromArgb(0, 0, 0, 0);\n\nTileShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision mediump float;\n\n        varying vec2 vTextureCoord;\n        varying vec3 vNormal;\n        varying vec3 vCamVector;\n\n        uniform sampler2D uSampler;\n        uniform float opacity;\n        uniform vec3 uSunPosition;\n        uniform float uMinBrightness;\n        uniform vec3 uAtmosphereColor;\n\n        void main(void) {\n            vec3 normal = normalize(vNormal);\n            vec3 camVN = normalize(vCamVector);\n            vec3 cam = normalize(vec3(0.0,0.0,-1.0));\n            float dt = uMinBrightness + pow(max(0.0,- dot(normal,uSunPosition)),0.5);\n            float atm = max(0.0, 1.0 - 2.5 * dot(cam,camVN)) + 0.3 * dt;\n            atm = (dt > uMinBrightness) ? atm : 0.0;\n            if ( uMinBrightness == 1.0 ) { dt = 1.0; atm = 0.0; }\n            vec4 col = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n            gl_FragColor = col * opacity;\n            gl_FragColor.rgb *= dt;\n            gl_FragColor.rgb += atm * uAtmosphereColor;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n        attribute vec2 aTextureCoord;\n\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n        uniform vec3 uCenterScreen;\n        uniform vec3 uCenterWorld;\n\n        varying vec2 vTextureCoord;\n        varying vec3 vNormal;\n        varying vec3 vCamVector;\n\n        void main(void) {\n            vec3 normal;\n\n            if (length(uCenterWorld) > 0.00001) {\n                gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 0.0) + vec4(uCenterScreen, 1.0);\n                vCamVector = normalize((mat3(uMVMatrix) * (aVertexPosition + uCenterWorld)).xyz);\n                normal = normalize(aVertexPosition + uCenterWorld);\n            } else {\n                gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n                vCamVector = normalize((mat3(uMVMatrix) * aVertexPosition).xyz);\n                normal = normalize(aVertexPosition);\n            }\n\n            vec3 normalT = normalize(mat3(uMVMatrix) * normal);\n            vTextureCoord = aTextureCoord;\n            vNormal = normalT;\n        }\n    `;\n\n    TileShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(TileShader._frag, fragShaderText);\n    gl.compileShader(TileShader._frag);\n    var stat = gl.getShaderParameter(TileShader._frag, WEBGL.COMPILE_STATUS);\n    if (!stat) {\n        var errorF = gl.getShaderInfoLog(TileShader._frag);\n    }\n    TileShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(TileShader._vert, vertexShaderText);\n    gl.compileShader(TileShader._vert);\n    var stat1 = gl.getShaderParameter(TileShader._vert, WEBGL.COMPILE_STATUS);\n    if (!stat1) {\n        var errorV = gl.getShaderInfoLog(TileShader._vert);\n    }\n    TileShader._prog = gl.createProgram();\n    gl.attachShader(TileShader._prog, TileShader._vert);\n    gl.attachShader(TileShader._prog, TileShader._frag);\n    gl.linkProgram(TileShader._prog);\n    var errcode = gl.getProgramParameter(TileShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(TileShader._prog);\n    TileShader.vertLoc = gl.getAttribLocation(TileShader._prog, 'aVertexPosition');\n    TileShader.textureLoc = gl.getAttribLocation(TileShader._prog, 'aTextureCoord');\n    TileShader.projMatLoc = gl.getUniformLocation(TileShader._prog, 'uPMatrix');\n    TileShader.mvMatLoc = gl.getUniformLocation(TileShader._prog, 'uMVMatrix');\n    TileShader.sampLoc = gl.getUniformLocation(TileShader._prog, 'uSampler');\n    TileShader.centerScreenLoc = gl.getUniformLocation(TileShader._prog, 'uCenterScreen');\n    TileShader.centerWorldLoc = gl.getUniformLocation(TileShader._prog, 'uCenterWorld');\n    TileShader.sunLoc = gl.getUniformLocation(TileShader._prog, 'uSunPosition');\n    TileShader.minBrightnessLoc = gl.getUniformLocation(TileShader._prog, 'uMinBrightness');\n    TileShader.opacityLoc = gl.getUniformLocation(TileShader._prog, 'opacity');\n    TileShader.atmosphereColorLoc = gl.getUniformLocation(TileShader._prog, 'uAtmosphereColor');\n    set_tileUvMultiple(1);\n    set_tileDemEnabled(true);\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    TileShader.initialized = true;\n};\n\nTileShader.use = function (renderContext, vertex, index, texture, opacity, noDepth, centerWorld) {\n    if (texture == null) {\n        texture = Texture.getEmpty();\n    }\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!TileShader.initialized) {\n            TileShader.init(renderContext);\n        }\n        gl.useProgram(TileShader._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniform1f(TileShader.opacityLoc, opacity);\n        gl.uniform1f(TileShader.minBrightnessLoc, (renderContext.lighting) ? TileShader.minLightingBrightness : 1);\n        if (renderContext.lighting) {\n            gl.uniform3f(TileShader.atmosphereColorLoc, TileShader.atmosphereColor.r / 255, TileShader.atmosphereColor.g / 255, TileShader.atmosphereColor.b / 255);\n        } else {\n            gl.uniform3f(TileShader.atmosphereColorLoc, 0, 0, 0);\n        }\n        gl.uniform3f(TileShader.centerWorldLoc, centerWorld.x, centerWorld.y, centerWorld.z);\n\n        // \"This would be clearer by making the 'centerWorld' parameter optional. Unfortunately, that's not allowed in C# 2.0\"\n        if (centerWorld.lengthSq() > 0.001) {\n            var wvp = Matrix3d.multiplyMatrix(mvMat, renderContext.get_projection());\n            var centerScreen = wvp.transform(centerWorld);\n            gl.uniform3f(TileShader.centerScreenLoc, centerScreen.x, centerScreen.y, centerScreen.z);\n        } else {\n            gl.uniform3f(TileShader.centerScreenLoc, 0, 0, 0);\n        }\n        gl.uniformMatrix4fv(TileShader.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(TileShader.projMatLoc, false, renderContext.get_projection().floatArray());\n        TileShader.sunPosition.normalize();\n        var mvInv = renderContext.get_view().clone();\n        mvInv.set_m41(0);\n        mvInv.set_m42(0);\n        mvInv.set_m43(0);\n        mvInv.set_m44(1);\n        var sp = Vector3d._transformCoordinate(TileShader.sunPosition, mvInv);\n        sp.normalize();\n        gl.uniform3f(TileShader.sunLoc, -sp.x, -sp.y, -sp.z);\n        gl.uniform1i(TileShader.sampLoc, 0);\n        if (renderContext.space || noDepth) {\n            gl.disable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.enable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.enableVertexAttribArray(TileShader.vertLoc);\n        gl.enableVertexAttribArray(TileShader.textureLoc);\n        gl.vertexAttribPointer(TileShader.vertLoc, 3, WEBGL.FLOAT, false, 20, 0);\n        gl.vertexAttribPointer(TileShader.textureLoc, 2, WEBGL.FLOAT, false, 20, 12);\n        gl.activeTexture(WEBGL.TEXTURE0);\n        gl.bindTexture(WEBGL.TEXTURE_2D, texture);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, index);\n        gl.enable(WEBGL.BLEND);\n        if (noDepth) {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE);\n        } else {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n        }\n    }\n};\n\nvar TileShader$ = {};\n\nregisterType(\"TileShader\", [TileShader, TileShader$, null]);\n\n\n// wwtlib.FitsShader\n\nexport function FitsShader() { }\n\nFitsShader.vertLoc = 0;\nFitsShader.textureLoc = 0;\nFitsShader.initialized = false;\nFitsShader._prog = null;\nFitsShader.blankValue = 0;\nFitsShader.bScale = 1;\nFitsShader.bZero = 0;\nFitsShader.min = 0;\nFitsShader.max = 0;\nFitsShader.transparentBlack = false;\nFitsShader.containsBlanks = false;\nFitsShader.scaleType = 0;\n\nFitsShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        #version 300 es\n\n        precision mediump float;\n        in vec2 vTextureCoord;\n        in vec3 vNormal;\n        in vec3 vCamVector;\n        out vec4 fragmentColor;\n\n        uniform sampler2D uSampler;\n        uniform sampler2D colorSampler;\n        uniform float blank;\n        uniform float bzero;\n        uniform float bscale;\n        uniform float min;\n        uniform float max;\n        uniform bool containsBlanks;\n        uniform bool transparentBlack;\n        uniform int scaleType;\n        uniform float opacity;\n\n        bool isNaN(float value) {\n            // See https://stackoverflow.com/questions/9446888/best-way-to-detect-nans-in-opengl-shaders\n            // PKGW also finds that we need \"value != value\" on his Dell laptop running\n            // Chrome on Linux.\n            return (value != value) || !(value < 0.0 || 0.0 < value || value == 0.0);\n        }\n\n        void main(void) {\n            //FITS images are flipped on the y axis\n            vec4 color = texture(uSampler, vec2(vTextureCoord.x, 1.0 - vTextureCoord.y));\n\n            if(isNaN(color.r) || (containsBlanks && abs(blank - color.r) < 0.00000001)){\n                fragmentColor = vec4(0.0, 0.0, 0.0, 0.0);\n            } else {\n                float physicalValue = (bzero + bscale * color.r - min) / (max - min);\n                if(transparentBlack && physicalValue <= 0.0){\n                    fragmentColor = vec4(0.0, 0.0, 0.0, 0.0);\n                    return;\n                }\n\n                physicalValue = clamp(physicalValue, 0.0, 1.0);\n\n                switch(scaleType){\n                    case 1:\n                        physicalValue = log(physicalValue * 255.0 + 1.0 ) / log(256.0);\n                        break;\n                    case 2:\n                        physicalValue = physicalValue * physicalValue;\n                        break;\n                    case 3:\n                        physicalValue = sqrt(physicalValue);\n                        break;\n                }\n                vec4 colorFromColorMapper = texture(colorSampler, vec2(physicalValue, 0.5));\n                fragmentColor = vec4(colorFromColorMapper.rgb, opacity);\n            }\n        }\n    `;\n\n    const vertexShaderText = `\\\n        #version 300 es\n\n        in vec3 aVertexPosition;\n        in vec2 aTextureCoord;\n\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n        uniform vec3 uCenterScreen;\n\n        out vec2 vTextureCoord;\n\n        void main(void) {\n            if(length(uCenterScreen) > 0.0000001) {\n                gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 0.0) + vec4(uCenterScreen, 1.0);\n            } else {\n                gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            }\n\n            vTextureCoord = aTextureCoord;\n        }\n    `;\n\n    FitsShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(FitsShader._frag, fragShaderText);\n    gl.compileShader(FitsShader._frag);\n    var stat = gl.getShaderParameter(FitsShader._frag, WEBGL.COMPILE_STATUS);\n    if (!stat) {\n        var errorF = gl.getShaderInfoLog(FitsShader._frag);\n        console.log(errorF);\n    }\n    FitsShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(FitsShader._vert, vertexShaderText);\n    gl.compileShader(FitsShader._vert);\n    var stat1 = gl.getShaderParameter(FitsShader._vert, WEBGL.COMPILE_STATUS);\n    if (!stat1) {\n        var errorV = gl.getShaderInfoLog(FitsShader._vert);\n        console.log(errorV);\n    }\n    FitsShader._prog = gl.createProgram();\n    gl.attachShader(FitsShader._prog, FitsShader._vert);\n    gl.attachShader(FitsShader._prog, FitsShader._frag);\n    gl.linkProgram(FitsShader._prog);\n    var errcode = gl.getProgramParameter(FitsShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(FitsShader._prog);\n    FitsShader.vertLoc = gl.getAttribLocation(FitsShader._prog, 'aVertexPosition');\n    FitsShader.textureLoc = gl.getAttribLocation(FitsShader._prog, 'aTextureCoord');\n    FitsShader.projMatLoc = gl.getUniformLocation(FitsShader._prog, 'uPMatrix');\n    FitsShader.mvMatLoc = gl.getUniformLocation(FitsShader._prog, 'uMVMatrix');\n    FitsShader.sampLoc = gl.getUniformLocation(FitsShader._prog, 'uSampler');\n    FitsShader.colorLoc = gl.getUniformLocation(FitsShader._prog, 'colorSampler');\n    FitsShader.centerScreenLoc = gl.getUniformLocation(FitsShader._prog, 'uCenterScreen');\n    FitsShader.blank = gl.getUniformLocation(FitsShader._prog, 'blank');\n    FitsShader.bzero = gl.getUniformLocation(FitsShader._prog, 'bzero');\n    FitsShader.bscale = gl.getUniformLocation(FitsShader._prog, 'bscale');\n    FitsShader.minLoc = gl.getUniformLocation(FitsShader._prog, 'min');\n    FitsShader.maxLoc = gl.getUniformLocation(FitsShader._prog, 'max');\n    FitsShader.transparentBlackLoc = gl.getUniformLocation(FitsShader._prog, 'transparentBlack');\n    FitsShader.containsBlanksLoc = gl.getUniformLocation(FitsShader._prog, 'containsBlanks');\n    FitsShader.scalingLocation = gl.getUniformLocation(FitsShader._prog, 'scaleType');\n    FitsShader.opacityLoc = gl.getUniformLocation(FitsShader._prog, 'opacity');\n    set_tileUvMultiple(1);\n    set_tileDemEnabled(true);\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    FitsShader.initialized = true;\n};\n\nFitsShader.use = function (renderContext, vertex, index, texture, opacity, noDepth, centerWorld) {\n    if (texture == null) {\n        texture = Texture.getEmpty();\n    }\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!FitsShader.initialized) {\n            FitsShader.init(renderContext);\n        }\n        gl.useProgram(FitsShader._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniform1f(FitsShader.opacityLoc, opacity);\n        gl.uniformMatrix4fv(FitsShader.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(FitsShader.projMatLoc, false, renderContext.get_projection().floatArray());\n\n        // \"This would be clearer by making the 'centerWorld' parameter optional. Unfortunately, that's not allowed in C# 2.0\"\n        if (centerWorld.lengthSq() > 0.001) {\n            var wvp = Matrix3d.multiplyMatrix(mvMat, renderContext.get_projection());\n            var centerScreen = wvp.transform(centerWorld);\n            gl.uniform3f(FitsShader.centerScreenLoc, centerScreen.x, centerScreen.y, centerScreen.z);\n        } else {\n            gl.uniform3f(FitsShader.centerScreenLoc, 0, 0, 0);\n        }\n\n        gl.uniform1i(FitsShader.sampLoc, 0);\n        gl.uniform1i(FitsShader.colorLoc, 1);\n        gl.uniform1f(FitsShader.blank, FitsShader.blankValue);\n        gl.uniform1f(FitsShader.bzero, FitsShader.bZero);\n        gl.uniform1f(FitsShader.bscale, FitsShader.bScale);\n        gl.uniform1f(FitsShader.minLoc, FitsShader.min);\n        gl.uniform1f(FitsShader.maxLoc, FitsShader.max);\n        gl.uniform1i(FitsShader.transparentBlackLoc, FitsShader.transparentBlack);\n        gl.uniform1i(FitsShader.containsBlanksLoc, FitsShader.containsBlanks);\n        gl.uniform1i(FitsShader.scalingLocation, FitsShader.scaleType);\n        if (renderContext.space || noDepth) {\n            gl.disable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.enable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.enableVertexAttribArray(FitsShader.vertLoc);\n        gl.enableVertexAttribArray(FitsShader.textureLoc);\n        gl.vertexAttribPointer(FitsShader.vertLoc, 3, WEBGL.FLOAT, false, 20, 0);\n        gl.vertexAttribPointer(FitsShader.textureLoc, 2, WEBGL.FLOAT, false, 20, 12);\n        gl.activeTexture(WEBGL.TEXTURE0);\n        gl.bindTexture(WEBGL.TEXTURE_2D, texture);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, index);\n        gl.enable(WEBGL.BLEND);\n        if (noDepth) {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE);\n        } else {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n        }\n    }\n};\n\nvar FitsShader$ = {};\n\nregisterType(\"FitsShader\", [FitsShader, FitsShader$, null]);\n\n\n// wwtlib.ImageShader\n\nexport function ImageShader() { }\n\nImageShader.vertLoc = 0;\nImageShader.textureLoc = 0;\nImageShader.initialized = false;\nImageShader._prog = null;\n\nImageShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision mediump float;\n\n        varying vec2 vTextureCoord;\n\n        uniform sampler2D uSampler;\n        uniform float opacity;\n\n        void main(void) {\n            vec4 col = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n            gl_FragColor = col * opacity;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n        attribute vec2 aTextureCoord;\n\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n\n        varying vec2 vTextureCoord;\n        varying vec3 vNormal;\n        varying vec3 vCamVector;\n\n        void main(void) {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            vTextureCoord = aTextureCoord;\n        }\n    `;\n\n    ImageShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(ImageShader._frag, fragShaderText);\n    gl.compileShader(ImageShader._frag);\n    var stat = gl.getShaderParameter(ImageShader._frag, WEBGL.COMPILE_STATUS);\n    if (!stat) {\n        var errorF = gl.getShaderInfoLog(ImageShader._frag);\n    }\n    ImageShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(ImageShader._vert, vertexShaderText);\n    gl.compileShader(ImageShader._vert);\n    var stat1 = gl.getShaderParameter(ImageShader._vert, WEBGL.COMPILE_STATUS);\n    if (!stat1) {\n        var errorV = gl.getShaderInfoLog(ImageShader._vert);\n    }\n    ImageShader._prog = gl.createProgram();\n    gl.attachShader(ImageShader._prog, ImageShader._vert);\n    gl.attachShader(ImageShader._prog, ImageShader._frag);\n    gl.linkProgram(ImageShader._prog);\n    var errcode = gl.getProgramParameter(ImageShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(ImageShader._prog);\n    ImageShader.vertLoc = gl.getAttribLocation(ImageShader._prog, 'aVertexPosition');\n    ImageShader.textureLoc = gl.getAttribLocation(ImageShader._prog, 'aTextureCoord');\n    ImageShader.projMatLoc = gl.getUniformLocation(ImageShader._prog, 'uPMatrix');\n    ImageShader.mvMatLoc = gl.getUniformLocation(ImageShader._prog, 'uMVMatrix');\n    ImageShader.sampLoc = gl.getUniformLocation(ImageShader._prog, 'uSampler');\n    ImageShader.opacityLoc = gl.getUniformLocation(ImageShader._prog, 'opacity');\n    set_tileUvMultiple(1);\n    set_tileDemEnabled(true);\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    ImageShader.initialized = true;\n};\n\nImageShader.use = function (renderContext, vertex, index, texture, opacity, noDepth) {\n    if (texture == null) {\n        texture = Texture.getEmpty();\n    }\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!ImageShader.initialized) {\n            ImageShader.init(renderContext);\n        }\n        gl.useProgram(ImageShader._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniform1f(ImageShader.opacityLoc, opacity);\n        gl.uniformMatrix4fv(ImageShader.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(ImageShader.projMatLoc, false, renderContext.get_projection().floatArray());\n        gl.uniform1i(ImageShader.sampLoc, 0);\n        if (renderContext.space || noDepth) {\n            gl.disable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.enable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.enableVertexAttribArray(ImageShader.vertLoc);\n        gl.enableVertexAttribArray(ImageShader.textureLoc);\n        gl.vertexAttribPointer(ImageShader.vertLoc, 3, WEBGL.FLOAT, false, 20, 0);\n        gl.vertexAttribPointer(ImageShader.textureLoc, 2, WEBGL.FLOAT, false, 20, 12);\n        gl.activeTexture(WEBGL.TEXTURE0);\n        gl.bindTexture(WEBGL.TEXTURE_2D, texture);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, index);\n        gl.enable(WEBGL.BLEND);\n        if (noDepth) {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE);\n        } else {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n        }\n    }\n};\n\nvar ImageShader$ = {};\n\nregisterType(\"ImageShader\", [ImageShader, ImageShader$, null]);\n\n\n// wwtlib.ImageShader2\n\nexport function ImageShader2() { }\n\nImageShader2.vertLoc = 0;\nImageShader2.textureLoc = 0;\nImageShader2.initialized = false;\nImageShader2._prog = null;\n\nImageShader2.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision mediump float;\n\n        varying vec2 vTextureCoord;\n\n        uniform sampler2D uSampler;\n        uniform float opacity;\n\n        void main(void) {\n            vec4 col = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n            gl_FragColor = col * opacity;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n        attribute vec2 aTextureCoord;\n\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n\n        varying vec2 vTextureCoord;\n        varying vec3 vNormal;\n        varying vec3 vCamVector;\n\n        void main(void) {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            vTextureCoord = aTextureCoord;\n        }\n    `;\n\n    ImageShader2._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(ImageShader2._frag, fragShaderText);\n    gl.compileShader(ImageShader2._frag);\n    var stat = gl.getShaderParameter(ImageShader2._frag, WEBGL.COMPILE_STATUS);\n    if (!stat) {\n        var errorF = gl.getShaderInfoLog(ImageShader2._frag);\n    }\n    ImageShader2._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(ImageShader2._vert, vertexShaderText);\n    gl.compileShader(ImageShader2._vert);\n    var stat1 = gl.getShaderParameter(ImageShader2._vert, WEBGL.COMPILE_STATUS);\n    if (!stat1) {\n        var errorV = gl.getShaderInfoLog(ImageShader2._vert);\n    }\n    ImageShader2._prog = gl.createProgram();\n    gl.attachShader(ImageShader2._prog, ImageShader2._vert);\n    gl.attachShader(ImageShader2._prog, ImageShader2._frag);\n    gl.linkProgram(ImageShader2._prog);\n    var errcode = gl.getProgramParameter(ImageShader2._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(ImageShader2._prog);\n    ImageShader2.vertLoc = gl.getAttribLocation(ImageShader2._prog, 'aVertexPosition');\n    ImageShader2.textureLoc = gl.getAttribLocation(ImageShader2._prog, 'aTextureCoord');\n    ImageShader2.projMatLoc = gl.getUniformLocation(ImageShader2._prog, 'uPMatrix');\n    ImageShader2.mvMatLoc = gl.getUniformLocation(ImageShader2._prog, 'uMVMatrix');\n    ImageShader2.sampLoc = gl.getUniformLocation(ImageShader2._prog, 'uSampler');\n    ImageShader2.opacityLoc = gl.getUniformLocation(ImageShader2._prog, 'opacity');\n    set_tileUvMultiple(1);\n    set_tileDemEnabled(true);\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    ImageShader2.initialized = true;\n};\n\nImageShader2.use = function (renderContext, vertex, index, texture, opacity, noDepth) {\n    if (texture == null) {\n        texture = Texture.getEmpty();\n    }\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!ImageShader2.initialized) {\n            ImageShader2.init(renderContext);\n        }\n        gl.useProgram(ImageShader2._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniform1f(ImageShader2.opacityLoc, opacity);\n        gl.uniformMatrix4fv(ImageShader2.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(ImageShader2.projMatLoc, false, renderContext.get_projection().floatArray());\n        gl.uniform1i(ImageShader2.sampLoc, 0);\n        if (renderContext.space || noDepth) {\n            gl.disable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.enable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.enableVertexAttribArray(ImageShader2.vertLoc);\n        gl.enableVertexAttribArray(ImageShader2.textureLoc);\n        gl.vertexAttribPointer(ImageShader2.vertLoc, 3, WEBGL.FLOAT, false, 32, 0);\n        gl.vertexAttribPointer(ImageShader2.textureLoc, 2, WEBGL.FLOAT, false, 32, 24);\n        gl.activeTexture(WEBGL.TEXTURE0);\n        gl.bindTexture(WEBGL.TEXTURE_2D, texture);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, index);\n        gl.enable(WEBGL.BLEND);\n        if (noDepth) {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE);\n        } else {\n            gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n        }\n    }\n};\n\nvar ImageShader2$ = {};\n\nregisterType(\"ImageShader2\", [ImageShader2, ImageShader2$, null]);\n\n\n// wwtlib.SpriteShader\n\nexport function SpriteShader() { }\n\nSpriteShader.vertLoc = 0;\nSpriteShader.textureLoc = 0;\nSpriteShader.colorLoc = 0;\nSpriteShader.initialized = false;\nSpriteShader._prog = null;\n\nSpriteShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision mediump float;\n\n        varying vec2 vTextureCoord;\n        varying lowp vec4 vColor;\n        uniform sampler2D uSampler;\n\n        void main(void) {\n            gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t)) * vColor;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n        attribute vec2 aTextureCoord;\n        attribute lowp vec4 aColor;\n\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n\n        varying vec2 vTextureCoord;\n        varying vec4 vColor;\n\n        void main(void) {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            vTextureCoord = aTextureCoord;\n            vColor = aColor;\n        }\n    `;\n\n    SpriteShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(SpriteShader._frag, fragShaderText);\n    gl.compileShader(SpriteShader._frag);\n    var stat = gl.getShaderParameter(SpriteShader._frag, WEBGL.COMPILE_STATUS);\n    SpriteShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(SpriteShader._vert, vertexShaderText);\n    gl.compileShader(SpriteShader._vert);\n    var stat1 = gl.getShaderParameter(SpriteShader._vert, WEBGL.COMPILE_STATUS);\n    SpriteShader._prog = gl.createProgram();\n    gl.attachShader(SpriteShader._prog, SpriteShader._vert);\n    gl.attachShader(SpriteShader._prog, SpriteShader._frag);\n    gl.linkProgram(SpriteShader._prog);\n    var errcode = gl.getProgramParameter(SpriteShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(SpriteShader._prog);\n    SpriteShader.vertLoc = gl.getAttribLocation(SpriteShader._prog, 'aVertexPosition');\n    SpriteShader.textureLoc = gl.getAttribLocation(SpriteShader._prog, 'aTextureCoord');\n    SpriteShader.colorLoc = gl.getAttribLocation(SpriteShader._prog, 'aColor');\n    SpriteShader.projMatLoc = gl.getUniformLocation(SpriteShader._prog, 'uPMatrix');\n    SpriteShader.mvMatLoc = gl.getUniformLocation(SpriteShader._prog, 'uMVMatrix');\n    SpriteShader.sampLoc = gl.getUniformLocation(SpriteShader._prog, 'uSampler');\n    set_tileUvMultiple(1);\n    set_tileDemEnabled(true);\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    SpriteShader.initialized = true;\n};\n\nSpriteShader.use = function (renderContext, vertex, texture) {\n    if (texture == null) {\n        texture = Texture.getEmpty();\n    }\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!SpriteShader.initialized) {\n            SpriteShader.init(renderContext);\n        }\n        gl.useProgram(SpriteShader._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniformMatrix4fv(SpriteShader.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(SpriteShader.projMatLoc, false, renderContext.get_projection().floatArray());\n        gl.uniform1i(SpriteShader.sampLoc, 0);\n        gl.disable(WEBGL.DEPTH_TEST);\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.enableVertexAttribArray(SpriteShader.vertLoc);\n        gl.enableVertexAttribArray(SpriteShader.textureLoc);\n        gl.enableVertexAttribArray(SpriteShader.colorLoc);\n        gl.vertexAttribPointer(SpriteShader.vertLoc, 3, WEBGL.FLOAT, false, 36, 0);\n        gl.vertexAttribPointer(SpriteShader.colorLoc, 4, WEBGL.FLOAT, false, 36, 12);\n        gl.vertexAttribPointer(SpriteShader.textureLoc, 2, WEBGL.FLOAT, false, 36, 28);\n        gl.activeTexture(WEBGL.TEXTURE0);\n        gl.bindTexture(WEBGL.TEXTURE_2D, texture);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, null);\n        gl.enable(WEBGL.BLEND);\n        gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    }\n};\n\nvar SpriteShader$ = {};\n\nregisterType(\"SpriteShader\", [SpriteShader, SpriteShader$, null]);\n\n\n// wwtlib.ShapeSpriteShader\n\nexport function ShapeSpriteShader() { }\n\nShapeSpriteShader.vertLoc = 0;\nShapeSpriteShader.textureLoc = 0;\nShapeSpriteShader.colorLoc = 0;\nShapeSpriteShader.initialized = false;\nShapeSpriteShader._prog = null;\n\nShapeSpriteShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision mediump float;\n\n        varying lowp vec4 vColor;\n\n        void main(void) {\n            gl_FragColor =  vColor;\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n        attribute lowp vec4 aColor;\n\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n\n        varying vec2 vTextureCoord;\n        varying vec4 vColor;\n\n        void main(void) {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            vColor = aColor;\n        }\n    `;\n\n    ShapeSpriteShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(ShapeSpriteShader._frag, fragShaderText);\n    gl.compileShader(ShapeSpriteShader._frag);\n    var stat = gl.getShaderParameter(ShapeSpriteShader._frag, WEBGL.COMPILE_STATUS);\n    ShapeSpriteShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(ShapeSpriteShader._vert, vertexShaderText);\n    gl.compileShader(ShapeSpriteShader._vert);\n    var stat1 = gl.getShaderParameter(ShapeSpriteShader._vert, WEBGL.COMPILE_STATUS);\n    ShapeSpriteShader._prog = gl.createProgram();\n    gl.attachShader(ShapeSpriteShader._prog, ShapeSpriteShader._vert);\n    gl.attachShader(ShapeSpriteShader._prog, ShapeSpriteShader._frag);\n    gl.linkProgram(ShapeSpriteShader._prog);\n    var errcode = gl.getProgramParameter(ShapeSpriteShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(ShapeSpriteShader._prog);\n    ShapeSpriteShader.vertLoc = gl.getAttribLocation(ShapeSpriteShader._prog, 'aVertexPosition');\n    ShapeSpriteShader.colorLoc = gl.getAttribLocation(ShapeSpriteShader._prog, 'aColor');\n    ShapeSpriteShader.projMatLoc = gl.getUniformLocation(ShapeSpriteShader._prog, 'uPMatrix');\n    ShapeSpriteShader.mvMatLoc = gl.getUniformLocation(ShapeSpriteShader._prog, 'uMVMatrix');\n    gl.disable(WEBGL.DEPTH_TEST);\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    ShapeSpriteShader.initialized = true;\n};\n\nShapeSpriteShader.use = function (renderContext, vertex) {\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!ShapeSpriteShader.initialized) {\n            ShapeSpriteShader.init(renderContext);\n        }\n        gl.useProgram(ShapeSpriteShader._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniformMatrix4fv(ShapeSpriteShader.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(ShapeSpriteShader.projMatLoc, false, renderContext.get_projection().floatArray());\n        gl.uniform1i(ShapeSpriteShader.sampLoc, 0);\n        gl.disable(WEBGL.DEPTH_TEST);\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.enableVertexAttribArray(ShapeSpriteShader.vertLoc);\n        gl.enableVertexAttribArray(ShapeSpriteShader.textureLoc);\n        gl.enableVertexAttribArray(ShapeSpriteShader.colorLoc);\n        gl.vertexAttribPointer(ShapeSpriteShader.vertLoc, 3, WEBGL.FLOAT, false, 36, 0);\n        gl.vertexAttribPointer(ShapeSpriteShader.colorLoc, 4, WEBGL.FLOAT, false, 36, 12);\n        gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, null);\n        gl.enable(WEBGL.BLEND);\n        gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    }\n};\n\nvar ShapeSpriteShader$ = {};\n\nregisterType(\"ShapeSpriteShader\", [ShapeSpriteShader, ShapeSpriteShader$, null]);\n\n\n// wwtlib.TextShader\n\nexport function TextShader() { }\n\nTextShader.vertLoc = 0;\nTextShader.textureLoc = 0;\nTextShader.initialized = false;\nTextShader._prog = null;\n\nTextShader.init = function (renderContext) {\n    var gl = renderContext.gl;\n\n    const fragShaderText = `\\\n        precision mediump float;\n\n        varying vec2 vTextureCoord;\n\n        uniform sampler2D uSampler;\n\n        void main(void) {\n            gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n        }\n    `;\n\n    const vertexShaderText = `\\\n        attribute vec3 aVertexPosition;\n        attribute vec2 aTextureCoord;\n\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n\n        varying vec2 vTextureCoord;\n\n        void main(void) {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            vTextureCoord = aTextureCoord;\n        }\n    `;\n\n    TextShader._frag = gl.createShader(WEBGL.FRAGMENT_SHADER);\n    gl.shaderSource(TextShader._frag, fragShaderText);\n    gl.compileShader(TextShader._frag);\n    var stat = gl.getShaderParameter(TextShader._frag, WEBGL.COMPILE_STATUS);\n    TextShader._vert = gl.createShader(WEBGL.VERTEX_SHADER);\n    gl.shaderSource(TextShader._vert, vertexShaderText);\n    gl.compileShader(TextShader._vert);\n    var stat1 = gl.getShaderParameter(TextShader._vert, WEBGL.COMPILE_STATUS);\n    TextShader._prog = gl.createProgram();\n    gl.attachShader(TextShader._prog, TextShader._vert);\n    gl.attachShader(TextShader._prog, TextShader._frag);\n    gl.linkProgram(TextShader._prog);\n    var errcode = gl.getProgramParameter(TextShader._prog, WEBGL.LINK_STATUS);\n    gl.useProgram(TextShader._prog);\n    TextShader.vertLoc = gl.getAttribLocation(TextShader._prog, 'aVertexPosition');\n    TextShader.textureLoc = gl.getAttribLocation(TextShader._prog, 'aTextureCoord');\n    TextShader.projMatLoc = gl.getUniformLocation(TextShader._prog, 'uPMatrix');\n    TextShader.mvMatLoc = gl.getUniformLocation(TextShader._prog, 'uMVMatrix');\n    TextShader.sampLoc = gl.getUniformLocation(TextShader._prog, 'uSampler');\n    set_tileUvMultiple(1);\n    set_tileDemEnabled(true);\n    gl.enable(WEBGL.BLEND);\n    gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    TextShader.initialized = true;\n};\n\nTextShader.use = function (renderContext, vertex, texture) {\n    if (texture == null) {\n        texture = Texture.getEmpty();\n    }\n    var gl = renderContext.gl;\n    if (gl != null) {\n        if (!TextShader.initialized) {\n            TextShader.init(renderContext);\n        }\n        gl.useProgram(TextShader._prog);\n        var mvMat = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        gl.uniformMatrix4fv(TextShader.mvMatLoc, false, mvMat.floatArray());\n        gl.uniformMatrix4fv(TextShader.projMatLoc, false, renderContext.get_projection().floatArray());\n        gl.uniform1i(TextShader.sampLoc, 0);\n        if (renderContext.space) {\n            gl.disable(WEBGL.DEPTH_TEST);\n        } else {\n            gl.enable(WEBGL.DEPTH_TEST);\n        }\n        gl.disableVertexAttribArray(0);\n        gl.disableVertexAttribArray(1);\n        gl.disableVertexAttribArray(2);\n        gl.disableVertexAttribArray(3);\n        gl.bindBuffer(WEBGL.ARRAY_BUFFER, vertex);\n        gl.enableVertexAttribArray(TextShader.vertLoc);\n        gl.enableVertexAttribArray(TextShader.textureLoc);\n        gl.vertexAttribPointer(TextShader.vertLoc, 3, WEBGL.FLOAT, false, 20, 0);\n        gl.vertexAttribPointer(TextShader.textureLoc, 2, WEBGL.FLOAT, false, 20, 12);\n        gl.activeTexture(WEBGL.TEXTURE0);\n        gl.bindTexture(WEBGL.TEXTURE_2D, texture);\n        gl.enable(WEBGL.BLEND);\n        gl.blendFunc(WEBGL.SRC_ALPHA, WEBGL.ONE_MINUS_SRC_ALPHA);\n    }\n};\n\nvar TextShader$ = {};\n\nregisterType(\"TextShader\", [TextShader, TextShader$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Sprites.\n\nimport { registerType } from \"../typesystem.js\";\nimport { ss } from \"../ss.js\";\nimport { tilePrepDevice } from \"../render_globals.js\";\nimport { SpriteShader, ShapeSpriteShader } from \"./shaders.js\";\nimport { WEBGL } from \"./webgl_constants.js\";\n\n\n// wwtlib.Sprite2d\n\nexport function Sprite2d() {\n    this.vertCount = 0;\n}\n\nvar Sprite2d$ = {\n    draw: function (renderContext, points, count, texture, triangleStrips, opacity) {\n        if (this.vertexBuffer == null) {\n            this.create(points);\n        } else {\n            this.update(points);\n        }\n        if (texture == null) {\n            ShapeSpriteShader.use(renderContext, this.vertexBuffer);\n            renderContext.gl.drawArrays(triangleStrips ? WEBGL.TRIANGLE_STRIP : WEBGL.TRIANGLES, 0, points.length);\n        } else {\n            SpriteShader.use(renderContext, this.vertexBuffer, (texture != null) ? texture.texture2d : null);\n            renderContext.gl.drawArrays(triangleStrips ? WEBGL.TRIANGLE_STRIP : WEBGL.TRIANGLES, 0, points.length);\n        }\n    },\n\n    create: function (verts) {\n        this.vertexBuffer = tilePrepDevice.createBuffer();\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this.vertexBuffer);\n        var f32array = new Float32Array(verts.length * 9);\n        var buffer = f32array;\n        var index = 0;\n        var $enum1 = ss.enumerate(verts);\n        while ($enum1.moveNext()) {\n            var pt = $enum1.current;\n            buffer[index++] = pt.position.x;\n            buffer[index++] = pt.position.y;\n            buffer[index++] = pt.position.z;\n            buffer[index++] = pt.color.r / 255;\n            buffer[index++] = pt.color.g / 255;\n            buffer[index++] = pt.color.b / 255;\n            buffer[index++] = pt.color.a / 255;\n            buffer[index++] = pt.tu;\n            buffer[index++] = pt.tv;\n        }\n        tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.DYNAMIC_DRAW);\n    },\n\n    update: function (verts) {\n        if (this.vertCount < verts.length) {\n            tilePrepDevice.deleteBuffer(this.vertexBuffer);\n            this.create(verts);\n            return;\n        }\n        tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this.vertexBuffer);\n        var f32array = new Float32Array(verts.length * 9);\n        var buffer = f32array;\n        var index = 0;\n        var $enum1 = ss.enumerate(verts);\n        while ($enum1.moveNext()) {\n            var pt = $enum1.current;\n            buffer[index++] = pt.position.x;\n            buffer[index++] = pt.position.y;\n            buffer[index++] = pt.position.z;\n            buffer[index++] = pt.color.r / 255;\n            buffer[index++] = pt.color.g / 255;\n            buffer[index++] = pt.color.b / 255;\n            buffer[index++] = pt.color.a / 255;\n            buffer[index++] = pt.tu;\n            buffer[index++] = pt.tv;\n        }\n        tilePrepDevice.bufferSubData(WEBGL.ARRAY_BUFFER, 0, f32array);\n    }\n};\n\nregisterType(\"Sprite2d\", [Sprite2d, Sprite2d$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A tessellator algorithm.\n\nimport { registerType } from \"../typesystem.js\";\nimport { Vector3d } from \"../double3d.js\";\n\n\n// wwtlib.Tessellator\n\nexport function Tessellator() { }\n\nTessellator.tesselateSimplePoly = function (inputList) {\n    var results = [];\n    var tess = new Tessellator();\n    tess.process(inputList, results);\n    return results;\n};\n\nvar Tessellator$ = {\n    _isLeftOfHalfSpace: function (pntA, pntB, pntTest) {\n        pntA.normalize();\n        pntB.normalize();\n        var cross = Vector3d.cross(pntA, pntB);\n        var dot = Vector3d.dot(cross, pntTest);\n        return dot > 0;\n    },\n\n    _insideTriangle: function (pntA, pntB, pntC, pntTest) {\n        if (!this._isLeftOfHalfSpace(pntA, pntB, pntTest)) {\n            return false;\n        }\n        if (!this._isLeftOfHalfSpace(pntB, pntC, pntTest)) {\n            return false;\n        }\n        if (!this._isLeftOfHalfSpace(pntC, pntA, pntTest)) {\n            return false;\n        }\n        return true;\n    },\n\n    _canClipEar: function (poly, u, v, w, n, verts) {\n        var p;\n        var a = poly[verts[u]].copy();\n        var b = poly[verts[v]].copy();\n        var c = poly[verts[w]].copy();\n        var P;\n        var d = Vector3d.subtractVectors(b, a);\n        d.normalize();\n        var e = Vector3d.subtractVectors(b, c);\n        e.normalize();\n        var g = Vector3d.cross(d, e);\n        var bn = b.copy();\n        bn.normalize();\n\n        // Determine if convex edge\n        if (Vector3d.dot(g, bn) > 0) {\n            return false;\n        }\n\n        // Check for any intersecting vertices that would invalidate this ear\n        for (p = 0; p < n; p++) {\n            if ((p === u) || (p === v) || (p === w)) {\n                continue;\n            }\n            P = poly[verts[p]].copy();\n\n            // don't clip earth if other intersecting vertex\n            if (this._insideTriangle(a, b, c, P)) {\n                return false;\n            }\n        }\n        return true;\n    },\n\n    process: function (poly, result) {\n        var n = poly.length;\n        if (poly.length < 3) {\n            return false;\n        }\n        var verts = new Array(poly.length);\n        for (var i = 0; i < n; i++) {\n            verts[i] = i;\n        }\n        var nv = n;\n        var count = 2 * nv;\n        for (var m = 0, v = nv - 1; nv > 2;) {\n            if (0 >= (count--)) {\n                // not enough ears to clip. Non-Simple Polygon\n                return false;\n            }\n            var u = v;\n            if (nv <= u) {\n                u = 0;\n            }\n            v = u + 1;\n            if (nv <= v) {\n                v = 0;\n            }\n            var w = v + 1;\n            if (nv <= w) {\n                w = 0;\n            }\n            if (this._canClipEar(poly, u, v, w, nv, verts)) {\n                var s, t;\n                result.push(verts[u]);\n                result.push(verts[v]);\n                result.push(verts[w]);\n                m++;\n\n                // remove clipped ear\n                for (s = v, t = v + 1; t < nv; s++, t++) {\n                    verts[s] = verts[t];\n                }\n                nv--;\n                count = 2 * nv;\n            }\n        }\n        return true;\n    }\n};\n\nregisterType(\"Tessellator\", [Tessellator, Tessellator$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The basic GL texture type.\n\nimport { registerType } from \"../typesystem.js\";\nimport { ss } from \"../ss.js\";\nimport { tilePrepDevice } from \"../render_globals.js\";\nimport { URLHelpers } from \"../url_helpers.js\";\nimport { WEBGL } from \"./webgl_constants.js\";\n\n\n// wwtlib.Texture\n\nexport function Texture() {\n    this.imageElement = null;\n    this.texture2d = null;\n    this._downloading = false;\n    this._ready = false;\n    this._errored = false;\n    this.URL = '';\n}\n\nTexture.empty = null;\n\nTexture.getEmpty = function () {\n    if (Texture.empty == null) {\n        Texture.empty = tilePrepDevice.createTexture();\n        tilePrepDevice.bindTexture(WEBGL.TEXTURE_2D, Texture.empty);\n        tilePrepDevice.texImage2D(WEBGL.TEXTURE_2D, 0, WEBGL.RGBA, 1, 1, 0, WEBGL.RGBA, WEBGL.UNSIGNED_BYTE, new Uint8Array([0, 0, 0, 0]));\n        tilePrepDevice.bindTexture(WEBGL.TEXTURE_2D, null);\n    }\n    return Texture.empty;\n};\n\nTexture.fromUrl = function (url) {\n    var tex = new Texture();\n    tex.load(url);\n    return tex;\n};\n\nTexture.isPowerOfTwo = function (val) {\n    return !(val & (val - 1));\n};\n\nTexture.fitPowerOfTwo = function (val) {\n    val--;\n    for (var i = 1; i < 32; i <<= 1) {\n        val = val | val >> i;\n    }\n    return val + 1;\n};\n\nvar Texture$ = {\n    cleanUp: function () {\n        this.imageElement = null;\n        tilePrepDevice.deleteTexture(this.texture2d);\n    },\n\n    dispose: function () {\n        this.cleanUp();\n    },\n\n    load: function (url) {\n        var $this = this;\n\n        this.URL = url;\n        if (typeof document === \"undefined\") { return; }\n        if (!this._downloading) {\n            this._downloading = true;\n            this.imageElement = document.createElement('img');\n            var xdomimg = this.imageElement;\n            this.imageElement.addEventListener('load', function (e) {\n                $this._ready = true;\n                $this._downloading = false;\n                $this._errored = false;\n                $this.makeTexture();\n            }, false);\n            this.imageElement.addEventListener('error', function (e) {\n                if (!$this.imageElement.hasAttribute('proxyattempt')) {\n                    $this.imageElement.setAttribute('proxyattempt', true);\n                    var new_url = URLHelpers.singleton.activateProxy($this.URL);\n                    if (new_url != null) {  // null => don't bother: we know that the proxy won't help\n                        $this.imageElement.src = new_url;\n                        return;\n                    }\n                }\n                $this._downloading = false;\n                $this._ready = false;\n                $this._errored = true;\n            }, false);\n            xdomimg.crossOrigin = 'anonymous';\n            this.imageElement.src = this.URL;\n        }\n    },\n\n    makeTexture: function () {\n        if (tilePrepDevice != null) {\n            try {\n                this.texture2d = tilePrepDevice.createTexture();\n                tilePrepDevice.bindTexture(WEBGL.TEXTURE_2D, this.texture2d);\n                var image = this.imageElement;\n\n                // Before we bind resize to a power of two if nessesary so we can MIPMAP\n                if ((!Texture.isPowerOfTwo(this.imageElement.height) | !Texture.isPowerOfTwo(this.imageElement.width)) === 1) {\n                    var temp = document.createElement('canvas');\n                    temp.height = Texture.fitPowerOfTwo(image.height);\n                    temp.width = Texture.fitPowerOfTwo(image.width);\n                    var ctx = temp.getContext('2d');\n                    ctx.drawImage(image, 0, 0, temp.width, temp.height);\n                    //Substitute the resized image\n                    image = temp;\n                }\n\n                tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_WRAP_S, WEBGL.CLAMP_TO_EDGE);\n                tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_WRAP_T, WEBGL.CLAMP_TO_EDGE);\n                tilePrepDevice.texImage2D(WEBGL.TEXTURE_2D, 0, WEBGL.RGBA, WEBGL.RGBA, WEBGL.UNSIGNED_BYTE, image);\n                tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_MIN_FILTER, WEBGL.LINEAR_MIPMAP_NEAREST);\n                tilePrepDevice.generateMipmap(WEBGL.TEXTURE_2D);\n                tilePrepDevice.bindTexture(WEBGL.TEXTURE_2D, null);\n            } catch ($e1) {\n                this._errored = true;\n            }\n        }\n    }\n};\n\nregisterType(\"Texture\", [Texture, Texture$, null, ss.IDisposable]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Magic constants defined by WebGL.\n\nexport const WEBGL = {\n    ACTIVE_ATTRIBUTE_MAX_LENGTH: 35722,\n    ACTIVE_ATTRIBUTES: 35721,\n    ACTIVE_TEXTURE: 34016,\n    ACTIVE_UNIFORM_MAX_LENGTH: 35719,\n    ACTIVE_UNIFORMS: 35718,\n    ALIASED_LINE_WIDTH_RANGE: 33902,\n    ALIASED_POINT_SIZE_RANGE: 33901,\n    ALPHA: 6406,\n    ALPHA_BITS: 3413,\n    ALWAYS: 519,\n    ARRAY_BUFFER: 34962,\n    ARRAY_BUFFER_BINDING: 34964,\n    ATTACHED_SHADERS: 35717,\n    BACK: 1029,\n    BLEND: 3042,\n    BLEND_COLOR: 32773,\n    BLEND_DST_ALPHA: 32970,\n    BLEND_DST_RGB: 32968,\n    BLEND_EQUATION: 32777,\n    BLEND_EQUATION_ALPHA: 34877,\n    BLEND_EQUATION_RGB: 32777,\n    BLEND_SRC_ALPHA: 32971,\n    BLEND_SRC_RGB: 32969,\n    BLUE_BITS: 3412,\n    BOOL: 35670,\n    BOOL_VEC2: 35671,\n    BOOL_VEC3: 35672,\n    BOOL_VEC4: 35673,\n    BUFFER_SIZE: 34660,\n    BUFFER_USAGE: 34661,\n    BYTE: 5120,\n    CCW: 2305,\n    CLAMP_TO_EDGE: 33071,\n    COLOR_ATTACHMENT0: 36064,\n    COLOR_BUFFER_BIT: 16384,\n    COLOR_CLEAR_VALUE: 3106,\n    COLOR_WRITEMASK: 3107,\n    COMPILE_STATUS: 35713,\n    COMPRESSED_TEXTURE_FORMATS: 34467,\n    CONSTANT_ALPHA: 32771,\n    CONSTANT_COLOR: 32769,\n    CULL_FACE: 2884,\n    CULL_FACE_MODE: 2885,\n    CURRENT_PROGRAM: 35725,\n    CURRENT_VERTEX_ATTRIB: 34342,\n    CW: 2304,\n    DECR: 7683,\n    DECR_WRAP: 34056,\n    DELETE_STATUS: 35712,\n    DEPTH_ATTACHMENT: 36096,\n    DEPTH_BITS: 3414,\n    DEPTH_BUFFER_BIT: 256,\n    DEPTH_CLEAR_VALUE: 2931,\n    DEPTH_COMPONENT: 6402,\n    DEPTH_COMPONENT16: 33189,\n    DEPTH_FUNC: 2932,\n    DEPTH_RANGE: 2928,\n    DEPTH_STENCIL: 34041,\n    DEPTH_STENCIL_ATTACHMENT: 33306,\n    DEPTH_TEST: 2929,\n    DEPTH_WRITEMASK: 2930,\n    DITHER: 3024,\n    DONT_CARE: 4352,\n    DST_ALPHA: 772,\n    DST_COLOR: 774,\n    DYNAMIC_DRAW: 35048,\n    ELEMENT_ARRAY_BUFFER: 34963,\n    ELEMENT_ARRAY_BUFFER_BINDING: 34965,\n    EQUAL: 514,\n    EXTENSIONS: 7939,\n    FASTEST: 4353,\n    FLOAT: 5126,\n    FLOAT_MAT2: 35674,\n    FLOAT_MAT3: 35675,\n    FLOAT_MAT4: 35676,\n    FLOAT_VEC2: 35664,\n    FLOAT_VEC3: 35665,\n    FLOAT_VEC4: 35666,\n    FRAGMENT_SHADER: 35632,\n    FRAMEBUFFER: 36160,\n    FRAMEBUFFER_ATTACHMENT_OBJECT_NAME: 36049,\n    FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE: 36048,\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE: 36051,\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL: 36050,\n    FRAMEBUFFER_BINDING: 36006,\n    FRAMEBUFFER_COMPLETE: 36053,\n    FRAMEBUFFER_INCOMPLETE_ATTACHMENT: 36054,\n    FRAMEBUFFER_INCOMPLETE_DIMENSIONS: 36057,\n    FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: 36055,\n    FRAMEBUFFER_UNSUPPORTED: 36061,\n    FRONT: 1028,\n    FRONT_AND_BACK: 1032,\n    FRONT_FACE: 2886,\n    FUNC_ADD: 32774,\n    FUNC_REVERSE_SUBTRACT: 32779,\n    FUNC_SUBTRACT: 32778,\n    GENERATE_MIPMAP_HINT: 33170,\n    GEQUAL: 518,\n    GREATER: 516,\n    GREEN_BITS: 3411,\n    HIGH_FLOAT: 36338,\n    HIGH_INT: 36341,\n    IMPLEMENTATION_COLOR_READ_FORMAT: 35739,\n    IMPLEMENTATION_COLOR_READ_TYPE: 35738,\n    INCR: 7682,\n    INCR_WRAP: 34055,\n    INFO_LOG_LENGTH: 35716,\n    INT: 5124,\n    INT_VEC2: 35667,\n    INT_VEC3: 35668,\n    INT_VEC4: 35669,\n    INVALID_ENUM: 1280,\n    INVALID_FRAMEBUFFER_OPERATION: 1286,\n    INVALID_OPERATION: 1282,\n    INVALID_VALUE: 1281,\n    INVERT: 5386,\n    KEEP: 7680,\n    LEQUAL: 515,\n    LESS: 513,\n    LINE_LOOP: 2,\n    LINE_STRIP: 3,\n    LINE_WIDTH: 2849,\n    LINEAR: 9729,\n    LINEAR_MIPMAP_LINEAR: 9987,\n    LINEAR_MIPMAP_NEAREST: 9985,\n    LINES: 1,\n    LINK_STATUS: 35714,\n    LOW_FLOAT: 36336,\n    LOW_INT: 36339,\n    LUMINANCE: 6409,\n    LUMINANCE_ALPHA: 6410,\n    MAX_COMBINED_TEXTURE_IMAGE_UNITS: 35661,\n    MAX_CUBE_MAP_TEXTURE_SIZE: 34076,\n    MAX_FRAGMENT_UNIFORM_VECTORS: 36349,\n    MAX_RENDERBUFFER_SIZE: 34024,\n    MAX_TEXTURE_IMAGE_UNITS: 34930,\n    MAX_TEXTURE_SIZE: 3379,\n    MAX_VARYING_VECTORS: 36348,\n    MAX_VERTEX_ATTRIBS: 34921,\n    MAX_VERTEX_TEXTURE_IMAGE_UNITS: 35660,\n    MAX_VERTEX_UNIFORM_VECTORS: 36347,\n    MAX_VIEWPORT_DIMS: 3386,\n    MEDIUM_FLOAT: 36337,\n    MEDIUM_INT: 36340,\n    MIRRORED_REPEAT: 33648,\n    NEAREST: 9728,\n    NEAREST_MIPMAP_LINEAR: 9986,\n    NEAREST_MIPMAP_NEAREST: 9984,\n    NEVER: 512,\n    NICEST: 4354,\n    NO_ERROR: 0,\n    NONE: 0,\n    NOTEQUAL: 517,\n    NUM_COMPRESSED_TEXTURE_FORMATS: 34466,\n    ONE: 1,\n    ONE_MINUS_CONSTANT_ALPHA: 32772,\n    ONE_MINUS_CONSTANT_COLOR: 32770,\n    ONE_MINUS_DST_ALPHA: 773,\n    ONE_MINUS_DST_COLOR: 775,\n    ONE_MINUS_SRC_ALPHA: 771,\n    ONE_MINUS_SRC_COLOR: 769,\n    OUT_OF_MEMORY: 1285,\n    PACK_ALIGNMENT: 3333,\n    POINTS: 0,\n    POLYGON_OFFSET_FACTOR: 32824,\n    POLYGON_OFFSET_FILL: 32823,\n    POLYGON_OFFSET_UNITS: 10752,\n    RED_BITS: 3410,\n    RENDERBUFFER: 36161,\n    RENDERBUFFER_ALPHA_SIZE: 36179,\n    RENDERBUFFER_BINDING: 36007,\n    RENDERBUFFER_BLUE_SIZE: 36178,\n    RENDERBUFFER_DEPTH_SIZE: 36180,\n    RENDERBUFFER_GREEN_SIZE: 36177,\n    RENDERBUFFER_HEIGHT: 36163,\n    RENDERBUFFER_INTERNAL_FORMAT: 36164,\n    RENDERBUFFER_RED_SIZE: 36176,\n    RENDERBUFFER_STENCIL_SIZE: 36181,\n    RENDERBUFFER_WIDTH: 36162,\n    RENDERER: 7937,\n    REPEAT: 10497,\n    REPLACE: 7681,\n    RGB: 6407,\n    RGB8: 32849,\n    RGB5_A1: 32855,\n    RGB565: 36194,\n    RGBA: 6408,\n    RGBA8: 32856,\n    RGBA16I: 36232,\n    RED_INTEGER: 36244,\n    RED: 6403,\n    R32F: 33326,\n    R16I: 33331,\n    RGBA4: 32854,\n    SAMPLE_ALPHA_TO_COVERAGE: 32926,\n    SAMPLE_BUFFERS: 32936,\n    SAMPLE_COVERAGE: 32928,\n    SAMPLE_COVERAGE_INVERT: 32939,\n    SAMPLE_COVERAGE_VALUE: 32938,\n    SAMPLER_2D: 35678,\n    SAMPLER_CUBE: 35680,\n    SAMPLES: 32937,\n    SCISSOR_BOX: 3088,\n    SCISSOR_TEST: 3089,\n    SHADER_COMPILER: 36346,\n    SHADER_SOURCE_LENGTH: 35720,\n    SHADER_TYPE: 35663,\n    SHADING_LANGUAGE_VERSION: 35724,\n    SHORT: 5122,\n    SRC_ALPHA: 770,\n    SRC_ALPHA_SATURATE: 776,\n    SRC_COLOR: 768,\n    STATIC_DRAW: 35044,\n    STENCIL_ATTACHMENT: 36128,\n    STENCIL_BACK_FAIL: 34817,\n    STENCIL_BACK_FUNC: 34816,\n    STENCIL_BACK_PASS_DEPTH_FAIL: 34818,\n    STENCIL_BACK_PASS_DEPTH_PASS: 34819,\n    STENCIL_BACK_REF: 36003,\n    STENCIL_BACK_VALUE_MASK: 36004,\n    STENCIL_BACK_WRITEMASK: 36005,\n    STENCIL_BITS: 3415,\n    STENCIL_BUFFER_BIT: 1024,\n    STENCIL_CLEAR_VALUE: 2961,\n    STENCIL_FAIL: 2964,\n    STENCIL_FUNC: 2962,\n    STENCIL_INDEX: 6401,\n    STENCIL_INDEX8: 36168,\n    STENCIL_PASS_DEPTH_FAIL: 2965,\n    STENCIL_PASS_DEPTH_PASS: 2966,\n    STENCIL_REF: 2967,\n    STENCIL_TEST: 2960,\n    STENCIL_VALUE_MASK: 2963,\n    STENCIL_WRITEMASK: 2968,\n    STREAM_DRAW: 35040,\n    SUBPIXEL_BITS: 3408,\n    TEXTURE: 5890,\n    TEXTURE_2D: 3553,\n    TEXTURE_BINDING_2D: 32873,\n    TEXTURE_BINDING_CUBE_MAP: 34068,\n    TEXTURE_CUBE_MAP: 34067,\n    TEXTURE_CUBE_MAP_NEGATIVE_X: 34070,\n    TEXTURE_CUBE_MAP_NEGATIVE_Y: 34072,\n    TEXTURE_CUBE_MAP_NEGATIVE_Z: 34074,\n    TEXTURE_CUBE_MAP_POSITIVE_X: 34069,\n    TEXTURE_CUBE_MAP_POSITIVE_Y: 34071,\n    TEXTURE_CUBE_MAP_POSITIVE_Z: 34073,\n    UNPACK_FLIP_Y_WEBGL: 37440,\n    TEXTURE_MAG_FILTER: 10240,\n    TEXTURE_MIN_FILTER: 10241,\n    TEXTURE_WRAP_S: 10242,\n    TEXTURE_WRAP_T: 10243,\n    TEXTURE0: 33984,\n    TEXTURE1: 33985,\n    TEXTURE10: 33994,\n    TEXTURE11: 33995,\n    TEXTURE12: 33996,\n    TEXTURE13: 33997,\n    TEXTURE14: 33998,\n    TEXTURE15: 33999,\n    TEXTURE16: 34000,\n    TEXTURE17: 34001,\n    TEXTURE18: 34002,\n    TEXTURE19: 34003,\n    TEXTURE2: 33986,\n    TEXTURE20: 34004,\n    TEXTURE21: 34005,\n    TEXTURE22: 34006,\n    TEXTURE23: 34007,\n    TEXTURE24: 34008,\n    TEXTURE25: 34009,\n    TEXTURE26: 34010,\n    TEXTURE27: 34011,\n    TEXTURE28: 34012,\n    TEXTURE29: 34013,\n    TEXTURE3: 33987,\n    TEXTURE30: 34014,\n    TEXTURE31: 34015,\n    TEXTURE4: 33988,\n    TEXTURE5: 33989,\n    TEXTURE6: 33990,\n    TEXTURE7: 33991,\n    TEXTURE8: 33992,\n    TEXTURE9: 33993,\n    TRIANGLE_FAN: 6,\n    TRIANGLE_STRIP: 5,\n    TRIANGLES: 4,\n    UNPACK_ALIGNMENT: 3317,\n    UNSIGNED_BYTE: 5121,\n    UNSIGNED_INT: 5125,\n    UNSIGNED_SHORT: 5123,\n    UNSIGNED_SHORT_4_4_4_4: 32819,\n    UNSIGNED_SHORT_5_5_5_1: 32820,\n    UNSIGNED_SHORT_5_6_5: 33635,\n    VALIDATE_STATUS: 35715,\n    VENDOR: 7936,\n    VERSION: 7938,\n    VERTEX_ATTRIB_ARRAY_BUFFER_BINDING: 34975,\n    VERTEX_ATTRIB_ARRAY_ENABLED: 34338,\n    VERTEX_ATTRIB_ARRAY_NORMALIZED: 34922,\n    VERTEX_ATTRIB_ARRAY_POINTER: 34373,\n    VERTEX_ATTRIB_ARRAY_SIZE: 34339,\n    VERTEX_ATTRIB_ARRAY_STRIDE: 34340,\n    VERTEX_ATTRIB_ARRAY_TYPE: 34341,\n    VERTEX_SHADER: 35633,\n    VIEWPORT: 2978,\n    ZERO: 0,\n};\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Various grids that can overlay the sky view.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { Vector3d, Matrix3d, PositionTexture } from \"./double3d.js\";\nimport { DT } from \"./astrocalc/date.js\";\nimport { CT } from \"./astrocalc/coordinate_transformation.js\";\nimport { WEBGL } from \"./graphics/webgl_constants.js\";\nimport { PointList, SimpleLineList, Dates } from \"./graphics/primitives3d.js\";\nimport { PositionTextureVertexBuffer } from \"./graphics/gl_buffers.js\";\nimport { Texture } from \"./graphics/texture.js\";\nimport { ImageShader } from \"./graphics/shaders.js\";\nimport { Colors } from \"./color.js\";\nimport { freestandingMode } from \"./data_globals.js\";\nimport { globalRenderContext, tilePrepDevice } from \"./render_globals.js\";\nimport { BinaryReader } from \"./utilities/binary_reader.js\";\nimport { Coordinates } from \"./coordinates.js\";\nimport { Text3d, Text3dBatch } from \"./sky_text.js\";\nimport { Planets } from \"./planets.js\";\nimport { SpaceTimeController } from \"./space_time_controller.js\";\nimport { Star, Galaxy } from \"./star.js\";\nimport { WebFile } from \"./web_file.js\";\n\n\n// wwtlib.Grids\n\nexport function Grids() { }\n\nGrids._galaxyImageIndexBuffer = null;\nGrids._galaxyImageTriangleCount = 0;\nGrids._milkyWayImage = null;\nGrids._starSprites = null;\nGrids._starCount = 0;\nGrids._starsDownloading = false;\nGrids._stars = null;\nGrids._hipparcosIndex = {};\nGrids._limitingMagnitude = 16;\nGrids._galaxyTextures = null;\nGrids._galaxyVertexCounts = null;\nGrids._largeSet = true;\nGrids._cosmosReady = false;\nGrids._cosmos = null;\nGrids._downloadingGalaxy = false;\nGrids._eclipticCount = 0;\nGrids._eclipticYear = 0;\nGrids._monthDays = [31, 28.2421, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nGrids._monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nGrids._eclipticTextYear = 0;\n\nGrids._createGalaxyImage = function (renderContext) {\n    if (Grids._milkyWayImage == null) {\n        Grids._milkyWayImage = Texture.fromUrl(URLHelpers.singleton.engineAssetUrl('milkywaybar.jpg'));\n    }\n    var subdivs = 50;\n    var lat, lng;\n    var index = 0;\n    var latMin = 64;\n    var latMax = -64;\n    var lngMin = -64;\n    var lngMax = 64;\n    Grids._galaxyImageVertexBuffer = new PositionTextureVertexBuffer((subdivs + 1) * (subdivs + 1));\n    var verts = Grids._galaxyImageVertexBuffer.lock();\n    var x1, y1;\n    var latDegrees = latMax - latMin;\n    var lngDegrees = lngMax - lngMin;\n    var scaleFactor = 60800000;\n    var ecliptic = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow()) / 180 * Math.PI;\n    var point;\n    var textureStepX = 1 / subdivs;\n    var textureStepY = 1 / subdivs;\n    for (y1 = 0; y1 <= subdivs; y1++) {\n        if (y1 !== subdivs) {\n            lat = latMax - (textureStepY * latDegrees * y1);\n        } else {\n            lat = latMin;\n        }\n        for (x1 = 0; x1 <= subdivs; x1++) {\n            if (x1 !== subdivs) {\n                lng = lngMin + (textureStepX * lngDegrees * x1);\n            }\n            else {\n                lng = lngMax;\n            }\n            index = y1 * (subdivs + 1) + x1;\n            point = Vector3d.create(lng * scaleFactor, 0, (lat - 28) * scaleFactor);\n            point.rotateY(213 / 180 * Math.PI);\n            point.rotateZ((-62.87175) / 180 * Math.PI);\n            point.rotateY((-192.8595083) / 180 * Math.PI);\n            point.rotateX(ecliptic);\n            verts[index] = PositionTexture.createPosRaw(point, (1 - x1 * textureStepX), (y1 * textureStepY));\n        }\n    }\n    Grids._galaxyImageVertexBuffer.unlock();\n    Grids._galaxyImageTriangleCount = subdivs * subdivs * 2;\n    var ui16array = new Uint16Array(subdivs * subdivs * 6);\n    var indexArray = ui16array;\n    for (y1 = 0; y1 < subdivs; y1++) {\n        for (x1 = 0; x1 < subdivs; x1++) {\n            index = (y1 * subdivs * 6) + 6 * x1;\n\n            // First triangle in quad\n            indexArray[index] = (y1 * (subdivs + 1) + x1);\n            indexArray[index + 2] = ((y1 + 1) * (subdivs + 1) + x1);\n            indexArray[index + 1] = (y1 * (subdivs + 1) + (x1 + 1));\n\n            // Second triangle in quad\n            indexArray[index + 3] = (y1 * (subdivs + 1) + (x1 + 1));\n            indexArray[index + 5] = ((y1 + 1) * (subdivs + 1) + x1);\n            indexArray[index + 4] = ((y1 + 1) * (subdivs + 1) + (x1 + 1));\n        }\n    }\n    Grids._galaxyImageIndexBuffer = tilePrepDevice.createBuffer();\n    tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, Grids._galaxyImageIndexBuffer);\n    tilePrepDevice.bufferData(WEBGL.ELEMENT_ARRAY_BUFFER, ui16array, WEBGL.STATIC_DRAW);\n};\n\nGrids.drawGalaxyImage = function (renderContext, opacity) {\n    if (Grids._galaxyImageIndexBuffer == null) {\n        Grids._createGalaxyImage(renderContext);\n    }\n    var zoom = renderContext.viewCamera.zoom;\n    var log = Math.log(Math.max(1, zoom)) / Math.log(4);\n    var distAlpha = (log - 14) * 128;\n    var alpha = (Math.min(255, Math.max(0, distAlpha)) * opacity);\n    ImageShader.use(renderContext, Grids._galaxyImageVertexBuffer.vertexBuffer, Grids._galaxyImageIndexBuffer, Grids._milkyWayImage.texture2d, opacity, true);\n    renderContext.gl.drawElements(WEBGL.TRIANGLES, Grids._galaxyImageTriangleCount * 3, WEBGL.UNSIGNED_SHORT, 0);\n};\n\nGrids.drawStars3D = function (renderContext, opacity) {\n    var zoom = renderContext.viewCamera.zoom;\n    var distAlpha = Math.max(Math.min(255, (Math.log(zoom) - 15.5) * 40.8), 0);\n    var alpha = Math.min(255, Math.max(0, ss.truncate(distAlpha)));\n    if (alpha > 254) {\n        return;\n    }\n    alpha = ((255 - alpha) * opacity);\n    if (Grids._starSprites == null) {\n        Grids.initStarVertexBuffer(renderContext);\n    }\n    if (Grids._starSprites != null) {\n        Grids._starSprites.draw(renderContext, alpha / 255, false);\n    }\n};\n\nGrids.initStarVertexBuffer = function (renderContext) {\n    if (!Grids._starsDownloading && !freestandingMode) {\n        Grids.getStarFile(URLHelpers.singleton.coreStaticUrl('wwtweb/catalog.aspx?Q=hipparcos'));\n        Grids._starsDownloading = true;\n    }\n    if (Grids._starSprites == null && Grids._starCount > 0) {\n        var ecliptic = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow()) / 180 * Math.PI;\n        var count = Grids._stars.length;\n        Grids._starCount = count;\n        Grids._starSprites = new PointList(renderContext);\n        Grids._starSprites.depthBuffered = false;\n        Grids._starSprites.showFarSide = true;\n        var $enum1 = ss.enumerate(Grids._stars);\n        while ($enum1.moveNext()) {\n            var star = $enum1.current;\n            var pos = Coordinates.raDecTo3dAu(star.RA, star.dec, star.distance);\n            pos.rotateX(ecliptic);\n            star.position = pos;\n            var radDec = (1200000) / Math.pow(1.6, star.absoluteMagnitude);\n            Grids._starSprites.addPoint(pos, star.col, new Dates(0, 1), radDec * 100);\n        }\n    }\n};\n\nGrids.initializeStarDB = function (text) {\n    if (Grids._stars == null) {\n        if (Grids._stars == null) {\n            Grids._stars = [];\n            var rows = text.split('\\r\\n');\n            var star;\n            var $enum1 = ss.enumerate(rows);\n            while ($enum1.moveNext()) {\n                var row = $enum1.current;\n                var line = row;\n                star = new Star(line);\n                if (star.magnitude < Grids._limitingMagnitude && star.par > 0.001) {\n                    Grids._stars.push(star);\n                    Grids._hipparcosIndex[star.id] = star;\n                }\n            }\n            Grids._starCount = Grids._stars.length;\n        }\n    }\n};\n\nGrids.getStarFile = function (url) {\n    Grids._webFileStar = new WebFile(url);\n    Grids._webFileStar.onStateChange = Grids.starFileStateChange;\n    Grids._webFileStar.send();\n};\n\nGrids.starFileStateChange = function () {\n    if (Grids._webFileStar.get_state() === 2) {\n        alert(Grids._webFileStar.get_message());\n    }\n    else if (Grids._webFileStar.get_state() === 1) {\n        Grids.initializeStarDB(Grids._webFileStar.getText());\n    }\n};\n\nGrids.getGalaxyFile = function (url) {\n    Grids._webFileGalaxy = new WebFile(url);\n    Grids._webFileGalaxy.responseType = 'blob';\n    Grids._webFileGalaxy.onStateChange = Grids.galaxyFileStateChange;\n    Grids._webFileGalaxy.send();\n};\n\nGrids.galaxyFileStateChange = function () {\n    if (Grids._webFileGalaxy.get_state() === 2) {\n        alert(Grids._webFileGalaxy.get_message());\n    }\n    else if (Grids._webFileGalaxy.get_state() === 1) {\n        var mainBlob = Grids._webFileGalaxy.getBlob();\n        var chunck = new FileReader();\n        chunck.onloadend = function (e) {\n            var br = new BinaryReader(new Uint8Array(chunck.result));\n            Grids.initializeCosmos(br);\n        };\n        chunck.readAsArrayBuffer(mainBlob);\n    }\n};\n\nGrids.drawCosmos3D = function (renderContext, opacity) {\n    var device = renderContext.gl;\n    var zoom = renderContext.viewCamera.zoom;\n    var distAlpha = ((Math.log(Math.max(1, zoom)) / Math.log(4)) - 15.5) * 90;\n    var alpha = Math.min(255, Math.max(0, ss.truncate(distAlpha)));\n    if (alpha < 3) {\n        return;\n    }\n    Grids.initCosmosVertexBuffer();\n    if (Grids._galaxyTextures == null) {\n        if (Grids._largeSet) {\n            Grids._galaxyTextures = new Array(256);\n            for (var i = 0; i < 256; i++) {\n                var num = i.toString();\n                while (num.length < 4) {\n                    num = '0' + num;\n                }\n                var name = ss.format(URLHelpers.singleton.engineAssetUrl('galimg/gal_{0}.jpg'), num);\n                Grids._galaxyTextures[i] = Texture.fromUrl(name);\n            }\n        }\n    }\n    if (Grids._cosmosReady) {\n        var count = 256;\n        for (var i = 0; i < count; i++) {\n            Grids._cosmosSprites[i].drawTextured(renderContext, Grids._galaxyTextures[i].texture2d, (alpha * opacity) / 255);\n        }\n    }\n};\n\nGrids.initCosmosVertexBuffer = function () {\n    if (Grids._cosmosSprites == null) {\n        Grids._downloadCosmosFile();\n    }\n};\n\nGrids._createCosmosVertexBuffer = function (renderContext) {\n    var device = tilePrepDevice;\n    var bucketCount = 256;\n    if (Grids._cosmosSprites != null) {\n        for (var ij = 0; ij < bucketCount; ij++) {\n            if (Grids._cosmosSprites[ij] != null) {\n                Grids._cosmosSprites[ij] = null;\n            }\n        }\n    }\n    Grids._cosmosSprites = null;\n    var ecliptic = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow()) / 180 * Math.PI;\n    Grids._cosmosSprites = new Array(bucketCount);\n    var indexList = new Array(bucketCount);\n    for (var i = 0; i < bucketCount; i++) {\n        var count = Grids._galaxyVertexCounts[i];\n        Grids._cosmosSprites[i] = new PointList(renderContext);\n        Grids._cosmosSprites[i].depthBuffered = false;\n        Grids._cosmosSprites[i].showFarSide = true;\n        indexList[i] = 0;\n    }\n    var $enum1 = ss.enumerate(Grids._cosmos);\n    while ($enum1.moveNext()) {\n        var galaxy = $enum1.current;\n        var bucket = galaxy.eTypeBucket;\n        var index = indexList[bucket];\n        var pos = Coordinates.raDecTo3dAu(galaxy.RA, galaxy.dec, (galaxy.distance * 206264.806 * 1000000) / 0.73);\n        pos.rotateX(ecliptic);\n        galaxy.position = pos;\n        Grids._cosmosSprites[bucket].addPoint(pos, Colors.get_white(), new Dates(0, 1), (1E+09 * galaxy.size * 100));\n        indexList[bucket]++;\n    }\n    Grids._cosmosReady = true;\n};\n\nGrids.initializeCosmos = function (br) {\n    var max = Math.pow(100, 2.849485002);\n    if (Grids._cosmos == null) {\n        Grids._galaxyVertexCounts = new Array((Grids._largeSet) ? 256 : 20);\n        if (Grids._cosmos == null) {\n            Grids._cosmos = [];\n            var galaxy;\n            try {\n                var count = 0;\n                while (br.get_position() < br.get_length()) {\n                    galaxy = new Galaxy(br);\n                    Grids._cosmos.push(galaxy);\n                    Grids._galaxyVertexCounts[galaxy.eTypeBucket]++;\n                    count++;\n                }\n            }\n            catch ($e1) {\n            }\n            br.close();\n        }\n        Grids._createCosmosVertexBuffer(globalRenderContext);\n    }\n};\n\nGrids._downloadCosmosFile = function () {\n    if (!Grids._downloadingGalaxy && !freestandingMode) {\n        Grids.getGalaxyFile(URLHelpers.singleton.coreStaticUrl('wwtweb/catalog.aspx?Q=cosmosnewbin'));\n        Grids._downloadingGalaxy = true;\n    }\n    return false;\n};\n\nGrids.drawEquitorialGrid = function (renderContext, opacity, drawColor) {\n    if (Grids._equLineList == null) {\n        Grids._equLineList = new SimpleLineList();\n        Grids._equLineList.set_depthBuffered(false);\n        for (var hour = 0; hour < 24; hour++) {\n            for (var dec = -80; dec < 80; dec += 2) {\n                Grids._equLineList.addLine(Coordinates.raDecTo3dAu(hour, dec, 1), Coordinates.raDecTo3dAu(hour, dec + 2, 1));\n            }\n        }\n        for (var dec = -80; dec <= 80; dec += 10) {\n            for (var hour = 0; hour < 23.8; hour += 0.2) {\n                Grids._equLineList.addLine(Coordinates.raDecTo3dAu(hour, dec, 1), Coordinates.raDecTo3dAu(hour + 0.2, dec, 1));\n                //todo fix for color bright\n            }\n        }\n        var counter = 0;\n        for (var ra = 0; ra < 24; ra += 0.25) {\n            var dec = 0.5;\n            switch (counter % 4) {\n                case 0:\n                    counter++;\n                    continue;\n                case 3:\n                case 1:\n                    dec = 0.25;\n                    break;\n            }\n            counter++;\n            Grids._equLineList.addLine(Coordinates.raDecTo3dAu(ra, dec, 1), Coordinates.raDecTo3dAu(ra, -dec, 1));\n        }\n        counter = 0;\n        for (var ra = 0; ra < 24; ra += 3) {\n            counter = 0;\n            for (var dec = -80; dec <= 80; dec += 1) {\n                var width = 0.5 / 30;\n                switch (counter % 10) {\n                    case 0:\n                        counter++;\n                        continue;\n                    case 5:\n                        width = 0.5 / 15;\n                        break;\n                }\n                counter++;\n                Grids._equLineList.addLine(Coordinates.raDecTo3dAu(ra + width, dec, 1), Coordinates.raDecTo3dAu(ra - width, dec, 1));\n            }\n        }\n    }\n    Grids._equLineList.drawLines(renderContext, opacity, drawColor);\n    return true;\n};\n\nGrids.drawEquitorialGridText = function (renderContext, opacity, drawColor) {\n    Grids._makeEquitorialGridText();\n    Grids._equTextBatch.draw(renderContext, opacity, drawColor);\n    return true;\n};\n\nGrids._makeEquitorialGridText = function () {\n    if (Grids._equTextBatch == null) {\n        Grids._equTextBatch = new Text3dBatch(30);\n        var index = 0;\n        for (var ra = 0; ra < 24; ra++) {\n            var text = ra.toString() + ' hr';\n            if (ra < 10) {\n                text = '  ' + ra.toString() + ' hr';\n            }\n            Grids._equTextBatch.add(new Text3d(Coordinates.raDecTo3dAu(ra + 0.005, 0.4, 1), Coordinates.raDecTo3dAu(ra + 0.005, 0.5, 1), text, 45, 0.00018));\n        }\n        index = 0;\n        for (var ra = 0; ra < 24; ra += 3) {\n            for (var dec = -80; dec <= 80; dec += 10) {\n                if (!dec) {\n                    continue;\n                }\n                var text = dec.toString();\n                if (dec > 0) {\n                    text = '  +' + dec.toString();\n                    Grids._equTextBatch.add(new Text3d(Coordinates.raDecTo3dAu(ra, dec - 0.4, 1), Coordinates.raDecTo3dAu(ra, dec - 0.3, 1), text, 45, 0.00018));\n                }\n                else {\n                    text = '  - ' + text.substr(1);\n                    Grids._equTextBatch.add(new Text3d(Coordinates.raDecTo3dAu(ra, dec + 0.4, 1), Coordinates.raDecTo3dAu(ra, dec + 0.5, 1), text, 45, 0.00018));\n                }\n                index++;\n            }\n        }\n    }\n};\n\nGrids.drawEcliptic = function (renderContext, opacity, drawColor) {\n    var col = drawColor;\n    var year = SpaceTimeController.get_now().getUTCFullYear();\n    if (Grids._eclipticOverviewLineList == null || year !== Grids._eclipticYear) {\n        if (Grids._eclipticOverviewLineList != null) {\n            Grids._eclipticOverviewLineList.clear();\n            Grids._eclipticOverviewLineList = null;\n        }\n        Grids._eclipticYear = year;\n        var obliquity = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow());\n        var mat = Matrix3d._rotationX((-obliquity / 360 * (Math.PI * 2)));\n        var daysPerYear = 365.25;\n        if (DT.isLeap(year, true)) {\n            Grids._monthDays[1] = 29;\n            daysPerYear = 366;\n        } else {\n            Grids._monthDays[1] = 28;\n            daysPerYear = 365;\n        }\n        var count = 2 * ss.truncate(daysPerYear);\n        Grids._eclipticCount = ss.truncate(daysPerYear);\n        var jYear = SpaceTimeController.utcToJulian(new Date(year, 0, 1, 12, 0, 0));\n        var index = 0;\n        var d = 0;\n        Grids._eclipticOverviewLineList = new SimpleLineList();\n        Grids._eclipticOverviewLineList.set_depthBuffered(false);\n        for (var m = 0; m < 12; m++) {\n            var daysThisMonth = ss.truncate(Grids._monthDays[m]);\n            for (var i = 0; i < daysThisMonth; i++) {\n                var sunRaDec = Planets.getPlanetLocationJD('Sun', jYear);\n                var sunEcliptic = CT.eq2Ec(sunRaDec.RA, sunRaDec.dec, obliquity);\n                d = sunEcliptic.x;\n                var width = 0.005;\n                if (!i) {\n                    width = 0.01;\n                }\n                var dd = d;\n                Grids._eclipticOverviewLineList.addLine(Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), width, Math.sin((dd * Math.PI * 2) / 360)), mat), Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), -width, Math.sin((dd * Math.PI * 2) / 360)), mat));\n                index++;\n                jYear += 1;\n            }\n            d += Grids._monthDays[m];\n        }\n    }\n    Grids._eclipticOverviewLineList.drawLines(renderContext, opacity, drawColor);\n    return true;\n};\n\nGrids.drawEclipticText = function (renderContext, opacity, drawColor) {\n    Grids._makeEclipticText();\n    Grids._eclipOvTextBatch.draw(renderContext, opacity, drawColor);\n    return true;\n};\n\nGrids._makeEclipticText = function () {\n    var year = SpaceTimeController.get_now().getUTCFullYear();\n    if (Grids._eclipOvTextBatch == null) {\n        Grids._eclipOvTextBatch = new Text3dBatch(80);\n        Grids._eclipticTextYear = year;\n        var obliquity = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow());\n        var mat = Matrix3d._rotationX((-obliquity / 360 * (Math.PI * 2)));\n        var daysPerYear = 365.25;\n        if (DT.isLeap(year, true)) {\n            Grids._monthDays[1] = 29;\n            daysPerYear = 366;\n        } else {\n            Grids._monthDays[1] = 28;\n            daysPerYear = 365;\n        }\n        var count = 2 * ss.truncate(daysPerYear);\n        Grids._eclipticCount = ss.truncate(daysPerYear);\n        var jYear = SpaceTimeController.utcToJulian(new Date(year, 0, 1, 12, 0, 0));\n        var index = 0;\n        var d = 0;\n        for (var m = 0; m < 12; m++) {\n            var daysThisMonth = ss.truncate(Grids._monthDays[m]);\n            for (var i = 0; i < daysThisMonth; i++) {\n                var sunRaDec = Planets.getPlanetLocationJD('Sun', jYear);\n                var sunEcliptic = CT.eq2Ec(sunRaDec.RA, sunRaDec.dec, obliquity);\n                d = sunEcliptic.x;\n                var dd = d;\n                if (i === Math.floor(daysThisMonth / 2)) {\n                    var center = Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), 0.025, Math.sin((dd * Math.PI * 2) / 360)), mat);\n                    var up = Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), 0.045, Math.sin((dd * Math.PI * 2) / 360)), mat);\n                    up.subtract(center);\n                    up.normalize();\n                    Grids._eclipOvTextBatch.add(new Text3d(center, up, Grids._monthNames[m], 80, 0.000159375));\n                }\n                index++;\n                index++;\n                jYear += 1;\n            }\n            d += Grids._monthDays[m];\n        }\n    }\n};\n\nGrids.drawPrecessionChart = function (renderContext, opacity, drawColor) {\n    Grids._makePrecessionChart();\n    Grids._precTextBatch.draw(renderContext, opacity, drawColor);\n    Grids._precLineList.drawLines(renderContext, opacity, drawColor);\n    return true;\n};\n\nGrids._makePrecessionChart = function () {\n    var obliquity = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow());\n    var mat = Matrix3d._rotationX((obliquity / 360 * (Math.PI * 2)));\n    var col = Colors.get_white();\n    if (Grids._precLineList == null) {\n        Grids._precLineList = new SimpleLineList();\n        Grids._precLineList.set_depthBuffered(false);\n        for (var l = 0; l < 360; l++) {\n            var b = 90 - obliquity;\n            Grids._precLineList.addLine(Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, b, 1), mat), Vector3d._transformCoordinate(Coordinates.raDecTo3dAu((l + 1) / 15, b, 1), mat));\n        }\n        for (var l = -12000; l < 13000; l += 2000) {\n            var b = 90 - obliquity;\n            var p = -((l - 2000) / 25772 * 24) - 6;\n            Grids._precLineList.addLine(Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(p, b - 0.5, 1), mat), Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(p, b + 0.5, 1), mat));\n        }\n    }\n    if (Grids._precTextBatch == null) {\n        Grids._precTextBatch = new Text3dBatch(50);\n        for (var l = -12000; l < 13000; l += 2000) {\n            var b = 90 - obliquity + 3;\n            var p = -((l - 2000) / 25772 * 24) - 6;\n            var text = l.toString();\n            if (!l) {\n                b = 90 - obliquity + 2;\n                text = '1 CE';\n            }\n            else if (l < 0) {\n                text = '  ' + Math.abs(l).toString() + ' BCE';\n            }\n            else {\n                text = Math.abs(l).toString() + ' CE';\n            }\n            if (text.length === 9) {\n                text = '   ' + text;\n            }\n            Grids._precTextBatch.add(new Text3d(Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(p, b, 1), mat), Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(p + 0.01, b, 1), mat), text, 75, 0.00015));\n        }\n    }\n    return;\n};\n\nGrids.drawAltAzGrid = function (renderContext, opacity, drawColor) {\n    var zenithAltAz = new Coordinates(0, 0);\n    var zenith = Coordinates.horizonToEquitorial(zenithAltAz, SpaceTimeController.get_location(), SpaceTimeController.get_now());\n    var raPart = -((zenith.get_RA() + 6) / 24 * (Math.PI * 2));\n    var decPart = -(zenith.get_dec() / 360 * (Math.PI * 2));\n    var raText = Coordinates.formatDMS(zenith.get_RA());\n    var mat = Matrix3d._rotationY(-raPart);\n    mat._multiply(Matrix3d._rotationX(decPart));\n    mat.invert();\n    if (Grids._altAzLineList == null) {\n        Grids._altAzLineList = new SimpleLineList();\n        Grids._altAzLineList.set_depthBuffered(false);\n        for (var l = 0; l < 360; l += 10) {\n            for (var b = -80; b < 80; b += 2) {\n                Grids._altAzLineList.addLine(Coordinates.raDecTo3dAu(l / 15, b, 1), Coordinates.raDecTo3dAu(l / 15, b + 2, 1));\n            }\n        }\n        for (var b = -80; b <= 80; b += 10) {\n            for (var l = 0; l < 360; l += 5) {\n                Grids._altAzLineList.addLine(Coordinates.raDecTo3dAu(l / 15, b, 1), Coordinates.raDecTo3dAu((l + 5) / 15, b, 1));\n            }\n        }\n        var counter = 0;\n        for (var l = 0; l < 360; l += 1) {\n            var b = 0.25;\n            switch (counter % 10) {\n                case 0:\n                    counter++;\n                    continue;\n                case 5:\n                    b = 0.5;\n                    break;\n            }\n            counter++;\n            Grids._altAzLineList.addLine(Coordinates.raDecTo3dAu(l / 15, b, 1), Coordinates.raDecTo3dAu(l / 15, -b, 1));\n        }\n        counter = 0;\n        for (var l = 0; l < 360; l += 90) {\n            counter = 0;\n            for (var b = -80; b <= 80; b += 1) {\n                var width = 0.5 / 2;\n                switch (counter % 10) {\n                    case 0:\n                        counter++;\n                        continue;\n                    case 5:\n                        width = 0.5;\n                        break;\n                }\n                counter++;\n                Grids._altAzLineList.addLine(Coordinates.raDecTo3dAu((l + width) / 15, b, 1), Coordinates.raDecTo3dAu((l - width) / 15, b, 1));\n            }\n        }\n    }\n    var matOldWorld = renderContext.get_world().clone();\n    var matOldWorldBase = renderContext.get_worldBase().clone();\n    renderContext.set_worldBase(Matrix3d.multiplyMatrix(mat, renderContext.get_world()));\n    renderContext.set_world(renderContext.get_worldBase().clone());\n    renderContext.makeFrustum();\n    Grids._altAzLineList.viewTransform = Matrix3d.invertMatrix(mat);\n    Grids._altAzLineList.drawLines(renderContext, opacity, drawColor);\n    renderContext.set_worldBase(matOldWorldBase);\n    renderContext.set_world(matOldWorld);\n    renderContext.makeFrustum();\n    return true;\n};\n\nGrids.drawAltAzGridText = function (renderContext, opacity, drawColor) {\n    var zenithAltAz = new Coordinates(0, 0);\n    var zenith = Coordinates.horizonToEquitorial(zenithAltAz, SpaceTimeController.get_location(), SpaceTimeController.get_now());\n    var raPart = -((zenith.get_RA() - 6) / 24 * (Math.PI * 2));\n    var decPart = -(zenith.get_dec() / 360 * (Math.PI * 2));\n    var raText = Coordinates.formatDMS(zenith.get_RA());\n    var mat = Matrix3d._rotationY(-raPart - Math.PI);\n    mat._multiply(Matrix3d._rotationX(decPart));\n    mat.invert();\n    Grids._makeAltAzGridText();\n    var matOldWorld = renderContext.get_world().clone();\n    var matOldWorldBase = renderContext.get_worldBase().clone();\n    renderContext.set_worldBase(Matrix3d.multiplyMatrix(mat, renderContext.get_world()));\n    renderContext.set_world(renderContext.get_worldBase().clone());\n    renderContext.makeFrustum();\n    Grids._altAzTextBatch.viewTransform = Matrix3d.invertMatrix(mat);\n    Grids._altAzTextBatch.draw(renderContext, opacity, drawColor);\n    renderContext.set_worldBase(matOldWorldBase);\n    renderContext.set_world(matOldWorld);\n    renderContext.makeFrustum();\n    return true;\n};\n\nGrids._makeAltAzGridText = function () {\n    var drawColor = Colors.get_white();\n    var index = 0;\n    if (Grids._altAzTextBatch == null) {\n        Grids._altAzTextBatch = new Text3dBatch(30);\n        for (var l = 0; l < 360; l += 10) {\n            var text = '       ' + l.toString();\n            if (l < 10) {\n                text = '   ' + l.toString();\n            }\n            else if (l < 100) {\n                text = '     ' + l.toString();\n            }\n            var lc = 360 - l;\n            Grids._altAzTextBatch.add(new Text3d(Coordinates.raDecTo3dAu(lc / 15 - 6, 0.4, 1), Coordinates.raDecTo3dAu(lc / 15 - 6, 0.5, 1), text, 75, 0.00018));\n        }\n        index = 0;\n        for (var l = 0; l < 360; l += 90) {\n            for (var b = -80; b <= 80; b += 10) {\n                if (!b) {\n                    continue;\n                }\n                var text = b.toString();\n                if (b > 0) {\n                    text = '  +' + b.toString();\n                    Grids._altAzTextBatch.add(new Text3d(Coordinates.raDecTo3dAu(l / 15, b - 0.4, 1), Coordinates.raDecTo3dAu(l / 15, b - 0.3, 1), text, 75, 0.00018));\n                }\n                else {\n                    text = '  - ' + text.substr(1);\n                    Grids._altAzTextBatch.add(new Text3d(Coordinates.raDecTo3dAu(l / 15, b + 0.4, 1), Coordinates.raDecTo3dAu(l / 15, b + 0.5, 1), text, 75, 0.00018));\n                }\n                index++;\n            }\n        }\n    }\n    return;\n};\n\nGrids.drawEclipticGrid = function (renderContext, opacity, drawColor) {\n    if (Grids._eclipticLineList == null) {\n        Grids._eclipticLineList = new SimpleLineList();\n        Grids._eclipticLineList.set_depthBuffered(false);\n        var obliquity = Coordinates.meanObliquityOfEcliptic(2451545);\n        var mat = Matrix3d._rotationX((-obliquity / 360 * (Math.PI * 2)));\n        for (var l = 0; l < 360; l += 10) {\n            for (var b = -80; b < 80; b += 2) {\n                Grids._eclipticLineList.addLine(Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, b, 1), mat), Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, b + 2, 1), mat));\n            }\n        }\n        for (var b = -80; b <= 80; b += 10) {\n            for (var l = 0; l < 360; l += 5) {\n                Grids._eclipticLineList.addLine(Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, b, 1), mat), Vector3d._transformCoordinate(Coordinates.raDecTo3dAu((l + 5) / 15, b, 1), mat));\n            }\n        }\n        var counter = 0;\n        for (var l = 0; l < 360; l += 1) {\n            var b = 0.25;\n            switch (counter % 10) {\n                case 0:\n                    counter++;\n                    continue;\n                case 5:\n                    b = 0.5;\n                    break;\n            }\n            counter++;\n            Grids._eclipticLineList.addLine(Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, b, 1), mat), Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, -b, 1), mat));\n        }\n        counter = 0;\n        for (var l = 0; l < 360; l += 90) {\n            counter = 0;\n            for (var b = -80; b <= 80; b += 1) {\n                var width = 0.5 / 2;\n                switch (counter % 10) {\n                    case 0:\n                        counter++;\n                        continue;\n                    case 5:\n                        width = 0.5;\n                        break;\n                }\n                counter++;\n                Grids._eclipticLineList.addLine(Vector3d._transformCoordinate(Coordinates.raDecTo3dAu((l + width) / 15, b, 1), mat), Vector3d._transformCoordinate(Coordinates.raDecTo3dAu((l - width) / 15, b, 1), mat));\n            }\n        }\n    }\n    Grids._eclipticLineList.drawLines(renderContext, opacity, drawColor);\n    return true;\n};\n\nGrids.drawEclipticGridText = function (renderContext, opacity, drawColor) {\n    Grids._makeEclipticGridText();\n    Grids._eclipticTextBatch.draw(renderContext, opacity, drawColor);\n    return true;\n};\n\nGrids._makeEclipticGridText = function () {\n    var drawColor = Colors.get_white();\n    var obliquity = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow());\n    var mat = Matrix3d._rotationX((-obliquity / 360 * (Math.PI * 2)));\n    if (Grids._eclipticTextBatch == null) {\n        Grids._eclipticTextBatch = new Text3dBatch(30);\n        for (var l = 0; l < 360; l += 10) {\n            var text = '       ' + l.toString();\n            if (l < 10) {\n                text = '   ' + l.toString();\n            }\n            else if (l < 100) {\n                text = '     ' + l.toString();\n            }\n            Grids._eclipticTextBatch.add(new Text3d(Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, 0.4, 1), mat), Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, 0.5, 1), mat), text, 75, 0.00018));\n        }\n        for (var l = 0; l < 360; l += 90) {\n            for (var b = -80; b <= 80; b += 10) {\n                if (!b) {\n                    continue;\n                }\n                var text = b.toString();\n                if (b > 0) {\n                    text = '  +' + b.toString();\n                    Grids._eclipticTextBatch.add(new Text3d(Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, b - 0.4, 1), mat), Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, b - 0.3, 1), mat), text, 75, 0.00018));\n                }\n                else {\n                    text = '  - ' + text.substr(1);\n                    Grids._eclipticTextBatch.add(new Text3d(Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, b + 0.4, 1), mat), Vector3d._transformCoordinate(Coordinates.raDecTo3dAu(l / 15, b + 0.5, 1), mat), text, 75, 0.00018));\n                }\n            }\n        }\n    }\n    return;\n};\n\nGrids.drawGalacticGrid = function (renderContext, opacity, drawColor) {\n    if (Grids._galLineList == null) {\n        Grids._galLineList = new SimpleLineList();\n        Grids._galLineList.set_depthBuffered(false);\n        for (var l = 0; l < 360; l += 10) {\n            for (var b = -80; b < 80; b += 2) {\n                Grids._galLineList.addLine(Coordinates.galacticTo3dDouble(l, b), Coordinates.galacticTo3dDouble(l, b + 2));\n            }\n        }\n        for (var b = -80; b <= 80; b += 10) {\n            for (var l = 0; l < 360; l += 5) {\n                Grids._galLineList.addLine(Coordinates.galacticTo3dDouble(l, b), Coordinates.galacticTo3dDouble(l + 5, b));\n            }\n        }\n        var counter = 0;\n        for (var l = 0; l < 360; l += 1) {\n            var b = 0.25;\n            switch (counter % 10) {\n                case 0:\n                    counter++;\n                    continue;\n                case 5:\n                    b = 0.5;\n                    break;\n            }\n            counter++;\n            Grids._galLineList.addLine(Coordinates.galacticTo3dDouble(l, b), Coordinates.galacticTo3dDouble(l, -b));\n        }\n        counter = 0;\n        for (var l = 0; l < 360; l += 90) {\n            counter = 0;\n            for (var b = -80; b <= 80; b += 1) {\n                var width = 0.5 / 2;\n                switch (counter % 10) {\n                    case 0:\n                        counter++;\n                        continue;\n                    case 5:\n                        width = 0.5;\n                        break;\n                }\n                counter++;\n                Grids._galLineList.addLine(Coordinates.galacticTo3dDouble(l + width, b), Coordinates.galacticTo3dDouble(l - width, b));\n            }\n        }\n    }\n    Grids._galLineList.drawLines(renderContext, opacity, drawColor);\n    return true;\n};\n\nGrids.drawGalacticGridText = function (renderContext, opacity, drawColor) {\n    Grids._makeGalacticGridText();\n    Grids._galTextBatch.draw(renderContext, opacity, drawColor);\n    return true;\n};\n\nGrids._makeGalacticGridText = function () {\n    if (Grids._galTextBatch == null) {\n        Grids._galTextBatch = new Text3dBatch(30);\n        for (var l = 0; l < 360; l += 10) {\n            var text = '       ' + l.toString();\n            if (l < 10) {\n                text = '   ' + l.toString();\n            }\n            else if (l < 100) {\n                text = '     ' + l.toString();\n            }\n            Grids._galTextBatch.add(new Text3d(Coordinates.galacticTo3dDouble(l, 0.4), Coordinates.galacticTo3dDouble(l, 0.5), text, 75, 0.00018));\n        }\n        for (var l = 0; l < 360; l += 90) {\n            for (var b = -80; b <= 80; b += 10) {\n                if (!b) {\n                    continue;\n                }\n                var text = b.toString();\n                if (b > 0) {\n                    text = '  +' + b.toString();\n                    Grids._galTextBatch.add(new Text3d(Coordinates.galacticTo3dDouble(l, b - 0.4), Coordinates.galacticTo3dDouble(l, b - 0.3), text, 75, 0.00018));\n                }\n                else {\n                    text = '  - ' + text.substr(1);\n                    Grids._galTextBatch.add(new Text3d(Coordinates.galacticTo3dDouble(l, b + 0.4), Coordinates.galacticTo3dDouble(l, b + 0.5), text, 75, 0.00018));\n                }\n            }\n        }\n    }\n};\n\nGrids.drawPlanetGrid = function (renderContext, opacity, drawColor) {\n    if (Grids._planetLineList == null) {\n        Grids._planetLineList = new SimpleLineList();\n        Grids._planetLineList.set_depthBuffered(true);\n        var col = drawColor;\n        for (var lng = 0; lng < 360; lng += 10) {\n            for (var lat = -80; lat < 80; lat += 2) {\n                Grids._planetLineList.addLine(Coordinates.geoTo3dDouble(lat, lng), Coordinates.geoTo3dDouble(lat + 2, lng));\n            }\n        }\n        for (var lat = -80; lat <= 80; lat += 10) {\n            for (var l = 0; l < 360; l += 5) {\n                Grids._planetLineList.addLine(Coordinates.geoTo3dDouble(lat, l), Coordinates.geoTo3dDouble(lat, l + 5));\n            }\n        }\n        var counter = 0;\n        for (var lng = 0; lng < 360; lng += 1) {\n            var lat = 0.25;\n            switch (counter % 10) {\n                case 0:\n                    counter++;\n                    continue;\n                case 5:\n                    lat = 0.5;\n                    break;\n            }\n            counter++;\n            Grids._planetLineList.addLine(Coordinates.geoTo3dDouble(lat, lng), Coordinates.geoTo3dDouble(-lat, lng));\n        }\n        counter = 0;\n        for (var lng = 0; lng < 360; lng += 90) {\n            counter = 0;\n            for (var b = -80; b <= 80; b += 1) {\n                var width = 0.5 / 2;\n                switch (counter % 10) {\n                    case 0:\n                        counter++;\n                        continue;\n                    case 5:\n                        width = 0.5;\n                        break;\n                }\n                counter++;\n                Grids._planetLineList.addLine(Coordinates.geoTo3dDouble(b, lng + width), Coordinates.geoTo3dDouble(b, lng - width));\n            }\n        }\n    }\n    Grids._planetLineList.aaFix = false;\n    Grids._planetLineList.set_depthBuffered(true);\n    Grids._planetLineList.sky = false;\n    Grids._planetLineList.drawLines(renderContext, opacity, drawColor);\n    return true;\n};\n\nGrids.drawPlanetGridText = function (renderContext, opacity, drawColor) {\n    Grids._makePlanetGridText();\n    Grids._planetTextBatch.draw(renderContext, opacity, drawColor);\n    return true;\n};\n\nGrids._makePlanetGridText = function () {\n    if (Grids._planetTextBatch == null) {\n        Grids._planetTextBatch = new Text3dBatch(80);\n        for (var lng = -180; lng < 180; lng += 10) {\n            var text = '       ' + lng.toString();\n            if (lng < 10) {\n                text = '   ' + lng.toString();\n            }\n            else if (lng < 100) {\n                text = '     ' + lng.toString();\n            }\n            Grids._planetTextBatch.add(new Text3d(Coordinates.geoTo3dDouble(0.4, lng), Coordinates.geoTo3dDouble(0.5, lng), text, -80, 6E-05));\n        }\n        for (var lng = 0; lng < 360; lng += 90) {\n            for (var lat = -80; lat <= 80; lat += 10) {\n                if (!lat) {\n                    continue;\n                }\n                var text = lat.toString();\n                if (lat > 0) {\n                    text = '  +' + lat.toString();\n                    Grids._planetTextBatch.add(new Text3d(Coordinates.geoTo3dDouble(lat - 0.4, lng), Coordinates.geoTo3dDouble(lat - 0.3, lng), text, -80, 6E-05));\n                }\n                else {\n                    text = '  - ' + text.substring(1);\n                    Grids._planetTextBatch.add(new Text3d(Coordinates.geoTo3dDouble(lat + 0.4, lng), Coordinates.geoTo3dDouble(lat + 0.5, lng), text, -80, 6E-05));\n                }\n            }\n        }\n    }\n};\n\nvar Grids$ = {};\n\nregisterType(\"Grids\", [Grids, Grids$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Data tables relating to HEALPix.\n\nimport { registerType } from \"./typesystem.js\";\n\n\n// wwtlib.HealpixTables\n\nexport function HealpixTables() { }\n\nHealpixTables.ctab = [0, 1, 256, 257, 2, 3, 258, 259, 512, 513, 768, 769, 514, 515, 770, 771, 4, 5, 260, 261, 6, 7, 262, 263, 516, 517, 772, 773, 518, 519, 774, 775, 1024, 1025, 1280, 1281, 1026, 1027, 1282, 1283, 1536, 1537, 1792, 1793, 1538, 1539, 1794, 1795, 1028, 1029, 1284, 1285, 1030, 1031, 1286, 1287, 1540, 1541, 1796, 1797, 1542, 1543, 1798, 1799, 8, 9, 264, 265, 10, 11, 266, 267, 520, 521, 776, 777, 522, 523, 778, 779, 12, 13, 268, 269, 14, 15, 270, 271, 524, 525, 780, 781, 526, 527, 782, 783, 1032, 1033, 1288, 1289, 1034, 1035, 1290, 1291, 1544, 1545, 1800, 1801, 1546, 1547, 1802, 1803, 1036, 1037, 1292, 1293, 1038, 1039, 1294, 1295, 1548, 1549, 1804, 1805, 1550, 1551, 1806, 1807, 2048, 2049, 2304, 2305, 2050, 2051, 2306, 2307, 2560, 2561, 2816, 2817, 2562, 2563, 2818, 2819, 2052, 2053, 2308, 2309, 2054, 2055, 2310, 2311, 2564, 2565, 2820, 2821, 2566, 2567, 2822, 2823, 3072, 3073, 3328, 3329, 3074, 3075, 3330, 3331, 3584, 3585, 3840, 3841, 3586, 3587, 3842, 3843, 3076, 3077, 3332, 3333, 3078, 3079, 3334, 3335, 3588, 3589, 3844, 3845, 3590, 3591, 3846, 3847, 2056, 2057, 2312, 2313, 2058, 2059, 2314, 2315, 2568, 2569, 2824, 2825, 2570, 2571, 2826, 2827, 2060, 2061, 2316, 2317, 2062, 2063, 2318, 2319, 2572, 2573, 2828, 2829, 2574, 2575, 2830, 2831, 3080, 3081, 3336, 3337, 3082, 3083, 3338, 3339, 3592, 3593, 3848, 3849, 3594, 3595, 3850, 3851, 3084, 3085, 3340, 3341, 3086, 3087, 3342, 3343, 3596, 3597, 3852, 3853, 3598, 3599, 3854, 3855];\nHealpixTables.utab = [0, 1, 4, 5, 16, 17, 20, 21, 64, 65, 68, 69, 80, 81, 84, 85, 256, 257, 260, 261, 272, 273, 276, 277, 320, 321, 324, 325, 336, 337, 340, 341, 1024, 1025, 1028, 1029, 1040, 1041, 1044, 1045, 1088, 1089, 1092, 1093, 1104, 1105, 1108, 1109, 1280, 1281, 1284, 1285, 1296, 1297, 1300, 1301, 1344, 1345, 1348, 1349, 1360, 1361, 1364, 1365, 4096, 4097, 4100, 4101, 4112, 4113, 4116, 4117, 4160, 4161, 4164, 4165, 4176, 4177, 4180, 4181, 4352, 4353, 4356, 4357, 4368, 4369, 4372, 4373, 4416, 4417, 4420, 4421, 4432, 4433, 4436, 4437, 5120, 5121, 5124, 5125, 5136, 5137, 5140, 5141, 5184, 5185, 5188, 5189, 5200, 5201, 5204, 5205, 5376, 5377, 5380, 5381, 5392, 5393, 5396, 5397, 5440, 5441, 5444, 5445, 5456, 5457, 5460, 5461, 16384, 16385, 16388, 16389, 16400, 16401, 16404, 16405, 16448, 16449, 16452, 16453, 16464, 16465, 16468, 16469, 16640, 16641, 16644, 16645, 16656, 16657, 16660, 16661, 16704, 16705, 16708, 16709, 16720, 16721, 16724, 16725, 17408, 17409, 17412, 17413, 17424, 17425, 17428, 17429, 17472, 17473, 17476, 17477, 17488, 17489, 17492, 17493, 17664, 17665, 17668, 17669, 17680, 17681, 17684, 17685, 17728, 17729, 17732, 17733, 17744, 17745, 17748, 17749, 20480, 20481, 20484, 20485, 20496, 20497, 20500, 20501, 20544, 20545, 20548, 20549, 20560, 20561, 20564, 20565, 20736, 20737, 20740, 20741, 20752, 20753, 20756, 20757, 20800, 20801, 20804, 20805, 20816, 20817, 20820, 20821, 21504, 21505, 21508, 21509, 21520, 21521, 21524, 21525, 21568, 21569, 21572, 21573, 21584, 21585, 21588, 21589, 21760, 21761, 21764, 21765, 21776, 21777, 21780, 21781, 21824, 21825, 21828, 21829, 21840, 21841, 21844, 21845];\n\n// coordinate of the lowest corner of each face\nHealpixTables.jrll = [2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4];\nHealpixTables.jpll = [1, 3, 5, 7, 0, 2, 4, 6, 1, 3, 5, 7];\nHealpixTables.xoffset = [-1, -1, 0, 1, 1, 1, 0, -1];\nHealpixTables.yoffset = [0, 1, 1, 1, 0, -1, -1, -1];\n\nvar HealpixTables$ = {};\n\nregisterType(\"HealpixTables\", [HealpixTables, HealpixTables$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A tile in a pyramid that uses a HEALPix projection.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport {\n    tileCacheAddTileToQueue,\n    tileCacheGetTile,\n    tileCacheRemoveFromQueue,\n    tilePrepDevice,\n    set_tileDemEnabled,\n} from \"./render_globals.js\";\nimport { Vector3d, Matrix3d, ConvexHull, PositionTexture } from \"./double3d.js\";\nimport { DistanceCalc } from \"./util.js\";\nimport { WEBGL } from \"./graphics/webgl_constants.js\";\nimport { Coordinates } from \"./coordinates.js\";\nimport { Fxyf } from \"./fxyf.js\";\nimport { WebFile } from \"./web_file.js\";\nimport { UiTools } from \"./ui_tools.js\";\nimport { Tile } from \"./tile.js\";\n\n\n// wwtlib.Xyf\n\nexport function Xyf() {\n    this.ix = 0;\n    this.iy = 0;\n    this.face = 0;\n}\n\nXyf.create = function (x, y, f) {\n    var temp = new Xyf();\n    temp.ix = x;\n    temp.iy = y;\n    temp.face = f;\n    return temp;\n};\n\nvar Xyf$ = {};\n\nregisterType(\"Xyf\", [Xyf, Xyf$, null]);\n\n\n// wwtlib.HealpixTile\n\nexport function HealpixTile(level, x, y, dataset, parent) {\n    this.ipix = 0;\n    this.indexBuffer = new Array(4);\n    this._vertexList$1 = null;\n    this._nside$1 = 0;\n    this._tileIndex$1 = 0;\n    this._face$1 = 0;\n    this._faceX$1 = 0;\n    this._faceY$1 = 0;\n    this._step$1 = 0;\n    this._subDivided$1 = false;\n    this._catalogRows$1 = [];\n    Tile.call(this);\n    this.level = level;\n    this.tileX = x;\n    this.tileY = y;\n    this.dataset = dataset;\n    set_tileDemEnabled(false);\n\n    if (!level) {\n        this._nside$1 = 4;\n    } else {\n        this._nside$1 = Math.pow(2, level + 1);\n    }\n\n    if (parent == null) {\n        this._face$1 = x * 4 + y;\n        this.ipix = this._face$1;\n    } else {\n        this.parent = parent;\n        var parentTile = parent;\n        this._face$1 = parentTile._face$1;\n        this._tileIndex$1 = parentTile._tileIndex$1 * 4 + y * 2 + x;\n        this.ipix = this._face$1 * this._nside$1 * this._nside$1 / 4 + this._tileIndex$1;\n        this._faceX$1 = parentTile._faceX$1 * 2 + x;\n        this._faceY$1 = parentTile._faceY$1 * 2 + y;\n    }\n    this.isCatalogTile = ss.keyExists(dataset.get_hipsProperties().get_properties(), 'dataproduct_type') && dataset.get_hipsProperties().get_properties()['dataproduct_type'].toLowerCase() === 'catalog';\n    this._computeBoundingSphere$1();\n}\n\nHealpixTile._galacticMatrix$1 = Matrix3d.create(-0.0548755604024359, -0.483835015526738, -0.873437090247923, 0, -0.867666148981161, 0.455983776232537, -0.198076373464674, 0, 0.494109427943568, 0.746982244476371, -0.444829629919504, 0, 0, 0, 0, 1);\n\nvar HealpixTile$ = {\n    get_URL: function () {\n        if (this._url$1 == null) {\n            this._url$1 = this._getUrl$1(this.dataset, this.level, this.tileX, this.tileY);\n            return this._url$1;\n        } else {\n            return this._url$1;\n        }\n    },\n\n    _computeBoundingSphere$1: function () {\n        this._setStep$1();\n        this.createGeometry(null);\n        var pointList = new Array(this._vertexList$1.length);\n        for (var i = 0; i < this._vertexList$1.length; i++) {\n            pointList[i] = this._vertexList$1[i].position;\n        }\n        this._calcSphere$1(pointList);\n        this._setCorners$1();\n    },\n\n    createGeometry: function (renderContext) {\n        if (this._vertexList$1 != null) {\n            return true;\n        }\n        this._vertexList$1 = [];\n        this._populateVertexList$1(this._vertexList$1, this._step$1);\n        if (ss.keyExists(this.dataset.get_hipsProperties().get_properties(), 'hips_frame') && this.dataset.get_hipsProperties().get_properties()['hips_frame'] === 'galactic') {\n            for (var i = 0; i < this._vertexList$1.length; i++) {\n                var vert = this._vertexList$1[i];\n                HealpixTile._galacticMatrix$1.multiplyVector(vert.position);\n            }\n        }\n        this.triangleCount = this._step$1 * this._step$1 / 2;\n        var ui16array = new Uint16Array(3 * this.triangleCount);\n        var indexArray = ui16array;\n        if (!this._subDivided$1) {\n            try {\n                this._vertexBuffer = tilePrepDevice.createBuffer();\n                tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this._vertexBuffer);\n                var f32array = new Float32Array(this._vertexList$1.length * 5);\n                var buffer = f32array;\n                var index = 0;\n                var $enum1 = ss.enumerate(this._vertexList$1);\n                while ($enum1.moveNext()) {\n                    var vert = $enum1.current;\n                    index = this.addVertex(buffer, index, vert);\n                }\n                tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n                index = 0;\n                var offset = this._vertexList$1.length / (4 * this._step$1);\n\n                //0 0 = left\n                //1 0 = top\n                //1 1 = right\n                this._setIndexBufferForQuadrant$1(indexArray, 0, 1);\n                if (this._step$1 > 1) {\n                    this._setIndexBufferForQuadrant$1(indexArray, 0, 0);\n                    this._setIndexBufferForQuadrant$1(indexArray, 1, 1);\n                    this._setIndexBufferForQuadrant$1(indexArray, 1, 0);\n                }\n            }\n            catch (exception) {\n            }\n        }\n        return true;\n    },\n\n    _setIndexBufferForQuadrant$1: function (indexArray, x, y) {\n        var index = 0;\n        for (var i = x * this._step$1 / 2; i < (this._step$1 / 2) * (x + 1); i++) {\n            for (var j = y * this._step$1 / 2; j < (this._step$1 / 2) * (y + 1); j++) {\n                indexArray[index++] = (i * (this._step$1 + 1) + j);\n                indexArray[index++] = (1 + i * (this._step$1 + 1) + j);\n                indexArray[index++] = (this._step$1 + 1 + i * (this._step$1 + 1) + j);\n                indexArray[index++] = (1 + i * (this._step$1 + 1) + j);\n                indexArray[index++] = (this._step$1 + 1 + i * (this._step$1 + 1) + j);\n                indexArray[index++] = (this._step$1 + 2 + i * (this._step$1 + 1) + j);\n            }\n        }\n        this._processIndexBuffer$1(indexArray, x * 2 + y);\n    },\n\n    _getUrl$1: function (dataset, level, x, y) {\n        var extension = this._getHipsFileExtension$1();\n        var tileTextureIndex = -1;\n        if (!level) {\n            tileTextureIndex = this._face$1;\n        } else {\n            tileTextureIndex = this._face$1 * this._nside$1 * this._nside$1 / 4 + this._tileIndex$1;\n        }\n        var sb = new ss.StringBuilder();\n        var subDirIndex = Math.floor(tileTextureIndex / 10000) * 10000;\n        return ss.format(dataset.get_url(), level.toString(), subDirIndex.toString(), tileTextureIndex.toString() + extension);\n    },\n\n    _getHipsFileExtension$1: function () {\n        // The extension will contain either a space-separated list of types\n        // or a single type. We currently match preferred filetypes\n        // greedily. The extension must be exactly \".fits\" in order to\n        // render correctly -- not only because of the greedy matching here,\n        // but because there are other parts of the code that check for an\n        // exact match.\n\n        //prioritize transparent Png over other image formats\n        if (this.dataset.get_extension().toLowerCase().indexOf('png') > -1) {\n            return '.png';\n        }\n        if (this.dataset.get_extension().toLowerCase().indexOf('jpeg') > -1 || this.dataset.get_extension().toLowerCase().indexOf('jpg') > -1) {\n            return '.jpg';\n        }\n        if (this.dataset.get_extension().toLowerCase().indexOf('tsv') > -1) {\n            return '.tsv';\n        }\n        if (this.dataset.get_extension().toLowerCase().indexOf('fits') > -1) {\n            return '.fits';\n        }\n\n        //default to most common\n        return '.jpg';\n    },\n\n    isTileBigEnough: function (renderContext) {\n        if (this.dataset.get_dataSetType() === 1) {\n            var arcPixels = (180 / (Math.pow(2, this.level) * 4));\n            return (renderContext.get_fovScale() < arcPixels);\n        } else {\n            var arcPixels = (3600 / (Math.pow(2, this.level) * 4));\n            return (renderContext.get_fovScale() < arcPixels);\n        }\n    },\n\n    _boundaries$1: function (x, y, step) {\n        var nside = step * Math.pow(2, this.level);\n        var points = new Array(4);\n        var xyf = Xyf.create(x + this._faceX$1 * step, y + this._faceY$1 * step, this._face$1);\n        var dc = 0.5 / nside;\n        var xc = (xyf.ix + 0.5) / nside;\n        var yc = (xyf.iy + 0.5) / nside;\n        points[0] = Fxyf.create(xc + dc, yc + dc, xyf.face).toVec3();\n        points[1] = Fxyf.create(xc - dc, yc + dc, xyf.face).toVec3();\n        points[2] = Fxyf.create(xc - dc, yc - dc, xyf.face).toVec3();\n        points[3] = Fxyf.create(xc + dc, yc - dc, xyf.face).toVec3();\n        return points;\n    },\n\n    _setCorners$1: function () {\n        var xyf = Xyf.create(this.tileX, this.tileY, this._face$1);\n        var dc = 0.5 / this._nside$1;\n        var xc = (xyf.ix + 0.5) / this._nside$1;\n        var yc = (xyf.iy + 0.5) / this._nside$1;\n        this.topLeft = Fxyf.create(xc + dc, yc + dc, xyf.face).toVec3();\n        this.bottomLeft = Fxyf.create(xc - dc, yc + dc, xyf.face).toVec3();\n        this.bottomRight = Fxyf.create(xc - dc, yc - dc, xyf.face).toVec3();\n        this.topRight = Fxyf.create(xc + dc, yc - dc, xyf.face).toVec3();\n    },\n\n    draw3D: function (renderContext, opacity) {\n        if (this.isCatalogTile) {\n            this.drawCatalogTile(renderContext, opacity);\n            return true;\n        }\n        this.renderedGeneration = Tile.currentRenderGeneration;\n        Tile.tilesTouched++;\n        this.inViewFrustum = true;\n        var onlyDrawChildren = false;\n        if (!this.readyToRender) {\n            if (!this.errored) {\n                tileCacheAddTileToQueue(this);\n                return false;\n            }\n            if (this.errored && this.level < 3) {\n                //Level 0-2 sometimes deleted in favor of allsky.jpg/tsv\n                onlyDrawChildren = true;\n            }\n            else {\n                return false;\n            }\n        }\n        var partCount = this.triangleCount;\n        Tile.trianglesRendered += partCount;\n        var anythingToRender = false;\n        var childRendered = false;\n        var childIndex = 0;\n        for (var y1 = 0; y1 < 2; y1++) {\n            for (var x1 = 0; x1 < 2; x1++) {\n                if (this.level < this.dataset.get_levels()) {\n                    if (this.children[childIndex] == null) {\n                        this.children[childIndex] = tileCacheGetTile(this.level + 1, x1, y1, this.dataset, this);\n                    }\n                    if (this.children[childIndex].isTileInFrustum(renderContext.get_frustum())) {\n                        this.inViewFrustum = true;\n                        if (this.children[childIndex].isTileBigEnough(renderContext) || onlyDrawChildren) {\n                            this.renderChildPart[childIndex].set_targetState(!this.children[childIndex].draw3D(renderContext, opacity));\n                            if (this.renderChildPart[childIndex].get_targetState()) {\n                                childRendered = true;\n                            }\n                        }\n                        else {\n                            this.renderChildPart[childIndex].set_targetState(true);\n                        }\n                    }\n                    else {\n                        this.renderChildPart[childIndex].set_targetState(this.renderChildPart[childIndex].set_state(false));\n                    }\n                }\n                else {\n                    this.renderChildPart[childIndex].set_state(true);\n                }\n                if (!!this.renderChildPart[childIndex].get_state()) {\n                    anythingToRender = true;\n                }\n                childIndex++;\n            }\n        }\n        if (childRendered || anythingToRender) {\n            this.renderedAtOrBelowGeneration = Tile.currentRenderGeneration;\n            if (this.parent != null) {\n                this.parent.renderedAtOrBelowGeneration = this.renderedAtOrBelowGeneration;\n            }\n        }\n        if (!anythingToRender) {\n            return true;\n        }\n        if (!this.createGeometry(renderContext)) {\n            return false;\n        }\n        if (onlyDrawChildren) {\n            return true;\n        }\n        Tile.tilesInView++;\n        for (var i = 0; i < 4; i++) {\n            if (this.renderChildPart[i].get_targetState()) {\n                this.renderPart(renderContext, i, opacity / 100, false);\n            }\n        }\n        return true;\n    },\n\n    drawCatalogTile: function (renderContext, opacity) {\n        this.renderedGeneration = Tile.currentRenderGeneration;\n        Tile.tilesTouched++;\n        this.inViewFrustum = true;\n        var onlyDrawChildren = false;\n        if (!this.readyToRender) {\n            if (!this.errored) {\n                tileCacheAddTileToQueue(this);\n                return;\n            }\n            if (this.errored && this.level < 3) {\n                //Level 0-2 sometimes deleted in favor of allsky.jpg/tsv\n                onlyDrawChildren = true;\n            }\n            else {\n                return;\n            }\n        }\n        var anyChildInFrustum = false;\n        var childIndex = 0;\n        for (var y1 = 0; y1 < 2; y1++) {\n            for (var x1 = 0; x1 < 2; x1++) {\n                if (this.level < this.dataset.get_levels()) {\n                    if (this.children[childIndex] == null) {\n                        this.children[childIndex] = tileCacheGetTile(this.level + 1, x1, y1, this.dataset, this);\n                    }\n                    if (this.children[childIndex].isTileInFrustum(renderContext.get_frustum())) {\n                        this.inViewFrustum = true;\n                        anyChildInFrustum = true;\n                        if (this.children[childIndex].isTileBigEnough(renderContext) || onlyDrawChildren) {\n                            (this.children[childIndex]).drawCatalogTile(renderContext, opacity);\n                        }\n                        else {\n                            (this.children[childIndex]).removeCatalogTile();\n                        }\n                    }\n                    else {\n                        (this.children[childIndex]).removeCatalogTile();\n                    }\n                }\n                childIndex++;\n            }\n        }\n        if (!this.level && !anyChildInFrustum && !onlyDrawChildren) {\n            this.removeCatalogTile();\n        } else if (anyChildInFrustum) {\n            Tile.tilesInView++;\n            this._addCatalogTile$1();\n        }\n    },\n\n    removeCatalogTile: function () {\n        this.dataset.get_hipsProperties().get_catalogSpreadSheetLayer().removeTileRows(this.get_key(), this._catalogRows$1);\n    },\n\n    _addCatalogTile$1: function () {\n        this.dataset.get_hipsProperties().get_catalogSpreadSheetLayer().addTileRows(this.get_key(), this._catalogRows$1);\n    },\n\n    _extractCatalogTileRows$1: function () {\n        var headerRemoved = false;\n        var $enum1 = ss.enumerate(this._catalogData$1.getText().split('\\n'));\n        while ($enum1.moveNext()) {\n            var line = $enum1.current;\n            if (!ss.startsWith(line, '#') && !headerRemoved) {\n                headerRemoved = true;\n                continue;\n            }\n            if (!ss.startsWith(line, '#')) {\n                var rowData = UiTools.splitString(line, this.dataset.get_hipsProperties().get_catalogSpreadSheetLayer().get__table().delimiter);\n                this._catalogRows$1.push(rowData);\n            }\n        }\n    },\n\n    getDataInView: function (renderContext, limit, catalogSpreadSheetLayer) {\n        if (!this.readyToRender) {\n            if (!this.errored) {\n                this.requestImage();\n                if (limit) {\n                    return false;\n                }\n            }\n            else if (this.level >= 3) {\n                //Level 0-2 sometimes deleted in favor of allsky.jpg/tsv\n                return true;\n            }\n        }\n        var allChildrenReady = true;\n        var anyChildInFrustum = false;\n        var childIndex = 0;\n        for (var y1 = 0; y1 < 2; y1++) {\n            for (var x1 = 0; x1 < 2; x1++) {\n                if (this.level < this.dataset.get_levels()) {\n                    if (this.children[childIndex] == null) {\n                        this.children[childIndex] = tileCacheGetTile(this.level + 1, x1, y1, this.dataset, this);\n                    }\n                    if (this.children[childIndex].isTileInFrustum(renderContext.get_frustum())) {\n                        anyChildInFrustum = true;\n                        allChildrenReady = allChildrenReady && (this.children[childIndex]).getDataInView(renderContext, limit, catalogSpreadSheetLayer);\n                    }\n                }\n                childIndex++;\n            }\n        }\n        if (anyChildInFrustum) {\n            catalogSpreadSheetLayer.addTileRows(this.get_key(), this._catalogRows$1);\n        }\n        return allChildrenReady && !this.downloading;\n    },\n\n    _setStep$1: function () {\n        if (this.isCatalogTile) {\n            this._step$1 = 2;\n        } else {\n            switch (this.level) {\n                case 0:\n                case 1:\n                case 2:\n                case 3:\n                case 4:\n                    this._step$1 = 16;\n                    break;\n                case 5:\n                    this._step$1 = 8;\n                    break;\n                case 6:\n                    this._step$1 = 4;\n                    break;\n                default:\n                    this._step$1 = 2;\n                    break;\n            }\n        }\n    },\n\n    requestImage: function () {\n        if (this.isCatalogTile) {\n            if (!this.downloading && !this.readyToRender) {\n                this.downloading = true;\n                this._catalogData$1 = new WebFile(this.get_URL());\n                this._catalogData$1.onStateChange = ss.bind('_loadCatalogData$1', this);\n                this._catalogData$1.send();\n            }\n        } else {\n            Tile.prototype.requestImage.call(this);\n        }\n    },\n\n    _loadCatalogData$1: function () {\n        if (this._catalogData$1.get_state() === 2) {\n            this.requestPending = false;\n            this.downloading = false;\n            this.errored = true;\n            tileCacheRemoveFromQueue(this.get_key(), true);\n        } else if (this._catalogData$1.get_state() === 1) {\n            this._extractCatalogTileRows$1();\n            this.texReady = true;\n            this.downloading = false;\n            this.errored = false;\n            this.readyToRender = true;\n            this.requestPending = false;\n            tileCacheRemoveFromQueue(this.get_key(), true);\n        }\n    },\n\n    getIndexBuffer: function (index, accomidation) {\n        return this.indexBuffer[index];\n    },\n\n    _calcSphere$1: function (list) {\n        var result = ConvexHull.findEnclosingSphere(list);\n        this.sphereCenter = result.center;\n        this.sphereRadius = result.radius;\n    },\n\n    isPointInTile: function (lat, lng) {\n        if (!this.level) {\n            return true;\n        }\n        if (this.level === 1) {\n            if ((lng >= 0 && lng <= 90) && (!this.tileX && this.tileY === 1)) {\n                return true;\n            }\n            if ((lng > 90 && lng <= 180) && (this.tileX === 1 && this.tileY === 1)) {\n                return true;\n            }\n            if ((lng < 0 && lng >= -90) && (!this.tileX && !this.tileY)) {\n                return true;\n            }\n            if ((lng < -90 && lng >= -180) && (this.tileX === 1 && !this.tileY)) {\n                return true;\n            }\n        }\n        var testPoint = Coordinates.geoTo3dDouble(lat, lng);\n        var top = this._isLeftOfHalfSpace$1(this.topLeft, this.topRight, testPoint);\n        var right = this._isLeftOfHalfSpace$1(this.topRight, this.bottomRight, testPoint);\n        var bottom = this._isLeftOfHalfSpace$1(this.bottomRight, this.bottomLeft, testPoint);\n        var left = this._isLeftOfHalfSpace$1(this.bottomLeft, this.topLeft, testPoint);\n        if (top && right && bottom && left) {\n            return true;\n        }\n        return false;\n    },\n\n    _isLeftOfHalfSpace$1: function (pntA, pntB, pntTest) {\n        pntA.normalize();\n        pntB.normalize();\n        var cross = Vector3d.cross(pntA, pntB);\n        var dot = Vector3d.dot(cross, pntTest);\n        return dot > 0;\n    },\n\n    getSurfacePointAltitude: function (lat, lng, meters) {\n        if (this.level < Tile.lastDeepestLevel) {\n            var $enum1 = ss.enumerate(this.children);\n            while ($enum1.moveNext()) {\n                var child = $enum1.current;\n                if (child != null) {\n                    if (child.isPointInTile(lat, lng)) {\n                        var retVal = child.getSurfacePointAltitude(lat, lng, meters);\n                        if (!!retVal) {\n                            return retVal;\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return this._getAltitudeFromLatLng$1(lat, lng, meters);\n    },\n\n    _getAltitudeFromLatLng$1: function (lat, lng, meters) {\n        var testPoint = Coordinates.geoTo3dDouble(lat, lng);\n        var uv = DistanceCalc.getUVFromInnerPoint(this.topLeft, this.topRight, this.bottomLeft, this.bottomRight, testPoint);\n\n        // Get 4 samples and interpolate\n        var uud = Math.max(0, Math.min(16, (uv.x * 16)));\n        var vvd = Math.max(0, Math.min(16, (uv.y * 16)));\n        var uu = Math.max(0, Math.min(15, ss.truncate((uv.x * 16))));\n        var vv = Math.max(0, Math.min(15, ss.truncate((uv.y * 16))));\n        var ha = uud - uu;\n        var va = vvd - vv;\n        if (this.demArray != null) {\n            // 4 nearest neighbors\n            var ul = this.demArray[uu + 17 * vv];\n            var ur = this.demArray[(uu + 1) + 17 * vv];\n            var ll = this.demArray[uu + 17 * (vv + 1)];\n            var lr = this.demArray[(uu + 1) + 17 * (vv + 1)];\n            var top = ul * (1 - ha) + ha * ur;\n            var bottom = ll * (1 - ha) + ha * lr;\n            var val = top * (1 - va) + va * bottom;\n            return val / ((meters) ? 1 : this.get__demScaleFactor());\n        }\n        return this.demAverage / ((meters) ? 1 : this.get__demScaleFactor());\n    },\n\n    _processIndexBuffer$1: function (indexArray, part) {\n        this.indexBuffer[part] = tilePrepDevice.createBuffer();\n        tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, this.indexBuffer[part]);\n        tilePrepDevice.bufferData(WEBGL.ELEMENT_ARRAY_BUFFER, indexArray, WEBGL.STATIC_DRAW);\n    },\n\n    cleanUp: function (removeFromParent) {\n        Tile.prototype.cleanUp.call(this, removeFromParent);\n        this._returnBuffers$1();\n        this._subDivided$1 = false;\n    },\n\n    _returnBuffers$1: function () {\n        if (this._vertexList$1 != null) {\n            this._vertexList$1 = null;\n        }\n    },\n\n    // Vertices distributed in a grid pattern like the example below\n    // Example for pattern with step set to 4\n    //            24\n    //          19  23\n    //       14   18  22\n    //      9   13  17  21\n    //    4   8   12  16  20\n    //      3   7   11  15\n    //        2   6   10\n    //          1   5\n    //            0\n    _populateVertexList$1: function (vertexList, step) {\n        for (var i = 0; i < step; i += 2) {\n            for (var j = 0; j < step; j += 2) {\n                var points = this._boundaries$1(j, i, step);\n                vertexList[i * (step + 1) + j] = PositionTexture.createPos(points[2], (1 / step) * i, (1 / step) * j);\n                vertexList[i * (step + 1) + j + 1] = PositionTexture.createPos(points[3], (1 / step) * i, (1 / step) + (1 / step) * j);\n                vertexList[(i + 1) * (step + 1) + j] = PositionTexture.createPos(points[1], (1 / step) + (1 / step) * i, (1 / step) * j);\n                vertexList[(i + 1) * (step + 1) + j + 1] = PositionTexture.createPos(points[0], (1 / step) + (1 / step) * i, (1 / step) + (1 / step) * j);\n                if (j + 2 >= step && step > 1) {\n                    j = step - 1;\n                    points = this._boundaries$1(j, i, step);\n                    vertexList[i * (step + 1) + step] = PositionTexture.createPos(points[3], (1 / step) * i, (1 / step) + (1 / step) * j);\n                    vertexList[(i + 1) * (step + 1) + step] = PositionTexture.createPos(points[0], (1 / step) + (1 / step) * i, (1 / step) + (1 / step) * j);\n                }\n            }\n        }\n        if (step > 1) {\n            this._vertexOfLastRow$1(vertexList, step);\n        }\n    },\n\n    _vertexOfLastRow$1: function (vertexList, step) {\n        var i = step - 1;\n        for (var j = 0; j < step; j += 2) {\n            var points = this._boundaries$1(j, i, step);\n            vertexList[(i + 1) * (step + 1) + j] = PositionTexture.createPos(points[1], (1 / step) + (1 / step) * i, (1 / step) * j);\n            vertexList[(i + 1) * (step + 1) + j + 1] = PositionTexture.createPos(points[0], (1 / step) + (1 / step) * i, (1 / step) + (1 / step) * j);\n            if (j + 2 >= step) {\n                j = step - 1;\n                points = this._boundaries$1(j, i, step);\n                vertexList[(i + 1) * (step + 1) + step] = PositionTexture.createPos(points[0], (1 / step) + (1 / step) * i, (1 / step) + (1 / step) * j);\n            }\n        }\n    }\n};\n\nregisterType(\"HealpixTile\", [HealpixTile, HealpixTile$, Tile]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Utilities relating to HEALPix.\n\nimport { registerType } from \"./typesystem.js\";\nimport { FastMath } from \"./fast_math.js\";\n\n\n// wwtlib.HealpixUtils\n\nexport function HealpixUtils() { }\n\nHealpixUtils.check = function (cond, errtxt) {\n    if (!cond) {\n        throw new Error(errtxt);\n    }\n};\n\n// Integer square root.\nHealpixUtils.isqrt = function (arg) {\n    var res = Math.sqrt((arg) + 0.5);\n    if (arg < (1 << 50)) {\n        return res;\n    }\n    if (res * res > arg) {\n        --res;\n    }\n    else if ((res + 1) * (res + 1) <= arg) {\n        ++res;\n    }\n    return res;\n};\n\n// Computes the cosine of the angular distance between two z, phi positions on\n// the unit sphere\nHealpixUtils.cosdist_zphi = function (z1, phi1, z2, phi2) {\n    return z1 * z2 + FastMath.cos(phi1 - phi2) * Math.sqrt((1 - z1 * z1) * (1 - z2 * z2));\n};\n\nHealpixUtils.fmodulo = function (v1, v2) {\n    if (v1 >= 0) {\n        return (v1 < v2) ? v1 : v1 % v2;\n    }\n    var tmp = v1 % v2 + v2;\n    return (tmp === v2) ? 0 : tmp;\n};\n\nvar HealpixUtils$ = {};\n\nregisterType(\"HealpixUtils\", [HealpixUtils, HealpixUtils$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Summary properties about HiPS datasets.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { set_makeNewHipsProperties } from \"./data_globals.js\";\nimport { WebFile } from \"./web_file.js\";\nimport { Guid } from \"./util.js\";\nimport { CatalogSpreadSheetLayer } from \"./layers/spreadsheet_layer.js\";\nimport { VoTable } from \"./layers/vo_table.js\";\nimport { LayerManager } from \"./layers/layer_manager.js\";\n\n\n// wwtlib.HipsProperties\n\nexport function HipsProperties(dataset) {\n    this._properties = {};\n    this._catalogColumnInfo = null;\n    this._catalogSpreadSheetLayer = new CatalogSpreadSheetLayer();\n    this._downloadComplete = false;\n    this.dataset = dataset;\n    this._datasetName = dataset.get_name();\n    this._url = dataset.get_url();\n    if (this._url.toLowerCase().indexOf('norder') > -1) {\n        this._url = this._url.substring(0, this._url.toLowerCase().indexOf('norder'));\n    }\n    this._url += 'properties';\n    this._download();\n}\n\nvar HipsProperties$ = {\n    get_properties: function () {\n        return this._properties;\n    },\n\n    get_catalogSpreadSheetLayer: function () {\n        return this._catalogSpreadSheetLayer;\n    },\n\n    set_catalogSpreadSheetLayer: function (value) {\n        this._catalogSpreadSheetLayer = value;\n        return value;\n    },\n\n    get_catalogColumnInfo: function () {\n        return this._catalogColumnInfo;\n    },\n\n    set_catalogColumnInfo: function (value) {\n        this._catalogColumnInfo = value;\n        return value;\n    },\n\n    get_downloadComplete: function () {\n        return this._downloadComplete;\n    },\n\n    _download: function () {\n        this._webFile = new WebFile(this._url);\n        this._webFile.onStateChange = ss.bind('_onPropertiesDownloadComplete', this);\n        this._webFile.send();\n    },\n\n    _onPropertiesDownloadComplete: function () {\n        if (this._webFile.get_state() === 1) {\n            this._parseProperties(this._webFile.getText());\n            if (ss.keyExists(this.get_properties(), 'dataproduct_type') && this.get_properties()['dataproduct_type'].toLowerCase() === 'catalog') {\n                this._catalogColumnInfo = VoTable.loadFromUrl(ss.replaceString(this._url, '/properties', '/metadata.xml'), ss.bind('_onCatalogMetadataDownloadComplete', this));\n            }\n            else {\n                if (ss.keyExists(this.get_properties(), 'hips_data_range')) {\n                    var hips_data_range = this.get_properties()['hips_data_range'];\n                    this.dataset.get_fitsProperties().minVal = parseFloat(hips_data_range.split(' ')[0]);\n                    this.dataset.get_fitsProperties().maxVal = parseFloat(hips_data_range.split(' ')[1]);\n                    this.dataset.get_fitsProperties().lowerCut = this.dataset.get_fitsProperties().minVal;\n                    this.dataset.get_fitsProperties().upperCut = this.dataset.get_fitsProperties().maxVal;\n                }\n                if (ss.keyExists(this.get_properties(), 'hips_pixel_cut')) {\n                    var hips_pixel_cut = this.get_properties()['hips_pixel_cut'];\n                    this.dataset.get_fitsProperties().lowerCut = parseFloat(hips_pixel_cut.split(' ')[0]);\n                    this.dataset.get_fitsProperties().upperCut = parseFloat(hips_pixel_cut.split(' ')[1]);\n                    if (!ss.keyExists(this.get_properties(), 'hips_data_range')) {\n                        this.dataset.get_fitsProperties().minVal = this.dataset.get_fitsProperties().lowerCut;\n                        this.dataset.get_fitsProperties().maxVal = this.dataset.get_fitsProperties().upperCut;\n                    }\n                }\n                this._downloadComplete = true;\n                if (this._onDownloadComplete != null) {\n                    this._onDownloadComplete();\n                }\n            }\n        }\n    },\n\n    _onCatalogMetadataDownloadComplete: function () {\n        this._catalogSpreadSheetLayer.useHeadersFromVoTable(this._catalogColumnInfo);\n        this._catalogSpreadSheetLayer.set_name(this._datasetName);\n        this._catalogSpreadSheetLayer.id = Guid.createFrom(this._datasetName);\n        LayerManager.addSpreadsheetLayer(this.get_catalogSpreadSheetLayer(), 'Sky');\n        this._downloadComplete = true;\n        if (this._onDownloadComplete != null) {\n            this._onDownloadComplete();\n        }\n    },\n\n    setDownloadCompleteListener: function (listener) {\n        this._onDownloadComplete = listener;\n    },\n\n    _parseProperties: function (data) {\n        var lines = data.split('\\n');\n        var $enum1 = ss.enumerate(lines);\n        while ($enum1.moveNext()) {\n            var line = $enum1.current;\n            if (!ss.whitespace(line) && !ss.startsWith(line, '#')) {\n                var parts = line.split('=');\n                if (parts.length === 2) {\n                    var key = ss.trim(parts[0]);\n                    var val = ss.trim(parts[1]);\n                    if (!ss.whitespace(key) && !ss.whitespace(val)) {\n                        this.get_properties()[key] = val;\n                    }\n                }\n            }\n        }\n    }\n};\n\nregisterType(\"HipsProperties\", [HipsProperties, HipsProperties$, null]);\n\nset_makeNewHipsProperties(function (imageset) {\n    return new HipsProperties(imageset);\n});\n\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A HEALPix location type.\n\nimport { registerType } from \"./typesystem.js\";\nimport { Vector3d } from \"./double3d.js\";\nimport { FastMath } from \"./fast_math.js\";\n\n\n// wwtlib.Hploc\n\nexport function Hploc() {\n    this.z = 0;\n    this.phi = 0;\n    this.sth = 0;\n    this.have_sth = false;\n}\n\nHploc.create = function (v) {\n    var temp = new Hploc();\n    var xl = 1 / v.length();\n    temp.z = v.z * xl;\n    temp.phi = FastMath.atan2(v.y, v.x);\n    if (Math.abs(temp.z) > 0.99) {\n        temp.sth = Math.sqrt(v.x * v.x + v.y * v.y) * xl;\n        temp.have_sth = true;\n    }\n    return temp;\n};\n\nvar Hploc$ = {\n    toVec3: function () {\n        var st;\n        if (this.have_sth) {\n            st = this.sth;\n        } else {\n            st = Math.sqrt((1 - this.z) * (1 + this.z));\n        }\n        var x = st * FastMath.cos(this.phi);\n        var y = st * FastMath.sin(this.phi);\n        return Vector3d.create(x, this.z, y);\n    }\n};\n\nregisterType(\"Hploc\", [Hploc, Hploc$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// An image tile pyramid.\n\nimport { ss } from \"./ss.js\";\nimport { registerType, registerEnum, Enums } from \"./typesystem.js\";\nimport { freestandingMode, makeNewHipsProperties } from \"./data_globals.js\";\nimport { Matrix3d } from \"./double3d.js\";\nimport { Util } from \"./baseutil.js\";\nimport { IThumbnail } from \"./interfaces.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { Coordinates } from \"./coordinates.js\";\nimport { FitsProperties } from \"./fits_properties.js\";\nimport { FitsImage } from \"./layers/fits_image.js\";\nimport { EquirectangularTile } from \"./equirectangular_tile.js\";\nimport { HealpixTile } from \"./healpix_tile.js\";\nimport { MercatorTile } from \"./mercator_tile.js\";\nimport { PlotTile } from \"./plot_tile.js\";\nimport { TangentTile } from \"./tangent_tile.js\";\nimport { SkyImageTile } from \"./sky_image_tile.js\";\nimport { ToastTile } from \"./toast_tile.js\";\n\n\n// wwtlib.ProjectionType\n//\n// This was originally defined in `IImageset.cs`, not `Imageset.cs`, but we've\n// folded it into this file.\n\nexport var ProjectionType = {\n    mercator: 0,\n    equirectangular: 1,\n    tangent: 2,\n    tan: 2,\n    toast: 3,\n    spherical: 4,\n    skyImage: 5,\n    plotted: 6,\n    healpix: 7\n};\n\nregisterType(\"ProjectionType\", ProjectionType);\nregisterEnum(\"ProjectionType\", ProjectionType);\n\n\n// wwtlib.ImageSetType\n//\n// This was originally defined in `IImageset.cs`, not `Imageset.cs`, but we've\n// folded it into this file.\n\nexport var ImageSetType = {\n    earth: 0,\n    planet: 1,\n    sky: 2,\n    panorama: 3,\n    solarSystem: 4,\n    sandbox: 5\n};\n\nregisterType(\"ImageSetType\", ImageSetType);\nregisterEnum(\"ImageSetType\", ImageSetType);\n\n\n// wwtlib.BandPass\n//\n// This was originally defined in `IImageset.cs`, not `Imageset.cs`, but we've\n// folded it into this file.\n\nexport var BandPass = {\n    gamma: 0,\n    xRay: 1,\n    ultraviolet: 2,\n    visible: 3,\n    hydrogenAlpha: 4,\n    IR: 4,\n    microwave: 5,\n    radio: 6,\n    visibleNight: 6\n};\n\nregisterType(\"BandPass\", BandPass);\nregisterEnum(\"BandPass\", BandPass);\n\n\n// wwtlib.Imageset\n\nexport function Imageset() {\n    this._projection = 0;\n    this._imageSetID = 0;\n    this._baseTileDegrees = 0;\n    this._widthFactor = 1;\n    this.demUrl = '';\n    this._levels = 0;\n    this._mercator = false;\n    this._bottomsUp = false;\n    this._baseLevel = 1;\n    this._quadTreeTileMap = '0123';\n    this._centerX = 0;\n    this._centerY = 0;\n    this._rotation = 0;\n    this._meanRadius = 0;\n    this._dataSetType = 0;\n    this._bandPass = 3;\n    this._altUrl = '';\n    this._singleImage = false;\n    this._fitsProperties = new FitsProperties();\n    this._matrixComputed = false;\n    this._name = '';\n    this._sparse = false;\n    this._thumbnailUrl = '';\n    this._generic = false;\n    this._defaultSet = false;\n    this._elevationModel = false;\n    this._offsetX = 0;\n    this._offsetY = 0;\n}\n\nImageset.getNewTile = function (imageset, level, x, y, parent) {\n    // Note: \"spherical\" projection type not handled in the WebGL engine.\n    switch (imageset.get_projection()) {\n        case ProjectionType.mercator:\n            var newTile = MercatorTile.create(level, x, y, imageset, parent);\n            return newTile;\n        case ProjectionType.equirectangular:\n            return EquirectangularTile.create(level, x, y, imageset, parent);\n        case ProjectionType.toast:\n        default:\n            return ToastTile.create(level, x, y, imageset, parent);\n        case ProjectionType.skyImage:\n            return new SkyImageTile(level, x, y, imageset, parent);\n        case ProjectionType.plotted:\n            return PlotTile.create(level, x, y, imageset, parent);\n        case ProjectionType.healpix:\n            if (imageset.get_hipsProperties() == null) {\n                imageset.set_hipsProperties(makeNewHipsProperties(imageset));\n            }\n            if (imageset.get_hipsProperties().get_downloadComplete()) {\n                return new HealpixTile(level, x, y, imageset, parent);\n            }\n            else {\n                return null;\n            }\n        case ProjectionType.tangent:\n            var newTile = new TangentTile(level, x, y, imageset, parent);\n            return newTile;\n    }\n};\n\nImageset.fromXMLNode = function (node) {\n    try {\n        var type = 2;\n        var projection = 2;\n        if (node.attributes.getNamedItem('DataSetType') != null) {\n            type = Enums.parse('ImageSetType', node.attributes.getNamedItem('DataSetType').nodeValue);\n        }\n        var bandPass = 3;\n        bandPass = Enums.parse('BandPass', node.attributes.getNamedItem('BandPass').nodeValue);\n        var wf = 1;\n        if (node.attributes.getNamedItem('WidthFactor') != null) {\n            wf = parseInt(node.attributes.getNamedItem('WidthFactor').nodeValue);\n        }\n        if (node.attributes.getNamedItem('Generic') == null || !ss.boolean(node.attributes.getNamedItem('Generic').nodeValue)) {\n            projection = Enums.parse('ProjectionType', node.attributes.getNamedItem('Projection').nodeValue);\n            var fileType = node.attributes.getNamedItem('FileType').nodeValue;\n            if (!ss.startsWith(fileType, '.')) {\n                fileType = '.' + fileType;\n            }\n            var thumbnailUrl = '';\n            var thumbUrl = Util.selectSingleNode(node, 'ThumbnailUrl');\n            if (thumbUrl != null) {\n                if (ss.emptyString(thumbUrl.text)) {\n                    var cn = thumbUrl;\n                    thumbnailUrl = cn.textContent;\n                }\n                else {\n                    thumbnailUrl = thumbUrl.text;\n                }\n            }\n            var stockSet = false;\n            var elevationModel = false;\n            if (node.attributes.getNamedItem('StockSet') != null) {\n                stockSet = ss.boolean(node.attributes.getNamedItem('StockSet').nodeValue);\n            }\n            if (node.attributes.getNamedItem('ElevationModel') != null) {\n                elevationModel = ss.boolean(node.attributes.getNamedItem('ElevationModel').nodeValue);\n            }\n            var demUrl = '';\n            if (node.attributes.getNamedItem('DemUrl') != null) {\n                demUrl = node.attributes.getNamedItem('DemUrl').nodeValue;\n            }\n            var alturl = '';\n            if (node.attributes.getNamedItem('AltUrl') != null) {\n                alturl = node.attributes.getNamedItem('AltUrl').nodeValue;\n            }\n            var offsetX = 0;\n            if (node.attributes.getNamedItem('OffsetX') != null) {\n                offsetX = parseFloat(node.attributes.getNamedItem('OffsetX').nodeValue);\n            }\n            var offsetY = 0;\n            if (node.attributes.getNamedItem('OffsetY') != null) {\n                offsetY = parseFloat(node.attributes.getNamedItem('OffsetY').nodeValue);\n            }\n            var creditText = '';\n            var credits = Util.selectSingleNode(node, 'Credits');\n            if (credits != null) {\n                creditText = Util.getInnerText(credits);\n            }\n            var creditsUrl = '';\n            credits = Util.selectSingleNode(node, 'CreditsUrl');\n            if (credits != null) {\n                creditsUrl = Util.getInnerText(credits);\n            }\n            var meanRadius = 0;\n            if (node.attributes.getNamedItem('MeanRadius') != null) {\n                meanRadius = parseFloat(node.attributes.getNamedItem('MeanRadius').nodeValue);\n            }\n            var referenceFrame = null;\n            if (node.attributes.getNamedItem('ReferenceFrame') != null) {\n                referenceFrame = node.attributes.getNamedItem('ReferenceFrame').nodeValue;\n            }\n            var name = '';\n            if (node.attributes.getNamedItem('Name') != null) {\n                name = node.attributes.getNamedItem('Name').nodeValue;\n            }\n            var url = '';\n            if (node.attributes.getNamedItem('Url') != null) {\n                url = node.attributes.getNamedItem('Url').nodeValue;\n            }\n            var baseTileLevel = 0;\n            if (node.attributes.getNamedItem('BaseTileLevel') != null) {\n                baseTileLevel = parseInt(node.attributes.getNamedItem('BaseTileLevel').nodeValue);\n            }\n            var tileLevels = 0;\n            if (node.attributes.getNamedItem('TileLevels') != null) {\n                tileLevels = parseInt(node.attributes.getNamedItem('TileLevels').nodeValue);\n            }\n            var baseDegreesPerTile = 0;\n            if (node.attributes.getNamedItem('BaseDegreesPerTile') != null) {\n                baseDegreesPerTile = parseFloat(node.attributes.getNamedItem('BaseDegreesPerTile').nodeValue);\n            }\n            var bottomsUp = false;\n            if (node.attributes.getNamedItem('BottomsUp') != null) {\n                bottomsUp = ss.boolean(node.attributes.getNamedItem('BottomsUp').nodeValue);\n            }\n            var quadTreeMap = '';\n            if (node.attributes.getNamedItem('QuadTreeMap') != null) {\n                quadTreeMap = node.attributes.getNamedItem('QuadTreeMap').nodeValue;\n            }\n            var centerX = 0;\n            if (node.attributes.getNamedItem('CenterX') != null) {\n                centerX = parseFloat(node.attributes.getNamedItem('CenterX').nodeValue);\n            }\n            var centerY = 0;\n            if (node.attributes.getNamedItem('CenterY') != null) {\n                centerY = parseFloat(node.attributes.getNamedItem('CenterY').nodeValue);\n            }\n            var rotation = 0;\n            if (node.attributes.getNamedItem('Rotation') != null) {\n                rotation = parseFloat(node.attributes.getNamedItem('Rotation').nodeValue);\n            }\n            var sparse = false;\n            if (node.attributes.getNamedItem('Sparse') != null) {\n                sparse = ss.boolean(node.attributes.getNamedItem('Sparse').nodeValue);\n            }\n            return Imageset.create(name, url, type, bandPass, projection, Math.abs(Util.getHashCode(url)), baseTileLevel, tileLevels, 256, baseDegreesPerTile, fileType, bottomsUp, quadTreeMap, centerX, centerY, rotation, sparse, thumbnailUrl, stockSet, elevationModel, wf, offsetX, offsetY, creditText, creditsUrl, demUrl, alturl, meanRadius, referenceFrame);\n        } else {\n            return Imageset.createGeneric(type, bandPass);\n        }\n    }\n    catch ($e1) {\n        return null;\n    }\n};\n\nImageset.saveToXml = function (xmlWriter, imageset, alternateUrl) {\n    xmlWriter._writeStartElement('ImageSet');\n    xmlWriter._writeAttributeString('Generic', imageset.get_generic().toString());\n    xmlWriter._writeAttributeString('DataSetType', Enums.toXml('ImageSetType', imageset.get_dataSetType()));\n    xmlWriter._writeAttributeString('BandPass', Enums.toXml('BandPass', imageset.get_bandPass()));\n    if (!imageset.get_generic()) {\n        xmlWriter._writeAttributeString('Name', imageset.get_name());\n        if (ss.emptyString(alternateUrl)) {\n            xmlWriter._writeAttributeString('Url', imageset.get_url());\n        } else {\n            xmlWriter._writeAttributeString('Url', alternateUrl);\n        }\n        xmlWriter._writeAttributeString('DemUrl', imageset.get_demUrl());\n        xmlWriter._writeAttributeString('BaseTileLevel', imageset.get_baseLevel().toString());\n        xmlWriter._writeAttributeString('TileLevels', imageset.get_levels().toString());\n        xmlWriter._writeAttributeString('BaseDegreesPerTile', imageset.get_baseTileDegrees().toString());\n        xmlWriter._writeAttributeString('FileType', imageset.get_extension());\n        xmlWriter._writeAttributeString('BottomsUp', imageset.get_bottomsUp().toString());\n        xmlWriter._writeAttributeString('Projection', Enums.toXml('ProjectionType', imageset.get_projection()));\n        xmlWriter._writeAttributeString('QuadTreeMap', imageset.get_quadTreeTileMap());\n        xmlWriter._writeAttributeString('CenterX', imageset.get_centerX().toString());\n        xmlWriter._writeAttributeString('CenterY', imageset.get_centerY().toString());\n        xmlWriter._writeAttributeString('OffsetX', imageset.get_offsetX().toString());\n        xmlWriter._writeAttributeString('OffsetY', imageset.get_offsetY().toString());\n        xmlWriter._writeAttributeString('Rotation', imageset.get_rotation().toString());\n        xmlWriter._writeAttributeString('Sparse', imageset.get_sparse().toString());\n        xmlWriter._writeAttributeString('ElevationModel', imageset.get_elevationModel().toString());\n        xmlWriter._writeAttributeString('StockSet', imageset.get_defaultSet().toString());\n        xmlWriter._writeAttributeString('WidthFactor', imageset.get_widthFactor().toString());\n        xmlWriter._writeAttributeString('MeanRadius', imageset.get_meanRadius().toString());\n        xmlWriter._writeAttributeString('ReferenceFrame', imageset.get_referenceFrame());\n        if (ss.emptyString(alternateUrl)) {\n            xmlWriter._writeElementString('ThumbnailUrl', imageset.get_thumbnailUrl());\n        } else {\n            xmlWriter._writeElementString('ThumbnailUrl', imageset.get_url());\n        }\n    }\n    xmlWriter._writeEndElement();\n};\n\nImageset.createGeneric = function (dataSetType, bandPass) {\n    var temp = new Imageset();\n    temp._generic = true;\n    temp._name = 'Generic';\n    temp._sparse = false;\n    temp._dataSetType = dataSetType;\n    temp._bandPass = bandPass;\n    temp._quadTreeTileMap = '';\n    temp.url = '';\n    temp._levels = 0;\n    temp._baseTileDegrees = 0;\n    temp._imageSetID = 0;\n    temp._extension = '';\n    temp._projection = 1;\n    temp._bottomsUp = false;\n    temp._baseLevel = 0;\n    temp._mercator = (!temp._projection);\n    temp._centerX = 0;\n    temp._centerY = 0;\n    temp._rotation = 0;\n    temp._thumbnailUrl = '';\n    temp._matrix = Matrix3d.get_identity();\n    temp._matrix._multiply(Matrix3d._rotationX((temp.get_rotation() / 180 * Math.PI)));\n    temp._matrix._multiply(Matrix3d._rotationZ((temp.get_centerY() / 180 * Math.PI)));\n    temp._matrix._multiply(Matrix3d._rotationY((((360 - temp.get_centerX()) + 180) / 180 * Math.PI)));\n    return temp;\n};\n\nImageset.create = function (name, url, dataSetType, bandPass, projection, imageSetID, baseLevel, levels, tileSize, baseTileDegrees, extension, bottomsUp, quadTreeMap, centerX, centerY, rotation, sparse, thumbnailUrl, defaultSet, elevationModel, wf, offsetX, offsetY, credits, creditsUrl, demUrlIn, alturl, meanRadius, referenceFrame) {\n    var temp = new Imageset();\n    temp.setInitialParameters(name, url, dataSetType, bandPass, projection, imageSetID, baseLevel, levels, baseTileDegrees, extension, bottomsUp, quadTreeMap, centerX, centerY, rotation, sparse, thumbnailUrl, defaultSet, elevationModel, wf, offsetX, offsetY, credits, creditsUrl, demUrlIn, alturl, meanRadius, referenceFrame);\n    return temp;\n};\n\nvar Imageset$ = {\n    get_wcsImage: function () {\n        return this._wcsImage;\n    },\n\n    set_wcsImage: function (value) {\n        this._wcsImage = value;\n        return value;\n    },\n\n    get_projection: function () {\n        return this._projection;\n    },\n\n    set_projection: function (value) {\n        this._projection = value;\n        return value;\n    },\n\n    get_referenceFrame: function () {\n        return this._referenceFrame;\n    },\n\n    set_referenceFrame: function (value) {\n        this._referenceFrame = value;\n        return value;\n    },\n\n    get_imageSetID: function () {\n        return this._imageSetID;\n    },\n\n    set_imageSetID: function (value) {\n        this._imageSetID = value;\n        return value;\n    },\n\n    get_baseTileDegrees: function () {\n        return this._baseTileDegrees;\n    },\n\n    set_baseTileDegrees: function (value) {\n        this._baseTileDegrees = value;\n        return value;\n    },\n\n    get_widthFactor: function () {\n        return this._widthFactor;\n    },\n\n    set_widthFactor: function (value) {\n        this._widthFactor = value;\n        return value;\n    },\n\n    getHashCode: function () {\n        return Util.getHashCode(this.get_url());\n    },\n\n    get_url: function () {\n        return this.url;\n    },\n\n    set_url: function (value) {\n        this.url = value;\n        return value;\n    },\n\n    get_demUrl: function () {\n        if (ss.emptyString(this.demUrl) && !this._projection && !freestandingMode) {\n            return URLHelpers.singleton.coreStaticUrl('wwtweb/BingDemTile.aspx?Q={0},{1},{2}');\n        }\n        return this.demUrl;\n    },\n\n    set_demUrl: function (value) {\n        this.demUrl = value;\n        return value;\n    },\n\n    get_extension: function () {\n        return this._extension;\n    },\n\n    set_extension: function (value) {\n        this._extension = value;\n        return value;\n    },\n\n    get_levels: function () {\n        return this._levels;\n    },\n\n    set_levels: function (value) {\n        this._levels = value;\n        return value;\n    },\n\n    get_bottomsUp: function () {\n        return this._bottomsUp;\n    },\n\n    set_bottomsUp: function (value) {\n        this._bottomsUp = value;\n        return value;\n    },\n\n    get_mercator: function () {\n        return this._mercator;\n    },\n\n    set_mercator: function (value) {\n        this._mercator = value;\n        return value;\n    },\n\n    get_baseLevel: function () {\n        return this._baseLevel;\n    },\n\n    set_baseLevel: function (value) {\n        this._baseLevel = value;\n        return value;\n    },\n\n    get_quadTreeTileMap: function () {\n        return this._quadTreeTileMap;\n    },\n\n    set_quadTreeTileMap: function (value) {\n        this._quadTreeTileMap = value;\n        return value;\n    },\n\n    get_centerX: function () {\n        return this._centerX;\n    },\n\n    set_centerX: function (value) {\n        if (this._centerX !== value) {\n            this._centerX = value;\n            this._computeMatrix();\n        }\n        return value;\n    },\n\n    get_centerY: function () {\n        return this._centerY;\n    },\n\n    set_centerY: function (value) {\n        if (this._centerY !== value) {\n            this._centerY = value;\n            this._computeMatrix();\n        }\n        return value;\n    },\n\n    get_rotation: function () {\n        return this._rotation;\n    },\n\n    set_rotation: function (value) {\n        if (this._rotation !== value) {\n            this._rotation = value;\n            this._computeMatrix();\n        }\n        return value;\n    },\n\n    get_meanRadius: function () {\n        return this._meanRadius;\n    },\n\n    set_meanRadius: function (value) {\n        this._meanRadius = value;\n        return value;\n    },\n\n    get_bandPass: function () {\n        return this._bandPass;\n    },\n\n    set_bandPass: function (value) {\n        this._bandPass = value;\n        return value;\n    },\n\n    get_dataSetType: function () {\n        return this._dataSetType;\n    },\n\n    set_dataSetType: function (value) {\n        this._dataSetType = value;\n        return value;\n    },\n\n    get_altUrl: function () {\n        return this._altUrl;\n    },\n\n    set_altUrl: function (value) {\n        this._altUrl = value;\n        return value;\n    },\n\n    get_singleImage: function () {\n        return this._singleImage;\n    },\n\n    set_singleImage: function (value) {\n        this._singleImage = value;\n        return value;\n    },\n\n    get_hipsProperties: function () {\n        return this._hipsProperties;\n    },\n\n    set_hipsProperties: function (value) {\n        this._hipsProperties = value;\n        return value;\n    },\n\n    get_fitsProperties: function () {\n        return this._fitsProperties;\n    },\n\n    set_fitsProperties: function (value) {\n        this._fitsProperties = value;\n        return value;\n    },\n\n    toString: function () {\n        if (this.get_defaultSet()) {\n            return this._name + ' *';\n        } else {\n            return this._name;\n        }\n    },\n\n    get_stockImageSet: function () {\n        if (this._generic || !this._defaultSet) {\n            return this;\n        } else {\n            return Imageset.createGeneric(this.get_dataSetType(), this.get_bandPass());\n        }\n    },\n\n    equals: function (obj) {\n        if (obj == null) {\n            return false;\n        }\n        if (!(ss.canCast(obj, Imageset))) {\n            return false;\n        }\n        var b = obj;\n        return (Util.getHashCode(b.get_url()) === Util.getHashCode(this.get_url()) && b.get_dataSetType() === this.get_dataSetType() && b.get_bandPass() === this.get_bandPass() && b.get_generic() === this.get_generic());\n    },\n\n    get_matrix: function () {\n        if (!this._matrixComputed) {\n            this._computeMatrix();\n        }\n        return this._matrix;\n    },\n\n    set_matrix: function (value) {\n        this._matrix = value;\n        return value;\n    },\n\n    _computeMatrix: function () {\n        this._matrixComputed = true;\n        this._matrix = Matrix3d.get_identity();\n        this._matrix._multiply(Matrix3d._rotationX((this.get_rotation() / 180 * Math.PI)));\n        this._matrix._multiply(Matrix3d._rotationZ((this.get_centerY() / 180 * Math.PI)));\n        this._matrix._multiply(Matrix3d._rotationY(((360 - this.get_centerX()) / 180 * Math.PI)));\n    },\n\n    get_name: function () {\n        return this._name;\n    },\n\n    set_name: function (value) {\n        this._name = value;\n        return value;\n    },\n\n    get_sparse: function () {\n        return this._sparse;\n    },\n\n    set_sparse: function (value) {\n        this._sparse = value;\n        return value;\n    },\n\n    get_thumbnailUrl: function () {\n        return this._thumbnailUrl;\n    },\n\n    set_thumbnailUrl: function (value) {\n        this._thumbnailUrl = value;\n        return value;\n    },\n\n    get_generic: function () {\n        return this._generic;\n    },\n\n    set_generic: function (value) {\n        this._generic = value;\n        return value;\n    },\n\n    get_elevationModel: function () {\n        return this._elevationModel;\n    },\n\n    set_elevationModel: function (value) {\n        this._elevationModel = value;\n        return value;\n    },\n\n    get_defaultSet: function () {\n        return this._defaultSet;\n    },\n\n    set_defaultSet: function (value) {\n        this._defaultSet = value;\n        return value;\n    },\n\n    get_offsetX: function () {\n        return this._offsetX;\n    },\n\n    set_offsetX: function (value) {\n        this._offsetX = value;\n        return value;\n    },\n\n    get_offsetY: function () {\n        return this._offsetY;\n    },\n\n    set_offsetY: function (value) {\n        this._offsetY = value;\n        return value;\n    },\n\n    get_creditsText: function () {\n        return this._creditsText;\n    },\n\n    set_creditsText: function (value) {\n        this._creditsText = value;\n        return value;\n    },\n\n    get_creditsUrl: function () {\n        return this._creditsUrl;\n    },\n\n    set_creditsUrl: function (value) {\n        this._creditsUrl = value;\n        return value;\n    },\n\n    get_isMandelbrot: function () {\n        return false;\n    },\n\n    // Calculate either the X or Y coordinate of the estimated image center.\n    //\n    // This estimate has some important limitations. First, because images\n    // might contain transparent regions, the \"center\" of the image that a\n    // user will perceive might have nothing to do with the center of the\n    // image bitmap. For instance, imagine that the bitmap is 100x100 but\n    // that everything is transparent except for 10x10 pixels in the\n    // top-left corner. We don't know anything about the \"barycenter\" of the\n    // image here, so we can't account for that.\n    //\n    // Second, for untiled SkyImage imagesets, to properly compute the\n    // bitmap center we need its dimensions, which simply aren't available\n    // here. All we can do is guess a \"reasonable\" image size.\n    //\n    // For these reasons, this method should be avoided when possible. The\n    // preferred way to \"know\" the location of an image's center is to wrap\n    // the image in a Place object, which can just specify the exact\n    // coordinates and zoom level too.\n    //\n    // Even disregarding the above, it's non-trivial to locate the image\n    // center because of the OffsetX/Y parameters and potential rotation of\n    // the image's coordinate system relative to the sky.\n    _calcViewCenterCoordinate: function (isX) {\n        var rot = Coordinates.degreesToRadians(this._rotation);\n        var crot = Math.cos(rot);\n        var srot = Math.sin(rot);\n        var dx = 0, dy = 0;\n        if (this.get_levels() > 0) {\n            dx = -this._offsetX;\n            dy = this._offsetY;\n        } else {\n            // This is the part where we need the image's dimensions to\n            // be able to compute the center coordinate correctly. Since\n            // we don't have that information, we just guess :-(\n            var effWidth = 800;\n            var effHeight = 800;\n            dx = (this._offsetX - effWidth / 2) * this._baseTileDegrees;\n            dy = (effHeight / 2 - this._offsetY) * this._baseTileDegrees;\n        }\n        if (this._bottomsUp) {\n            dx = -dx;\n        }\n        if (isX) {\n            return this._centerX + dx * crot + dy * srot;\n        } else {\n            return this._centerY - dx * srot + dy * crot;\n        }\n    },\n\n    get_viewCenterX: function () {\n        if (this.get_wcsImage() != null) {\n            return (this.get_wcsImage()).get_viewCenterX();\n        } else {\n            return this._calcViewCenterCoordinate(true);\n        }\n    },\n\n    get_viewCenterY: function () {\n        if (this.get_wcsImage() != null) {\n            return (this.get_wcsImage()).get_viewCenterY();\n        } else {\n            return this._calcViewCenterCoordinate(false);\n        }\n    },\n\n    setInitialParameters: function (name, url, dataSetType, bandPass, projection, imageSetID, baseLevel, levels, baseTileDegrees, extension, bottomsUp, quadTreeMap, centerX, centerY, rotation, sparse, thumbnailUrl, defaultSet, elevationModel, wf, offsetX, offsetY, credits, creditsUrl, demUrlIn, alturl, meanRadius, referenceFrame) {\n        this.set_referenceFrame(referenceFrame);\n        this.set_meanRadius(meanRadius);\n        this._altUrl = alturl;\n        this.demUrl = demUrlIn;\n        this._creditsText = credits;\n        this._creditsUrl = creditsUrl;\n        this._offsetY = offsetY;\n        this._offsetX = offsetX;\n        this._widthFactor = wf;\n        this._elevationModel = elevationModel;\n        this._defaultSet = defaultSet;\n        this._name = name;\n        this._sparse = sparse;\n        this._dataSetType = dataSetType;\n        this._bandPass = bandPass;\n        this._quadTreeTileMap = quadTreeMap;\n        this.url = url;\n        this._levels = levels;\n        this._baseTileDegrees = baseTileDegrees;\n        this._imageSetID = imageSetID;\n        this._extension = extension;\n        this._projection = projection;\n        this._bottomsUp = bottomsUp;\n        this._baseLevel = baseLevel;\n        this._mercator = (!projection);\n        this._centerX = centerX;\n        this._centerY = centerY;\n        this._rotation = rotation;\n        this._thumbnailUrl = thumbnailUrl;\n        this._computeMatrix();\n    },\n\n    // Ideally, imagesets will be associated with Places that specify\n    // exactly how the view should be set up when \"going to\" them, but\n    // sometimes (especially research datasets) we're interested in deriving\n    // a reasonable zoom setting without that extra information. The returned value\n    // isn't going to be perfect but it should hopefully be OK.\n    _guessZoomSetting: function (currentZoom) {\n        const FOV_FACTOR = 1.7;\n        var zoom = currentZoom;\n        var aswcs = ss.safeCast(this._wcsImage, FitsImage);\n        if (this.get_projection() === ProjectionType.skyImage) {\n            // Untiled SkyImage: basetiledegrees is degrees per pixel\n            if (aswcs != null) {\n                zoom = this.get_baseTileDegrees() * aswcs.get_sizeY() * 6 * FOV_FACTOR;\n            }\n        } else if (aswcs != null) {\n            zoom = aswcs.get_scaleY() * aswcs.get_sizeY() * 6 * FOV_FACTOR;\n        } else {\n            // Tiled. basetiledegrees is angular height of whole image after\n            // power-of-2 padding.\n            zoom = this.get_baseTileDegrees() * 6 * FOV_FACTOR;\n        }\n\n        // Only zoom in, not out. Usability-wise this tends to make the most\n        // sense.\n        if (zoom > currentZoom) {\n            zoom = currentZoom;\n        }\n        return zoom;\n    },\n\n    // URL parameters\n    //{0} ImageSetID\n    //{1} level\n    //{2} x tile id\n    //{3} y tile id\n    //{4} quadtree address (VE style)\n    //{5} quadtree address (Google maps style)\n    //{6} top left corner RA\n    //{7} top left corner Dec\n    //{8} bottom right corner RA\n    //{9} bottom right corner dec\n    //{10} bottom left corner RA\n    //{11} bottom left corner dec\n    //{12} top right corner RA\n    //{13} top right corner dec\n\n    get_thumbnail: function () {\n        return this._thumbnail;\n    },\n\n    set_thumbnail: function (value) {\n        this._thumbnail = value;\n        return value;\n    },\n\n    get_bounds: function () {\n        return this._bounds;\n    },\n\n    set_bounds: function (value) {\n        this._bounds = value;\n        return value;\n    },\n\n    get_isImage: function () {\n        return true;\n    },\n\n    get_isTour: function () {\n        return false;\n    },\n\n    get_isFolder: function () {\n        return false;\n    },\n\n    get_isCloudCommunityItem: function () {\n        return false;\n    },\n\n    get_readOnly: function () {\n        return false;\n    },\n\n    get_children: function () {\n        return [];\n    }\n};\n\nregisterType(\"Imageset\", [Imageset, Imageset$, null, IThumbnail]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// \"Classes\" corresponding to C# interfaces\n//\n// In our current JS translation, these classes don't declare anything\n// themselves. They can in principle be used in `canCast()` calls for dynamic\n// type checking, but it appears that we don't use this functionality in the\n// current codebase.\n//\n// If/when we translate to TypeScript, these could become TypeScript interfaces\n// that are more useful.\n//\n// Files in this module used to be in\n// `I{Folder,IThumbnail,Place,UIController,ViewMover,Tours/ISettings}.cs`. Note\n// that the source file was indeed (incorrectly) named `IIThumbnail.cs`.\n\nimport { registerType } from \"./typesystem.js\";\n\n\n// wwtlib.IFolder\n\nexport function IFolder() { }\n\nregisterType(\"IFolder\", [IFolder]);\n\n\n// wwtlib.IThumbnail\n\nexport function IThumbnail() { }\n\nregisterType(\"IThumbnail\", [IThumbnail]);\n\n\n// wwtlib.IPlace\n\nexport function IPlace() { }\n\nregisterType(\"IPlace\", [IPlace]);\n\n\n// wwtlib.IUiController\n\nexport function IUiController() { }\n\nregisterType(\"IUiController\", [IUiController]);\n\n\n// wwtlib.IViewMover\n\nexport function IViewMover() { }\n\nregisterType(\"IViewMover\", [IViewMover]);\n\n\n// wwtlib.IUIServicesCallbacks\n\nexport function IUIServicesCallbacks() { }\n\nregisterType(\"IUIServicesCallbacks\", [IUIServicesCallbacks]);\n\n\n// wwtlib.ISettings\n\nexport function ISettings() { }\n\nregisterType(\"ISettings\", [ISettings]);\n\n\n// wwtlib.IUndoStep\n\nexport function IUndoStep() { }\n\nregisterType(\"IUndoStep\", [IUndoStep]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Kepler Vertex.\n\nimport { registerType } from \"./typesystem.js\";\nimport { Vector3d } from \"./double3d.js\";\nimport { Colors } from \"./color.js\";\n\n\n// wwtlib.KeplerVertex\n\nexport function KeplerVertex() {\n    this.ABC = new Vector3d();\n    this.abc1 = new Vector3d();\n    this.pointSize = 0;\n    this.w = 0;\n    this.e = 0;\n    this.n = 0;\n    this.t = 0;\n    this.a = 0;\n    this.z = 0;\n    this.orbitPos = 0;\n    this.orbits = 0;\n}\n\nKeplerVertex._sine = 0;\nKeplerVertex._cose = 1;\nKeplerVertex._degrad = Math.PI / 180;\n\nvar KeplerVertex$ = {\n    fill: function (ee) {\n        var F = Math.cos(ee.omega * KeplerVertex._degrad);\n        var sinOmega = Math.sin(ee.omega * KeplerVertex._degrad);\n        var cosi = Math.cos(ee.i * KeplerVertex._degrad);\n        var sini = Math.sin(ee.i * KeplerVertex._degrad);\n        var G = sinOmega * KeplerVertex._cose;\n        var H = sinOmega * KeplerVertex._sine;\n        var P = -sinOmega * cosi;\n        var Q = (F * cosi * KeplerVertex._cose) - (sini * KeplerVertex._sine);\n        var R = (F * cosi * KeplerVertex._sine) + (sini * KeplerVertex._cose);\n        var checkA = (F * F) + (G * G) + (H * H); // Should be 1.0\n        var checkB = (P * P) + (Q * Q) + (R * R); // Should be 1.0 as well\n        this.ABC.x = Math.atan2(F, P);\n        this.ABC.y = Math.atan2(G, Q);\n        this.ABC.z = Math.atan2(H, R);\n        this.abc1.x = Math.sqrt((F * F) + (P * P));\n        this.abc1.y = Math.sqrt((G * G) + (Q * Q));\n        this.abc1.z = Math.sqrt((H * H) + (R * R));\n        this.pointSize = 0.1;\n        if (ee.a < 2.5) {\n            this.color = Colors.get_white();\n        } else if (ee.a < 2.83) {\n            this.color = Colors.get_red();\n        } else if (ee.a < 2.96) {\n            this.color = Colors.get_green();\n        } else if (ee.a < 3.3) {\n            this.color = Colors.get_magenta();\n        } else if (ee.a < 5) {\n            this.color = Colors.get_cyan();\n        } else if (ee.a < 10) {\n            this.color = Colors.get_yellow();\n            this.pointSize = 0.9;\n        } else {\n            this.color = Colors.get_white();\n            this.pointSize = 8;\n        }\n        this.w = ee.w;\n        this.e = ee.e;\n        if (!ee.n) {\n            this.n = (0.9856076686 / (ee.a * Math.sqrt(ee.a)));\n        } else {\n            this.n = ee.n;\n        }\n        this.t = (ee.t - KeplerVertex.baseDate);\n        this.a = ee.a;\n        this.z = 0;\n        this.orbitPos = 0;\n        this.orbits = 0;\n    }\n};\n\nregisterType(\"KeplerVertex\", [KeplerVertex, KeplerVertex$, null]);\n\n// KeplerVertex.baseDate is initialized at the bottom of the main module.\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A collection of named colormaps.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { Color } from \"../color.js\";\nimport { WEBGL } from \"../graphics/webgl_constants.js\";\n\n\n// wwtlib.ColorMapContainer\n//\n// This class is intended to be used to store colormaps. It does not handle any\n// interpolation and when using FindClosestColor it will simply check which\n// color is closest to the requested value. Therefore, continuous colormaps should\n// be created by providing a sufficient number of colors (ideally 256 or more).\n\nexport function ColorMapContainer() {\n    this.colors = [];\n}\n\nColorMapContainer.colorTextures = {};\n\n// Class method to create a new colormap from a list of [a, r, g, b] lists.\nColorMapContainer.fromArgbList = function (color_list) {\n    var temp = new ColorMapContainer();\n    var $enum1 = ss.enumerate(color_list);\n    while ($enum1.moveNext()) {\n        var color = $enum1.current;\n        temp.colors.push(Color.fromArgb(color[0], color[1], color[2], color[3]));\n    }\n    return temp;\n};\n\n// Class method to create a new colormap from a list of strings.\nColorMapContainer.fromStringList = function (color_list) {\n    var temp = new ColorMapContainer();\n    var $enum1 = ss.enumerate(color_list);\n    while ($enum1.moveNext()) {\n        var color = $enum1.current;\n        temp.colors.push(Color.load(color));\n    }\n    return temp;\n};\n\n// Names are chosen to match matplotlib (which explains why some are\n// less-than-ideal).\nColorMapContainer.fromNamedColormap = function (name) {\n    if (name == null) {\n        return null;\n    }\n    switch (name.toLowerCase()) {\n        case 'viridis':\n            return ColorMapContainer.viridis;\n        case 'plasma':\n            return ColorMapContainer.plasma;\n        case 'inferno':\n            return ColorMapContainer.inferno;\n        case 'magma':\n            return ColorMapContainer.magma;\n        case 'cividis':\n            return ColorMapContainer.cividis;\n        case 'greys': // this is 0=>white, 1=>black\n            return ColorMapContainer.greys;\n        case 'gray': // this is 0=>black, 1=>white\n            return ColorMapContainer.gray;\n        case 'purples':\n            return ColorMapContainer.purples;\n        case 'blues':\n            return ColorMapContainer.blues;\n        case 'greens':\n            return ColorMapContainer.greens;\n        case 'oranges':\n            return ColorMapContainer.oranges;\n        case 'reds':\n            return ColorMapContainer.reds;\n        case 'rdylbu':\n            return ColorMapContainer.rdYlBu;\n    }\n    return null;\n};\n\nColorMapContainer._getTextureFromName = function (gl, name) {\n    var texture = ColorMapContainer.colorTextures[name];\n    if (texture == null) {\n        var colorMapContainer = ColorMapContainer.fromNamedColormap(name);\n        if (colorMapContainer != null) {\n            texture = ColorMapContainer._initColorTexture(gl, colorMapContainer);\n            ColorMapContainer.colorTextures[name.toLowerCase()] = texture;\n        }\n    }\n    return texture;\n};\n\nColorMapContainer.bindColorMapTexture = function (gl, colorMapName) {\n    var texture = ColorMapContainer._getTextureFromName(gl, colorMapName);\n    if (texture == null) {\n        texture = ColorMapContainer._getTextureFromName(gl, 'gray');\n    }\n    gl.activeTexture(WEBGL.TEXTURE1);\n    gl.bindTexture(WEBGL.TEXTURE_2D, texture);\n};\n\nColorMapContainer._initColorTexture = function (gl, colorMapContainer) {\n    var colorTexture = gl.createTexture();\n    gl.activeTexture(WEBGL.TEXTURE1);\n    gl.bindTexture(WEBGL.TEXTURE_2D, colorTexture);\n    gl.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_WRAP_S, WEBGL.CLAMP_TO_EDGE);\n    gl.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_WRAP_T, WEBGL.CLAMP_TO_EDGE);\n    var colorBuffer = ColorMapContainer._extractColorArray(colorMapContainer.colors);\n    gl.texImage2D(WEBGL.TEXTURE_2D, 0, WEBGL.RGB8, colorBuffer.length / 3, 1, 0, WEBGL.RGB, WEBGL.UNSIGNED_BYTE, colorBuffer);\n    gl.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_MIN_FILTER, WEBGL.NEAREST);\n    gl.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_MAG_FILTER, WEBGL.NEAREST);\n    return colorTexture;\n};\n\nColorMapContainer._extractColorArray = function (colors) {\n    var index = 0;\n    var colorBuffer = new Uint8Array(colors.length * 3);\n    var $enum1 = ss.enumerate(colors);\n    while ($enum1.moveNext()) {\n        var color = $enum1.current;\n        colorBuffer[index++] = color.r;\n        colorBuffer[index++] = color.g;\n        colorBuffer[index++] = color.b;\n    }\n    return colorBuffer;\n};\n\nvar ColorMapContainer$ = {\n    // Given a floating-point value in the range 0 to 1, find the color that is\n    // the closest to it.\n    findClosestColor: function (value) {\n        var index;\n        if (value <= 0) {\n            return this.colors[0];\n        } else if (value >= 1) {\n            return this.colors[this.colors.length - 1];\n        } else {\n            index = ss.truncate((value * this.colors.length));\n            return this.colors[index];\n        }\n    }\n};\n\nregisterType(\"ColorMapContainer\", [ColorMapContainer, ColorMapContainer$, null]);\n\n// The colormaps below were produced using the following Python code:\n//\n// import numpy as np\n// from matplotlib import cm\n// from matplotlib.colors import to_hex\n// from textwrap import wrap, indent\n//\n// TEMPLATE = \"\"\"\n// public static ColorMapContainer {name} = ColorMapContainer.FromStringList(new List<string>(\n// {colors}\n// ));\n// \"\"\"\n//\n// TEMPLATE_CASE = \"\"\"\n// case \"{name_lower}\":\n//     return {name};\"\"\"\n// COLORMAPS = [\"viridis\", \"plasma\", \"inferno\", \"magma\", \"cividis\",\n//             \"Greys\", \"gray\", \"Purples\", \"Blues\", \"Greens\", \"Oranges\", \"Reds\", \"RdYlBu\"]\n//\n// named_code = \"\"\n// case_code = \"\"\n//\n// for name in COLORMAPS:\n//     cmap = cm.get_cmap(name)\n//     x = np.linspace(0.5 / 256, 255.5/256, 256)\n//     colors = \", \".join(['\"{0}\"'.format(to_hex(c)) for c in cmap(x)])\n//     pretty_name = name[0].upper() + name[1:]\n//     named_code += TEMPLATE.format(name=pretty_name, colors=indent('\\n'.join(wrap(colors, 90)), \" \" *  10))\n//     case_code += TEMPLATE_CASE.format(name=pretty_name, name_lower=name.lower())\n//\n// named_code = indent(named_code, \" \" * 8)\n//\n// print(named_code)\n// print('-' * 72)\n// print(case_code)\n\nColorMapContainer.viridis = ColorMapContainer.fromStringList([\n    '#440154', '#440256', '#450457', '#450559', '#46075a', '#46085c', '#460a5d', '#460b5e',\n    '#470d60', '#470e61', '#471063', '#471164', '#471365', '#481467', '#481668', '#481769',\n    '#48186a', '#481a6c', '#481b6d', '#481c6e', '#481d6f', '#481f70', '#482071', '#482173',\n    '#482374', '#482475', '#482576', '#482677', '#482878', '#482979', '#472a7a', '#472c7a',\n    '#472d7b', '#472e7c', '#472f7d', '#46307e', '#46327e', '#46337f', '#463480', '#453581',\n    '#453781', '#453882', '#443983', '#443a83', '#443b84', '#433d84', '#433e85', '#423f85',\n    '#424086', '#424186', '#414287', '#414487', '#404588', '#404688', '#3f4788', '#3f4889',\n    '#3e4989', '#3e4a89', '#3e4c8a', '#3d4d8a', '#3d4e8a', '#3c4f8a', '#3c508b', '#3b518b',\n    '#3b528b', '#3a538b', '#3a548c', '#39558c', '#39568c', '#38588c', '#38598c', '#375a8c',\n    '#375b8d', '#365c8d', '#365d8d', '#355e8d', '#355f8d', '#34608d', '#34618d', '#33628d',\n    '#33638d', '#32648e', '#32658e', '#31668e', '#31678e', '#31688e', '#30698e', '#306a8e',\n    '#2f6b8e', '#2f6c8e', '#2e6d8e', '#2e6e8e', '#2e6f8e', '#2d708e', '#2d718e', '#2c718e',\n    '#2c728e', '#2c738e', '#2b748e', '#2b758e', '#2a768e', '#2a778e', '#2a788e', '#29798e',\n    '#297a8e', '#297b8e', '#287c8e', '#287d8e', '#277e8e', '#277f8e', '#27808e', '#26818e',\n    '#26828e', '#26828e', '#25838e', '#25848e', '#25858e', '#24868e', '#24878e', '#23888e',\n    '#23898e', '#238a8d', '#228b8d', '#228c8d', '#228d8d', '#218e8d', '#218f8d', '#21908d',\n    '#21918c', '#20928c', '#20928c', '#20938c', '#1f948c', '#1f958b', '#1f968b', '#1f978b',\n    '#1f988b', '#1f998a', '#1f9a8a', '#1e9b8a', '#1e9c89', '#1e9d89', '#1f9e89', '#1f9f88',\n    '#1fa088', '#1fa188', '#1fa187', '#1fa287', '#20a386', '#20a486', '#21a585', '#21a685',\n    '#22a785', '#22a884', '#23a983', '#24aa83', '#25ab82', '#25ac82', '#26ad81', '#27ad81',\n    '#28ae80', '#29af7f', '#2ab07f', '#2cb17e', '#2db27d', '#2eb37c', '#2fb47c', '#31b57b',\n    '#32b67a', '#34b679', '#35b779', '#37b878', '#38b977', '#3aba76', '#3bbb75', '#3dbc74',\n    '#3fbc73', '#40bd72', '#42be71', '#44bf70', '#46c06f', '#48c16e', '#4ac16d', '#4cc26c',\n    '#4ec36b', '#50c46a', '#52c569', '#54c568', '#56c667', '#58c765', '#5ac864', '#5cc863',\n    '#5ec962', '#60ca60', '#63cb5f', '#65cb5e', '#67cc5c', '#69cd5b', '#6ccd5a', '#6ece58',\n    '#70cf57', '#73d056', '#75d054', '#77d153', '#7ad151', '#7cd250', '#7fd34e', '#81d34d',\n    '#84d44b', '#86d549', '#89d548', '#8bd646', '#8ed645', '#90d743', '#93d741', '#95d840',\n    '#98d83e', '#9bd93c', '#9dd93b', '#a0da39', '#a2da37', '#a5db36', '#a8db34', '#aadc32',\n    '#addc30', '#b0dd2f', '#b2dd2d', '#b5de2b', '#b8de29', '#bade28', '#bddf26', '#c0df25',\n    '#c2df23', '#c5e021', '#c8e020', '#cae11f', '#cde11d', '#d0e11c', '#d2e21b', '#d5e21a',\n    '#d8e219', '#dae319', '#dde318', '#dfe318', '#e2e418', '#e5e419', '#e7e419', '#eae51a',\n    '#ece51b', '#efe51c', '#f1e51d', '#f4e61e', '#f6e620', '#f8e621', '#fbe723', '#fde725'\n]);\n\nColorMapContainer.plasma = ColorMapContainer.fromStringList([\n    '#0d0887', '#100788', '#130789', '#16078a', '#19068c', '#1b068d', '#1d068e', '#20068f',\n    '#220690', '#240691', '#260591', '#280592', '#2a0593', '#2c0594', '#2e0595', '#2f0596',\n    '#310597', '#330597', '#350498', '#370499', '#38049a', '#3a049a', '#3c049b', '#3e049c',\n    '#3f049c', '#41049d', '#43039e', '#44039e', '#46039f', '#48039f', '#4903a0', '#4b03a1',\n    '#4c02a1', '#4e02a2', '#5002a2', '#5102a3', '#5302a3', '#5502a4', '#5601a4', '#5801a4',\n    '#5901a5', '#5b01a5', '#5c01a6', '#5e01a6', '#6001a6', '#6100a7', '#6300a7', '#6400a7',\n    '#6600a7', '#6700a8', '#6900a8', '#6a00a8', '#6c00a8', '#6e00a8', '#6f00a8', '#7100a8',\n    '#7201a8', '#7401a8', '#7501a8', '#7701a8', '#7801a8', '#7a02a8', '#7b02a8', '#7d03a8',\n    '#7e03a8', '#8004a8', '#8104a7', '#8305a7', '#8405a7', '#8606a6', '#8707a6', '#8808a6',\n    '#8a09a5', '#8b0aa5', '#8d0ba5', '#8e0ca4', '#8f0da4', '#910ea3', '#920fa3', '#9410a2',\n    '#9511a1', '#9613a1', '#9814a0', '#99159f', '#9a169f', '#9c179e', '#9d189d', '#9e199d',\n    '#a01a9c', '#a11b9b', '#a21d9a', '#a31e9a', '#a51f99', '#a62098', '#a72197', '#a82296',\n    '#aa2395', '#ab2494', '#ac2694', '#ad2793', '#ae2892', '#b02991', '#b12a90', '#b22b8f',\n    '#b32c8e', '#b42e8d', '#b52f8c', '#b6308b', '#b7318a', '#b83289', '#ba3388', '#bb3488',\n    '#bc3587', '#bd3786', '#be3885', '#bf3984', '#c03a83', '#c13b82', '#c23c81', '#c33d80',\n    '#c43e7f', '#c5407e', '#c6417d', '#c7427c', '#c8437b', '#c9447a', '#ca457a', '#cb4679',\n    '#cc4778', '#cc4977', '#cd4a76', '#ce4b75', '#cf4c74', '#d04d73', '#d14e72', '#d24f71',\n    '#d35171', '#d45270', '#d5536f', '#d5546e', '#d6556d', '#d7566c', '#d8576b', '#d9586a',\n    '#da5a6a', '#da5b69', '#db5c68', '#dc5d67', '#dd5e66', '#de5f65', '#de6164', '#df6263',\n    '#e06363', '#e16462', '#e26561', '#e26660', '#e3685f', '#e4695e', '#e56a5d', '#e56b5d',\n    '#e66c5c', '#e76e5b', '#e76f5a', '#e87059', '#e97158', '#e97257', '#ea7457', '#eb7556',\n    '#eb7655', '#ec7754', '#ed7953', '#ed7a52', '#ee7b51', '#ef7c51', '#ef7e50', '#f07f4f',\n    '#f0804e', '#f1814d', '#f1834c', '#f2844b', '#f3854b', '#f3874a', '#f48849', '#f48948',\n    '#f58b47', '#f58c46', '#f68d45', '#f68f44', '#f79044', '#f79143', '#f79342', '#f89441',\n    '#f89540', '#f9973f', '#f9983e', '#f99a3e', '#fa9b3d', '#fa9c3c', '#fa9e3b', '#fb9f3a',\n    '#fba139', '#fba238', '#fca338', '#fca537', '#fca636', '#fca835', '#fca934', '#fdab33',\n    '#fdac33', '#fdae32', '#fdaf31', '#fdb130', '#fdb22f', '#fdb42f', '#fdb52e', '#feb72d',\n    '#feb82c', '#feba2c', '#febb2b', '#febd2a', '#febe2a', '#fec029', '#fdc229', '#fdc328',\n    '#fdc527', '#fdc627', '#fdc827', '#fdca26', '#fdcb26', '#fccd25', '#fcce25', '#fcd025',\n    '#fcd225', '#fbd324', '#fbd524', '#fbd724', '#fad824', '#fada24', '#f9dc24', '#f9dd25',\n    '#f8df25', '#f8e125', '#f7e225', '#f7e425', '#f6e626', '#f6e826', '#f5e926', '#f5eb27',\n    '#f4ed27', '#f3ee27', '#f3f027', '#f2f227', '#f1f426', '#f1f525', '#f0f724', '#f0f921'\n]);\n\nColorMapContainer.inferno = ColorMapContainer.fromStringList([\n    '#000004', '#010005', '#010106', '#010108', '#02010a', '#02020c', '#02020e', '#030210',\n    '#040312', '#040314', '#050417', '#060419', '#07051b', '#08051d', '#09061f', '#0a0722',\n    '#0b0724', '#0c0826', '#0d0829', '#0e092b', '#10092d', '#110a30', '#120a32', '#140b34',\n    '#150b37', '#160b39', '#180c3c', '#190c3e', '#1b0c41', '#1c0c43', '#1e0c45', '#1f0c48',\n    '#210c4a', '#230c4c', '#240c4f', '#260c51', '#280b53', '#290b55', '#2b0b57', '#2d0b59',\n    '#2f0a5b', '#310a5c', '#320a5e', '#340a5f', '#360961', '#380962', '#390963', '#3b0964',\n    '#3d0965', '#3e0966', '#400a67', '#420a68', '#440a68', '#450a69', '#470b6a', '#490b6a',\n    '#4a0c6b', '#4c0c6b', '#4d0d6c', '#4f0d6c', '#510e6c', '#520e6d', '#540f6d', '#550f6d',\n    '#57106e', '#59106e', '#5a116e', '#5c126e', '#5d126e', '#5f136e', '#61136e', '#62146e',\n    '#64156e', '#65156e', '#67166e', '#69166e', '#6a176e', '#6c186e', '#6d186e', '#6f196e',\n    '#71196e', '#721a6e', '#741a6e', '#751b6e', '#771c6d', '#781c6d', '#7a1d6d', '#7c1d6d',\n    '#7d1e6d', '#7f1e6c', '#801f6c', '#82206c', '#84206b', '#85216b', '#87216b', '#88226a',\n    '#8a226a', '#8c2369', '#8d2369', '#8f2469', '#902568', '#922568', '#932667', '#952667',\n    '#972766', '#982766', '#9a2865', '#9b2964', '#9d2964', '#9f2a63', '#a02a63', '#a22b62',\n    '#a32c61', '#a52c60', '#a62d60', '#a82e5f', '#a92e5e', '#ab2f5e', '#ad305d', '#ae305c',\n    '#b0315b', '#b1325a', '#b3325a', '#b43359', '#b63458', '#b73557', '#b93556', '#ba3655',\n    '#bc3754', '#bd3853', '#bf3952', '#c03a51', '#c13a50', '#c33b4f', '#c43c4e', '#c63d4d',\n    '#c73e4c', '#c83f4b', '#ca404a', '#cb4149', '#cc4248', '#ce4347', '#cf4446', '#d04545',\n    '#d24644', '#d34743', '#d44842', '#d54a41', '#d74b3f', '#d84c3e', '#d94d3d', '#da4e3c',\n    '#db503b', '#dd513a', '#de5238', '#df5337', '#e05536', '#e15635', '#e25734', '#e35933',\n    '#e45a31', '#e55c30', '#e65d2f', '#e75e2e', '#e8602d', '#e9612b', '#ea632a', '#eb6429',\n    '#eb6628', '#ec6726', '#ed6925', '#ee6a24', '#ef6c23', '#ef6e21', '#f06f20', '#f1711f',\n    '#f1731d', '#f2741c', '#f3761b', '#f37819', '#f47918', '#f57b17', '#f57d15', '#f67e14',\n    '#f68013', '#f78212', '#f78410', '#f8850f', '#f8870e', '#f8890c', '#f98b0b', '#f98c0a',\n    '#f98e09', '#fa9008', '#fa9207', '#fa9407', '#fb9606', '#fb9706', '#fb9906', '#fb9b06',\n    '#fb9d07', '#fc9f07', '#fca108', '#fca309', '#fca50a', '#fca60c', '#fca80d', '#fcaa0f',\n    '#fcac11', '#fcae12', '#fcb014', '#fcb216', '#fcb418', '#fbb61a', '#fbb81d', '#fbba1f',\n    '#fbbc21', '#fbbe23', '#fac026', '#fac228', '#fac42a', '#fac62d', '#f9c72f', '#f9c932',\n    '#f9cb35', '#f8cd37', '#f8cf3a', '#f7d13d', '#f7d340', '#f6d543', '#f6d746', '#f5d949',\n    '#f5db4c', '#f4dd4f', '#f4df53', '#f4e156', '#f3e35a', '#f3e55d', '#f2e661', '#f2e865',\n    '#f2ea69', '#f1ec6d', '#f1ed71', '#f1ef75', '#f1f179', '#f2f27d', '#f2f482', '#f3f586',\n    '#f3f68a', '#f4f88e', '#f5f992', '#f6fa96', '#f8fb9a', '#f9fc9d', '#fafda1', '#fcffa4'\n]);\n\nColorMapContainer.magma = ColorMapContainer.fromStringList([\n    '#000004', '#010005', '#010106', '#010108', '#020109', '#02020b', '#02020d', '#03030f',\n    '#030312', '#040414', '#050416', '#060518', '#06051a', '#07061c', '#08071e', '#090720',\n    '#0a0822', '#0b0924', '#0c0926', '#0d0a29', '#0e0b2b', '#100b2d', '#110c2f', '#120d31',\n    '#130d34', '#140e36', '#150e38', '#160f3b', '#180f3d', '#19103f', '#1a1042', '#1c1044',\n    '#1d1147', '#1e1149', '#20114b', '#21114e', '#221150', '#241253', '#251255', '#271258',\n    '#29115a', '#2a115c', '#2c115f', '#2d1161', '#2f1163', '#311165', '#331067', '#341069',\n    '#36106b', '#38106c', '#390f6e', '#3b0f70', '#3d0f71', '#3f0f72', '#400f74', '#420f75',\n    '#440f76', '#451077', '#471078', '#491078', '#4a1079', '#4c117a', '#4e117b', '#4f127b',\n    '#51127c', '#52137c', '#54137d', '#56147d', '#57157e', '#59157e', '#5a167e', '#5c167f',\n    '#5d177f', '#5f187f', '#601880', '#621980', '#641a80', '#651a80', '#671b80', '#681c81',\n    '#6a1c81', '#6b1d81', '#6d1d81', '#6e1e81', '#701f81', '#721f81', '#732081', '#752181',\n    '#762181', '#782281', '#792282', '#7b2382', '#7c2382', '#7e2482', '#802582', '#812581',\n    '#832681', '#842681', '#862781', '#882781', '#892881', '#8b2981', '#8c2981', '#8e2a81',\n    '#902a81', '#912b81', '#932b80', '#942c80', '#962c80', '#982d80', '#992d80', '#9b2e7f',\n    '#9c2e7f', '#9e2f7f', '#a02f7f', '#a1307e', '#a3307e', '#a5317e', '#a6317d', '#a8327d',\n    '#aa337d', '#ab337c', '#ad347c', '#ae347b', '#b0357b', '#b2357b', '#b3367a', '#b5367a',\n    '#b73779', '#b83779', '#ba3878', '#bc3978', '#bd3977', '#bf3a77', '#c03a76', '#c23b75',\n    '#c43c75', '#c53c74', '#c73d73', '#c83e73', '#ca3e72', '#cc3f71', '#cd4071', '#cf4070',\n    '#d0416f', '#d2426f', '#d3436e', '#d5446d', '#d6456c', '#d8456c', '#d9466b', '#db476a',\n    '#dc4869', '#de4968', '#df4a68', '#e04c67', '#e24d66', '#e34e65', '#e44f64', '#e55064',\n    '#e75263', '#e85362', '#e95462', '#ea5661', '#eb5760', '#ec5860', '#ed5a5f', '#ee5b5e',\n    '#ef5d5e', '#f05f5e', '#f1605d', '#f2625d', '#f2645c', '#f3655c', '#f4675c', '#f4695c',\n    '#f56b5c', '#f66c5c', '#f66e5c', '#f7705c', '#f7725c', '#f8745c', '#f8765c', '#f9785d',\n    '#f9795d', '#f97b5d', '#fa7d5e', '#fa7f5e', '#fa815f', '#fb835f', '#fb8560', '#fb8761',\n    '#fc8961', '#fc8a62', '#fc8c63', '#fc8e64', '#fc9065', '#fd9266', '#fd9467', '#fd9668',\n    '#fd9869', '#fd9a6a', '#fd9b6b', '#fe9d6c', '#fe9f6d', '#fea16e', '#fea36f', '#fea571',\n    '#fea772', '#fea973', '#feaa74', '#feac76', '#feae77', '#feb078', '#feb27a', '#feb47b',\n    '#feb67c', '#feb77e', '#feb97f', '#febb81', '#febd82', '#febf84', '#fec185', '#fec287',\n    '#fec488', '#fec68a', '#fec88c', '#feca8d', '#fecc8f', '#fecd90', '#fecf92', '#fed194',\n    '#fed395', '#fed597', '#fed799', '#fed89a', '#fdda9c', '#fddc9e', '#fddea0', '#fde0a1',\n    '#fde2a3', '#fde3a5', '#fde5a7', '#fde7a9', '#fde9aa', '#fdebac', '#fcecae', '#fceeb0',\n    '#fcf0b2', '#fcf2b4', '#fcf4b6', '#fcf6b8', '#fcf7b9', '#fcf9bb', '#fcfbbd', '#fcfdbf'\n]);\n\nColorMapContainer.cividis = ColorMapContainer.fromStringList([\n    '#00224e', '#00234f', '#002451', '#002553', '#002554', '#002656', '#002758', '#002859',\n    '#00285b', '#00295d', '#002a5f', '#002a61', '#002b62', '#002c64', '#002c66', '#002d68',\n    '#002e6a', '#002e6c', '#002f6d', '#00306f', '#003070', '#003170', '#003171', '#013271',\n    '#053371', '#083370', '#0c3470', '#0f3570', '#123570', '#143670', '#163770', '#18376f',\n    '#1a386f', '#1c396f', '#1e3a6f', '#203a6f', '#213b6e', '#233c6e', '#243c6e', '#263d6e',\n    '#273e6e', '#293f6e', '#2a3f6d', '#2b406d', '#2d416d', '#2e416d', '#2f426d', '#31436d',\n    '#32436d', '#33446d', '#34456c', '#35456c', '#36466c', '#38476c', '#39486c', '#3a486c',\n    '#3b496c', '#3c4a6c', '#3d4a6c', '#3e4b6c', '#3f4c6c', '#404c6c', '#414d6c', '#424e6c',\n    '#434e6c', '#444f6c', '#45506c', '#46516c', '#47516c', '#48526c', '#49536c', '#4a536c',\n    '#4b546c', '#4c556c', '#4d556c', '#4e566c', '#4f576c', '#50576c', '#51586d', '#52596d',\n    '#535a6d', '#545a6d', '#555b6d', '#555c6d', '#565c6d', '#575d6d', '#585e6d', '#595e6e',\n    '#5a5f6e', '#5b606e', '#5c616e', '#5d616e', '#5e626e', '#5e636f', '#5f636f', '#60646f',\n    '#61656f', '#62656f', '#636670', '#646770', '#656870', '#656870', '#666970', '#676a71',\n    '#686a71', '#696b71', '#6a6c71', '#6b6d72', '#6c6d72', '#6c6e72', '#6d6f72', '#6e6f73',\n    '#6f7073', '#707173', '#717274', '#727274', '#727374', '#737475', '#747475', '#757575',\n    '#767676', '#777776', '#777777', '#787877', '#797977', '#7a7a78', '#7b7a78', '#7c7b78',\n    '#7d7c78', '#7e7c78', '#7e7d78', '#7f7e78', '#807f78', '#817f78', '#828079', '#838179',\n    '#848279', '#858279', '#868379', '#878478', '#888578', '#898578', '#8a8678', '#8b8778',\n    '#8c8878', '#8d8878', '#8e8978', '#8f8a78', '#908b78', '#918b78', '#928c78', '#928d78',\n    '#938e78', '#948e77', '#958f77', '#969077', '#979177', '#989277', '#999277', '#9a9376',\n    '#9b9476', '#9c9576', '#9d9576', '#9e9676', '#9f9775', '#a09875', '#a19975', '#a29975',\n    '#a39a74', '#a49b74', '#a59c74', '#a69c74', '#a79d73', '#a89e73', '#a99f73', '#aaa073',\n    '#aba072', '#aca172', '#ada272', '#aea371', '#afa471', '#b0a571', '#b1a570', '#b3a670',\n    '#b4a76f', '#b5a86f', '#b6a96f', '#b7a96e', '#b8aa6e', '#b9ab6d', '#baac6d', '#bbad6d',\n    '#bcae6c', '#bdae6c', '#beaf6b', '#bfb06b', '#c0b16a', '#c1b26a', '#c2b369', '#c3b369',\n    '#c4b468', '#c5b568', '#c6b667', '#c7b767', '#c8b866', '#c9b965', '#cbb965', '#ccba64',\n    '#cdbb63', '#cebc63', '#cfbd62', '#d0be62', '#d1bf61', '#d2c060', '#d3c05f', '#d4c15f',\n    '#d5c25e', '#d6c35d', '#d7c45c', '#d9c55c', '#dac65b', '#dbc75a', '#dcc859', '#ddc858',\n    '#dec958', '#dfca57', '#e0cb56', '#e1cc55', '#e2cd54', '#e4ce53', '#e5cf52', '#e6d051',\n    '#e7d150', '#e8d24f', '#e9d34e', '#ead34c', '#ebd44b', '#edd54a', '#eed649', '#efd748',\n    '#f0d846', '#f1d945', '#f2da44', '#f3db42', '#f5dc41', '#f6dd3f', '#f7de3e', '#f8df3c',\n    '#f9e03a', '#fbe138', '#fce236', '#fde334', '#fee434', '#fee535', '#fee636', '#fee838'\n]);\n\nColorMapContainer.greys = ColorMapContainer.fromStringList([\n    '#ffffff', '#ffffff', '#fefefe', '#fefefe', '#fdfdfd', '#fdfdfd', '#fcfcfc', '#fcfcfc',\n    '#fbfbfb', '#fbfbfb', '#fafafa', '#fafafa', '#f9f9f9', '#f9f9f9', '#f8f8f8', '#f8f8f8',\n    '#f7f7f7', '#f7f7f7', '#f7f7f7', '#f6f6f6', '#f6f6f6', '#f5f5f5', '#f5f5f5', '#f4f4f4',\n    '#f4f4f4', '#f3f3f3', '#f3f3f3', '#f2f2f2', '#f2f2f2', '#f1f1f1', '#f1f1f1', '#f0f0f0',\n    '#f0f0f0', '#efefef', '#eeeeee', '#eeeeee', '#ededed', '#ececec', '#ececec', '#ebebeb',\n    '#eaeaea', '#e9e9e9', '#e9e9e9', '#e8e8e8', '#e7e7e7', '#e7e7e7', '#e6e6e6', '#e5e5e5',\n    '#e4e4e4', '#e4e4e4', '#e3e3e3', '#e2e2e2', '#e1e1e1', '#e1e1e1', '#e0e0e0', '#dfdfdf',\n    '#dfdfdf', '#dedede', '#dddddd', '#dcdcdc', '#dcdcdc', '#dbdbdb', '#dadada', '#dadada',\n    '#d9d9d9', '#d8d8d8', '#d7d7d7', '#d6d6d6', '#d5d5d5', '#d4d4d4', '#d4d4d4', '#d3d3d3',\n    '#d2d2d2', '#d1d1d1', '#d0d0d0', '#cfcfcf', '#cecece', '#cdcdcd', '#cccccc', '#cccccc',\n    '#cbcbcb', '#cacaca', '#c9c9c9', '#c8c8c8', '#c7c7c7', '#c6c6c6', '#c5c5c5', '#c5c5c5',\n    '#c4c4c4', '#c3c3c3', '#c2c2c2', '#c1c1c1', '#c0c0c0', '#bfbfbf', '#bebebe', '#bebebe',\n    '#bdbdbd', '#bbbbbb', '#bababa', '#b9b9b9', '#b8b8b8', '#b6b6b6', '#b5b5b5', '#b4b4b4',\n    '#b3b3b3', '#b2b2b2', '#b0b0b0', '#afafaf', '#aeaeae', '#adadad', '#ababab', '#aaaaaa',\n    '#a9a9a9', '#a8a8a8', '#a7a7a7', '#a5a5a5', '#a4a4a4', '#a3a3a3', '#a2a2a2', '#a0a0a0',\n    '#9f9f9f', '#9e9e9e', '#9d9d9d', '#9c9c9c', '#9a9a9a', '#999999', '#989898', '#979797',\n    '#959595', '#949494', '#939393', '#929292', '#919191', '#909090', '#8f8f8f', '#8e8e8e',\n    '#8d8d8d', '#8c8c8c', '#8a8a8a', '#898989', '#888888', '#878787', '#868686', '#858585',\n    '#848484', '#838383', '#828282', '#818181', '#7f7f7f', '#7e7e7e', '#7d7d7d', '#7c7c7c',\n    '#7b7b7b', '#7a7a7a', '#797979', '#787878', '#777777', '#767676', '#757575', '#737373',\n    '#727272', '#717171', '#707070', '#6f6f6f', '#6e6e6e', '#6d6d6d', '#6c6c6c', '#6b6b6b',\n    '#6a6a6a', '#696969', '#686868', '#676767', '#666666', '#656565', '#646464', '#636363',\n    '#626262', '#616161', '#606060', '#5f5f5f', '#5e5e5e', '#5d5d5d', '#5c5c5c', '#5b5b5b',\n    '#5a5a5a', '#585858', '#575757', '#565656', '#555555', '#545454', '#535353', '#525252',\n    '#515151', '#505050', '#4e4e4e', '#4d4d4d', '#4b4b4b', '#4a4a4a', '#484848', '#474747',\n    '#464646', '#444444', '#434343', '#414141', '#404040', '#3f3f3f', '#3d3d3d', '#3c3c3c',\n    '#3a3a3a', '#393939', '#383838', '#363636', '#353535', '#333333', '#323232', '#303030',\n    '#2f2f2f', '#2e2e2e', '#2c2c2c', '#2b2b2b', '#292929', '#282828', '#272727', '#252525',\n    '#242424', '#232323', '#222222', '#212121', '#1f1f1f', '#1e1e1e', '#1d1d1d', '#1c1c1c',\n    '#1b1b1b', '#1a1a1a', '#181818', '#171717', '#161616', '#151515', '#141414', '#131313',\n    '#111111', '#101010', '#0f0f0f', '#0e0e0e', '#0d0d0d', '#0c0c0c', '#0a0a0a', '#090909',\n    '#080808', '#070707', '#060606', '#050505', '#030303', '#020202', '#010101', '#000000'\n]);\n\nColorMapContainer.gray = ColorMapContainer.fromStringList([\n    '#000000', '#010101', '#020202', '#030303', '#040404', '#050505', '#060606', '#070707',\n    '#080808', '#090909', '#0a0a0a', '#0b0b0b', '#0c0c0c', '#0d0d0d', '#0e0e0e', '#0f0f0f',\n    '#101010', '#111111', '#121212', '#131313', '#141414', '#151515', '#161616', '#171717',\n    '#181818', '#191919', '#1a1a1a', '#1b1b1b', '#1c1c1c', '#1d1d1d', '#1e1e1e', '#1f1f1f',\n    '#202020', '#212121', '#222222', '#232323', '#242424', '#252525', '#262626', '#272727',\n    '#282828', '#292929', '#2a2a2a', '#2b2b2b', '#2c2c2c', '#2d2d2d', '#2e2e2e', '#2f2f2f',\n    '#303030', '#313131', '#323232', '#333333', '#343434', '#353535', '#363636', '#373737',\n    '#383838', '#393939', '#3a3a3a', '#3b3b3b', '#3c3c3c', '#3d3d3d', '#3e3e3e', '#3f3f3f',\n    '#404040', '#414141', '#424242', '#434343', '#444444', '#454545', '#464646', '#474747',\n    '#484848', '#494949', '#4a4a4a', '#4b4b4b', '#4c4c4c', '#4d4d4d', '#4e4e4e', '#4f4f4f',\n    '#505050', '#515151', '#525252', '#535353', '#545454', '#555555', '#565656', '#575757',\n    '#585858', '#595959', '#5a5a5a', '#5b5b5b', '#5c5c5c', '#5d5d5d', '#5e5e5e', '#5f5f5f',\n    '#606060', '#616161', '#626262', '#636363', '#646464', '#656565', '#666666', '#676767',\n    '#686868', '#696969', '#6a6a6a', '#6b6b6b', '#6c6c6c', '#6d6d6d', '#6e6e6e', '#6f6f6f',\n    '#707070', '#717171', '#727272', '#737373', '#747474', '#757575', '#767676', '#777777',\n    '#787878', '#797979', '#7a7a7a', '#7b7b7b', '#7c7c7c', '#7d7d7d', '#7e7e7e', '#7f7f7f',\n    '#808080', '#818181', '#828282', '#838383', '#848484', '#858585', '#868686', '#878787',\n    '#888888', '#898989', '#8a8a8a', '#8b8b8b', '#8c8c8c', '#8d8d8d', '#8e8e8e', '#8f8f8f',\n    '#909090', '#919191', '#929292', '#939393', '#949494', '#959595', '#969696', '#979797',\n    '#989898', '#999999', '#9a9a9a', '#9b9b9b', '#9c9c9c', '#9d9d9d', '#9e9e9e', '#9f9f9f',\n    '#a0a0a0', '#a1a1a1', '#a2a2a2', '#a3a3a3', '#a4a4a4', '#a5a5a5', '#a6a6a6', '#a7a7a7',\n    '#a8a8a8', '#a9a9a9', '#aaaaaa', '#ababab', '#acacac', '#adadad', '#aeaeae', '#afafaf',\n    '#b0b0b0', '#b1b1b1', '#b2b2b2', '#b3b3b3', '#b4b4b4', '#b5b5b5', '#b6b6b6', '#b7b7b7',\n    '#b8b8b8', '#b9b9b9', '#bababa', '#bbbbbb', '#bcbcbc', '#bdbdbd', '#bebebe', '#bfbfbf',\n    '#c0c0c0', '#c1c1c1', '#c2c2c2', '#c3c3c3', '#c4c4c4', '#c5c5c5', '#c6c6c6', '#c7c7c7',\n    '#c8c8c8', '#c9c9c9', '#cacaca', '#cbcbcb', '#cccccc', '#cdcdcd', '#cecece', '#cfcfcf',\n    '#d0d0d0', '#d1d1d1', '#d2d2d2', '#d3d3d3', '#d4d4d4', '#d5d5d5', '#d6d6d6', '#d7d7d7',\n    '#d8d8d8', '#d9d9d9', '#dadada', '#dbdbdb', '#dcdcdc', '#dddddd', '#dedede', '#dfdfdf',\n    '#e0e0e0', '#e1e1e1', '#e2e2e2', '#e3e3e3', '#e4e4e4', '#e5e5e5', '#e6e6e6', '#e7e7e7',\n    '#e8e8e8', '#e9e9e9', '#eaeaea', '#ebebeb', '#ececec', '#ededed', '#eeeeee', '#efefef',\n    '#f0f0f0', '#f1f1f1', '#f2f2f2', '#f3f3f3', '#f4f4f4', '#f5f5f5', '#f6f6f6', '#f7f7f7',\n    '#f8f8f8', '#f9f9f9', '#fafafa', '#fbfbfb', '#fcfcfc', '#fdfdfd', '#fefefe', '#ffffff'\n]);\n\nColorMapContainer.purples = ColorMapContainer.fromStringList([\n    '#fcfbfd', '#fcfbfd', '#fbfafc', '#fbfafc', '#faf9fc', '#faf9fc', '#faf8fb', '#f9f8fb',\n    '#f9f7fb', '#f8f7fb', '#f8f7fa', '#f8f6fa', '#f7f6fa', '#f7f5fa', '#f6f5f9', '#f6f4f9',\n    '#f5f4f9', '#f5f4f9', '#f5f3f8', '#f4f3f8', '#f4f2f8', '#f3f2f8', '#f3f1f7', '#f3f1f7',\n    '#f2f0f7', '#f2f0f7', '#f1f0f6', '#f1eff6', '#f1eff6', '#f0eef6', '#f0eef5', '#efedf5',\n    '#efedf5', '#eeecf5', '#eeecf4', '#edebf4', '#ecebf4', '#eceaf3', '#ebe9f3', '#eae9f3',\n    '#eae8f2', '#e9e8f2', '#e8e7f2', '#e8e6f2', '#e7e6f1', '#e6e5f1', '#e6e5f1', '#e5e4f0',\n    '#e4e3f0', '#e4e3f0', '#e3e2ef', '#e2e2ef', '#e2e1ef', '#e1e0ee', '#e0e0ee', '#e0dfee',\n    '#dfdfed', '#dedeed', '#dedded', '#ddddec', '#dcdcec', '#dcdcec', '#dbdbec', '#dadaeb',\n    '#dadaeb', '#d9d9ea', '#d8d8ea', '#d7d7e9', '#d6d6e9', '#d5d5e9', '#d4d4e8', '#d3d3e8',\n    '#d2d2e7', '#d1d2e7', '#d0d1e6', '#cfd0e6', '#cecfe5', '#cecee5', '#cdcde4', '#cccce4',\n    '#cbcbe3', '#cacae3', '#c9c9e2', '#c8c8e2', '#c7c8e1', '#c6c7e1', '#c5c6e1', '#c4c5e0',\n    '#c3c4e0', '#c2c3df', '#c1c2df', '#c0c1de', '#bfc0de', '#bebfdd', '#bebedd', '#bdbedc',\n    '#bcbddc', '#bbbbdb', '#babadb', '#b9b9da', '#b8b8d9', '#b7b7d9', '#b6b6d8', '#b5b5d7',\n    '#b4b4d7', '#b3b3d6', '#b2b2d5', '#b1b1d5', '#b0afd4', '#afaed4', '#aeadd3', '#aeacd2',\n    '#adabd2', '#acaad1', '#aba9d0', '#aaa8d0', '#a9a7cf', '#a8a6cf', '#a7a4ce', '#a6a3cd',\n    '#a5a2cd', '#a4a1cc', '#a3a0cb', '#a29fcb', '#a19eca', '#a09dca', '#9f9cc9', '#9e9bc8',\n    '#9e9ac8', '#9d99c7', '#9c98c7', '#9b97c6', '#9a96c6', '#9995c6', '#9894c5', '#9793c5',\n    '#9692c4', '#9591c4', '#9490c3', '#9390c3', '#928fc3', '#918ec2', '#908dc2', '#8f8cc1',\n    '#8e8bc1', '#8e8ac0', '#8d89c0', '#8c88bf', '#8b87bf', '#8a86bf', '#8986be', '#8885be',\n    '#8784bd', '#8683bd', '#8582bc', '#8481bc', '#8380bb', '#827fbb', '#817ebb', '#807dba',\n    '#807cba', '#7f7bb9', '#7e79b8', '#7d78b7', '#7d77b7', '#7c75b6', '#7b74b5', '#7b72b4',\n    '#7a71b4', '#7970b3', '#796eb2', '#786db2', '#776cb1', '#776ab0', '#7669af', '#7567af',\n    '#7566ae', '#7465ad', '#7363ad', '#7262ac', '#7261ab', '#715faa', '#705eaa', '#705ca9',\n    '#6f5ba8', '#6e5aa8', '#6e58a7', '#6d57a6', '#6c55a5', '#6c54a5', '#6b53a4', '#6a51a3',\n    '#6950a3', '#694fa2', '#684da1', '#674ca1', '#674ba0', '#66499f', '#65489f', '#65479e',\n    '#64459e', '#63449d', '#63439c', '#62429c', '#61409b', '#613f9a', '#603e9a', '#5f3c99',\n    '#5e3b98', '#5e3a98', '#5d3897', '#5c3797', '#5c3696', '#5b3495', '#5a3395', '#5a3294',\n    '#593093', '#582f93', '#582e92', '#572c92', '#562b91', '#552a90', '#552890', '#54278f',\n    '#53268f', '#53258e', '#52238d', '#51228d', '#51218c', '#50208c', '#4f1f8b', '#4f1d8b',\n    '#4e1c8a', '#4d1b89', '#4d1a89', '#4c1888', '#4c1788', '#4b1687', '#4a1587', '#4a1486',\n    '#491285', '#481185', '#481084', '#470f84', '#460d83', '#460c83', '#450b82', '#440a82',\n    '#440981', '#430780', '#420680', '#42057f', '#41047f', '#40027e', '#40017e', '#3f007d'\n]);\n\nColorMapContainer.blues = ColorMapContainer.fromStringList([\n    '#f7fbff', '#f6faff', '#f5fafe', '#f5f9fe', '#f4f9fe', '#f3f8fe', '#f2f8fd', '#f2f7fd',\n    '#f1f7fd', '#f0f6fd', '#eff6fc', '#eef5fc', '#eef5fc', '#edf4fc', '#ecf4fb', '#ebf3fb',\n    '#eaf3fb', '#eaf2fb', '#e9f2fa', '#e8f1fa', '#e7f1fa', '#e7f0fa', '#e6f0f9', '#e5eff9',\n    '#e4eff9', '#e3eef9', '#e3eef8', '#e2edf8', '#e1edf8', '#e0ecf8', '#dfecf7', '#dfebf7',\n    '#deebf7', '#ddeaf7', '#dceaf6', '#dce9f6', '#dbe9f6', '#dae8f6', '#d9e8f5', '#d9e7f5',\n    '#d8e7f5', '#d7e6f5', '#d6e6f4', '#d6e5f4', '#d5e5f4', '#d4e4f4', '#d3e4f3', '#d3e3f3',\n    '#d2e3f3', '#d1e2f3', '#d0e2f2', '#d0e1f2', '#cfe1f2', '#cee0f2', '#cde0f1', '#cddff1',\n    '#ccdff1', '#cbdef1', '#cadef0', '#caddf0', '#c9ddf0', '#c8dcf0', '#c7dcef', '#c7dbef',\n    '#c6dbef', '#c4daee', '#c3daee', '#c2d9ee', '#c1d9ed', '#bfd8ed', '#bed8ec', '#bdd7ec',\n    '#bcd7eb', '#bad6eb', '#b9d6ea', '#b8d5ea', '#b7d4ea', '#b5d4e9', '#b4d3e9', '#b3d3e8',\n    '#b2d2e8', '#b0d2e7', '#afd1e7', '#aed1e7', '#add0e6', '#abd0e6', '#aacfe5', '#a9cfe5',\n    '#a8cee4', '#a6cee4', '#a5cde3', '#a4cce3', '#a3cce3', '#a1cbe2', '#a0cbe2', '#9fcae1',\n    '#9dcae1', '#9cc9e1', '#9ac8e0', '#99c7e0', '#97c6df', '#95c5df', '#94c4df', '#92c4de',\n    '#91c3de', '#8fc2de', '#8dc1dd', '#8cc0dd', '#8abfdd', '#89bedc', '#87bddc', '#85bcdc',\n    '#84bcdb', '#82bbdb', '#81badb', '#7fb9da', '#7db8da', '#7cb7da', '#7ab6d9', '#79b5d9',\n    '#77b5d9', '#75b4d8', '#74b3d8', '#72b2d8', '#71b1d7', '#6fb0d7', '#6dafd7', '#6caed6',\n    '#6aaed6', '#69add5', '#68acd5', '#66abd4', '#65aad4', '#64a9d3', '#63a8d3', '#61a7d2',\n    '#60a7d2', '#5fa6d1', '#5da5d1', '#5ca4d0', '#5ba3d0', '#5aa2cf', '#58a1cf', '#57a0ce',\n    '#56a0ce', '#549fcd', '#539ecd', '#529dcc', '#519ccc', '#4f9bcb', '#4e9acb', '#4d99ca',\n    '#4b98ca', '#4a98c9', '#4997c9', '#4896c8', '#4695c8', '#4594c7', '#4493c7', '#4292c6',\n    '#4191c6', '#4090c5', '#3f8fc5', '#3e8ec4', '#3d8dc4', '#3c8cc3', '#3b8bc2', '#3a8ac2',\n    '#3989c1', '#3888c1', '#3787c0', '#3686c0', '#3585bf', '#3484bf', '#3383be', '#3282be',\n    '#3181bd', '#3080bd', '#2f7fbc', '#2e7ebc', '#2d7dbb', '#2c7cba', '#2b7bba', '#2a7ab9',\n    '#2979b9', '#2777b8', '#2676b8', '#2575b7', '#2474b7', '#2373b6', '#2272b6', '#2171b5',\n    '#2070b4', '#206fb4', '#1f6eb3', '#1e6db2', '#1d6cb1', '#1c6bb0', '#1c6ab0', '#1b69af',\n    '#1a68ae', '#1967ad', '#1966ad', '#1865ac', '#1764ab', '#1663aa', '#1562a9', '#1561a9',\n    '#1460a8', '#135fa7', '#125ea6', '#125da6', '#115ca5', '#105ba4', '#0f5aa3', '#0e59a2',\n    '#0e58a2', '#0d57a1', '#0c56a0', '#0b559f', '#0a549e', '#0a539e', '#09529d', '#08519c',\n    '#08509b', '#084f99', '#084e98', '#084d96', '#084c95', '#084b93', '#084a91', '#084990',\n    '#08488e', '#08478d', '#08468b', '#08458a', '#084488', '#084387', '#084285', '#084184',\n    '#084082', '#083e81', '#083d7f', '#083c7d', '#083b7c', '#083a7a', '#083979', '#083877',\n    '#083776', '#083674', '#083573', '#083471', '#083370', '#08326e', '#08316d', '#08306b'\n]);\n\nColorMapContainer.greens = ColorMapContainer.fromStringList([\n    '#f7fcf5', '#f6fcf4', '#f6fcf4', '#f5fbf3', '#f5fbf2', '#f4fbf2', '#f4fbf1', '#f3faf0',\n    '#f2faf0', '#f2faef', '#f1faee', '#f1faee', '#f0f9ed', '#f0f9ec', '#eff9ec', '#eff9eb',\n    '#eef8ea', '#edf8ea', '#edf8e9', '#ecf8e8', '#ecf8e8', '#ebf7e7', '#ebf7e7', '#eaf7e6',\n    '#e9f7e5', '#e9f7e5', '#e8f6e4', '#e8f6e3', '#e7f6e3', '#e7f6e2', '#e6f5e1', '#e5f5e1',\n    '#e5f5e0', '#e4f5df', '#e3f4de', '#e2f4dd', '#e1f3dc', '#e0f3db', '#dff3da', '#def2d9',\n    '#ddf2d8', '#dcf2d7', '#dbf1d6', '#dbf1d5', '#daf0d4', '#d9f0d3', '#d8f0d2', '#d7efd1',\n    '#d6efd0', '#d5efcf', '#d4eece', '#d3eecd', '#d2edcc', '#d1edcb', '#d0edca', '#cfecc9',\n    '#ceecc8', '#cdecc7', '#ccebc6', '#cbebc5', '#cbeac4', '#caeac3', '#c9eac2', '#c8e9c1',\n    '#c7e9c0', '#c6e8bf', '#c4e8bd', '#c3e7bc', '#c2e7bb', '#c1e6ba', '#c0e6b9', '#bee5b8',\n    '#bde5b6', '#bce4b5', '#bbe4b4', '#bae3b3', '#b8e3b2', '#b7e2b1', '#b6e2af', '#b5e1ae',\n    '#b4e1ad', '#b2e0ac', '#b1e0ab', '#b0dfaa', '#afdfa8', '#aedea7', '#acdea6', '#abdda5',\n    '#aadda4', '#a9dca3', '#a8dca2', '#a7dba0', '#a5db9f', '#a4da9e', '#a3da9d', '#a2d99c',\n    '#a0d99b', '#9fd899', '#9ed798', '#9cd797', '#9bd696', '#99d595', '#98d594', '#97d492',\n    '#95d391', '#94d390', '#92d28f', '#91d28e', '#90d18d', '#8ed08b', '#8dd08a', '#8bcf89',\n    '#8ace88', '#88ce87', '#87cd86', '#86cc85', '#84cc83', '#83cb82', '#81ca81', '#80ca80',\n    '#7fc97f', '#7dc87e', '#7cc87c', '#7ac77b', '#79c67a', '#78c679', '#76c578', '#75c477',\n    '#73c476', '#72c375', '#70c274', '#6ec173', '#6dc072', '#6bc072', '#6abf71', '#68be70',\n    '#66bd6f', '#65bd6f', '#63bc6e', '#62bb6d', '#60ba6c', '#5eb96b', '#5db96b', '#5bb86a',\n    '#5ab769', '#58b668', '#56b567', '#55b567', '#53b466', '#52b365', '#50b264', '#4eb264',\n    '#4db163', '#4bb062', '#4aaf61', '#48ae60', '#46ae60', '#45ad5f', '#43ac5e', '#42ab5d',\n    '#40aa5d', '#3fa95c', '#3fa85b', '#3ea75a', '#3da65a', '#3ca559', '#3ba458', '#3aa357',\n    '#39a257', '#38a156', '#37a055', '#369f54', '#359e53', '#349d53', '#339c52', '#329b51',\n    '#319a50', '#309950', '#2f984f', '#2f974e', '#2e964d', '#2d954d', '#2c944c', '#2b934b',\n    '#2a924a', '#29914a', '#289049', '#278f48', '#268e47', '#258d47', '#248c46', '#238b45',\n    '#228a44', '#218944', '#208843', '#1f8742', '#1e8741', '#1d8640', '#1c8540', '#1a843f',\n    '#19833e', '#18823d', '#17813d', '#16803c', '#157f3b', '#147e3a', '#137d39', '#127c39',\n    '#117b38', '#107a37', '#0e7936', '#0d7836', '#0c7735', '#0b7734', '#0a7633', '#097532',\n    '#087432', '#077331', '#067230', '#05712f', '#03702e', '#026f2e', '#016e2d', '#006d2c',\n    '#006c2c', '#006b2b', '#00692a', '#00682a', '#006729', '#006529', '#006428', '#006328',\n    '#006227', '#006027', '#005f26', '#005e26', '#005c25', '#005b25', '#005a24', '#005924',\n    '#005723', '#005622', '#005522', '#005321', '#005221', '#005120', '#005020', '#004e1f',\n    '#004d1f', '#004c1e', '#004a1e', '#00491d', '#00481d', '#00471c', '#00451c', '#00441b'\n]);\n\nColorMapContainer.oranges = ColorMapContainer.fromStringList([\n    '#fff5eb', '#fff5ea', '#fff4e9', '#fff4e8', '#fff3e7', '#fff3e6', '#fff2e6', '#fff2e5',\n    '#fff1e4', '#fff1e3', '#fff0e2', '#fff0e1', '#ffefe0', '#ffefdf', '#ffeede', '#ffeedd',\n    '#feeddc', '#feeddc', '#feeddb', '#feecda', '#feecd9', '#feebd8', '#feebd7', '#feead6',\n    '#feead5', '#fee9d4', '#fee9d3', '#fee8d2', '#fee8d2', '#fee7d1', '#fee7d0', '#fee6cf',\n    '#fee6ce', '#fee5cc', '#fee5cb', '#fee4ca', '#fee3c8', '#fee2c7', '#fee2c6', '#fee1c4',\n    '#fee0c3', '#fee0c1', '#fedfc0', '#fedebf', '#fedebd', '#feddbc', '#fedcbb', '#fedcb9',\n    '#fddbb8', '#fddab6', '#fdd9b5', '#fdd9b4', '#fdd8b2', '#fdd7b1', '#fdd7af', '#fdd6ae',\n    '#fdd5ad', '#fdd5ab', '#fdd4aa', '#fdd3a9', '#fdd3a7', '#fdd2a6', '#fdd1a4', '#fdd1a3',\n    '#fdd0a2', '#fdcfa0', '#fdce9e', '#fdcd9c', '#fdcb9b', '#fdca99', '#fdc997', '#fdc895',\n    '#fdc794', '#fdc692', '#fdc590', '#fdc48f', '#fdc38d', '#fdc28b', '#fdc189', '#fdc088',\n    '#fdbf86', '#fdbe84', '#fdbd83', '#fdbb81', '#fdba7f', '#fdb97d', '#fdb87c', '#fdb77a',\n    '#fdb678', '#fdb576', '#fdb475', '#fdb373', '#fdb271', '#fdb170', '#fdb06e', '#fdaf6c',\n    '#fdae6a', '#fdad69', '#fdac67', '#fdab66', '#fda965', '#fda863', '#fda762', '#fda660',\n    '#fda55f', '#fda45d', '#fda35c', '#fda25a', '#fda159', '#fda057', '#fd9f56', '#fd9e54',\n    '#fd9d53', '#fd9c51', '#fd9b50', '#fd9a4e', '#fd994d', '#fd984b', '#fd974a', '#fd9649',\n    '#fd9547', '#fd9446', '#fd9344', '#fd9243', '#fd9141', '#fd9040', '#fd8f3e', '#fd8e3d',\n    '#fd8c3b', '#fc8b3a', '#fc8a39', '#fc8937', '#fb8836', '#fb8735', '#fb8634', '#fa8532',\n    '#fa8331', '#f98230', '#f9812e', '#f9802d', '#f87f2c', '#f87e2b', '#f87d29', '#f77b28',\n    '#f77a27', '#f67925', '#f67824', '#f67723', '#f57622', '#f57520', '#f5741f', '#f4721e',\n    '#f4711c', '#f3701b', '#f36f1a', '#f36e19', '#f26d17', '#f26c16', '#f26b15', '#f16913',\n    '#f16813', '#f06712', '#ef6612', '#ee6511', '#ee6410', '#ed6310', '#ec620f', '#eb610f',\n    '#eb600e', '#ea5f0e', '#e95e0d', '#e85d0c', '#e75c0c', '#e75b0b', '#e65a0b', '#e5590a',\n    '#e4580a', '#e45709', '#e35608', '#e25508', '#e15407', '#e15307', '#e05206', '#df5106',\n    '#de5005', '#de4e05', '#dd4d04', '#dc4c03', '#db4b03', '#db4a02', '#da4902', '#d94801',\n    '#d84801', '#d64701', '#d54601', '#d34601', '#d14501', '#d04501', '#ce4401', '#cd4401',\n    '#cb4302', '#c94202', '#c84202', '#c64102', '#c54102', '#c34002', '#c14002', '#c03f02',\n    '#be3f02', '#bd3e02', '#bb3d02', '#b93d02', '#b83c02', '#b63c02', '#b53b02', '#b33b02',\n    '#b13a03', '#b03903', '#ae3903', '#ad3803', '#ab3803', '#a93703', '#a83703', '#a63603',\n    '#a53603', '#a43503', '#a23503', '#a13403', '#a03403', '#9f3303', '#9e3303', '#9c3203',\n    '#9b3203', '#9a3103', '#993103', '#973003', '#963003', '#952f03', '#942f03', '#932f03',\n    '#912e04', '#902e04', '#8f2d04', '#8e2d04', '#8c2c04', '#8b2c04', '#8a2b04', '#892b04',\n    '#882a04', '#862a04', '#852904', '#842904', '#832804', '#812804', '#802704', '#7f2704'\n]);\n\nColorMapContainer.reds = ColorMapContainer.fromStringList([\n    '#fff5f0', '#fff4ef', '#fff4ee', '#fff3ed', '#fff2ec', '#fff2eb', '#fff1ea', '#fff0e9',\n    '#fff0e8', '#ffefe8', '#ffeee7', '#ffeee6', '#ffede5', '#ffece4', '#ffece3', '#ffebe2',\n    '#feeae1', '#feeae0', '#fee9df', '#fee8de', '#fee8dd', '#fee7dc', '#fee7db', '#fee6da',\n    '#fee5d9', '#fee5d8', '#fee4d8', '#fee3d7', '#fee3d6', '#fee2d5', '#fee1d4', '#fee1d3',\n    '#fee0d2', '#fedfd0', '#fedecf', '#fedccd', '#fedbcc', '#fedaca', '#fed9c9', '#fed8c7',\n    '#fdd7c6', '#fdd5c4', '#fdd4c2', '#fdd3c1', '#fdd2bf', '#fdd1be', '#fdd0bc', '#fdcebb',\n    '#fdcdb9', '#fdccb8', '#fdcbb6', '#fdcab5', '#fdc9b3', '#fdc7b2', '#fdc6b0', '#fdc5ae',\n    '#fcc4ad', '#fcc3ab', '#fcc2aa', '#fcc1a8', '#fcbfa7', '#fcbea5', '#fcbda4', '#fcbca2',\n    '#fcbba1', '#fcb99f', '#fcb89e', '#fcb79c', '#fcb69b', '#fcb499', '#fcb398', '#fcb296',\n    '#fcb095', '#fcaf93', '#fcae92', '#fcad90', '#fcab8f', '#fcaa8d', '#fca98c', '#fca78b',\n    '#fca689', '#fca588', '#fca486', '#fca285', '#fca183', '#fca082', '#fc9e80', '#fc9d7f',\n    '#fc9c7d', '#fc9b7c', '#fc997a', '#fc9879', '#fc9777', '#fc9576', '#fc9474', '#fc9373',\n    '#fc9272', '#fc9070', '#fc8f6f', '#fc8e6e', '#fc8d6d', '#fc8b6b', '#fc8a6a', '#fc8969',\n    '#fc8767', '#fc8666', '#fc8565', '#fc8464', '#fc8262', '#fc8161', '#fc8060', '#fc7f5f',\n    '#fb7d5d', '#fb7c5c', '#fb7b5b', '#fb7a5a', '#fb7858', '#fb7757', '#fb7656', '#fb7555',\n    '#fb7353', '#fb7252', '#fb7151', '#fb7050', '#fb6e4e', '#fb6d4d', '#fb6c4c', '#fb6b4b',\n    '#fb694a', '#fa6849', '#fa6648', '#fa6547', '#f96346', '#f96245', '#f96044', '#f85f43',\n    '#f85d42', '#f75c41', '#f75b40', '#f7593f', '#f6583e', '#f6563d', '#f6553c', '#f5533b',\n    '#f5523a', '#f4503a', '#f44f39', '#f44d38', '#f34c37', '#f34a36', '#f34935', '#f24734',\n    '#f24633', '#f14432', '#f14331', '#f14130', '#f0402f', '#f03f2e', '#f03d2d', '#ef3c2c',\n    '#ee3a2c', '#ed392b', '#ec382b', '#eb372a', '#ea362a', '#e93529', '#e83429', '#e63328',\n    '#e53228', '#e43027', '#e32f27', '#e22e27', '#e12d26', '#e02c26', '#de2b25', '#dd2a25',\n    '#dc2924', '#db2824', '#da2723', '#d92523', '#d82422', '#d72322', '#d52221', '#d42121',\n    '#d32020', '#d21f20', '#d11e1f', '#d01d1f', '#cf1c1f', '#ce1a1e', '#cc191e', '#cb181d',\n    '#ca181d', '#c9181d', '#c8171c', '#c7171c', '#c5171c', '#c4161c', '#c3161b', '#c2161b',\n    '#c1161b', '#bf151b', '#be151a', '#bd151a', '#bc141a', '#bb141a', '#b91419', '#b81419',\n    '#b71319', '#b61319', '#b51318', '#b31218', '#b21218', '#b11218', '#b01217', '#af1117',\n    '#ad1117', '#ac1117', '#ab1016', '#aa1016', '#a91016', '#a81016', '#a60f15', '#a50f15',\n    '#a30f15', '#a10e15', '#9f0e14', '#9d0d14', '#9c0d14', '#9a0c14', '#980c13', '#960b13',\n    '#940b13', '#920a13', '#900a12', '#8e0912', '#8c0912', '#8a0812', '#880811', '#860811',\n    '#840711', '#820711', '#800610', '#7e0610', '#7c0510', '#7a0510', '#79040f', '#77040f',\n    '#75030f', '#73030f', '#71020e', '#6f020e', '#6d010e', '#6b010e', '#69000d', '#67000d'\n]);\n\nColorMapContainer.rdYlBu = ColorMapContainer.fromStringList([\n    '#a50026', '#a70226', '#a90426', '#ab0626', '#ad0826', '#af0926', '#b10b26', '#b30d26',\n    '#b50f26', '#b71126', '#b91326', '#bb1526', '#bd1726', '#be1827', '#c01a27', '#c21c27',\n    '#c41e27', '#c62027', '#c82227', '#ca2427', '#cc2627', '#ce2827', '#d02927', '#d22b27',\n    '#d42d27', '#d62f27', '#d83128', '#d93429', '#da362a', '#db382b', '#dc3b2c', '#dd3d2d',\n    '#de402e', '#e0422f', '#e14430', '#e24731', '#e34933', '#e44c34', '#e54e35', '#e65036',\n    '#e75337', '#e95538', '#ea5739', '#eb5a3a', '#ec5c3b', '#ed5f3c', '#ee613e', '#ef633f',\n    '#f16640', '#f26841', '#f36b42', '#f46d43', '#f47044', '#f57245', '#f57547', '#f57748',\n    '#f67a49', '#f67c4a', '#f67f4b', '#f7814c', '#f7844e', '#f8864f', '#f88950', '#f88c51',\n    '#f98e52', '#f99153', '#f99355', '#fa9656', '#fa9857', '#fa9b58', '#fb9d59', '#fba05b',\n    '#fba35c', '#fca55d', '#fca85e', '#fcaa5f', '#fdad60', '#fdaf62', '#fdb164', '#fdb366',\n    '#fdb567', '#fdb769', '#fdb96b', '#fdbb6d', '#fdbd6f', '#fdbf71', '#fdc173', '#fdc374',\n    '#fdc576', '#fdc778', '#fec87a', '#feca7c', '#fecc7e', '#fece7f', '#fed081', '#fed283',\n    '#fed485', '#fed687', '#fed889', '#feda8a', '#fedc8c', '#fede8e', '#fee090', '#fee192',\n    '#fee294', '#fee496', '#fee597', '#fee699', '#fee79b', '#fee99d', '#feea9f', '#feeba1',\n    '#feeca2', '#feeda4', '#feefa6', '#fff0a8', '#fff1aa', '#fff2ac', '#fff3ad', '#fff5af',\n    '#fff6b1', '#fff7b3', '#fff8b5', '#fffab7', '#fffbb9', '#fffcba', '#fffdbc', '#fffebe',\n    '#feffc0', '#fdfec2', '#fcfec5', '#fbfdc7', '#fafdc9', '#f8fccb', '#f7fcce', '#f6fbd0',\n    '#f5fbd2', '#f3fbd4', '#f2fad6', '#f1fad9', '#f0f9db', '#eff9dd', '#edf8df', '#ecf8e2',\n    '#ebf7e4', '#eaf7e6', '#e9f6e8', '#e7f6eb', '#e6f5ed', '#e5f5ef', '#e4f4f1', '#e2f4f4',\n    '#e1f3f6', '#e0f3f8', '#def2f7', '#dcf1f7', '#daf0f6', '#d8eff6', '#d6eef5', '#d4edf4',\n    '#d1ecf4', '#cfebf3', '#cdeaf3', '#cbe9f2', '#c9e8f2', '#c7e7f1', '#c5e6f0', '#c3e5f0',\n    '#c1e4ef', '#bfe3ef', '#bde2ee', '#bbe1ed', '#b9e0ed', '#b6dfec', '#b4deec', '#b2ddeb',\n    '#b0dcea', '#aedbea', '#acdae9', '#aad8e9', '#a8d6e8', '#a6d5e7', '#a3d3e6', '#a1d1e5',\n    '#9fd0e4', '#9dcee3', '#9bcce2', '#99cae1', '#97c9e0', '#94c7df', '#92c5de', '#90c3dd',\n    '#8ec2dc', '#8cc0db', '#8abeda', '#87bdd9', '#85bbd9', '#83b9d8', '#81b7d7', '#7fb6d6',\n    '#7db4d5', '#7ab2d4', '#78b0d3', '#76afd2', '#74add1', '#72abd0', '#70a9cf', '#6ea6ce',\n    '#6da4cc', '#6ba2cb', '#69a0ca', '#679ec9', '#659bc8', '#6399c7', '#6297c6', '#6095c4',\n    '#5e93c3', '#5c90c2', '#5a8ec1', '#588cc0', '#578abf', '#5588be', '#5385bd', '#5183bb',\n    '#4f81ba', '#4d7fb9', '#4b7db8', '#4a7ab7', '#4878b6', '#4676b5', '#4574b3', '#4471b2',\n    '#436fb1', '#426cb0', '#416aaf', '#4167ad', '#4065ac', '#3f62ab', '#3e60aa', '#3e5ea8',\n    '#3d5ba7', '#3c59a6', '#3b56a5', '#3a54a4', '#3a51a2', '#394fa1', '#384ca0', '#374a9f',\n    '#36479e', '#36459c', '#35429b', '#34409a', '#333d99', '#333b97', '#323896', '#313695'\n]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A FITS image.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { WebFile } from \"../web_file.js\";\nimport { Coordinates } from \"../coordinates.js\";\nimport { WcsImage } from \"./wcs_image.js\";\n\n\n// wwtlib.FitsImage\n\nexport function FitsImage(dataset, file, blob, callMeBack) {\n    this.errored = false;\n    this.numAxis = 0;\n    this.histogramMaxCount = 0;\n    this.sourceBlob = null;\n    this.header = {};\n    this.position = 0;\n    this.bufferSize = 1;\n    this._parseSuccessful$1 = false;\n    WcsImage.call(this);\n    this.dataset = dataset;\n    this.fitsProperties = dataset.get_fitsProperties();\n    this._callBack$1 = callMeBack;\n    this.filename = file;\n    if (blob != null) {\n        this._readFromBlob$1(blob);\n    }\n    else {\n        this.getFile(file);\n    }\n}\n\nFitsImage.naN = 0 / 0;\n\nvar FitsImage$ = {\n    getFile: function (url) {\n        this._webFile$1 = new WebFile(url);\n        this._webFile$1.responseType = 'blob';\n        this._webFile$1.onStateChange = ss.bind('fileStateChange', this);\n        this._webFile$1.send();\n    },\n\n    fileStateChange: function () {\n        if (this._webFile$1.get_state() === 2) {\n            this.errored = true;\n            if (this._callBack$1 != null) {\n                this._callBack$1(this);\n            }\n        } else if (this._webFile$1.get_state() === 1) {\n            var mainBlob = this._webFile$1.getBlob();\n            this._readFromBlob$1(mainBlob);\n        }\n    },\n    _readFromBlob$1: function (blob) {\n        var $this = this;\n\n        this.sourceBlob = blob;\n        var chunck = new FileReader();\n        chunck.onloadend = function (e) {\n            $this.readFromBin(new DataView(chunck.result));\n            $this.errored = !$this._parseSuccessful$1;\n            if ($this._callBack$1 != null) {\n                $this._callBack$1($this);\n            }\n        };\n        chunck.readAsArrayBuffer(blob);\n    },\n    _readByteString$1: function (dataView, count) {\n        var data = '';\n        for (var i = 0; i < count; i++) {\n            data += String.fromCharCode(dataView.getUint8(this.position));\n            this.position++;\n        }\n        return data;\n    },\n    _validateFitsSimple$1: function (dataView) {\n        var data = this._readByteString$1(dataView, 8);\n        var keyword = ss.trimEnd(data);\n        this.position -= 8;\n        return keyword.toUpperCase() === 'SIMPLE';\n    },\n\n    readFromBin: function (dataView) {\n        if (!this._validateFitsSimple$1(dataView)) {\n            console.log('The requested file is not a valid FITS file.');\n            return;\n        }\n        var foundEnd = false;\n        while (!foundEnd) {\n            for (var i = 0; i < 36; i++) {\n                var data = this._readByteString$1(dataView, 80);\n                if (!foundEnd) {\n                    var keyword = ss.trimEnd(data.substring(0, 8));\n                    var values = data.substring(10).split('/');\n                    if (keyword.toUpperCase() === 'END') {\n                        foundEnd = true;\n                        // Check for XTENSION\n                        i++;\n                        data = this._readByteString$1(dataView, 80);\n                        while (ss.whitespace(data)) {\n                            i++;\n                            data = this._readByteString$1(dataView, 80);\n                        }\n                        keyword = ss.trimEnd(data.substring(0, 8));\n                        if (keyword.toUpperCase() === 'XTENSION') {\n                            // We have additional headers\n                            foundEnd = false;\n                        }\n                        else {\n                            // Rewind these 80 bytes which could be data\n                            this.position -= 80;\n                        }\n                    }\n                    else {\n                        this._addKeyword$1(keyword, values);\n                    }\n                }\n            }\n        }\n        if (!foundEnd) {\n            console.log('Unable to parse requested FITS file.');\n            return;\n        }\n        this.numAxis = parseInt(this.header['NAXIS']);\n        if (ss.keyExists(this.header, 'BLANK')) {\n            this.fitsProperties.blankValue = parseFloat(this.header['BLANK']);\n            this.fitsProperties.containsBlanks = true;\n        }\n        if (ss.keyExists(this.header, 'BZERO')) {\n            this.fitsProperties.bZero = parseFloat(this.header['BZERO']);\n        }\n        if (ss.keyExists(this.header, 'BSCALE')) {\n            this.fitsProperties.bScale = parseFloat(this.header['BSCALE']);\n        }\n        this.axisSize = new Array(this.numAxis);\n        for (var axis = 0; axis < this.numAxis; axis++) {\n            this.axisSize[axis] = parseInt(this.header[ss.format('NAXIS{0}', axis + 1)]);\n            this.bufferSize *= this.axisSize[axis];\n        }\n        var bitpix = parseInt(this.header['BITPIX']);\n        this.readDataUnit(dataView, bitpix);\n        if (this.numAxis > 1) {\n            this.sizeX = this.axisSize[0];\n            this.sizeY = this.axisSize[1];\n            this.histogram = this.computeHistogram(256);\n            this.histogramMaxCount = this.histogram[256];\n        }\n        this.computeWcs();\n        this._parseSuccessful$1 = true;\n    },\n    _addKeyword$1: function (keyword, values) {\n        if (keyword !== 'CONTINUE' && keyword !== 'COMMENT' && keyword !== 'HISTORY' && !ss.emptyString(keyword)) {\n            try {\n                if (ss.keyExists(this.header, keyword)) {\n                    this.header[keyword] = ss.trim(values[0]);\n                }\n                else {\n                    this.header[keyword.toUpperCase()] = ss.trim(values[0]);\n                }\n            }\n            catch ($e1) {\n            }\n        }\n    },\n\n    readDataUnit: function (dataView, bitpix) {\n        this.dataUnit = new Float32Array(this.bufferSize);\n        switch (bitpix) {\n            case -64:\n                this.readDataUnitFloat64(dataView);\n                break;\n            case -32:\n                this.readDataUnitFloat32(dataView);\n                break;\n            case 8:\n                this.readDataUnitUint8(dataView);\n                break;\n            case 16:\n                this.readDataUnitInt16(dataView);\n                break;\n            case 32:\n                this.readDataUnitInt32(dataView);\n                break;\n            case 64:\n                // 64 bit integers not supported by Safari\n                console.log('64 bit integer FITS are not yet supported');\n                break;\n        }\n    },\n\n    readDataUnitFloat64: function (dataView) {\n        var i = 0;\n        while (this.position < dataView.byteLength) {\n            this.dataUnit[i] = dataView.getFloat64(this.position, false);\n            var physicalValue = this.dataUnit[i] * this.fitsProperties.bScale + this.fitsProperties.bZero;\n            if (this.fitsProperties.minVal > physicalValue) {\n                this.fitsProperties.minVal = physicalValue;\n            }\n            if (this.fitsProperties.maxVal < physicalValue) {\n                this.fitsProperties.maxVal = physicalValue;\n            }\n            i++;\n            this.position += 8;\n        }\n        this.fitsProperties.lowerCut = this.fitsProperties.minVal;\n        this.fitsProperties.upperCut = this.fitsProperties.maxVal;\n    },\n\n    readDataUnitFloat32: function (dataView) {\n        var i = 0;\n        while (this.position < dataView.byteLength) {\n            this.dataUnit[i] = dataView.getFloat32(this.position, false);\n            var physicalValue = this.dataUnit[i] * this.fitsProperties.bScale + this.fitsProperties.bZero;\n            if (this.fitsProperties.minVal > physicalValue) {\n                this.fitsProperties.minVal = physicalValue;\n            }\n            if (this.fitsProperties.maxVal < physicalValue) {\n                this.fitsProperties.maxVal = physicalValue;\n            }\n            i++;\n            this.position += 4;\n        }\n        this.fitsProperties.lowerCut = this.fitsProperties.minVal;\n        this.fitsProperties.upperCut = this.fitsProperties.maxVal;\n    },\n\n    readDataUnitUint8: function (dataView) {\n        var i = 0;\n        while (this.position < dataView.byteLength) {\n            this.dataUnit[i] = dataView.getUint8(this.position);\n            if (this.fitsProperties.minVal > this.dataUnit[i]) {\n                this.fitsProperties.minVal = this.dataUnit[i];\n            }\n            if (this.fitsProperties.maxVal < this.dataUnit[i]) {\n                this.fitsProperties.maxVal = this.dataUnit[i];\n            }\n            i++;\n            this.position += 1;\n        }\n        this.fitsProperties.lowerCut = this.fitsProperties.minVal;\n        this.fitsProperties.upperCut = this.fitsProperties.maxVal;\n    },\n\n    readDataUnitInt16: function (dataView) {\n        var i = 0;\n        while (this.position < dataView.byteLength) {\n            this.dataUnit[i] = dataView.getInt16(this.position, false);\n            if (this.fitsProperties.minVal > this.dataUnit[i]) {\n                this.fitsProperties.minVal = this.dataUnit[i];\n            }\n            if (this.fitsProperties.maxVal < this.dataUnit[i]) {\n                this.fitsProperties.maxVal = this.dataUnit[i];\n            }\n            i++;\n            this.position += 2;\n        }\n        this.fitsProperties.lowerCut = this.fitsProperties.minVal;\n        this.fitsProperties.upperCut = this.fitsProperties.maxVal;\n    },\n\n    readDataUnitInt32: function (dataView) {\n        var i = 0;\n        while (this.position < dataView.byteLength) {\n            this.dataUnit[i] = dataView.getInt32(this.position, false);\n            if (this.fitsProperties.minVal > this.dataUnit[i]) {\n                this.fitsProperties.minVal = this.dataUnit[i];\n            }\n            if (this.fitsProperties.maxVal < this.dataUnit[i]) {\n                this.fitsProperties.maxVal = this.dataUnit[i];\n            }\n            i++;\n            this.position += 4;\n        }\n        this.fitsProperties.lowerCut = this.fitsProperties.minVal;\n        this.fitsProperties.upperCut = this.fitsProperties.maxVal;\n    },\n\n    computeWcs: function () {\n        if (ss.keyExists(this.header, 'CROTA2')) {\n            this.rotation = parseFloat(ss.trim(this.header['CROTA2']));\n            this.hasRotation = true;\n        }\n        if (ss.keyExists(this.header, 'CDELT1')) {\n            this.scaleX = parseFloat(ss.trim(this.header['CDELT1']));\n            if (ss.keyExists(this.header, 'CDELT2')) {\n                this.scaleY = parseFloat(ss.trim(this.header['CDELT2']));\n                this.hasScale = true;\n            }\n        }\n        if (ss.keyExists(this.header, 'CRPIX1')) {\n            // In FITS/ WCS, pixel coordinates are 1 - based and integer pixel\n            // coordinates land on pixel centers. Therefore in standard FITS\n            // orientation, where the \"first\" pixel is at the lower-left, the\n            // lower-left corner of the image has pixel coordinate (0.5, 0.5). For\n            // the WWT offset parameters, the lower-left corner of the image has\n            // coordinate (0, 0).\n            this.referenceX = parseFloat(ss.trim(this.header['CRPIX1'])) - 0.5;\n            if (ss.keyExists(this.header, 'CRPIX2')) {\n                this.referenceY = parseFloat(ss.trim(this.header['CRPIX2'])) - 0.5;\n                this.hasPixel = true;\n            }\n        }\n        var galactic = false;\n        var tan = false;\n        if (ss.keyExists(this.header, 'CTYPE1')) {\n            if (this.header['CTYPE1'].indexOf('GLON-') > -1) {\n                galactic = true;\n                tan = true;\n            }\n            if (this.header['CTYPE2'].indexOf('GLAT-') > -1) {\n                galactic = true;\n                tan = true;\n            }\n            if (this.header['CTYPE1'].indexOf('-TAN') > -1) {\n                tan = true;\n            }\n            if (this.header['CTYPE1'].indexOf('-SIN') > -1) {\n                tan = true;\n            }\n        }\n        if (!tan) {\n            throw new Error('Only TAN projected images are supported: ');\n        }\n        this.hasSize = true;\n        if (ss.keyExists(this.header, 'CRVAL1')) {\n            this.centerX = parseFloat(ss.trim(this.header['CRVAL1']));\n            if (ss.keyExists(this.header, 'CRVAL2')) {\n                this.centerY = parseFloat(ss.trim(this.header['CRVAL2']));\n                this.hasLocation = true;\n            }\n        }\n        if (galactic) {\n            var result = Coordinates.galactictoJ2000(this.centerX, this.centerY);\n            this.centerX = result[0];\n            this.centerY = result[1];\n        }\n        if (ss.keyExists(this.header, 'CD1_1') && ss.keyExists(this.header, 'CD1_2') && ss.keyExists(this.header, 'CD2_1') && ss.keyExists(this.header, 'CD2_2')) {\n            this.cd1_1 = parseFloat(ss.trim(this.header['CD1_1']));\n            this.cd1_2 = parseFloat(ss.trim(this.header['CD1_2']));\n            this.cd2_1 = parseFloat(ss.trim(this.header['CD2_1']));\n            this.cd2_2 = parseFloat(ss.trim(this.header['CD2_2']));\n            if (!this.hasRotation) {\n                this.calculateRotationFromCD();\n            }\n            if (!this.hasScale) {\n                this.calculateScaleFromCD();\n            }\n            this.hasScale = true;\n            this.hasRotation = true;\n        }\n        this.set_validWcs(this.hasScale && this.hasRotation && this.hasPixel && this.hasLocation);\n    },\n\n    // Modify the FitsProperties object to apply any settings stored in this\n    // FITS image's header keywords. This mechanism gives us a way to set up\n    // the rendering of a tiled FITS image through keywords set on its\n    // level-0 tile file.\n    //\n    // I'm not aware of any standard, or even standard-ish, headers to\n    // define these settings, so we'll roll our own here.\n    applyDisplaySettings: function () {\n        // TODO for tiled FITS: distinguish between datamin in this one tile,\n        // and datamin across the full, un-downsampled original imagery.\n\n        if (ss.keyExists(this.header, 'DATAMIN')) {\n            this.fitsProperties.lowerCut = parseFloat(ss.trim(this.header['DATAMIN']));\n            this.fitsProperties.minVal = this.fitsProperties.lowerCut;\n        }\n        if (ss.keyExists(this.header, 'DATAMAX')) {\n            this.fitsProperties.upperCut = parseFloat(ss.trim(this.header['DATAMAX']));\n            this.fitsProperties.maxVal = this.fitsProperties.upperCut;\n        }\n        if (ss.keyExists(this.header, 'PXCUTMIN')) {\n            this.fitsProperties.lowerCut = parseFloat(ss.trim(this.header['PXCUTMIN']));\n        }\n        if (ss.keyExists(this.header, 'PXCUTMAX')) {\n            this.fitsProperties.upperCut = parseFloat(ss.trim(this.header['PXCUTMAX']));\n        }\n    },\n\n    computeHistogram: function (count) {\n        var histogram = new Array(count + 1);\n        for (var i = 0; i < count + 1; i++) {\n            histogram[i] = 0;\n        }\n        this.populateHistogram(histogram);\n        var maxCounter = 1;\n        var $enum1 = ss.enumerate(histogram);\n        while ($enum1.moveNext()) {\n            var val = $enum1.current;\n            if (val > maxCounter) {\n                maxCounter = val;\n            }\n        }\n        histogram[count] = maxCounter;\n        return histogram;\n    },\n\n    populateHistogram: function (histogram) {\n        var buckets = histogram.length;\n        var factor = (this.fitsProperties.maxVal - this.fitsProperties.minVal) / buckets;\n        for (var i = 0; i < this.dataUnit.length; i++) {\n            if (!(this.dataUnit[i] === FitsImage.naN)) {\n                histogram[Math.min(buckets - 1, ss.truncate(((this.fitsProperties.bZero + this.fitsProperties.bScale * this.dataUnit[i] - this.fitsProperties.minVal) / factor)))]++;\n            }\n        }\n    },\n\n    drawHistogram: function (ctx) {\n        ctx.clearRect(0, 0, 255, 150);\n        ctx.beginPath();\n        ctx.strokeStyle = 'rgba(255,255,255,255)';\n        var logMax = Math.log(this.histogramMaxCount);\n        for (var i = 0; i < this.histogram.length; i++) {\n            var height = Math.log(this.histogram[i]) / logMax;\n            if (height < 0) {\n                height = 0;\n            }\n            ctx.moveTo(i, 150);\n            ctx.lineTo(i, 150 - (height * 150));\n            ctx.stroke();\n        }\n    }\n};\n\nregisterType(\"FitsImage\", [FitsImage, FitsImage$, WcsImage]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A FITS image with a pure JavaScript implementation.\n//\n// This class is used when WebGL 2 is not available, as in Safari.\n\nimport { ss } from \"../ss.js\";\nimport { registerType, registerEnum } from \"../typesystem.js\";\nimport { BinaryReader } from \"../utilities/binary_reader.js\";\nimport { Bitmap } from \"../utilities/bitmap.js\";\nimport { ColorMapContainer } from \"./color_map_container.js\";\nimport { FitsImage } from \"./fits_image.js\";\n\n\n// wwtlib.DataTypes\n\nexport var DataTypes = {\n    byteT: 0,\n    int16T: 1,\n    int32T: 2,\n    floatT: 3,\n    doubleT: 4,\n    none: 5\n};\n\nregisterType(\"DataTypes\", DataTypes);\nregisterEnum(\"DataTypes\", DataTypes);\n\n\n// wwtlib.ScaleMap\n\nexport function ScaleMap() { }\n\nvar ScaleMap$ = {};\n\nregisterType(\"ScaleMap\", [ScaleMap, ScaleMap$, null]);\n\n\n// wwtlib.ScaleLinear\n\nexport function ScaleLinear(min, max) {\n    this._min$1 = 0;\n    this._max$1 = 0;\n    this._factor$1 = 0;\n    this._logFactor$1 = 0;\n    ScaleMap.call(this);\n    this._min$1 = min;\n    this._max$1 = max;\n    this._factor$1 = max - min;\n}\n\nvar ScaleLinear$ = {\n    map: function (val) {\n        return Math.min(255, Math.max(0, ss.truncate(((val - this._min$1) / this._factor$1 * 255))));\n    }\n};\n\nregisterType(\"ScaleLinear\", [ScaleLinear, ScaleLinear$, ScaleMap]);\n\n\n// wwtlib.ScaleLog\n\nexport function ScaleLog(min, max) {\n    this._min$1 = 0;\n    this._max$1 = 0;\n    this._factor$1 = 0;\n    this._logFactor$1 = 0;\n    ScaleMap.call(this);\n    this._min$1 = min;\n    this._max$1 = max;\n    this._factor$1 = max - min;\n    this._logFactor$1 = 255 / Math.log(255);\n}\n\nvar ScaleLog$ = {\n    map: function (val) {\n        return Math.min(255, Math.max(0, ss.truncate((Math.log((val - this._min$1) / this._factor$1 * 255) * this._logFactor$1))));\n    }\n};\n\nregisterType(\"ScaleLog\", [ScaleLog, ScaleLog$, ScaleMap]);\n\n\n// wwtlib.ScalePow\n\nexport function ScalePow(min, max) {\n    this._min$1 = 0;\n    this._max$1 = 0;\n    this._factor$1 = 0;\n    this._powFactor$1 = 0;\n    ScaleMap.call(this);\n    this._min$1 = min;\n    this._max$1 = max;\n    this._factor$1 = max - min;\n    this._powFactor$1 = 255 / Math.pow(255, 2);\n}\n\nvar ScalePow$ = {\n    map: function (val) {\n        return Math.min(255, Math.max(0, ss.truncate((Math.pow((val - this._min$1) / this._factor$1 * 255, 2) * this._powFactor$1))));\n    }\n};\n\nregisterType(\"ScalePow\", [ScalePow, ScalePow$, ScaleMap]);\n\n\n// wwtlib.ScaleSqrt\n\nexport function ScaleSqrt(min, max) {\n    this._min$1 = 0;\n    this._max$1 = 0;\n    this._factor$1 = 0;\n    this._sqrtFactor$1 = 0;\n    ScaleMap.call(this);\n    this._min$1 = min;\n    this._max$1 = max;\n    this._factor$1 = max - min;\n    this._sqrtFactor$1 = 255 / Math.sqrt(255);\n}\n\nvar ScaleSqrt$ = {\n    map: function (val) {\n        return Math.min(255, Math.max(0, ss.truncate((Math.sqrt((val - this._min$1) / this._factor$1 * 255) * this._sqrtFactor$1))));\n    }\n};\n\nregisterType(\"ScaleSqrt\", [ScaleSqrt, ScaleSqrt$, ScaleMap]);\n\n\n// wwtlib.HistogramEqualization\n\nexport function HistogramEqualization(image, min, max) {\n    this._min$1 = 0;\n    this._max$1 = 0;\n    this._factor$1 = 0;\n    this._maxHistogramValue$1 = 1;\n    ScaleMap.call(this);\n    this._min$1 = min;\n    this._max$1 = max;\n    this._factor$1 = max - min;\n    this._histogram$1 = image.computeHistogram(10000);\n    this._maxHistogramValue$1 = this._histogram$1[10000];\n    this._lookup$1 = new Array(10000);\n    var totalCounts = ss.truncate((image.get_sizeX() * image.get_sizeY()));\n    var sum = 0;\n    for (var i = 0; i < 10000; i++) {\n        sum += this._histogram$1[i];\n        this._lookup$1[i] = (Math.min(255, (sum * 255) / totalCounts) + 0.5);\n    }\n}\n\nvar HistogramEqualization$ = {\n    map: function (val) {\n        return this._lookup$1[Math.min(10000 - 1, Math.max(0, ss.truncate(((val - this._min$1) / this._factor$1 * (10000 - 1)))))];\n    }\n};\n\nregisterType(\"HistogramEqualization\", [HistogramEqualization, HistogramEqualization$, ScaleMap]);\n\n\n// wwtlib.FitsImageJs\n\nexport function FitsImageJs(dataset, file, blob, callMeBack) {\n    this.dataType = DataTypes.none;\n    this._color$2 = false;\n    this.isTiledFits = false;\n    FitsImage.call(this, dataset, file, blob, callMeBack);\n}\n\nFitsImageJs.createTiledFits = function (dataset, file, callMeBack) {\n    var fits = new FitsImageJs(dataset, file, null, callMeBack);\n    fits.isTiledFits = true;\n    return fits;\n};\n\nvar FitsImageJs$ = {\n    readFromBin: function (dataView) {\n        FitsImage.prototype.readFromBin.call(this, dataView);\n        if (this.numAxis === 3) {\n            if (this.axisSize[2] === 3) {\n                this._color$2 = true;\n            }\n        }\n    },\n\n    readDataUnit: function (dataView, bitpix) {\n        var br = new BinaryReader(new Uint8Array(dataView.buffer));\n        br.position = this.position;\n        switch (bitpix) {\n            case -64:\n                this.dataType = DataTypes.doubleT;\n                this._readDataUnitFloat64$2(br);\n                break;\n            case -32:\n                this.dataType = DataTypes.floatT;\n                this._readDataUnitFloat32$2(br);\n                break;\n            case 8:\n                this.dataType = DataTypes.byteT;\n                this._readDataUnitUint8$2(br);\n                break;\n            case 16:\n                this.dataType = DataTypes.int16T;\n                this._readDataUnitInt16$2(br);\n                break;\n            case 32:\n                this.dataType = DataTypes.int32T;\n                this._readDataUnitInt32$2(br);\n                break;\n        }\n        this.fitsProperties.lowerCut = this.fitsProperties.minVal;\n        this.fitsProperties.upperCut = this.fitsProperties.maxVal;\n    },\n    _readDataUnitUint8$2: function (br) {\n        var buffer = new Array(this.bufferSize);\n        this._dataBuffer$2 = buffer;\n        for (var i = 0; i < this.bufferSize; i++) {\n            buffer[i] = br.readByte();\n            if (this.fitsProperties.minVal > buffer[i]) {\n                this.fitsProperties.minVal = buffer[i];\n            }\n            if (this.fitsProperties.maxVal < buffer[i]) {\n                this.fitsProperties.maxVal = buffer[i];\n            }\n        }\n    },\n    _readDataUnitInt16$2: function (br) {\n        var buffer = new Array(this.bufferSize);\n        this._dataBuffer$2 = buffer;\n        for (var i = 0; i < this.bufferSize; i++) {\n            buffer[i] = ((br.readSByte() * 256) + br.readByte());\n            if (this.fitsProperties.minVal > buffer[i]) {\n                this.fitsProperties.minVal = buffer[i];\n            }\n            if (this.fitsProperties.maxVal < buffer[i]) {\n                this.fitsProperties.maxVal = buffer[i];\n            }\n        }\n    },\n    _readDataUnitInt32$2: function (br) {\n        var buffer = new Array(this.bufferSize);\n        this._dataBuffer$2 = buffer;\n        for (var i = 0; i < this.bufferSize; i++) {\n            buffer[i] = (br.readSByte() << 24) + (br.readSByte() << 16) + (br.readSByte() << 8) + br.readByte();\n            if (this.fitsProperties.minVal > buffer[i]) {\n                this.fitsProperties.minVal = buffer[i];\n            }\n            if (this.fitsProperties.maxVal < buffer[i]) {\n                this.fitsProperties.maxVal = buffer[i];\n            }\n        }\n    },\n    _readDataUnitFloat32$2: function (br) {\n        var buffer = new Array(this.bufferSize);\n        this._dataBuffer$2 = buffer;\n        var part = new Uint8Array(4);\n        for (var i = 0; i < this.bufferSize; i++) {\n            part[3] = br.readByte();\n            part[2] = br.readByte();\n            part[1] = br.readByte();\n            part[0] = br.readByte();\n            buffer[i] = new Float32Array(part.buffer, 0, 1)[0];\n            if (this.fitsProperties.minVal > buffer[i]) {\n                this.fitsProperties.minVal = buffer[i];\n            }\n            if (this.fitsProperties.maxVal < buffer[i]) {\n                this.fitsProperties.maxVal = buffer[i];\n            }\n        }\n    },\n    _readDataUnitFloat64$2: function (br) {\n        var buffer = new Array(this.bufferSize);\n        var part = new Uint8Array(8);\n        this._dataBuffer$2 = buffer;\n        for (var i = 0; i < this.bufferSize; i++) {\n            part[7] = br.readByte();\n            part[6] = br.readByte();\n            part[5] = br.readByte();\n            part[4] = br.readByte();\n            part[3] = br.readByte();\n            part[2] = br.readByte();\n            part[1] = br.readByte();\n            part[0] = br.readByte();\n            buffer[i] = new Float64Array(part.buffer, 0, 1)[0];\n            if (this.fitsProperties.minVal > buffer[i]) {\n                this.fitsProperties.minVal = buffer[i];\n            }\n            if (this.fitsProperties.maxVal < buffer[i]) {\n                this.fitsProperties.maxVal = buffer[i];\n            }\n        }\n    },\n\n    getBitmap: function () {\n        if (!this.fitsProperties.upperCut && !this.fitsProperties.lowerCut) {\n            this.fitsProperties.lowerCut = this.fitsProperties.minVal;\n            this.fitsProperties.upperCut = this.fitsProperties.maxVal;\n        }\n        return this.getScaledBitmap(this.fitsProperties.lowerCut, this.fitsProperties.upperCut, this.fitsProperties.scaleType, 0, this.fitsProperties.colorMapName);\n    },\n\n    getScaledBitmap: function (min, max, scaleType, z, colorMapperName) {\n        var scale;\n        this.fitsProperties.scaleType = scaleType;\n        this.fitsProperties.lowerCut = min;\n        this.fitsProperties.upperCut = max;\n        this.fitsProperties.colorMapName = colorMapperName;\n        var colorMapper = ColorMapContainer.fromNamedColormap(colorMapperName);\n        switch (scaleType) {\n            case 0:\n            default:\n                scale = new ScaleLinear(min, max);\n                break;\n            case 1:\n                scale = new ScaleLog(min, max);\n                break;\n            case 2:\n                scale = new ScalePow(min, max);\n                break;\n            case 3:\n                scale = new ScaleSqrt(min, max);\n                break;\n            case 4:\n                scale = new HistogramEqualization(this, min, max);\n                break;\n        }\n        try {\n            switch (this.dataType) {\n                case DataTypes.byteT:\n                    return this._getBitmapByte$2(min, max, scale, 0, colorMapper);\n                case DataTypes.int16T:\n                    return this.getBitmapShort(min, max, scale, 0, colorMapper);\n                case DataTypes.int32T:\n                    return this._getBitmapInt$2(min, max, scale, 0, colorMapper);\n                case DataTypes.floatT:\n                    return this._getBitmapFloat$2(min, max, scale, 0, colorMapper);\n                case DataTypes.doubleT:\n                    return this._getBitmapDouble$2(min, max, scale, 0, colorMapper);\n                case DataTypes.none:\n                default:\n                    return Bitmap.create(100, 100);\n            }\n        }\n        catch ($e1) {\n            return Bitmap.create(10, 10);\n        }\n    },\n    _setPixelWithColorMap$2: function (bmp, x, y, val, colorMapper) {\n        if (colorMapper == null) {\n            bmp.setPixel(x, y, val, val, val, (this.fitsProperties.transparentBlack && !val) ? 0 : 255);\n            return;\n        }\n        var pixel_value = val / 255;\n        if (Number.isNaN(pixel_value)) {\n            // This case \"can't happen\" in C#, but due to JavaScript's numerical\n            // model, it can happen here.\n            bmp.setPixel(x, y, 0, 0, 0, 0);\n            return;\n        }\n        var pixel_color = colorMapper.findClosestColor(pixel_value);\n        bmp.setPixel(x, y, ss.truncate(pixel_color.r), ss.truncate(pixel_color.g), ss.truncate(pixel_color.b), (this.fitsProperties.transparentBlack && !val) ? 0 : 255);\n    },\n    _getBitmapByte$2: function (min, max, scale, z, colorMapper) {\n        var buf = this._dataBuffer$2;\n        var factor = max - min;\n        var stride = this.axisSize[0];\n        var page = this.axisSize[0] * this.axisSize[1] * z;\n        var bmp = Bitmap.create(this.axisSize[0], this.axisSize[1]);\n        for (var y = 0; y < this.axisSize[1]; y++) {\n            var indexY = ((this.axisSize[1] - 1) - y);\n            for (var x = 0; x < this.axisSize[0]; x++) {\n                if (this._color$2) {\n                    var datR = buf[(x + indexY * stride)];\n                    var datG = buf[(x + indexY * stride) + page];\n                    var datB = buf[(x + indexY * stride) + page * 2];\n                    if (this.fitsProperties.containsBlanks && datR === this.fitsProperties.blankValue) {\n                        bmp.setPixel(x, y, 0, 0, 0, 0);\n                    }\n                    else {\n                        var r = scale.map(datR);\n                        var g = scale.map(datG);\n                        var b = scale.map(datB);\n                        bmp.setPixel(x, y, r, g, b, 255);\n                    }\n                }\n                else {\n                    var dataValue = buf[x + indexY * stride + page];\n                    if (this.fitsProperties.containsBlanks && dataValue === this.fitsProperties.blankValue) {\n                        bmp.setPixel(x, y, 0, 0, 0, 0);\n                    }\n                    else {\n                        var val = scale.map(dataValue);\n                        this._setPixelWithColorMap$2(bmp, x, y, val, colorMapper);\n                    }\n                }\n            }\n        }\n        return bmp;\n    },\n    _getBitmapDouble$2: function (min, max, scale, z, colorMapper) {\n        var buf = this._dataBuffer$2;\n        var factor = max - min;\n        var stride = this.axisSize[0];\n        var page = this.axisSize[0] * this.axisSize[1] * z;\n        var bmp = Bitmap.create(this.axisSize[0], this.axisSize[1]);\n        for (var y = 0; y < this.axisSize[1]; y++) {\n            var indexY = ((this.axisSize[1] - 1) - y);\n            for (var x = 0; x < this.axisSize[0]; x++) {\n                if (this._color$2) {\n                    var datR = buf[(x + indexY * stride)];\n                    var datG = buf[(x + indexY * stride) + page];\n                    var datB = buf[(x + indexY * stride) + page * 2];\n                    if (this.fitsProperties.containsBlanks && datR === this.fitsProperties.blankValue) {\n                        bmp.setPixel(x, y, 0, 0, 0, 0);\n                    }\n                    else {\n                        var r = scale.map(datR);\n                        var g = scale.map(datG);\n                        var b = scale.map(datB);\n                        bmp.setPixel(x, y, r, g, b, 255);\n                    }\n                }\n                else {\n                    var dataValue = buf[x + indexY * stride + page];\n                    if (this.fitsProperties.containsBlanks && dataValue === this.fitsProperties.blankValue) {\n                        bmp.setPixel(x, y, 0, 0, 0, 0);\n                    }\n                    else {\n                        var val = scale.map(dataValue);\n                        this._setPixelWithColorMap$2(bmp, x, y, val, colorMapper);\n                    }\n                }\n            }\n        }\n        return bmp;\n    },\n    _getBitmapFloat$2: function (min, max, scale, z, colorMapper) {\n        var buf = this._dataBuffer$2;\n        var factor = max - min;\n        var stride = this.axisSize[0];\n        var page = this.axisSize[0] * this.axisSize[1] * z;\n        var bmp = Bitmap.create(this.axisSize[0], this.axisSize[1]);\n        for (var y = 0; y < this.axisSize[1]; y++) {\n            var indexY = ((this.axisSize[1] - 1) - y);\n            for (var x = 0; x < this.axisSize[0]; x++) {\n                if (this._color$2) {\n                    var datR = buf[(x + indexY * stride)];\n                    var datG = buf[(x + indexY * stride) + page];\n                    var datB = buf[(x + indexY * stride) + page * 2];\n                    if (this.fitsProperties.containsBlanks && datR === this.fitsProperties.blankValue) {\n                        bmp.setPixel(x, y, 0, 0, 0, 0);\n                    }\n                    else {\n                        var r = scale.map(datR);\n                        var g = scale.map(datG);\n                        var b = scale.map(datB);\n                        bmp.setPixel(x, y, r, g, b, 255);\n                    }\n                }\n                else {\n                    var dataValue = buf[x + indexY * stride + page];\n                    if (this.fitsProperties.containsBlanks && dataValue === this.fitsProperties.blankValue) {\n                        bmp.setPixel(x, y, 0, 0, 0, 0);\n                    }\n                    else {\n                        var val = scale.map(dataValue);\n                        this._setPixelWithColorMap$2(bmp, x, y, val, colorMapper);\n                    }\n                }\n            }\n        }\n        return bmp;\n    },\n    _getBitmapInt$2: function (min, max, scale, z, colorMapper) {\n        var buf = this._dataBuffer$2;\n        var factor = max - min;\n        var stride = this.axisSize[0];\n        var page = this.axisSize[0] * this.axisSize[1] * z;\n        var bmp = Bitmap.create(this.axisSize[0], this.axisSize[1]);\n        for (var y = 0; y < this.axisSize[1]; y++) {\n            var indexY = ((this.axisSize[1] - 1) - y);\n            for (var x = 0; x < this.axisSize[0]; x++) {\n                if (this._color$2) {\n                    var datR = buf[(x + indexY * stride)];\n                    var datG = buf[(x + indexY * stride) + page];\n                    var datB = buf[(x + indexY * stride) + page * 2];\n                    if (this.fitsProperties.containsBlanks && datR === this.fitsProperties.blankValue) {\n                        bmp.setPixel(x, y, 0, 0, 0, 0);\n                    }\n                    else {\n                        var r = scale.map(datR);\n                        var g = scale.map(datG);\n                        var b = scale.map(datB);\n                        bmp.setPixel(x, y, r, g, b, 255);\n                    }\n                }\n                else {\n                    var dataValue = buf[x + indexY * stride + page];\n                    if (this.fitsProperties.containsBlanks && dataValue === this.fitsProperties.blankValue) {\n                        bmp.setPixel(x, y, 0, 0, 0, 0);\n                    }\n                    else {\n                        var val = scale.map(dataValue);\n                        this._setPixelWithColorMap$2(bmp, x, y, val, colorMapper);\n                    }\n                }\n            }\n        }\n        return bmp;\n    },\n\n    getBitmapShort: function (min, max, scale, z, colorMapper) {\n        var buf = this._dataBuffer$2;\n        var factor = max - min;\n        var stride = this.axisSize[0];\n        var page = this.axisSize[0] * this.axisSize[1] * z;\n        var bmp = Bitmap.create(this.axisSize[0], this.axisSize[1]);\n        for (var y = 0; y < this.axisSize[1]; y++) {\n            var indexY = ((this.axisSize[1] - 1) - y);\n            for (var x = 0; x < this.axisSize[0]; x++) {\n                if (this._color$2) {\n                    var datR = buf[(x + indexY * stride)];\n                    var datG = buf[(x + indexY * stride) + page];\n                    var datB = buf[(x + indexY * stride) + page * 2];\n                    if (this.fitsProperties.containsBlanks && datR === this.fitsProperties.blankValue) {\n                        bmp.setPixel(x, y, 0, 0, 0, 0);\n                    }\n                    else {\n                        var r = scale.map(datR);\n                        var g = scale.map(datG);\n                        var b = scale.map(datB);\n                        bmp.setPixel(x, y, r, g, b, 255);\n                    }\n                }\n                else {\n                    var dataValue = buf[x + indexY * stride + page];\n                    if (this.fitsProperties.containsBlanks && dataValue === this.fitsProperties.blankValue) {\n                        bmp.setPixel(x, y, 0, 0, 0, 0);\n                    }\n                    else {\n                        var val = scale.map(dataValue);\n                        this._setPixelWithColorMap$2(bmp, x, y, val, colorMapper);\n                    }\n                }\n            }\n        }\n        return bmp;\n    },\n\n    computeWcs: function () {\n        if (!this.isTiledFits) {\n            FitsImage.prototype.computeWcs.call(this);\n        }\n    },\n\n    populateHistogram: function (histogram) {\n        switch (this.dataType) {\n            case DataTypes.byteT:\n                this._populateHistogramByte$2(histogram);\n                break;\n            case DataTypes.int16T:\n                this._populateHistogramInt16$2(histogram);\n                break;\n            case DataTypes.int32T:\n                this._populateHistogramInt32$2(histogram);\n                break;\n            case DataTypes.floatT:\n                this._populateHistogramFloat$2(histogram);\n                break;\n            case DataTypes.doubleT:\n                this._populateHistogramDouble$2(histogram);\n                break;\n        }\n    },\n    _populateHistogramDouble$2: function (histogram) {\n        var buckets = histogram.length;\n        var buf = this._dataBuffer$2;\n        var factor = (this.fitsProperties.maxVal - this.fitsProperties.minVal) / buckets;\n        var $enum1 = ss.enumerate(buf);\n        while ($enum1.moveNext()) {\n            var val = $enum1.current;\n            if (!Number.isNaN(val)) {\n                histogram[Math.min(buckets - 1, ss.truncate(((val - this.fitsProperties.minVal) / factor)))]++;\n            }\n        }\n    },\n    _populateHistogramFloat$2: function (histogram) {\n        var buckets = histogram.length;\n        var buf = this._dataBuffer$2;\n        var factor = (this.fitsProperties.maxVal - this.fitsProperties.minVal) / buckets;\n        var $enum1 = ss.enumerate(buf);\n        while ($enum1.moveNext()) {\n            var val = $enum1.current;\n            if (!(val === FitsImage.naN)) {\n                histogram[Math.min(buckets - 1, ss.truncate(((val - this.fitsProperties.minVal) / factor)))]++;\n            }\n        }\n    },\n    _populateHistogramInt32$2: function (histogram) {\n        var buckets = histogram.length;\n        var buf = this._dataBuffer$2;\n        var factor = (this.fitsProperties.maxVal - this.fitsProperties.minVal) / buckets;\n        var $enum1 = ss.enumerate(buf);\n        while ($enum1.moveNext()) {\n            var val = $enum1.current;\n            histogram[Math.min(buckets - 1, ss.truncate(((val - this.fitsProperties.minVal) / factor)))]++;\n        }\n    },\n    _populateHistogramInt16$2: function (histogram) {\n        var buckets = histogram.length;\n        var buf = this._dataBuffer$2;\n        var factor = (this.fitsProperties.maxVal - this.fitsProperties.minVal) / buckets;\n        var $enum1 = ss.enumerate(buf);\n        while ($enum1.moveNext()) {\n            var val = $enum1.current;\n            histogram[Math.min(buckets - 1, ss.truncate(((val - this.fitsProperties.minVal) / factor)))]++;\n        }\n    },\n    _populateHistogramByte$2: function (histogram) {\n        var buckets = histogram.length;\n        var buf = this._dataBuffer$2;\n        var factor = (this.fitsProperties.maxVal - this.fitsProperties.minVal) / buckets;\n        var $enum1 = ss.enumerate(buf);\n        while ($enum1.moveNext()) {\n            var val = $enum1.current;\n            histogram[Math.min(buckets - 1, ss.truncate(((val - this.fitsProperties.minVal) / factor)))]++;\n        }\n    }\n};\n\nregisterType(\"FitsImageJs\", [FitsImageJs, FitsImageJs$, FitsImage]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A FITS image used as a tile in a pyramid.\n\nimport { registerType } from \"../typesystem.js\";\nimport { FitsImage } from \"./fits_image.js\";\n\n\n// wwtlib.FitsImageTile\n//\n// Min & Max are already known for pyramid FITS.\n// To improve performance, the below per pixel methods are overriden\n\nexport function FitsImageTile(dataset, file, callMeBack) {\n    FitsImage.call(this, dataset, file, null, callMeBack);\n}\n\nvar FitsImageTile$ = {\n    readDataUnitFloat64: function (dataView) {\n        var i = 0;\n        while (this.position < dataView.byteLength) {\n            this.dataUnit[i] = dataView.getFloat64(this.position, false);\n            i++;\n            this.position += 8;\n        }\n    },\n\n    readDataUnitFloat32: function (dataView) {\n        var i = 0;\n        while (this.position < dataView.byteLength) {\n            this.dataUnit[i] = dataView.getFloat32(this.position, false);\n            i++;\n            this.position += 4;\n        }\n    },\n\n    readDataUnitUint8: function (dataView) {\n        var i = 0;\n        while (this.position < dataView.byteLength) {\n            this.dataUnit[i] = dataView.getUint8(this.position);\n            i++;\n            this.position += 1;\n        }\n    },\n\n    readDataUnitInt16: function (dataView) {\n        var i = 0;\n        while (this.position < dataView.byteLength) {\n            this.dataUnit[i] = dataView.getInt16(this.position, false);\n            i++;\n            this.position += 2;\n        }\n    },\n\n    readDataUnitInt32: function (dataView) {\n        var i = 0;\n        while (this.position < dataView.byteLength) {\n            this.dataUnit[i] = dataView.getInt32(this.position, false);\n            i++;\n            this.position += 4;\n        }\n    },\n\n    computeWcs: function () { }\n};\n\nregisterType(\"FitsImageTile\", [FitsImageTile, FitsImageTile$, FitsImage]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Set up the `Layer.fromXml()` function, which depends on a bunch of Layer\n// subclasses.\n//\n// There are a variety of ways that we could set this up, possibly including\n// just implementing this function in `layer.js`. This is a more conservating\n// approach that tries to avoid circular module imports.\n\nimport { ss } from \"../ss.js\";\nimport { Layer } from \"./layer.js\";\nimport { GreatCirlceRouteLayer } from \"./great_circle_route_layer.js\";\nimport { GridLayer } from \"./grid_layer.js\";\nimport { ImageSetLayer } from \"./imageset_layer.js\";\nimport { Object3dLayer } from \"./object3d.js\";\nimport { OrbitLayer } from \"./orbit_layer.js\";\nimport { SpreadSheetLayer } from \"./spreadsheet_layer.js\";\nimport { VoTableLayer } from \"./vo_table_layer.js\";\n\n\n// The `layerFromXml` function, which we also install as `Layer.fromXml()`. It\n// needs to be aware of a bunch of layer subclasses.\nexport function layerFromXml(layerNode, someFlag) {\n    var layerClassName = layerNode.attributes.getNamedItem('Type').nodeValue;\n\n    var overLayType = ss.replaceString(layerClassName, 'TerraViewer.', '');\n    if (overLayType == null) {\n        return null;\n    }\n\n    var newLayer = null;\n    switch (overLayType) {\n        case 'SpreadSheetLayer':\n            newLayer = new SpreadSheetLayer();\n            break;\n        case 'GreatCirlceRouteLayer':\n            newLayer = new GreatCirlceRouteLayer();\n            break;\n        case 'GridLayer':\n            newLayer = new GridLayer();\n            break;\n        case 'ImageSetLayer':\n            newLayer = new ImageSetLayer();\n            break;\n        case 'Object3dLayer':\n            newLayer = new Object3dLayer();\n            break;\n        case 'OrbitLayer':\n            newLayer = new OrbitLayer();\n            break;\n        case 'VoTableLayer':\n            newLayer = new VoTableLayer();\n            break;\n        default:\n            return null;\n    }\n\n    newLayer.initFromXml(layerNode);\n    return newLayer;\n}\n\nLayer.fromXml = layerFromXml;\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A layer that renders progress along a great circle.\n//\n// Yes, there is an egregious typo in the name of this class. But to maintain\n// API compatibility, we're not fixing it.\n\nimport { registerType } from \"../typesystem.js\";\nimport { Vector3d } from \"../double3d.js\";\nimport { Dates, TriangleList } from \"../graphics/primitives3d.js\";\nimport { Coordinates } from \"../coordinates.js\";\nimport { Layer } from \"./layer.js\";\n\n\n// wwtlib.GreatCirlceRouteLayer\n\nexport function GreatCirlceRouteLayer() {\n    this._triangleList$1 = null;\n    this._latStart$1 = 0;\n    this._lngStart$1 = 0;\n    this._latEnd$1 = 0;\n    this._lngEnd$1 = 0;\n    this._width$1 = 4;\n    this._percentComplete$1 = 100;\n    Layer.call(this);\n}\n\nvar GreatCirlceRouteLayer$ = {\n    // Even if we fix the typo in this class's name in an API break, we need to\n    // maintain it here to maintain compatibility with existing data files and\n    // older WWT clients.\n    getTypeName: function () {\n        return 'TerraViewer.GreatCirlceRouteLayer';\n    },\n\n    cleanUp: function () {\n        if (this._triangleList$1 != null) {\n            this._triangleList$1.clear();\n        }\n        this._triangleList$1 = null;\n        Layer.prototype.cleanUp.call(this);\n    },\n\n    draw: function (renderContext, opacity, flat) {\n        if (this._triangleList$1 == null) {\n            this._initializeRoute$1(renderContext);\n        }\n        this._triangleList$1.jNow = this._percentComplete$1 / 100;\n        this._triangleList$1.draw(renderContext, opacity * this.get_opacity(), 2);\n        return true;\n    },\n    _initializeRoute$1: function (renderContext) {\n        this._triangleList$1 = new TriangleList();\n        this._triangleList$1.decay = 1000;\n        this._triangleList$1.sky = this.get_astronomical();\n        this._triangleList$1.timeSeries = true;\n        this._triangleList$1.depthBuffered = false;\n        this._triangleList$1.autoTime = false;\n        var steps = 500;\n        var start = Coordinates.geoTo3dDouble(this._latStart$1, this._lngStart$1);\n        var end = Coordinates.geoTo3dDouble(this._latEnd$1, this._lngEnd$1);\n        var dir = Vector3d.subtractVectors(end, start);\n        dir.normalize();\n        var startNormal = start;\n        startNormal.normalize();\n        var left = Vector3d.cross(startNormal, dir);\n        var right = Vector3d.cross(dir, startNormal);\n        left.normalize();\n        right.normalize();\n        left.multiply(0.001 * this._width$1);\n        right.multiply(0.001 * this._width$1);\n        var lastLeft = new Vector3d();\n        var lastRight = new Vector3d();\n        var firstTime = true;\n        for (var i = 0; i <= steps; i++) {\n            var v = Vector3d.lerp(start, end, i / steps);\n            v.normalize();\n            var cl = v;\n            var cr = v;\n            cl.add(left);\n            cr.add(right);\n            if (!firstTime) {\n                this._triangleList$1.addQuad(lastRight, lastLeft, cr, cl, this.get_color(), new Dates(i / steps, 2));\n            }\n            else {\n                firstTime = false;\n            }\n            lastLeft = cl;\n            lastRight = cr;\n        }\n    },\n\n    getParams: function () {\n        return [this._percentComplete$1];\n    },\n\n    getParamNames: function () {\n        return ['Percentage'];\n    },\n\n    setParams: function (paramList) {\n        if (paramList.length > 0) {\n            this._percentComplete$1 = paramList[0];\n        }\n    },\n\n    get_latStart: function () {\n        return this._latStart$1;\n    },\n\n    set_latStart: function (value) {\n        if (this._latStart$1 !== value) {\n            this._latStart$1 = value;\n            this.version++;\n        }\n        return value;\n    },\n\n    get_lngStart: function () {\n        return this._lngStart$1;\n    },\n\n    set_lngStart: function (value) {\n        if (this._lngStart$1 !== value) {\n            this._lngStart$1 = value;\n            this.version++;\n        }\n        return value;\n    },\n\n    get_latEnd: function () {\n        return this._latEnd$1;\n    },\n\n    set_latEnd: function (value) {\n        if (this._latEnd$1 !== value) {\n            this._latEnd$1 = value;\n            this.version++;\n        }\n        return value;\n    },\n\n    get_lngEnd: function () {\n        return this._lngEnd$1;\n    },\n\n    set_lngEnd: function (value) {\n        if (this._lngEnd$1 !== value) {\n            this._lngEnd$1 = value;\n            this.version++;\n        }\n        return value;\n    },\n\n    get_width: function () {\n        return this._width$1;\n    },\n\n    set_width: function (value) {\n        if (this._width$1 !== value) {\n            this._width$1 = value;\n            this.version++;\n        }\n        return value;\n    },\n\n    get_percentComplete: function () {\n        return this._percentComplete$1;\n    },\n\n    set_percentComplete: function (value) {\n        if (this._percentComplete$1 !== value) {\n            this._percentComplete$1 = value;\n            this.version++;\n        }\n        return value;\n    },\n\n    writeLayerProperties: function (xmlWriter) {\n        xmlWriter._writeAttributeString('LatStart', this.get_latStart().toString());\n        xmlWriter._writeAttributeString('LngStart', this.get_lngStart().toString());\n        xmlWriter._writeAttributeString('LatEnd', this.get_latEnd().toString());\n        xmlWriter._writeAttributeString('LngEnd', this.get_lngEnd().toString());\n        xmlWriter._writeAttributeString('Width', this.get_width().toString());\n        xmlWriter._writeAttributeString('PercentComplete', this.get_percentComplete().toString());\n    },\n\n    initializeFromXml: function (node) {\n        this._latStart$1 = parseFloat(node.attributes.getNamedItem('LatStart').nodeValue);\n        this._lngStart$1 = parseFloat(node.attributes.getNamedItem('LngStart').nodeValue);\n        this._latEnd$1 = parseFloat(node.attributes.getNamedItem('LatEnd').nodeValue);\n        this._lngEnd$1 = parseFloat(node.attributes.getNamedItem('LngEnd').nodeValue);\n        this._width$1 = parseFloat(node.attributes.getNamedItem('Width').nodeValue);\n        this._percentComplete$1 = parseFloat(node.attributes.getNamedItem('PercentComplete').nodeValue);\n    }\n};\n\nregisterType(\"GreatCirlceRouteLayer\", [GreatCirlceRouteLayer, GreatCirlceRouteLayer$, Layer]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A layer that renders a coordinate grid on a planet.\n\nimport { registerType } from \"../typesystem.js\";\nimport { Grids } from \"../grids.js\";\nimport { Layer } from \"./layer.js\";\n\n\n// wwtlib.GridLayer\n\nexport function GridLayer() {\n    Layer.call(this);\n}\n\nvar GridLayer$ = {\n    draw: function (renderContext, opacity, flat) {\n        Grids.drawPlanetGrid(renderContext, opacity * this.get_opacity(), this.get_color());\n        Grids.drawPlanetGridText(renderContext, opacity * this.get_opacity(), this.get_color());\n        return true;\n    }\n};\n\nregisterType(\"GridLayer\", [GridLayer, GridLayer$, Layer]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A layer that renders an arbitrary imageset\n\nimport { ss } from \"../ss.js\";\nimport { registerType, Enums } from \"../typesystem.js\";\nimport { Util } from \"../baseutil.js\";\nimport { useGlVersion2 } from \"../render_globals.js\";\nimport { Histogram } from \"../utilities/histogram.js\";\nimport { ColorMapContainer } from \"./color_map_container.js\";\nimport { FitsImage } from \"./fits_image.js\";\nimport { FitsImageJs } from \"./fits_image_js.js\";\nimport { Imageset } from \"../imageset.js\";\nimport { Layer } from \"./layer.js\";\n\n\n// wwtlib.ImageSetLayer\n\nexport function ImageSetLayer() {\n    this._imageSet$1 = null;\n    this._extension$1 = '.txt';\n    this._overrideDefaultLayer$1 = false;\n    this._loaded$1 = false;\n    Layer.call(this);\n}\n\nImageSetLayer.create = function (set) {\n    var isl = new ImageSetLayer();\n    isl._imageSet$1 = set;\n    return isl;\n};\n\nvar ImageSetLayer$ = {\n    get_imageSet: function () {\n        return this._imageSet$1;\n    },\n\n    set_imageSet: function (value) {\n        this._imageSet$1 = value;\n        return value;\n    },\n\n    get_overrideDefaultLayer: function () {\n        return this._overrideDefaultLayer$1;\n    },\n\n    set_overrideDefaultLayer: function (value) {\n        this._overrideDefaultLayer$1 = value;\n        return value;\n    },\n\n    getFitsImage: function () {\n        return ss.safeCast(this._imageSet$1.get_wcsImage(), FitsImage);\n    },\n\n    // Test whether our underlying imagery is FITS based.\n    //\n    // This can come in two flavors: a single FITS image, or tiled FITS.\n    // Note that even though the FileType/Extension field can currently\n    // specify multiple file formats, the rendering code requires that the\n    // extension is exactly \".fits\" for FITS rendering to kick in.\n    _isFitsImageset$1: function () {\n        var hasFitsExt = this._imageSet$1.get_extension() === '.fits';\n        return ss.canCast(this._imageSet$1.get_wcsImage(), FitsImage) || (this._imageSet$1.get_wcsImage() == null && hasFitsExt);\n    },\n\n    initializeFromXml: function (node) {\n        var imageSetNode = Util.selectSingleNode(node, 'ImageSet');\n        this._imageSet$1 = Imageset.fromXMLNode(imageSetNode);\n        if (node.attributes.getNamedItem('Extension') != null) {\n            this._extension$1 = node.attributes.getNamedItem('Extension').nodeValue;\n        }\n        if (node.attributes.getNamedItem('ScaleType') != null) {\n            this.get_imageSet().get_fitsProperties().scaleType = Enums.parse('ScaleTypes', node.attributes.getNamedItem('ScaleType').nodeValue);\n        }\n        if (node.attributes.getNamedItem('MinValue') != null) {\n            this.get_imageSet().get_fitsProperties().minVal = parseFloat(node.attributes.getNamedItem('MinValue').nodeValue);\n            this.get_imageSet().get_fitsProperties().lowerCut = (node.attributes.getNamedItem('LowerCut') != null) ? parseFloat(node.attributes.getNamedItem('LowerCut').nodeValue) : this.get_imageSet().get_fitsProperties().minVal;\n        }\n        if (node.attributes.getNamedItem('MaxValue') != null) {\n            this.get_imageSet().get_fitsProperties().maxVal = parseFloat(node.attributes.getNamedItem('MaxValue').nodeValue);\n            this.get_imageSet().get_fitsProperties().upperCut = (node.attributes.getNamedItem('UpperCut') != null) ? parseFloat(node.attributes.getNamedItem('UpperCut').nodeValue) : this.get_imageSet().get_fitsProperties().maxVal;\n        }\n        if (node.attributes.getNamedItem('ColorMapperName') != null) {\n            this.get_imageSet().get_fitsProperties().colorMapName = node.attributes.getNamedItem('ColorMapperName').nodeValue;\n        }\n        if (node.attributes.getNamedItem('OverrideDefault') != null) {\n            this._overrideDefaultLayer$1 = ss.boolean(node.attributes.getNamedItem('OverrideDefault').nodeValue);\n        }\n    },\n\n    draw: function (renderContext, opacity, flat) {\n        if (!this._loaded$1) {\n            return false;\n        }\n        renderContext.set_worldBase(renderContext.get_world());\n        renderContext.set_viewBase(renderContext.get_view());\n        renderContext.makeFrustum();\n        renderContext.drawImageSet(this._imageSet$1, this.get_opacity() * opacity * 100);\n        return true;\n    },\n\n    writeLayerProperties: function (xmlWriter) {\n        if (this._imageSet$1.get_wcsImage() != null) {\n            if (this._isFitsImageset$1()) {\n                this._extension$1 = '.fit';\n            }\n            else {\n                this._extension$1 = '.png';\n            }\n            xmlWriter._writeAttributeString('Extension', this._extension$1);\n        }\n        if (this._isFitsImageset$1()) {\n            xmlWriter._writeAttributeString('ScaleType', Enums.toXml('ScaleTypes', this._imageSet$1.get_fitsProperties().scaleType));\n            xmlWriter._writeAttributeString('MinValue', this._imageSet$1.get_fitsProperties().minVal.toString());\n            xmlWriter._writeAttributeString('MaxValue', this._imageSet$1.get_fitsProperties().maxVal.toString());\n            xmlWriter._writeAttributeString('LowerCut', this._imageSet$1.get_fitsProperties().lowerCut.toString());\n            xmlWriter._writeAttributeString('UpperCut', this._imageSet$1.get_fitsProperties().upperCut.toString());\n            if (this._imageSet$1.get_fitsProperties().colorMapName != null) {\n                xmlWriter._writeAttributeString('ColorMapperName', this._imageSet$1.get_fitsProperties().colorMapName);\n            }\n        }\n        xmlWriter._writeAttributeString('OverrideDefault', this._overrideDefaultLayer$1.toString());\n        Imageset.saveToXml(xmlWriter, this._imageSet$1, '');\n        Layer.prototype.writeLayerProperties.call(this, xmlWriter);\n    },\n\n    getTypeName: function () {\n        return 'TerraViewer.ImageSetLayer';\n    },\n\n    cleanUp: function () {\n        Layer.prototype.cleanUp.call(this);\n    },\n\n    addFilesToCabinet: function (fc) {\n        if (ss.canCast(this._imageSet$1.get_wcsImage(), FitsImage)) {\n            var fName = (this._imageSet$1.get_wcsImage()).get_filename();\n            var fileName = fc.tempDirectory + ss.format('{0}\\\\{1}{2}', fc.get_packageID(), this.id.toString(), this._extension$1);\n            fc.addFile(fileName, (this._imageSet$1.get_wcsImage()).sourceBlob);\n        }\n    },\n\n    getParamNames: function () {\n        return Layer.prototype.getParamNames.call(this);\n    },\n\n    getParams: function () {\n        return Layer.prototype.getParams.call(this);\n    },\n\n    setParams: function (paramList) {\n        Layer.prototype.setParams.call(this, paramList);\n    },\n\n    setImageScale: function (scaleType, min, max) {\n        console.warn('SetImageScale is considered deprecated. Use setImageScaleRaw or setImageScalePhysical instead.');\n        this.setImageScaleRaw(scaleType, min, max);\n    },\n\n    setImageScaleRaw: function (scaleType, min, max) {\n        this.get_imageSet().get_fitsProperties().lowerCut = min;\n        this.get_imageSet().get_fitsProperties().upperCut = max;\n        this.get_imageSet().get_fitsProperties().scaleType = scaleType;\n        if (ss.canCast(this._imageSet$1.get_wcsImage(), FitsImageJs)) {\n            Histogram.updateScale(this, scaleType, min, max);\n        }\n    },\n\n    setImageScalePhysical: function (scaleType, min, max) {\n        var newMin = min;\n        var newMax = max;\n        if (this._isFitsImageset$1()) {\n            newMin = (newMin - this._imageSet$1.get_fitsProperties().bZero) / this._imageSet$1.get_fitsProperties().bScale;\n            newMax = (newMax - this._imageSet$1.get_fitsProperties().bZero) / this._imageSet$1.get_fitsProperties().bScale;\n        }\n        this.setImageScaleRaw(scaleType, newMin, newMax);\n    },\n\n    setImageZ: function (z) {\n        if (this._isFitsImageset$1()) {\n            Histogram.updateImage(this, z);\n        }\n    },\n\n    get_colorMapperName: function () {\n        return this.get_imageSet().get_fitsProperties().colorMapName;\n    },\n\n    set_colorMapperName: function (value) {\n        if (ColorMapContainer.fromNamedColormap(value) == null) {\n            throw new Error('Invalid colormap name');\n        }\n        this.version++;\n        if (this._isFitsImageset$1()) {\n            if (useGlVersion2) {\n                this._imageSet$1.get_fitsProperties().colorMapName = value;\n            }\n            else {\n                Histogram.updateColorMapper(this, value);\n            }\n        }\n        return value;\n    },\n\n    get_colorMapper: function () {\n        if (this.get_imageSet().get_fitsProperties().colorMapName == null) {\n            return null;\n        } else {\n            return ColorMapContainer.fromNamedColormap(this.get_imageSet().get_fitsProperties().colorMapName);\n        }\n    },\n\n    loadData: function (tourDoc, filename) {\n        if (ss.startsWith(this._extension$1.toLowerCase(), '.fit')) {\n            var blob = tourDoc.getFileBlob(ss.replaceString(filename, '.txt', this._extension$1));\n            var fi;\n            if (useGlVersion2) {\n                fi = new FitsImage(this._imageSet$1, 'image.fit', blob, ss.bind('doneLoading', this));\n            }\n            else {\n                fi = new FitsImageJs(this._imageSet$1, 'image.fit', blob, ss.bind('doneLoading', this));\n            }\n            this._imageSet$1.set_wcsImage(fi);\n        } else {\n            this._loaded$1 = true;\n        }\n    },\n\n    doneLoading: function (wcsImage) {\n        this._loaded$1 = true;\n    }\n};\n\nregisterType(\"ImageSetLayer\", [ImageSetLayer, ImageSetLayer$, Layer]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A layer that adds the International Space Station (ISS) with an up-to-date orbit.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { Guid } from \"../util.js\";\nimport { Matrix3d, Vector3d } from \"../double3d.js\";\nimport { freestandingMode, tourDocumentFromUrlRaw } from \"../data_globals.js\";\nimport { Colors } from \"../color.js\";\nimport { URLHelpers } from \"../url_helpers.js\";\nimport { Object3dLayer, Object3d } from \"./object3d.js\";\n\n\n// wwtlib.ISSLayer\n\nexport function ISSLayer() {\n    Object3dLayer.call(this);\n    this.id = ISSLayer.issGuid;\n}\n\nISSLayer.issGuid = Guid.fromString('00000001-0002-0003-0405-060708090a0b');\nISSLayer._loading$2 = false;\nISSLayer._issmodel$2 = null;\nISSLayer._doc$2 = null;\n\nISSLayer.loadBackground = function () {\n    // The ISS frame cannot be created in freestanding mode, so I'm not\n    // sure if this function will even get called, but just in case, we\n    // make sure to noop if we're in freestanding mode.\n    if (ISSLayer._loading$2 || freestandingMode) {\n        return;\n    }\n    ISSLayer._loading$2 = true;\n    var url = URLHelpers.singleton.coreStaticUrl('data/iss.wtt');\n    ISSLayer._doc$2 = tourDocumentFromUrlRaw(url, function () {\n        ISSLayer.createSpaceStation();\n    });\n};\n\nISSLayer.createSpaceStation = function () {\n    ISSLayer._doc$2.set_id('28016047-97a9-4b33-a226-cd820262a151');\n    var filename = '0c10ae54-b6da-4282-bfda-f34562d403bc.3ds';\n    var o3d = new Object3d(ISSLayer._doc$2, filename, true, false, true, Colors.get_white());\n    if (o3d != null) {\n        o3d.issLayer = true;\n        ISSLayer._issmodel$2 = o3d;\n    }\n};\n\nvar ISSLayer$ = {\n    draw: function (renderContext, opacity, flat) {\n        if (this.object3d == null && ISSLayer._issmodel$2 == null) {\n            if (!ISSLayer._loading$2) {\n                var worldView = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n                var v = worldView.transform(Vector3d.get_empty());\n                var scaleFactor = Math.sqrt(worldView.get_m11() * worldView.get_m11() + worldView.get_m22() * worldView.get_m22() + worldView.get_m33() * worldView.get_m33());\n                var dist = v.length();\n                var radius = scaleFactor;\n\n                // Calculate pixelsPerUnit which is the number of pixels covered\n                // by an object 1 AU at the distance of the planet center from\n                // the camera. This calculation works regardless of the projection\n                // type.\n                var viewportHeight = ss.truncate(renderContext.height);\n                var p11 = renderContext.get_projection().get_m11();\n                var p34 = renderContext.get_projection().get_m34();\n                var p44 = renderContext.get_projection().get_m44();\n                var w = Math.abs(p34) * dist + p44;\n                var pixelsPerUnit = (p11 / w) * viewportHeight;\n                var radiusInPixels = (radius * pixelsPerUnit);\n                if (radiusInPixels > 0.5) {\n                    ISSLayer.loadBackground();\n                }\n            }\n        }\n        this.object3d = ISSLayer._issmodel$2;\n        return Object3dLayer.prototype.draw.call(this, renderContext, opacity, flat);\n    },\n\n    getPrimaryUI: function () {\n        return null;\n    },\n\n    addFilesToCabinet: function (fc) {\n        return;\n    },\n\n    loadData: function (doc, filename) {\n        return;\n    },\n\n    cleanUp: function () { }\n};\n\nregisterType(\"ISSLayer\", [ISSLayer, ISSLayer$, Object3dLayer]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Top-level information about a tour.\n\nimport pako from \"pako\";\n\nimport { ss } from \"../ss.js\";\nimport { registerType, registerEnum } from \"../typesystem.js\";\nimport { Util } from \"../baseutil.js\";\nimport { Color, Colors } from \"../color.js\";\nimport { IUiController } from \"../interfaces.js\";\nimport { Guid } from \"../util.js\";\n\n\n// wwtlib.AltUnits\n\nexport var AltUnits = {\n    meters: 1,\n    feet: 2,\n    inches: 3,\n    miles: 4,\n    kilometers: 5,\n    astronomicalUnits: 6,\n    lightYears: 7,\n    parsecs: 8,\n    megaParsecs: 9,\n    custom: 10\n};\n\nregisterType(\"AltUnits\", AltUnits);\nregisterEnum(\"AltUnits\", AltUnits);\n\n\n// wwtlib.FadeType\n\nexport var FadeType = {\n    fadeIn: 1,\n    fadeOut: 2,\n    both: 3,\n    none: 4\n};\n\nregisterType(\"FadeType\", FadeType);\nregisterEnum(\"FadeType\", FadeType);\n\n\n// wwtlib.DomainValue\n\nexport function DomainValue(text, markerIndex) {\n    this.markerIndex = 4;\n    this.customMarker = null;\n    this.text = text;\n    this.markerIndex = markerIndex;\n}\n\nvar DomainValue$ = {};\n\nregisterType(\"DomainValue\", [DomainValue, DomainValue$, null]);\n\n\n// wwtlib.Layer\n\nexport function Layer() {\n    this.id = Guid.newGuid();\n    this.loadedFromTour = false;\n    this.tourDocument = null;\n    this.opacity = 1;\n    this.opened = false;\n    this._startTime = ss.date('01/01/1900');\n    this._endTime = ss.date('01/01/2100');\n    this._fadeSpan = 0;\n    this._fadeType = 4;\n    this.version = 0;\n    this.color = Colors.get_white();\n    this.enabled = true;\n    this.astronomical = false;\n}\n\nvar Layer$ = {\n    getPrimaryUI: function () {\n        return null;\n    },\n\n    getFileStreamUrl: function (filename) {\n        if (this.tourDocument != null) {\n            return this.tourDocument.getFileStream(filename);\n        }\n        return null;\n    },\n\n    get_opacity: function () {\n        return this.opacity;\n    },\n\n    set_opacity: function (value) {\n        if (this.opacity !== value) {\n            this.version++;\n            this.opacity = value;\n        }\n        return value;\n    },\n\n    get_opened: function () {\n        return this.opened;\n    },\n\n    set_opened: function (value) {\n        if (this.opened !== value) {\n            this.version++;\n            this.opened = value;\n        }\n        return value;\n    },\n\n    get_startTime: function () {\n        return this._startTime;\n    },\n\n    set_startTime: function (value) {\n        if (!ss.compareDates(this._startTime, value)) {\n            this.version++;\n            this._startTime = value;\n        }\n        return value;\n    },\n\n    get_endTime: function () {\n        return this._endTime;\n    },\n\n    set_endTime: function (value) {\n        if (!ss.compareDates(this._endTime, value)) {\n            this.version++;\n            this._endTime = value;\n        }\n        return value;\n    },\n\n    get_fadeSpan: function () {\n        return this._fadeSpan;\n    },\n\n    set_fadeSpan: function (value) {\n        this.version++;\n        this._fadeSpan = value;\n        return value;\n    },\n\n    get_fadeType: function () {\n        return this._fadeType;\n    },\n\n    set_fadeType: function (value) {\n        if (this._fadeType !== value) {\n            this.set_version(this.get_version() + 1) - 1;\n            this._fadeType = value;\n        }\n        return value;\n    },\n\n    get_version: function () {\n        return this.version;\n    },\n\n    set_version: function (value) {\n        this.version = value;\n        return value;\n    },\n\n    findClosest: function (target, distance, closestPlace, astronomical) {\n        return closestPlace;\n    },\n\n    hoverCheckScreenSpace: function (cursor) {\n        return false;\n    },\n\n    clickCheckScreenSpace: function (cursor) {\n        return false;\n    },\n\n    draw: function (renderContext, opacity, flat) {\n        return true;\n    },\n\n    preDraw: function (renderContext, opacity) {\n        return true;\n    },\n\n    updateData: function (data, purgeOld, purgeAll, hasHeader) {\n        return true;\n    },\n\n    // \"updateData\" used to be named this. We add this function as a\n    // compatibility shim just in case there's some JavaScript out there\n    // still using the old name.\n    upadteData: function (data, purgeOld, purgeAll, hasHeader) {\n        return this.updateData(data, purgeOld, purgeAll, hasHeader);\n    },\n\n    canCopyToClipboard: function () {\n        return false;\n    },\n\n    copyToClipboard: function () {\n        return;\n    },\n\n    getParams: function () {\n        var paramList = new Array(5);\n        paramList[0] = this.color.r / 255;\n        paramList[1] = this.color.g / 255;\n        paramList[2] = this.color.b / 255;\n        paramList[3] = this.color.a / 255;\n        paramList[4] = this.opacity;\n        return paramList;\n    },\n\n    setParams: function (paramList) {\n        if (paramList.length === 5) {\n            this.opacity = paramList[4];\n            this.color = Color.fromArgb((paramList[3] * 255), (paramList[0] * 255), (paramList[1] * 255), (paramList[2] * 255));\n        }\n    },\n\n    getParamNames: function () {\n        return ['Color.Red', 'Color.Green', 'Color.Blue', 'Color.Alpha', 'Opacity'];\n    },\n\n    getEditUI: function () {\n        return ss.safeCast(this, IUiController);\n    },\n\n    cleanUp: function () { },\n\n    get_name: function () {\n        return this._name;\n    },\n\n    set_name: function (value) {\n        if (this._name !== value) {\n            this.version++;\n            this._name = value;\n        }\n        return value;\n    },\n\n    toString: function () {\n        return this._name;\n    },\n\n    get_referenceFrame: function () {\n        return this.referenceFrame;\n    },\n\n    set_referenceFrame: function (value) {\n        this.referenceFrame = value;\n        return value;\n    },\n\n    getProps: function () {\n        return '';\n    },\n\n    get_color: function () {\n        return this.color;\n    },\n\n    set_color: function (value) {\n        if (this.color !== value) {\n            this.color = value;\n            this.version++;\n        }\n        return value;\n    },\n\n    colorChanged: function () { },\n\n    get_colorValue: function () {\n        return this.get_color().toString();\n    },\n\n    set_colorValue: function (value) {\n        this.set_color(Color.fromName(value));\n        return value;\n    },\n\n    // These named accessor functions were added so that we can support\n    // `enabled` as a \"setting\" in our TypeScript framework, without breaking\n    // anything that might rely on `this.enabled` being a genuine bool.\n    get_enabled: function () {\n        return this.enabled;\n    },\n\n    set_enabled: function (value) {\n        this.enabled = value;\n        return value;\n    },\n\n    get_astronomical: function () {\n        return this.astronomical;\n    },\n\n    set_astronomical: function (value) {\n        if (this.astronomical !== value) {\n            this.version++;\n            this.astronomical = value;\n        }\n        return value;\n    },\n\n    getTypeName: function () {\n        return 'TerraViewer.Layer';\n    },\n\n    saveToXml: function (xmlWriter) {\n        xmlWriter._writeStartElement('Layer');\n        xmlWriter._writeAttributeString('Id', this.id.toString());\n        xmlWriter._writeAttributeString('Type', this.getTypeName());\n        xmlWriter._writeAttributeString('Name', this.get_name());\n        xmlWriter._writeAttributeString('ReferenceFrame', this.referenceFrame);\n        xmlWriter._writeAttributeString('Color', this.color.save());\n        xmlWriter._writeAttributeString('Opacity', this.opacity.toString());\n        xmlWriter._writeAttributeString('StartTime', Util.xmlDate(this.get_startTime()));\n        xmlWriter._writeAttributeString('EndTime', Util.xmlDate(this.get_endTime()));\n        xmlWriter._writeAttributeString('FadeSpan', this.get_fadeSpan().toString());\n        xmlWriter._writeAttributeString('FadeType', this.get_fadeType().toString());\n        this.writeLayerProperties(xmlWriter);\n        xmlWriter._writeEndElement();\n    },\n\n    writeLayerProperties: function (xmlWriter) {\n        return;\n    },\n\n    initializeFromXml: function (node) { },\n\n    initFromXml: function (node) {\n        this.id = Guid.fromString(node.attributes.getNamedItem('Id').nodeValue);\n        this.set_name(node.attributes.getNamedItem('Name').nodeValue);\n        this.referenceFrame = node.attributes.getNamedItem('ReferenceFrame').nodeValue;\n        this.color = Color.load(node.attributes.getNamedItem('Color').nodeValue);\n        this.opacity = parseFloat(node.attributes.getNamedItem('Opacity').nodeValue);\n        if (node.attributes.getNamedItem('StartTime') != null) {\n            this.set_startTime(new Date(node.attributes.getNamedItem('StartTime').nodeValue));\n        }\n        if (node.attributes.getNamedItem('EndTime') != null) {\n            this.set_endTime(new Date(node.attributes.getNamedItem('EndTime').nodeValue));\n        }\n        if (node.attributes.getNamedItem('FadeSpan') != null) {\n            this.set_fadeSpan(Util.parseTimeSpan(node.attributes.getNamedItem('FadeSpan').nodeValue));\n        }\n        if (node.attributes.getNamedItem('FadeType') != null) {\n            switch (node.attributes.getNamedItem('FadeType').nodeValue) {\n                case 'In':\n                    this.set_fadeType(1);\n                    break;\n                case 'Out':\n                    this.set_fadeType(2);\n                    break;\n                case 'Both':\n                    this.set_fadeType(3);\n                    break;\n                case 'None':\n                    this.set_fadeType(4);\n                    break;\n                default:\n                    break;\n            }\n        }\n        this.initializeFromXml(node);\n    },\n\n    loadData: function (doc, filename) {\n        return;\n    },\n\n    addFilesToCabinet: function (fc) {\n        return;\n    },\n\n    // This method decompresses a blob into a string, and if the string cannot be decompressed\n    // due to an invalid header, we assume the blob is not compressed and return the string\n    // as-is.\n    getStringFromGzipBlob: function (blob, dataReady) {\n        var reader = new FileReader();\n        reader.onloadend = function (e) {\n            var result = '';\n            try {\n                result = pako.inflate(e.target.result, { to: 'string' });\n            }\n            catch (err) {\n                var errString = err.toString();\n                if (errString === 'incorrect header check' || errString === 'unknown compression method') {\n                    result = String.fromCharCode.apply(null, new Uint8Array(e.target.result));\n                }\n                else {\n                    throw err;\n                }\n            }\n            dataReady(result);\n        };\n        reader.readAsArrayBuffer(blob);\n    }\n};\n\nregisterType(\"Layer\", [Layer, Layer$, null]);\n\n\n// wwtlib.LayerCollection\n\nexport function LayerCollection() {\n    Layer.call(this);\n}\n\nvar LayerCollection$ = {\n    draw: function (renderContext, opacity, flat) {\n        return Layer.prototype.draw.call(this, renderContext, opacity, false);\n    }\n};\n\nregisterType(\"LayerCollection\", [LayerCollection, LayerCollection$, Layer]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Managing the tree of renderer layers.\n\nimport { ss } from \"../ss.js\";\nimport { registerType, registerEnum, Enums } from \"../typesystem.js\";\nimport {\n    freestandingMode,\n    globalScriptInterface,\n    globalWWTControl,\n    set_layerManagerGetAllMaps,\n    set_setManagerVisibleLayerList,\n} from \"../data_globals.js\";\nimport { globalRenderContext } from \"../render_globals.js\";\nimport { Vector2d, Vector3d, Matrix3d } from \"../double3d.js\";\nimport { ELL } from \"../astrocalc/elliptical.js\";\nimport { Histogram } from \"../utilities/histogram.js\";\nimport { SimpleInput } from \"../utilities/simple_input.js\";\nimport { ColorPicker } from \"../utilities/color_picker.js\";\nimport { ContextMenuStrip, ToolStripMenuItem, ToolStripSeparator } from \"../utilities/context_menu_strip.js\";\nimport { Color } from \"../color.js\";\nimport { FitsImage } from \"./fits_image.js\";\nimport { ProjectionType } from \"../imageset.js\";\nimport { Planets } from \"../planets.js\";\nimport { Settings } from \"../settings.js\";\nimport { SpaceTimeController } from \"../space_time_controller.js\";\nimport { URLHelpers } from \"../url_helpers.js\";\nimport { Cursor, Language } from \"../util.js\";\nimport { WebFile } from \"../web_file.js\";\nimport { Layer } from \"./layer.js\";\nimport { ReferenceFrame } from \"./reference_frame.js\";\nimport { GreatCirlceRouteLayer } from \"./great_circle_route_layer.js\";\nimport { GridLayer } from \"./grid_layer.js\";\nimport { ImageSetLayer } from \"./imageset_layer.js\";\nimport { ISSLayer } from \"./iss_layer.js\";\nimport { Orbit } from \"./orbit.js\";\nimport { OrbitLayer } from \"./orbit_layer.js\";\nimport { SpreadSheetLayer, PushPin } from \"./spreadsheet_layer.js\";\nimport { VoTableLayer } from \"./vo_table_layer.js\";\nimport { LayerInfo } from \"../tours/tour_stop.js\";\nimport { TourPlayer } from \"../tours/tour_player.js\";\n\n\n// wwtlib.ReferenceFrames\n\nexport var ReferenceFrames = {\n    sky: 0,\n    ecliptic: 1,\n    galactic: 2,\n    sun: 3,\n    mercury: 4,\n    venus: 5,\n    earth: 6,\n    mars: 7,\n    jupiter: 8,\n    saturn: 9,\n    uranus: 10,\n    neptune: 11,\n    pluto: 12,\n    moon: 13,\n    io: 14,\n    europa: 15,\n    ganymede: 16,\n    callisto: 17,\n    custom: 18,\n    identity: 19,\n    sandbox: 20\n};\n\nregisterType(\"ReferenceFrames\", ReferenceFrames);\nregisterEnum(\"ReferenceFrames\", ReferenceFrames);\n\n\n// wwtlib.LayerManager\n\nexport function LayerManager() { }\n\nLayerManager._version = 0;\nLayerManager._tourLayers = false;\nLayerManager._layerMaps = {};\nLayerManager._layerMapsTours = {};\nLayerManager._allMaps = {};\nLayerManager._allMapsTours = {};\nLayerManager._currentMap = 'Earth';\nLayerManager._layerList = {};\nLayerManager._layerListTours = {};\nLayerManager._moonfile = '';\nLayerManager._selectedLayer = null;\nLayerManager._lastMenuClick = new Vector2d();\n\nLayerManager.get_version = function () {\n    return LayerManager._version;\n};\n\nLayerManager.set_version = function (value) {\n    LayerManager._version = value;\n    return value;\n};\n\nLayerManager.get_frameWizardDialog = function () {\n    return LayerManager._frameWizardDialog;\n};\n\nLayerManager.get_dataVizWizardDialog = function () {\n    return LayerManager._dataVizWizardDialog;\n};\n\nLayerManager.get_referenceFramePropsDialog = function () {\n    return LayerManager._referenceFramePropsDialog;\n};\n\nLayerManager.get_greatCircleDlg = function () {\n    return LayerManager._greatCircleDialog;\n};\n\nLayerManager.get_tourLayers = function () {\n    return LayerManager._tourLayers;\n};\n\nLayerManager.set_tourLayers = function (value) {\n    if (LayerManager._tourLayers !== value && !value) {\n        LayerManager._clearLayers();\n        LayerManager._tourLayers = value;\n        LayerManager.loadTree();\n    }\n    else if (LayerManager._tourLayers !== value && !!value) {\n        LayerManager._tourLayers = value;\n        LayerManager.initLayers();\n    }\n    return value;\n};\n\nLayerManager.loadTree = function () {\n    if (globalScriptInterface != null) {\n        globalScriptInterface.refreshLayerManagerNow();\n    }\n};\n\nLayerManager.get_layerMaps = function () {\n    if (LayerManager.get_tourLayers()) {\n        return LayerManager._layerMapsTours;\n    }\n    else {\n        return LayerManager._layerMaps;\n    }\n};\n\nLayerManager.set_layerMaps = function (value) {\n    if (LayerManager.get_tourLayers()) {\n        LayerManager._layerMapsTours = value;\n    }\n    else {\n        LayerManager._layerMaps = value;\n    }\n    return value;\n};\n\nLayerManager.get_allMaps = function () {\n    if (LayerManager.get_tourLayers()) {\n        return LayerManager._allMapsTours;\n    }\n    else {\n        return LayerManager._allMaps;\n    }\n};\n\nset_layerManagerGetAllMaps(LayerManager.get_allMaps);\n\nLayerManager.set_allMaps = function (value) {\n    if (LayerManager.get_tourLayers()) {\n        LayerManager._allMapsTours = value;\n    }\n    else {\n        LayerManager._allMaps = value;\n    }\n    return value;\n};\n\nLayerManager.get_currentMap = function () {\n    return LayerManager._currentMap;\n};\n\nLayerManager.set_currentMap = function (value) {\n    LayerManager._currentMap = value;\n    return value;\n};\n\nLayerManager.get_layerList = function () {\n    if (LayerManager.get_tourLayers()) {\n        return LayerManager._layerListTours;\n    }\n    else {\n        return LayerManager._layerList;\n    }\n};\n\nLayerManager.set_layerList = function (value) {\n    if (LayerManager.get_tourLayers()) {\n        LayerManager._layerListTours = value;\n    }\n    else {\n        LayerManager._layerList = value;\n    }\n    return value;\n};\n\n// This function *can* be called multiple times safely, but it only\n// needs to be called once upon app startup. The `InitLayers` function\n// can be called more than once, if/when the `TourLayers` setting is\n// toggled.\nLayerManager.oneTimeInitialization = function () {\n    if (LayerManager._webFileMoons == null) {\n        LayerManager.getMoonFile(URLHelpers.singleton.engineAssetUrl('moons.txt'));\n    }\n    PushPin.triggerLoadSprite();\n};\n\nLayerManager.initLayers = function () {\n    LayerManager._clearLayers();\n    var iss = null;\n    var doISS = !LayerManager.get_tourLayers() && !freestandingMode;\n    if (doISS) {\n        iss = new LayerMap('ISS', 18);\n        iss.frame.epoch = SpaceTimeController._twoLineDateToJulian('10184.51609218');\n        iss.frame.semiMajorAxis = 6728829.41;\n        iss.frame.referenceFrameType = 1;\n        iss.frame.inclination = 51.6442;\n        iss.frame.longitudeOfAscendingNode = 147.0262;\n        iss.frame.eccentricity = 0.0009909;\n        iss.frame.meanAnomolyAtEpoch = 325.5563;\n        iss.frame.meanDailyMotion = 360 * 15.72172655;\n        iss.frame.argumentOfPeriapsis = 286.4623;\n        iss.frame.scale = 1;\n        iss.frame.semiMajorAxisUnits = 1;\n        iss.frame.meanRadius = 130;\n        iss.frame.oblateness = 0;\n        iss.frame.showOrbitPath = true;\n        var isstle = new Array(0);\n\n        //This is downloaded now on startup\n        var url = URLHelpers.singleton.coreDynamicUrl('wwtweb/isstle.aspx');\n        var webFile;\n        webFile = new WebFile(url);\n        webFile.onStateChange = function () {\n            if (webFile.get_state() === 1) {\n                var data = webFile.getText();\n                isstle = data.split('\\n');\n                if (isstle.length > 1) {\n                    iss.frame.fromTLE(isstle[0], isstle[1], 398600441800000);\n                }\n            }\n        };\n        webFile.send();\n        iss.enabled = true;\n    }\n    LayerManager.get_layerMaps()['Sun'] = new LayerMap('Sun', 3);\n    LayerManager.get_layerMaps()['Sun'].addChild(new LayerMap('Mercury', 4));\n    LayerManager.get_layerMaps()['Sun'].addChild(new LayerMap('Venus', 5));\n    LayerManager.get_layerMaps()['Sun'].addChild(new LayerMap('Earth', 6));\n    LayerManager.get_layerMaps()['Sun'].childMaps['Earth'].addChild(new LayerMap('Moon', 13));\n    if (doISS) {\n        LayerManager.get_layerMaps()['Sun'].childMaps['Earth'].addChild(iss);\n    }\n    LayerManager.get_layerMaps()['Sun'].addChild(new LayerMap('Mars', 7));\n    LayerManager.get_layerMaps()['Sun'].addChild(new LayerMap('Jupiter', 8));\n    LayerManager.get_layerMaps()['Sun'].childMaps['Jupiter'].addChild(new LayerMap('Io', 14));\n    LayerManager.get_layerMaps()['Sun'].childMaps['Jupiter'].addChild(new LayerMap('Europa', 15));\n    LayerManager.get_layerMaps()['Sun'].childMaps['Jupiter'].addChild(new LayerMap('Ganymede', 16));\n    LayerManager.get_layerMaps()['Sun'].childMaps['Jupiter'].addChild(new LayerMap('Callisto', 17));\n    LayerManager.get_layerMaps()['Sun'].addChild(new LayerMap('Saturn', 9));\n    LayerManager.get_layerMaps()['Sun'].addChild(new LayerMap('Uranus', 10));\n    LayerManager.get_layerMaps()['Sun'].addChild(new LayerMap('Neptune', 11));\n    LayerManager.get_layerMaps()['Sun'].addChild(new LayerMap('Pluto', 12));\n    LayerManager._addMoons(LayerManager._moonfile);\n    LayerManager.get_layerMaps()['Sky'] = new LayerMap('Sky', 0);\n    LayerManager.get_layerMaps()['Sun'].open = true;\n    LayerManager._allMaps = {};\n    LayerManager._addAllMaps(LayerManager.get_layerMaps(), null);\n    if (doISS) {\n        LayerManager._addIss();\n    }\n    LayerManager._version++;\n    LayerManager.loadTree();\n};\n\nLayerManager._addIss = function () {\n    var layer = new ISSLayer();\n    layer.set_name(Language.getLocalizedText(1314, 'ISS Model  (Toshiyuki Takahei)'));\n    layer.enabled = Settings.get_active().get_showISSModel();\n    LayerManager.get_layerList()[layer.id] = layer;\n    layer.set_referenceFrame('ISS');\n    LayerManager.get_allMaps()['ISS'].layers.push(layer);\n    LayerManager.get_allMaps()['ISS'].open = true;\n};\n\nLayerManager._addAllMaps = function (maps, parent) {\n    var $enum1 = ss.enumerate(ss.keys(maps));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var map = maps[key];\n        map.frame.parent = parent;\n        LayerManager.get_allMaps()[map.get_name()] = map;\n        LayerManager._addAllMaps(map.childMaps, map.get_name());\n    }\n};\n\nLayerManager._clearLayers = function () {\n    var $enum1 = ss.enumerate(ss.keys(LayerManager.get_layerList()));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var layer = LayerManager.get_layerList()[key];\n        layer.cleanUp();\n    }\n    ss.clearKeys(LayerManager.get_layerList());\n    ss.clearKeys(LayerManager.get_layerMaps());\n};\n\nLayerManager.getMoonFile = function (url) {\n    LayerManager._webFileMoons = new WebFile(url);\n    LayerManager._webFileMoons.onStateChange = LayerManager.moonFileStateChange;\n    LayerManager._webFileMoons.send();\n};\n\nLayerManager.moonFileStateChange = function () {\n    if (LayerManager._webFileMoons.get_state() === 2) {\n        alert(LayerManager._webFileMoons.get_message());\n    }\n    else if (LayerManager._webFileMoons.get_state() === 1) {\n        LayerManager._moonfile = LayerManager._webFileMoons.getText();\n        LayerManager.initLayers();\n    }\n};\n\nLayerManager._addMoons = function (file) {\n    var data = file.split('\\r\\n');\n    var first = true;\n    var $enum1 = ss.enumerate(data);\n    while ($enum1.moveNext()) {\n        var line = $enum1.current;\n        if (first) {\n            first = false;\n            continue;\n        }\n        var parts = line.split('\\t');\n        if (parts.length > 16) {\n            var planet = parts[0];\n            var frame = new LayerMap(parts[2], 18);\n            frame.frame._systemGenerated = true;\n            frame.frame.epoch = parseFloat(parts[1]);\n            frame.frame.semiMajorAxis = parseFloat(parts[3]) * 1000;\n            frame.frame.referenceFrameType = 1;\n            frame.frame.inclination = parseFloat(parts[7]);\n            frame.frame.longitudeOfAscendingNode = parseFloat(parts[8]);\n            frame.frame.eccentricity = parseFloat(parts[4]);\n            frame.frame.meanAnomolyAtEpoch = parseFloat(parts[6]);\n            frame.frame.meanDailyMotion = parseFloat(parts[9]);\n            frame.frame.argumentOfPeriapsis = parseFloat(parts[5]);\n            frame.frame.scale = 1;\n            frame.frame.semiMajorAxisUnits = 1;\n            frame.frame.meanRadius = parseFloat(parts[16]) * 1000;\n            frame.frame.rotationalPeriod = parseFloat(parts[17]);\n            frame.frame.showAsPoint = false;\n            frame.frame.showOrbitPath = true;\n            frame.frame.set_representativeColor(Color.fromArgb(255, 175, 216, 230));\n            frame.frame.oblateness = 0;\n            LayerManager.get_layerMaps()['Sun'].childMaps[planet].addChild(frame);\n        }\n    }\n};\n\nLayerManager.addVoTableLayer = function (table, title) {\n    return LayerManager.addVoTableLayerWithPlotType(table, title, 2);\n};\n\nLayerManager.addVoTableLayerWithPlotType = function (table, title, plotType) {\n    var layer = VoTableLayer.create(table, plotType);\n    layer.set_name(title);\n    layer.set_astronomical(true);\n    layer.set_referenceFrame('Sky');\n    LayerManager.get_layerList()[layer.id] = layer;\n    LayerManager.get_allMaps()['Sky'].layers.push(layer);\n    LayerManager.get_allMaps()['Sky'].open = true;\n    layer.enabled = true;\n    LayerManager._version++;\n    LayerManager.loadTree();\n    return layer;\n};\n\nLayerManager.addImageSetLayer = function (imageset, title) {\n    var layer = ImageSetLayer.create(imageset);\n    return LayerManager.addFitsImageSetLayer(layer, title);\n};\n\nLayerManager.addImageSetLayerCallback = function (imageset, title, callback) {\n    var layer = ImageSetLayer.create(imageset);\n\n    // The tile rendering codepaths require that \"Extension\" is exactly\n    // .fits -- multiple extensions are not currently supported.\n    var isNonHipsTiledFits =\n        imageset.get_extension() === '.fits' &&\n        layer.getFitsImage() == null &&\n        imageset.get_projection() !== ProjectionType.healpix;\n\n    // The goal here is to fire the callback once the initial imageset\n    // data have loaded. In particular, for FITS-type imagesets, we\n    // inevitably need to download some data in order to figure out\n    // parameters like FitsProperties.LowerCut.\n    //\n    // At the moment, this is only wired up correctly for non-HiPS tiled\n    // FITS. In a pretty egregious hack, the OnMainImageLoaded callback\n    // below will be fired once the level-0 FITS tile is loaded. We\n    // basically needed to add this new callback hook because there\n    // wasn't any other way to get something to fire when the level-0\n    // tile data actually arrive.\n    //\n    // HiPS FITS datasets will *eventually* get the right FitsProperties\n    // because the fetch of the HipsProperties data sets this up. (This\n    // is triggered by the HipsProperties constructor, used in\n    // Imageset.GetNewTile.) But the timing of the callback here is\n    // uncorrelated with that process. The same is broadly true for\n    // untiled FITS. This function should be improved to make sure that\n    // the callback argument gets fired at the right time for such\n    // datasets.\n\n    if (isNonHipsTiledFits) {\n        imageset.get_fitsProperties().onMainImageLoaded = function (image) {\n            image.applyDisplaySettings();\n            if (callback != null) {\n                callback(layer);\n            }\n        };\n    }\n    LayerManager.addFitsImageSetLayer(layer, title);\n\n    // For everything not yet handled, just trigger the callback now, if\n    // needed.\n    if (callback != null && (!isNonHipsTiledFits || imageset.get_fitsProperties().mainImageLoadedEventHasFired)) {\n        callback(layer);\n    }\n\n    return layer;\n};\n\n// This method is somewhat misnamed - there's nothing FITS-specific about it.\nLayerManager.addFitsImageSetLayer = function (layer, title) {\n    layer.doneLoading(null);\n    layer.set_name(title);\n    layer.set_astronomical(true);\n    layer.set_referenceFrame('Sky');\n    LayerManager.get_layerList()[layer.id] = layer;\n    LayerManager.get_allMaps()['Sky'].layers.push(layer);\n    LayerManager.get_allMaps()['Sky'].open = true;\n    layer.enabled = true;\n    LayerManager._version++;\n    LayerManager.loadTree();\n    return layer;\n};\n\nLayerManager.getNextFitsName = function () {\n    return LayerManager._getNextName('Fits Image');\n};\n\nLayerManager.getNextImageSetName = function () {\n    return LayerManager._getNextName('Image Set');\n};\n\nLayerManager._getNextName = function (type) {\n    var currentNumber = 0;\n    var $enum1 = ss.enumerate(ss.keys(LayerManager.get_allMaps()));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var $enum2 = ss.enumerate(LayerManager.get_allMaps()[key].layers);\n        while ($enum2.moveNext()) {\n            var layer = $enum2.current;\n            if (ss.startsWith(layer.get_name(), type + ' ')) {\n                var number = ss.replaceString(layer.get_name(), type + ' ', '');\n                try {\n                    var num = parseInt(number);\n                    if (num > currentNumber) {\n                        currentNumber = num;\n                    }\n                }\n                catch ($e3) {\n                }\n            }\n        }\n    }\n    return ss.format('{0} {1}', type, currentNumber + 1);\n};\n\nLayerManager._closeAllTourLoadedLayers = function () {\n    var purgeTargets = [];\n    var $enum1 = ss.enumerate(ss.keys(LayerManager.get_layerList()));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var layer = LayerManager.get_layerList()[key];\n        if (layer.loadedFromTour) {\n            purgeTargets.push(layer.id);\n        }\n    }\n    var $enum2 = ss.enumerate(purgeTargets);\n    while ($enum2.moveNext()) {\n        var guid = $enum2.current;\n        LayerManager.deleteLayerByID(guid, true, false);\n    }\n    var purgeMapsNames = [];\n    var $enum3 = ss.enumerate(ss.keys(LayerManager.get_allMaps()));\n    while ($enum3.moveNext()) {\n        var key = $enum3.current;\n        var map = LayerManager.get_allMaps()[key];\n        if (map.loadedFromTour && !map.layers.length) {\n            purgeMapsNames.push(map.get_name());\n        }\n    }\n    var $enum4 = ss.enumerate(purgeMapsNames);\n    while ($enum4.moveNext()) {\n        var name = $enum4.current;\n        LayerManager.purgeLayerMapDeep(LayerManager.get_allMaps()[name], true);\n    }\n    LayerManager.set_version(LayerManager.get_version() + 1) - 1;\n    LayerManager.loadTree();\n};\n\nLayerManager.purgeLayerMapDeep = function (target, topLevel) {\n    var $enum1 = ss.enumerate(target.layers);\n    while ($enum1.moveNext()) {\n        var layer = $enum1.current;\n        LayerManager.deleteLayerByID(layer.id, false, false);\n    }\n    target.layers.length = 0;\n    var $enum2 = ss.enumerate(ss.keys(target.childMaps));\n    while ($enum2.moveNext()) {\n        var key = $enum2.current;\n        var map = target.childMaps[key];\n        LayerManager.purgeLayerMapDeep(map, false);\n    }\n    ss.clearKeys(target.childMaps);\n    if (topLevel) {\n        if (!ss.emptyString(target.frame.parent)) {\n            if (ss.keyExists(LayerManager.get_allMaps(), target.frame.parent)) {\n                delete LayerManager.get_allMaps()[target.frame.parent].childMaps[target.get_name()];\n            }\n        } else {\n            if (ss.keyExists(LayerManager.get_layerMaps(), target.get_name())) {\n                delete LayerManager.get_layerMaps()[target.get_name()];\n            }\n        }\n    }\n    delete LayerManager.get_allMaps()[target.get_name()];\n    LayerManager._version++;\n};\n\nLayerManager._cleanAllTourLoadedLayers = function () {\n    var $enum1 = ss.enumerate(ss.keys(LayerManager.get_layerList()));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var layer = LayerManager.get_layerList()[key];\n        if (layer.loadedFromTour) {\n            layer.loadedFromTour = false;\n        }\n    }\n};\n\n// Merge layers from Tour Player Alternate universe into the real layer manager layers list\nLayerManager.mergeToursLayers = function () {\n    LayerManager._tourLayers = false;\n    var OverWrite = false;\n    var CollisionChecked = false;\n    var $enum1 = ss.enumerate(ss.keys(LayerManager._allMapsTours));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var map = LayerManager._allMapsTours[key];\n        if (!ss.keyExists(LayerManager._allMaps, map.get_name())) {\n            var newMap = new LayerMap(map.get_name(), 18);\n            newMap.frame = map.frame;\n            newMap.loadedFromTour = true;\n            LayerManager.get_allMaps()[newMap.get_name()] = newMap;\n        }\n    }\n    LayerManager.connectAllChildren();\n    var $enum2 = ss.enumerate(ss.keys(LayerManager._layerListTours));\n    while ($enum2.moveNext()) {\n        var key = $enum2.current;\n        var layer = LayerManager._layerListTours[key];\n        if (ss.keyExists(LayerManager.get_layerList(), layer.id)) {\n            if (!CollisionChecked) {\n                OverWrite = true;\n                CollisionChecked = true;\n            }\n            if (OverWrite) {\n                LayerManager.deleteLayerByID(layer.id, true, false);\n            }\n        }\n        if (!ss.keyExists(LayerManager.get_layerList(), layer.id)) {\n            if (ss.keyExists(LayerManager.get_allMaps(), layer.get_referenceFrame())) {\n                LayerManager.get_layerList()[layer.id] = layer;\n                LayerManager.get_allMaps()[layer.get_referenceFrame()].layers.push(layer);\n            }\n        } else {\n            layer.cleanUp();\n        }\n    }\n    ss.clearKeys(LayerManager._layerListTours);\n    ss.clearKeys(LayerManager._allMapsTours);\n    ss.clearKeys(LayerManager._layerMapsTours);\n    LayerManager.loadTree();\n};\n\nLayerManager.connectAllChildren = function () {\n    var $enum1 = ss.enumerate(ss.keys(LayerManager.get_allMaps()));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var map = LayerManager.get_allMaps()[key];\n        if (ss.emptyString(map.frame.parent) && !ss.keyExists(LayerManager.get_layerMaps(), map.frame.name)) {\n            LayerManager.get_layerMaps()[map.get_name()] = map;\n        } else if (!ss.emptyString(map.frame.parent) && ss.keyExists(LayerManager.get_allMaps(), map.frame.parent)) {\n            if (!ss.keyExists(LayerManager.get_allMaps()[map.frame.parent].childMaps, map.frame.name)) {\n                LayerManager.get_allMaps()[map.frame.parent].childMaps[map.frame.name] = map;\n                map.parent = LayerManager.get_allMaps()[map.frame.parent];\n            }\n        }\n    }\n};\n\nLayerManager.deleteLayerByID = function (ID, removeFromParent, updateTree) {\n    if (ss.keyExists(LayerManager.get_layerList(), ID)) {\n        var layer = LayerManager.get_layerList()[ID];\n        layer.cleanUp();\n        if (removeFromParent) {\n            ss.remove(LayerManager.get_allMaps()[layer.get_referenceFrame()].layers, layer);\n        }\n        delete LayerManager.get_layerList()[ID];\n        LayerManager._version++;\n        if (updateTree) {\n            LayerManager.loadTree();\n        }\n        return true;\n    }\n    else {\n        return false;\n    }\n};\n\nLayerManager._getFrameTarget = function (renderContext, TrackingFrame) {\n    var target = new FrameTarget();\n    var targetPoint = Vector3d.get_empty();\n    target.target = Vector3d.get_empty();\n    target.matrix = Matrix3d.get_identity();\n    if (!ss.keyExists(LayerManager.get_allMaps(), TrackingFrame)) {\n        return target;\n    }\n    var mapList = [];\n    var current = LayerManager.get_allMaps()[TrackingFrame];\n    mapList.push(current);\n    while (current.frame.reference === 18) {\n        current = current.parent;\n        mapList.splice(0, 0, current);\n    }\n    var matOld = renderContext.get_world().clone();\n    var matOldNonRotating = renderContext.get_worldBaseNonRotating();\n    var matOldBase = renderContext.get_worldBase();\n    var oldNominalRadius = renderContext.get_nominalRadius();\n    var $enum1 = ss.enumerate(mapList);\n    while ($enum1.moveNext()) {\n        var map = $enum1.current;\n        if (map.frame.reference !== 18 && map.frame.reference !== 20) {\n            Planets.setupPlanetMatrix(renderContext, Enums.parse('SolarSystemObjects', map.frame.name), Vector3d.get_empty(), false);\n        } else {\n            map.computeFrame(renderContext);\n            if (map.frame.useRotatingParentFrame()) {\n                renderContext.set_world(Matrix3d.multiplyMatrix(map.frame.worldMatrix, renderContext.get_world()));\n            }\n            else {\n                renderContext.set_world(Matrix3d.multiplyMatrix(map.frame.worldMatrix, renderContext.get_worldBaseNonRotating()));\n            }\n            if (map.frame.referenceFrameType === 3) {\n                renderContext.set_worldBaseNonRotating(renderContext.get_world().clone());\n            }\n            renderContext.set_nominalRadius(map.frame.meanRadius);\n        }\n    }\n    targetPoint = renderContext.get_world().transform(targetPoint);\n    var lookAt = renderContext.get_world().transform(Vector3d.create(0, 0, 1));\n    var lookUp = Vector3d.subtractVectors(renderContext.get_world().transform(Vector3d.create(0, 1, 0)), targetPoint);\n    lookUp.normalize();\n    target.matrix = Matrix3d.lookAtLH(new Vector3d(), Vector3d.subtractVectors(lookAt, targetPoint), lookUp);\n    renderContext.set_nominalRadius(oldNominalRadius);\n    renderContext.set_world(matOld);\n    renderContext.set_worldBaseNonRotating(matOldNonRotating);\n    renderContext.set_worldBase(matOldBase);\n    target.target = targetPoint;\n    return target;\n};\n\nLayerManager._prepTourLayers = function () {\n    if (TourPlayer.get_playing()) {\n        var player = globalWWTControl.uiController;\n        if (player != null) {\n            var tour = player.get_tour();\n            if (tour.get_currentTourStop() != null) {\n                player.updateTweenPosition(-1);\n                if (!tour.get_currentTourStop().get_keyFramed()) {\n                    tour.get_currentTourStop()._updateLayerOpacity();\n                    var $enum1 = ss.enumerate(ss.keys(tour.get_currentTourStop().layers));\n                    while ($enum1.moveNext()) {\n                        var key = $enum1.current;\n                        var info = tour.get_currentTourStop().layers[key];\n                        if (ss.keyExists(LayerManager.get_layerList(), info.id)) {\n                            LayerManager.get_layerList()[info.id].set_opacity(info.frameOpacity);\n                            LayerManager.get_layerList()[info.id].setParams(info.frameParams);\n                        }\n                    }\n                }\n            }\n        }\n    }\n};\n\nLayerManager._draw = function (renderContext, opacity, astronomical, referenceFrame, nested, cosmos) {\n    if (!ss.keyExists(LayerManager.get_allMaps(), referenceFrame)) {\n        return;\n    }\n    var thisMap = LayerManager.get_allMaps()[referenceFrame];\n    if (!thisMap.enabled || (!ss.keyCount(thisMap.childMaps) && !thisMap.layers.length && !(thisMap.frame.showAsPoint || thisMap.frame.showOrbitPath))) {\n        return;\n    }\n    if (TourPlayer.get_playing()) {\n        var player = globalWWTControl.uiController;\n        if (player != null) {\n            var tour = player.get_tour();\n            if (tour.get_currentTourStop() != null) {\n                player.updateTweenPosition(-1);\n                tour.get_currentTourStop()._updateLayerOpacity();\n                var $enum1 = ss.enumerate(ss.keys(tour.get_currentTourStop().layers));\n                while ($enum1.moveNext()) {\n                    var key = $enum1.current;\n                    var info = tour.get_currentTourStop().layers[key];\n                    if (ss.keyExists(LayerManager.get_layerList(), info.id)) {\n                        LayerManager.get_layerList()[info.id].set_opacity(info.frameOpacity);\n                        LayerManager.get_layerList()[info.id].setParams(info.frameParams);\n                    }\n                }\n            }\n        }\n    }\n    var matOld = renderContext.get_world();\n    var matOldNonRotating = renderContext.get_worldBaseNonRotating();\n    var oldNominalRadius = renderContext.get_nominalRadius();\n    if ((thisMap.frame.reference === 18 | thisMap.frame.reference === 18) === 1) {\n        thisMap.computeFrame(renderContext);\n        if (thisMap.frame.referenceFrameType !== 1 && thisMap.frame.referenceFrameType !== 2) {\n            renderContext.set_world(Matrix3d.multiplyMatrix(thisMap.frame.worldMatrix, renderContext.get_world()));\n        } else {\n            renderContext.set_world(Matrix3d.multiplyMatrix(thisMap.frame.worldMatrix, renderContext.get_worldBaseNonRotating()));\n        }\n        renderContext.set_nominalRadius(thisMap.frame.meanRadius);\n    }\n    if (thisMap.frame.showAsPoint) {\n        // todo Draw point planet...\n        // Planets.DrawPointPlanet(renderContext.Device, new Vector3d(0, 0, 0), (float).2, thisMap.Frame.RepresentativeColor, true);\n    }\n    for (var pass = 0; pass < 2; pass++) {\n        var $enum2 = ss.enumerate(LayerManager.get_allMaps()[referenceFrame].layers);\n        while ($enum2.moveNext()) {\n            var layer = $enum2.current;\n            if ((!pass && ss.canCast(layer, ImageSetLayer)) || (pass === 1 && !(ss.canCast(layer, ImageSetLayer)))) {\n                var skipLayer = false;\n                if (!pass) {\n                    // Skip default image set layer so that it's not drawn twice\n                    skipLayer = !astronomical && (layer).get_overrideDefaultLayer();\n                }\n                if (layer.enabled && !skipLayer) {\n                    var layerStart = SpaceTimeController.utcToJulian(layer.get_startTime());\n                    var layerEnd = SpaceTimeController.utcToJulian(layer.get_endTime());\n                    var fadeIn = SpaceTimeController.utcToJulian(layer.get_startTime()) - ((layer.get_fadeType() === 1 || layer.get_fadeType() === 3) ? (layer.get_fadeSpan() / 864000000) : 0);\n                    var fadeOut = SpaceTimeController.utcToJulian(layer.get_endTime()) + ((layer.get_fadeType() === 2 || layer.get_fadeType() === 3) ? (layer.get_fadeSpan() / 864000000) : 0);\n                    if (SpaceTimeController.get_jNow() > fadeIn && SpaceTimeController.get_jNow() < fadeOut) {\n                        var fadeOpacity = 1;\n                        if (SpaceTimeController.get_jNow() < layerStart) {\n                            fadeOpacity = ((SpaceTimeController.get_jNow() - fadeIn) / (layer.get_fadeSpan() / 864000000));\n                        }\n                        if (SpaceTimeController.get_jNow() > layerEnd) {\n                            fadeOpacity = ((fadeOut - SpaceTimeController.get_jNow()) / (layer.get_fadeSpan() / 864000000));\n                        }\n                        layer.set_astronomical(astronomical);\n                        if (ss.canCast(layer, SpreadSheetLayer)) {\n                            var tsl = ss.safeCast(layer, SpreadSheetLayer);\n                            tsl.draw(renderContext, opacity * fadeOpacity, cosmos);\n                        }\n                        else {\n                            layer.draw(renderContext, opacity * fadeOpacity, cosmos);\n                        }\n                    }\n                }\n            }\n        }\n    }\n    if (nested) {\n        var $enum3 = ss.enumerate(ss.keys(LayerManager.get_allMaps()[referenceFrame].childMaps));\n        while ($enum3.moveNext()) {\n            var key = $enum3.current;\n            var map = LayerManager.get_allMaps()[referenceFrame].childMaps[key];\n            if (!(ss.canCast(map, LayerMap))) {\n                continue;\n            }\n            if (map.enabled && map.frame.showOrbitPath && Settings.get_active().get_solarSystemOrbits() && Settings.get_active().get_solarSystemMinorOrbits()) {\n                if (map.frame.referenceFrameType === 1) {\n                    if (map.frame.get_orbit() == null) {\n                        map.frame.set_orbit(new Orbit(map.frame.get_elements(), 360, map.frame.get_representativeColor(), 1, map.parent.frame.meanRadius));\n                    }\n                    var matSaved = renderContext.get_world();\n                    renderContext.set_world(Matrix3d.multiplyMatrix(thisMap.frame.worldMatrix, renderContext.get_worldBaseNonRotating()));\n                    map.frame.get_orbit().draw3D(renderContext, 1 * 0.5, Vector3d.create(0, 0, 0));\n                    renderContext.set_world(matSaved);\n                }\n                else if (map.frame.referenceFrameType === 2) {\n                }\n            }\n            if ((map.frame.reference === 18 || map.frame.reference === 19)) {\n                LayerManager._draw(renderContext, opacity, astronomical, map.get_name(), nested, cosmos);\n            }\n        }\n    }\n    renderContext.set_nominalRadius(oldNominalRadius);\n    renderContext.set_world(matOld);\n    renderContext.set_worldBaseNonRotating(matOldNonRotating);\n};\n\nLayerManager._getVisibleLayerList = function (previous) {\n    var list = {};\n    var $enum1 = ss.enumerate(ss.keys(LayerManager.get_layerList()));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var layer = LayerManager.get_layerList()[key];\n        if (layer.enabled) {\n            var info = new LayerInfo();\n            info.startOpacity = info.endOpacity = layer.get_opacity();\n            info.id = layer.id;\n            info.startParams = layer.getParams();\n            if (ss.keyExists(previous, info.id)) {\n                info.endOpacity = previous[info.id].endOpacity;\n                info.endParams = previous[info.id].endParams;\n            }\n            else {\n                info.endParams = layer.getParams();\n            }\n            list[layer.id] = info;\n        }\n    }\n    return list;\n};\n\nLayerManager.setVisibleLayerList = function (list) {\n    var $enum1 = ss.enumerate(ss.keys(LayerManager.get_layerList()));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var layer = LayerManager.get_layerList()[key];\n        layer.enabled = ss.keyExists(list, layer.id);\n        try {\n            if (layer.enabled) {\n                layer.set_opacity(list[layer.id].frameOpacity);\n                layer.setParams(list[layer.id].frameParams);\n            }\n        }\n        catch ($e2) {\n        }\n    }\n};\n\nset_setManagerVisibleLayerList(LayerManager.setVisibleLayerList);\n\nLayerManager._preDraw = function (renderContext, opacity, astronomical, referenceFrame, nested) {\n    if (!ss.keyExists(LayerManager.get_allMaps(), referenceFrame)) {\n        return;\n    }\n    var thisMap = LayerManager.get_allMaps()[referenceFrame];\n    if (!ss.keyCount(thisMap.childMaps) && !thisMap.layers.length) {\n        return;\n    }\n    if (TourPlayer.get_playing()) {\n        var player = ss.safeCast(globalWWTControl.uiController, TourPlayer);\n        if (player != null) {\n            var tour = player.get_tour();\n            if (tour.get_currentTourStop() != null) {\n                player.updateTweenPosition(-1);\n                tour.get_currentTourStop()._updateLayerOpacity();\n                var $enum1 = ss.enumerate(ss.keys(tour.get_currentTourStop().layers));\n                while ($enum1.moveNext()) {\n                    var key = $enum1.current;\n                    var info = tour.get_currentTourStop().layers[key];\n                    if (ss.keyExists(LayerManager.get_layerList(), info.id)) {\n                        LayerManager.get_layerList()[info.id].set_opacity(info.frameOpacity);\n                        LayerManager.get_layerList()[info.id].setParams(info.frameParams);\n                    }\n                }\n            }\n        }\n    }\n    var matOld = renderContext.get_world();\n    var matOldNonRotating = renderContext.get_worldBaseNonRotating();\n    var oldNominalRadius = renderContext.get_nominalRadius();\n    if (thisMap.frame.reference === 18) {\n        thisMap.computeFrame(renderContext);\n        if (thisMap.frame.referenceFrameType !== 1) {\n            renderContext.set_world(Matrix3d.multiplyMatrix(thisMap.frame.worldMatrix, renderContext.get_world()));\n        } else {\n            renderContext.set_world(Matrix3d.multiplyMatrix(thisMap.frame.worldMatrix, renderContext.get_worldBaseNonRotating()));\n        }\n        renderContext.set_nominalRadius(thisMap.frame.meanRadius);\n    }\n    for (var pass = 0; pass < 2; pass++) {\n        var $enum2 = ss.enumerate(LayerManager.get_allMaps()[referenceFrame].layers);\n        while ($enum2.moveNext()) {\n            var layer = $enum2.current;\n            if ((!pass && ss.canCast(layer, ImageSetLayer)) || (pass === 1 && !(ss.canCast(layer, ImageSetLayer)))) {\n                if (layer.enabled) {\n                    var layerStart = SpaceTimeController.utcToJulian(layer.get_startTime());\n                    var layerEnd = SpaceTimeController.utcToJulian(layer.get_endTime());\n                    var fadeIn = SpaceTimeController.utcToJulian(layer.get_startTime()) - ((layer.get_fadeType() === 1 || layer.get_fadeType() === 3) ? (layer.get_fadeSpan() / 864000000) : 0);\n                    var fadeOut = SpaceTimeController.utcToJulian(layer.get_endTime()) + ((layer.get_fadeType() === 2 || layer.get_fadeType() === 3) ? (layer.get_fadeSpan() / 864000000) : 0);\n                    if (SpaceTimeController.get_jNow() > fadeIn && SpaceTimeController.get_jNow() < fadeOut) {\n                        var fadeOpacity = 1;\n                        if (SpaceTimeController.get_jNow() < layerStart) {\n                            fadeOpacity = ((SpaceTimeController.get_jNow() - fadeIn) / (layer.get_fadeSpan() / 864000000));\n                        }\n                        if (SpaceTimeController.get_jNow() > layerEnd) {\n                            fadeOpacity = ((fadeOut - SpaceTimeController.get_jNow()) / (layer.get_fadeSpan() / 864000000));\n                        }\n                        if (!thisMap.frame.reference) {\n                            layer.set_astronomical(true);\n                        }\n                        layer.preDraw(renderContext, opacity * fadeOpacity);\n                    }\n                }\n            }\n        }\n    }\n    if (nested) {\n        var $enum3 = ss.enumerate(ss.keys(LayerManager.get_allMaps()[referenceFrame].childMaps));\n        while ($enum3.moveNext()) {\n            var key = $enum3.current;\n            var map = LayerManager.get_allMaps()[referenceFrame].childMaps[key];\n            if ((map.frame.reference === 18 || map.frame.reference === 19)) {\n                LayerManager._preDraw(renderContext, opacity, astronomical, map.get_name(), nested);\n            }\n        }\n    }\n    renderContext.set_nominalRadius(oldNominalRadius);\n    renderContext.set_world(matOld);\n    renderContext.set_worldBaseNonRotating(matOldNonRotating);\n};\n\nLayerManager.add = function (layer, updateTree) {\n    if (!ss.keyExists(LayerManager.get_layerList(), layer.id)) {\n        if (ss.keyExists(LayerManager.get_allMaps(), layer.get_referenceFrame())) {\n            LayerManager.get_layerList()[layer.id] = layer;\n            LayerManager.get_allMaps()[layer.get_referenceFrame()].layers.push(layer);\n            LayerManager._version++;\n            if (updateTree) {\n                LayerManager.loadTree();\n            }\n        }\n    }\n};\n\nLayerManager.layerSelectionChanged = function (selected) {\n    LayerManager._selectedLayer = selected;\n    if (LayerManager._selectedLayer != null) {\n        if (ss.canCast(LayerManager._selectedLayer, LayerMap)) {\n            var map = ss.safeCast(LayerManager._selectedLayer, LayerMap);\n            if (map != null) {\n                LayerManager.set_currentMap(map.get_name());\n            }\n        } else {\n            var layer = ss.safeCast(LayerManager._selectedLayer, ImageSetLayer);\n            if (layer != null && ss.canCast(layer.get_imageSet().get_wcsImage(), FitsImage)) {\n                return;\n            }\n        }\n    }\n    globalScriptInterface.setTimeSlider('left', '');\n    globalScriptInterface.setTimeSlider('right', '');\n    globalScriptInterface.setTimeSlider('title', Language.getLocalizedText(667, 'Time Scrubber'));\n};\n\n//Fits time slider not implemented for webgl engine (only Windows version)\nLayerManager.setTimeSliderValue = function (pos) {\n    var layer = ss.safeCast(LayerManager._selectedLayer, ImageSetLayer);\n    if (layer != null && ss.canCast(layer.get_imageSet().get_wcsImage(), FitsImage)) { }\n};\n\nLayerManager.showLayerMenu = function (selected, x, y) {\n    LayerManager._lastMenuClick = Vector2d.create(x, y);\n    LayerManager._selectedLayer = selected;\n    if (ss.canCast(selected, LayerMap)) {\n        LayerManager.set_currentMap((selected).get_name());\n    }\n    else if (ss.canCast(selected, Layer)) {\n        LayerManager.set_currentMap((selected).get_referenceFrame());\n    }\n    if (((ss.canCast(selected, Layer)) && !(ss.canCast(selected, SkyOverlays)))) {\n        var selectedLayer = selected;\n        LayerManager._contextMenu = new ContextMenuStrip();\n        var renameMenu = ToolStripMenuItem.create(Language.getLocalizedText(225, 'Rename'));\n        var Expand = ToolStripMenuItem.create(Language.getLocalizedText(981, 'Expand'));\n        var Collapse = ToolStripMenuItem.create(Language.getLocalizedText(982, 'Collapse'));\n        var copyMenu = ToolStripMenuItem.create(Language.getLocalizedText(428, 'Copy'));\n        var deleteMenu = ToolStripMenuItem.create(Language.getLocalizedText(167, 'Delete'));\n        var saveMenu = ToolStripMenuItem.create(Language.getLocalizedText(960, 'Save...'));\n        var publishMenu = ToolStripMenuItem.create(Language.getLocalizedText(983, 'Publish to Community...'));\n        var colorMenu = ToolStripMenuItem.create(Language.getLocalizedText(458, 'Color/Opacity'));\n        var opacityMenu = ToolStripMenuItem.create(Language.getLocalizedText(305, 'Opacity'));\n        var propertiesMenu = ToolStripMenuItem.create(Language.getLocalizedText(20, 'Properties'));\n        var scaleMenu = ToolStripMenuItem.create(Language.getLocalizedText(1291, 'Scale/Histogram'));\n        var lifeTimeMenu = ToolStripMenuItem.create(Language.getLocalizedText(683, 'Lifetime'));\n        var spacer1 = new ToolStripSeparator();\n        var top = ToolStripMenuItem.create(Language.getLocalizedText(684, 'Move to Top'));\n        var up = ToolStripMenuItem.create(Language.getLocalizedText(685, 'Move Up'));\n        var down = ToolStripMenuItem.create(Language.getLocalizedText(686, 'Move Down'));\n        var bottom = ToolStripMenuItem.create(Language.getLocalizedText(687, 'Move to Bottom'));\n        var showViewer = ToolStripMenuItem.create(Language.getLocalizedText(957, 'VO Table Viewer'));\n        var spacer2 = new ToolStripSeparator();\n        var defaultImageset = ToolStripMenuItem.create(Language.getLocalizedText(1294, 'Background Image Set'));\n        top.click = LayerManager._top_Click;\n        up.click = LayerManager._up_Click;\n        down.click = LayerManager._down_Click;\n        bottom.click = LayerManager._bottom_Click;\n        saveMenu.click = LayerManager._saveMenu_Click;\n        publishMenu.click = LayerManager._publishMenu_Click;\n        Expand.click = LayerManager._expand_Click;\n        Collapse.click = LayerManager._collapse_Click;\n        copyMenu.click = LayerManager._copyMenu_Click;\n        colorMenu.click = LayerManager._colorMenu_Click;\n        deleteMenu.click = LayerManager._deleteMenu_Click;\n        renameMenu.click = LayerManager._renameMenu_Click;\n        propertiesMenu.click = LayerManager._propertiesMenu_Click;\n        scaleMenu.click = LayerManager.scaleMenu_click;\n        defaultImageset.click = LayerManager._defaultImageset_Click;\n        opacityMenu.click = LayerManager._opacityMenu_Click;\n        lifeTimeMenu.click = LayerManager._lifeTimeMenu_Click;\n        showViewer.click = LayerManager._showViewer_Click;\n        LayerManager._contextMenu.items.push(renameMenu);\n        if (!selectedLayer.get_opened() && selectedLayer.getPrimaryUI() != null && selectedLayer.getPrimaryUI().get_hasTreeViewNodes()) {\n            LayerManager._contextMenu.items.push(Expand);\n        }\n        if (selectedLayer.get_opened()) {\n            LayerManager._contextMenu.items.push(Collapse);\n        }\n        if (selectedLayer.canCopyToClipboard()) {\n        }\n        LayerManager._contextMenu.items.push(deleteMenu);\n        LayerManager._contextMenu.items.push(spacer2);\n        LayerManager._contextMenu.items.push(colorMenu);\n        if (ss.canCast(selected, ImageSetLayer)) {\n            LayerManager._contextMenu.items.push(defaultImageset);\n            var isl = ss.safeCast(selected, ImageSetLayer);\n            defaultImageset.checked = isl.get_overrideDefaultLayer();\n        }\n        if (ss.canCast(selected, SpreadSheetLayer) || ss.canCast(selected, GreatCirlceRouteLayer)) {\n            LayerManager._contextMenu.items.push(propertiesMenu);\n        }\n        if (ss.canCast(selected, VoTableLayer)) {\n            LayerManager._contextMenu.items.push(showViewer);\n        }\n        if (ss.canCast(selected, ImageSetLayer)) {\n            var isl = ss.safeCast(selected, ImageSetLayer);\n            LayerManager._contextMenu.items.push(scaleMenu);\n        }\n        if (LayerManager.get_allMaps()[selectedLayer.get_referenceFrame()].layers.length > 1) {\n            LayerManager._contextMenu.items.push(spacer1);\n            LayerManager._contextMenu.items.push(top);\n            LayerManager._contextMenu.items.push(up);\n            LayerManager._contextMenu.items.push(down);\n            LayerManager._contextMenu.items.push(bottom);\n        }\n        LayerManager._contextMenu._show(Vector2d.create(x, y));\n    }\n    else if (ss.canCast(selected, LayerMap)) {\n        var map = ss.safeCast(selected, LayerMap);\n        var sandbox = map.frame.reference.toString() === 'Sandbox';\n        var Dome = map.frame.name === 'Dome';\n        var Sky = map.frame.name === 'Sky';\n        if (Dome) {\n            return;\n        }\n        LayerManager._contextMenu = new ContextMenuStrip();\n        var trackFrame = ToolStripMenuItem.create(Language.getLocalizedText(1298, 'Track this frame'));\n        var goTo = ToolStripMenuItem.create(Language.getLocalizedText(1299, 'Fly Here'));\n        var showOrbit = ToolStripMenuItem.create('Show Orbit');\n        var newMenu = ToolStripMenuItem.create(Language.getLocalizedText(674, 'New Reference Frame'));\n        var newLayerGroupMenu = ToolStripMenuItem.create(Language.getLocalizedText(675, 'New Layer Group'));\n        var addMenu = ToolStripMenuItem.create(Language.getLocalizedText(166, 'Add'));\n        var newLight = ToolStripMenuItem.create('Add Light');\n        var addFeedMenu = ToolStripMenuItem.create(Language.getLocalizedText(956, 'Add OData/table feed as Layer'));\n        var addWmsLayer = ToolStripMenuItem.create(Language.getLocalizedText(987, 'New WMS Layer'));\n        var addGridLayer = ToolStripMenuItem.create(Language.getLocalizedText(1300, 'New Lat/Lng Grid'));\n        var addGreatCircle = ToolStripMenuItem.create(Language.getLocalizedText(988, 'New Great Circle'));\n        var importTLE = ToolStripMenuItem.create(Language.getLocalizedText(989, 'Import Orbital Elements'));\n        var addMpc = ToolStripMenuItem.create(Language.getLocalizedText(1301, 'Add Minor Planet'));\n        var deleteFrameMenu = ToolStripMenuItem.create(Language.getLocalizedText(167, 'Delete'));\n        var pasteMenu = ToolStripMenuItem.create(Language.getLocalizedText(425, 'Paste'));\n        var addToTimeline = ToolStripMenuItem.create(Language.getLocalizedText(1290, 'Add to Timeline'));\n        var addKeyframe = ToolStripMenuItem.create(Language.getLocalizedText(1280, 'Add Keyframe'));\n        var popertiesMenu = ToolStripMenuItem.create(Language.getLocalizedText(20, 'Properties'));\n        var saveMenu = ToolStripMenuItem.create(Language.getLocalizedText(990, 'Save Layers'));\n        var publishLayers = ToolStripMenuItem.create(Language.getLocalizedText(991, 'Publish Layers to Community'));\n        var spacer1 = new ToolStripSeparator();\n        var spacer0 = new ToolStripSeparator();\n        var spacer2 = new ToolStripSeparator();\n        var asReferenceFrame = ToolStripMenuItem.create('As Reference Frame');\n        var asOrbitalLines = ToolStripMenuItem.create('As Orbital Line');\n        trackFrame.click = LayerManager._trackFrame_Click;\n        goTo.click = LayerManager._goTo_Click;\n        asReferenceFrame.click = LayerManager._addMpc_Click;\n        asOrbitalLines.click = LayerManager._asOrbitalLines_Click;\n\n        // Add Sub Menus\n        addMpc.dropDownItems.push(asReferenceFrame);\n        addMpc.dropDownItems.push(asOrbitalLines);\n        addMenu.click = LayerManager._addMenu_Click;\n        newLayerGroupMenu.click = LayerManager._newLayerGroupMenu_Click;\n        pasteMenu.click = LayerManager._pasteLayer_Click;\n        newMenu.click = LayerManager._newMenu_Click;\n        deleteFrameMenu.click = LayerManager._deleteFrameMenu_Click;\n        popertiesMenu.click = LayerManager._framePropertiesMenu_Click;\n        addGreatCircle.click = LayerManager._addGreatCircle_Click;\n        addGridLayer.click = LayerManager._addGirdLayer_Click;\n        var convertToOrbit = ToolStripMenuItem.create('Extract Orbit Layer');\n        if (map.frame.reference !== 19) {\n            if ((globalWWTControl.get_solarSystemMode() | globalWWTControl.sandboxMode) === 1) {\n                var spacerNeeded = false;\n                if (map.frame.reference !== 18 && !globalWWTControl.sandboxMode) {\n                    // fly to\n                    if (!Sky) {\n                    }\n                    try {\n                        var name = map.frame.reference.toString();\n                        if (name !== 'Sandbox') {\n                            var ssObj = Enums.parse('SolarSystemObjects', name);\n                            var id = ssObj;\n                            var bit = Math.pow(2, id);\n                            showOrbit.checked = !!(Settings.get_active().get_planetOrbitsFilter() & bit);\n                            showOrbit.click = LayerManager._showOrbitPlanet_Click;\n                            showOrbit.tag = bit.toString();\n                        }\n                    }\n                    catch ($e1) {\n                    }\n                }\n                else {\n                    // track\n                    if (!sandbox && !Sky) {\n                        LayerManager._contextMenu.items.push(trackFrame);\n                        spacerNeeded = true;\n                    }\n                    showOrbit.checked = map.frame.showOrbitPath;\n                    showOrbit.click = LayerManager._showOrbit_Click;\n                }\n                if (spacerNeeded) {\n                    LayerManager._contextMenu.items.push(spacer2);\n                }\n                if (!Sky && !sandbox) {\n                    LayerManager._contextMenu.items.push(showOrbit);\n                    LayerManager._contextMenu.items.push(spacer0);\n                }\n                if (map.frame.reference.toString() === 'Sandbox') {\n                    LayerManager._contextMenu.items.push(newLight);\n                }\n            }\n            if (!Sky) {\n                LayerManager._contextMenu.items.push(newMenu);\n            }\n        }\n        if (!Sky) {\n            LayerManager._contextMenu.items.push(addGreatCircle);\n            LayerManager._contextMenu.items.push(addGridLayer);\n        }\n        if ((map.frame.reference !== 19 && map.frame.name === 'Sun') || (map.frame.reference === 19 && map.parent != null && map.parent.frame.name === 'Sun')) {\n            LayerManager._contextMenu.items.push(addMpc);\n        }\n        if (map.frame.reference === 18 && map.frame.referenceFrameType === 1 && map.parent != null && map.parent.frame.name === 'Sun') {\n        }\n        if (!Sky) {\n        }\n        LayerManager._contextMenu.items.push(pasteMenu);\n        if (map.frame.reference === 19) {\n            LayerManager._contextMenu.items.push(deleteFrameMenu);\n        }\n        if (map.frame.reference === 18) {\n            LayerManager._contextMenu.items.push(deleteFrameMenu);\n            LayerManager._contextMenu.items.push(popertiesMenu);\n        }\n        LayerManager._contextMenu.items.push(spacer1);\n        LayerManager._contextMenu._show(Vector2d.create(x, y));\n    }\n};\n\nLayerManager._publishMenu_Click = function (sender, e) { };\n\nLayerManager._addGirdLayer_Click = function (sender, e) {\n    var layer = new GridLayer();\n    layer.enabled = true;\n    layer.set_name('Lat-Lng Grid');\n    LayerManager.get_layerList()[layer.id] = layer;\n    layer.set_referenceFrame(LayerManager._currentMap);\n    LayerManager.get_allMaps()[LayerManager._currentMap].layers.push(layer);\n    LayerManager.get_allMaps()[LayerManager._currentMap].open = true;\n    LayerManager._version++;\n    LayerManager.loadTree();\n};\n\nLayerManager._trackFrame_Click = function (sender, e) {\n    var target = LayerManager._selectedLayer;\n    globalRenderContext.set_solarSystemTrack(20);\n    globalRenderContext.set_trackingFrame(target.get_name());\n    globalRenderContext.viewCamera.zoom = globalRenderContext.targetCamera.zoom = 1E-09;\n};\n\nLayerManager._goTo_Click = function (sender, e) { };\n\nLayerManager._saveMenu_Click = function (sender, e) { };\n\nLayerManager._expand_Click = function (sender, e) { };\n\nLayerManager._collapse_Click = function (sender, e) { };\n\nLayerManager._copyMenu_Click = function (sender, e) {\n    if (LayerManager._selectedLayer != null && ss.canCast(LayerManager._selectedLayer, Layer)) {\n        var node = LayerManager._selectedLayer;\n        node.copyToClipboard();\n    }\n};\n\nLayerManager._newLayerGroupMenu_Click = function (sender, e) { };\n\nLayerManager._importTLEFile = function (filename) { };\n\nLayerManager._makeLayerGroupNow = function (name) {\n    var target = LayerManager._selectedLayer;\n    LayerManager._makeLayerGroup(name, target);\n};\n\nLayerManager._makeLayerGroup = function (name, target) {\n    var frame = new ReferenceFrame();\n    frame.name = name;\n    frame.reference = 19;\n    var newMap = new LayerMap(frame.name, 19);\n    newMap.frame = frame;\n    newMap.frame._systemGenerated = false;\n    target.addChild(newMap);\n    newMap.frame.parent = target.get_name();\n    LayerManager.get_allMaps()[frame.name] = newMap;\n    LayerManager._version++;\n};\n\nLayerManager._lifeTimeMenu_Click = function (sender, e) { };\n\nLayerManager._deleteFrameMenu_Click = function (sender, e) { };\n\nLayerManager._framePropertiesMenu_Click = function (sender, e) {\n    var target = LayerManager._selectedLayer;\n    LayerManager.get_referenceFramePropsDialog().show(target.frame, e);\n};\n\nLayerManager._newMenu_Click = function (sender, e) {\n    var frame = new ReferenceFrame();\n    LayerManager.get_frameWizardDialog().show(frame, e);\n};\n\nLayerManager.referenceFrameWizardFinished = function (frame) {\n    var target = LayerManager._selectedLayer;\n    var newMap = new LayerMap(frame.name, 18);\n    if (!ss.keyExists(LayerManager.get_allMaps(), frame.name)) {\n        newMap.frame = frame;\n        target.addChild(newMap);\n        newMap.frame.parent = target.get_name();\n        LayerManager.get_allMaps()[frame.name] = newMap;\n        LayerManager._version++;\n        LayerManager.loadTree();\n    }\n};\n\nLayerManager.pasteFromTle = function (lines, frame) {\n    var line1 = '';\n    var line2 = '';\n    for (var i = 0; i < lines.length; i++) {\n        lines[i] = ss.trim(lines[i]);\n        if (lines[i].length === 69 && ReferenceFrame.isTLECheckSumGood(lines[i])) {\n            if (!line1.length && lines[i].substring(0, 1) === '1') {\n                line1 = lines[i];\n            }\n            if (!line2.length && lines[i].substring(0, 1) === '2') {\n                line2 = lines[i];\n            }\n        }\n    }\n    if (line1.length === 69 && line2.length === 69) {\n        frame.fromTLE(line1, line2, 398600441800000);\n        return true;\n    }\n    return false;\n};\n\nLayerManager._opacityMenu_Click = function (sender, e) { };\n\nLayerManager._defaultImageset_Click = function (sender, e) {\n    var isl = ss.safeCast(LayerManager._selectedLayer, ImageSetLayer);\n    isl.set_overrideDefaultLayer(!isl.get_overrideDefaultLayer());\n};\n\nLayerManager._propertiesMenu_Click = function (sender, e) {\n    if (ss.canCast(LayerManager._selectedLayer, SpreadSheetLayer)) {\n        var target = LayerManager._selectedLayer;\n        LayerManager.get_dataVizWizardDialog().show(target, e);\n    }\n    if (ss.canCast(LayerManager._selectedLayer, GreatCirlceRouteLayer)) {\n        LayerManager.get_greatCircleDlg().show(LayerManager._selectedLayer, new ss.EventArgs());\n    }\n};\n\nLayerManager._renameMenu_Click = function (sender, e) {\n    var layer = LayerManager._selectedLayer;\n    var input = new SimpleInput(Language.getLocalizedText(225, 'Rename'), Language.getLocalizedText(228, 'New Name'), layer.get_name(), 32);\n    input.show(LayerManager._lastMenuClick, function () {\n        if (!ss.emptyString(input.text)) {\n            layer.set_name(input.text);\n            LayerManager._version++;\n            LayerManager.loadTree();\n        }\n    });\n};\n\nLayerManager._colorMenu_Click = function (sender, e) {\n    var layer = LayerManager._selectedLayer;\n    var picker = new ColorPicker();\n    if (layer.get_color() != null) {\n        picker.color = layer.get_color();\n    }\n    picker.callBack = function () {\n        layer.set_color(picker.color);\n    };\n    picker.show(e);\n};\n\nLayerManager._addMenu_Click = function (sender, e) { };\n\nLayerManager._deleteMenu_Click = function (sender, e) {\n    LayerManager._deleteSelectedLayer();\n};\n\nLayerManager._deleteSelectedLayer = function () {\n    if (LayerManager._selectedLayer != null && ss.canCast(LayerManager._selectedLayer, Layer)) {\n        var node = LayerManager._selectedLayer;\n        delete LayerManager.get_layerList()[node.id];\n        ss.remove(LayerManager.get_allMaps()[LayerManager.get_currentMap()].layers, node);\n        node.cleanUp();\n        node.set_version(node.get_version() + 1) - 1;\n        LayerManager.loadTree();\n        LayerManager._version++;\n    }\n};\n\nLayerManager.scaleMenu_click = function (sender, e) {\n    var isl = ss.safeCast(LayerManager._selectedLayer, ImageSetLayer);\n    if (isl != null) {\n        var hist = new Histogram();\n        hist.image = isl.getFitsImage();\n        hist.layer = isl;\n        hist.show(Vector2d.create(200, 200));\n    }\n};\n\nLayerManager._showViewer_Click = function (sender, e) {\n    if (ss.canCast(LayerManager._selectedLayer, VoTableLayer)) {\n        var layer = ss.safeCast(LayerManager._selectedLayer, VoTableLayer);\n        globalScriptInterface.displayVoTableLayer(layer);\n    }\n};\n\nLayerManager._bottom_Click = function (sender, e) {\n    var layer = ss.safeCast(LayerManager._selectedLayer, Layer);\n    if (layer != null) {\n        ss.remove(LayerManager.get_allMaps()[layer.get_referenceFrame()].layers, layer);\n        LayerManager.get_allMaps()[layer.get_referenceFrame()].layers.push(layer);\n    }\n    LayerManager._version++;\n    LayerManager.loadTree();\n};\n\nLayerManager._down_Click = function (sender, e) {\n    var layer = ss.safeCast(LayerManager._selectedLayer, Layer);\n    if (layer != null) {\n        var index = LayerManager.get_allMaps()[layer.get_referenceFrame()].layers.lastIndexOf(layer);\n        if (index < (LayerManager.get_allMaps()[layer.get_referenceFrame()].layers.length - 1)) {\n            ss.remove(LayerManager.get_allMaps()[layer.get_referenceFrame()].layers, layer);\n            LayerManager.get_allMaps()[layer.get_referenceFrame()].layers.splice(index + 1, 0, layer);\n        }\n    }\n    LayerManager._version++;\n    LayerManager.loadTree();\n};\n\nLayerManager._up_Click = function (sender, e) {\n    var layer = ss.safeCast(LayerManager._selectedLayer, Layer);\n    if (layer != null) {\n        var index = LayerManager.get_allMaps()[layer.get_referenceFrame()].layers.lastIndexOf(layer);\n        if (index > 0) {\n            ss.remove(LayerManager.get_allMaps()[layer.get_referenceFrame()].layers, layer);\n            LayerManager.get_allMaps()[layer.get_referenceFrame()].layers.splice(index - 1, 0, layer);\n        }\n    }\n    LayerManager._version++;\n    LayerManager.loadTree();\n};\n\nLayerManager._top_Click = function (sender, e) {\n    var layer = ss.safeCast(LayerManager._selectedLayer, Layer);\n    if (layer != null) {\n        ss.remove(LayerManager.get_allMaps()[layer.get_referenceFrame()].layers, layer);\n        LayerManager.get_allMaps()[layer.get_referenceFrame()].layers.splice(0, 0, layer);\n    }\n    LayerManager._version++;\n    LayerManager.loadTree();\n};\n\nLayerManager._pasteLayer_Click = function (sender, e) {\n    LayerManager.get_dataVizWizardDialog().show(LayerManager.get_currentMap(), e);\n};\n\nLayerManager.createSpreadsheetLayer = function (frame, name, data) {\n    var layer = new SpreadSheetLayer();\n    layer.loadFromString(data, false, false, false, true);\n    layer.set_name(name);\n    LayerManager.addSpreadsheetLayer(layer, frame);\n    return layer;\n};\n\nLayerManager.addSpreadsheetLayer = function (layer, frame) {\n    layer.enabled = true;\n    layer.set_referenceFrame(frame);\n    LayerManager.add(layer, true);\n};\n\nLayerManager._showOrbitPlanet_Click = function (sender, e) {\n    try {\n        var bit = parseInt((sender).tag.toString());\n        // Flip the state\n        if (!(Settings.get_globalSettings().get_planetOrbitsFilter() & bit)) {\n            Settings.get_globalSettings().set_planetOrbitsFilter(Settings.get_globalSettings().get_planetOrbitsFilter() | bit);\n        } else {\n            Settings.get_globalSettings().set_planetOrbitsFilter(Settings.get_globalSettings().get_planetOrbitsFilter() & ~bit);\n        }\n    }\n    catch ($e1) { }\n};\n\nLayerManager._showOrbit_Click = function (sender, e) {\n    // Flip the state\n    var map = ss.safeCast(LayerManager._selectedLayer, LayerMap);\n    map.frame.showOrbitPath = !map.frame.showOrbitPath;\n};\n\nLayerManager._addGreatCircle_Click = function (sender, e) {\n    LayerManager._addGreatCircleLayer();\n};\n\nLayerManager._addMpc_Click = function (sender, e) {\n    var target = LayerManager._selectedLayer;\n    var input = new SimpleInput(Language.getLocalizedText(1302, 'Minor planet name or designation'), Language.getLocalizedText(238, 'Name'), '', 32);\n    var retry = false;\n    do {\n        if (input.showDialog() === 1) {\n            if (ss.keyExists(target.childMaps, input.text)) {\n                retry = true;\n            }\n            else {\n                try {\n                    LayerManager._getMpc(input.text, target);\n                    retry = false;\n                }\n                catch ($e1) {\n                    retry = true;\n                }\n            }\n        } else {\n            retry = false;\n        }\n    } while (retry);\n    return;\n};\n\nLayerManager._asOrbitalLines_Click = function (sender, e) {\n    var target = LayerManager._selectedLayer;\n    var input = new SimpleInput(Language.getLocalizedText(1302, 'Minor planet name or designation'), Language.getLocalizedText(238, 'Name'), '', 32);\n    input.show(Cursor.get_position(), function () {\n        if (ss.keyExists(target.childMaps, input.text)) {\n        } else {\n            LayerManager._getMpcAsTLE(input.text, target);\n        }\n    });\n};\n\nLayerManager._getMpcAsTLE = function (id, target) {\n    var file = new WebFile('https://www.minorplanetcenter.net/db_search/show_object?object_id=' + id);\n    file.onStateChange = function () {\n        if (file.get_state() !== 1) {\n            return;\n        }\n        var data = file.getText();\n        var startform = data.indexOf('show-orbit-button');\n        var lastForm = data.indexOf('/form', startform);\n        var formpart = data.substring(startform, lastForm);\n        var name = id;\n        var frame = new ReferenceFrame();\n        frame.oblateness = 0;\n        frame.showOrbitPath = true;\n        frame.showAsPoint = true;\n        frame.epoch = SpaceTimeController.utcToJulian(ss.date(LayerManager._getValueByID(formpart, 'epoch').substring(0, 10)));\n        frame.semiMajorAxis = parseFloat(LayerManager._getValueByID(formpart, 'a')) * 149598000 * 1000;\n        frame.referenceFrameType = 1;\n        frame.inclination = parseFloat(LayerManager._getValueByID(formpart, 'incl'));\n        frame.longitudeOfAscendingNode = parseFloat(LayerManager._getValueByID(formpart, 'node'));\n        frame.eccentricity = parseFloat(LayerManager._getValueByID(formpart, 'e'));\n        frame.meanAnomolyAtEpoch = parseFloat(LayerManager._getValueByID(formpart, 'm'));\n        frame.meanDailyMotion = ELL.meanMotionFromSemiMajorAxis(parseFloat(LayerManager._getValueByID(formpart, 'a')));\n        frame.argumentOfPeriapsis = parseFloat(LayerManager._getValueByID(formpart, 'peri'));\n        frame.scale = 1;\n        frame.semiMajorAxisUnits = 1;\n        frame.meanRadius = 10;\n        frame.oblateness = 0;\n        var TLE = name + '\\n' + frame.toTLE();\n        LayerManager._loadOrbitsFile(id, TLE, target.get_name());\n        LayerManager.loadTree();\n    };\n    file.send();\n};\n\nLayerManager._getMpc = function (id, target) {\n    var file = new WebFile('https://www.minorplanetcenter.net/db_search/show_object?object_id=' + id);\n    file.onStateChange = function () {\n        var data = file.getText();\n        var startform = data.indexOf('show-orbit-button');\n        var lastForm = data.indexOf('/form', startform);\n        var formpart = data.substring(startform, lastForm);\n        var name = id;\n        var orbit = new LayerMap(ss.trim(name), 18);\n        orbit.frame.oblateness = 0;\n        orbit.frame.showOrbitPath = true;\n        orbit.frame.showAsPoint = true;\n        orbit.frame.epoch = SpaceTimeController.utcToJulian(ss.date(LayerManager._getValueByID(formpart, 'epoch').substring(0, 10)));\n        orbit.frame.semiMajorAxis = parseFloat(LayerManager._getValueByID(formpart, 'a')) * 149598000 * 1000;\n        orbit.frame.referenceFrameType = 1;\n        orbit.frame.inclination = parseFloat(LayerManager._getValueByID(formpart, 'incl'));\n        orbit.frame.longitudeOfAscendingNode = parseFloat(LayerManager._getValueByID(formpart, 'node'));\n        orbit.frame.eccentricity = parseFloat(LayerManager._getValueByID(formpart, 'e'));\n        orbit.frame.meanAnomolyAtEpoch = parseFloat(LayerManager._getValueByID(formpart, 'm'));\n        orbit.frame.meanDailyMotion = ELL.meanMotionFromSemiMajorAxis(parseFloat(LayerManager._getValueByID(formpart, 'a')));\n        orbit.frame.argumentOfPeriapsis = parseFloat(LayerManager._getValueByID(formpart, 'peri'));\n        orbit.frame.scale = 1;\n        orbit.frame.semiMajorAxisUnits = 1;\n        orbit.frame.meanRadius = 10;\n        orbit.frame.oblateness = 0;\n        if (!ss.keyExists(LayerManager.get_allMaps()[target.get_name()].childMaps, ss.trim(name))) {\n            LayerManager.get_allMaps()[target.get_name()].addChild(orbit);\n        }\n        LayerManager.get_allMaps()[orbit.get_name()] = orbit;\n        orbit.frame.parent = target.get_name();\n        LayerManager._makeLayerGroup('Minor Planet', orbit);\n        LayerManager.loadTree();\n    };\n};\n\nLayerManager._getValueByID = function (data, id) {\n    var valStart = data.indexOf('id=\"' + id + '\"');\n    valStart = data.indexOf('value=', valStart) + 7;\n    var valEnd = data.indexOf('\"', valStart);\n    return data.substr(valStart, valEnd - valStart);\n};\n\nLayerManager._addGreatCircleLayer = function () {\n    var layer = new GreatCirlceRouteLayer();\n    var camera = globalRenderContext.viewCamera;\n    layer.set_latStart(camera.lat);\n    layer.set_latEnd(camera.lat - 5);\n    layer.set_lngStart(camera.lng);\n    layer.set_lngEnd(camera.lng + 5);\n    layer.set_width(4);\n    layer.enabled = true;\n    layer.set_name(Language.getLocalizedText(1144, 'Great Circle Route'));\n    LayerManager.get_layerList()[layer.id] = layer;\n    layer.set_referenceFrame(LayerManager._currentMap);\n    LayerManager.get_allMaps()[LayerManager._currentMap].layers.push(layer);\n    LayerManager.get_allMaps()[LayerManager._currentMap].open = true;\n    LayerManager._version++;\n    LayerManager.loadTree();\n    LayerManager.get_greatCircleDlg().show(layer, new ss.EventArgs());\n};\n\nLayerManager._loadOrbitsFile = function (name, data, currentMap) {\n    var layer = new OrbitLayer();\n    layer.loadString(data);\n    layer.enabled = true;\n    layer.set_name(name);\n    LayerManager.get_layerList()[layer.id] = layer;\n    layer.set_referenceFrame(currentMap);\n    LayerManager.get_allMaps()[currentMap].layers.push(layer);\n    LayerManager.get_allMaps()[currentMap].open = true;\n    LayerManager._version++;\n    LayerManager.loadTree();\n    return layer;\n};\n\nvar LayerManager$ = {};\n\nregisterType(\"LayerManager\", [LayerManager, LayerManager$, null]);\n\n\n// wwtlib.LayerMap\n\nexport function LayerMap(name, reference) {\n    this.childMaps = {};\n    this.parent = null;\n    this.layers = [];\n    this.open = false;\n    this.enabled = true;\n    this.loadedFromTour = false;\n    this.frame = new ReferenceFrame();\n    this.set_name(name);\n    this.frame.reference = reference;\n    var radius = 6371000;\n    switch (reference) {\n        case 0:\n            break;\n        case 1:\n            break;\n        case 2:\n            break;\n        case 3:\n            radius = 696000000;\n            break;\n        case 4:\n            radius = 2439700;\n            break;\n        case 5:\n            radius = 6051800;\n            break;\n        case 6:\n            radius = 6371000;\n            break;\n        case 7:\n            radius = 3390000;\n            break;\n        case 8:\n            radius = 69911000;\n            break;\n        case 9:\n            radius = 58232000;\n            break;\n        case 10:\n            radius = 25362000;\n            break;\n        case 11:\n            radius = 24622000;\n            break;\n        case 12:\n            radius = 1161000;\n            break;\n        case 13:\n            radius = 1737100;\n            break;\n        case 14:\n            radius = 1821500;\n            break;\n        case 15:\n            radius = 1561000;\n            break;\n        case 16:\n            radius = 2631200;\n            break;\n        case 17:\n            radius = 2410300;\n            break;\n        case 18:\n            break;\n        case 19:\n            break;\n        default:\n            break;\n    }\n    this.frame.meanRadius = radius;\n}\n\nvar LayerMap$ = {\n    addChild: function (child) {\n        child.parent = this;\n        this.childMaps[child.get_name()] = child;\n    },\n\n    get_name: function () {\n        return this.frame.name;\n    },\n\n    set_name: function (value) {\n        this.frame.name = value;\n        return value;\n    },\n\n    computeFrame: function (renderContext) {\n        if (this.frame.reference === 18) {\n            this.frame.computeFrame(renderContext);\n        }\n    },\n\n    toString: function () {\n        return this.get_name();\n    }\n};\n\nregisterType(\"LayerMap\", [LayerMap, LayerMap$, null]);\n\n\n// wwtlib.SkyOverlays\n\nexport function SkyOverlays() { }\n\nvar SkyOverlays$ = {};\n\nregisterType(\"SkyOverlays\", [SkyOverlays, SkyOverlays$, null]);\n\n\n// wwtlib.GroundOverlayLayer\n\nexport function GroundOverlayLayer() { }\n\nvar GroundOverlayLayer$ = {};\n\nregisterType(\"GroundOverlayLayer\", [GroundOverlayLayer, GroundOverlayLayer$, null]);\n\n\n// wwtlib.FrameTarget\n\nexport function FrameTarget() { }\n\nvar FrameTarget$ = {};\n\nregisterType(\"FrameTarget\", [FrameTarget, FrameTarget$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A framework for constructing UIs associated with specific layers. Largely\n// unused in the web engine context.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { Colors } from \"../color.js\";\n\n\n// wwtlib.LayerUI\n\nexport function LayerUI() { }\n\nLayerUI._type = null;\n\nvar LayerUI$ = {\n    get_hasTreeViewNodes: function () {\n        return false;\n    },\n\n    getTreeNodes: function () {\n        return null;\n    },\n\n    getNodeContextMenu: function (node) {\n        return null;\n    },\n\n    setUICallbacks: function (callbacks) { }\n};\n\nregisterType(\"LayerUI\", [LayerUI, LayerUI$, null]);\n\n\n// wwtlib.LayerUIMenuItem\n\nexport function LayerUIMenuItem() {\n    this._tag = null;\n    this._isChecked = false;\n    this._isEnabled = true;\n    this._subMenus = null;\n}\n\nvar LayerUIMenuItem$ = {\n    get_name: function () {\n        return this._name;\n    },\n\n    set_name: function (value) {\n        this._name = value;\n        return value;\n    },\n\n    get_tag: function () {\n        return this._tag;\n    },\n\n    set_tag: function (value) {\n        this._tag = value;\n        return value;\n    },\n\n    get_checked: function () {\n        return this._isChecked;\n    },\n\n    set_checked: function (value) {\n        this._isChecked = value;\n        return value;\n    },\n\n    get_enabled: function () {\n        return this._isEnabled;\n    },\n\n    set_enabled: function (value) {\n        this._isEnabled = value;\n        return value;\n    },\n\n    add_menuItemSelected: function (value) {\n        this.__menuItemSelected = ss.bindAdd(this.__menuItemSelected, value);\n    },\n\n    remove_menuItemSelected: function (value) {\n        this.__menuItemSelected = ss.bindSub(this.__menuItemSelected, value);\n    },\n\n    fireMenuItemSelected: function () {\n        if (this.__menuItemSelected != null) {\n            this.__menuItemSelected(this);\n        }\n    },\n\n    get_subMenus: function () {\n        if (this._subMenus == null) {\n            this._subMenus = [];\n        }\n        return this._subMenus;\n    }\n};\n\nregisterType(\"LayerUIMenuItem\", [LayerUIMenuItem, LayerUIMenuItem$, null]);\n\n\n// wwtlib.LayerUITreeNode\n\nexport function LayerUITreeNode() {\n    this._parent = null;\n    this._level = 0;\n    this._open = false;\n    this._isChecked = false;\n    this._bold = false;\n    this._color = Colors.get_white();\n    this._nodes = null;\n}\n\nvar LayerUITreeNode$ = {\n    add_nodeChecked: function (value) {\n        this.__nodeChecked = ss.bindAdd(this.__nodeChecked, value);\n    },\n\n    remove_nodeChecked: function (value) {\n        this.__nodeChecked = ss.bindSub(this.__nodeChecked, value);\n    },\n\n    fireNodeChecked: function (newState) {\n        if (this.__nodeChecked != null) {\n            this.__nodeChecked(this, newState);\n        }\n    },\n\n    add_nodeUpdated: function (value) {\n        this.__nodeUpdated = ss.bindAdd(this.__nodeUpdated, value);\n    },\n\n    remove_nodeUpdated: function (value) {\n        this.__nodeUpdated = ss.bindSub(this.__nodeUpdated, value);\n    },\n\n    fireNodeUpdated: function () {\n        if (this.__nodeUpdated != null) {\n            this.__nodeUpdated(this);\n        }\n    },\n\n    add_nodeSelected: function (value) {\n        this.__nodeSelected = ss.bindAdd(this.__nodeSelected, value);\n    },\n\n    remove_nodeSelected: function (value) {\n        this.__nodeSelected = ss.bindSub(this.__nodeSelected, value);\n    },\n\n    fireNodeSelected: function () {\n        if (this.__nodeSelected != null) {\n            this.__nodeSelected(this);\n        }\n    },\n\n    add_nodeActivated: function (value) {\n        this.__nodeActivated = ss.bindAdd(this.__nodeActivated, value);\n    },\n\n    remove_nodeActivated: function (value) {\n        this.__nodeActivated = ss.bindSub(this.__nodeActivated, value);\n    },\n\n    fireNodeActivated: function () {\n        if (this.__nodeActivated != null) {\n            this.__nodeActivated(this);\n        }\n    },\n\n    get_name: function () {\n        return this._name;\n    },\n\n    set_name: function (value) {\n        if (this._name !== value) {\n            this._name = value;\n            this.fireNodeUpdated();\n        }\n        return value;\n    },\n\n    get_parent: function () {\n        return this._parent;\n    },\n\n    set_parent: function (value) {\n        this._parent = value;\n        return value;\n    },\n\n    get_level: function () {\n        return this._level;\n    },\n\n    set_level: function (value) {\n        this._level = value;\n        return value;\n    },\n\n    get_tag: function () {\n        return this._tag;\n    },\n\n    set_tag: function (value) {\n        this._tag = value;\n        return value;\n    },\n\n    get_referenceTag: function () {\n        return this._referenceTag;\n    },\n\n    set_referenceTag: function (value) {\n        this._referenceTag = value;\n        return value;\n    },\n\n    get_opened: function () {\n        return this._open;\n    },\n\n    set_opened: function (value) {\n        if (this._open !== value) {\n            this._open = value;\n            this.fireNodeUpdated();\n        }\n        return value;\n    },\n\n    get_checked: function () {\n        return this._isChecked;\n    },\n\n    set_checked: function (value) {\n        if (this._isChecked !== value) {\n            this._isChecked = value;\n            this.fireNodeUpdated();\n        }\n        return value;\n    },\n\n    get_bold: function () {\n        return this._bold;\n    },\n\n    set_bold: function (value) {\n        if (this._bold !== value) {\n            this._bold = value;\n            this.fireNodeUpdated();\n        }\n        return value;\n    },\n\n    get_color: function () {\n        return this._color;\n    },\n\n    set_color: function (value) {\n        if (this._color !== value) {\n            this._color = value;\n            this.fireNodeUpdated();\n        }\n        return value;\n    },\n\n    add: function (name) {\n        var node = new LayerUITreeNode();\n        node.set_name(name);\n        node.set_parent(this);\n        node.set_level(this.get_level() + 1);\n        this.get_nodes().push(node);\n        return node;\n    },\n\n    get_nodes: function () {\n        if (this._nodes == null) {\n            this._nodes = [];\n        }\n        return this._nodes;\n    }\n};\n\nregisterType(\"LayerUITreeNode\", [LayerUITreeNode, LayerUITreeNode$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Types defining UI elements associated with the layer manager.\n//\n// These don't do anything in the web client, but to preserve API compatibility,\n// we keep them hanging around.\n\nimport { registerType } from \"../typesystem.js\";\nimport { Dialog } from \"../utilities/dialog.js\";\nimport { LayerManager } from \"./layer_manager.js\";\n\n\n// wwtlib.FrameWizard\n//\n// This was originally defined in `Utilities/Dialog.cs`.\n\nexport function FrameWizard() {\n    Dialog.call(this);\n}\n\nvar FrameWizard$ = {\n    OK: function (frame) {\n        LayerManager.referenceFrameWizardFinished(frame);\n    }\n};\n\nregisterType(\"FrameWizard\", [FrameWizard, FrameWizard$, Dialog]);\n\n\n// wwtlib.ReferenceFrameProps\n//\n// This was originally defined in `Utilities/Dialog.cs`.\n\nexport function ReferenceFrameProps() {\n    Dialog.call(this);\n}\n\nvar ReferenceFrameProps$ = {\n    OK: function (frame) {\n        LayerManager.loadTree();\n    }\n};\n\nregisterType(\"ReferenceFrameProps\", [ReferenceFrameProps, ReferenceFrameProps$, Dialog]);\n\n\n// wwtlib.GreatCircleDialog\n//\n// This was originally defined in `Utilities/Dialog.cs`.\n\nexport function GreatCircleDialog() {\n    Dialog.call(this);\n}\n\nvar GreatCircleDialog$ = {\n    OK: function (frame) { }\n};\n\nregisterType(\"GreatCircleDialog\", [GreatCircleDialog, GreatCircleDialog$, Dialog]);\n\n\n// wwtlib.DataVizWizard\n//\n// This was originally defined in `Utilities/Dialog.cs`.\n\nexport function DataVizWizard() {\n    Dialog.call(this);\n}\n\nvar DataVizWizard$ = {\n    OK: function () { }\n};\n\nregisterType(\"DataVizWizard\", [DataVizWizard, DataVizWizard$, Dialog]);\n\n\n// Initialize:\n\nLayerManager._frameWizardDialog = new FrameWizard();\nLayerManager._dataVizWizardDialog = new DataVizWizard();\nLayerManager._referenceFramePropsDialog = new ReferenceFrameProps();\nLayerManager._greatCircleDialog = new GreatCircleDialog();\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A layer adding a 3D object model, and supporting code.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { Color, Colors } from \"../color.js\";\nimport {\n    Vector2d,\n    Vector3d,\n    Matrix3d,\n    PositionNormalTextured,\n    PositionNormalTexturedTangent,\n    SphereHull,\n    ConvexHull,\n} from \"../double3d.js\";\nimport { globalRenderContext } from \"../render_globals.js\";\nimport { WEBGL } from \"../graphics/webgl_constants.js\";\nimport { Dates, LineList, TriangleList } from \"../graphics/primitives3d.js\";\nimport { IndexBuffer, PositionNormalTexturedVertexBuffer, PositionNormalTexturedTangentVertexBuffer } from \"../graphics/gl_buffers.js\";\nimport { ModelShader } from \"../graphics/shaders.js\";\nimport { BinaryReader } from \"../utilities/binary_reader.js\";\nimport { BasePlanets } from \"../baseplanets.js\";\nimport { IUiController } from \"../interfaces.js\";\nimport { Settings } from \"../settings.js\";\nimport { Cursor, Cursors } from \"../util.js\";\nimport { Layer } from \"./layer.js\";\nimport { LayerUI, LayerUITreeNode } from \"./layer_ui.js\";\n\n\n// wwtlib.Material\n//\n// This was defined in `RenderContext.cs` in the C# code, but that really didn't\n// make any sense, so we've moved it here.\n\nexport function Material() {\n    this.specularSharpness = 0;\n    this.opacity = 0;\n    this.isDefault = false;\n}\n\nvar Material$ = {};\n\nregisterType(\"Material\", [Material, Material$, null]);\n\n\n// wwtlib.Object3dLayer\n\nexport function Object3dLayer() {\n    this._primaryUI$1 = null;\n    this._heading$1 = 0;\n    this._flipV$1 = true;\n    this._flipHandedness$1 = false;\n    this._smooth$1 = true;\n    this._twoSidedGeometry$1 = false;\n    this._pitch$1 = 0;\n    this._roll$1 = 0;\n    this._scale$1 = Vector3d.create(1, 1, 1);\n    this._translate$1 = Vector3d.create(0, 0, 0);\n    this._lightID$1 = 0;\n    this._dirty$1 = false;\n    this.objType = false;\n    this._xHandle$1 = new Vector2d();\n    this._yHandle$1 = new Vector2d();\n    this._zHandle$1 = new Vector2d();\n    this._hprHandles$1 = new Array(6);\n    this._uiScale$1 = 1;\n    this._showEditUi$1 = false;\n    this._dragMode$1 = 0;\n    this._pntDown$1 = new Vector2d();\n    this._valueOnDown$1 = 0;\n    this._valueOnDown2$1 = 0;\n    this._hitDist$1 = 20;\n    this._lockPreferedAxis$1 = false;\n    this._preferY$1 = false;\n    Layer.call(this);\n}\n\nObject3dLayer._translateUI$1 = null;\nObject3dLayer._translateUILines$1 = null;\nObject3dLayer._scaleUI$1 = null;\nObject3dLayer._rotateUi$1 = null;\n\nObject3dLayer._initTranslateUI$1 = function () {\n    Object3dLayer._translateUILines$1 = new LineList();\n    Object3dLayer._translateUILines$1.timeSeries = false;\n    Object3dLayer._translateUILines$1.set_depthBuffered(false);\n    Object3dLayer._translateUILines$1.showFarSide = true;\n    Object3dLayer._translateUI$1 = new TriangleList();\n    Object3dLayer._translateUI$1.depthBuffered = false;\n    Object3dLayer._translateUI$1.timeSeries = false;\n    Object3dLayer._translateUI$1.writeZbuffer = false;\n    var twoPi = Math.PI * 2;\n    var step = twoPi / 45;\n    var rad = 0.05;\n\n    // X\n\n    for (var a = 0; a < twoPi; a += step) {\n        var pnt1 = Vector3d.create(1 - rad * 4, 0, 0);\n        var pnt2 = Vector3d.create(1 - rad * 4, Math.cos(a) * rad, Math.sin(a) * rad);\n        var pnt3 = Vector3d.create(1 - rad * 4, Math.cos(a + step) * rad, Math.sin(a + step) * rad);\n        Object3dLayer._translateUI$1.addTriangle(pnt1, pnt2, pnt3, Colors.get_red(), Dates.empty());\n    }\n    for (var a = 0; a < twoPi; a += step) {\n        var pnt1 = Vector3d.create(1, 0, 0);\n        var pnt3 = Vector3d.create(1 - rad * 4, Math.cos(a) * rad, Math.sin(a) * rad);\n        var pnt2 = Vector3d.create(1 - rad * 4, Math.cos(a + step) * rad, Math.sin(a + step) * rad);\n        Object3dLayer._translateUI$1.addTriangle(pnt1, pnt2, pnt3, Color.fromArgb(255, 255, Math.max(0, (Math.sin(a) * 128)), Math.max(0, (Math.sin(a) * 128))), Dates.empty());\n    }\n    Object3dLayer._translateUILines$1.addLine(Vector3d.create(0, 0, 0), Vector3d.create(1, 0, 0), Colors.get_red(), Dates.empty());\n\n    // Y\n\n    for (var a = 0; a < twoPi; a += step) {\n        var pnt1 = Vector3d.create(0, 1 - rad * 4, 0);\n        var pnt3 = Vector3d.create(Math.cos(a) * rad, 1 - rad * 4, Math.sin(a) * rad);\n        var pnt2 = Vector3d.create(Math.cos(a + step) * rad, 1 - rad * 4, Math.sin(a + step) * rad);\n        Object3dLayer._translateUI$1.addTriangle(pnt1, pnt2, pnt3, Colors.get_green(), Dates.empty());\n    }\n    for (var a = 0; a < twoPi; a += step) {\n        var pnt1 = Vector3d.create(0, 1, 0);\n        var pnt2 = Vector3d.create(Math.cos(a) * rad, 1 - rad * 4, Math.sin(a) * rad);\n        var pnt3 = Vector3d.create(Math.cos(a + step) * rad, 1 - rad * 4, Math.sin(a + step) * rad);\n        Object3dLayer._translateUI$1.addTriangle(pnt1, pnt2, pnt3, Color.fromArgb(255, Math.max(0, (Math.sin(a) * 128)), 255, Math.max(0, (Math.sin(a) * 128))), Dates.empty());\n    }\n    Object3dLayer._translateUILines$1.addLine(Vector3d.create(0, 0, 0), Vector3d.create(0, 1, 0), Colors.get_green(), Dates.empty());\n\n    // Z\n\n    for (var a = 0; a < twoPi; a += step) {\n        var pnt1 = Vector3d.create(0, 0, 1 - rad * 4);\n        var pnt2 = Vector3d.create(Math.cos(a) * rad, Math.sin(a) * rad, 1 - rad * 4);\n        var pnt3 = Vector3d.create(Math.cos(a + step) * rad, Math.sin(a + step) * rad, 1 - rad * 4);\n        Object3dLayer._translateUI$1.addTriangle(pnt1, pnt2, pnt3, Colors.get_blue(), Dates.empty());\n    }\n    for (var a = 0; a < twoPi; a += step) {\n        var pnt1 = Vector3d.create(0, 0, 1);\n        var pnt3 = Vector3d.create(Math.cos(a) * rad, Math.sin(a) * rad, 1 - rad * 4);\n        var pnt2 = Vector3d.create(Math.cos(a + step) * rad, Math.sin(a + step) * rad, 1 - rad * 4);\n        Object3dLayer._translateUI$1.addTriangle(pnt1, pnt2, pnt3, Color.fromArgb(255, Math.max(0, (Math.sin(a) * 128)), Math.max(0, (Math.sin(a) * 128)), 255), Dates.empty());\n    }\n    Object3dLayer._translateUILines$1.addLine(Vector3d.create(0, 0, 0), Vector3d.create(0, 0, 1), Colors.get_blue(), Dates.empty());\n    Object3dLayer._initRotateUI$1();\n    Object3dLayer._initScaleUI$1();\n};\n\nObject3dLayer._initScaleUI$1 = function () {\n    Object3dLayer._scaleUI$1 = new TriangleList();\n    Object3dLayer._scaleUI$1.depthBuffered = false;\n    Object3dLayer._scaleUI$1.timeSeries = false;\n    Object3dLayer._scaleUI$1.writeZbuffer = false;\n    var twoPi = Math.PI * 2;\n    var step = twoPi / 45;\n    var rad = 0.05;\n    Object3dLayer._makeCube$1(Object3dLayer._scaleUI$1, Vector3d.create(1 - rad * 2, 0, 0), rad * 2, Colors.get_red());\n    Object3dLayer._makeCube$1(Object3dLayer._scaleUI$1, Vector3d.create(0, 1 - rad * 2, 0), rad * 2, Colors.get_green());\n    Object3dLayer._makeCube$1(Object3dLayer._scaleUI$1, Vector3d.create(0, 0, 1 - rad * 2), rad * 2, Colors.get_blue());\n};\n\nObject3dLayer._makeCube$1 = function (tl, center, size, color) {\n    var dark = Color.fromArgb(255, ss.truncate((color.r * 0.6)), color.g, ss.truncate((color.b * 0.6)));\n    var med = Color.fromArgb(255, ss.truncate((color.r * 0.8)), ss.truncate((color.g * 0.8)), ss.truncate((color.b * 0.8)));\n    tl.addQuad(Vector3d.create(center.x + size, center.y + size, center.z + size), Vector3d.create(center.x + size, center.y + size, center.z - size), Vector3d.create(center.x - size, center.y + size, center.z + size), Vector3d.create(center.x - size, center.y + size, center.z - size), color, Dates.empty());\n    tl.addQuad(Vector3d.create(center.x + size, center.y - size, center.z + size), Vector3d.create(center.x - size, center.y - size, center.z + size), Vector3d.create(center.x + size, center.y - size, center.z - size), Vector3d.create(center.x - size, center.y - size, center.z - size), color, Dates.empty());\n    tl.addQuad(Vector3d.create(center.x - size, center.y + size, center.z + size), Vector3d.create(center.x - size, center.y + size, center.z - size), Vector3d.create(center.x - size, center.y - size, center.z + size), Vector3d.create(center.x - size, center.y - size, center.z - size), dark, Dates.empty());\n    tl.addQuad(Vector3d.create(center.x + size, center.y + size, center.z + size), Vector3d.create(center.x + size, center.y - size, center.z + size), Vector3d.create(center.x + size, center.y + size, center.z - size), Vector3d.create(center.x + size, center.y - size, center.z - size), dark, Dates.empty());\n    tl.addQuad(Vector3d.create(center.x + size, center.y + size, center.z + size), Vector3d.create(center.x - size, center.y + size, center.z + size), Vector3d.create(center.x + size, center.y - size, center.z + size), Vector3d.create(center.x - size, center.y - size, center.z + size), med, Dates.empty());\n    tl.addQuad(Vector3d.create(center.x + size, center.y + size, center.z - size), Vector3d.create(center.x + size, center.y - size, center.z - size), Vector3d.create(center.x - size, center.y + size, center.z - size), Vector3d.create(center.x - size, center.y - size, center.z - size), med, Dates.empty());\n};\n\nObject3dLayer._initRotateUI$1 = function () {\n    Object3dLayer._rotateUi$1 = new TriangleList();\n    Object3dLayer._rotateUi$1.depthBuffered = false;\n    Object3dLayer._rotateUi$1.timeSeries = false;\n    Object3dLayer._rotateUi$1.writeZbuffer = false;\n    var twoPi = Math.PI * 2;\n    var step = twoPi / 40;\n    var rad = 0.05;\n    var index = 0;\n    for (var a = 0; a < twoPi; a += step) {\n        var start = !(index % 10);\n        var end = !((index + 1) % 10);\n        var pnt1 = Vector3d.create(rad * ((start) ? 0 : ((end) ? 1.5 : 1)), Math.cos(a), Math.sin(a));\n        var pnt2 = Vector3d.create(-rad * ((start) ? 0 : ((end) ? 1.5 : 1)), Math.cos(a), Math.sin(a));\n        var pnt3 = Vector3d.create(rad * ((start) ? 1.5 : ((end) ? 0 : 1)), Math.cos(a + step), Math.sin(a + step));\n        var pnt4 = Vector3d.create(-rad * ((start) ? 1.5 : ((end) ? 0 : 1)), Math.cos(a + step), Math.sin(a + step));\n        Object3dLayer._rotateUi$1.addQuad(pnt1, pnt3, pnt2, pnt4, Color._fromArgbColor(192, Colors.get_red()), Dates.empty());\n        index++;\n    }\n    index = 0;\n    for (var a = 0; a < twoPi; a += step) {\n        var start = !(index % 10);\n        var end = !((index + 1) % 10);\n        var pnt1 = Vector3d.create(Math.cos(a), Math.sin(a), rad * ((start) ? 0 : ((end) ? 1.5 : 1)));\n        var pnt2 = Vector3d.create(Math.cos(a), Math.sin(a), -rad * ((start) ? 0 : ((end) ? 1.5 : 1)));\n        var pnt3 = Vector3d.create(Math.cos(a + step), Math.sin(a + step), rad * ((start) ? 1.5 : ((end) ? 0 : 1)));\n        var pnt4 = Vector3d.create(Math.cos(a + step), Math.sin(a + step), -rad * ((start) ? 1.5 : ((end) ? 0 : 1)));\n        Object3dLayer._rotateUi$1.addQuad(pnt1, pnt3, pnt2, pnt4, Color._fromArgbColor(192, Colors.get_blue()), Dates.empty());\n        index++;\n    }\n    index = 0;\n    for (var a = 0; a < twoPi; a += step) {\n        var start = !(index % 10);\n        var end = !((index + 1) % 10);\n        var pnt1 = Vector3d.create(Math.cos(a), rad * ((start) ? 0 : ((end) ? 1.5 : 1)), Math.sin(a));\n        var pnt2 = Vector3d.create(Math.cos(a), -rad * ((start) ? 0 : ((end) ? 1.5 : 1)), Math.sin(a));\n        var pnt3 = Vector3d.create(Math.cos(a + step), rad * ((start) ? 1.5 : ((end) ? 0 : 1)), Math.sin(a + step));\n        var pnt4 = Vector3d.create(Math.cos(a + step), -rad * ((start) ? 1.5 : ((end) ? 0 : 1)), Math.sin(a + step));\n        Object3dLayer._rotateUi$1.addQuad(pnt1, pnt2, pnt3, pnt4, Color._fromArgbColor(192, Colors.get_green()), Dates.empty());\n        index++;\n    }\n\n    // X\n\n    index = 0;\n    for (var a = 0; a < twoPi; a += step) {\n        var start = !(index % 10);\n        var end = !((index + 1) % 10);\n        var pnt1 = Vector3d.create(-rad * ((start) ? 0 : ((end) ? 1.5 : 1)), Math.cos(a), Math.sin(a));\n        var pnt2 = Vector3d.create(rad * ((start) ? 0 : ((end) ? 1.5 : 1)), Math.cos(a), Math.sin(a));\n        var pnt3 = Vector3d.create(-rad * ((start) ? 1.5 : ((end) ? 0 : 1)), Math.cos(a + step), Math.sin(a + step));\n        var pnt4 = Vector3d.create(rad * ((start) ? 1.5 : ((end) ? 0 : 1)), Math.cos(a + step), Math.sin(a + step));\n        Object3dLayer._rotateUi$1.addQuad(pnt1, pnt3, pnt2, pnt4, Colors.get_red(), Dates.empty());\n        index++;\n    }\n\n    // Y\n\n    index = 0;\n    for (var a = 0; a < twoPi; a += step) {\n        var start = !(index % 10);\n        var end = !((index + 1) % 10);\n        var pnt1 = Vector3d.create(Math.cos(a), Math.sin(a), -rad * ((start) ? 0 : ((end) ? 1.5 : 1)));\n        var pnt2 = Vector3d.create(Math.cos(a), Math.sin(a), rad * ((start) ? 0 : ((end) ? 1.5 : 1)));\n        var pnt3 = Vector3d.create(Math.cos(a + step), Math.sin(a + step), -rad * ((start) ? 1.5 : ((end) ? 0 : 1)));\n        var pnt4 = Vector3d.create(Math.cos(a + step), Math.sin(a + step), rad * ((start) ? 1.5 : ((end) ? 0 : 1)));\n        Object3dLayer._rotateUi$1.addQuad(pnt1, pnt3, pnt2, pnt4, Colors.get_blue(), Dates.empty());\n        index++;\n    }\n\n    // Z\n\n    index = 0;\n    for (var a = 0; a < twoPi; a += step) {\n        var start = !(index % 10);\n        var end = !((index + 1) % 10);\n        var pnt1 = Vector3d.create(Math.cos(a), -rad * ((start) ? 0 : ((end) ? 1.5 : 1)), Math.sin(a));\n        var pnt2 = Vector3d.create(Math.cos(a), rad * ((start) ? 0 : ((end) ? 1.5 : 1)), Math.sin(a));\n        var pnt3 = Vector3d.create(Math.cos(a + step), -rad * ((start) ? 1.5 : ((end) ? 0 : 1)), Math.sin(a + step));\n        var pnt4 = Vector3d.create(Math.cos(a + step), rad * ((start) ? 1.5 : ((end) ? 0 : 1)), Math.sin(a + step));\n        Object3dLayer._rotateUi$1.addQuad(pnt1, pnt2, pnt3, pnt4, Colors.get_green(), Dates.empty());\n        index++;\n    }\n};\n\nvar Object3dLayer$ = {\n    getPrimaryUI: function () {\n        if (this._primaryUI$1 == null) {\n            this._primaryUI$1 = new Object3dLayerUI(this);\n        }\n        return this._primaryUI$1;\n    },\n\n    get_flipV: function () {\n        return this._flipV$1;\n    },\n\n    set_flipV: function (value) {\n        if (this._flipV$1 !== value) {\n            this._flipV$1 = value;\n            if (this.object3d != null) {\n                this.object3d.flipV = this._flipV$1;\n                this.object3d._reload();\n            }\n            this.version++;\n        }\n        return value;\n    },\n\n    get_flipHandedness: function () {\n        return this._flipHandedness$1;\n    },\n\n    set_flipHandedness: function (value) {\n        if (this._flipHandedness$1 !== value) {\n            this._flipHandedness$1 = value;\n            if (this.object3d != null) {\n                this.object3d.flipHandedness = this._flipHandedness$1;\n                this.object3d._reload();\n            }\n            this.version++;\n        }\n        return value;\n    },\n\n    get_smooth: function () {\n        return this._smooth$1;\n    },\n\n    set_smooth: function (value) {\n        if (this._smooth$1 !== value) {\n            this._smooth$1 = value;\n            if (this.object3d != null) {\n                this.object3d.smooth = this._smooth$1;\n                this.object3d._reload();\n            }\n            this.version++;\n        }\n        return value;\n    },\n\n    get_twoSidedGeometry: function () {\n        return this._twoSidedGeometry$1;\n    },\n\n    set_twoSidedGeometry: function (value) {\n        if (this._twoSidedGeometry$1 !== value) {\n            this._twoSidedGeometry$1 = value;\n            this.version++;\n        }\n        return value;\n    },\n\n    get_heading: function () {\n        return this._heading$1;\n    },\n\n    set_heading: function (value) {\n        if (this._heading$1 !== value) {\n            this.version++;\n            this._heading$1 = value;\n        }\n        return value;\n    },\n\n    get_pitch: function () {\n        return this._pitch$1;\n    },\n\n    set_pitch: function (value) {\n        if (this._pitch$1 !== value) {\n            this.version++;\n            this._pitch$1 = value;\n        }\n        return value;\n    },\n\n    get_roll: function () {\n        return this._roll$1;\n    },\n\n    set_roll: function (value) {\n        if (this._roll$1 !== value) {\n            this.version++;\n            this._roll$1 = value;\n        }\n        return value;\n    },\n\n    get_scale: function () {\n        return this._scale$1;\n    },\n\n    set_scale: function (value) {\n        if (this._scale$1 !== value) {\n            this.version++;\n            this._scale$1 = value;\n        }\n        return value;\n    },\n\n    get_translate: function () {\n        return this._translate$1;\n    },\n\n    set_translate: function (value) {\n        if (this._translate$1 !== value) {\n            this.version++;\n            this._translate$1 = value;\n        }\n        return value;\n    },\n\n    get_lightID: function () {\n        return this._lightID$1;\n    },\n\n    set_lightID: function (value) {\n        this._lightID$1 = value;\n        return value;\n    },\n\n    cleanUp: function () {\n        this._dirty$1 = true;\n    },\n\n    colorChanged: function () {\n        if (this.object3d != null) {\n            this.object3d.color = this.get_color();\n        }\n    },\n\n    writeLayerProperties: function (xmlWriter) {\n        xmlWriter._writeAttributeString('FlipV', this.get_flipV().toString());\n        xmlWriter._writeAttributeString('FlipHandedness', this.get_flipHandedness().toString());\n        xmlWriter._writeAttributeString('Smooth', this.get_smooth().toString());\n        xmlWriter._writeAttributeString('TwoSidedGeometry', this.get_twoSidedGeometry().toString());\n        xmlWriter._writeAttributeString('Heading', this.get_heading().toString());\n        xmlWriter._writeAttributeString('Pitch', this.get_pitch().toString());\n        xmlWriter._writeAttributeString('Roll', this.get_roll().toString());\n        xmlWriter._writeAttributeString('Scale', this.get_scale().toString());\n        xmlWriter._writeAttributeString('Translate', this.get_translate().toString());\n        xmlWriter._writeAttributeString('LightID', this.get_lightID().toString());\n        xmlWriter._writeAttributeString('Obj', this.objType.toString());\n    },\n\n    getParams: function () {\n        var paramList = new Array(14);\n        paramList[0] = this._heading$1;\n        paramList[1] = this._pitch$1;\n        paramList[2] = this._roll$1;\n        paramList[3] = this._scale$1.x;\n        paramList[4] = this._scale$1.y;\n        paramList[5] = this._scale$1.z;\n        paramList[6] = this._translate$1.x;\n        paramList[7] = this._translate$1.y;\n        paramList[8] = this._translate$1.z;\n        paramList[9] = this.get_color().r / 255;\n        paramList[10] = this.get_color().g / 255;\n        paramList[11] = this.get_color().b / 255;\n        paramList[12] = this.get_color().a / 255;\n        paramList[13] = this.get_opacity();\n        return paramList;\n    },\n\n    getParamNames: function () {\n        return ['Heading', 'Pitch', 'Roll', 'Scale.X', 'Scale.Y', 'Scale.Z', 'Translate.X', 'Translate.Y', 'Translate.Z', 'Colors.Red', 'Colors.Green', 'Colors.Blue', 'Colors.Alpha', 'Opacity'];\n    },\n\n    setParams: function (paramList) {\n        if (paramList.length === 14) {\n            this._heading$1 = paramList[0];\n            this._pitch$1 = paramList[1];\n            this._roll$1 = paramList[2];\n            this._scale$1.x = paramList[3];\n            this._scale$1.y = paramList[4];\n            this._scale$1.z = paramList[5];\n            this._translate$1.x = paramList[6];\n            this._translate$1.y = paramList[7];\n            this._translate$1.z = paramList[8];\n            this.set_opacity(paramList[13]);\n            var color = Color.fromArgb(ss.truncate((paramList[12] * 255)), ss.truncate((paramList[9] * 255)), ss.truncate((paramList[10] * 255)), ss.truncate((paramList[11] * 255)));\n            this.set_color(color);\n        }\n    },\n\n    add_propertiesChanged: function (value) {\n        this.__propertiesChanged$1 = ss.bindAdd(this.__propertiesChanged$1, value);\n    },\n\n    remove_propertiesChanged: function (value) {\n        this.__propertiesChanged$1 = ss.bindSub(this.__propertiesChanged$1, value);\n    },\n\n    fireChanged: function () {\n        if (this.__propertiesChanged$1 != null) {\n            this.__propertiesChanged$1(this, new ss.EventArgs());\n        }\n    },\n\n    getEditUI: function () {\n        return ss.safeCast(this, IUiController);\n    },\n\n    initializeFromXml: function (node) {\n        this.set_flipV(ss.boolean(node.attributes.getNamedItem('FlipV').nodeValue));\n        if (node.attributes.getNamedItem('FlipHandedness') != null) {\n            this.set_flipHandedness(ss.boolean(node.attributes.getNamedItem('FlipHandedness').nodeValue));\n        } else {\n            this.set_flipHandedness(false);\n        }\n        if (node.attributes.getNamedItem('Smooth') != null) {\n            this.set_smooth(ss.boolean(node.attributes.getNamedItem('Smooth').nodeValue));\n        } else {\n            this.set_smooth(true);\n        }\n        if (node.attributes.getNamedItem('TwoSidedGeometry') != null) {\n            this.set_twoSidedGeometry(ss.boolean(node.attributes.getNamedItem('TwoSidedGeometry').nodeValue));\n        } else {\n            this.set_twoSidedGeometry(false);\n        }\n        if (node.attributes.getNamedItem('Obj') != null) {\n            this.objType = ss.boolean(node.attributes.getNamedItem('Obj').nodeValue);\n        } else {\n            this.objType = false;\n        }\n        this.set_heading(parseFloat(node.attributes.getNamedItem('Heading').nodeValue));\n        this.set_pitch(parseFloat(node.attributes.getNamedItem('Pitch').nodeValue));\n        this.set_roll(parseFloat(node.attributes.getNamedItem('Roll').nodeValue));\n        this.set_scale(Vector3d.parse(node.attributes.getNamedItem('Scale').nodeValue));\n        this.set_translate(Vector3d.parse(node.attributes.getNamedItem('Translate').nodeValue));\n        if (node.attributes.getNamedItem('LightID') != null) {\n            this.set_lightID(parseInt(node.attributes.getNamedItem('LightID').nodeValue));\n        }\n    },\n\n    draw: function (renderContext, opacity, flat) {\n        var oldWorld = renderContext.get_world();\n        var rotation = Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(Matrix3d._rotationZ(-this._roll$1 / 180 * Math.PI), Matrix3d._rotationX(-this._pitch$1 / 180 * Math.PI)), Matrix3d._rotationY(this._heading$1 / 180 * Math.PI));\n        renderContext.set_world(Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(rotation, Matrix3d._scaling(this._scale$1.x, this._scale$1.y, this._scale$1.z)), Matrix3d.translation(this._translate$1)), oldWorld));\n        renderContext.set_twoSidedLighting(this.get_twoSidedGeometry());\n        BasePlanets.drawPointPlanet(renderContext, new Vector3d(), 1, Colors.get_red(), false);\n        if (this._lightID$1 > 0) {\n            // draw light\n        } else {\n            if (this.object3d != null) {\n                this.object3d.color = this.get_color();\n                this.object3d.render(renderContext, opacity * this.get_opacity());\n            }\n        }\n\n        // todo enable edit UI\n\n        renderContext.set_twoSidedLighting(false);\n        renderContext.set_world(oldWorld);\n        return true;\n    },\n\n    addFilesToCabinet: function (fc) {\n        // todo: implement\n    },\n\n    loadData: function (doc, filename) {\n        if (ss.endsWith(filename.toLowerCase(), '.obj')) {\n            this.objType = true;\n        }\n        if (!this._lightID$1) {\n            if (this.objType) {\n                this.object3d = new Object3d(doc, ss.replaceString(filename, '.txt', '.obj'), this.get_flipV(), this._flipHandedness$1, true, this.get_color());\n            }\n            else {\n                this.object3d = new Object3d(doc, ss.replaceString(filename, '.txt', '.3ds'), this.get_flipV(), this._flipHandedness$1, true, this.get_color());\n            }\n        }\n    },\n\n    pointToView: function (pnt) {\n        var clientHeight = globalRenderContext.height;\n        var clientWidth = globalRenderContext.width;\n        var viewWidth = (globalRenderContext.width / globalRenderContext.height) * 1116;\n        var x = ((pnt.x) / (clientWidth) * viewWidth) - ((viewWidth - 1920) / 2);\n        var y = (pnt.y) / clientHeight * 1116;\n        return Vector2d.create(x, y);\n    },\n\n    render: function (renderEngine) {\n        this._showEditUi$1 = true;\n        return;\n    },\n\n    preRender: function (renderEngine) {\n        this._showEditUi$1 = true;\n        return;\n    },\n\n    mouseDown: function (sender, e) {\n        var location = this.pointToView(Vector2d.create(e.offsetX, e.offsetY));\n        this._pntDown$1 = location;\n        var pnt = location;\n        if (e.shiftKey) {\n            if (Vector2d.subtract(pnt, this._xHandle$1).get_length() < this._hitDist$1) {\n                this._dragMode$1 = 10;\n                this._valueOnDown$1 = this._scale$1.x;\n                return true;\n            }\n            if (Vector2d.subtract(pnt, this._yHandle$1).get_length() < this._hitDist$1) {\n                this._dragMode$1 = 10;\n                this._valueOnDown$1 = this._scale$1.y;\n                return true;\n            }\n            if (Vector2d.subtract(pnt, this._zHandle$1).get_length() < this._hitDist$1) {\n                this._dragMode$1 = 10;\n                this._valueOnDown$1 = this._scale$1.z;\n                return true;\n            }\n        } else {\n            if (Vector2d.subtract(pnt, this._xHandle$1).get_length() < this._hitDist$1) {\n                this._dragMode$1 = 1;\n                this._valueOnDown$1 = this._translate$1.x;\n                return true;\n            }\n            if (Vector2d.subtract(pnt, this._yHandle$1).get_length() < this._hitDist$1) {\n                this._dragMode$1 = 2;\n                this._valueOnDown$1 = this._translate$1.y;\n                return true;\n            }\n            if (Vector2d.subtract(pnt, this._zHandle$1).get_length() < this._hitDist$1) {\n                this._dragMode$1 = 3;\n                this._valueOnDown$1 = this._translate$1.z;\n                return true;\n            }\n        }\n        for (var i = 0; i < this._hprHandles$1.length; i++) {\n            if (Vector2d.subtract(pnt, this._hprHandles$1[i]).get_length() < this._hitDist$1) {\n                switch (i) {\n                    case 0:\n                        this._dragMode$1 = 4;\n                        this._valueOnDown$1 = this._heading$1;\n                        this._valueOnDown2$1 = this._pitch$1;\n                        return true;\n                    case 1:\n                        this._dragMode$1 = 7;\n                        this._valueOnDown$1 = this._heading$1;\n                        this._valueOnDown2$1 = this._pitch$1;\n                        return true;\n                    case 2:\n                        this._dragMode$1 = 5;\n                        this._valueOnDown$1 = this._pitch$1;\n                        this._valueOnDown2$1 = this._roll$1;\n                        return true;\n                    case 3:\n                        this._dragMode$1 = 8;\n                        this._valueOnDown$1 = this._pitch$1;\n                        this._valueOnDown2$1 = this._roll$1;\n                        return true;\n                    case 4:\n                        this._dragMode$1 = 6;\n                        this._valueOnDown$1 = this._roll$1;\n                        this._valueOnDown2$1 = this._heading$1;\n                        return true;\n                    case 5:\n                        this._dragMode$1 = 9;\n                        this._valueOnDown$1 = this._roll$1;\n                        this._valueOnDown2$1 = this._heading$1;\n                        return true;\n                    default:\n                        break;\n                }\n            }\n        }\n        return false;\n    },\n\n    mouseUp: function (sender, e) {\n        if (!!this._dragMode$1) {\n            this._dragMode$1 = 0;\n            this._lockPreferedAxis$1 = false;\n            return true;\n        }\n        return false;\n    },\n\n    mouseMove: function (sender, e) {\n        var location = this.pointToView(Vector2d.create(e.offsetX, e.offsetY));\n        if (!!this._dragMode$1) {\n            var dist = 0;\n            var distX = location.x - this._pntDown$1.x;\n            var distY = -(location.y - this._pntDown$1.y);\n            if (this._lockPreferedAxis$1) {\n                if (this._preferY$1) {\n                    dist = distY;\n                    this._preferY$1 = true;\n                    Cursor.set_current(Cursors.get_sizeNS());\n                }\n                else {\n                    dist = distX;\n                    this._preferY$1 = false;\n                    Cursor.set_current(Cursors.get_sizeWE());\n                }\n            }\n            else {\n                if (Math.abs(distX) > Math.abs(distY)) {\n                    dist = distX;\n                    this._preferY$1 = false;\n                }\n                else {\n                    dist = distY;\n                    this._preferY$1 = true;\n                }\n                if (dist > 5) {\n                    this._lockPreferedAxis$1 = true;\n                }\n            }\n            switch (this._dragMode$1) {\n                case 0:\n                    break;\n                case 1:\n                    this._translate$1.x = this._valueOnDown$1 + (12 * this._uiScale$1 * (dist / globalRenderContext.width));\n                    break;\n                case 2:\n                    this._translate$1.y = this._valueOnDown$1 + (12 * this._uiScale$1 * (dist / globalRenderContext.width));\n                    break;\n                case 3:\n                    this._translate$1.z = this._valueOnDown$1 + (12 * this._uiScale$1 * (dist / globalRenderContext.width));\n                    break;\n                case 4:\n                    this._heading$1 = this._valueOnDown$1 - distX / 4;\n                    this._pitch$1 = this._valueOnDown2$1 + distY / 4;\n                    break;\n                case 5:\n                    this._pitch$1 = this._valueOnDown$1 + distY / 4;\n                    this._roll$1 = this._valueOnDown2$1 - distX / 4;\n                    break;\n                case 6:\n                    this._roll$1 = this._valueOnDown$1 + distY / 4;\n                    this._heading$1 = this._valueOnDown2$1 - distX / 4;\n                    break;\n                case 7:\n                    this._heading$1 = this._valueOnDown$1 - distX / 4;\n                    this._pitch$1 = this._valueOnDown2$1 - distY / 4;\n                    break;\n                case 8:\n                    this._pitch$1 = this._valueOnDown$1 + distY / 4;\n                    this._roll$1 = this._valueOnDown2$1 + distX / 4;\n                    break;\n                case 9:\n                    this._roll$1 = this._valueOnDown$1 - distY / 4;\n                    this._heading$1 = this._valueOnDown2$1 - distX / 4;\n                    break;\n                case 10:\n                    this._scale$1.x = this._scale$1.y = this._scale$1.z = this._valueOnDown$1 * Math.pow(2, (dist / 100));\n                    break;\n                default:\n                    break;\n            }\n            this.fireChanged();\n            return true;\n        } else {\n            var pnt = location;\n            if (Vector2d.subtract(pnt, this._xHandle$1).get_length() < this._hitDist$1) {\n                Cursor.set_current(Cursors.get_sizeAll());\n                return true;\n            }\n            if (Vector2d.subtract(pnt, this._yHandle$1).get_length() < this._hitDist$1) {\n                Cursor.set_current(Cursors.get_sizeAll());\n                return true;\n            }\n            if (Vector2d.subtract(pnt, this._zHandle$1).get_length() < this._hitDist$1) {\n                Cursor.set_current(Cursors.get_sizeAll());\n                return true;\n            }\n            for (var i = 0; i < this._hprHandles$1.length; i++) {\n                if (Vector2d.subtract(pnt, this._hprHandles$1[i]).get_length() < this._hitDist$1) {\n                    Cursor.set_current(Cursors.get_sizeAll());\n                    return true;\n                }\n            }\n        }\n        return false;\n    },\n\n    mouseClick: function (sender, e) {\n        return false;\n    },\n\n    click: function (sender, e) {\n        return false;\n    },\n\n    mouseDoubleClick: function (sender, e) {\n        return false;\n    },\n\n    keyDown: function (sender, e) {\n        return false;\n    },\n\n    keyUp: function (sender, e) {\n        return false;\n    },\n\n    hover: function (pnt) {\n        return false;\n    }\n};\n\nregisterType(\"Object3dLayer\", [Object3dLayer, Object3dLayer$, Layer, IUiController]);\n\n\n// wwtlib.Group\n\nexport function Group() {\n    this.startIndex = 0;\n    this.indexCount = 0;\n    this.materialIndex = 0;\n}\n\nvar Group$ = {};\n\nregisterType(\"Group\", [Group, Group$, null]);\n\n// wwtlib.Mesh\n\nexport function Mesh() {\n    this.boundingSphere = new SphereHull();\n}\n\nMesh.create = function (vertices, indices) {\n    var mesh = new Mesh();\n    mesh.vertices = vertices;\n    mesh.indices = indices;\n    var points = new Array(vertices.length);\n    for (var i = 0; i < vertices.length; ++i) {\n        points[i] = vertices[i].get_position();\n    }\n    mesh.boundingSphere = ConvexHull.findEnclosingSphereFast(points);\n    return mesh;\n};\n\nMesh.createTangent = function (vertices, indices) {\n    var mesh = new Mesh();\n    mesh.tangentVertices = vertices;\n    mesh.indices = indices;\n    var points = new Array(mesh.tangentVertices.length);\n    for (var i = 0; i < mesh.tangentVertices.length; ++i) {\n        points[i] = mesh.tangentVertices[i].get_position();\n    }\n    mesh.boundingSphere = ConvexHull.findEnclosingSphereFast(points);\n    return mesh;\n};\n\nvar Mesh$ = {\n    dispose: function () {\n        if (this.vertexBuffer != null) {\n            this.vertexBuffer.dispose();\n            this.vertexBuffer = null;\n        }\n        if (this.tangentVertexBuffer != null) {\n            this.tangentVertexBuffer.dispose();\n            this.tangentVertexBuffer = null;\n        }\n        if (this.indexBuffer != null) {\n            this.indexBuffer.dispose();\n            this.indexBuffer = null;\n        }\n    },\n\n    setObjects: function (objects) {\n        this._objects = objects;\n    },\n\n    // Convert the vertex data to a GPU vertex buffer\n    commitToDevice: function () {\n        if (this.vertices != null) {\n            this.vertexBuffer = PositionNormalTexturedVertexBuffer.create(this.vertices);\n        } else if (this.tangentVertices != null) {\n            this.tangentVertexBuffer = PositionNormalTexturedTangentVertexBuffer.create(this.tangentVertices);\n        }\n        this.indexBuffer = new IndexBuffer(new Uint32Array(this.indices));\n    },\n\n    beginDrawing: function (renderContext) {\n        if (this.vertexBuffer != null) {\n            renderContext._setVertexBuffer(this.vertexBuffer);\n        } else if (this.tangentVertexBuffer != null) {\n            renderContext._setVertexBuffer(this.tangentVertexBuffer);\n        }\n        if (this.indexBuffer != null) {\n            renderContext._setIndexBuffer(this.indexBuffer);\n        }\n    },\n\n    drawSubset: function (renderContext, materialIndex) {\n        if (this.indexBuffer == null || this._objects == null) {\n            return;\n        }\n        this.drawHierarchy(this._objects, materialIndex, renderContext, 0);\n    },\n\n    drawHierarchy: function (nodes, materialIndex, renderContext, depth) {\n        if (depth > 1212) {\n            return;\n        }\n        var $enum1 = ss.enumerate(nodes);\n        while ($enum1.moveNext()) {\n            var node = $enum1.current;\n            if (node.drawGroup != null && node.enabled) {\n                var $enum2 = ss.enumerate(node.drawGroup);\n                while ($enum2.moveNext()) {\n                    var group = $enum2.current;\n                    if (group.materialIndex === materialIndex) {\n                        renderContext.gl.drawElements(WEBGL.TRIANGLES, group.indexCount, WEBGL.UNSIGNED_INT, group.startIndex * 4);\n                    }\n                }\n            }\n            this.drawHierarchy(node.children, materialIndex, renderContext, depth + 1);\n        }\n    },\n\n    get_objects: function () {\n        return this._objects;\n    },\n\n    set_objects: function (value) {\n        this._objects = value;\n        return value;\n    }\n};\n\nregisterType(\"Mesh\", [Mesh, Mesh$, null, ss.IDisposable]);\n\n\n// wwtlib.VertexPosition\n\nexport function VertexPosition() {\n    this.index = 0;\n}\n\nvar VertexPosition$ = {};\n\nregisterType(\"VertexPosition\", [VertexPosition, VertexPosition$, null]);\n\n\n// wwtlib.Object3d\n\nexport function Object3d(tourDoc, filename, flipV, flipHandedness, smooth, color) {\n    this.flipHandedness = false;\n    this.flipV = true;\n    this.smooth = true;\n    this._mesh = null; // Our mesh object in sysmem\n    this._meshMaterials = [];\n    this._meshTextures = [];\n    this._meshSpecularTextures = [];\n    this._meshNormalMaps = [];\n    this.meshFilenames = [];\n    this.color = Colors.get_white();\n    this._textureCache = {};\n    this._matFiles = new Array(0);\n    this._matFileIndex = 0;\n    this.objects = [];\n    this._matLib = {};\n    this._textureLib = {};\n    this._tourDocument = null;\n    this.issLayer = false;\n    this._readyToRender = false;\n    this.useCurrentAmbient = false;\n    this._dirty = true;\n    this.color = color;\n    this.smooth = smooth;\n    this.flipV = flipV;\n    this.flipHandedness = flipHandedness;\n    this.filename = filename;\n    if (ss.endsWith(this.filename.toLowerCase(), '.obj')) {\n        this._loadMeshFromObj(tourDoc, this.filename);\n    }\n    else {\n        this._loadMeshFrom3ds(tourDoc, this.filename, 1);\n    }\n}\n\nObject3d._compareVector3 = function (v0, v1) {\n    if (v0.x < v1.x) {\n        return -1;\n    }\n    else if (v0.x > v1.x) {\n        return 1;\n    }\n    else if (v0.y < v1.y) {\n        return -1;\n    }\n    else if (v0.y > v1.y) {\n        return 1;\n    }\n    else if (v0.z < v1.z) {\n        return -1;\n    }\n    else if (v0.z > v1.z) {\n        return 1;\n    }\n    else {\n        return 0;\n    }\n};\n\nObject3d._compareVector = function (v0, v1) {\n    if (v0.x < v1.x) {\n        return -1;\n    }\n    else if (v0.x > v1.x) {\n        return 1;\n    }\n    else if (v0.y < v1.y) {\n        return -1;\n    }\n    else if (v0.y > v1.y) {\n        return 1;\n    }\n    else {\n        return 0;\n    }\n};\n\nObject3d._getMaterialID = function (material, materialNames) {\n    var index = 0;\n    var $enum1 = ss.enumerate(materialNames);\n    while ($enum1.moveNext()) {\n        var mat = $enum1.current;\n        if (mat === material) {\n            return index;\n        }\n        index++;\n    }\n    return -1;\n};\n\nObject3d._disposeTextureList = function (textures) {\n    if (textures != null) {\n        for (var i = 0; i < textures.length; ++i) {\n            if (textures[i] != null) {\n                textures[i].dispose();\n                textures[i] = null;\n            }\n        }\n        textures.length = 0;\n    }\n};\n\nvar Object3d$ = {\n    _reload: function () {\n        if (!this.issLayer) {\n            this.dispose();\n            if (ss.endsWith(this.filename.toLowerCase(), '.obj')) {\n                this._loadMeshFromObj(this._tourDocument, this.filename);\n            }\n            else {\n                this._loadMeshFrom3ds(this._tourDocument, this.filename, 1);\n            }\n        }\n    },\n\n    // Calculate per-vertex normals by averaging face normals. Normals of adjacent faces with an\n    // angle of greater than crease angle are not included in the average. CalculateVertexNormalsMerged\n    // is slower than the other normal generation method, CalculateVertexNormals, but it produces better\n    // results. Vertices with identical positions (bot possibly different texture coordinates) are treated\n    // as the same vertex for purposes of normal calculation. This allows smooth normals across texture\n    // wrap seams.\n    //\n    // This method returns an array of vertex normals, one for each index in the index list\n    _calculateVertexNormalsMerged: function (vertexList, indexList, creaseAngleRad) {\n        if (!vertexList.length) {\n            return null;\n        }\n        var vertexCount = vertexList.length;\n        var triangleCount = Math.floor(indexList.length / 3);\n\n        // Create a list of vertices sorted by their positions. This will be used to\n        // produce a list of vertices with unique positions.\n        var vertexPositions = [];\n        for (var vertexIndex = 0; vertexIndex < vertexList.length; ++vertexIndex) {\n            var vp = new VertexPosition();\n            vp.position = vertexList[vertexIndex].get_position();\n            vp.index = vertexIndex;\n            vertexPositions.push(vp);\n        }\n        vertexPositions.sort(function (v0, v1) {\n            return Object3d._compareVector3(v0.position, v1.position);\n        });\n\n        // vertexMap will map a vertex index to the index of a vertex with a unique position\n        var vertexMap = new Array(vertexPositions.length);\n        var uniqueVertexCount = 0;\n        for (var vertexIndex = 0; vertexIndex < vertexPositions.length; vertexIndex++) {\n            if (!vertexIndex || !!Object3d._compareVector3(vertexPositions[vertexIndex].position, vertexPositions[vertexIndex - 1].position)) {\n                ++uniqueVertexCount;\n            }\n            vertexMap[vertexPositions[vertexIndex].index] = uniqueVertexCount - 1;\n        }\n        var vertexInstanceCounts = new Array(uniqueVertexCount);\n        for (var i = 0; i < uniqueVertexCount; i++) {\n            vertexInstanceCounts[i] = 0;\n        }\n        var $enum1 = ss.enumerate(indexList);\n        while ($enum1.moveNext()) {\n            var vertexIndex = $enum1.current;\n            var uniqueIndex = vertexMap[vertexIndex];\n            vertexInstanceCounts[uniqueIndex]++;\n        }\n\n        // vertexInstances contains the list of faces each vertex is referenced in\n        var vertexInstances = new Array(uniqueVertexCount);\n        for (var i = 0; i < uniqueVertexCount; ++i) {\n            var count = vertexInstanceCounts[i];\n            if (count > 0) {\n                vertexInstances[i] = new Array(count);\n                for (var j = 0; j < count; j++) {\n                    vertexInstances[i][j] = 0;\n                }\n            }\n        }\n\n        // For each vertex, record all faces which include it\n        for (var i = 0; i < indexList.length; ++i) {\n            var faceIndex = Math.floor(i / 3);\n            var uniqueIndex = vertexMap[indexList[i]];\n            vertexInstances[uniqueIndex][--vertexInstanceCounts[uniqueIndex]] = faceIndex;\n        }\n\n        // At this point, vertexInstanceCounts should contain nothing but zeroes\n\n        // Compute normals for all faces\n        var faceNormals = new Array(triangleCount);\n        for (var i = 0; i < triangleCount; ++i) {\n            // The face normal is just the cross product of the two edge vectors\n            var i0 = indexList[i * 3 + 0];\n            var i1 = indexList[i * 3 + 1];\n            var i2 = indexList[i * 3 + 2];\n            var edge0 = Vector3d.subtractVectors(vertexList[i1].get_position(), vertexList[i0].get_position());\n            var edge1 = Vector3d.subtractVectors(vertexList[i2].get_position(), vertexList[i1].get_position());\n            faceNormals[i] = Vector3d.cross(edge0, edge1);\n            faceNormals[i].normalize();\n        }\n\n        // Finally, average the face normals\n        var newVertexCount = triangleCount * 3;\n        var vertexNormals = new Array(newVertexCount);\n        var cosCreaseAngle = Math.min(0.9999, Math.cos(creaseAngleRad));\n        for (var i = 0; i < newVertexCount; ++i) {\n            var vertexIndex = indexList[i];\n            var uniqueIndex = vertexMap[vertexIndex];\n            var faceNormal = faceNormals[Math.floor(i / 3)];\n            var sum = new Vector3d();\n            var $enum2 = ss.enumerate(vertexInstances[uniqueIndex]);\n            while ($enum2.moveNext()) {\n                var faceIndex = $enum2.current;\n                var n = faceNormals[faceIndex];\n                if (Vector3d.dot(faceNormal, n) > cosCreaseAngle) {\n                    sum.add(n);\n                }\n            }\n            vertexNormals[i] = sum;\n            vertexNormals[i].normalize();\n        }\n        return vertexNormals;\n    },\n\n    // Calculate tangent vectors at each vertex. The 'face tangent' is a direction in the plane of the\n    // triangle and parallel to the direction of increasing tex coord u, i.e. the partial derivative\n    // with respect to u of the triangle's plane equation expressed in terms of the texture coordinate\n    // (u, v). Partial derivatives of the triangles containing a vertex are averaged to compute the\n    // vertex tangent. Faces are not included in the when the angle formed with the test face is\n    // greater than the crease angle, or when the texture texture coordinates are not continuous.\n    //\n    // This method returns an array of vertex normals, one for each index in the index list\n    _calculateVertexTangents: function (vertexList, indexList, creaseAngleRad) {\n        if (!vertexList.length) {\n            return null;\n        }\n        var vertexCount = vertexList.length;\n        var triangleCount = Math.floor(indexList.length / 3);\n\n        // Create a list of vertices sorted by their positions. This will be used to\n        // produce a list of vertices with unique positions.\n        var vertexPositions = [];\n        for (var vertexIndex = 0; vertexIndex < vertexList.length; ++vertexIndex) {\n            var vp = new VertexPosition();\n            vp.position = vertexList[vertexIndex].get_position();\n            vp.index = vertexIndex;\n            vertexPositions.push(vp);\n        }\n        vertexPositions.sort(function (v0, v1) {\n            return Object3d._compareVector3(v0.position, v1.position);\n        });\n\n        // vertexMap will map a vertex index to the index of a vertex with a unique position\n        var vertexMap = new Array(vertexPositions.length);\n        var uniqueVertexCount = 0;\n        for (var vertexIndex = 0; vertexIndex < vertexPositions.length; vertexIndex++) {\n            if (!vertexIndex || !!Object3d._compareVector3(vertexPositions[vertexIndex].position, vertexPositions[vertexIndex - 1].position)) {\n                ++uniqueVertexCount;\n            }\n            vertexMap[vertexPositions[vertexIndex].index] = (uniqueVertexCount - 1);\n        }\n        var vertexInstanceCounts = new Array(uniqueVertexCount);\n        for (var i = 0; i < uniqueVertexCount; i++) {\n            vertexInstanceCounts[i] = 0;\n        }\n        var $enum1 = ss.enumerate(indexList);\n        while ($enum1.moveNext()) {\n            var vertexIndex = $enum1.current;\n            var uniqueIndex = vertexMap[vertexIndex];\n            vertexInstanceCounts[uniqueIndex]++;\n        }\n\n        // vertexInstances contains the list of faces each vertex is referenced in\n        var vertexInstances = new Array(uniqueVertexCount);\n        for (var i = 0; i < uniqueVertexCount; ++i) {\n            var count = vertexInstanceCounts[i];\n            if (count > 0) {\n                vertexInstances[i] = new Array(count);\n                for (var j = 0; j < count; j++) {\n                    vertexInstances[i][j] = 0;\n                }\n            }\n        }\n\n        // For each vertex, record all faces which include it\n        for (var i = 0; i < indexList.length; ++i) {\n            var faceIndex = Math.floor(i / 3);\n            var uniqueIndex = vertexMap[indexList[i]];\n            vertexInstances[uniqueIndex][--vertexInstanceCounts[uniqueIndex]] = faceIndex;\n        }\n\n        // At this point, vertexInstanceCounts should contain nothing but zeroes\n\n        // Compute partial derivatives for all faces\n        var partials = new Array(triangleCount);\n        for (var i = 0; i < triangleCount; ++i) {\n            var v0 = vertexList[indexList[i * 3 + 0]];\n            var v1 = vertexList[indexList[i * 3 + 1]];\n            var v2 = vertexList[indexList[i * 3 + 2]];\n            var edge0 = Vector3d.subtractVectors(v1.get_position(), v0.get_position());\n            var edge1 = Vector3d.subtractVectors(v2.get_position(), v0.get_position());\n            var m00 = v1.tu - v0.tu;\n            var m01 = v1.tv - v0.tv;\n            var m10 = v2.tu - v0.tu;\n            var m11 = v2.tv - v0.tv;\n            var determinant = m00 * m11 - m01 * m10;\n            if (Math.abs(determinant) < 1E-06) {\n                if (edge0.lengthSq() > 0) {\n                    // No unique vector; just select one of the edges\n                    partials[i] = edge0;\n                    partials[i].normalize();\n                }\n                else {\n                    // Degenerate edge; just use the unit x vector\n                    partials[i] = Vector3d.create(1, 0, 0);\n                }\n            }\n            else {\n                // Matrix n is the inverse of m\n                var invDeterminant = 1 / determinant;\n                var n00 = m11 * invDeterminant;\n                var n01 = -m01 * invDeterminant;\n                var n10 = -m10 * invDeterminant;\n                var n11 = m00 * invDeterminant;\n                partials[i] = Vector3d.addVectors(Vector3d.multiplyScalar(edge0, n00), Vector3d.multiplyScalar(edge1, n01));\n                partials[i].normalize();\n            }\n        }\n\n        // Finally, average the partial derivatives\n        var newVertexCount = triangleCount * 3;\n        var tangents = new Array(newVertexCount);\n        var cosCreaseAngle = Math.min(0.9999, Math.cos(creaseAngleRad));\n        for (var i = 0; i < newVertexCount; ++i) {\n            var vertexIndex = indexList[i];\n            var uniqueIndex = vertexMap[vertexIndex];\n            var du = partials[Math.floor(i / 3)];\n            var sum = new Vector3d();\n            var $enum2 = ss.enumerate(vertexInstances[uniqueIndex]);\n            while ($enum2.moveNext()) {\n                var faceIndex = $enum2.current;\n                var T = partials[faceIndex];\n                if (Vector3d.dot(du, T) > cosCreaseAngle) {\n                    sum.add(T);\n                }\n            }\n            var N = vertexList[vertexIndex].get_normal();\n\n            // Make the tangent orthogonal to the vertex normal\n            tangents[i] = Vector3d.subtractVectors(sum, Vector3d.multiplyScalar(N, Vector3d.dot(N, sum)));\n            tangents[i].normalize();\n        }\n        return tangents;\n    },\n\n    // Calculate per-vertex normals by averaging face normals. Normals of adjacent faces with an\n    // angle of greater than crease angle are not included in the average.\n    //\n    // This method returns an array of vertex normals, one for each index in the index list\n    _calculateVertexNormals: function (vertexList, indexList, creaseAngleRad) {\n        var vertexCount = vertexList.length;\n        var triangleCount = Math.floor(indexList.length / 3);\n\n        // vertexInstanceCounts contains the number of times each vertex is referenced in the mesh\n        var vertexInstanceCounts = new Array(vertexCount);\n        var $enum1 = ss.enumerate(indexList);\n        while ($enum1.moveNext()) {\n            var vertexIndex = $enum1.current;\n            vertexInstanceCounts[vertexIndex]++;\n        }\n\n        // vertexInstances contains the list of faces each vertex is referenced in\n        var vertexInstances = new Array(vertexCount);\n        for (var i = 0; i < vertexCount; ++i) {\n            var count = vertexInstanceCounts[i];\n            if (count > 0) {\n                vertexInstances[i] = new Array(count);\n            }\n        }\n\n        // For each vertex, record all faces which include it\n        for (var i = 0; i < indexList.length; ++i) {\n            var faceIndex = Math.floor(i / 3);\n            var vertexIndex = indexList[i];\n            vertexInstances[vertexIndex][--vertexInstanceCounts[vertexIndex]] = faceIndex;\n        }\n\n        // At this point, vertexInstanceCounts should contain nothing but zeroes\n\n        // Compute normals for all faces\n        var faceNormals = new Array(triangleCount);\n        for (var i = 0; i < triangleCount; ++i) {\n            // The face normal is just the cross product of the two edge vectors\n            var i0 = indexList[i * 3 + 0];\n            var i1 = indexList[i * 3 + 1];\n            var i2 = indexList[i * 3 + 2];\n            var edge0 = Vector3d.subtractVectors(vertexList[i1].get_position(), vertexList[i0].get_position());\n            var edge1 = Vector3d.subtractVectors(vertexList[i2].get_position(), vertexList[i1].get_position());\n            faceNormals[i] = Vector3d.cross(edge0, edge1);\n            faceNormals[i].normalize();\n        }\n\n        // Finally, average the face normals\n        var newVertexCount = triangleCount * 3;\n        var vertexNormals = new Array(newVertexCount);\n        var cosCreaseAngle = Math.min(0.9999, Math.cos(creaseAngleRad));\n        for (var i = 0; i < newVertexCount; ++i) {\n            var vertexIndex = indexList[i];\n            var faceNormal = faceNormals[Math.floor(i / 3)];\n            var sum = new Vector3d();\n            var $enum2 = ss.enumerate(vertexInstances[vertexIndex]);\n            while ($enum2.moveNext()) {\n                var faceIndex = $enum2.current;\n                var n = faceNormals[faceIndex];\n                if (Vector3d.dot(faceNormal, n) > cosCreaseAngle) {\n                    sum.add(n);\n                }\n            }\n            vertexNormals[i] = sum;\n            vertexNormals[i].normalize();\n        }\n        return vertexNormals;\n    },\n\n    // Add textures to ensure that we have as many textures as [...]\n    _addMaterial: function (material) {\n        this._meshMaterials.push(material);\n        while (this._meshTextures.length < this._meshMaterials.length) {\n            this._meshTextures.push(null);\n        }\n        while (this._meshSpecularTextures.length < this._meshMaterials.length) {\n            this._meshSpecularTextures.push(null);\n        }\n        while (this._meshNormalMaps.length < this._meshMaterials.length) {\n            this._meshNormalMaps.push(null);\n        }\n    },\n\n    // Load a color chunk from a 3ds file`\n    // Colors may be stored in a 3ds file either as 3 floats or 3 bytes\n    _loadColorChunk: function (br) {\n        var chunkID = br.readUInt16();\n        var chunkLength = br.readUInt32();\n        var color = Colors.get_black();\n        if ((chunkID === 16 || chunkID === 19) && chunkLength === 18) {\n            // Need to guard against values outside of [0, 1], otherwise Colors.FromArgb\n            // will throw an exception.\n            var r = Math.max(0, Math.min(1, br.readSingle()));\n            var g = Math.max(0, Math.min(1, br.readSingle()));\n            var b = Math.max(0, Math.min(1, br.readSingle()));\n            color = Color.fromArgb(255, ss.truncate((255 * r)), ss.truncate((255 * g)), ss.truncate((255 * b)));\n        } else if ((chunkID === 17 || chunkID === 18) && chunkLength === 9) {\n            color = Color.fromArgb(255, br.readByte(), br.readByte(), br.readByte());\n        } else {\n            // Unknown color block; ignore it\n            br.readBytes(chunkLength - 6);\n        }\n        return color;\n    },\n\n    // Load a percentage chunk from a 3ds file\n    // A percentage may be stored as either a float or a 16-bit integer\n    _loadPercentageChunk: function (br) {\n        var chunkID = br.readUInt16();\n        var chunkLength = br.readUInt32();\n        var percentage = 0;\n        if (chunkID === 48 && chunkLength === 8) {\n            percentage = br.readUInt16();\n        } else if (chunkID === 49 && chunkLength === 10) {\n            percentage = br.readSingle();\n        } else {\n            // Unknown percentage block; ignore it\n            br.readBytes(chunkLength - 6);\n        }\n        return percentage;\n    },\n\n    _loadMeshFromObj: function (doc, filename) {\n        var $this = this;\n\n        this.filename = filename;\n        this._tourDocument = doc;\n        var blob = doc.getFileBlob(filename);\n        var chunck = new FileReader();\n        chunck.onloadend = function (e) {\n            $this._matFiles = $this._readObjMaterialsFromBin(ss.safeCast(chunck.result, String));\n            $this._matFileIndex = 0;\n\n            // pass data to LoadMatLib. It will chain load all the material\n            // files, then load the obj from this data - hack for having no\n            // synchronous blob reading in javascript\n            $this._loadMatLib(ss.safeCast(chunck.result, String));\n        };\n        chunck.readAsText(blob);\n    },\n\n    _readObjMaterialsFromBin: function (data) {\n        var matFiles = [];\n        var lines = data.split('\\n');\n        var $enum1 = ss.enumerate(lines);\n        while ($enum1.moveNext()) {\n            var lineraw = $enum1.current;\n            var line = ss.replaceString(lineraw, '  ', ' ');\n            var parts = ss.trim(line).split(' ');\n            if (parts.length > 0) {\n                switch (parts[0]) {\n                    case 'mtllib':\n                        var path = this.filename.substring(0, this.filename.lastIndexOf('\\\\') + 1);\n                        var matFile = path + parts[1];\n                        matFiles.push(matFile);\n                        break;\n                }\n            }\n        }\n        return matFiles;\n    },\n\n    _readObjFromBin: function (data) {\n        var objectFound = false;\n        var objects = [];\n        var currentObject = new ObjectNode();\n        currentObject.name = 'Default';\n        var triangleCount = 0;\n        var vertexCount = 0;\n        var vertexList = [];\n        var vertList = [];\n        var normList = [];\n        var uvList = [];\n        vertList.push(new Vector3d());\n        normList.push(new Vector3d());\n        uvList.push(new Vector2d());\n        var indexList = [];\n        var attribList = [];\n        var applyLists = [];\n        var applyListsIndex = [];\n        var materialNames = [];\n        var currentMaterialIndex = -1;\n        var currentMaterial = new Material();\n        var currentGroup = new Group();\n        var currentIndex = 0;\n\n        // initialize the default material\n        currentMaterial = new Material();\n        currentMaterial.diffuse = this.color;\n        currentMaterial.ambient = this.color;\n        currentMaterial.specular = Colors.get_white();\n        currentMaterial.specularSharpness = 30;\n        currentMaterial.opacity = 1;\n        currentMaterial.isDefault = true;\n\n        // initialize the group\n        currentGroup.startIndex = 0;\n        currentGroup.indexCount = 0;\n        currentGroup.materialIndex = 0;\n        var lines = data.split('\\n');\n        var $enum1 = ss.enumerate(lines);\n        while ($enum1.moveNext()) {\n            var lineraw = $enum1.current;\n            var line = ss.replaceString(lineraw, '  ', ' ');\n            var parts = ss.trim(line).split(' ');\n            if (parts.length > 0) {\n                switch (parts[0]) {\n                    case 'mtllib':\n                        // We have to pre-load these now in JavaScript, since we\n                        // can't synchronously load the file and we need file\n                        // contents to interpret the rest of this file\n                        break;\n                    case 'usemtl':\n                        var materialName = parts[1];\n                        if (ss.keyExists(this._matLib, materialName)) {\n                            if (currentMaterialIndex === -1 && currentIndex > 0) {\n                                this._addMaterial(currentMaterial);\n                                currentMaterialIndex++;\n                            }\n                            if (currentMaterialIndex > -1) {\n                                currentGroup.indexCount = currentIndex - currentGroup.startIndex;\n                                currentObject.drawGroup.push(currentGroup);\n                            }\n                            currentMaterialIndex++;\n                            if (ss.keyExists(this._matLib, materialName)) {\n                                currentMaterial = this._matLib[materialName];\n                                if (ss.keyExists(this._textureLib, materialName)) {\n                                    try {\n                                        if (!ss.keyExists(this._textureCache, this._textureLib[materialName])) {\n                                            var path = this.filename.substring(0, this.filename.lastIndexOf('\\\\') + 1);\n                                            var tex = this._tourDocument.getCachedTexture2d(path + this._textureLib[materialName]);\n                                            if (tex != null) {\n                                                this.meshFilenames.push(this._textureLib[materialName]);\n                                                this._textureCache[this._textureLib[materialName]] = tex;\n                                            }\n                                        }\n                                        this._meshTextures.push(this._textureCache[this._textureLib[materialName]]);\n                                    }\n                                    catch ($e2) {\n                                    }\n                                }\n                                this._addMaterial(currentMaterial);\n                                currentGroup = new Group();\n                                currentGroup.startIndex = currentIndex;\n                                currentGroup.indexCount = 0;\n                                currentGroup.materialIndex = currentMaterialIndex;\n                            }\n                        }\n                        break;\n                    case 'v':\n                        vertexCount++;\n                        if (this.flipHandedness) {\n                            vertList.push(Vector3d.create(-parseFloat(parts[1]), parseFloat(parts[2]), parseFloat(parts[3])));\n                        }\n                        else {\n                            vertList.push(Vector3d.create(parseFloat(parts[1]), parseFloat(parts[2]), parseFloat(parts[3])));\n                        }\n                        break;\n                    case 'vn':\n                        if (this.flipHandedness) {\n                            normList.push(Vector3d.create(-parseFloat(parts[1]), parseFloat(parts[2]), parseFloat(parts[3])));\n                        }\n                        else {\n                            normList.push(Vector3d.create(parseFloat(parts[1]), parseFloat(parts[2]), parseFloat(parts[3])));\n                        }\n                        break;\n                    case 'vt':\n                        uvList.push(Vector2d.create(parseFloat(parts[1]), (this.flipV) ? (1 - parseFloat(parts[2])) : parseFloat(parts[2])));\n                        break;\n                    case 'g':\n                    case 'o':\n                        if (objectFound) {\n                            if (currentMaterialIndex > -1) {\n                                currentGroup.indexCount = currentIndex - currentGroup.startIndex;\n                                currentObject.drawGroup.push(currentGroup);\n                                currentGroup = new Group();\n                                currentGroup.startIndex = currentIndex;\n                                currentGroup.indexCount = 0;\n                                currentGroup.materialIndex = currentMaterialIndex;\n                            }\n                            currentObject = new ObjectNode();\n                        }\n                        objectFound = true;\n                        if (parts.length > 1) {\n                            currentObject.name = parts[1];\n                        }\n                        else {\n                            currentObject.name = 'Unnamed';\n                        }\n                        objects.push(currentObject);\n                        break;\n                    case 'f':\n                        var indexiesA = this._getIndexies(parts[1]);\n                        var indexiesB = this._getIndexies(parts[2]);\n                        var indexiesC = this._getIndexies(parts[3]);\n                        vertexList.push(PositionNormalTextured.createUV(vertList[indexiesA[0]], normList[indexiesA[2]], uvList[indexiesA[1]]));\n                        vertexList.push(PositionNormalTextured.createUV(vertList[indexiesB[0]], normList[indexiesB[2]], uvList[indexiesB[1]]));\n                        vertexList.push(PositionNormalTextured.createUV(vertList[indexiesC[0]], normList[indexiesC[2]], uvList[indexiesC[1]]));\n                        if (this.flipHandedness) {\n                            indexList.push(currentIndex);\n                            indexList.push(currentIndex + 2);\n                            indexList.push(currentIndex + 1);\n                        }\n                        else {\n                            indexList.push(currentIndex);\n                            indexList.push(currentIndex + 1);\n                            indexList.push(currentIndex + 2);\n                        }\n                        triangleCount++;\n                        currentIndex += 3;\n                        if (parts.length > 4) {\n                            var partIndex = 4;\n                            while (partIndex < parts.length) {\n                                if (this.flipHandedness) {\n                                    indexiesA = this._getIndexies(parts[1]);\n                                    indexiesC = this._getIndexies(parts[partIndex]);\n                                    indexiesB = this._getIndexies(parts[partIndex - 1]);\n                                }\n                                else {\n                                    indexiesA = this._getIndexies(parts[1]);\n                                    indexiesB = this._getIndexies(parts[partIndex - 1]);\n                                    indexiesC = this._getIndexies(parts[partIndex]);\n                                }\n                                vertexList.push(PositionNormalTextured.createUV(vertList[indexiesA[0]], normList[indexiesA[2]], uvList[indexiesA[1]]));\n                                vertexList.push(PositionNormalTextured.createUV(vertList[indexiesB[0]], normList[indexiesB[2]], uvList[indexiesB[1]]));\n                                vertexList.push(PositionNormalTextured.createUV(vertList[indexiesC[0]], normList[indexiesC[2]], uvList[indexiesC[1]]));\n                                indexList.push(currentIndex);\n                                indexList.push(currentIndex + 1);\n                                indexList.push(currentIndex + 2);\n                                triangleCount++;\n                                currentIndex += 3;\n                                partIndex++;\n                            }\n                        }\n                        break;\n                }\n            }\n        }\n\n        if (!objectFound) {\n            // add the default object\n            objects.push(currentObject);\n        }\n\n        if (currentMaterialIndex === -1 && currentIndex > 0) {\n            this._addMaterial(currentMaterial);\n            currentMaterialIndex++;\n        }\n\n        if (currentMaterialIndex > -1) {\n            currentGroup.indexCount = (currentIndex - currentGroup.startIndex);\n            currentObject.drawGroup.push(currentGroup);\n        }\n\n        if (normList.length < 2) {\n            var degtorag = Math.PI / 180;\n            var creaseAngleRad = ((this.smooth) ? 170 * degtorag : 45 * degtorag);\n            var vertexNormals = this._calculateVertexNormalsMerged(vertexList, indexList, creaseAngleRad);\n            var newVertexList = [];\n            var newVertexCount = indexList.length;\n            for (var vertexIndex = 0; vertexIndex < newVertexCount; ++vertexIndex) {\n                var v = vertexList[indexList[vertexIndex]];\n                v.set_normal(vertexNormals[vertexIndex]);\n                newVertexList.push(v);\n            }\n            vertexList = newVertexList;\n        }\n        this._mesh = Mesh.create(vertexList, indexList);\n        var rootDummy = new ObjectNode();\n        rootDummy.name = 'Root';\n        rootDummy.parent = null;\n        rootDummy.level = -1;\n        rootDummy.drawGroup = null;\n        rootDummy.children = objects;\n        this.objects = [];\n        this.objects.push(rootDummy);\n        this._mesh.setObjects(this.objects);\n        this._mesh.commitToDevice();\n        this._dirty = false;\n        this._readyToRender = true;\n    },\n\n    _loadMatLib: function (data) {\n        var $this = this;\n\n        if (this._matFileIndex < this._matFiles.length) {\n            var filename = this._matFiles[this._matFileIndex++];\n            var blob = this._tourDocument.getFileBlob(filename);\n            var chunck = new FileReader();\n            chunck.onloadend = function (e) {\n                $this._readMatLibFromBin(ss.safeCast(chunck.result, String));\n                $this._loadMatLib(data);\n            };\n            chunck.readAsText(blob);\n        } else {\n            this._readObjFromBin(data);\n        }\n    },\n\n    _readMatLibFromBin: function (data) {\n        try {\n            var currentMaterial = new Material();\n            var materialName = '';\n            this._matLib = {};\n            this._textureLib = {};\n            var lines = data.split('\\n');\n            var $enum1 = ss.enumerate(lines);\n            while ($enum1.moveNext()) {\n                var lineraw = $enum1.current;\n                var line = lineraw;\n                var parts = ss.trim(line).split(' ');\n                if (parts.length > 0) {\n                    switch (parts[0]) {\n                        case 'newmtl':\n                            if (!ss.emptyString(materialName)) {\n                                this._matLib[materialName] = currentMaterial;\n                            }\n                            currentMaterial = new Material();\n                            currentMaterial.diffuse = Colors.get_white();\n                            currentMaterial.ambient = Colors.get_white();\n                            currentMaterial.specular = Colors.get_black();\n                            currentMaterial.specularSharpness = 30;\n                            currentMaterial.opacity = 1;\n                            materialName = parts[1];\n                            break;\n                        case 'Ka':\n                            currentMaterial.ambient = Color.fromArgb(255, Math.min(parseFloat(parts[1]) * 255, 255), Math.min(parseFloat(parts[2]) * 255, 255), Math.min(parseFloat(parts[3]) * 255, 255));\n                            break;\n                        case 'map_Kd':\n                            //ENDURE TEXTURES ARE NOT BLACK!\n                            currentMaterial.diffuse = Colors.get_white();\n                            var textureFilename = parts[1];\n                            for (var i = 2; i < parts.length; i++) {\n                                textureFilename += ' ' + parts[i];\n                            }\n                            var path = this.filename.substring(0, this.filename.lastIndexOf('\\\\') + 1);\n                            textureFilename = ss.replaceString(textureFilename, '/', '\\\\');\n                            if (textureFilename.indexOf('\\\\') !== -1) {\n                                textureFilename = textureFilename.substring(textureFilename.lastIndexOf('\\\\') + 1);\n                            }\n                            this._textureLib[materialName] = textureFilename;\n                            break;\n                        case 'Kd':\n                            currentMaterial.diffuse = Color.fromArgb(255, Math.min(parseFloat(parts[1]) * 255, 255), Math.min(parseFloat(parts[2]) * 255, 255), Math.min(parseFloat(parts[3]) * 255, 255));\n                            break;\n                        case 'Ks':\n                            currentMaterial.specular = Color.fromArgb(255, Math.min(parseFloat(parts[1]) * 255, 255), Math.min(parseFloat(parts[2]) * 255, 255), Math.min(parseFloat(parts[3]) * 255, 255));\n                            break;\n                        case 'd':\n                            // Where does this map?\n                            currentMaterial.opacity = parseFloat(parts[1]);\n                            break;\n                        case 'Tr':\n                            // Where does this map?\n                            currentMaterial.opacity = 1 - parseFloat(parts[1]);\n                            break;\n                        case 'illum':\n                            // Where does this map?\n                            var illuminationMode = parseInt(parts[1]);\n                            break;\n                        case 'sharpness':\n                            currentMaterial.specularSharpness = parseFloat(parts[1]);\n                            break;\n                        case 'Ns':\n                            currentMaterial.specularSharpness = 1 + 2 * parseFloat(parts[1]);\n                            currentMaterial.specularSharpness = Math.max(10, currentMaterial.specularSharpness);\n                            break;\n                    }\n                }\n            }\n            if (!ss.emptyString(materialName)) {\n                this._matLib[materialName] = currentMaterial;\n            }\n        }\n        catch ($e2) {\n        }\n    },\n\n    _getIndexies: function (data) {\n        var parts = ss.trim(data).split('/');\n        var indecies = new Array(3);\n        if (ss.emptyString(data)) {\n            return indecies;\n        }\n        if (parts.length > 0) {\n            indecies[0] = parseInt(parts[0]);\n        }\n        if (parts.length > 1) {\n            if (ss.emptyString(parts[1])) {\n                indecies[1] = 0;\n            }\n            else {\n                indecies[1] = parseInt(parts[1]);\n            }\n        }\n        if (parts.length > 2) {\n            indecies[2] = parseInt(parts[2]);\n        }\n        return indecies;\n    },\n\n    _loadMeshFrom3ds: function (doc, filename, scale) {\n        var $this = this;\n\n        this._tourDocument = doc;\n        var blob = doc.getFileBlob(filename);\n        var chunck = new FileReader();\n        chunck.onloadend = function (e) {\n            $this._read3dsFromBin(new BinaryReader(new Uint8Array(chunck.result)), scale);\n        };\n        chunck.readAsArrayBuffer(blob);\n    },\n\n    _read3dsFromBin: function (br, scale) {\n        var i;\n        var sectionID;\n        var sectionLength;\n        var name = '';\n        var material = '';\n        var triangleCount = 0;\n        var vertexCount = 0;\n        var vertexList = [];\n        var indexList = [];\n        var attribList = [];\n        var materialNames = [];\n        var currentMaterialIndex = -1;\n        var currentMaterial = new Material();\n        var attributeID = 0;\n        var count = 0;\n        var lastID = 0;\n        var exit = false;\n        var normalMapFound = false;\n        var offsetX = 0;\n        var offsetY = 0;\n        var offsetZ = 0;\n        var objects = [];\n        var currentObject = null;\n        var objHierarchy = [];\n        var objNames = [];\n        var objectTable = {};\n        var dummyCount = 0;\n        var length = br.get_length() - 1;\n        var startMapIndex = 0;\n        var startTriangleIndex = 0;\n\n        // Loop to scan the whole file\n        while (br.get_position() < length && !exit) {\n            sectionID = br.readUInt16();\n            sectionLength = br.readUInt32();\n            switch (sectionID) {\n                //This section the begining of the file\n                case 0x4D4D:\n                    break;\n\n                // This section marks the edit section containing the 3d models (3d3d get it? very punny!)\n                case 0x3D3D:\n                    break;\n\n                // Object section contains meshes, etc.\n                case 0x4000:\n                    name = '';\n                    var b;\n                    do {\n                        b = br.readByte();\n                        if (b > 0) {\n                            name += String.fromCharCode(b);\n                        }\n                    } while (!!b);\n                    currentObject = new ObjectNode();\n                    currentObject.name = name;\n                    objects.push(currentObject);\n                    if (!ss.keyExists(objectTable, currentObject.name)) {\n                        objectTable[currentObject.name] = currentObject;\n                    }\n                    break;\n\n                // Marks the start of a mesh section\n                case 0x4100:\n                    startMapIndex = vertexList.length;\n                    startTriangleIndex = Math.floor(indexList.length / 3);\n                    break;\n\n                // This section has the vertex list.. Maps to Vertext buffer in Direct3d\n                case 0x4110:\n                    vertexCount = br.readUInt16();\n                    for (i = 0; i < vertexCount; i++) {\n                        var x = br.readSingle() - offsetX;\n                        var y = br.readSingle() - offsetY;\n                        var z = br.readSingle() - offsetZ;\n                        var vert = PositionNormalTextured._create(x * scale, z * scale, y * scale, 0, 0, 0, 0, 0);\n                        vertexList.push(vert);\n                    }\n                    break;\n\n                // This section is a triangle index list. Maps to Index Buffer in Direct3d\n                case 0x4120:\n                    var triCount = br.readUInt16();\n                    triangleCount += triCount;\n                    for (i = 0; i < triCount; i++) {\n                        var aa = br.readUInt16() + startMapIndex;\n                        var bb = br.readUInt16() + startMapIndex;\n                        var cc = br.readUInt16() + startMapIndex;\n                        indexList.push(cc);\n                        indexList.push(bb);\n                        indexList.push(aa);\n                        var flags = br.readUInt16();\n                    }\n                    break;\n\n                // Material for face from start face to triCount\n                case 0x4130:\n                    material = '';\n                    i = 0;\n                    var b1;\n                    do {\n                        b1 = br.readByte();\n                        if (b1 > 0) {\n                            material += String.fromCharCode(b1);\n                        }\n                        i++;\n                    } while (!!b1);\n                    var triCount = br.readUInt16();\n                    var applyList = new Array(triCount);\n                    attributeID = Object3d._getMaterialID(material, materialNames);\n                    for (i = 0; i < triCount; i++) {\n                        applyList[i] = br.readUInt16() + startTriangleIndex;\n                    }\n                    currentObject.applyLists.push(applyList);\n                    currentObject.applyListsIndex.push(attributeID);\n                    break;\n\n                // Section for UV texture maps\n                case 0x4140:\n                    count = br.readUInt16();\n                    for (i = 0; i < count; i++) {\n                        var vert = vertexList[startMapIndex + i];\n                        var texCoord = Vector2d.create(br.readSingle(), (this.flipV) ? (1 - br.readSingle()) : br.readSingle());\n                        vertexList[startMapIndex + i] = PositionNormalTextured.createUV(vert.get_position(), new Vector3d(), texCoord);\n                    }\n                    break;\n\n                // Section for Smoothing Groups ??\n                case 0x4160:\n                    var mat = new Array(12);\n                    for (i = 0; i < 12; i++) {\n                        mat[i] = br.readSingle();\n                    }\n                    if (ss.keyExists(objectTable, name)) {\n                        objectTable[name].localMat = Matrix3d.create(mat[0], mat[1], mat[2], 0, mat[3], mat[4], mat[5], 0, mat[6], mat[7], mat[8], 0, mat[9], mat[10], mat[11], 1);\n                        objectTable[name].localMat.invert();\n                    }\n                    break;\n\n                // Materials library section\n                case 0xAFFF:\n                    break;\n\n                // Material Name\n                case 0xA000:\n                    var matName = '';\n                    i = 0;\n                    var b2;\n                    do {\n                        b2 = br.readByte();\n                        if (b2 > 0) {\n                            matName += String.fromCharCode(b2);\n                        }\n                        i++;\n                    } while (!!b2);\n                    materialNames.push(matName);\n                    if (currentMaterialIndex > -1) {\n                        this._addMaterial(currentMaterial);\n                    }\n                    currentMaterialIndex++;\n                    currentMaterial = new Material();\n                    currentMaterial.diffuse = Colors.get_white();\n                    currentMaterial.ambient = Colors.get_white();\n                    currentMaterial.specular = Colors.get_black();\n                    currentMaterial.specularSharpness = 30;\n                    currentMaterial.opacity = 1;\n                    break;\n\n                // Ambient color\n                case 0xA010:\n                    currentMaterial.ambient = this._loadColorChunk(br);\n                    break;\n\n                // Diffuse color\n                case 0xA020:\n                    currentMaterial.diffuse = this._loadColorChunk(br);\n                    break;\n\n                // Specular color\n                case 0xA030:\n                    currentMaterial.specular = this._loadColorChunk(br);\n                    break;\n\n                // Specular power\n                case 0xA040:\n                    // This is just a reasonable guess at the mapping from percentage to\n                    // specular exponent used by 3D Studio.\n                    currentMaterial.specularSharpness = 1 + 2 * this._loadPercentageChunk(br);\n\n                    // Minimum sharpness of 10 enforced here because of bad specular exponents\n                    // in ISS model.\n                    // TODO: Fix ISS and permit lower specular exponents here\n                    currentMaterial.specularSharpness = Math.max(10, currentMaterial.specularSharpness);\n                    break;\n\n                //Texture map file\n                case 0xA200:\n                    break;\n\n                // Texture file name\n                case 0xA300:\n                    var textureFilename = '';\n                    i = 0;\n                    var b2;\n                    do {\n                        b2 = br.readByte();\n                        if (b2 > 0) {\n                            textureFilename += String.fromCharCode(b2);\n                        }\n                        i++;\n                    } while (!!b2);\n                    var path = this.filename.substring(0, this.filename.lastIndexOf('\\\\') + 1);\n                    try {\n                        var tex = this._tourDocument.getCachedTexture2d(path + textureFilename);\n                        if (tex != null) {\n                            this._meshTextures.push(tex);\n                            this.meshFilenames.push(textureFilename);\n                            // The ISS model has black for the diffuse color; to work around this\n                            // we'll set the diffuse color to white when there's a texture present.\n                            // The correct fix is to modify the 3ds model of ISS.\n                            currentMaterial.diffuse = Colors.get_white();\n                        }\n                        else {\n                            this._meshTextures.push(null);\n                        }\n                    }\n                    catch ($e1) {\n                        this._meshTextures.push(null);\n                    }\n                    break;\n\n                // Bump map\n                case 0xA230:\n                    var percentage = this._loadPercentageChunk(br);\n                    var nameId = br.readUInt16();\n                    var nameBlockLength = br.readUInt32();\n                    var textureFilename = '';\n                    i = 0;\n                    var b2;\n                    do {\n                        b2 = br.readByte();\n                        if (b2 > 0) {\n                            textureFilename += String.fromCharCode(b2);\n                        }\n                        i++;\n                    } while (!!b2);\n                    var path = this.filename.substring(0, this.filename.lastIndexOf('\\\\') + 1);\n                    try {\n                        var tex = this._tourDocument.getCachedTexture2d(path + textureFilename);\n                        if (tex != null) {\n                            this._meshNormalMaps.push(tex);\n                            this.meshFilenames.push(textureFilename);\n                            // Indicate that we have a normal map so that we know to generate tangent vectors for the mesh\n                            normalMapFound = true;\n                        }\n                        else {\n                            this._meshNormalMaps.push(null);\n                        }\n                    }\n                    catch ($e2) {\n                        this._meshNormalMaps.push(null);\n                    }\n                    break;\n\n                // Specular map\n                case 0xA204:\n                    var strength = this._loadPercentageChunk(br);\n                    var nameId = br.readUInt16();\n                    var nameBlockLength = br.readUInt32();\n                    var textureFilename = '';\n                    i = 0;\n                    var b2;\n                    do {\n                        b2 = br.readByte();\n                        if (b2 > 0) {\n                            textureFilename += String.fromCharCode(b2);\n                        }\n                        i++;\n                    } while (!!b2);\n                    var path = this.filename.substring(0, this.filename.lastIndexOf('\\\\') + 1);\n                    try {\n                        var tex = this._tourDocument.getCachedTexture2d(path + textureFilename);\n                        if (tex != null) {\n                            this._meshSpecularTextures.push(tex);\n                            this.meshFilenames.push(textureFilename);\n                            // Set the current specular color from the specular texture strength\n                            var gray = ss.truncate((255.99 * strength / 100));\n                            currentMaterial.specular = Color.fromArgb(255, gray, gray, gray);\n                        }\n                        else {\n                            this._meshSpecularTextures.push(null);\n                        }\n                    }\n                    catch ($e3) {\n                        this._meshSpecularTextures.push(null);\n                    }\n                    break;\n\n                case 0xB000:\n                    break;\n                case 0xB002:\n                    break;\n                case 0xB010:\n                    name = '';\n                    i = 0;\n                    var b1;\n                    do {\n                        b1 = br.readByte();\n                        if (b1 > 0) {\n                            name += String.fromCharCode(b1);\n                        }\n                        i++;\n                    } while (!!b1);\n                    var dum1 = br.readUInt16();\n                    var dum2 = br.readUInt16();\n                    var level = br.readUInt16();\n                    if (level === 65535) {\n                        level = -1;\n                    }\n                    if (ss.startsWith(name, '$')) {\n                        dummyCount++;\n                    }\n                    else {\n                        objNames.push(name);\n                    }\n                    objHierarchy.push(level);\n                    if (ss.keyExists(objectTable, name)) {\n                        objectTable[name].level = level;\n                    }\n                    break;\n\n                case 0xB011:\n                    name = '';\n                    i = 0;\n                    var b1;\n                    do {\n                        b1 = br.readByte();\n                        if (b1 > 0) {\n                            name += String.fromCharCode(b1);\n                        }\n                        i++;\n                    } while (!!b1);\n                    objNames.push('$$$' + name);\n                    break;\n\n                case 0xB013:\n                    // pivot point\n                    var points = new Array(3);\n                    for (i = 0; i < 3; i++) {\n                        points[i] = br.readSingle();\n                    }\n                    if (ss.keyExists(objectTable, name)) {\n                        objectTable[name].pivotPoint = Vector3d.create(-points[0], -points[1], -points[2]);\n                    }\n                    break;\n\n                case 0xB020:\n                    var pos = new Array(8);\n                    for (i = 0; i < 8; i++) {\n                        pos[i] = br.readSingle();\n                    }\n                    break;\n\n                // If we don't recognize a section then jump over it. Subract the header from the section length\n                default:\n                    br.seekRelative((sectionLength - 6));\n                    break;\n            }\n\n            lastID = sectionID;\n        }\n\n        br.close();\n        if (currentMaterialIndex > -1) {\n            this._addMaterial(currentMaterial);\n        }\n\n        // Generate vertex normals\n\n        // Vertex normals are computed by averaging the normals of all faces\n        // with an angle between them less than the crease angle. By setting\n        // the crease angle to 0 degrees, the model will have a faceted appearance.\n        // Right now, the smooth flag selects between one of two crease angles,\n        // but some smoothing is always applied.\n\n        var degtorag = Math.PI / 180;\n        var creaseAngleRad = ((this.smooth) ? 70 * degtorag : 45 * degtorag);\n        var vertexNormals = this._calculateVertexNormalsMerged(vertexList, indexList, creaseAngleRad);\n        var newVertexList = [];\n        var newVertexCount = triangleCount * 3;\n        for (var vertexIndex = 0; vertexIndex < newVertexCount; ++vertexIndex) {\n            var v = vertexList[indexList[vertexIndex]];\n            v.set_normal(vertexNormals[vertexIndex]);\n            newVertexList.push(v);\n        }\n\n        // Use the triangle mesh and material assignments to create a single\n        // index list for the mesh.\n        var newIndexList = [];\n        var $enum4 = ss.enumerate(objects);\n        while ($enum4.moveNext()) {\n            var node = $enum4.current;\n            var materialGroups = [];\n            for (i = 0; i < node.applyLists.length; i++) {\n                var matId = node.applyListsIndex[i];\n                var startIndex = newIndexList.length;\n                var $enum5 = ss.enumerate(node.applyLists[i]);\n                while ($enum5.moveNext()) {\n                    var triangleIndex = $enum5.current;\n                    newIndexList.push((triangleIndex * 3));\n                    newIndexList.push((triangleIndex * 3 + 1));\n                    newIndexList.push((triangleIndex * 3 + 2));\n                }\n                var group = new Group();\n                group.startIndex = startIndex;\n                group.indexCount = node.applyLists[i].length * 3;\n                group.materialIndex = matId;\n                materialGroups.push(group);\n            }\n            node.drawGroup = materialGroups;\n        }\n\n        // Turn objects into tree\n        var nodeStack = new ss.Stack();\n        var nodeTreeRoot = [];\n        var rootDummy = new ObjectNode();\n        rootDummy.name = 'Root';\n        rootDummy.parent = null;\n        rootDummy.level = -1;\n        rootDummy.drawGroup = null;\n        var currentLevel = -1;\n        nodeStack.push(rootDummy);\n        nodeTreeRoot.push(rootDummy);\n        for (i = 0; i < objHierarchy.length; i++) {\n            var level = objHierarchy[i];\n            if (level <= currentLevel) {\n                // pop out all the nodes to intended parent\n                while (level <= nodeStack.peek().level && nodeStack.count > 1) {\n                    nodeStack.pop();\n                }\n                currentLevel = level;\n            }\n            if (ss.startsWith(objNames[i], '$$$')) {\n                var dummy = new ObjectNode();\n                dummy.name = ss.replaceString(objNames[i], '$$$', '');\n                dummy.parent = nodeStack.peek();\n                dummy.parent.children.push(dummy);\n                dummy.level = currentLevel = level;\n                dummy.drawGroup = null;\n                nodeStack.push(dummy);\n            }\n            else {\n                objectTable[objNames[i]].level = currentLevel = level;\n                objectTable[objNames[i]].parent = nodeStack.peek();\n                objectTable[objNames[i]].parent.children.push(objectTable[objNames[i]]);\n                nodeStack.push(objectTable[objNames[i]]);\n            }\n        }\n        if (!objHierarchy.length) {\n            var $enum6 = ss.enumerate(objects);\n            while ($enum6.moveNext()) {\n                var node = $enum6.current;\n                rootDummy.children.push(node);\n                node.parent = rootDummy;\n            }\n        }\n        if (normalMapFound) {\n            // If we've got a normal map, we want to generate tangent vectors for the mesh\n\n            // Mapping of vertices to geometry is extremely straightforward now, but this could\n            // change when a mesh optimization step is introduced.\n            var tangentIndexList = [];\n            for (var tangentIndex = 0; tangentIndex < newVertexCount; ++tangentIndex) {\n                tangentIndexList.push(tangentIndex);\n            }\n            var tangents = this._calculateVertexTangents(newVertexList, tangentIndexList, creaseAngleRad);\n\n            // Copy the tangents in the vertex data list\n            var vertices = new Array(newVertexList.length);\n            var vertexIndex = 0;\n            var $enum7 = ss.enumerate(newVertexList);\n            while ($enum7.moveNext()) {\n                var v = $enum7.current;\n                var tvertex = new PositionNormalTexturedTangent(v.get_position(), v.get_normal(), Vector2d.create(v.tu, v.tv), tangents[vertexIndex]);\n                vertices[vertexIndex] = tvertex;\n                ++vertexIndex;\n            }\n            this._mesh = Mesh.createTangent(vertices, newIndexList);\n        } else {\n            this._mesh = Mesh.create(newVertexList, newIndexList);\n        }\n        this.objects = nodeTreeRoot;\n        this._mesh.setObjects(nodeTreeRoot);\n        this._mesh.commitToDevice();\n        this._dirty = false;\n        this._readyToRender = true;\n    },\n\n    _offsetObjects: function (vertList, objects, offsetMat, offsetPoint) {\n        var $enum1 = ss.enumerate(objects);\n        while ($enum1.moveNext()) {\n            var node = $enum1.current;\n            var matLoc = node.localMat;\n            this._offsetObjects(vertList, node.children, matLoc, Vector3d.addVectors(node.pivotPoint, offsetPoint));\n            var $enum2 = ss.enumerate(node.drawGroup);\n            while ($enum2.moveNext()) {\n                var group = $enum2.current;\n                var end = group.startIndex + group.indexCount;\n                for (var i = group.startIndex; i < end; i++) {\n                    var vert = vertList[i];\n                    vert.set_position(Vector3d.addVectors(vert.get_position(), Vector3d.addVectors(node.pivotPoint, offsetPoint)));\n                    vertList[i] = vert;\n                }\n            }\n        }\n    },\n\n    // Set up lighting state to account for:\n    //   - Light reflected from a nearby planet\n    //   - Shadows cast by nearby planets\n    setupLighting: function (renderContext) {\n        var objPosition = Vector3d.create(renderContext.get_world().get_offsetX(), renderContext.get_world().get_offsetY(), renderContext.get_world().get_offsetZ());\n        var objToLight = Vector3d.subtractVectors(objPosition, renderContext.get_reflectedLightPosition());\n        var sunPosition = Vector3d.subtractVectors(renderContext.get_sunPosition(), renderContext.get_reflectedLightPosition());\n        var cosPhaseAngle = (sunPosition.length() <= 0) ? 1 : Vector3d.dot(objToLight, sunPosition) / (objToLight.length() * sunPosition.length());\n        var reflectedLightFactor = Math.max(0, cosPhaseAngle);\n        reflectedLightFactor = Math.sqrt(reflectedLightFactor); // Tweak falloff of reflected light\n        var hemiLightFactor = 0;\n\n        // 1. Reduce the amount of sunlight when the object is in the shadow of a planet\n        // 2. Introduce some lighting due to scattering by the planet's atmosphere if it's\n        //    close to the surface.\n        var sunlightFactor = 1;\n        if (renderContext.get_occludingPlanetRadius() > 0) {\n            var objAltitude = Vector3d.subtractVectors(objPosition, renderContext.get_occludingPlanetPosition()).length() - renderContext.get_occludingPlanetRadius();\n            hemiLightFactor = Math.max(0, Math.min(1, 1 - (objAltitude / renderContext.get_occludingPlanetRadius()) * 300));\n            reflectedLightFactor *= (1 - hemiLightFactor);\n\n            // Compute the distance from the center of the object to the line between the sun and occluding planet\n            // We're assuming that the radius of the object is very small relative to Earth;\n            // for large objects the amount of shadow will vary, and we should use circular\n            // eclipse shadows.\n            var sunToPlanet = Vector3d.subtractVectors(renderContext.get_occludingPlanetPosition(), renderContext.get_sunPosition());\n            var objToPlanet = Vector3d.subtractVectors(renderContext.get_occludingPlanetPosition(), objPosition);\n            var hemiLightDirection = Vector3d.create(-objToPlanet.x, -objToPlanet.y, -objToPlanet.z);\n            hemiLightDirection.normalize();\n            renderContext.set_hemisphereLightUp(hemiLightDirection);\n            var objToSun = Vector3d.subtractVectors(renderContext.get_sunPosition(), objPosition);\n            var sunPlanetDistance = sunToPlanet.length();\n            var t = -Vector3d.dot(objToSun, sunToPlanet) / (sunPlanetDistance * sunPlanetDistance);\n            if (t > 1) {\n                // Object is on the side of the planet opposite the sun, so a shadow is possible\n\n                // Compute the position of the object projected onto the shadow axis\n                var shadowAxisPoint = Vector3d.addVectors(renderContext.get_sunPosition(), Vector3d.multiplyScalar(sunToPlanet, t));\n\n                // d is the distance to the shadow axis\n                var d = Vector3d.subtractVectors(shadowAxisPoint, objPosition).length();\n\n                // s is the distance from the sun along the shadow axis\n                var s = Vector3d.subtractVectors(shadowAxisPoint, renderContext.get_sunPosition()).length();\n\n                // Use the sun's radius to accurately compute the penumbra and umbra cones\n                var solarRadius = 0.004645784;\n                var penumbraRadius = renderContext.get_occludingPlanetRadius() + (t - 1) * (renderContext.get_occludingPlanetRadius() + solarRadius);\n                var umbraRadius = renderContext.get_occludingPlanetRadius() + (t - 1) * (renderContext.get_occludingPlanetRadius() - solarRadius);\n                if (d < penumbraRadius) {\n                    // The object is inside the penumbra, so it is at least partly shadowed\n                    var minimumShadow = 0;\n                    if (umbraRadius < 0) {\n                        // No umbra at this point; degree of shadowing is limited because the\n                        // planet doesn't completely cover the sun even when the object is positioned\n                        // exactly on the shadow axis.\n                        var occlusion = Math.pow(1 / (1 - umbraRadius), 2);\n                        umbraRadius = 0;\n                        minimumShadow = 1 - occlusion;\n                    }\n\n                    // Approximate the amount of shadow with linear interpolation. The accurate\n                    // calculation involves computing the area of the intersection of two circles.\n                    var u = Math.max(0, umbraRadius);\n                    sunlightFactor = Math.max(minimumShadow, (d - u) / (penumbraRadius - u));\n                    var gray = ss.truncate((255.99 * sunlightFactor));\n                    renderContext.set_sunlightColor(Color.fromArgb(255, gray, gray, gray));\n\n                    // Reduce sky-scattered light as well\n                    hemiLightFactor *= sunlightFactor;\n                }\n            }\n        }\n        renderContext.set_reflectedLightColor(Color.fromArgb(255, ss.truncate((renderContext.get_reflectedLightColor().r * reflectedLightFactor)), ss.truncate((renderContext.get_reflectedLightColor().g * reflectedLightFactor)), ss.truncate((renderContext.get_reflectedLightColor().b * reflectedLightFactor))));\n        renderContext.set_hemisphereLightColor(Color.fromArgb(255, ss.truncate((renderContext.get_hemisphereLightColor().r * hemiLightFactor)), ss.truncate((renderContext.get_hemisphereLightColor().g * hemiLightFactor)), ss.truncate((renderContext.get_hemisphereLightColor().b * hemiLightFactor))));\n    },\n\n    render: function (renderContext, opacity) {\n        if (!this._readyToRender) {\n            return;\n        }\n        if (this._dirty && !this.issLayer) {\n            this._reload();\n        }\n        var oldWorld = renderContext.get_world();\n        var offset = this._mesh.boundingSphere.center;\n        var unitScale = 1;\n        if (this._mesh.boundingSphere.radius > 0) {\n            unitScale = 1 / this._mesh.boundingSphere.radius;\n        }\n        renderContext.set_world(Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(Matrix3d.translation(Vector3d.create(-offset.x, -offset.y, -offset.z)), Matrix3d._scaling(unitScale, unitScale, unitScale)), oldWorld));\n        var worldView = Matrix3d.multiplyMatrix(renderContext.get_world(), renderContext.get_view());\n        var v = worldView.transform(Vector3d.get_empty());\n        var scaleFactor = Math.sqrt(worldView.get_m11() * worldView.get_m11() + worldView.get_m22() * worldView.get_m22() + worldView.get_m33() * worldView.get_m33()) / unitScale;\n        var dist = v.length();\n        var radius = scaleFactor;\n\n        // Calculate pixelsPerUnit which is the number of pixels covered\n        // by an object 1 AU at the distance of the planet center from\n        // the camera. This calculation works regardless of the projection\n        // type.\n        var viewportHeight = ss.truncate(renderContext.height);\n        var p11 = renderContext.get_projection().get_m11();\n        var p34 = renderContext.get_projection().get_m34();\n        var p44 = renderContext.get_projection().get_m44();\n        var w = Math.abs(p34) * dist + p44;\n        var pixelsPerUnit = (p11 / w) * viewportHeight;\n        var radiusInPixels = (radius * pixelsPerUnit);\n        if (radiusInPixels < 0.5) {\n            // Too small to be visible; skip rendering\n            return;\n        }\n\n        // These colors can be modified by shadows, distance from planet, etc. Restore\n        // the original values after rendering.\n        var savedSunlightColor = renderContext.get_sunlightColor();\n        var savedReflectedColor = renderContext.get_reflectedLightColor();\n        var savedHemiColor = renderContext.get_hemisphereLightColor();\n        if (Settings.get_current().get_solarSystemLighting()) {\n            this.setupLighting(renderContext);\n            if (!this.useCurrentAmbient) {\n                renderContext.set_ambientLightColor(Color.fromArgb(255, 11, 11, 11));\n            }\n        } else {\n            // No lighting: set ambient light to white and turn off all other light sources\n            renderContext.set_sunlightColor(Colors.get_black());\n            renderContext.set_reflectedLightColor(Colors.get_black());\n            renderContext.set_hemisphereLightColor(Colors.get_black());\n            renderContext.set_ambientLightColor(Colors.get_white());\n        }\n        if (this._mesh == null) {\n            return;\n        }\n        ModelShader.minLightingBrightness = 0.1;\n        var count = this._meshMaterials.length;\n        this._mesh.beginDrawing(renderContext);\n        if (count > 0) {\n            for (var i = 0; i < this._meshMaterials.length; i++) {\n                if (this._meshMaterials[i].isDefault) {\n                    var mat = this._meshMaterials[i];\n                    mat.diffuse = this.color;\n                    mat.ambient = this.color;\n                    this._meshMaterials[i] = mat;\n                }\n\n                // Set the material and texture for this subset\n                renderContext.setMaterial(this._meshMaterials[i], this._meshTextures[i], this._meshSpecularTextures[i], this._meshNormalMaps[i], opacity);\n                if (this._mesh.vertexBuffer != null) {\n                    ModelShader.use(renderContext, this._mesh.vertexBuffer.vertexBuffer, this._mesh.indexBuffer.buffer, (this._meshTextures[i] != null) ? this._meshTextures[i].texture2d : null, opacity, false, 32);\n                }\n                else {\n                    ModelShader.use(renderContext, this._mesh.tangentVertexBuffer.vertexBuffer, this._mesh.indexBuffer.buffer, (this._meshTextures[i] != null) ? this._meshTextures[i].texture2d : null, opacity, false, 44);\n                }\n                renderContext.preDraw();\n                this._mesh.drawSubset(renderContext, i);\n            }\n        } else {\n            renderContext.preDraw();\n            for (var i = 0; i < this._meshTextures.length; i++) {\n                if (this._meshTextures[i] != null) {\n                    renderContext.set_mainTexture(this._meshTextures[i]);\n                    if (this._mesh.vertexBuffer != null) {\n                        ModelShader.use(renderContext, this._mesh.vertexBuffer.vertexBuffer, this._mesh.indexBuffer.buffer, (this._meshTextures[i] != null) ? this._meshTextures[i].texture2d : null, opacity, false, 32);\n                    }\n                    else {\n                        ModelShader.use(renderContext, this._mesh.tangentVertexBuffer.vertexBuffer, this._mesh.indexBuffer.buffer, (this._meshTextures[i] != null) ? this._meshTextures[i].texture2d : null, opacity, false, 44);\n                    }\n                }\n                renderContext.preDraw();\n                this._mesh.drawSubset(renderContext, i);\n            }\n        }\n        renderContext.set_world(oldWorld);\n        renderContext.set_sunlightColor(savedSunlightColor);\n        renderContext.set_reflectedLightColor(savedReflectedColor);\n        renderContext.set_hemisphereLightColor(savedHemiColor);\n        renderContext.set_ambientLightColor(Colors.get_black());\n    },\n\n    dispose: function () {\n        if (this._mesh != null) {\n            this._mesh.dispose();\n            this._mesh = null;\n        }\n        var $enum1 = ss.enumerate(ss.keys(this._textureCache));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var tex = this._textureCache[key];\n            if (tex != null) {\n                tex.dispose();\n            }\n        }\n        ss.clearKeys(this._textureCache);\n        Object3d._disposeTextureList(this._meshTextures);\n        Object3d._disposeTextureList(this._meshSpecularTextures);\n        Object3d._disposeTextureList(this._meshNormalMaps);\n        this._meshMaterials.length = 0;\n        this._dirty = true;\n    }\n};\n\nregisterType(\"Object3d\", [Object3d, Object3d$, null]);\n\n\n// wwtlib.ObjectNode\n\nexport function ObjectNode() {\n    this.level = -1;\n    this.children = [];\n    this.enabled = true;\n    this.drawGroup = [];\n    this.applyLists = [];\n    this.applyListsIndex = [];\n}\n\nvar ObjectNode$ = {};\n\nregisterType(\"ObjectNode\", [ObjectNode, ObjectNode$, null]);\n\n\n// wwtlib.Object3dLayerUI\n\nexport function Object3dLayerUI(layer) {\n    this._layer$1 = null;\n    this._opened$1 = true;\n    this._callbacks$1 = null;\n    LayerUI.call(this);\n    this._layer$1 = layer;\n}\n\nvar Object3dLayerUI$ = {\n    setUICallbacks: function (callbacks) {\n        this._callbacks$1 = callbacks;\n    },\n\n    get_hasTreeViewNodes: function () {\n        return true;\n    },\n\n    getTreeNodes: function () {\n        var nodes = [];\n        if (this._layer$1.object3d.objects.length > 0 && this._layer$1.object3d.objects[0].children != null) {\n            this._loadTree$1(nodes, this._layer$1.object3d.objects[0].children);\n        }\n        return nodes;\n    },\n    _loadTree$1: function (nodes, children) {\n        var $enum1 = ss.enumerate(children);\n        while ($enum1.moveNext()) {\n            var child = $enum1.current;\n            var node = new LayerUITreeNode();\n            node.set_name(child.name);\n            node.set_tag(child);\n            node.set_checked(child.enabled);\n            node.add_nodeSelected(ss.bind('_node_NodeSelected$1', this));\n            node.add_nodeChecked(ss.bind('_node_NodeChecked$1', this));\n            nodes.push(node);\n            this._loadTree$1(node.get_nodes(), child.children);\n        }\n    },\n    _node_NodeChecked$1: function (node, newState) {\n        var child = node.get_tag();\n        if (child != null) {\n            child.enabled = newState;\n        }\n    },\n    _node_NodeSelected$1: function (node) {\n        if (this._callbacks$1 != null) {\n            var child = node.get_tag();\n            var rowData = {};\n            rowData['Name'] = child.name;\n            rowData['Pivot.X'] = child.pivotPoint.x.toString();\n            rowData['Pivot.Y'] = child.pivotPoint.y.toString();\n            rowData['Pivot.Z'] = child.pivotPoint.z.toString();\n            this._callbacks$1.showRowData(rowData);\n        }\n    },\n\n    getNodeContextMenu: function (node) {\n        return LayerUI.prototype.getNodeContextMenu.call(this, node);\n    }\n};\n\nregisterType(\"Object3dLayerUI\", [Object3dLayerUI, Object3dLayerUI$, LayerUI]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Arbitrary orbits and how we render them.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { Vector3d, Matrix3d } from \"../double3d.js\";\nimport { WEBGL } from \"../graphics/webgl_constants.js\";\nimport { EllipseShader } from \"../graphics/shaders.js\";\nimport { PositionVertexBuffer } from \"../graphics/gl_buffers.js\";\nimport { Color, Colors } from \"../color.js\";\nimport { Coordinates } from \"../coordinates.js\";\nimport { SpaceTimeController } from \"../space_time_controller.js\";\n\n\n// wwtlib.Orbit\n\nexport function Orbit(elements, segments, color, thickness, scale) {\n    this._elements = null;\n    this._orbitColor = Colors.get_white();\n    this._scale = 0;\n    this._segmentCount = 0;\n    this._elements = elements;\n    this._segmentCount = segments;\n    this._orbitColor = color;\n    this._scale = scale;\n}\n\n// Convert from standard coordinate system with z normal to the orbital plane\n// to WWT's system where y is the normal. Note that this transformation is not\n// a pure rotation: it incorporates a reflection, because the two systems have\n// different handedness.\nOrbit._orbitalToWwt = Matrix3d.create(1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1);\nOrbit._initBegun = false;\n\nvar Orbit$ = {\n    cleanUp: function () { },\n\n    // Get the radius of a sphere (centered at a focus of the ellipse) that is\n    // large enough to contain the orbit. The value returned has units of the orbit scale.\n    get_boundingRadius: function () {\n        if (this._elements != null) {\n            return (this._elements.a * (1 + this._elements.e)) / this._scale;\n        } else {\n            return 0;\n        }\n    },\n\n    draw3D: function (renderContext, opacity, centerPoint) {\n        // Extra transformation required because the ellipse shader uses the xy-plane, but WWT uses the\n        // xz-plane as the reference.\n        var orbitalPlaneOrientation = Matrix3d.multiplyMatrix(Matrix3d._rotationZ(Coordinates.degreesToRadians(this._elements.w)), Matrix3d.multiplyMatrix(Matrix3d._rotationX(Coordinates.degreesToRadians(this._elements.i)), Matrix3d._rotationZ(Coordinates.degreesToRadians(this._elements.omega))));\n        orbitalPlaneOrientation = Matrix3d.multiplyMatrix(orbitalPlaneOrientation, Orbit._orbitalToWwt);\n\n        var worldMatrix = Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(orbitalPlaneOrientation, Matrix3d.translation(centerPoint)), renderContext.get_world());\n        var M = this._elements.n * (SpaceTimeController.get_jNow() - this._elements.t);\n        var F = 1;\n        if (M < 0) {\n            F = -1;\n        }\n        M = Math.abs(M) / 360;\n        M = (M - ss.truncate(M)) * 360 * F;\n        var color = Color._fromArgbColor(ss.truncate((opacity * 255)), this._orbitColor);\n\n        // Newton-Raphson iteration to solve Kepler's equation.\n        // This is faster than calling CAAKepler.Calculate(), and 5 steps\n        // is more than adequate for draw the orbit paths of small satellites\n        // (which are ultimately rendered using single-precision floating point.)\n        M = Coordinates.degreesToRadians(M);\n        var E = M;\n        for (var i = 0; i < 5; i++) {\n            E += (M - E + this._elements.e * Math.sin(E)) / (1 - this._elements.e * Math.cos(E));\n        }\n        EllipseRenderer.drawEllipse(renderContext, this._elements.a / this._scale, this._elements.e, E, color, worldMatrix);\n    }\n};\n\nregisterType(\"Orbit\", [Orbit, Orbit$, null]);\n\n\n// wwtlib.EllipseRenderer\n\nexport function EllipseRenderer() { }\n\n// Draw an ellipse with the specified semi-major axis and eccentricity. The orbit is drawn over a single period,\n// fading from full brightness at the given eccentric anomaly.\n//\n// In order to match exactly the position at which a planet is drawn, the planet's position at the current time\n// must be passed as a parameter. positionNow is in the current coordinate system of the render context, not the\n// translated and rotated system of the orbital plane.\nEllipseRenderer.drawEllipseWithPosition = function (renderContext, semiMajorAxis, eccentricity, eccentricAnomaly, color, worldMatrix, positionNow) {\n    if (EllipseRenderer._ellipseShader == null) {\n        EllipseRenderer._ellipseShader = new EllipseShader();\n    }\n    if (EllipseRenderer._ellipseVertexBuffer == null) {\n        EllipseRenderer._ellipseVertexBuffer = EllipseRenderer.createEllipseVertexBuffer(500);\n    }\n    var savedWorld = renderContext.get_world();\n    renderContext.set_world(worldMatrix);\n    renderContext.gl.bindBuffer(WEBGL.ARRAY_BUFFER, EllipseRenderer._ellipseVertexBuffer.vertexBuffer);\n    renderContext.gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, null);\n    EllipseShader.use(renderContext, semiMajorAxis, eccentricity, eccentricAnomaly, color, 1, savedWorld, positionNow);\n    renderContext.gl.drawArrays(WEBGL.LINE_STRIP, 0, EllipseRenderer._ellipseVertexBuffer.count);\n    renderContext.set_world(savedWorld);\n};\n\n// This version of DrawEllipse works without a 'head' point\nEllipseRenderer.drawEllipse = function (renderContext, semiMajorAxis, eccentricity, eccentricAnomaly, color, worldMatrix) {\n    if (EllipseRenderer._ellipseShader == null) {\n        EllipseRenderer._ellipseShader = new EllipseShader();\n    }\n    if (EllipseRenderer._ellipseWithoutStartPointVertexBuffer == null) {\n        EllipseRenderer._ellipseWithoutStartPointVertexBuffer = EllipseRenderer.createEllipseVertexBufferWithoutStartPoint(360);\n    }\n    var savedWorld = renderContext.get_world();\n    renderContext.set_world(worldMatrix);\n    renderContext.gl.bindBuffer(WEBGL.ARRAY_BUFFER, EllipseRenderer._ellipseWithoutStartPointVertexBuffer.vertexBuffer);\n    renderContext.gl.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, null);\n    EllipseShader.use(renderContext, semiMajorAxis, eccentricity, eccentricAnomaly, color, 1, savedWorld, Vector3d.create(0, 0, 0));\n    renderContext.gl.drawArrays(WEBGL.LINE_STRIP, 0, EllipseRenderer._ellipseWithoutStartPointVertexBuffer.count - 1);\n    renderContext.set_world(savedWorld);\n};\n\nEllipseRenderer.createEllipseVertexBuffer = function (vertexCount) {\n    var vb = new PositionVertexBuffer(vertexCount);\n    var verts = vb.lock();\n    var index = 0;\n\n    // Pack extra samples into the front of the orbit to avoid obvious segmentation\n    // when viewed from near the planet or moon.\n    for (var i = 0; i < vertexCount / 2; ++i) {\n        verts[index++] = Vector3d.create(2 * i / vertexCount * 0.05, 0, 0);\n    }\n    for (var i = 0; i < vertexCount / 2; ++i) {\n        verts[index++] = Vector3d.create(2 * i / vertexCount * 0.95 + 0.05, 0, 0);\n    }\n    vb.unlock();\n    return vb;\n};\n\nEllipseRenderer.createEllipseVertexBufferWithoutStartPoint = function (vertexCount) {\n    var vb = new PositionVertexBuffer(vertexCount);\n    var verts = vb.lock();\n\n    // Setting a non-zero value will prevent the ellipse shader from using the 'head' point\n    verts[0] = Vector3d.create(1E-06, 0, 0);\n    for (var i = 1; i < vertexCount; ++i) {\n        verts[i] = Vector3d.create(2 * i / vertexCount, 0, 0);\n    }\n    vb.unlock();\n    return vb;\n};\n\nvar EllipseRenderer$ = {};\n\nregisterType(\"EllipseRenderer\", [EllipseRenderer, EllipseRenderer$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A layer that renders an orbit.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { Vector3d } from \"../double3d.js\";\nimport { Color, Colors } from \"../color.js\";\nimport { Layer } from \"./layer.js\";\nimport { LayerUI, LayerUITreeNode } from \"./layer_ui.js\";\nimport { Orbit } from \"./orbit.js\";\nimport { ReferenceFrame } from \"./reference_frame.js\";\n\n\n// wwtlib.OrbitLayer\n\nexport function OrbitLayer() {\n    this._frames$1 = [];\n    this._primaryUI$1 = null;\n    this._pointOpacity$1 = 1;\n    this._pointColor$1 = Colors.get_yellow();\n    this._filename$1 = '';\n    this._dataFile$1 = '';\n    Layer.call(this);\n}\n\nvar OrbitLayer$ = {\n    get_frames: function () {\n        return this._frames$1;\n    },\n\n    set_frames: function (value) {\n        this._frames$1 = value;\n        return value;\n    },\n\n    getPrimaryUI: function () {\n        if (this._primaryUI$1 == null) {\n            this._primaryUI$1 = new OrbitLayerUI(this);\n        }\n        return this._primaryUI$1;\n    },\n\n    cleanUp: function () {\n        var $enum1 = ss.enumerate(this._frames$1);\n        while ($enum1.moveNext()) {\n            var frame = $enum1.current;\n            if (frame.get_orbit() != null) {\n                frame.get_orbit().cleanUp();\n                frame.set_orbit(null);\n            }\n        }\n    },\n\n    writeLayerProperties: function (xmlWriter) {\n        xmlWriter._writeAttributeString('PointOpacity', this.get_pointOpacity().toString());\n        xmlWriter._writeAttributeString('PointColor', this._pointColor$1.save());\n    },\n\n    get_pointOpacity: function () {\n        return this._pointOpacity$1;\n    },\n\n    set_pointOpacity: function (value) {\n        if (this._pointOpacity$1 !== value) {\n            this.version++;\n            this._pointOpacity$1 = value;\n        }\n        return value;\n    },\n\n    get_pointColor: function () {\n        return this._pointColor$1;\n    },\n\n    set_pointColor: function (value) {\n        if (this._pointColor$1 !== value) {\n            this.version++;\n            this._pointColor$1 = value;\n        }\n        return value;\n    },\n\n    getParams: function () {\n        var paramList = new Array(6);\n        paramList[0] = this._pointOpacity$1;\n        paramList[1] = this.get_color().r / 255;\n        paramList[2] = this.get_color().g / 255;\n        paramList[3] = this.get_color().b / 255;\n        paramList[4] = this.get_color().a / 255;\n        paramList[5] = this.get_opacity();\n        return paramList;\n    },\n\n    getParamNames: function () {\n        return ['PointOpacity', 'Color.Red', 'Color.Green', 'Color.Blue', 'Color.Alpha', 'Opacity'];\n    },\n\n    setParams: function (paramList) {\n        if (paramList.length === 6) {\n            this._pointOpacity$1 = paramList[0];\n            this.set_opacity(paramList[5]);\n            var color = Color.fromArgb(ss.truncate((paramList[4] * 255)), ss.truncate((paramList[1] * 255)), ss.truncate((paramList[2] * 255)), ss.truncate((paramList[3] * 255)));\n            this.set_color(color);\n        }\n    },\n\n    initializeFromXml: function (node) {\n        this.set_pointOpacity(parseFloat(node.attributes.getNamedItem('PointOpacity').nodeValue));\n        this.set_pointColor(Color.load(node.attributes.getNamedItem('PointColor').nodeValue));\n    },\n\n    draw: function (renderContext, opacity, flat) {\n        var matSaved = renderContext.get_world();\n        renderContext.set_world(renderContext.get_worldBaseNonRotating());\n        var $enum1 = ss.enumerate(this._frames$1);\n        while ($enum1.moveNext()) {\n            var frame = $enum1.current;\n            if (frame.showOrbitPath) {\n                if (frame.get_orbit() == null) {\n                    frame.set_orbit(new Orbit(frame.get_elements(), 360, this.get_color(), 1, renderContext.get_nominalRadius()));\n                }\n                frame.get_orbit().draw3D(renderContext, opacity * this.get_opacity(), new Vector3d());\n            }\n        }\n        renderContext.set_world(matSaved);\n        return true;\n    },\n\n    addFilesToCabinet: function (fc) {\n        this._filename$1 = fc.tempDirectory + ss.format('{0}\\\\{1}.txt', fc.get_packageID(), this.id.toString());\n        var dir = this._filename$1.substring(0, this._filename$1.lastIndexOf('\\\\'));\n        var blob = new Blob([this._dataFile$1]);\n        fc.addFile(this._filename$1, blob);\n        Layer.prototype.addFilesToCabinet.call(this, fc);\n    },\n\n    loadData: function (tourDoc, filename) {\n        var $this = this;\n\n        var blob = tourDoc.getFileBlob(filename);\n        var doc = new FileReader();\n        doc.onloadend = function (ee) {\n            $this._dataFile$1 = ss.safeCast(doc.result, String);\n            $this.loadString($this._dataFile$1);\n        };\n        doc.readAsText(blob);\n    },\n\n    loadString: function (dataFile) {\n        var data = dataFile.split('\\n');\n        this._frames$1.length = 0;\n        for (var i = 0; i < data.length; i += 2) {\n            var line1 = i;\n            var line2 = i + 1;\n            if (data[i].length > 0) {\n                var frame = new ReferenceFrame();\n                if (data[i].substring(0, 1) !== '1') {\n                    line1++;\n                    line2++;\n                    frame.name = ss.trim(data[i]);\n                    i++;\n                }\n                else if (data[i].substring(0, 1) === '1') {\n                    frame.name = data[i].substring(2, 5);\n                }\n                else {\n                    i -= 2;\n                    continue;\n                }\n                frame.reference = 18;\n                frame.oblateness = 0;\n                frame.showOrbitPath = true;\n                frame.showAsPoint = true;\n                frame.referenceFrameType = 1;\n                frame.scale = 1;\n                frame.semiMajorAxisUnits = 1;\n                frame.meanRadius = 10;\n                frame.oblateness = 0;\n                frame.fromTLE(data[line1], data[line2], 398600441800000);\n                this._frames$1.push(frame);\n            }\n            else {\n                i -= 1;\n            }\n        }\n    }\n};\n\nregisterType(\"OrbitLayer\", [OrbitLayer, OrbitLayer$, Layer]);\n\n\n// wwtlib.OrbitLayerUI\n\nexport function OrbitLayerUI(layer) {\n    this._layer$1 = null;\n    this._opened$1 = true;\n    this._callbacks$1 = null;\n    LayerUI.call(this);\n    this._layer$1 = layer;\n}\n\nvar OrbitLayerUI$ = {\n    setUICallbacks: function (callbacks) {\n        this._callbacks$1 = callbacks;\n    },\n\n    get_hasTreeViewNodes: function () {\n        return true;\n    },\n\n    getTreeNodes: function () {\n        var nodes = [];\n        var $enum1 = ss.enumerate(this._layer$1.get_frames());\n        while ($enum1.moveNext()) {\n            var frame = $enum1.current;\n            var node = new LayerUITreeNode();\n            node.set_name(frame.name);\n            node.set_tag(frame);\n            node.set_checked(frame.showOrbitPath);\n            node.add_nodeSelected(ss.bind('_node_NodeSelected$1', this));\n            node.add_nodeChecked(ss.bind('_node_NodeChecked$1', this));\n            nodes.push(node);\n        }\n        return nodes;\n    },\n    _node_NodeChecked$1: function (node, newState) {\n        var frame = node.get_tag();\n        if (frame != null) {\n            frame.showOrbitPath = newState;\n        }\n    },\n    _node_NodeSelected$1: function (node) {\n        if (this._callbacks$1 != null) {\n            var frame = node.get_tag();\n            var rowData = {};\n            rowData['Name'] = frame.name;\n            rowData['SemiMajor Axis'] = frame.semiMajorAxis.toString();\n            rowData['SMA Units'] = frame.semiMajorAxisUnits.toString();\n            rowData['Inclination'] = frame.inclination.toString();\n            rowData['Eccentricity'] = frame.eccentricity.toString();\n            rowData['Long of Asc. Node'] = frame.longitudeOfAscendingNode.toString();\n            rowData['Argument Of Periapsis'] = frame.argumentOfPeriapsis.toString();\n            rowData['Epoch'] = frame.epoch.toString();\n            rowData['Mean Daily Motion'] = frame.meanDailyMotion.toString();\n            rowData['Mean Anomoly at Epoch'] = frame.meanAnomolyAtEpoch.toString();\n            this._callbacks$1.showRowData(rowData);\n        }\n    },\n\n    getNodeContextMenu: function (node) {\n        return LayerUI.prototype.getNodeContextMenu.call(this, node);\n    }\n};\n\nregisterType(\"OrbitLayerUI\", [OrbitLayerUI, OrbitLayerUI$, LayerUI]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A reference frame for the 3D mode.\n\nimport { ss } from \"../ss.js\";\nimport { registerType, registerEnum, Enums } from \"../typesystem.js\";\nimport { EOE, ELL } from \"../astrocalc/elliptical.js\";\nimport { Vector3d, Matrix3d } from \"../double3d.js\";\nimport { Color, Colors } from \"../color.js\";\nimport { SpaceTimeController } from \"../space_time_controller.js\";\n\n\n// wwtlib.ReferenceFrameTypes\n\nexport var ReferenceFrameTypes = {\n    fixedSherical: 0,\n    orbital: 1,\n    trajectory: 2,\n    synodic: 3\n};\n\nregisterType(\"ReferenceFrameTypes\", ReferenceFrameTypes);\nregisterEnum(\"ReferenceFrameTypes\", ReferenceFrameTypes);\n\n\n// wwtlib.ReferenceFrame\n\nexport function ReferenceFrame() {\n    this._systemGenerated = false;\n\n    // Calclulated\n    this.meanAnomoly = 0;\n    this.orbitalYears = 0;\n\n    // Serialized\n    this.observingLocation = false;\n    this.reference = 18;\n    this.parentsRoationalBase = false;\n    this.referenceFrameType = 0;\n    this.meanRadius = 6371000;\n    this.oblateness = 0.0033528;\n    this.heading = 0;\n    this.pitch = 0;\n    this.roll = 0;\n    this.scale = 1;\n    this.tilt = 0;\n    this.translation = new Vector3d();\n\n    // For Spherical Offset\n    this.lat = 0;\n    this.lng = 0;\n    this.altitude = 0;\n\n    // For Rotating frames\n    this.rotationalPeriod = 0; // days\n    this.zeroRotationDate = 0; // julian decimal\n\n    // For representing orbits & distant point location\n    this.representativeColor = Colors.get_white(); // Used for orbits and points\n    this.showAsPoint = false;\n    this.showOrbitPath = false;\n    this.stationKeeping = true;\n\n    this.semiMajorAxis = 0; // a Au's\n    this.semiMajorAxisUnits = 1; // AltUnits\n    this.eccentricity = 0; // e\n    this.inclination = 0; // i\n    this.argumentOfPeriapsis = 0; // w\n    this.longitudeOfAscendingNode = 0; // Omega\n    this.meanAnomolyAtEpoch = 0; // M\n    this.meanDailyMotion = 0; // n .degrees day\n    this.epoch = 0; // standard equinox\n\n    this._orbit = null;\n    this._elements = new EOE();\n    this.worldMatrix = new Matrix3d();\n    this.worldMatrix = Matrix3d.get_identity();\n}\n\nReferenceFrame.isTLECheckSumGood = function (line) {\n    if (line.length !== 69) {\n        return false;\n    }\n    var checksum = 0;\n    for (var i = 0; i < 68; i++) {\n        switch (line.substr(i, 1)) {\n            case '1':\n                checksum += 1;\n                break;\n            case '2':\n                checksum += 2;\n                break;\n            case '3':\n                checksum += 3;\n                break;\n            case '4':\n                checksum += 4;\n                break;\n            case '5':\n                checksum += 5;\n                break;\n            case '6':\n                checksum += 6;\n                break;\n            case '7':\n                checksum += 7;\n                break;\n            case '8':\n                checksum += 8;\n                break;\n            case '9':\n                checksum += 9;\n                break;\n            case '-':\n                checksum += 1;\n                break;\n        }\n    }\n    return (checksum % 10).toString() === line.charAt(68).toString();\n};\n\nReferenceFrame.toTLEExponential = function (num, size) {\n    var exp = num.toExponential(size);\n    if (exp.length < size + 6) {\n        exp = exp.substring(0, size + 4) + '0' + exp.substr(size + 4, 1);\n    }\n    return exp;\n};\n\nReferenceFrame.tleNumberString = function (num, left, right) {\n    var formated = num.toFixed(right);\n    var point = formated.indexOf('.');\n    if (point === -1) {\n        point = formated.length;\n        formated += '.0';\n    }\n    var len = formated.length - point - 1;\n    var fill = '00000000';\n    formated = fill.substr(0, left - point) + formated + fill.substr(0, right - len);\n    return formated;\n};\n\nReferenceFrame.computeTLECheckSum = function (line) {\n    if (line.length !== 68) {\n        return '0';\n    }\n    var checksum = 0;\n    for (var i = 0; i < 68; i++) {\n        switch (line[i]) {\n            case '1':\n                checksum += 1;\n                break;\n            case '2':\n                checksum += 2;\n                break;\n            case '3':\n                checksum += 3;\n                break;\n            case '4':\n                checksum += 4;\n                break;\n            case '5':\n                checksum += 5;\n                break;\n            case '6':\n                checksum += 6;\n                break;\n            case '7':\n                checksum += 7;\n                break;\n            case '8':\n                checksum += 8;\n                break;\n            case '9':\n                checksum += 9;\n                break;\n            case '-':\n                checksum += 1;\n                break;\n        }\n    }\n    return ((checksum % 10));\n};\n\nvar ReferenceFrame$ = {\n    get_representativeColor: function () {\n        return this.representativeColor;\n    },\n\n    set_representativeColor: function (value) {\n        if (value !== this.representativeColor) {\n            this.representativeColor = value;\n            this._orbit = null;\n        }\n        return value;\n    },\n\n    get_orbit: function () {\n        return this._orbit;\n    },\n\n    set_orbit: function (value) {\n        this._orbit = value;\n        return value;\n    },\n\n    getIndentifier: function () {\n        return this.name;\n    },\n\n    importTrajectory: function (filename) { },\n\n    saveToXml: function (xmlWriter) {\n        xmlWriter._writeStartElement('ReferenceFrame');\n        xmlWriter._writeAttributeString('Name', this.name);\n        xmlWriter._writeAttributeString('Parent', this.parent);\n        xmlWriter._writeAttributeString('ReferenceFrameType', Enums.toXml('ReferenceFrameTypes', this.referenceFrameType));\n        xmlWriter._writeAttributeString('Reference', Enums.toXml('ReferenceFrames', this.reference));\n        xmlWriter._writeAttributeString('ParentsRoationalBase', this.parentsRoationalBase.toString());\n        xmlWriter._writeAttributeString('MeanRadius', this.meanRadius.toString());\n        xmlWriter._writeAttributeString('Oblateness', this.oblateness.toString());\n        xmlWriter._writeAttributeString('Heading', this.heading.toString());\n        xmlWriter._writeAttributeString('Pitch', this.pitch.toString());\n        xmlWriter._writeAttributeString('Roll', this.roll.toString());\n        xmlWriter._writeAttributeString('Scale', this.scale.toString());\n        xmlWriter._writeAttributeString('Tilt', this.tilt.toString());\n        xmlWriter._writeAttributeString('Translation', this.translation.toString());\n        if (!this.referenceFrameType) {\n            xmlWriter._writeAttributeString('Lat', this.lat.toString());\n            xmlWriter._writeAttributeString('Lng', this.lng.toString());\n            xmlWriter._writeAttributeString('Altitude', this.altitude.toString());\n        }\n        xmlWriter._writeAttributeString('RotationalPeriod', this.rotationalPeriod.toString());\n        xmlWriter._writeAttributeString('ZeroRotationDate', this.zeroRotationDate.toString());\n        xmlWriter._writeAttributeString('RepresentativeColor', this.get_representativeColor().save());\n        xmlWriter._writeAttributeString('ShowAsPoint', this.showAsPoint.toString());\n        xmlWriter._writeAttributeString('ShowOrbitPath', this.showOrbitPath.toString());\n        xmlWriter._writeAttributeString('StationKeeping', this.stationKeeping.toString());\n        if (this.referenceFrameType === 1) {\n            xmlWriter._writeAttributeString('SemiMajorAxis', this.semiMajorAxis.toString());\n            xmlWriter._writeAttributeString('SemiMajorAxisScale', Enums.toXml('AltUnits', this.semiMajorAxisUnits));\n            xmlWriter._writeAttributeString('Eccentricity', this.eccentricity.toString());\n            xmlWriter._writeAttributeString('Inclination', this.inclination.toString());\n            xmlWriter._writeAttributeString('ArgumentOfPeriapsis', this.argumentOfPeriapsis.toString());\n            xmlWriter._writeAttributeString('LongitudeOfAscendingNode', this.longitudeOfAscendingNode.toString());\n            xmlWriter._writeAttributeString('MeanAnomolyAtEpoch', this.meanAnomolyAtEpoch.toString());\n            xmlWriter._writeAttributeString('MeanDailyMotion', this.meanDailyMotion.toString());\n            xmlWriter._writeAttributeString('Epoch', this.epoch.toString());\n        }\n        xmlWriter._writeEndElement();\n    },\n\n    initializeFromXml: function (node) {\n        this.name = node.attributes.getNamedItem('Name').nodeValue;\n        this.parent = node.attributes.getNamedItem('Parent').nodeValue;\n        this.referenceFrameType = Enums.parse('ReferenceFrameTypes', node.attributes.getNamedItem('ReferenceFrameType').nodeValue);\n        this.reference = Enums.parse('ReferenceFrames', node.attributes.getNamedItem('Reference').nodeValue);\n        this.parentsRoationalBase = ss.boolean(node.attributes.getNamedItem('ParentsRoationalBase').nodeValue);\n        this.meanRadius = parseFloat(node.attributes.getNamedItem('MeanRadius').nodeValue);\n        this.oblateness = parseFloat(node.attributes.getNamedItem('Oblateness').nodeValue);\n        this.heading = parseFloat(node.attributes.getNamedItem('Heading').nodeValue);\n        this.pitch = parseFloat(node.attributes.getNamedItem('Pitch').nodeValue);\n        this.roll = parseFloat(node.attributes.getNamedItem('Roll').nodeValue);\n        this.scale = parseFloat(node.attributes.getNamedItem('Scale').nodeValue);\n        this.tilt = parseFloat(node.attributes.getNamedItem('Tilt').nodeValue);\n        this.translation = Vector3d.parse(node.attributes.getNamedItem('Translation').nodeValue);\n        if (!this.referenceFrameType) {\n            this.lat = parseFloat(node.attributes.getNamedItem('Lat').nodeValue);\n            this.lng = parseFloat(node.attributes.getNamedItem('Lng').nodeValue);\n            this.altitude = parseFloat(node.attributes.getNamedItem('Altitude').nodeValue);\n        }\n        this.rotationalPeriod = parseFloat(node.attributes.getNamedItem('RotationalPeriod').nodeValue);\n        this.zeroRotationDate = parseFloat(node.attributes.getNamedItem('ZeroRotationDate').nodeValue);\n        this.set_representativeColor(Color.load(node.attributes.getNamedItem('RepresentativeColor').nodeValue));\n        this.showAsPoint = ss.boolean(node.attributes.getNamedItem('ShowAsPoint').nodeValue);\n        if (node.attributes.getNamedItem('StationKeeping') != null) {\n            this.stationKeeping = ss.boolean(node.attributes.getNamedItem('StationKeeping').nodeValue);\n        }\n        if (this.referenceFrameType === 1) {\n            this.showOrbitPath = ss.boolean(node.attributes.getNamedItem('ShowOrbitPath').nodeValue);\n            this.semiMajorAxis = parseFloat(node.attributes.getNamedItem('SemiMajorAxis').nodeValue);\n            this.semiMajorAxisUnits = Enums.parse('AltUnits', node.attributes.getNamedItem('SemiMajorAxisScale').nodeValue);\n            this.eccentricity = parseFloat(node.attributes.getNamedItem('Eccentricity').nodeValue);\n            this.inclination = parseFloat(node.attributes.getNamedItem('Inclination').nodeValue);\n            this.argumentOfPeriapsis = parseFloat(node.attributes.getNamedItem('ArgumentOfPeriapsis').nodeValue);\n            this.longitudeOfAscendingNode = parseFloat(node.attributes.getNamedItem('LongitudeOfAscendingNode').nodeValue);\n            this.meanAnomolyAtEpoch = parseFloat(node.attributes.getNamedItem('MeanAnomolyAtEpoch').nodeValue);\n            this.meanDailyMotion = parseFloat(node.attributes.getNamedItem('MeanDailyMotion').nodeValue);\n            this.epoch = parseFloat(node.attributes.getNamedItem('Epoch').nodeValue);\n        }\n    },\n\n    fromTLE: function (line1, line2, gravity) {\n        this.epoch = SpaceTimeController._twoLineDateToJulian(line1.substr(18, 14));\n        this.eccentricity = parseFloat('0.' + line2.substr(26, 7));\n        this.inclination = parseFloat(line2.substr(8, 8));\n        this.longitudeOfAscendingNode = parseFloat(line2.substr(17, 8));\n        this.argumentOfPeriapsis = parseFloat(line2.substr(34, 8));\n        var revs = parseFloat(line2.substr(52, 11));\n        this.meanAnomolyAtEpoch = parseFloat(line2.substr(43, 8));\n        this.meanDailyMotion = revs * 360;\n        var part = (86400 / revs) / (Math.PI * 2);\n        this.semiMajorAxis = Math.pow((part * part) * gravity, 1 / 3);\n        this.semiMajorAxisUnits = 1;\n    },\n\n    toTLE: function () {\n        // Epoch need to convert to TLE time string.\n        // Ecentricity remove \"0.\" from the begin and trim to 7 digits\n        // Inclination decimal degrees 8 digits max\n        // LOAN decimal degrees 8 digits\n        // AOP\n        // mean anomoly at epoch 8 digits\n        // Mean motion (revs per day) Compute\n        // Convert Semi-major-axis to meters from storage unit\n        // Compute revs\n        var line1 = new ss.StringBuilder();\n        line1.append('1 99999U 00111AAA ');\n        line1.append(SpaceTimeController.julianToTwoLineDate(this.epoch));\n        line1.append(' ');\n        line1.append(this.semiMajorAxis.toExponential(4));\n        line1.append(' 00000-0 ');\n        line1.append(ReferenceFrame.toTLEExponential(this.meanDailyMotion, 5));\n        line1.append('  001');\n        line1.append(ReferenceFrame.computeTLECheckSum(line1.toString()));\n        line1.appendLine('');\n        var line2 = new ss.StringBuilder();\n        line2.append('2 99999 ');\n        line2.append(ReferenceFrame.tleNumberString(this.inclination, 3, 4) + ' ');\n        line2.append(ReferenceFrame.tleNumberString(this.longitudeOfAscendingNode, 3, 4) + ' ');\n        line2.append((ReferenceFrame.tleNumberString(this.eccentricity, 1, 7) + ' ').substring(2));\n        line2.append(ReferenceFrame.tleNumberString(this.argumentOfPeriapsis, 3, 4) + ' ');\n        line2.append(ReferenceFrame.tleNumberString(this.meanAnomolyAtEpoch, 3, 4) + ' ');\n        line2.append(ReferenceFrame.toTLEExponential(this.meanDailyMotion / 207732, 5));\n        line2.append('00001');\n        line2.append(ReferenceFrame.computeTLECheckSum(line2.toString()));\n        line2.appendLine('');\n        return line1.toString() + line2.toString();\n    },\n\n    get_elements: function () {\n        this._elements.a = this.semiMajorAxis;\n        this._elements.e = this.eccentricity;\n        this._elements.i = this.inclination;\n        this._elements.w = this.argumentOfPeriapsis;\n        this._elements.omega = this.longitudeOfAscendingNode;\n        this._elements.jdEquinox = this.epoch;\n        if (!this.meanDailyMotion) {\n            this._elements.n = ELL.meanMotionFromSemiMajorAxis(this._elements.a);\n        } else {\n            this._elements.n = this.meanDailyMotion;\n        }\n        this._elements.t = this.epoch - (this.meanAnomolyAtEpoch / this._elements.n);\n        return this._elements;\n    },\n\n    set_elements: function (value) {\n        this._elements = value;\n        return value;\n    },\n\n    computeFrame: function (renderContext) {\n        switch (this.referenceFrameType) {\n            case 1:\n                this._computeOrbital(renderContext);\n                break;\n            case 0:\n                this._computeFixedSherical(renderContext);\n                break;\n            case 2:\n                this._computeFrameTrajectory(renderContext);\n                break;\n            default:\n                break;\n        }\n    },\n\n    useRotatingParentFrame: function () {\n        switch (this.referenceFrameType) {\n            case 1:\n            case 2:\n            case 3:\n                return false;\n            default:\n                return true;\n        }\n    },\n\n    _computeFixedRectangular: function (renderContext) { },\n\n    _computeFixedSherical: function (renderContext) {\n        if (this.observingLocation) {\n            this.lat = SpaceTimeController.get_location().get_lat();\n            this.lng = SpaceTimeController.get_location().get_lng();\n            this.altitude = SpaceTimeController.get_altitude();\n        }\n        this.worldMatrix = Matrix3d.get_identity();\n        this.worldMatrix.translate(this.translation);\n        var localScale = (1 / renderContext.get_nominalRadius()) * this.scale * this.meanRadius;\n        this.worldMatrix.scale(Vector3d.create(localScale, localScale, localScale));\n        this.worldMatrix._multiply(Matrix3d.rotationYawPitchRoll((this.heading / 180 * Math.PI), (this.pitch / 180 * Math.PI), (this.roll / 180 * Math.PI)));\n        this.worldMatrix._multiply(Matrix3d._rotationZ(-90 / 180 * Math.PI));\n        if (!!this.rotationalPeriod) {\n            var rotationCurrent = (((SpaceTimeController.get_jNow() - this.zeroRotationDate) / this.rotationalPeriod) * Math.PI * 2) % (Math.PI * 2);\n            this.worldMatrix._multiply(Matrix3d._rotationX(-rotationCurrent));\n        }\n        this.worldMatrix.translate(Vector3d.create(1 + (this.altitude / renderContext.get_nominalRadius()), 0, 0));\n        this.worldMatrix._multiply(Matrix3d._rotationZ(this.lat / 180 * Math.PI));\n        this.worldMatrix._multiply(Matrix3d._rotationY(-(this.lng + 180) / 180 * Math.PI));\n    },\n\n    _computeFrameTrajectory: function (renderContext) { },\n\n    _computeOrbital: function (renderContext) {\n        var ee = this.get_elements();\n        var point = ELL.calculateRectangularJD(SpaceTimeController.get_jNow(), ee);\n        this.meanAnomoly = ee.meanAnnomolyOut;\n        var pointInstantLater = ELL.calculateRectangular(ee, this.meanAnomoly + 0.001);\n        var direction = Vector3d.subtractVectors(point, pointInstantLater);\n        var up = point.copy();\n        up.normalize();\n        direction.normalize();\n        var dist = point.length();\n        var scaleFactor = 1;\n        switch (this.semiMajorAxisUnits) {\n            case 1:\n                scaleFactor = 1;\n                break;\n            case 2:\n                scaleFactor = 1 / 3.2808399;\n                break;\n            case 3:\n                scaleFactor = (1 / 3.2808399) / 12;\n                break;\n            case 4:\n                scaleFactor = 1609.344;\n                break;\n            case 5:\n                scaleFactor = 1000;\n                break;\n            case 6:\n                scaleFactor = 149598000 * 1000;\n                break;\n            case 7:\n                scaleFactor = 63239.6717 * 149598000 * 1000;\n                break;\n            case 8:\n                scaleFactor = 206264.806 * 149598000 * 1000;\n                break;\n            case 9:\n                scaleFactor = 206264.806 * 149598000 * 1000 * 1000000;\n                break;\n            case 10:\n                scaleFactor = 1;\n                break;\n            default:\n                break;\n        }\n        scaleFactor *= 1 / renderContext.get_nominalRadius();\n        var look = Matrix3d.lookAtLH(Vector3d.create(0, 0, 0), direction, up);\n        look.invert();\n        this.worldMatrix = Matrix3d.get_identity();\n        this.worldMatrix.translate(this.translation);\n        var localScale = (1 / renderContext.get_nominalRadius()) * this.scale * this.meanRadius;\n        this.worldMatrix.scale(Vector3d.create(localScale, localScale, localScale));\n        this.worldMatrix._multiply(Matrix3d.rotationYawPitchRoll((this.heading / 180 * Math.PI), (this.pitch / 180 * Math.PI), (this.roll / 180 * Math.PI)));\n        if (!!this.rotationalPeriod) {\n            var rotationCurrent = (((SpaceTimeController.get_jNow() - this.zeroRotationDate) / this.rotationalPeriod) * Math.PI * 2) % (Math.PI * 2);\n            this.worldMatrix._multiply(Matrix3d._rotationX(-rotationCurrent));\n        }\n        point = Vector3d.scale(point, scaleFactor);\n        this.worldMatrix.translate(point);\n        if (this.stationKeeping) {\n            this.worldMatrix = Matrix3d.multiplyMatrix(look, this.worldMatrix);\n        }\n    }\n};\n\nregisterType(\"ReferenceFrame\", [ReferenceFrame, ReferenceFrame$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A layer that renders tabular data.\n\nimport { ss } from \"../ss.js\";\nimport { registerType, Enums } from \"../typesystem.js\";\nimport { Util } from \"../baseutil.js\";\nimport { Vector3d, Vector4d } from \"../double3d.js\";\nimport { layerManagerGetAllMaps } from \"../data_globals.js\";\nimport { globalRenderContext, tilePrepDevice } from \"../render_globals.js\";\nimport { WEBGL } from \"../graphics/webgl_constants.js\";\nimport { Dates, LineList, TriangleList, PointList } from \"../graphics/primitives3d.js\";\nimport { Texture } from \"../graphics/texture.js\";\nimport { Tessellator } from \"../graphics/tessellator.js\";\nimport { Color, Colors } from \"../color.js\";\nimport { Coordinates } from \"../coordinates.js\";\nimport { SpaceTimeController } from \"../space_time_controller.js\";\nimport { UiTools } from \"../ui_tools.js\";\nimport { URLHelpers } from \"../url_helpers.js\";\nimport { ColorMapContainer } from \"./color_map_container.js\";\nimport { Layer } from \"./layer.js\";\nimport { Table } from \"./table.js\";\n\n\n// wwtlib.KmlCoordinate\n\nexport function KmlCoordinate() {\n    this.lat = 0;\n    this.lng = 0;\n    this.alt = 0;\n}\n\nvar KmlCoordinate$ = {};\n\nregisterType(\"KmlCoordinate\", [KmlCoordinate, KmlCoordinate$, null]);\n\n\n// wwtlib.KmlLineList\n\nexport function KmlLineList() {\n    this.extrude = false;\n    this.astronomical = false;\n    this.meanRadius = 6371000;\n    this.pointList = [];\n}\n\nvar KmlLineList$ = {\n    parseWkt: function (geoText, option, alt, date) {\n        var parts = UiTools.split(geoText, '(,)');\n        var $enum1 = ss.enumerate(parts);\n        while ($enum1.moveNext()) {\n            var part = $enum1.current;\n            var coordinates = ss.trim(part).split(' ');\n            if (coordinates.length > 1) {\n                var pnt = new KmlCoordinate();\n                pnt.lng = parseFloat(coordinates[0]);\n                if (this.astronomical) {\n                    pnt.lng -= 180;\n                }\n                pnt.lat = parseFloat(coordinates[1]);\n                if (coordinates.length > 2 && !alt) {\n                    pnt.alt = parseFloat(coordinates[2]);\n                }\n                else {\n                    pnt.alt = alt;\n                }\n                pnt.date = date;\n                this.pointList.push(pnt);\n            }\n        }\n    },\n\n    getCenterPoint: function () {\n        var point = new KmlCoordinate();\n        point.lat = 0;\n        point.lng = 0;\n        point.alt = 0;\n        var $enum1 = ss.enumerate(this.pointList);\n        while ($enum1.moveNext()) {\n            var pnt = $enum1.current;\n            point.lat += pnt.lat;\n            point.lng += pnt.lng;\n            point.alt += pnt.alt;\n        }\n        point.lat /= this.pointList.length;\n        point.lng /= this.pointList.length;\n        point.alt /= this.pointList.length;\n        return point;\n    }\n};\n\nregisterType(\"KmlLineList\", [KmlLineList, KmlLineList$, null]);\n\n\n// wwtlib.PushPin\n\nexport function PushPin() { }\n\nPushPin._pinTextureCache = {};\nPushPin._pins = null;\n\nPushPin.triggerLoadSprite = function () {\n    if (PushPin._pins == null) {\n        PushPin._pins = Texture.fromUrl(URLHelpers.singleton.engineAssetUrl('pins.png'));\n    }\n};\n\nPushPin.getPushPinTexture = function (pinId) {\n    var texture = null;\n    if (ss.keyExists(PushPin._pinTextureCache, pinId)) {\n        return PushPin._pinTextureCache[pinId];\n    }\n    try {\n        texture = tilePrepDevice.createTexture();\n        tilePrepDevice.bindTexture(WEBGL.TEXTURE_2D, texture);\n        var row = Math.floor(pinId / 16);\n        var col = pinId % 16;\n        var temp = document.createElement('canvas');\n        temp.height = 32;\n        temp.width = 32;\n        var ctx = temp.getContext('2d');\n        //Substitute the resized image\n        ctx.drawImage(PushPin._pins.imageElement, (col * 32), (row * 32), 32, 32, 0, 0, 32, 32);\n        var image = temp;\n        tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_WRAP_S, WEBGL.CLAMP_TO_EDGE);\n        tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_WRAP_T, WEBGL.CLAMP_TO_EDGE);\n        tilePrepDevice.texImage2D(WEBGL.TEXTURE_2D, 0, WEBGL.RGBA, WEBGL.RGBA, WEBGL.UNSIGNED_BYTE, image);\n        tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_MIN_FILTER, WEBGL.LINEAR_MIPMAP_NEAREST);\n        tilePrepDevice.generateMipmap(WEBGL.TEXTURE_2D);\n        tilePrepDevice.bindTexture(WEBGL.TEXTURE_2D, null);\n        PushPin._pinTextureCache[pinId] = texture;\n    }\n    catch ($e1) { }\n    return texture;\n};\n\nvar PushPin$ = {};\n\nregisterType(\"PushPin\", [PushPin, PushPin$, null]);\n\n\n// wwtlib.SpreadSheetLayer\n\nexport function SpreadSheetLayer() {\n    this._dataDirty$1 = false;\n    this._lastNormalizeSizeColumnIndex$1 = -1;\n    this._lastDynamicColorColumnIndex$1 = -1;\n    this._table_backcompat$1 = null;\n    this._barChartBitmask$1 = 0;\n    this._barScaleFactor$1 = 20;\n    this._meanRadius$1 = 6371000;\n    this._table$1 = new Table();\n    this.isLongIndex = false;\n    this.shapeVertexCount = 0;\n    this.lines = false;\n    this.latColumn = -1;\n    this.fixedSize = 1;\n    this.decay = 16;\n    this.timeSeries = false;\n    this._dynamicData$1 = false;\n    this._autoUpdate$1 = false;\n    this._dataSourceUrl$1 = '';\n    this._beginRange$1 = new Date('1/1/2100');\n    this._endRange$1 = new Date('01/01/1800');\n    this.markerDomainValues = {};\n    this.colorDomainValues = {};\n    this._coordinatesType$1 = 0;\n    this.lngColumn = -1;\n    this.geometryColumn = -1;\n    this._xAxisColumn$1 = -1;\n    this._yAxisColumn$1 = -1;\n    this._zAxisColumn$1 = -1;\n    this._xAxisReverse$1 = false;\n    this._yAxisReverse$1 = false;\n    this._zAxisReverse$1 = false;\n    this._altType$1 = 3;\n    this._markerMix$1 = 0;\n    this._raUnits$1 = 0;\n    this.colorMap = 3;\n    this.colorMapperName = 'Greys';\n\n    // The following attributes control whether and how to map values from\n    // the ColorMapColumn to colors. The overall option DynamicColor\n    // determines whether colors should be determined on-the-fly from column\n    // values. In this case, first, if NormalizeColorMap is true, the values\n    // are normalized to the range [0:1] using:\n    //\n    // new_value = (value - NormalizeColorMapMin) / (NormalizeColorMapMax - NormalizeColorMapMin)\n    //\n    // Whether or not the values are normalized, they are then mapped to colors using\n    // the color map with the name given by ColorMapName.\n\n    // Note that we use a hard-coded UUID since we need it to always be the same across\n    // all WWT sessions so that we can remove it when it isn't needed.\n\n    this._dynamicColorColumnName$1 = '2efc32e3-b9d9-47ff-8036-8cc344c585bd';\n    this.dynamicColor = false;\n    this.normalizeColorMap = false;\n    this.normalizeColorMapMin = 0;\n    this.normalizeColorMapMax = 1;\n    this._markerColumn$1 = -1;\n    this.colorMapColumn = -1;\n    this._plotType$1 = 0;\n    this._markerIndex$1 = 0;\n    this._showFarSide$1 = false;\n    this._markerScale$1 = 1;\n    this._altUnit$1 = 1;\n    this._cartesianScale$1 = 1;\n    this._cartesianCustomScale$1 = 1;\n    this.altColumn = -1;\n    this.startDateColumn = -1;\n    this.endDateColumn = -1;\n    this.sizeColumn = -1;\n\n    // The following attributes control whether the point sizes should be normalized before\n    // being used. When NormalizeSize is true, the point sizes are scaled using\n    //\n    // new_size = (size - NormalizeSizeMin) / (NormalizeSizeMax - NormalizeSizeMin)\n    //\n    // The NormalizeSizeClip attribute can be used to determine whether the sizes should\n    // be clipped to the range [0:1]. At this time, normalization is only applied if\n    // PointScaleTypes is Linear or Power.\n\n    // Note that we use a hard-coded UUID since we need it to always be the same across\n    // all WWT sessions so that we can remove it when it isn't needed.\n\n    this._normalizeSizeColumnName$1 = 'dfe78b4c-f972-4796-b04f-68c5efd4ecb0';\n    this.normalizeSize = false;\n    this.normalizeSizeClip = false;\n    this.normalizeSizeMin = 0;\n    this.normalizeSizeMax = 1;\n    this.nameColumn = 0;\n    this._hyperlinkFormat$1 = '';\n    this._hyperlinkColumn$1 = -1;\n    this.scaleFactor = 1;\n    this.pointScaleType = 1;\n    this.positions = [];\n    this.bufferIsFlat = false;\n    this.baseDate = new Date(2010, 0, 1, 12, 0, 0);\n    this.dirty = true;\n    this.lastVersion = 0;\n    Layer.call(this);\n}\n\nSpreadSheetLayer._circleTexture$1 = null;\n\nSpreadSheetLayer._getDatafromFeed$1 = function (url) {\n    return '';\n};\n\nSpreadSheetLayer._executeQuery$1 = function (url) {\n    return '';\n};\n\nSpreadSheetLayer.parseDate = function (date) {\n    var dt = ss.now();\n    try {\n        dt = new Date(date);\n    }\n    catch ($e1) {\n        try {\n            return SpreadSheetLayer.execlToDateTime(parseFloat(date));\n        }\n        catch ($e2) {\n        }\n    }\n    return dt;\n};\n\nSpreadSheetLayer.execlToDateTime = function (excelDate) {\n    if (excelDate > 59) {\n        excelDate -= 1;\n    }\n    if (excelDate > 730000) {\n        excelDate = 730000;\n    }\n    var es = new Date(1899, 12, 31);\n    return new Date(es.getDate() + ss.truncate((excelDate * 24 * 60 * 60 * 1000)));\n};\n\nSpreadSheetLayer.get__circleTexture$1 = function () {\n    if (SpreadSheetLayer._circleTexture$1 == null) {\n        var url = URLHelpers.singleton.engineAssetUrl('circle.png');\n        SpreadSheetLayer._circleTexture$1 = Texture.fromUrl(url);\n    }\n    return SpreadSheetLayer._circleTexture$1;\n};\n\nvar SpreadSheetLayer$ = {\n    getTypeName: function () {\n        return 'TerraViewer.SpreadSheetLayer';\n    },\n\n    get_header: function () {\n        return this._table$1.header;\n    },\n\n    canCopyToClipboard: function () {\n        return true;\n    },\n\n    copyToClipboard: function () { },\n\n    dynamicUpdate: function () {\n        var data = SpreadSheetLayer._getDatafromFeed$1(this.get_dataSourceUrl());\n        if (data != null) {\n            this.updateData(data, false, true, true);\n            this.guessHeaderAssignments();\n            return true;\n        }\n        return false;\n    },\n\n    updateData: function (data, purgeOld, purgeAll, hasHeader) {\n        this.loadFromString(ss.safeCast(data, String), true, purgeOld, purgeAll, hasHeader);\n        this.computeDateDomainRange(-1, -1);\n        this._dataDirty$1 = true;\n        this.dirty = true;\n        return true;\n    },\n\n    loadData: function (tourDoc, filename) {\n        var $this = this;\n\n        this._table$1 = new Table();\n        var blob = tourDoc.getFileBlob(filename);\n        this.getStringFromGzipBlob(blob, function (data) {\n            $this._table$1.loadFromString(data, false, true, true);\n\n            // The NormalizeSizeColumnName column is only present for backward-compatibility\n            // and should be removed in this version of SpreadSheetLayer, otherwise we might\n            // keep adding it several times if exporting to XML again.\n            if ($this._table$1.header.indexOf($this._normalizeSizeColumnName$1) > -1) {\n                $this._table$1.removeColumn($this._normalizeSizeColumnName$1);\n            }\n            $this.computeDateDomainRange(-1, -1);\n            if ($this.get_dynamicData() && $this.get_autoUpdate()) {\n                $this.dynamicUpdate();\n            }\n            $this._dataDirty$1 = true;\n            $this.dirty = true;\n        });\n    },\n\n    addFilesToCabinet: function (fc) {\n        this._fileName$1 = fc.tempDirectory + ss.format('{0}\\\\{1}.txt', fc.get_packageID(), this.id.toString());\n        var dir = this._fileName$1.substring(0, this._fileName$1.lastIndexOf('\\\\'));\n        var data = '';\n\n        // See PrepareBackCompatTable for an explanation of the\n        // circumstances under which table_backcompat is used.\n        if (this._table_backcompat$1 == null) {\n            data = this._table$1.save();\n        } else {\n            data = this._table_backcompat$1.save();\n        }\n        var blob = new Blob([data]);\n        fc.addFile(this._fileName$1, blob);\n        Layer.prototype.addFilesToCabinet.call(this, fc);\n    },\n    _prepareBackCompatTable$1: function () {\n        // In this this layer class we implement dynamic normalization of the\n        // points based on one of the existing numerical columns. However, we\n        // need to produce XML files that are backward-compatible with older\n        // versions of WWT, so the approach we take is to add a column with\n        // the computed sizes for versions of WWT that can't do the dynamic\n        // scaling - while in newer versions we ignore this additional column\n        // and use the dynamic scaling.\n\n        // Take a shortcut to avoid copying the table if possible\n        if ((this.sizeColumn === -1 || !this.get_normalizeSize()) && (this.colorMapColumn === -1 || !this.get_dynamicColor())) {\n            this._lastNormalizeSizeColumnIndex$1 = -1;\n            this._lastDynamicColorColumnIndex$1 = -1;\n            return;\n        }\n        this._table_backcompat$1 = this._table$1.clone();\n        if (this.sizeColumn > -1 && this.get_normalizeSize()) {\n            var normalizedPointSize = [];\n            var $enum1 = ss.enumerate(this._table_backcompat$1.rows);\n            while ($enum1.moveNext()) {\n                var row = $enum1.current;\n                normalizedPointSize.push(this.normalizePointSize(parseFloat(row[this.sizeColumn])).toString());\n            }\n            this._table_backcompat$1.addColumn(this._normalizeSizeColumnName$1, normalizedPointSize);\n            this._lastNormalizeSizeColumnIndex$1 = this._table_backcompat$1.header.length - 1;\n        } else {\n            this._lastNormalizeSizeColumnIndex$1 = -1;\n        }\n        if (this.colorMapColumn > -1 && this.get_dynamicColor()) {\n            var pointColors = [];\n            var $enum2 = ss.enumerate(this._table_backcompat$1.rows);\n            while ($enum2.moveNext()) {\n                var row = $enum2.current;\n                pointColors.push(this.get_colorMapper().findClosestColor(this.normalizeColorMapValue(parseFloat(row[this.get_colorMapColumn()]))).toSimpleHex());\n            }\n            this._table_backcompat$1.addColumn(this._dynamicColorColumnName$1, pointColors);\n            this._lastDynamicColorColumnIndex$1 = this._table_backcompat$1.header.length - 1;\n        } else {\n            this._lastDynamicColorColumnIndex$1 = -1;\n        }\n    },\n\n    guessHeaderAssignments: function () {\n        var index = 0;\n        var $enum1 = ss.enumerate(this._table$1.header);\n        while ($enum1.moveNext()) {\n            var headerName = $enum1.current;\n            this._guessHeaderAssignment$1(headerName, index++);\n        }\n        if (this._table$1.header.length > 0) {\n            this.nameColumn = 0;\n        }\n    },\n\n    guessHeaderAssignmentsFromVoTable: function (votable) {\n        var decColumn = votable.getDecColumn();\n        if (decColumn != null) {\n            this.latColumn = decColumn.index;\n            this.astronomical = true;\n        }\n        var raColumn = votable.getRAColumn();\n        if (raColumn != null) {\n            this.lngColumn = raColumn.index;\n            this.astronomical = true;\n            this.pointScaleType = 4;\n        }\n        var magColumn = votable.getMagColumn();\n        if (magColumn != null) {\n            this.sizeColumn = magColumn.index;\n        }\n        var index = 0;\n        var $enum1 = ss.enumerate(votable.column);\n        while ($enum1.moveNext()) {\n            var column = $enum1.current;\n            this._guessHeaderAssignment$1(column.name, index++);\n        }\n        if (this._table$1.header.length > 0) {\n            this.nameColumn = 0;\n        }\n    },\n    _guessHeaderAssignment$1: function (name, index) {\n        name = name.toLowerCase();\n        if (name.indexOf('lat') > -1 && this.latColumn === -1) {\n            this.latColumn = index;\n        }\n        if ((name.indexOf('lon') > -1 || name.indexOf('lng') > -1) && this.lngColumn === -1) {\n            this.lngColumn = index;\n        }\n        if (name.indexOf('dec') > -1 && this.latColumn === -1) {\n            this.latColumn = index;\n            this.astronomical = true;\n        }\n        if ((name.indexOf('ra') > -1 || name.indexOf('ascen') > -1) && this.lngColumn === -1) {\n            this.lngColumn = index;\n            this.astronomical = true;\n            this.pointScaleType = 4;\n        }\n        if ((name.indexOf('mag') > -1 || name.indexOf('size') > -1) && this.sizeColumn === -1) {\n            this.sizeColumn = index;\n        }\n        if ((name.indexOf('date') > -1 || name.indexOf('time') > -1 || name.indexOf('dt') > -1 || name.indexOf('tm') > -1)) {\n            if (name.indexOf('end') > -1 && this.endDateColumn === -1) {\n                this.endDateColumn = index;\n            }\n            else if (this.startDateColumn === -1) {\n                this.startDateColumn = index;\n            }\n        }\n        if ((name.indexOf('altitude') > -1 || name.indexOf('alt') > -1) && this.altColumn === -1) {\n            this.altColumn = index;\n            this.set_altType(1);\n            this.set_altUnit(1);\n        }\n        if (name.indexOf('depth') > -1 && this.altColumn === -1) {\n            this.altColumn = index;\n            this.set_altType(0);\n            this.set_altUnit(5);\n        }\n        if (ss.startsWith(name, 'x') && this.get_xAxisColumn() === -1) {\n            this.set_xAxisColumn(index);\n        }\n        if (ss.startsWith(name, 'y') && this.get_yAxisColumn() === -1) {\n            this.set_yAxisColumn(index);\n        }\n        if (ss.startsWith(name, 'z') && this.get_zAxisColumn() === -1) {\n            this.set_zAxisColumn(index);\n        }\n        if (name.indexOf('color') > -1 && this.get_colorMapColumn() === -1) {\n            this.set_colorMapColumn(index);\n        }\n        if ((name.indexOf('geometry') > -1 || name.indexOf('geography') > -1) && this.geometryColumn === -1) {\n            this.geometryColumn = index;\n        }\n    },\n\n    computeDateDomainRange: function (columnStart, columnEnd) {\n        if (columnStart === -1) {\n            columnStart = this.startDateColumn;\n        }\n        if (columnEnd === -1) {\n            columnEnd = this.endDateColumn;\n        }\n        if (columnEnd === -1) {\n            columnEnd = columnStart;\n        }\n        this.set_beginRange(new Date('12/31/2100'));\n        this.set_endRange(new Date('12/31/1890'));\n        var $enum1 = ss.enumerate(this._table$1.rows);\n        while ($enum1.moveNext()) {\n            var row = $enum1.current;\n            try {\n                if (columnStart > -1) {\n                    var sucsess = true;\n                    var dateTimeStart = new Date('12/31/2100');\n                    try {\n                        dateTimeStart = new Date(row[columnStart]);\n                        if (dateTimeStart < this.get_beginRange()) {\n                            this.set_beginRange(dateTimeStart);\n                        }\n                    }\n                    catch ($e2) {\n                    }\n                    try {\n                        var dateTimeEnd = new Date('12/31/1890');\n                        if (columnEnd > -1) {\n                            dateTimeEnd = new Date(row[columnEnd]);\n                            if (sucsess && dateTimeEnd > this.get_endRange()) {\n                                this.set_endRange(dateTimeEnd);\n                            }\n                        }\n                    }\n                    catch ($e3) {\n                    }\n                }\n            }\n            catch ($e4) {\n            }\n        }\n    },\n\n    checkState: function () { },\n\n    getMaxValue: function (column) {\n        var max = 0;\n        this._table$1.lock();\n        var $enum1 = ss.enumerate(this._table$1.rows);\n        while ($enum1.moveNext()) {\n            var row = $enum1.current;\n            try {\n                if (column > -1) {\n                    var sucsess = true;\n                    try {\n                        var val = parseFloat(row[column]);\n                        if (sucsess && val > max) {\n                            max = val;\n                        }\n                    }\n                    catch ($e2) {\n                    }\n                }\n            }\n            catch ($e3) {\n            }\n        }\n        this._table$1.unlock();\n        return max;\n    },\n\n    getDomainValues: function (column) {\n        var domainValues = [];\n        this._table$1.lock();\n        var $enum1 = ss.enumerate(this._table$1.rows);\n        while ($enum1.moveNext()) {\n            var row = $enum1.current;\n            try {\n                if (column > -1) {\n                    if (!(domainValues.indexOf(row[column]) >= 0)) {\n                        domainValues.push(row[column]);\n                    }\n                }\n            }\n            catch ($e2) {\n            }\n        }\n        domainValues.sort();\n        this._table$1.unlock();\n        return domainValues;\n    },\n\n    get_barChartBitmask: function () {\n        return this._barChartBitmask$1;\n    },\n\n    set_barChartBitmask: function (value) {\n        this._barChartBitmask$1 = value;\n        return value;\n    },\n    _isPointInFrustum$1: function (position, frustum) {\n        var centerV4 = new Vector4d(position.x, position.y, position.z, 1);\n        for (var i = 0; i < 6; i++) {\n            if (frustum[i].dot(centerV4) < 0) {\n                return false;\n            }\n        }\n        return true;\n    },\n\n    getTableDataInView: function () {\n        var data = '';\n        var first = true;\n        var $enum1 = ss.enumerate(this.get_header());\n        while ($enum1.moveNext()) {\n            var col = $enum1.current;\n            if (!first) {\n                data += '\\t';\n            }\n            else {\n                first = false;\n            }\n            data += col;\n        }\n        data += '\\r\\n';\n        var $enum2 = ss.enumerate(this.get__table().rows);\n        while ($enum2.moveNext()) {\n            var row = $enum2.current;\n            var ra = parseFloat(row[this.get_lngColumn()]);\n            var dec = parseFloat(row[this.get_latColumn()]);\n            var position = Coordinates.geoTo3dDouble(dec, ra);\n            if (!this._isPointInFrustum$1(position, globalRenderContext.get_frustum())) {\n                continue;\n            }\n            first = true;\n            var $enum3 = ss.enumerate(row);\n            while ($enum3.moveNext()) {\n                var col = $enum3.current;\n                if (!first) {\n                    data += '\\t';\n                }\n                else {\n                    first = false;\n                }\n                data += col;\n            }\n            data += '\\r\\n';\n        }\n        return data;\n    },\n\n    prepVertexBuffer: function (renderContext, opacity) {\n        this._table$1.lock();\n        if (this.lineList != null) {\n            this.lineList.clear();\n        }\n        if (this.lineList2d != null) {\n            this.lineList2d.clear();\n        }\n        if (this.triangleList != null) {\n            this.triangleList.clear();\n        }\n        if (this.pointList != null) {\n            this.pointList.clear();\n        }\n        if (this.triangleList2d != null) {\n            this.triangleList2d.clear();\n        }\n        if (this.lineList == null) {\n            this.lineList = new LineList();\n        }\n        if (this.pointList == null) {\n            this.pointList = new PointList(renderContext);\n        }\n        this.lineList.timeSeries = this.timeSeries;\n        if (this.lineList2d == null) {\n            this.lineList2d = new LineList();\n            this.lineList2d.set_depthBuffered(false);\n        }\n        this.lineList.timeSeries = this.timeSeries;\n        if (this.triangleList == null) {\n            this.triangleList = new TriangleList();\n        }\n        if (this.triangleList2d == null) {\n            this.triangleList2d = new TriangleList();\n            this.triangleList2d.depthBuffered = false;\n        }\n        this.positions.length = 0;\n        var currentIndex = 0;\n        var colorLocal = this.get_color();\n\n        // for space 3d\n        var ecliptic = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow()) / 180 * Math.PI;\n        var selectDomain = {};\n        var mr = layerManagerGetAllMaps()[this.get_referenceFrame()].frame.meanRadius;\n        if (!!mr) {\n            this._meanRadius$1 = mr;\n        }\n        var position = new Vector3d();\n        var pointSize = 0.0002;\n        var pointColor = Colors.get_white();\n        var pointStartTime = 0;\n        var pointEndTime = 0;\n        var $enum1 = ss.enumerate(this._table$1.rows);\n        while ($enum1.moveNext()) {\n            var row = $enum1.current;\n            try {\n                if (this.geometryColumn > -1 || (!this.get_coordinatesType() && (this.lngColumn > -1 && this.latColumn > -1)) || ((this.get_coordinatesType() === 1) && (this.get_xAxisColumn() > -1 && this.get_yAxisColumn() > -1))) {\n                    var Xcoord = 0;\n                    var Ycoord = 0;\n                    var Zcoord = 0;\n                    var alt = 1;\n                    var altitude = 0;\n                    var distParces = 0;\n                    var factor = this.getScaleFactor(this.get_altUnit(), 1);\n                    if (this.altColumn === -1 || this.get_altType() === 3 || this.bufferIsFlat) {\n                        alt = 1;\n                        if ((this.astronomical & !this.bufferIsFlat) === 1) {\n                            alt = 63239.6717 * 100;\n                        }\n                    }\n                    else {\n                        if (!this.get_altType()) {\n                            factor = -factor;\n                        }\n                        alt = 0;\n                        try {\n                            alt = parseFloat(row[this.altColumn]);\n                        }\n                        catch ($e2) {\n                        }\n                        if (this.astronomical) {\n                            factor = factor / (1000 * 149598000);\n                            distParces = (alt * factor) / 206264.806;\n                            altitude = (factor * alt);\n                            alt = (factor * alt);\n                        }\n                        else if (this.get_altType() === 2) {\n                            altitude = (factor * alt);\n                            alt = (factor * alt / this._meanRadius$1);\n                        }\n                        else {\n                            altitude = (factor * alt);\n                            alt = 1 + (factor * alt / this._meanRadius$1);\n                        }\n                    }\n                    if (!this.get_coordinatesType() && this.lngColumn > -1 && this.latColumn > -1) {\n                        Xcoord = parseFloat(row[this.lngColumn]);\n                        Ycoord = parseFloat(row[this.latColumn]);\n                        if (this.astronomical) {\n                            if (!this.get_raUnits()) {\n                                Xcoord *= 15;\n                            }\n                            if (this.bufferIsFlat) {\n                            }\n                        }\n                        else {\n                            Xcoord += 180;\n                        }\n                        var pos = Coordinates.geoTo3dRad(Ycoord, Xcoord, alt);\n                        if (this.astronomical && !this.bufferIsFlat) {\n                            pos.rotateX(ecliptic);\n                        }\n                        position = pos;\n                        this.positions.push(position);\n                    }\n                    else if (this.get_coordinatesType() === 1) {\n                        var xyzScale = this.getScaleFactor(this.get_cartesianScale(), this.get_cartesianCustomScale());\n                        if (this.astronomical) {\n                            xyzScale /= (1000 * 149598000);\n                        }\n                        else {\n                            xyzScale /= this._meanRadius$1;\n                        }\n                        if (this.get_zAxisColumn() > -1) {\n                            Zcoord = parseFloat(row[this.get_zAxisColumn()]);\n                        }\n                        Xcoord = parseFloat(row[this.get_xAxisColumn()]);\n                        Ycoord = parseFloat(row[this.get_yAxisColumn()]);\n                        if (this.get_xAxisReverse()) {\n                            Xcoord = -Xcoord;\n                        }\n                        if (this.get_yAxisReverse()) {\n                            Ycoord = -Ycoord;\n                        }\n                        if (this.get_zAxisReverse()) {\n                            Zcoord = -Zcoord;\n                        }\n                        position = Vector3d.create((Xcoord * xyzScale), (Zcoord * xyzScale), (Ycoord * xyzScale));\n                        this.positions.push(position);\n                    }\n                    switch (this.get_colorMap()) {\n                        case 0:\n                            pointColor = colorLocal;\n                            break;\n                        case 3:\n                            if (this.get_colorMapColumn() > -1) {\n                                if (this.get_dynamicColor()) {\n                                    pointColor = this.get_colorMapper().findClosestColor(this.normalizeColorMapValue(parseFloat(row[this.get_colorMapColumn()])));\n                                }\n                                else {\n                                    pointColor = this._parseColor$1(row[this.get_colorMapColumn()], colorLocal);\n                                }\n                            }\n                            else {\n                                pointColor = colorLocal;\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                    if (pointColor == null) {\n                        pointColor = Colors.get_transparent();\n                    }\n                    if (this.sizeColumn > -1) {\n                        switch (this.pointScaleType) {\n                            case 0:\n                                pointSize = parseFloat(row[this.sizeColumn]);\n                                pointSize = this.normalizePointSize(pointSize);\n                                break;\n                            case 2:\n                                pointSize = parseFloat(row[this.sizeColumn]);\n                                pointSize = Math.log(pointSize);\n                                break;\n                            case 1:\n                                try {\n                                    pointSize = parseFloat(row[this.sizeColumn]);\n                                    pointSize = this.normalizePointSize(pointSize);\n                                    pointSize = Math.pow(2, pointSize);\n                                }\n                                catch ($e3) {\n                                    pointSize = 0;\n                                }\n                                break;\n                            case 4:\n                                var size = 0;\n                                try {\n                                    size = parseFloat(row[this.sizeColumn]);\n                                    if (!this.bufferIsFlat) {\n                                        size = size - 5 * (Util.logN(distParces, 10) - 1);\n                                        pointSize = (120000000 / Math.pow(1.6, size));\n                                    }\n                                    else {\n                                        pointSize = (40 / Math.pow(1.6, size));\n                                    }\n                                }\n                                catch ($e4) {\n                                    pointSize = 0;\n                                }\n                                break;\n                            case 3:\n                                pointSize = 1;\n                                break;\n                            default:\n                                break;\n                        }\n                    }\n                    else {\n                        pointSize = 0.2;\n                    }\n                    if (this.get_plotType() === 1) {\n                        pointSize = 1;\n                    }\n                    if ((this.astronomical & !this.bufferIsFlat) === 1) {\n                    }\n                    if (this.startDateColumn > -1) {\n                        var dateTime = new Date(row[this.startDateColumn]);\n                        pointStartTime = (SpaceTimeController.utcToJulian(dateTime) - SpaceTimeController.utcToJulian(this.baseDate));\n                        if (this.endDateColumn > -1) {\n                            dateTime = new Date(row[this.endDateColumn]);\n                            pointEndTime = (SpaceTimeController.utcToJulian(dateTime) - SpaceTimeController.utcToJulian(this.baseDate));\n                        }\n                        else {\n                            pointEndTime = pointStartTime;\n                        }\n                    }\n                    this.pointList.addPoint(position, pointColor, new Dates(pointStartTime, pointEndTime), pointSize);\n                    if (this.geometryColumn > -1) {\n                        this._parseGeometry$1(row[this.geometryColumn], pointColor, pointColor, altitude, new Dates(pointStartTime, pointEndTime));\n                    }\n                    currentIndex++;\n                }\n            }\n            catch ($e5) {\n            }\n            this.lines = false;\n        }\n        this._table$1.unlock();\n        this._dataDirty$1 = false;\n        this.dirty = false;\n        return false;\n    },\n    _parseGeometry$1: function (gs, lineColor, polyColor, alt, date) {\n        gs = ss.trim(gs).toLowerCase();\n        var index = gs.indexOf('(');\n        if (index < 0) {\n            return;\n        }\n        if (!ss.endsWith(gs, ')')) {\n            return;\n        }\n        var commandPart = ss.trim(gs.substring(0, index));\n        var parens = gs.substr(index);\n        var parts = commandPart.split(' ');\n        var command = null;\n        var mods = null;\n        if (parts.length > 0) {\n            var $enum1 = ss.enumerate(parts);\n            while ($enum1.moveNext()) {\n                var item = $enum1.current;\n                if (ss.emptyString(command)) {\n                    command = item;\n                }\n                else if (ss.emptyString(mods)) {\n                    mods = item;\n                }\n            }\n        }\n        switch (command) {\n            case 'multipolygon':\n            case 'polygon':\n                this._parsePolygon$1(parens, mods, lineColor, polyColor, alt, date);\n                break;\n            case 'multilinestring':\n                this._parseLineString$1(parens, mods, lineColor, alt, false, date);\n                break;\n            case 'linestring':\n                this._parseLineString$1(parens, mods, lineColor, alt, true, date);\n                break;\n            case 'geometrycollection':\n                parens = parens.substring(1, parens.length - 2);\n                var shapes = UiTools.splitString(parens, ',');\n                var $enum2 = ss.enumerate(shapes);\n                while ($enum2.moveNext()) {\n                    var shape = $enum2.current;\n                    this._parseGeometry$1(shape, lineColor, polyColor, alt, date);\n                }\n                break;\n            default:\n                break;\n        }\n    },\n    _parsePolygon$1: function (parens, mods, lineColor, polyColor, alt, date) {\n        if (!ss.startsWith(parens, '(') && ss.endsWith(parens, ')')) {\n            return;\n        }\n\n        // string the top level of parens\n        parens = parens.substring(1, parens.length - 2);\n        var shapes = UiTools.splitString(parens, ',');\n        var $enum1 = ss.enumerate(shapes);\n        while ($enum1.moveNext()) {\n            var shape = $enum1.current;\n            var lineList = new KmlLineList();\n            lineList.astronomical = this.astronomical;\n            lineList.meanRadius = this._meanRadius$1;\n            lineList.parseWkt(shape, mods, alt, date);\n            if (!alt) {\n                this._addPolygonFlat$1(false, lineList, 1, polyColor, lineColor, true, true, date);\n            }\n            else {\n                this._addPolygon$1(false, lineList, 1, polyColor, lineColor, true, true, date);\n            }\n        }\n    },\n    _parseLineString$1: function (parens, mods, lineColor, alt, single, date) {\n        if (!ss.startsWith(parens, '(') && ss.endsWith(parens, ')')) {\n            return;\n        }\n        if (!single) {\n            // string the top level of parens\n            parens = parens.substring(1, parens.length - 2);\n        }\n        var shapes = UiTools.splitString(parens, ',');\n        var $enum1 = ss.enumerate(shapes);\n        while ($enum1.moveNext()) {\n            var shape = $enum1.current;\n            var lineList = new KmlLineList();\n            lineList.astronomical = this.astronomical;\n            lineList.meanRadius = this._meanRadius$1;\n            lineList.parseWkt(shape, mods, alt, date);\n            this._addPolygon$1(false, lineList, 1, Colors.get_white(), lineColor, false, false, date);\n        }\n    },\n    _splitShapes$1: function (shapes) {\n        var shapeList = [];\n        var nesting = 0;\n        var current = 0;\n        while (current < shapes.length) {\n            if (shapes.substr(current, 1) === '(') {\n                nesting++;\n            }\n        }\n        return shapeList;\n    },\n    _addPolygon$1: function (sky, geo, lineWidth, polyColor, lineColor, extrude, fill, date) {\n        //todo can we save this work for later?\n        var vertexList = [];\n        var vertexListGround = [];\n        for (var i = 0; i < geo.pointList.length; i++) {\n            vertexList.push(Coordinates.geoTo3dRad(geo.pointList[i].lat, geo.pointList[i].lng, 1 + (geo.pointList[i].alt / this._meanRadius$1)));\n            vertexListGround.push(Coordinates.geoTo3dRad(geo.pointList[i].lat, geo.pointList[i].lng, 1));\n        }\n        for (var i = 0; i < (geo.pointList.length - 1); i++) {\n            if (sky) {\n                // todo reenable this\n            }\n            else {\n                if (extrude) {\n                    this.triangleList.addQuad(vertexList[i], vertexList[i + 1], vertexListGround[i], vertexListGround[i + 1], polyColor, date);\n                }\n                if (lineWidth > 0) {\n                    if (extrude) {\n                        this.lineList.addLine(vertexList[i], vertexList[i + 1], lineColor, date);\n                    }\n                    else {\n                        this.lineList2d.addLine(vertexList[i], vertexList[i + 1], lineColor, date);\n                    }\n                    if (extrude) {\n                        this.lineList.addLine(vertexListGround[i], vertexListGround[i + 1], lineColor, date);\n                        this.lineList.addLine(vertexList[i], vertexListGround[i], lineColor, date);\n                        this.lineList.addLine(vertexList[i + 1], vertexListGround[i + 1], lineColor, date);\n                    }\n                }\n            }\n        }\n        if (fill) {\n            var indexes = Tessellator.tesselateSimplePoly(vertexList);\n            for (var i = 0; i < indexes.length; i += 3) {\n                this.triangleList.addTriangle(vertexList[indexes[i]], vertexList[indexes[i + 1]], vertexList[indexes[i + 2]], polyColor, date);\n            }\n        }\n    },\n    _addPolygonFlat$1: function (sky, geo, lineWidth, polyColor, lineColor, extrude, fill, date) {\n        var vertexList = [];\n        for (var i = 0; i < geo.pointList.length; i++) {\n            vertexList.push(Coordinates.geoTo3dRad(geo.pointList[i].lat, geo.pointList[i].lng, 1 + (geo.pointList[i].alt / this._meanRadius$1)));\n        }\n        for (var i = 0; i < (geo.pointList.length - 1); i++) {\n            if (sky) {\n            }\n            else {\n                if (lineWidth > 0) {\n                    this.lineList2d.addLine(vertexList[i], vertexList[i + 1], lineColor, date);\n                }\n            }\n        }\n        if (fill) {\n            var indexes = Tessellator.tesselateSimplePoly(vertexList);\n            for (var i = 0; i < indexes.length; i += 3) {\n                this.triangleList2d.addSubdividedTriangles(vertexList[indexes[i]], vertexList[indexes[i + 1]], vertexList[indexes[i + 2]], polyColor, date, 2);\n            }\n        }\n    },\n    _parseColor$1: function (colorText, defaultColor) {\n        return Color.load(colorText);\n    },\n\n    getScaleFactor: function (AltUnit, custom) {\n        var factor = 1;\n        switch (AltUnit) {\n            case 1:\n                factor = 1;\n                break;\n            case 2:\n                factor = 1 * 0.3048;\n                break;\n            case 3:\n                factor = (1 / 12) * 0.3048;\n                break;\n            case 4:\n                factor = 5280 * 0.3048;\n                break;\n            case 5:\n                factor = 1000;\n                break;\n            case 6:\n                factor = 1000 * 149598000;\n                break;\n            case 7:\n                factor = 1000 * 149598000 * 63239.6717;\n                break;\n            case 8:\n                factor = 1000 * 149598000 * 206264.806;\n                break;\n            case 9:\n                factor = 1000 * 149598000 * 206264.806 * 1000000;\n                break;\n            case 10:\n                factor = custom;\n                break;\n            default:\n                break;\n        }\n        return factor;\n    },\n\n    get__table: function () {\n        return this._table$1;\n    },\n\n    set__table: function (value) {\n        this._table$1 = value;\n        return value;\n    },\n\n    useHeadersFromVoTable: function (voTable) {\n        var $enum1 = ss.enumerate(voTable.column);\n        while ($enum1.moveNext()) {\n            var column = $enum1.current;\n            this.get_header().push(column.name);\n        }\n        this.guessHeaderAssignmentsFromVoTable(voTable);\n        if (voTable.getRAColumn() != null && voTable.getRAColumn().unit.toLowerCase() === 'deg') {\n            this.set_raUnits(1);\n        }\n    },\n\n    loadFromString: function (data, isUpdate, purgeOld, purgeAll, hasHeader) {\n        if (!isUpdate) {\n            this._table$1 = new Table();\n        }\n        this._table$1.lock();\n        this._table$1.loadFromString(data, isUpdate, purgeAll, hasHeader);\n        if (!isUpdate) {\n            this.guessHeaderAssignments();\n            if (this.astronomical && this.lngColumn > -1) {\n                var max = this.getMaxValue(this.lngColumn);\n                if (max > 24) {\n                    this.set_raUnits(1);\n                }\n            }\n        }\n        if (purgeOld) {\n            this.purgeByTime();\n        }\n        this._table$1.unlock();\n    },\n\n    purgeByTime: function () {\n        if (this.startDateColumn < 0) {\n            return;\n        }\n        var columnToUse = this.startDateColumn;\n        if (this.endDateColumn > -1) {\n            columnToUse = this.endDateColumn;\n        }\n        var threasholdTime = SpaceTimeController.get_now();\n        var ts = ss.truncate(this.decay) * 24 * 60 * 60 * 1000;\n        threasholdTime = new Date(threasholdTime.getDate() - ts);\n        var count = this._table$1.rows.length;\n        for (var i = 0; i < count; i++) {\n            try {\n                var row = this._table$1.rows[i];\n                var colDate = new Date(row[columnToUse]);\n                if (colDate < threasholdTime) {\n                    this._table$1.rows.splice(i, 1);\n                    count--;\n                    i--;\n                }\n            }\n            catch ($e1) {\n            }\n        }\n    },\n\n    cleanUp: function () {\n        this.cleanUpBase();\n        this._table$1.lock();\n        Layer.prototype.cleanUp.call(this);\n        this._table$1.unlock();\n        this.dirty = true;\n    },\n\n    writeLayerProperties: function (xmlWriter) {\n        xmlWriter._writeAttributeString('TimeSeries', this.get_timeSeries().toString());\n        xmlWriter._writeAttributeString('BeginRange', Util.xmlDate(this.get_beginRange()));\n        xmlWriter._writeAttributeString('EndRange', Util.xmlDate(this.get_endRange()));\n        xmlWriter._writeAttributeString('Decay', this.get_decay().toString());\n        xmlWriter._writeAttributeString('CoordinatesType', Enums.toXml('CoordinatesTypes', this.get_coordinatesType()));\n        xmlWriter._writeAttributeString('LatColumn', this.get_latColumn().toString());\n        xmlWriter._writeAttributeString('LngColumn', this.get_lngColumn().toString());\n        xmlWriter._writeAttributeString('GeometryColumn', this.get_geometryColumn().toString());\n        xmlWriter._writeAttributeString('AltType', Enums.toXml('AltTypes', this.get_altType()));\n        xmlWriter._writeAttributeString('MarkerMix', Enums.toXml('MarkerMixes', this.get_markerMix()));\n        xmlWriter._writeAttributeString('ColorMap', Enums.toXml('ColorMaps', this.get_colorMap()));\n        xmlWriter._writeAttributeString('MarkerColumn', this.get_markerColumn().toString());\n        xmlWriter._writeAttributeString('PlotType', Enums.toXml('PlotTypes', this.get_plotType()));\n        xmlWriter._writeAttributeString('MarkerIndex', this.get_markerIndex().toString());\n        xmlWriter._writeAttributeString('MarkerScale', Enums.toXml('MarkerScales', this.get_markerScale()));\n        xmlWriter._writeAttributeString('AltUnit', Enums.toXml('AltUnits', this.get_altUnit()));\n        xmlWriter._writeAttributeString('AltColumn', this.get_altColumn().toString());\n        xmlWriter._writeAttributeString('StartDateColumn', this.get_startDateColumn().toString());\n        xmlWriter._writeAttributeString('EndDateColumn', this.get_endDateColumn().toString());\n\n        // In this layer class we implement dynamic scaling and coloring of the points\n        // based on one of the existing numerical columns. However, we need to produce\n        // XML files that are backward-compatible with older versions of WWT. If\n        // dynamic scaling/coloring is used, we therefore point sizeColumn and/or\n        // colorMapColumn to the hard-coded sizes/colors, and then if we detect\n        // normalization arguments when reading in the XML, we switch sizeColumn\n        // and/or colorMapColumn to the original one.\n\n        // Note that we need to call this here since WriteLayerProperties\n        // gets called before AddFilesToCabinet.\n        this._prepareBackCompatTable$1();\n        if (this._lastNormalizeSizeColumnIndex$1 > -1) {\n            xmlWriter._writeAttributeString('SizeColumn', this._lastNormalizeSizeColumnIndex$1);\n            xmlWriter._writeAttributeString('NormalizeSizeColumn', this.sizeColumn.toString());\n        } else {\n            xmlWriter._writeAttributeString('SizeColumn', this.get_sizeColumn().toString());\n        }\n        xmlWriter._writeAttributeString('NormalizeSize', this.get_normalizeSize().toString());\n        xmlWriter._writeAttributeString('NormalizeSizeClip', this.get_normalizeSizeClip().toString());\n        xmlWriter._writeAttributeString('NormalizeSizeMin', this.get_normalizeSizeMin().toString());\n        xmlWriter._writeAttributeString('NormalizeSizeMax', this.get_normalizeSizeMax().toString());\n        if (this._lastDynamicColorColumnIndex$1 > -1) {\n            xmlWriter._writeAttributeString('ColorMapColumn', this._lastDynamicColorColumnIndex$1);\n            xmlWriter._writeAttributeString('DynamicColorColumn', this.get_colorMapColumn().toString());\n        } else {\n            xmlWriter._writeAttributeString('ColorMapColumn', this.get_colorMapColumn().toString());\n        }\n        xmlWriter._writeAttributeString('DynamicColor', this.get_dynamicColor().toString());\n        xmlWriter._writeAttributeString('ColorMapperName', this.get_colorMapperName());\n        xmlWriter._writeAttributeString('NormalizeColorMap', this.get_normalizeColorMap().toString());\n        xmlWriter._writeAttributeString('NormalizeColorMapMin', this.get_normalizeColorMapMin().toString());\n        xmlWriter._writeAttributeString('NormalizeColorMapMax', this.get_normalizeColorMapMax().toString());\n        xmlWriter._writeAttributeString('HyperlinkFormat', this.get_hyperlinkFormat());\n        xmlWriter._writeAttributeString('HyperlinkColumn', this.get_hyperlinkColumn().toString());\n        xmlWriter._writeAttributeString('ScaleFactor', this.get_scaleFactor().toString());\n        xmlWriter._writeAttributeString('PointScaleType', Enums.toXml('PointScaleTypes', this.get_pointScaleType()));\n        xmlWriter._writeAttributeString('ShowFarSide', this.get_showFarSide().toString());\n        xmlWriter._writeAttributeString('RaUnits', Enums.toXml('RAUnits', this.get_raUnits()));\n        xmlWriter._writeAttributeString('HoverTextColumn', this.get_nameColumn().toString());\n        xmlWriter._writeAttributeString('XAxisColumn', this.get_xAxisColumn().toString());\n        xmlWriter._writeAttributeString('XAxisReverse', this.get_xAxisReverse().toString());\n        xmlWriter._writeAttributeString('YAxisColumn', this.get_yAxisColumn().toString());\n        xmlWriter._writeAttributeString('YAxisReverse', this.get_yAxisReverse().toString());\n        xmlWriter._writeAttributeString('ZAxisColumn', this.get_zAxisColumn().toString());\n        xmlWriter._writeAttributeString('ZAxisReverse', this.get_zAxisReverse().toString());\n        xmlWriter._writeAttributeString('CartesianScale', Enums.toXml('AltUnits', this.get_cartesianScale()));\n        xmlWriter._writeAttributeString('CartesianCustomScale', this.get_cartesianCustomScale().toString());\n        xmlWriter._writeAttributeString('DynamicData', this.get_dynamicData().toString());\n        xmlWriter._writeAttributeString('AutoUpdate', this.get_autoUpdate().toString());\n        xmlWriter._writeAttributeString('DataSourceUrl', this.get_dataSourceUrl());\n    },\n\n    get_dynamicData: function () {\n        return this._dynamicData$1;\n    },\n\n    set_dynamicData: function (value) {\n        this._dynamicData$1 = value;\n        return value;\n    },\n\n    get_autoUpdate: function () {\n        return this._autoUpdate$1;\n    },\n\n    set_autoUpdate: function (value) {\n        this._autoUpdate$1 = value;\n        return value;\n    },\n\n    get_dataSourceUrl: function () {\n        return this._dataSourceUrl$1;\n    },\n\n    set_dataSourceUrl: function (value) {\n        this._dataSourceUrl$1 = value;\n        return value;\n    },\n\n    get_timeSeries: function () {\n        return this.timeSeries;\n    },\n\n    set_timeSeries: function (value) {\n        if (this.timeSeries !== value) {\n            this.version++;\n            this.timeSeries = value;\n        }\n        return value;\n    },\n\n    get_beginRange: function () {\n        return this._beginRange$1;\n    },\n\n    set_beginRange: function (value) {\n        if (!ss.compareDates(this._beginRange$1, value)) {\n            this.version++;\n            this._beginRange$1 = value;\n        }\n        return value;\n    },\n\n    get_endRange: function () {\n        return this._endRange$1;\n    },\n\n    set_endRange: function (value) {\n        if (!ss.compareDates(this._endRange$1, value)) {\n            this.version++;\n            this._endRange$1 = value;\n        }\n        return value;\n    },\n\n    initializeFromXml: function (node) {\n        this.set_timeSeries(ss.boolean(node.attributes.getNamedItem('TimeSeries').nodeValue));\n        this.set_beginRange(new Date(node.attributes.getNamedItem('BeginRange').nodeValue));\n        this.set_endRange(new Date(node.attributes.getNamedItem('EndRange').nodeValue));\n        this.set_decay(parseFloat(node.attributes.getNamedItem('Decay').nodeValue));\n        this.set_coordinatesType(Enums.parse('CoordinatesTypes', node.attributes.getNamedItem('CoordinatesType').nodeValue));\n        if (this.get_coordinatesType() < 0) {\n            this.set_coordinatesType(0);\n        }\n        this.set_latColumn(parseInt(node.attributes.getNamedItem('LatColumn').nodeValue));\n        this.set_lngColumn(parseInt(node.attributes.getNamedItem('LngColumn').nodeValue));\n        if (node.attributes.getNamedItem('GeometryColumn') != null) {\n            this.set_geometryColumn(parseInt(node.attributes.getNamedItem('GeometryColumn').nodeValue));\n        }\n        this.set_altType(Enums.parse('AltTypes', node.attributes.getNamedItem('AltType').nodeValue));\n        this.set_markerMix(0);\n        this.set_colorMap(Enums.parse('ColorMaps', node.attributes.getNamedItem('ColorMap').nodeValue));\n        this.set_markerColumn(parseInt(node.attributes.getNamedItem('MarkerColumn').nodeValue));\n        this.set_colorMapColumn(parseInt(node.attributes.getNamedItem('ColorMapColumn').nodeValue));\n        this.set_plotType(Enums.parse('PlotTypes', node.attributes.getNamedItem('PlotType').nodeValue));\n        this.set_markerIndex(parseInt(node.attributes.getNamedItem('MarkerIndex').nodeValue));\n        this.set_markerScale(Enums.parse('MarkerScales', node.attributes.getNamedItem('MarkerScale').nodeValue));\n        this.set_altUnit(Enums.parse('AltUnits', node.attributes.getNamedItem('AltUnit').nodeValue));\n        this.set_altColumn(parseInt(node.attributes.getNamedItem('AltColumn').nodeValue));\n        this.set_startDateColumn(parseInt(node.attributes.getNamedItem('StartDateColumn').nodeValue));\n        this.set_endDateColumn(parseInt(node.attributes.getNamedItem('EndDateColumn').nodeValue));\n\n        // In this layer class we implement dynamic scaling and coloring of the points\n        // based on one of the existing numerical columns. However, we need to produce\n        // XML files that are backward-compatible with older versions of WWT. Since we\n        // can deal with size/color scaling here, we ignore SizeColumn and ColorMapColumn\n        // and use NormalizeSizeColumn and DynamicColorColumn instead, if present.\n\n        if (node.attributes.getNamedItem('NormalizeSizeColumn') != null) {\n            this.set_sizeColumn(parseInt(node.attributes.getNamedItem('NormalizeSizeColumn').nodeValue));\n        } else {\n            this.set_sizeColumn(parseInt(node.attributes.getNamedItem('SizeColumn').nodeValue));\n        }\n\n        // Only recent files have normalization parameters\n\n        if (node.attributes.getNamedItem('NormalizeSize') != null) {\n            this.set_normalizeSize(ss.boolean(node.attributes.getNamedItem('NormalizeSize').nodeValue));\n            this.set_normalizeSizeClip(ss.boolean(node.attributes.getNamedItem('NormalizeSizeClip').nodeValue));\n            this.set_normalizeSizeMin(parseFloat(node.attributes.getNamedItem('NormalizeSizeMin').nodeValue));\n            this.set_normalizeSizeMax(parseFloat(node.attributes.getNamedItem('NormalizeSizeMax').nodeValue));\n        }\n        if (node.attributes.getNamedItem('DynamicColorColumn') != null) {\n            this.set_colorMapColumn(parseInt(node.attributes.getNamedItem('DynamicColorColumn').nodeValue));\n        } else {\n            this.set_colorMapColumn(parseInt(node.attributes.getNamedItem('ColorMapColumn').nodeValue));\n        }\n\n        // Only recent files have normalization parameters\n\n        if (node.attributes.getNamedItem('DynamicColor') != null) {\n            this.set_dynamicColor(ss.boolean(node.attributes.getNamedItem('DynamicColor').nodeValue));\n            this.set_colorMapperName(node.attributes.getNamedItem('ColorMapperName').nodeValue);\n            this.set_normalizeColorMap(ss.boolean(node.attributes.getNamedItem('NormalizeColorMap').nodeValue));\n            this.set_normalizeColorMapMin(parseFloat(node.attributes.getNamedItem('NormalizeColorMapMin').nodeValue));\n            this.set_normalizeColorMapMax(parseFloat(node.attributes.getNamedItem('NormalizeColorMapMax').nodeValue));\n        }\n        this.set_hyperlinkFormat(node.attributes.getNamedItem('HyperlinkFormat').nodeValue);\n        this.set_hyperlinkColumn(parseInt(node.attributes.getNamedItem('HyperlinkColumn').nodeValue));\n        this.set_scaleFactor(parseFloat(node.attributes.getNamedItem('ScaleFactor').nodeValue));\n        this.set_pointScaleType(Enums.parse('PointScaleTypes', node.attributes.getNamedItem('PointScaleType').nodeValue));\n        if (node.attributes.getNamedItem('ShowFarSide') != null) {\n            this.set_showFarSide(ss.boolean(node.attributes.getNamedItem('ShowFarSide').nodeValue));\n        }\n        if (node.attributes.getNamedItem('RaUnits') != null) {\n            this.set_raUnits(Enums.parse('RAUnits', node.attributes.getNamedItem('RaUnits').nodeValue));\n        }\n        if (node.attributes.getNamedItem('HoverTextColumn') != null) {\n            this.set_nameColumn(parseInt(node.attributes.getNamedItem('HoverTextColumn').nodeValue));\n        }\n        if (node.attributes.getNamedItem('XAxisColumn') != null) {\n            this.set_xAxisColumn(parseInt(node.attributes.getNamedItem('XAxisColumn').nodeValue));\n            this.set_xAxisReverse(ss.boolean(node.attributes.getNamedItem('XAxisReverse').nodeValue));\n            this.set_yAxisColumn(parseInt(node.attributes.getNamedItem('YAxisColumn').nodeValue));\n            this.set_yAxisReverse(ss.boolean(node.attributes.getNamedItem('YAxisReverse').nodeValue));\n            this.set_zAxisColumn(parseInt(node.attributes.getNamedItem('ZAxisColumn').nodeValue));\n            this.set_zAxisReverse(ss.boolean(node.attributes.getNamedItem('ZAxisReverse').nodeValue));\n            this.set_cartesianScale(Enums.parse('AltUnits', node.attributes.getNamedItem('CartesianScale').nodeValue));\n            this.set_cartesianCustomScale(parseFloat(node.attributes.getNamedItem('CartesianCustomScale').nodeValue));\n        }\n        if (node.attributes.getNamedItem('DynamicData') != null) {\n            this.set_dynamicData(ss.boolean(node.attributes.getNamedItem('DynamicData').nodeValue));\n            this.set_autoUpdate(ss.boolean(node.attributes.getNamedItem('AutoUpdate').nodeValue));\n            this.set_dataSourceUrl(node.attributes.getNamedItem('DataSourceUrl').nodeValue);\n        }\n    },\n\n    get_decay: function () {\n        return this.decay;\n    },\n\n    set_decay: function (value) {\n        if (this.decay !== value) {\n            this.version++;\n            this.decay = value;\n        }\n        return value;\n    },\n\n    get_coordinatesType: function () {\n        return this._coordinatesType$1;\n    },\n\n    set_coordinatesType: function (value) {\n        if (this._coordinatesType$1 !== value) {\n            this.version++;\n            this._coordinatesType$1 = value;\n        }\n        return value;\n    },\n\n    get_latColumn: function () {\n        return this.latColumn;\n    },\n\n    set_latColumn: function (value) {\n        if (this.latColumn !== value) {\n            this.version++;\n            this.latColumn = value;\n        }\n        return value;\n    },\n\n    get_lngColumn: function () {\n        return this.lngColumn;\n    },\n\n    set_lngColumn: function (value) {\n        if (this.lngColumn !== value) {\n            this.version++;\n            this.lngColumn = value;\n        }\n        return value;\n    },\n\n    get_geometryColumn: function () {\n        return this.geometryColumn;\n    },\n\n    set_geometryColumn: function (value) {\n        if (this.geometryColumn !== value) {\n            this.version++;\n            this.geometryColumn = value;\n        }\n        return value;\n    },\n\n    get_xAxisColumn: function () {\n        return this._xAxisColumn$1;\n    },\n\n    set_xAxisColumn: function (value) {\n        if (this._xAxisColumn$1 !== value) {\n            this.version++;\n            this._xAxisColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_yAxisColumn: function () {\n        return this._yAxisColumn$1;\n    },\n\n    set_yAxisColumn: function (value) {\n        if (this._yAxisColumn$1 !== value) {\n            this.version++;\n            this._yAxisColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_zAxisColumn: function () {\n        return this._zAxisColumn$1;\n    },\n\n    set_zAxisColumn: function (value) {\n        if (this._zAxisColumn$1 !== value) {\n            this.version++;\n            this._zAxisColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_xAxisReverse: function () {\n        return this._xAxisReverse$1;\n    },\n\n    set_xAxisReverse: function (value) {\n        if (this._xAxisReverse$1 !== value) {\n            this.version++;\n            this._xAxisReverse$1 = value;\n        }\n        return value;\n    },\n\n    get_yAxisReverse: function () {\n        return this._yAxisReverse$1;\n    },\n\n    set_yAxisReverse: function (value) {\n        if (this._yAxisReverse$1 !== value) {\n            this.version++;\n            this._yAxisReverse$1 = value;\n        }\n        return value;\n    },\n\n    get_zAxisReverse: function () {\n        return this._zAxisReverse$1;\n    },\n\n    set_zAxisReverse: function (value) {\n        if (this._zAxisReverse$1 !== value) {\n            this.version++;\n            this._zAxisReverse$1 = value;\n        }\n        return value;\n    },\n\n    get_altType: function () {\n        return this._altType$1;\n    },\n\n    set_altType: function (value) {\n        if (this._altType$1 !== value) {\n            this.version++;\n            this._altType$1 = value;\n        }\n        return value;\n    },\n\n    get_markerMix: function () {\n        return this._markerMix$1;\n    },\n\n    set_markerMix: function (value) {\n        if (this._markerMix$1 !== value) {\n            this.version++;\n            this._markerMix$1 = value;\n        }\n        return value;\n    },\n\n    get_raUnits: function () {\n        return this._raUnits$1;\n    },\n\n    set_raUnits: function (value) {\n        if (this._raUnits$1 !== value) {\n            this.version++;\n            this._raUnits$1 = value;\n        }\n        return value;\n    },\n\n    get_colorMap: function () {\n        return this.colorMap;\n    },\n\n    set_colorMap: function (value) {\n        if (this.colorMap !== value) {\n            this.version++;\n            this.colorMap = value;\n        }\n        return value;\n    },\n\n    get_colorMapperName: function () {\n        return this.colorMapperName;\n    },\n\n    set_colorMapperName: function (value) {\n        if (ColorMapContainer.fromNamedColormap(value) == null) {\n            throw new Error('Invalid colormap name');\n        }\n        this.version++;\n        this.colorMapperName = value;\n        return value;\n    },\n\n    get_colorMapper: function () {\n        return ColorMapContainer.fromNamedColormap(this.colorMapperName);\n    },\n\n    get_dynamicColor: function () {\n        return this.dynamicColor;\n    },\n\n    set_dynamicColor: function (value) {\n        this.version++;\n        this.dynamicColor = value;\n        return value;\n    },\n\n    get_normalizeColorMap: function () {\n        return this.normalizeColorMap;\n    },\n\n    set_normalizeColorMap: function (value) {\n        this.version++;\n        this.normalizeColorMap = value;\n        return value;\n    },\n\n    get_normalizeColorMapMin: function () {\n        return this.normalizeColorMapMin;\n    },\n\n    set_normalizeColorMapMin: function (value) {\n        this.version++;\n        this.normalizeColorMapMin = value;\n        return value;\n    },\n\n    get_normalizeColorMapMax: function () {\n        return this.normalizeColorMapMax;\n    },\n\n    set_normalizeColorMapMax: function (value) {\n        this.version++;\n        this.normalizeColorMapMax = value;\n        return value;\n    },\n\n    normalizeColorMapValue: function (value) {\n        if (!this.get_normalizeColorMap()) {\n            return value;\n        }\n        var new_value = (value - this.get_normalizeColorMapMin()) / (this.get_normalizeColorMapMax() - this.get_normalizeColorMapMin());\n        if (new_value < 0) {\n            new_value = 0;\n        } else if (new_value > 1) {\n            new_value = 1;\n        }\n        return new_value;\n    },\n\n    get_markerColumn: function () {\n        return this._markerColumn$1;\n    },\n\n    set_markerColumn: function (value) {\n        if (this._markerColumn$1 !== value) {\n            this.version++;\n            this._markerColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_colorMapColumn: function () {\n        return this.colorMapColumn;\n    },\n\n    set_colorMapColumn: function (value) {\n        if (this.colorMapColumn !== value) {\n            this.version++;\n            this.colorMapColumn = value;\n        }\n        return value;\n    },\n\n    get_plotType: function () {\n        return this._plotType$1;\n    },\n\n    set_plotType: function (value) {\n        if (this._plotType$1 !== value) {\n            this.version++;\n            this._plotType$1 = value;\n        }\n        return value;\n    },\n\n    get_markerIndex: function () {\n        return this._markerIndex$1;\n    },\n\n    set_markerIndex: function (value) {\n        if (this._markerIndex$1 !== value) {\n            this.version++;\n            this._markerIndex$1 = value;\n        }\n        return value;\n    },\n\n    get_showFarSide: function () {\n        return this._showFarSide$1;\n    },\n\n    set_showFarSide: function (value) {\n        if (this._showFarSide$1 !== value) {\n            this.version++;\n            this._showFarSide$1 = value;\n        }\n        return value;\n    },\n\n    get_markerScale: function () {\n        return this._markerScale$1;\n    },\n\n    set_markerScale: function (value) {\n        if (this._markerScale$1 !== value) {\n            this.version++;\n            this._markerScale$1 = value;\n        }\n        return value;\n    },\n\n    get_altUnit: function () {\n        return this._altUnit$1;\n    },\n\n    set_altUnit: function (value) {\n        if (this._altUnit$1 !== value) {\n            this.version++;\n            this._altUnit$1 = value;\n        }\n        return value;\n    },\n\n    get_cartesianScale: function () {\n        return this._cartesianScale$1;\n    },\n\n    set_cartesianScale: function (value) {\n        if (this._cartesianScale$1 !== value) {\n            this.version++;\n            this._cartesianScale$1 = value;\n        }\n        return value;\n    },\n\n    get_cartesianCustomScale: function () {\n        return this._cartesianCustomScale$1;\n    },\n\n    set_cartesianCustomScale: function (value) {\n        if (this._cartesianCustomScale$1 !== value) {\n            this.version++;\n            this._cartesianCustomScale$1 = value;\n        }\n        return value;\n    },\n\n    get_altColumn: function () {\n        return this.altColumn;\n    },\n\n    set_altColumn: function (value) {\n        if (this.altColumn !== value) {\n            this.version++;\n            this.altColumn = value;\n        }\n        return value;\n    },\n\n    get_startDateColumn: function () {\n        return this.startDateColumn;\n    },\n\n    set_startDateColumn: function (value) {\n        if (this.startDateColumn !== value) {\n            this.version++;\n            this.startDateColumn = value;\n        }\n        return value;\n    },\n\n    get_endDateColumn: function () {\n        return this.endDateColumn;\n    },\n\n    set_endDateColumn: function (value) {\n        if (this.endDateColumn !== value) {\n            this.version++;\n            this.endDateColumn = value;\n        }\n        return value;\n    },\n\n    get_sizeColumn: function () {\n        return this.sizeColumn;\n    },\n\n    set_sizeColumn: function (value) {\n        if (this.sizeColumn !== value) {\n            this.version++;\n            this.sizeColumn = value;\n        }\n        return value;\n    },\n\n    get_normalizeSize: function () {\n        return this.normalizeSize;\n    },\n\n    set_normalizeSize: function (value) {\n        if (this.normalizeSize !== value) {\n            this.version++;\n            this.normalizeSize = value;\n        }\n        return value;\n    },\n\n    get_normalizeSizeClip: function () {\n        return this.normalizeSizeClip;\n    },\n\n    set_normalizeSizeClip: function (value) {\n        if (this.normalizeSizeClip !== value) {\n            this.version++;\n            this.normalizeSizeClip = value;\n        }\n        return value;\n    },\n\n    get_normalizeSizeMin: function () {\n        return this.normalizeSizeMin;\n    },\n\n    set_normalizeSizeMin: function (value) {\n        if (this.normalizeSizeMin !== value) {\n            this.version++;\n            this.normalizeSizeMin = value;\n        }\n        return value;\n    },\n\n    get_normalizeSizeMax: function () {\n        return this.normalizeSizeMax;\n    },\n\n    set_normalizeSizeMax: function (value) {\n        if (this.normalizeSizeMax !== value) {\n            this.version++;\n            this.normalizeSizeMax = value;\n        }\n        return value;\n    },\n\n    normalizePointSize: function (value) {\n        if (!this.get_normalizeSize()) {\n            return value;\n        }\n        var new_value = (value - this.get_normalizeSizeMin()) / (this.get_normalizeSizeMax() - this.get_normalizeSizeMin());\n        if (this.get_normalizeSizeClip()) {\n            if (new_value < 0) {\n                new_value = 0;\n            }\n            else if (new_value > 1) {\n                new_value = 1;\n            }\n        }\n        return new_value;\n    },\n\n    get_nameColumn: function () {\n        return this.nameColumn;\n    },\n\n    set_nameColumn: function (value) {\n        if (this.nameColumn !== value) {\n            this.version++;\n            this.nameColumn = value;\n        }\n        return value;\n    },\n\n    get_hyperlinkFormat: function () {\n        return this._hyperlinkFormat$1;\n    },\n\n    set_hyperlinkFormat: function (value) {\n        if (this._hyperlinkFormat$1 !== value) {\n            this.version++;\n            this._hyperlinkFormat$1 = value;\n        }\n        return value;\n    },\n\n    get_hyperlinkColumn: function () {\n        return this._hyperlinkColumn$1;\n    },\n\n    set_hyperlinkColumn: function (value) {\n        if (this._hyperlinkColumn$1 !== value) {\n            this.version++;\n            this._hyperlinkColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_scaleFactor: function () {\n        return this.scaleFactor;\n    },\n\n    set_scaleFactor: function (value) {\n        if (this.scaleFactor !== value) {\n            this.version++;\n            this.scaleFactor = value;\n        }\n        return value;\n    },\n\n    get_pointScaleType: function () {\n        return this.pointScaleType;\n    },\n\n    set_pointScaleType: function (value) {\n        if (this.pointScaleType !== value) {\n            this.version++;\n            this.pointScaleType = value;\n        }\n        return value;\n    },\n\n    draw: function (renderContext, opacity, flat) {\n        var device = renderContext;\n        if (this.version !== this.lastVersion) {\n            this.cleanUp();\n        }\n        this.lastVersion = this.version;\n        if (this.bufferIsFlat !== flat) {\n            this.cleanUp();\n            this.bufferIsFlat = flat;\n        }\n        if (this.dirty) {\n            this.prepVertexBuffer(device, opacity);\n        }\n        var jNow = SpaceTimeController.get_jNow() - SpaceTimeController.utcToJulian(this.baseDate);\n        var adjustedScale = this.scaleFactor * 3;\n        if (flat && this.astronomical && (this._markerScale$1 === 1)) {\n            adjustedScale = (this.scaleFactor / (renderContext.viewCamera.zoom / 360));\n        }\n        if (this.triangleList2d != null) {\n            this.triangleList2d.decay = this.decay;\n            this.triangleList2d.sky = this.get_astronomical();\n            this.triangleList2d.timeSeries = this.timeSeries;\n            this.triangleList2d.jNow = jNow;\n            this.triangleList2d.draw(renderContext, opacity * this.get_opacity(), 1);\n        }\n        if (this.triangleList != null) {\n            this.triangleList.decay = this.decay;\n            this.triangleList.sky = this.get_astronomical();\n            this.triangleList.timeSeries = this.timeSeries;\n            this.triangleList.jNow = jNow;\n            this.triangleList.draw(renderContext, opacity * this.get_opacity(), 1);\n        }\n        if (this.pointList != null) {\n            this.pointList.depthBuffered = false;\n            this.pointList.showFarSide = this.get_showFarSide();\n            this.pointList.decay = (this.timeSeries) ? this.decay : 0;\n            this.pointList.sky = this.get_astronomical();\n            this.pointList.timeSeries = this.timeSeries;\n            this.pointList.jNow = jNow;\n            this.pointList.scale = (this._markerScale$1 === 1) ? adjustedScale : -adjustedScale;\n            switch (this._plotType$1) {\n                case 0:\n                    this.pointList.draw(renderContext, opacity * this.get_opacity(), false);\n                    break;\n                case 2:\n                    this.pointList.drawTextured(renderContext, SpreadSheetLayer.get__circleTexture$1().texture2d, opacity * this.get_opacity());\n                    break;\n                case 1:\n                    this.pointList.drawTextured(renderContext, PushPin.getPushPinTexture(19), opacity * this.get_opacity());\n                    break;\n                case 3:\n                    this.pointList.drawTextured(renderContext, PushPin.getPushPinTexture(35), opacity * this.get_opacity());\n                    break;\n                case 5:\n                case 4:\n                    this.pointList.drawTextured(renderContext, PushPin.getPushPinTexture(this._markerIndex$1), opacity * this.get_opacity());\n                    break;\n                default:\n                    break;\n            }\n        }\n        if (this.lineList != null) {\n            this.lineList.sky = this.get_astronomical();\n            this.lineList.decay = this.decay;\n            this.lineList.timeSeries = this.timeSeries;\n            this.lineList.jNow = jNow;\n            this.lineList.drawLines(renderContext, opacity * this.get_opacity());\n        }\n        if (this.lineList2d != null) {\n            this.lineList2d.sky = this.get_astronomical();\n            this.lineList2d.decay = this.decay;\n            this.lineList2d.timeSeries = this.timeSeries;\n            this.lineList2d.showFarSide = this.get_showFarSide();\n            this.lineList2d.jNow = jNow;\n            this.lineList2d.drawLines(renderContext, opacity * this.get_opacity());\n        }\n        return true;\n    },\n\n    cleanUpBase: function () {\n        if (this.lineList != null) {\n            this.lineList.clear();\n        }\n        if (this.lineList2d != null) {\n            this.lineList2d.clear();\n        }\n        if (this.triangleList2d != null) {\n            this.triangleList2d.clear();\n        }\n        if (this.pointList != null) {\n            this.pointList.clear();\n        }\n        if (this.triangleList != null) {\n            this.triangleList.clear();\n        }\n    }\n};\n\nregisterType(\"SpreadSheetLayer\", [SpreadSheetLayer, SpreadSheetLayer$, Layer]);\n\n\n// wwtlib.CatalogSpreadSheetLayer\n\nexport function CatalogSpreadSheetLayer() {\n    this._addedTiles$2 = {};\n    SpreadSheetLayer.call(this);\n}\n\nvar CatalogSpreadSheetLayer$ = {\n    addTileRows: function (tileKey, catalogRows) {\n        if (!ss.keyExists(this._addedTiles$2, tileKey)) {\n            var $enum1 = ss.enumerate(catalogRows);\n            while ($enum1.moveNext()) {\n                var row = $enum1.current;\n                this.get__table().rows.push(row);\n            }\n            this.dirty = true;\n            this._addedTiles$2[tileKey] = true;\n        }\n    },\n\n    removeTileRows: function (tileKey, catalogRows) {\n        if (ss.keyExists(this._addedTiles$2, tileKey)) {\n            var $enum1 = ss.enumerate(catalogRows);\n            while ($enum1.moveNext()) {\n                var row = $enum1.current;\n                ss.remove(this.get__table().rows, row);\n            }\n            this.dirty = true;\n            delete this._addedTiles$2[tileKey];\n        }\n    },\n\n    cleanUp: function () {\n        SpreadSheetLayer.prototype.cleanUp.call(this);\n        ss.clearKeys(this._addedTiles$2);\n        this.get__table().rows.length = 0;\n    }\n};\n\nregisterType(\"CatalogSpreadSheetLayer\", [CatalogSpreadSheetLayer, CatalogSpreadSheetLayer$, SpreadSheetLayer]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Tabular data.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { Guid } from \"../util.js\";\nimport { UiTools } from \"../ui_tools.js\";\n\n\n// wwtlib.Table\n\nexport function Table() {\n    this.guid = new Guid();\n    this.header = [];\n    this.rows = [];\n    this.delimiter = '\\t';\n    this.locked = false;\n}\n\nvar Table$ = {\n    lock: function () {\n        this.locked = true;\n    },\n\n    unlock: function () {\n        this.locked = false;\n    },\n\n    save: function () {\n        var data = '';\n        var first = true;\n        var $enum1 = ss.enumerate(this.header);\n        while ($enum1.moveNext()) {\n            var col = $enum1.current;\n            if (!first) {\n                data += '\\t';\n            }\n            else {\n                first = false;\n            }\n            data += col;\n        }\n        data += '\\r\\n';\n        var $enum2 = ss.enumerate(this.rows);\n        while ($enum2.moveNext()) {\n            var row = $enum2.current;\n            first = true;\n            var $enum3 = ss.enumerate(row);\n            while ($enum3.moveNext()) {\n                var col = $enum3.current;\n                if (!first) {\n                    data += '\\t';\n                }\n                else {\n                    first = false;\n                }\n                data += col;\n            }\n            data += '\\r\\n';\n        }\n        return data;\n    },\n\n    loadFromString: function (data, isUpdate, purge, hasHeader) {\n        var count = 0;\n        var lines = data.split('\\r\\n');\n        if (!isUpdate || hasHeader) {\n            if (lines.length > 0) {\n                var headerLine = lines[0];\n                count++;\n                if (headerLine.indexOf('\\t') === -1 && headerLine.indexOf(',') > -1) {\n                    this.delimiter = ',';\n                }\n                if (!isUpdate) {\n                    this.rows.length = 0;\n                }\n                this.header = UiTools.splitString(headerLine, this.delimiter);\n            }\n            else {\n                this.header = [];\n            }\n        }\n        var temp = [];\n        if (!purge) {\n            temp = this.rows;\n        }\n        while (count < lines.length) {\n            var line = lines[count];\n            var rowData = UiTools.splitString(line, this.delimiter);\n            if (rowData.length < 1) {\n                break;\n            }\n            temp.push(rowData);\n            count++;\n        }\n        if (purge) {\n            this.rows = temp;\n        }\n    },\n\n    clone: function () {\n        var cloned_table = new Table();\n        for (var i = 0; i < this.header.length; i++) {\n            cloned_table.header.push(this.header[i]);\n        }\n        for (var j = 0; j < this.rows.length; j++) {\n            cloned_table.rows.push([]);\n            for (var i = 0; i < this.rows[j].length; i++) {\n                cloned_table.rows[j].push(this.rows[j][i]);\n            }\n        }\n        return cloned_table;\n    },\n\n    addColumn: function (name, data) {\n        this.header.push(name);\n        for (var i = 0; i < data.length; i++) {\n            this.rows[i].push(data[i]);\n        }\n    },\n\n    removeColumn: function (name) {\n        var remove_index = this.header.indexOf(name);\n        if (remove_index > -1) {\n            this.header.splice(remove_index, 1);\n            for (var i = 0; i < this.rows.length; i++) {\n                this.rows[i].splice(remove_index, 1);\n            }\n        }\n    }\n};\n\nregisterType(\"Table\", [Table, Table$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A layer for rendering time-series data.\n//\n// This layer is essentially unimplemented in the WWT WebGL engine. See\n// \"spreadsheetlayer\" and \"votablelayer\" for functionality that is actually\n// available.\n\nimport { ss } from \"../ss.js\";\nimport { registerType, registerEnum, Enums } from \"../typesystem.js\";\nimport { SpaceTimeController } from \"../space_time_controller.js\";\nimport { Layer } from \"./layer.js\";\n\n\n// wwtlib.CoordinatesTypes\n\nexport var CoordinatesTypes = {\n    spherical: 0,\n    rectangular: 1,\n    orbital: 2\n};\n\nregisterType(\"CoordinatesTypes\", CoordinatesTypes);\nregisterEnum(\"CoordinatesTypes\", CoordinatesTypes);\n\n\n// wwtlib.AltTypes\n\nexport var AltTypes = {\n    depth: 0,\n    altitude: 1,\n    distance: 2,\n    seaLevel: 3,\n    terrain: 4\n};\n\nregisterType(\"AltTypes\", AltTypes);\nregisterEnum(\"AltTypes\", AltTypes);\n\n\n// wwtlib.MarkerMixes\n\nexport var MarkerMixes = {\n    same_For_All: 0\n};\n\nregisterType(\"MarkerMixes\", MarkerMixes);\nregisterEnum(\"MarkerMixes\", MarkerMixes);\n\n\n// wwtlib.ColorMaps\n\nexport var ColorMaps = {\n    same_For_All: 0,\n    group_by_Values: 2,\n    per_Column_Literal: 3\n};\n\nregisterType(\"ColorMaps\", ColorMaps);\nregisterEnum(\"ColorMaps\", ColorMaps);\n\n\n// wwtlib.PlotTypes\n\nexport var PlotTypes = {\n    gaussian: 0,\n    point: 1,\n    circle: 2,\n    square: 3,\n    pushPin: 4,\n    custom: 5\n};\n\nregisterType(\"PlotTypes\", PlotTypes);\nregisterEnum(\"PlotTypes\", PlotTypes);\n\n\n// wwtlib.MarkerScales\n\nexport var MarkerScales = {\n    screen: 0,\n    world: 1\n};\n\nregisterType(\"MarkerScales\", MarkerScales);\nregisterEnum(\"MarkerScales\", MarkerScales);\n\n\n// wwtlib.RAUnits\n\nexport var RAUnits = {\n    hours: 0,\n    degrees: 1\n};\n\nregisterType(\"RAUnits\", RAUnits);\nregisterEnum(\"RAUnits\", RAUnits);\n\n\n// wwtlib.TimeSeriesLayer\n\nexport function TimeSeriesLayer() {\n    this.isLongIndex = false;\n    this.shapeVertexCount = 0;\n    this.lines = false;\n    this.latColumn = -1;\n    this.fixedSize = 1;\n    this.decay = 16;\n    this.timeSeries = false;\n    this._dynamicData$1 = false;\n    this._autoUpdate$1 = false;\n    this._dataSourceUrl$1 = '';\n    this._beginRange$1 = new Date('1/1/2100');\n    this._endRange$1 = new Date('01/01/1800');\n    this.markerDomainValues = {};\n    this.colorDomainValues = {};\n    this._coordinatesType$1 = 0;\n    this.lngColumn = -1;\n    this.geometryColumn = -1;\n    this._xAxisColumn$1 = -1;\n    this._yAxisColumn$1 = -1;\n    this._zAxisColumn$1 = -1;\n    this._xAxisReverse$1 = false;\n    this._yAxisReverse$1 = false;\n    this._zAxisReverse$1 = false;\n    this._altType$1 = 3;\n    this._markerMix$1 = 0;\n    this._raUnits$1 = 0;\n    this._colorMap$1 = 3;\n    this._markerColumn$1 = -1;\n    this._colorMapColumn$1 = -1;\n    this._plotType$1 = 0;\n    this._markerIndex$1 = 0;\n    this._showFarSide$1 = false;\n    this._markerScale$1 = 1;\n    this._altUnit$1 = 1;\n    this._cartesianScale$1 = 1;\n    this._cartesianCustomScale$1 = 1;\n    this.altColumn = -1;\n    this.startDateColumn = -1;\n    this.endDateColumn = -1;\n    this.sizeColumn = -1;\n    this.nameColumn = 0;\n    this._hyperlinkFormat$1 = '';\n    this._hyperlinkColumn$1 = -1;\n    this.scaleFactor = 1;\n    this.pointScaleType = 1;\n    this.positions = [];\n    this.bufferIsFlat = false;\n    this.baseDate = new Date(2010, 0, 1, 12, 0, 0);\n    this.dirty = true;\n    this.lastVersion = 0;\n    Layer.call(this);\n}\n\nTimeSeriesLayer._circleTexture$1 = null;\n\nTimeSeriesLayer.get__circleTexture$1 = function () {\n    return TimeSeriesLayer._circleTexture$1;\n};\n\nvar TimeSeriesLayer$ = {\n    get_dynamicData: function () {\n        return this._dynamicData$1;\n    },\n\n    set_dynamicData: function (value) {\n        this._dynamicData$1 = value;\n        return value;\n    },\n\n    get_autoUpdate: function () {\n        return this._autoUpdate$1;\n    },\n\n    set_autoUpdate: function (value) {\n        this._autoUpdate$1 = value;\n        return value;\n    },\n\n    get_dataSourceUrl: function () {\n        return this._dataSourceUrl$1;\n    },\n\n    set_dataSourceUrl: function (value) {\n        this._dataSourceUrl$1 = value;\n        return value;\n    },\n\n    get_timeSeries: function () {\n        return this.timeSeries;\n    },\n\n    set_timeSeries: function (value) {\n        if (this.timeSeries !== value) {\n            this.version++;\n            this.timeSeries = value;\n        }\n        return value;\n    },\n\n    get_header: function () {\n        return null;\n    },\n\n    get_beginRange: function () {\n        return this._beginRange$1;\n    },\n\n    set_beginRange: function (value) {\n        if (!ss.compareDates(this._beginRange$1, value)) {\n            this.version++;\n            this._beginRange$1 = value;\n        }\n        return value;\n    },\n\n    get_endRange: function () {\n        return this._endRange$1;\n    },\n\n    set_endRange: function (value) {\n        if (!ss.compareDates(this._endRange$1, value)) {\n            this.version++;\n            this._endRange$1 = value;\n        }\n        return value;\n    },\n\n    initializeFromXml: function (node) {\n        this.set_timeSeries(ss.boolean(node.attributes.getNamedItem('TimeSeries').nodeValue));\n        this.set_beginRange(new Date(node.attributes.getNamedItem('BeginRange').nodeValue));\n        this.set_endRange(new Date(node.attributes.getNamedItem('EndRange').nodeValue));\n        this.set_decay(parseFloat(node.attributes.getNamedItem('Decay').nodeValue));\n        this.set_coordinatesType(Enums.parse('CoordinatesTypes', node.attributes.getNamedItem('CoordinatesType').nodeValue));\n        if (this.get_coordinatesType() < 0) {\n            this.set_coordinatesType(0);\n        }\n        this.set_latColumn(parseInt(node.attributes.getNamedItem('LatColumn').nodeValue));\n        this.set_lngColumn(parseInt(node.attributes.getNamedItem('LngColumn').nodeValue));\n        if (node.attributes.getNamedItem('GeometryColumn') != null) {\n            this.set_geometryColumn(parseInt(node.attributes.getNamedItem('GeometryColumn').nodeValue));\n        }\n        switch (node.attributes.getNamedItem('AltType').nodeValue) {\n            case 'Depth':\n                this.set_altType(0);\n                break;\n            case 'Altitude':\n                this.set_altType(1);\n                break;\n            case 'Distance':\n                this.set_altType(2);\n                break;\n            case 'SeaLevel':\n                this.set_altType(3);\n                break;\n            case 'Terrain':\n                this.set_altType(4);\n                break;\n            default:\n                break;\n        }\n        this.set_markerMix(0);\n        switch (node.attributes.getNamedItem('ColorMap').nodeValue) {\n            case 'Same_For_All':\n                this.set__colorMap(0);\n                break;\n            case 'Group_by_Values':\n                this.set__colorMap(2);\n                break;\n            case 'Per_Column_Literal':\n                this.set__colorMap(3);\n                break;\n            default:\n                break;\n        }\n        this.set_markerColumn(parseInt(node.attributes.getNamedItem('MarkerColumn').nodeValue));\n        this.set_colorMapColumn(parseInt(node.attributes.getNamedItem('ColorMapColumn').nodeValue));\n        switch (node.attributes.getNamedItem('PlotType').nodeValue) {\n            case 'Gaussian':\n                this.set_plotType(0);\n                break;\n            case 'Point':\n                this.set_plotType(1);\n                break;\n            case 'Circle':\n                this.set_plotType(2);\n                break;\n            case 'PushPin':\n                this.set_plotType(4);\n                break;\n            default:\n                break;\n        }\n        this.set_markerIndex(parseInt(node.attributes.getNamedItem('MarkerIndex').nodeValue));\n        switch (node.attributes.getNamedItem('MarkerScale').nodeValue) {\n            case 'Screen':\n                this.set_markerScale(0);\n                break;\n            case 'World':\n                this.set_markerScale(1);\n                break;\n            default:\n                break;\n        }\n        switch (node.attributes.getNamedItem('AltUnit').nodeValue) {\n            case 'Meters':\n                this.set_altUnit(1);\n                break;\n            case 'Feet':\n                this.set_altUnit(2);\n                break;\n            case 'Inches':\n                this.set_altUnit(3);\n                break;\n            case 'Miles':\n                this.set_altUnit(4);\n                break;\n            case 'Kilometers':\n                this.set_altUnit(5);\n                break;\n            case 'AstronomicalUnits':\n                this.set_altUnit(6);\n                break;\n            case 'LightYears':\n                this.set_altUnit(7);\n                break;\n            case 'Parsecs':\n                this.set_altUnit(8);\n                break;\n            case 'MegaParsecs':\n                this.set_altUnit(9);\n                break;\n            case 'Custom':\n                this.set_altUnit(10);\n                break;\n            default:\n                break;\n        }\n        this.set_altColumn(parseInt(node.attributes.getNamedItem('AltColumn').nodeValue));\n        this.set_startDateColumn(parseInt(node.attributes.getNamedItem('StartDateColumn').nodeValue));\n        this.set_endDateColumn(parseInt(node.attributes.getNamedItem('EndDateColumn').nodeValue));\n        this.set_sizeColumn(parseInt(node.attributes.getNamedItem('SizeColumn').nodeValue));\n        this.set_hyperlinkFormat(node.attributes.getNamedItem('HyperlinkFormat').nodeValue);\n        this.set_hyperlinkColumn(parseInt(node.attributes.getNamedItem('HyperlinkColumn').nodeValue));\n        this.set_scaleFactor(parseFloat(node.attributes.getNamedItem('ScaleFactor').nodeValue));\n        switch (node.attributes.getNamedItem('PointScaleType').nodeValue) {\n            case 'Linear':\n                this.set_pointScaleType(0);\n                break;\n            case 'Power':\n                this.set_pointScaleType(1);\n                break;\n            case 'Log':\n                this.set_pointScaleType(2);\n                break;\n            case 'Constant':\n                this.set_pointScaleType(3);\n                break;\n            case 'StellarMagnitude':\n                this.set_pointScaleType(4);\n                break;\n            default:\n                break;\n        }\n        if (node.attributes.getNamedItem('ShowFarSide') != null) {\n            this.set_showFarSide(ss.boolean(node.attributes.getNamedItem('ShowFarSide').nodeValue));\n        }\n        if (node.attributes.getNamedItem('RaUnits') != null) {\n            switch (node.attributes.getNamedItem('RaUnits').nodeValue) {\n                case 'Hours':\n                    this.set_raUnits(0);\n                    break;\n                case 'Degrees':\n                    this.set_raUnits(1);\n                    break;\n            }\n        }\n        if (node.attributes.getNamedItem('HoverTextColumn') != null) {\n            this.set_nameColumn(parseInt(node.attributes.getNamedItem('HoverTextColumn').nodeValue));\n        }\n        if (node.attributes.getNamedItem('XAxisColumn') != null) {\n            this.set_xAxisColumn(parseInt(node.attributes.getNamedItem('XAxisColumn').nodeValue));\n            this.set_xAxisReverse(ss.boolean(node.attributes.getNamedItem('XAxisReverse').nodeValue));\n            this.set_yAxisColumn(parseInt(node.attributes.getNamedItem('YAxisColumn').nodeValue));\n            this.set_yAxisReverse(ss.boolean(node.attributes.getNamedItem('YAxisReverse').nodeValue));\n            this.set_zAxisColumn(parseInt(node.attributes.getNamedItem('ZAxisColumn').nodeValue));\n            this.set_zAxisReverse(ss.boolean(node.attributes.getNamedItem('ZAxisReverse').nodeValue));\n            switch (node.attributes.getNamedItem('CartesianScale').nodeValue) {\n                case 'Meters':\n                    this.set_cartesianScale(1);\n                    break;\n                case 'Feet':\n                    this.set_cartesianScale(2);\n                    break;\n                case 'Inches':\n                    this.set_cartesianScale(3);\n                    break;\n                case 'Miles':\n                    this.set_cartesianScale(4);\n                    break;\n                case 'Kilometers':\n                    this.set_cartesianScale(5);\n                    break;\n                case 'AstronomicalUnits':\n                    this.set_cartesianScale(6);\n                    break;\n                case 'LightYears':\n                    this.set_cartesianScale(7);\n                    break;\n                case 'Parsecs':\n                    this.set_cartesianScale(8);\n                    break;\n                case 'MegaParsecs':\n                    this.set_cartesianScale(9);\n                    break;\n                case 'Custom':\n                    this.set_cartesianScale(10);\n                    break;\n                default:\n                    break;\n            }\n            this.set_cartesianCustomScale(parseFloat(node.attributes.getNamedItem('CartesianCustomScale').nodeValue));\n        }\n        if (node.attributes.getNamedItem('DynamicData') != null) {\n            this.set_dynamicData(ss.boolean(node.attributes.getNamedItem('DynamicData').nodeValue));\n            this.set_autoUpdate(ss.boolean(node.attributes.getNamedItem('AutoUpdate').nodeValue));\n            this.set_dataSourceUrl(node.attributes.getNamedItem('DataSourceUrl').nodeValue);\n        }\n    },\n\n    computeDateDomainRange: function (columnStart, columnEnd) { },\n\n    getDomainValues: function (column) {\n        return [];\n    },\n\n    get_decay: function () {\n        return this.decay;\n    },\n\n    set_decay: function (value) {\n        if (this.decay !== value) {\n            this.version++;\n            this.decay = value;\n        }\n        return value;\n    },\n\n    get_coordinatesType: function () {\n        return this._coordinatesType$1;\n    },\n\n    set_coordinatesType: function (value) {\n        if (this._coordinatesType$1 !== value) {\n            this.version++;\n            this._coordinatesType$1 = value;\n        }\n        return value;\n    },\n\n    get_latColumn: function () {\n        return this.latColumn;\n    },\n\n    set_latColumn: function (value) {\n        if (this.latColumn !== value) {\n            this.version++;\n            this.latColumn = value;\n        }\n        return value;\n    },\n\n    get_lngColumn: function () {\n        return this.lngColumn;\n    },\n\n    set_lngColumn: function (value) {\n        if (this.lngColumn !== value) {\n            this.version++;\n            this.lngColumn = value;\n        }\n        return value;\n    },\n\n    get_geometryColumn: function () {\n        return this.geometryColumn;\n    },\n\n    set_geometryColumn: function (value) {\n        if (this.geometryColumn !== value) {\n            this.version++;\n            this.geometryColumn = value;\n        }\n        return value;\n    },\n\n    get_xAxisColumn: function () {\n        return this._xAxisColumn$1;\n    },\n\n    set_xAxisColumn: function (value) {\n        if (this._xAxisColumn$1 !== value) {\n            this.version++;\n            this._xAxisColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_yAxisColumn: function () {\n        return this._yAxisColumn$1;\n    },\n\n    set_yAxisColumn: function (value) {\n        if (this._yAxisColumn$1 !== value) {\n            this.version++;\n            this._yAxisColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_zAxisColumn: function () {\n        return this._zAxisColumn$1;\n    },\n\n    set_zAxisColumn: function (value) {\n        if (this._zAxisColumn$1 !== value) {\n            this.version++;\n            this._zAxisColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_xAxisReverse: function () {\n        return this._xAxisReverse$1;\n    },\n\n    set_xAxisReverse: function (value) {\n        if (this._xAxisReverse$1 !== value) {\n            this.version++;\n            this._xAxisReverse$1 = value;\n        }\n        return value;\n    },\n\n    get_yAxisReverse: function () {\n        return this._yAxisReverse$1;\n    },\n\n    set_yAxisReverse: function (value) {\n        if (this._yAxisReverse$1 !== value) {\n            this.version++;\n            this._yAxisReverse$1 = value;\n        }\n        return value;\n    },\n\n    get_zAxisReverse: function () {\n        return this._zAxisReverse$1;\n    },\n\n    set_zAxisReverse: function (value) {\n        if (this._zAxisReverse$1 !== value) {\n            this.version++;\n            this._zAxisReverse$1 = value;\n        }\n        return value;\n    },\n\n    get_altType: function () {\n        return this._altType$1;\n    },\n\n    set_altType: function (value) {\n        if (this._altType$1 !== value) {\n            this.version++;\n            this._altType$1 = value;\n        }\n        return value;\n    },\n\n    get_markerMix: function () {\n        return this._markerMix$1;\n    },\n\n    set_markerMix: function (value) {\n        if (this._markerMix$1 !== value) {\n            this.version++;\n            this._markerMix$1 = value;\n        }\n        return value;\n    },\n\n    get_raUnits: function () {\n        return this._raUnits$1;\n    },\n\n    set_raUnits: function (value) {\n        if (this._raUnits$1 !== value) {\n            this.version++;\n            this._raUnits$1 = value;\n        }\n        return value;\n    },\n\n    get__colorMap: function () {\n        return this._colorMap$1;\n    },\n\n    set__colorMap: function (value) {\n        if (this._colorMap$1 !== value) {\n            this.version++;\n            this._colorMap$1 = value;\n        }\n        return value;\n    },\n\n    get_markerColumn: function () {\n        return this._markerColumn$1;\n    },\n\n    set_markerColumn: function (value) {\n        if (this._markerColumn$1 !== value) {\n            this.version++;\n            this._markerColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_colorMapColumn: function () {\n        return this._colorMapColumn$1;\n    },\n\n    set_colorMapColumn: function (value) {\n        if (this._colorMapColumn$1 !== value) {\n            this.version++;\n            this._colorMapColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_plotType: function () {\n        return this._plotType$1;\n    },\n\n    set_plotType: function (value) {\n        if (this._plotType$1 !== value) {\n            this.version++;\n            this._plotType$1 = value;\n        }\n        return value;\n    },\n\n    get_markerIndex: function () {\n        return this._markerIndex$1;\n    },\n\n    set_markerIndex: function (value) {\n        if (this._markerIndex$1 !== value) {\n            this.version++;\n            this._markerIndex$1 = value;\n        }\n        return value;\n    },\n\n    get_showFarSide: function () {\n        return this._showFarSide$1;\n    },\n\n    set_showFarSide: function (value) {\n        if (this._showFarSide$1 !== value) {\n            this.version++;\n            this._showFarSide$1 = value;\n        }\n        return value;\n    },\n\n    get_markerScale: function () {\n        return this._markerScale$1;\n    },\n\n    set_markerScale: function (value) {\n        if (this._markerScale$1 !== value) {\n            this.version++;\n            this._markerScale$1 = value;\n        }\n        return value;\n    },\n\n    get_altUnit: function () {\n        return this._altUnit$1;\n    },\n\n    set_altUnit: function (value) {\n        if (this._altUnit$1 !== value) {\n            this.version++;\n            this._altUnit$1 = value;\n        }\n        return value;\n    },\n\n    get_cartesianScale: function () {\n        return this._cartesianScale$1;\n    },\n\n    set_cartesianScale: function (value) {\n        if (this._cartesianScale$1 !== value) {\n            this.version++;\n            this._cartesianScale$1 = value;\n        }\n        return value;\n    },\n\n    get_cartesianCustomScale: function () {\n        return this._cartesianCustomScale$1;\n    },\n\n    set_cartesianCustomScale: function (value) {\n        if (this._cartesianCustomScale$1 !== value) {\n            this.version++;\n            this._cartesianCustomScale$1 = value;\n        }\n        return value;\n    },\n\n    get_altColumn: function () {\n        return this.altColumn;\n    },\n\n    set_altColumn: function (value) {\n        if (this.altColumn !== value) {\n            this.version++;\n            this.altColumn = value;\n        }\n        return value;\n    },\n\n    get_startDateColumn: function () {\n        return this.startDateColumn;\n    },\n\n    set_startDateColumn: function (value) {\n        if (this.startDateColumn !== value) {\n            this.version++;\n            this.startDateColumn = value;\n        }\n        return value;\n    },\n\n    get_endDateColumn: function () {\n        return this.endDateColumn;\n    },\n\n    set_endDateColumn: function (value) {\n        if (this.endDateColumn !== value) {\n            this.version++;\n            this.endDateColumn = value;\n        }\n        return value;\n    },\n\n    get_sizeColumn: function () {\n        return this.sizeColumn;\n    },\n\n    set_sizeColumn: function (value) {\n        if (this.sizeColumn !== value) {\n            this.version++;\n            this.sizeColumn = value;\n        }\n        return value;\n    },\n\n    get_nameColumn: function () {\n        return this.nameColumn;\n    },\n\n    set_nameColumn: function (value) {\n        if (this.nameColumn !== value) {\n            this.version++;\n            this.nameColumn = value;\n        }\n        return value;\n    },\n\n    get_hyperlinkFormat: function () {\n        return this._hyperlinkFormat$1;\n    },\n\n    set_hyperlinkFormat: function (value) {\n        if (this._hyperlinkFormat$1 !== value) {\n            this.version++;\n            this._hyperlinkFormat$1 = value;\n        }\n        return value;\n    },\n\n    get_hyperlinkColumn: function () {\n        return this._hyperlinkColumn$1;\n    },\n\n    set_hyperlinkColumn: function (value) {\n        if (this._hyperlinkColumn$1 !== value) {\n            this.version++;\n            this._hyperlinkColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_scaleFactor: function () {\n        return this.scaleFactor;\n    },\n\n    set_scaleFactor: function (value) {\n        if (this.scaleFactor !== value) {\n            this.version++;\n            this.scaleFactor = value;\n        }\n        return value;\n    },\n\n    get_pointScaleType: function () {\n        return this.pointScaleType;\n    },\n\n    set_pointScaleType: function (value) {\n        if (this.pointScaleType !== value) {\n            this.version++;\n            this.pointScaleType = value;\n        }\n        return value;\n    },\n\n    prepVertexBuffer: function (renderContext, opacity) {\n        return true;\n    },\n\n    draw: function (renderContext, opacity, flat) {\n        var device = renderContext;\n        if (this.version !== this.lastVersion) {\n            this.cleanUp();\n        }\n        if (this.bufferIsFlat !== flat) {\n            this.cleanUp();\n            this.bufferIsFlat = flat;\n        }\n        if (this.dirty) {\n            this.prepVertexBuffer(device, opacity);\n        }\n        var jNow = SpaceTimeController.get_jNow() - SpaceTimeController.utcToJulian(this.baseDate);\n        var adjustedScale = this.scaleFactor;\n        if (flat && this.astronomical && (this._markerScale$1 === 1)) {\n            adjustedScale = (this.scaleFactor / (renderContext.viewCamera.zoom / 360));\n        }\n        if (this.triangleList2d != null) {\n            this.triangleList2d.decay = this.decay;\n            this.triangleList2d.sky = this.get_astronomical();\n            this.triangleList2d.timeSeries = this.timeSeries;\n            this.triangleList2d.jNow = jNow;\n            this.triangleList2d.draw(renderContext, opacity * this.get_opacity(), 1);\n        }\n        if (this.triangleList != null) {\n            this.triangleList.decay = this.decay;\n            this.triangleList.sky = this.get_astronomical();\n            this.triangleList.timeSeries = this.timeSeries;\n            this.triangleList.jNow = jNow;\n            this.triangleList.draw(renderContext, opacity * this.get_opacity(), 1);\n        }\n        if (this.pointList != null) {\n            this.pointList.depthBuffered = false;\n            this.pointList.decay = this.decay;\n            this.pointList.sky = this.get_astronomical();\n            this.pointList.timeSeries = this.timeSeries;\n            this.pointList.jNow = jNow;\n            this.pointList.scale = (this._markerScale$1 === 1) ? adjustedScale : -adjustedScale;\n            this.pointList.draw(renderContext, opacity * this.get_opacity(), false);\n        }\n        if (this.lineList != null) {\n            this.lineList.sky = this.get_astronomical();\n            this.lineList.decay = this.decay;\n            this.lineList.timeSeries = this.timeSeries;\n            this.lineList.jNow = jNow;\n            this.lineList.drawLines(renderContext, opacity * this.get_opacity());\n        }\n        if (this.lineList2d != null) {\n            this.lineList2d.sky = this.get_astronomical();\n            this.lineList2d.decay = this.decay;\n            this.lineList2d.timeSeries = this.timeSeries;\n            this.lineList2d.showFarSide = this.get_showFarSide();\n            this.lineList2d.jNow = jNow;\n            this.lineList2d.drawLines(renderContext, opacity * this.get_opacity());\n        }\n        return true;\n    },\n\n    initFromXml: function (node) {\n        Layer.prototype.initFromXml.call(this, node);\n    },\n\n    cleanUp: function () {\n        if (this.lineList != null) {\n            this.lineList.clear();\n        }\n        if (this.lineList2d != null) {\n            this.lineList2d.clear();\n        }\n        if (this.triangleList2d != null) {\n            this.triangleList2d.clear();\n        }\n        if (this.pointList != null) {\n            this.pointList.clear();\n        }\n        if (this.triangleList != null) {\n            this.triangleList.clear();\n        }\n    },\n\n    dynamicUpdate: function () {\n        return false;\n    }\n};\n\nregisterType(\"TimeSeriesLayer\", [TimeSeriesLayer, TimeSeriesLayer$, Layer]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The Virtual Observatory table (VOTable) format.\n\nimport { ss } from \"../ss.js\";\nimport { registerType, registerEnum } from \"../typesystem.js\";\nimport { Util } from \"../baseutil.js\";\nimport { URLHelpers } from \"../url_helpers.js\";\nimport { WebFile } from \"../web_file.js\";\n\n\n// wwtlib.Primitives\n\nexport var Primitives = {\n    voBoolean: 1,\n    voBit: 2,\n    voUnsignedByte: 3,\n    voShort: 4,\n    voInt: 5,\n    voLong: 6,\n    voChar: 7,\n    voUnicodeChar: 8,\n    voFloat: 9,\n    voDouble: 10,\n    voFloatComplex: 11,\n    voDoubleComplex: 12,\n    voUndefined: 13\n};\n\nregisterType(\"Primitives\", Primitives);\nregisterEnum(\"Primitives\", Primitives);\n\n\n// wwtlib.VoTable\n\nexport function VoTable() {\n    this.columns = {};\n    this.column = [];\n    this.rows = [];\n    this.loadFilename = '';\n    this.sampId = '';\n    this.selectedRow = null;\n    this.error = false;\n    this.errorText = '';\n}\n\nVoTable.loadFromUrl = function (url, complete) {\n    var temp = new VoTable();\n    temp._onComplete = complete;\n    temp._webFile = new WebFile(URLHelpers.singleton.rewrite(url, 1));\n    temp._webFile.onStateChange = ss.bind('_loadData', temp);\n    temp._webFile.send();\n    return temp;\n};\n\nVoTable.loadFromString = function (data) {\n    var xParser = new DOMParser();\n    var doc = xParser.parseFromString(data, 'text/xml');\n    var table = new VoTable();\n    table.loadFromXML(doc);\n    return table;\n};\n\nvar VoTable$ = {\n    _loadData: function () {\n        if (this._webFile.get_state() === 2) {\n            alert(this._webFile.get_message());\n        } else if (this._webFile.get_state() === 1) {\n            this.loadFromXML(this._webFile.getXml());\n            if (this._onComplete != null) {\n                this._onComplete();\n            }\n        }\n    },\n\n    loadFromXML: function (xml) {\n        var voTable = Util.selectSingleNode(xml, 'VOTABLE');\n        if (voTable == null) {\n            return;\n        }\n        var index = 0;\n        try {\n            var table = Util.selectSingleNode(Util.selectSingleNode(voTable, 'RESOURCE'), 'TABLE');\n            if (table != null) {\n                var $enum1 = ss.enumerate(table.childNodes);\n                while ($enum1.moveNext()) {\n                    var node = $enum1.current;\n                    if (node.nodeName === 'FIELD') {\n                        var col = new VoColumn(node, index++);\n                        this.columns[col.name] = col;\n                        this.column.push(col);\n                    }\n                }\n            }\n        }\n        catch ($e2) {\n            this.error = true;\n            this.errorText = Util.selectSingleNode(voTable, 'DESCRIPTION').text;\n        }\n        try {\n            var tableData = Util.selectSingleNode(Util.selectSingleNode(Util.selectSingleNode(Util.selectSingleNode(voTable, 'RESOURCE'), 'TABLE'), 'DATA'), 'TABLEDATA');\n            if (tableData != null) {\n                var $enum3 = ss.enumerate(tableData.childNodes);\n                while ($enum3.moveNext()) {\n                    var node = $enum3.current;\n                    if (node.nodeName === 'TR') {\n                        var row = new VoRow(this);\n                        row.columnData = new Array(ss.keyCount(this.columns));\n                        index = 0;\n                        var $enum4 = ss.enumerate(node.childNodes);\n                        while ($enum4.moveNext()) {\n                            var child = $enum4.current;\n                            if (child.nodeName === 'TD') {\n                                row.columnData[index++] = ss.trim(Util.getInnerText(child));\n                            }\n                        }\n                        this.rows.push(row);\n                    }\n                }\n            }\n        }\n        catch ($e5) {\n        }\n    },\n\n    save: function (filename) {\n        return true;\n    },\n\n    getColumnByUcd: function (ucd) {\n        var $enum1 = ss.enumerate(ss.keys(this.columns));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var col = this.columns[key];\n            if (ss.replaceString(col.ucd, '_', '.').toLocaleLowerCase().indexOf(ucd.toLocaleLowerCase()) > -1) {\n                return col;\n            }\n        }\n        return null;\n    },\n\n    getRAColumn: function () {\n        var $enum1 = ss.enumerate(ss.keys(this.columns));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var col = this.columns[key];\n            if (col.ucd.toLocaleLowerCase().indexOf('pos.eq.ra') > -1 || col.ucd.toLocaleLowerCase().indexOf('pos_eq_ra') > -1) {\n                return col;\n            }\n        }\n        var $enum2 = ss.enumerate(ss.keys(this.columns));\n        while ($enum2.moveNext()) {\n            var key = $enum2.current;\n            var col = this.columns[key];\n            if (col.name.toLocaleLowerCase().indexOf('ra') > -1) {\n                return col;\n            }\n        }\n        return null;\n    },\n\n    getDecColumn: function () {\n        var $enum1 = ss.enumerate(ss.keys(this.columns));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var col = this.columns[key];\n            if (col.ucd.toLowerCase().indexOf('pos.eq.dec') > -1 || col.ucd.toLowerCase().indexOf('pos_eq_dec') > -1) {\n                return col;\n            }\n        }\n        var $enum2 = ss.enumerate(ss.keys(this.columns));\n        while ($enum2.moveNext()) {\n            var key = $enum2.current;\n            var col = this.columns[key];\n            if (col.name.toLowerCase().indexOf('dec') > -1) {\n                return col;\n            }\n        }\n        return null;\n    },\n\n    getMagColumn: function () {\n        var $enum1 = ss.enumerate(ss.keys(this.columns));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var col = this.columns[key];\n            if (col.ucd.toLowerCase().indexOf('phot.mag') > -1 || col.ucd.toLowerCase().indexOf('phot_mag') > -1) {\n                return col;\n            }\n        }\n        return null;\n    },\n\n    getDistanceColumn: function () {\n        var $enum1 = ss.enumerate(ss.keys(this.columns));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var col = this.columns[key];\n            if (col.ucd.toLowerCase().indexOf('pos.distance') > -1 || col.ucd.toLowerCase().indexOf('pos_distance') > -1) {\n                return col;\n            }\n        }\n        return null;\n    },\n\n    toString: function () {\n        var sb = new ss.StringBuilder();\n        var first = true;\n\n        // Copy header\n\n        var $enum1 = ss.enumerate(ss.keys(this.columns));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var col = this.columns[key];\n            if (first) {\n                first = false;\n            }\n            else {\n                sb.append('\\t');\n            }\n            sb.append(col.name);\n        }\n        sb.appendLine('');\n\n        // copy rows\n\n        var $enum2 = ss.enumerate(this.rows);\n        while ($enum2.moveNext()) {\n            var row = $enum2.current;\n            first = true;\n            var $enum3 = ss.enumerate(row.columnData);\n            while ($enum3.moveNext()) {\n                var col = $enum3.current;\n                if (first) {\n                    first = false;\n                }\n                else {\n                    sb.append('\\t');\n                }\n                sb.append(col.toString());\n            }\n            sb.appendLine('');\n        }\n        return sb.toString();\n    }\n};\n\nregisterType(\"VoTable\", [VoTable, VoTable$, null]);\n\n\n// wwtlib.VoRow\n\nexport function VoRow(owner) {\n    this.selected = false;\n    this.owner = owner;\n}\n\nvar VoRow$ = {\n    getColumnData: function (key) {\n        if (this.owner.columns[key] != null) {\n            return this.columnData[this.owner.columns[key].index];\n        }\n        return null;\n    },\n\n    get_item: function (index) {\n        if (index < 0 || index >= this.columnData.length) {\n            return null;\n        }\n        return this.columnData[index];\n    }\n};\n\nregisterType(\"VoRow\", [VoRow, VoRow$, null]);\n\n\n// wwtlib.VoColumn\n\nexport function VoColumn(node, index) {\n    this.id = '';\n    this.type = 0;\n    this.precision = 0;\n    this.dimentions = 0;\n    this.sizes = null;\n    this.ucd = '';\n    this.unit = '';\n    this.name = '';\n    this.index = 0;\n    this.index = index;\n    if (node.attributes.getNamedItem('datatype') != null) {\n        this.type = VoColumn.getType(node.attributes.getNamedItem('datatype').nodeValue);\n    }\n    if (node.attributes.getNamedItem('ucd') != null) {\n        this.ucd = node.attributes.getNamedItem('ucd').nodeValue;\n    }\n    if (node.attributes.getNamedItem('precision') != null) {\n        try {\n            this.precision = parseInt(node.attributes.getNamedItem('precision').nodeValue);\n        }\n        catch ($e1) {\n        }\n    }\n    if (node.attributes.getNamedItem('ID') != null) {\n        this.id = node.attributes.getNamedItem('ID').nodeValue;\n    }\n    if (node.attributes.getNamedItem('name') != null) {\n        this.name = node.attributes.getNamedItem('name').nodeValue;\n    }\n    else {\n        this.name = this.id;\n    }\n    if (node.attributes.getNamedItem('unit') != null) {\n        this.unit = node.attributes.getNamedItem('unit').nodeValue;\n    }\n    if (node.attributes.getNamedItem('arraysize') != null) {\n        var split = node.attributes.getNamedItem('arraysize').nodeValue.split('x');\n        this.dimentions = split.length;\n        this.sizes = new Array(split.length);\n        var indexer = 0;\n        var $enum2 = ss.enumerate(split);\n        while ($enum2.moveNext()) {\n            var dim = $enum2.current;\n            if (!(dim.indexOf('*') > -1)) {\n                this.sizes[indexer++] = parseInt(dim);\n            }\n            else {\n                var len = 9999;\n                var lenString = ss.replaceString(dim, '*', '');\n                if (lenString.length > 0) {\n                    len = parseInt(lenString);\n                }\n                this.sizes[indexer++] = len;\n            }\n        }\n    }\n}\n\nVoColumn.getType = function (type) {\n    var Type = 13;\n    switch (type) {\n        case 'boolean':\n            Type = 1;\n            break;\n        case 'bit':\n            Type = 2;\n            break;\n        case 'unsignedByte':\n            Type = 3;\n            break;\n        case 'short':\n            Type = 4;\n            break;\n        case 'int':\n            Type = 5;\n            break;\n        case 'long':\n            Type = 6;\n            break;\n        case 'char':\n            Type = 7;\n            break;\n        case 'unicodeChar':\n            Type = 8;\n            break;\n        case 'float':\n            Type = 9;\n            break;\n        case 'double':\n            Type = 10;\n            break;\n        case 'floatComplex':\n            Type = 11;\n            break;\n        case 'doubleComplex':\n            Type = 12;\n            break;\n        default:\n            Type = 13;\n            break;\n    }\n    return Type;\n};\n\nvar VoColumn$ = {\n    toString: function () {\n        return this.name;\n    }\n};\n\nregisterType(\"VoColumn\", [VoColumn, VoColumn$, null]);\n\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A layer that renders a VO data table.\n//\n// This has massive redundancy with SpreadSheetLayer, which I think was\n// necessitated by limitations in ScriptSharp. It would be nice to streamline\n// things.\n\nimport { ss } from \"../ss.js\";\nimport { registerType, Enums } from \"../typesystem.js\";\nimport { Vector3d } from \"../double3d.js\";\nimport { Dates, LineList, PointList, TimeSeriesPointVertex } from \"../graphics/primitives3d.js\";\nimport { Texture } from \"../graphics/texture.js\";\nimport { Color, Colors } from \"../color.js\";\nimport { Coordinates } from \"../coordinates.js\";\nimport { Place } from \"../place.js\";\nimport { SpaceTimeController } from \"../space_time_controller.js\";\nimport { URLHelpers } from \"../url_helpers.js\";\nimport { Layer } from \"./layer.js\";\nimport { VoTable } from \"./vo_table.js\";\nimport { SpreadSheetLayer, PushPin } from \"./spreadsheet_layer.js\";\n\n\n// wwtlib.VoTableLayer\n\nexport function VoTableLayer() {\n    this.isLongIndex = false;\n    this.shapeVertexCount = 0;\n    this.lines = false;\n    this.latColumn = -1;\n    this.fixedSize = 1;\n    this.decay = 0;\n    this.timeSeries = false;\n    this._dynamicData$1 = false;\n    this._autoUpdate$1 = false;\n    this._dataSourceUrl$1 = '';\n    this._beginRange$1 = new Date('1/1/2100');\n    this._endRange$1 = new Date('01/01/1800');\n    this.markerDomainValues = {};\n    this.colorDomainValues = {};\n    this._coordinatesType$1 = 0;\n    this.lngColumn = -1;\n    this.geometryColumn = -1;\n    this._xAxisColumn$1 = -1;\n    this._yAxisColumn$1 = -1;\n    this._zAxisColumn$1 = -1;\n    this._xAxisReverse$1 = false;\n    this._yAxisReverse$1 = false;\n    this._zAxisReverse$1 = false;\n    this._altType$1 = 3;\n    this._markerMix$1 = 0;\n    this._raUnits$1 = 0;\n    this._colorMap$1 = 3;\n    this._markerColumn$1 = -1;\n    this._colorMapColumn$1 = -1;\n    this._plotType$1 = 0;\n    this._markerIndex$1 = 0;\n    this._showFarSide$1 = false;\n    this._markerScale$1 = 1;\n    this._altUnit$1 = 1;\n    this._cartesianScale$1 = 1;\n    this._cartesianCustomScale$1 = 1;\n    this.altColumn = -1;\n    this.startDateColumn = -1;\n    this.endDateColumn = -1;\n    this.sizeColumn = -1;\n    this.nameColumn = 0;\n    this._hyperlinkFormat$1 = '';\n    this._hyperlinkColumn$1 = -1;\n    this.scaleFactor = 1;\n    this.pointScaleType = 1;\n    this.positions = [];\n    this.bufferIsFlat = false;\n    this.baseDate = new Date(2010, 0, 1, 12, 0, 0);\n    this.dirty = true;\n    this._filename$1 = '';\n    Layer.call(this);\n    this._table$1 = null;\n    this._filename$1 = '';\n    this.set_plotType(2);\n}\n\nVoTableLayer._circleTexture$1 = null;\n\nVoTableLayer.get__circleTexture$1 = function () {\n    if (VoTableLayer._circleTexture$1 == null) {\n        var url = URLHelpers.singleton.engineAssetUrl('circle.png');\n        VoTableLayer._circleTexture$1 = Texture.fromUrl(url);\n    }\n    return VoTableLayer._circleTexture$1;\n};\n\nVoTableLayer.create = function (table, plotType) {\n    var layer = new VoTableLayer();\n    layer._table$1 = table;\n    layer._filename$1 = table.loadFilename;\n    layer.set_lngColumn(table.getRAColumn().index);\n    layer.set_latColumn(table.getDecColumn().index);\n    layer.sizeColumn = table.getColumnByUcd('phot.mag').index;\n    layer.set_plotType(plotType);\n    return layer;\n};\n\nvar VoTableLayer$ = {\n    get_dynamicData: function () {\n        return this._dynamicData$1;\n    },\n\n    set_dynamicData: function (value) {\n        this._dynamicData$1 = value;\n        return value;\n    },\n\n    get_autoUpdate: function () {\n        return this._autoUpdate$1;\n    },\n\n    set_autoUpdate: function (value) {\n        this._autoUpdate$1 = value;\n        return value;\n    },\n\n    get_dataSourceUrl: function () {\n        return this._dataSourceUrl$1;\n    },\n\n    set_dataSourceUrl: function (value) {\n        this._dataSourceUrl$1 = value;\n        return value;\n    },\n\n    get_timeSeries: function () {\n        return this.timeSeries;\n    },\n\n    set_timeSeries: function (value) {\n        if (this.timeSeries !== value) {\n            this.version++;\n            this.timeSeries = value;\n        }\n        return value;\n    },\n\n    get_beginRange: function () {\n        return this._beginRange$1;\n    },\n\n    set_beginRange: function (value) {\n        if (!ss.compareDates(this._beginRange$1, value)) {\n            this.version++;\n            this._beginRange$1 = value;\n        }\n        return value;\n    },\n\n    get_endRange: function () {\n        return this._endRange$1;\n    },\n\n    set_endRange: function (value) {\n        if (!ss.compareDates(this._endRange$1, value)) {\n            this.version++;\n            this._endRange$1 = value;\n        }\n        return value;\n    },\n\n    initializeFromXml: function (node) {\n        this.set_timeSeries(ss.boolean(node.attributes.getNamedItem('TimeSeries').nodeValue));\n        this.set_beginRange(new Date(node.attributes.getNamedItem('BeginRange').nodeValue));\n        this.set_endRange(new Date(node.attributes.getNamedItem('EndRange').nodeValue));\n        this.set_decay(parseFloat(node.attributes.getNamedItem('Decay').nodeValue));\n        this.set_coordinatesType(Enums.parse('CoordinatesTypes', node.attributes.getNamedItem('CoordinatesType').nodeValue));\n        if (this.get_coordinatesType() < 0) {\n            this.set_coordinatesType(0);\n        }\n        this.set_latColumn(parseInt(node.attributes.getNamedItem('LatColumn').nodeValue));\n        this.set_lngColumn(parseInt(node.attributes.getNamedItem('LngColumn').nodeValue));\n        if (node.attributes.getNamedItem('GeometryColumn') != null) {\n            this.set_geometryColumn(parseInt(node.attributes.getNamedItem('GeometryColumn').nodeValue));\n        }\n        switch (node.attributes.getNamedItem('AltType').nodeValue) {\n            case 'Depth':\n                this.set_altType(0);\n                break;\n            case 'Altitude':\n                this.set_altType(1);\n                break;\n            case 'Distance':\n                this.set_altType(2);\n                break;\n            case 'SeaLevel':\n                this.set_altType(3);\n                break;\n            case 'Terrain':\n                this.set_altType(4);\n                break;\n            default:\n                break;\n        }\n        this.set_markerMix(0);\n        switch (node.attributes.getNamedItem('ColorMap').nodeValue) {\n            case 'Same_For_All':\n                this.set__colorMap(0);\n                break;\n            case 'Group_by_Values':\n                this.set__colorMap(2);\n                break;\n            case 'Per_Column_Literal':\n                this.set__colorMap(3);\n                break;\n            default:\n                break;\n        }\n        this.set_markerColumn(parseInt(node.attributes.getNamedItem('MarkerColumn').nodeValue));\n        this.set_colorMapColumn(parseInt(node.attributes.getNamedItem('ColorMapColumn').nodeValue));\n        switch (node.attributes.getNamedItem('PlotType').nodeValue) {\n            case 'Gaussian':\n                this.set_plotType(0);\n                break;\n            case 'Point':\n                this.set_plotType(1);\n                break;\n            case 'Circle':\n                this.set_plotType(2);\n                break;\n            case 'PushPin':\n                this.set_plotType(4);\n                break;\n            default:\n                break;\n        }\n        this.set_markerIndex(parseInt(node.attributes.getNamedItem('MarkerIndex').nodeValue));\n        switch (node.attributes.getNamedItem('MarkerScale').nodeValue) {\n            case 'Screen':\n                this.set_markerScale(0);\n                break;\n            case 'World':\n                this.set_markerScale(1);\n                break;\n            default:\n                break;\n        }\n        switch (node.attributes.getNamedItem('AltUnit').nodeValue) {\n            case 'Meters':\n                this.set_altUnit(1);\n                break;\n            case 'Feet':\n                this.set_altUnit(2);\n                break;\n            case 'Inches':\n                this.set_altUnit(3);\n                break;\n            case 'Miles':\n                this.set_altUnit(4);\n                break;\n            case 'Kilometers':\n                this.set_altUnit(5);\n                break;\n            case 'AstronomicalUnits':\n                this.set_altUnit(6);\n                break;\n            case 'LightYears':\n                this.set_altUnit(7);\n                break;\n            case 'Parsecs':\n                this.set_altUnit(8);\n                break;\n            case 'MegaParsecs':\n                this.set_altUnit(9);\n                break;\n            case 'Custom':\n                this.set_altUnit(10);\n                break;\n            default:\n                break;\n        }\n        this.set_altColumn(parseInt(node.attributes.getNamedItem('AltColumn').nodeValue));\n        this.set_startDateColumn(parseInt(node.attributes.getNamedItem('StartDateColumn').nodeValue));\n        this.set_endDateColumn(parseInt(node.attributes.getNamedItem('EndDateColumn').nodeValue));\n        this.set_sizeColumn(parseInt(node.attributes.getNamedItem('SizeColumn').nodeValue));\n        this.set_hyperlinkFormat(node.attributes.getNamedItem('HyperlinkFormat').nodeValue);\n        this.set_hyperlinkColumn(parseInt(node.attributes.getNamedItem('HyperlinkColumn').nodeValue));\n        this.set_scaleFactor(parseFloat(node.attributes.getNamedItem('ScaleFactor').nodeValue));\n        switch (node.attributes.getNamedItem('PointScaleType').nodeValue) {\n            case 'Linear':\n                this.set_pointScaleType(0);\n                break;\n            case 'Power':\n                this.set_pointScaleType(1);\n                break;\n            case 'Log':\n                this.set_pointScaleType(2);\n                break;\n            case 'Constant':\n                this.set_pointScaleType(3);\n                break;\n            case 'StellarMagnitude':\n                this.set_pointScaleType(4);\n                break;\n            default:\n                break;\n        }\n        if (node.attributes.getNamedItem('ShowFarSide') != null) {\n            this.set_showFarSide(ss.boolean(node.attributes.getNamedItem('ShowFarSide').nodeValue));\n        }\n        if (node.attributes.getNamedItem('RaUnits') != null) {\n            switch (node.attributes.getNamedItem('RaUnits').nodeValue) {\n                case 'Hours':\n                    this.set_raUnits(0);\n                    break;\n                case 'Degrees':\n                    this.set_raUnits(1);\n                    break;\n            }\n        }\n        if (node.attributes.getNamedItem('HoverTextColumn') != null) {\n            this.set_nameColumn(parseInt(node.attributes.getNamedItem('HoverTextColumn').nodeValue));\n        }\n        if (node.attributes.getNamedItem('XAxisColumn') != null) {\n            this.set_xAxisColumn(parseInt(node.attributes.getNamedItem('XAxisColumn').nodeValue));\n            this.set_xAxisReverse(ss.boolean(node.attributes.getNamedItem('XAxisReverse').nodeValue));\n            this.set_yAxisColumn(parseInt(node.attributes.getNamedItem('YAxisColumn').nodeValue));\n            this.set_yAxisReverse(ss.boolean(node.attributes.getNamedItem('YAxisReverse').nodeValue));\n            this.set_zAxisColumn(parseInt(node.attributes.getNamedItem('ZAxisColumn').nodeValue));\n            this.set_zAxisReverse(ss.boolean(node.attributes.getNamedItem('ZAxisReverse').nodeValue));\n            switch (node.attributes.getNamedItem('CartesianScale').nodeValue) {\n                case 'Meters':\n                    this.set_cartesianScale(1);\n                    break;\n                case 'Feet':\n                    this.set_cartesianScale(2);\n                    break;\n                case 'Inches':\n                    this.set_cartesianScale(3);\n                    break;\n                case 'Miles':\n                    this.set_cartesianScale(4);\n                    break;\n                case 'Kilometers':\n                    this.set_cartesianScale(5);\n                    break;\n                case 'AstronomicalUnits':\n                    this.set_cartesianScale(6);\n                    break;\n                case 'LightYears':\n                    this.set_cartesianScale(7);\n                    break;\n                case 'Parsecs':\n                    this.set_cartesianScale(8);\n                    break;\n                case 'MegaParsecs':\n                    this.set_cartesianScale(9);\n                    break;\n                case 'Custom':\n                    this.set_cartesianScale(10);\n                    break;\n                default:\n                    break;\n            }\n            this.set_cartesianCustomScale(parseFloat(node.attributes.getNamedItem('CartesianCustomScale').nodeValue));\n        }\n        if (node.attributes.getNamedItem('DynamicData') != null) {\n            this.set_dynamicData(ss.boolean(node.attributes.getNamedItem('DynamicData').nodeValue));\n            this.set_autoUpdate(ss.boolean(node.attributes.getNamedItem('AutoUpdate').nodeValue));\n            this.set_dataSourceUrl(node.attributes.getNamedItem('DataSourceUrl').nodeValue);\n        }\n    },\n\n    get_decay: function () {\n        return this.decay;\n    },\n\n    set_decay: function (value) {\n        if (this.decay !== value) {\n            this.version++;\n            this.decay = value;\n        }\n        return value;\n    },\n\n    get_coordinatesType: function () {\n        return this._coordinatesType$1;\n    },\n\n    set_coordinatesType: function (value) {\n        if (this._coordinatesType$1 !== value) {\n            this.version++;\n            this._coordinatesType$1 = value;\n        }\n        return value;\n    },\n\n    get_latColumn: function () {\n        return this.latColumn;\n    },\n\n    set_latColumn: function (value) {\n        if (this.latColumn !== value) {\n            this.version++;\n            this.latColumn = value;\n        }\n        return value;\n    },\n\n    get_lngColumn: function () {\n        return this.lngColumn;\n    },\n\n    set_lngColumn: function (value) {\n        if (this.lngColumn !== value) {\n            this.version++;\n            this.lngColumn = value;\n        }\n        return value;\n    },\n\n    get_geometryColumn: function () {\n        return this.geometryColumn;\n    },\n\n    set_geometryColumn: function (value) {\n        if (this.geometryColumn !== value) {\n            this.version++;\n            this.geometryColumn = value;\n        }\n        return value;\n    },\n\n    get_xAxisColumn: function () {\n        return this._xAxisColumn$1;\n    },\n\n    set_xAxisColumn: function (value) {\n        if (this._xAxisColumn$1 !== value) {\n            this.version++;\n            this._xAxisColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_yAxisColumn: function () {\n        return this._yAxisColumn$1;\n    },\n\n    set_yAxisColumn: function (value) {\n        if (this._yAxisColumn$1 !== value) {\n            this.version++;\n            this._yAxisColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_zAxisColumn: function () {\n        return this._zAxisColumn$1;\n    },\n\n    set_zAxisColumn: function (value) {\n        if (this._zAxisColumn$1 !== value) {\n            this.version++;\n            this._zAxisColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_xAxisReverse: function () {\n        return this._xAxisReverse$1;\n    },\n\n    set_xAxisReverse: function (value) {\n        if (this._xAxisReverse$1 !== value) {\n            this.version++;\n            this._xAxisReverse$1 = value;\n        }\n        return value;\n    },\n\n    get_yAxisReverse: function () {\n        return this._yAxisReverse$1;\n    },\n\n    set_yAxisReverse: function (value) {\n        if (this._yAxisReverse$1 !== value) {\n            this.version++;\n            this._yAxisReverse$1 = value;\n        }\n        return value;\n    },\n\n    get_zAxisReverse: function () {\n        return this._zAxisReverse$1;\n    },\n\n    set_zAxisReverse: function (value) {\n        if (this._zAxisReverse$1 !== value) {\n            this.version++;\n            this._zAxisReverse$1 = value;\n        }\n        return value;\n    },\n\n    get_altType: function () {\n        return this._altType$1;\n    },\n\n    set_altType: function (value) {\n        if (this._altType$1 !== value) {\n            this.version++;\n            this._altType$1 = value;\n        }\n        return value;\n    },\n\n    get_markerMix: function () {\n        return this._markerMix$1;\n    },\n\n    set_markerMix: function (value) {\n        if (this._markerMix$1 !== value) {\n            this.version++;\n            this._markerMix$1 = value;\n        }\n        return value;\n    },\n\n    get_raUnits: function () {\n        return this._raUnits$1;\n    },\n\n    set_raUnits: function (value) {\n        if (this._raUnits$1 !== value) {\n            this.version++;\n            this._raUnits$1 = value;\n        }\n        return value;\n    },\n\n    get__colorMap: function () {\n        return this._colorMap$1;\n    },\n\n    set__colorMap: function (value) {\n        if (this._colorMap$1 !== value) {\n            this.version++;\n            this._colorMap$1 = value;\n        }\n        return value;\n    },\n\n    get_markerColumn: function () {\n        return this._markerColumn$1;\n    },\n\n    set_markerColumn: function (value) {\n        if (this._markerColumn$1 !== value) {\n            this.version++;\n            this._markerColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_colorMapColumn: function () {\n        return this._colorMapColumn$1;\n    },\n\n    set_colorMapColumn: function (value) {\n        if (this._colorMapColumn$1 !== value) {\n            this.version++;\n            this._colorMapColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_plotType: function () {\n        return this._plotType$1;\n    },\n\n    set_plotType: function (value) {\n        if (this._plotType$1 !== value) {\n            this.version++;\n            this._plotType$1 = value;\n        }\n        return value;\n    },\n\n    get_markerIndex: function () {\n        return this._markerIndex$1;\n    },\n\n    set_markerIndex: function (value) {\n        if (this._markerIndex$1 !== value) {\n            this.version++;\n            this._markerIndex$1 = value;\n        }\n        return value;\n    },\n\n    get_showFarSide: function () {\n        return this._showFarSide$1;\n    },\n\n    set_showFarSide: function (value) {\n        if (this._showFarSide$1 !== value) {\n            this.version++;\n            this._showFarSide$1 = value;\n        }\n        return value;\n    },\n\n    get_markerScale: function () {\n        return this._markerScale$1;\n    },\n\n    set_markerScale: function (value) {\n        if (this._markerScale$1 !== value) {\n            this.version++;\n            this._markerScale$1 = value;\n        }\n        return value;\n    },\n\n    get_altUnit: function () {\n        return this._altUnit$1;\n    },\n\n    set_altUnit: function (value) {\n        if (this._altUnit$1 !== value) {\n            this.version++;\n            this._altUnit$1 = value;\n        }\n        return value;\n    },\n\n    get_cartesianScale: function () {\n        return this._cartesianScale$1;\n    },\n\n    set_cartesianScale: function (value) {\n        if (this._cartesianScale$1 !== value) {\n            this.version++;\n            this._cartesianScale$1 = value;\n        }\n        return value;\n    },\n\n    get_cartesianCustomScale: function () {\n        return this._cartesianCustomScale$1;\n    },\n\n    set_cartesianCustomScale: function (value) {\n        if (this._cartesianCustomScale$1 !== value) {\n            this.version++;\n            this._cartesianCustomScale$1 = value;\n        }\n        return value;\n    },\n\n    get_altColumn: function () {\n        return this.altColumn;\n    },\n\n    set_altColumn: function (value) {\n        if (this.altColumn !== value) {\n            this.version++;\n            this.altColumn = value;\n        }\n        return value;\n    },\n\n    get_startDateColumn: function () {\n        return this.startDateColumn;\n    },\n\n    set_startDateColumn: function (value) {\n        if (this.startDateColumn !== value) {\n            this.version++;\n            this.startDateColumn = value;\n        }\n        return value;\n    },\n\n    get_endDateColumn: function () {\n        return this.endDateColumn;\n    },\n\n    set_endDateColumn: function (value) {\n        if (this.endDateColumn !== value) {\n            this.version++;\n            this.endDateColumn = value;\n        }\n        return value;\n    },\n\n    get_sizeColumn: function () {\n        return this.sizeColumn;\n    },\n\n    set_sizeColumn: function (value) {\n        if (this.sizeColumn !== value) {\n            this.version++;\n            this.sizeColumn = value;\n        }\n        return value;\n    },\n\n    get_nameColumn: function () {\n        return this.nameColumn;\n    },\n\n    set_nameColumn: function (value) {\n        if (this.nameColumn !== value) {\n            this.version++;\n            this.nameColumn = value;\n        }\n        return value;\n    },\n\n    get_hyperlinkFormat: function () {\n        return this._hyperlinkFormat$1;\n    },\n\n    set_hyperlinkFormat: function (value) {\n        if (this._hyperlinkFormat$1 !== value) {\n            this.version++;\n            this._hyperlinkFormat$1 = value;\n        }\n        return value;\n    },\n\n    get_hyperlinkColumn: function () {\n        return this._hyperlinkColumn$1;\n    },\n\n    set_hyperlinkColumn: function (value) {\n        if (this._hyperlinkColumn$1 !== value) {\n            this.version++;\n            this._hyperlinkColumn$1 = value;\n        }\n        return value;\n    },\n\n    get_scaleFactor: function () {\n        return this.scaleFactor;\n    },\n\n    set_scaleFactor: function (value) {\n        if (this.scaleFactor !== value) {\n            this.version++;\n            this.scaleFactor = value;\n        }\n        return value;\n    },\n\n    get_pointScaleType: function () {\n        return this.pointScaleType;\n    },\n\n    set_pointScaleType: function (value) {\n        if (this.pointScaleType !== value) {\n            this.version++;\n            this.pointScaleType = value;\n        }\n        return value;\n    },\n\n    draw: function (renderContext, opacity, flat) {\n        var device = renderContext;\n        if (this.bufferIsFlat !== flat) {\n            this.cleanUp();\n            this.bufferIsFlat = flat;\n        }\n        if (this.dirty) {\n            this.prepVertexBuffer(renderContext, opacity);\n            this.dirty = false;\n        }\n        var jNow = SpaceTimeController.get_jNow() - SpaceTimeController.utcToJulian(this.baseDate);\n        var adjustedScale = this.scaleFactor;\n        if (flat && this.astronomical && (this._markerScale$1 === 1)) {\n            adjustedScale = (this.scaleFactor / (renderContext.viewCamera.zoom / 360));\n        }\n        if (this.triangleList2d != null) {\n            this.triangleList2d.decay = this.decay;\n            this.triangleList2d.sky = this.get_astronomical();\n            this.triangleList2d.timeSeries = this.timeSeries;\n            this.triangleList2d.jNow = jNow;\n            this.triangleList2d.draw(renderContext, opacity * this.get_opacity(), 1);\n        }\n        if (this.triangleList != null) {\n            this.triangleList.decay = this.decay;\n            this.triangleList.sky = this.get_astronomical();\n            this.triangleList.timeSeries = this.timeSeries;\n            this.triangleList.jNow = jNow;\n            this.triangleList.draw(renderContext, opacity * this.get_opacity(), 1);\n        }\n        if (this.pointList != null) {\n            this.pointList.depthBuffered = false;\n            this.pointList.showFarSide = this.get_showFarSide();\n            this.pointList.decay = (this.timeSeries) ? this.decay : 0;\n            this.pointList.sky = this.get_astronomical();\n            this.pointList.timeSeries = this.timeSeries;\n            this.pointList.jNow = jNow;\n            this.pointList.scale = (this._markerScale$1 === 1) ? adjustedScale : -adjustedScale;\n            switch (this._plotType$1) {\n                case 0:\n                    this.pointList.draw(renderContext, opacity * this.get_opacity(), false);\n                    break;\n                case 2:\n                    this.pointList.drawTextured(renderContext, VoTableLayer.get__circleTexture$1().texture2d, opacity * this.get_opacity());\n                    break;\n                case 1:\n                    this.pointList.drawTextured(renderContext, PushPin.getPushPinTexture(19), opacity * this.get_opacity());\n                    break;\n                case 3:\n                    this.pointList.drawTextured(renderContext, PushPin.getPushPinTexture(35), opacity * this.get_opacity());\n                    break;\n                case 5:\n                case 4:\n                    this.pointList.drawTextured(renderContext, PushPin.getPushPinTexture(this._markerIndex$1), opacity * this.get_opacity());\n                    break;\n                default:\n                    break;\n            }\n        }\n        if (this.lineList != null) {\n            this.lineList.sky = this.get_astronomical();\n            this.lineList.decay = this.decay;\n            this.lineList.timeSeries = this.timeSeries;\n            this.lineList.jNow = jNow;\n            this.lineList.drawLines(renderContext, opacity * this.get_opacity());\n        }\n        if (this.lineList2d != null) {\n            this.lineList2d.sky = this.get_astronomical();\n            this.lineList2d.decay = this.decay;\n            this.lineList2d.timeSeries = this.timeSeries;\n            this.lineList2d.showFarSide = this.get_showFarSide();\n            this.lineList2d.jNow = jNow;\n            this.lineList2d.drawLines(renderContext, opacity * this.get_opacity());\n        }\n        return true;\n    },\n\n    initFromXml: function (node) {\n        Layer.prototype.initFromXml.call(this, node);\n    },\n\n    cleanUp: function () {\n        this.dirty = true;\n        if (this.lineList != null) {\n            this.lineList.clear();\n        }\n        if (this.lineList2d != null) {\n            this.lineList2d.clear();\n        }\n        if (this.triangleList2d != null) {\n            this.triangleList2d.clear();\n        }\n        if (this.pointList != null) {\n            this.pointList.clear();\n        }\n        if (this.triangleList != null) {\n            this.triangleList.clear();\n        }\n    },\n\n    dynamicUpdate: function () {\n        return false;\n    },\n\n    addFilesToCabinet: function (fc) {\n        var fName = this._filename$1;\n        var fileName = fc.tempDirectory + ss.format('{0}\\\\{1}.txt', fc.get_packageID(), this.id.toString());\n        var path = fName.substring(0, fName.lastIndexOf('\\\\') + 1);\n        var path2 = fileName.substring(0, fileName.lastIndexOf('\\\\') + 1);\n    },\n\n    loadData: function (tourDoc, filename) {\n        var $this = this;\n\n        var blob = tourDoc.getFileBlob(filename);\n        var doc = new FileReader();\n        doc.onloadend = function (ee) {\n            var data = ss.safeCast(doc.result, String);\n            $this._table$1 = VoTable.loadFromString(data);\n            $this.set_lngColumn($this._table$1.getRAColumn().index);\n            $this.set_latColumn($this._table$1.getDecColumn().index);\n        };\n        doc.readAsText(blob);\n    },\n\n    canCopyToClipboard: function () {\n        return true;\n    },\n\n    copyToClipboard: function () { },\n\n    findClosest: function (target, distance, defaultPlace, astronomical) {\n        var searchPoint = Coordinates.geoTo3dDouble(target.get_lat(), target.get_lng());\n        var dist;\n        if (defaultPlace != null) {\n            var testPoint = Coordinates.raDecTo3dAu(defaultPlace.get_RA(), -defaultPlace.get_dec(), -1);\n            dist = Vector3d.subtractVectors(searchPoint, testPoint);\n            distance = dist.length();\n        }\n        var closestItem = -1;\n        var index = 0;\n        var $enum1 = ss.enumerate(this.positions);\n        while ($enum1.moveNext()) {\n            var point = $enum1.current;\n            dist = Vector3d.subtractVectors(searchPoint, point);\n            if (dist.length() < distance) {\n                distance = dist.length();\n                closestItem = index;\n            }\n            index++;\n        }\n        if (closestItem === -1) {\n            return defaultPlace;\n        }\n        var pnt = Coordinates.cartesianToSpherical2(this.positions[closestItem]);\n        var name = this._table$1.rows[closestItem].columnData[this.nameColumn].toString();\n        if (this.nameColumn === this.startDateColumn || this.nameColumn === this.endDateColumn) {\n            name = SpreadSheetLayer.parseDate(name).toString();\n        }\n        if (ss.emptyString(name)) {\n            name = ss.format('RA={0}, Dec={1}', Coordinates.formatHMS(pnt.get_RA()), Coordinates.formatDMS(pnt.get_dec()));\n        }\n        var place = Place.create(name, pnt.get_lat(), pnt.get_RA(), 268435456, '', 2, -1);\n        var rowData = {};\n        for (var i = 0; i < ss.keyCount(this._table$1.columns); i++) {\n            var colValue = this._table$1.rows[closestItem].get_item(i).toString();\n            if (i === this.startDateColumn || i === this.endDateColumn) {\n                colValue = SpreadSheetLayer.parseDate(colValue).toString();\n            }\n            if (!ss.keyExists(rowData, this._table$1.column[i].name) && !ss.emptyString(this._table$1.column[i].name)) {\n                rowData[this._table$1.column[i].name] = colValue;\n            }\n            else {\n                rowData['Column' + i.toString()] = colValue;\n            }\n        }\n        place.set_tag(rowData);\n        return place;\n    },\n\n    prepVertexBuffer: function (renderContext, opacity) {\n        var col = this._table$1.getColumnByUcd('meta.id');\n        if (col == null) {\n            col = this._table$1.column[0];\n        }\n        var siapSet = this.isSiapResultSet();\n        if (this.pointList == null) {\n            this.pointList = new PointList(renderContext);\n        }\n        if (this.lineList2d == null) {\n            this.lineList2d = new LineList();\n        }\n        this.lineList2d.clear();\n        var stcsCol = this._table$1.getColumnByUcd('phys.area;obs.field');\n        if (stcsCol == null && ss.keyExists(this._table$1.columns, 'regionSTCS')) {\n            stcsCol = this._table$1.columns['regionSTCS'];\n        }\n        if (!this.get_plotType()) {\n            this.set_markerScale(1);\n        } else {\n            this.set_markerScale(0);\n        }\n        var vertList = [];\n        var indexList = [];\n        var lastItem = new TimeSeriesPointVertex();\n        this.positions.length = 0;\n        var currentIndex = 0;\n        var color = Color.fromArgb(ss.truncate((opacity * this.get_color().a)), this.get_color().r, this.get_color().g, this.get_color().b);\n        this.pointScaleType = 4;\n        var $enum1 = ss.enumerate(this._table$1.rows);\n        while ($enum1.moveNext()) {\n            var row = $enum1.current;\n            try {\n                if (this.lngColumn > -1 && this.latColumn > -1) {\n                    var ra = parseFloat(row.get_item(this.get_lngColumn()).toString());\n                    var dec = parseFloat(row.get_item(this.get_latColumn()).toString());\n                    var position = Coordinates.geoTo3dDouble(dec, ra);\n                    lastItem.position = position;\n                    this.positions.push(lastItem.position);\n                    lastItem.set_color(color);\n                    if (this.sizeColumn > -1) {\n                        try {\n                            if (!this.get_markerScale()) {\n                                lastItem.pointSize = 20;\n                            }\n                            else {\n                                switch (this.pointScaleType) {\n                                    case 0:\n                                        lastItem.pointSize = parseFloat(row.get_item(this.sizeColumn).toString());\n                                        break;\n                                    case 2:\n                                        lastItem.pointSize = Math.log(parseFloat(row.get_item(this.sizeColumn).toString()));\n                                        break;\n                                    case 1:\n                                        lastItem.pointSize = Math.pow(2, parseFloat(row.get_item(this.sizeColumn).toString()));\n                                        break;\n                                    case 4:\n                                        var size = parseFloat(row.get_item(this.sizeColumn).toString());\n                                        lastItem.pointSize = (40 / Math.pow(1.6, size)) * 10;\n                                        break;\n                                    case 3:\n                                        lastItem.pointSize = 1;\n                                        break;\n                                    default:\n                                        break;\n                                }\n                            }\n                        }\n                        catch ($e2) {\n                            lastItem.pointSize = 0.01;\n                        }\n                    }\n                    else {\n                        if (!this.get_markerScale()) {\n                            lastItem.pointSize = 20;\n                        }\n                        else {\n                            lastItem.pointSize = Math.pow(2, 1) * 100;\n                        }\n                    }\n                    if (this.startDateColumn > -1) {\n                        var dateTime = ss.date(row.get_item(this.startDateColumn).toString());\n                        lastItem.tu = SpaceTimeController.utcToJulian(dateTime);\n                        lastItem.tv = 0;\n                    }\n                    vertList.push(lastItem);\n                    this.pointList.addPoint(lastItem.position, lastItem.color, new Dates(lastItem.tu, lastItem.tv), lastItem.pointSize);\n                    currentIndex++;\n                }\n                if (siapSet && stcsCol != null) {\n                    this._addSiapStcRow$1(stcsCol.name, row, row === this._table$1.selectedRow);\n                }\n            }\n            catch ($e3) {\n            }\n            this.lines = false;\n        }\n        if (siapSet && stcsCol != null) {\n            this._addSiapStcRow$1(stcsCol.name, this._table$1.selectedRow, true);\n        }\n        return true;\n    },\n    _addSiapStcRow$1: function (stcsColName, row, selected) {\n        var stcs = ss.replaceString(row.getColumnData(stcsColName).toString(), '  ', ' ');\n        var col = Color.fromArgb(120, 255, 255, 255);\n        if (selected) {\n            col = Colors.get_yellow();\n        }\n        if (ss.startsWith(stcs, 'Polygon J2000')) {\n            var parts = stcs.split(' ');\n            var len = parts.length;\n            var index = 0;\n            while (index < len) {\n                if (parts[index] === 'Polygon') {\n                    index += 2;\n                    var lastPoint = new Vector3d();\n                    var firstPoint = new Vector3d();\n                    var start = true;\n                    for (var i = index; i < len; i += 2) {\n                        if (parts[i] === 'Polygon') {\n                            start = true;\n                            break;\n                        }\n                        else {\n                            var Xcoord = Coordinates.parseRA(parts[i], true) * 15 + 180;\n                            var Ycoord = Coordinates.parseDec(parts[i + 1]);\n                            var pnt = Coordinates.geoTo3dDouble(Ycoord, Xcoord);\n                            if (!start) {\n                                this.lineList2d.addLine(lastPoint, pnt, col, new Dates(0, 0));\n                            }\n                            else {\n                                firstPoint = pnt;\n                                start = false;\n                            }\n                            lastPoint = pnt;\n                        }\n                        index += 2;\n                    }\n                    if (len > 4) {\n                        this.lineList2d.addLine(firstPoint, lastPoint, col, new Dates(0, 0));\n                    }\n                }\n            }\n        }\n    },\n\n    isSiapResultSet: function () {\n        return this._table$1.getColumnByUcd('vox:image.title') != null && this._table$1.getColumnByUcd('VOX:Image.AccessReference') != null;\n    },\n\n    get_header: function () {\n        var header = new Array(ss.keyCount(this._table$1.columns));\n        var index = 0;\n        var $enum1 = ss.enumerate(this._table$1.column);\n        while ($enum1.moveNext()) {\n            var col = $enum1.current;\n            header[index++] = col.name;\n        }\n        return header;\n    },\n\n    get_table: function () {\n        return this._table$1;\n    },\n\n    set_table: function (value) {\n        this._table$1 = value;\n        return value;\n    }\n};\n\nregisterType(\"VoTableLayer\", [VoTableLayer, VoTableLayer$, Layer]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Information about an image with a World Coordinate System registration.\n\nimport { registerType } from \"../typesystem.js\";\n\n\n// wwtlib.WcsImage\n\nexport function WcsImage() {\n    this.copyright = '';\n    this.creditsUrl = '';\n    this._validWcs = false;\n    this.keywords = [];\n    this.description = '';\n    this.scaleX = 0;\n    this.scaleY = 0;\n    this.centerX = 0;\n    this.centerY = 0;\n    this.rotation = 0;\n    this.referenceX = 0;\n    this.referenceY = 0;\n    this.sizeX = 0;\n    this.sizeY = 0;\n    this.cd1_1 = 0;\n    this.cd1_2 = 0;\n    this.cd2_1 = 0;\n    this.cd2_2 = 0;\n    this.hasRotation = false;\n    this.hasSize = false;\n    this.hasScale = false;\n    this.hasLocation = false;\n    this.hasPixel = false;\n    this.filename = '';\n    this._colorCombine = false;\n}\n\nvar WcsImage$ = {\n    get_copyright: function () {\n        return this.copyright;\n    },\n\n    set_copyright: function (value) {\n        this.copyright = value;\n        return value;\n    },\n\n    get_creditsUrl: function () {\n        return this.creditsUrl;\n    },\n\n    set_creditsUrl: function (value) {\n        this.creditsUrl = value;\n        return value;\n    },\n\n    get_validWcs: function () {\n        return this._validWcs;\n    },\n\n    set_validWcs: function (value) {\n        this._validWcs = value;\n        return value;\n    },\n\n    get_keywords: function () {\n        if (!this.keywords.length) {\n            this.keywords.push('Image File');\n        }\n        return this.keywords;\n    },\n\n    set_keywords: function (value) {\n        this.keywords = value;\n        return value;\n    },\n\n    get_description: function () {\n        return this.description;\n    },\n\n    set_description: function (value) {\n        this.description = value;\n        return value;\n    },\n\n    get_scaleX: function () {\n        return this.scaleX;\n    },\n\n    set_scaleX: function (value) {\n        this.scaleX = value;\n        return value;\n    },\n\n    get_scaleY: function () {\n        return this.scaleY;\n    },\n\n    set_scaleY: function (value) {\n        this.scaleY = value;\n        return value;\n    },\n\n    get_centerX: function () {\n        return this.centerX;\n    },\n\n    set_centerX: function (value) {\n        this.centerX = value;\n        return value;\n    },\n\n    get_viewCenterX: function () {\n        return this.centerX + (this.get_sizeX() / 2 - this.get_referenceX()) * this.get_scaleX();\n    },\n\n    get_centerY: function () {\n        return this.centerY;\n    },\n\n    set_centerY: function (value) {\n        this.centerY = value;\n        return value;\n    },\n\n    get_viewCenterY: function () {\n        return this.centerY + (this.get_sizeY() / 2 - this.get_referenceY()) * this.get_scaleY();\n    },\n\n    get_rotation: function () {\n        return this.rotation;\n    },\n\n    set_rotation: function (value) {\n        this.rotation = value;\n        return value;\n    },\n\n    get_referenceX: function () {\n        return this.referenceX;\n    },\n\n    set_referenceX: function (value) {\n        this.referenceX = value;\n        return value;\n    },\n\n    get_referenceY: function () {\n        return this.referenceY;\n    },\n\n    set_referenceY: function (value) {\n        this.referenceY = value;\n        return value;\n    },\n\n    get_sizeX: function () {\n        return this.sizeX;\n    },\n\n    set_sizeX: function (value) {\n        this.sizeX = value;\n        return value;\n    },\n\n    get_sizeY: function () {\n        return this.sizeY;\n    },\n\n    set_sizeY: function (value) {\n        this.sizeY = value;\n        return value;\n    },\n\n    get_cd1_1: function () {\n        return this.cd1_1;\n    },\n\n    set_cd1_1: function (value) {\n        this.cd1_1 = value;\n        return value;\n    },\n\n    get_cd1_2: function () {\n        return this.cd1_2;\n    },\n\n    set_cd1_2: function (value) {\n        this.cd1_2 = value;\n        return value;\n    },\n\n    get_cd2_1: function () {\n        return this.cd2_1;\n    },\n\n    set_cd2_1: function (value) {\n        this.cd2_1 = value;\n        return value;\n    },\n\n    get_cd2_2: function () {\n        return this.cd2_2;\n    },\n\n    set_cd2_2: function (value) {\n        this.cd2_2 = value;\n        return value;\n    },\n\n    adjustScale: function (width, height) {\n        //adjusts the actual height vs the reported height.\n        if (width !== this.sizeX) {\n            this.scaleX *= (this.sizeX / width);\n            this.referenceX /= (this.sizeX / width);\n            this.sizeX = width;\n        }\n        if (height !== this.sizeY) {\n            this.scaleY *= (this.sizeY / height);\n            this.referenceY /= (this.sizeY / height);\n            this.sizeY = height;\n        }\n    },\n\n    calculateScaleFromCD: function () {\n        this.scaleX = (Math.sqrt(this.cd1_1 * this.cd1_1 + this.cd2_1 * this.cd2_1) * (this.cd1_1 * this.cd2_2 - this.cd1_2 * this.cd2_1) < 0) ? -1 : 1;\n        this.scaleY = Math.sqrt(this.cd1_2 * this.cd1_2 + this.cd2_2 * this.cd2_2);\n    },\n\n    calculateRotationFromCD: function () {\n        var sign = ((this.cd1_1 * this.cd2_2 - this.cd1_2 * this.cd2_1) < 0) ? -1 : 1;\n        var rot2 = Math.atan2((-sign * this.cd1_2), this.cd2_2);\n        this.rotation = rot2 / Math.PI * 180;\n    },\n\n    get_filename: function () {\n        return this.filename;\n    },\n\n    set_filename: function (value) {\n        this.filename = value;\n        return value;\n    },\n\n    get_colorCombine: function () {\n        return this._colorCombine;\n    },\n\n    set_colorCombine: function (value) {\n        this._colorCombine = value;\n        return value;\n    },\n\n    getBitmap: function () {\n        return null;\n    }\n};\n\nregisterType(\"WcsImage\", [WcsImage, WcsImage$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A tile in a pyramid that uses a Mercator projection.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { tilePrepDevice, tileUvMultiple } from \"./render_globals.js\";\nimport { Vector2d, Vector3d, PositionTexture } from \"./double3d.js\";\nimport { WEBGL } from \"./graphics/webgl_constants.js\";\nimport { RenderTriangle } from \"./render_triangle.js\";\nimport { Tile } from \"./tile.js\";\n\n\n// wwtlib.MercatorTile\n\nexport function MercatorTile() {\n    this._tileDegrees$1 = 0;\n    this._latMin$1 = 0;\n    this._latMax$1 = 0;\n    this._lngMin$1 = 0;\n    this._lngMax$1 = 0;\n    this._subDivisionLevel$1 = 32;\n    Tile.call(this);\n}\n\nMercatorTile.create = function (level, X, Y, dataset, parent) {\n    var temp = new MercatorTile();\n    temp.parent = parent;\n    temp.level = level;\n    temp.tileX = X;\n    temp.tileY = Y;\n    temp.dataset = dataset;\n    temp.computeBoundingSphere();\n    return temp;\n};\n\nMercatorTile.getCentrePointOffsetAsTileRatio = function (lat, lon, zoom) {\n    var metersX = MercatorTile.absoluteLonToMetersAtZoom(lon, zoom);\n    var relativeXIntoCell = (metersX / 256) - Math.floor(metersX / 256);\n    var metersY = MercatorTile.absoluteLatToMetersAtZoom(lat, zoom);\n    var relativeYIntoCell = (metersY / 256) - Math.floor(metersY / 256);\n    return Vector2d.create(relativeXIntoCell, relativeYIntoCell);\n};\n\nMercatorTile.relativeMetersToLatAtZoom = function (Y, zoom) {\n    var metersPerPixel = MercatorTile.metersPerPixel2(zoom);\n    var metersY = Y * metersPerPixel;\n    return MercatorTile._radToDeg$1(Math.PI / 2 - 2 * Math.atan(Math.exp(0 - metersY / 6378137)));\n};\n\nMercatorTile.relativeMetersToLonAtZoom = function (X, zoom) {\n    var metersPerPixel = MercatorTile.metersPerPixel2(zoom);\n    var metersX = X * metersPerPixel;\n    return MercatorTile._radToDeg$1(metersX / 6378137);\n};\n\nMercatorTile.absoluteLatToMetersAtZoom = function (latitude, zoom) {\n    var sinLat = Math.sin(MercatorTile._degToRad$1(latitude));\n    var metersY = 6378137 / 2 * Math.log((1 + sinLat) / (1 - sinLat));\n    var metersPerPixel = MercatorTile.metersPerPixel2(zoom);\n    return ss.truncate((Math.round(20037508 - metersY) / metersPerPixel));\n};\n\nMercatorTile.absoluteMetersToLatAtZoom = function (Y, zoom) {\n    var metersPerPixel = MercatorTile.metersPerPixel2(zoom);\n    var metersY = 20037508 - Y * metersPerPixel;\n    return MercatorTile._radToDeg$1(Math.PI / 2 - 2 * Math.atan(Math.exp(0 - metersY / 6378137)));\n};\n\nMercatorTile.absoluteLonToMetersAtZoom = function (longitude, zoom) {\n    var metersX = 6378137 * MercatorTile._degToRad$1(longitude);\n    var metersPerPixel = MercatorTile.metersPerPixel2(zoom);\n    return ss.truncate(((metersX + 20037508) / metersPerPixel));\n};\n\nMercatorTile.absoluteMetersToLonAtZoom = function (X, zoom) {\n    var metersPerPixel = MercatorTile.metersPerPixel2(zoom);\n    var metersX = X * metersPerPixel - 20037508;\n    return MercatorTile._radToDeg$1(metersX / 6378137);\n};\n\nMercatorTile.absoluteLonToMetersAtZoomTile = function (longitude, zoom, tileX) {\n    var metersX = 6378137 * MercatorTile._degToRad$1(longitude);\n    var metersPerPixel = MercatorTile.metersPerPixel2(zoom);\n    return ss.truncate(((metersX + 20037508) / metersPerPixel));\n};\n\nMercatorTile.absoluteLatToMetersAtZoomTile = function (latitude, zoom, tileX) {\n    var sinLat = Math.sin(MercatorTile._degToRad$1(latitude));\n    var metersY = 6378137 / 2 * Math.log((1 + sinLat) / (1 - sinLat));\n    var metersPerPixel = MercatorTile.metersPerPixel2(zoom);\n    return ss.truncate((Math.round(20037508 - metersY) / metersPerPixel));\n};\n\nMercatorTile.absoluteMetersToLonAtZoomByTileY = function (X, zoom, tileY) {\n    var metersPerPixel = MercatorTile.metersPerPixel2(zoom);\n    var metersX = X * metersPerPixel - 20037508;\n    return MercatorTile._radToDeg$1(metersX / 6378137);\n};\n\nMercatorTile._degToRad$1 = function (deg) {\n    return (deg * Math.PI / 180);\n};\n\nMercatorTile.metersPerPixel2 = function (zoom) {\n    return (156543 / (1 << zoom));\n};\n\nMercatorTile._radToDeg$1 = function (rad) {\n    return (rad * 180 / Math.PI);\n};\n\nvar MercatorTile$ = {\n    computeBoundingSphere: function () {\n        this._tileDegrees$1 = 360 / Math.pow(2, this.level);\n        this._latMin$1 = MercatorTile.absoluteMetersToLatAtZoom(this.tileY * 256, this.level);\n        this._latMax$1 = MercatorTile.absoluteMetersToLatAtZoom((this.tileY + 1) * 256, this.level);\n        this._lngMin$1 = ((this.tileX * this._tileDegrees$1) - 180);\n        this._lngMax$1 = ((((this.tileX + 1)) * this._tileDegrees$1) - 180);\n        var latCenter = (this._latMin$1 + this._latMax$1) / 2;\n        var lngCenter = (this._lngMin$1 + this._lngMax$1) / 2;\n        this.sphereCenter = this.geoTo3d(latCenter, lngCenter, false);\n        this.topLeft = this.geoTo3d(this._latMin$1, this._lngMin$1, false);\n        this.bottomRight = this.geoTo3d(this._latMax$1, this._lngMax$1, false);\n        this.topRight = this.geoTo3d(this._latMin$1, this._lngMax$1, false);\n        this.bottomLeft = this.geoTo3d(this._latMax$1, this._lngMin$1, false);\n        if (!this.tileY) {\n            this.topLeft = Vector3d.create(0, 1, 0);\n            this.topRight = Vector3d.create(0, 1, 0);\n        }\n        if (this.tileY === Math.pow(2, this.level) - 1) {\n            this.bottomRight = Vector3d.create(0, -1, 0);\n            this.bottomLeft = Vector3d.create(0, -1, 0);\n        }\n        var distVect = this.topLeft;\n        distVect.subtract(this.sphereCenter);\n        this.sphereRadius = distVect.length();\n        distVect = this.bottomRight;\n        distVect.subtract(this.sphereCenter);\n        var len = distVect.length();\n        if (this.sphereRadius < len) {\n            this.sphereRadius = len;\n        }\n        this._tileDegrees$1 = Math.abs(this._latMax$1 - this._latMin$1);\n    },\n\n    isPointInTile: function (lat, lng) {\n        if (!this.demReady || this.demData == null || lat < Math.min(this._latMin$1, this._latMax$1) || lat > Math.max(this._latMax$1, this._latMin$1) || lng < Math.min(this._lngMin$1, this._lngMax$1) || lng > Math.max(this._lngMin$1, this._lngMax$1)) {\n            return false;\n        }\n        return true;\n    },\n\n    getSurfacePointAltitude: function (lat, lng, meters) {\n        if (this.level < Tile.lastDeepestLevel) {\n            var $enum1 = ss.enumerate(this.children);\n            while ($enum1.moveNext()) {\n                var child = $enum1.current;\n                if (child != null) {\n                    if (child.isPointInTile(lat, lng)) {\n                        var retVal = child.getSurfacePointAltitude(lat, lng, meters);\n                        if (!!retVal) {\n                            return retVal;\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        var alt = this._getAltitudeAtLatLng$1(lat, lng, (meters) ? 1 : this.get__demScaleFactor());\n        return alt;\n    },\n\n    _getAltitudeAtLatLng$1: function (lat, lng, scaleFactor) {\n        var height = Math.abs(this._latMax$1 - this._latMin$1);\n        var width = Math.abs(this._lngMax$1 - this._lngMin$1);\n        var yy = ((lat - Math.min(this._latMax$1, this._latMin$1)) / height * 32);\n        var xx = ((lng - Math.min(this._lngMax$1, this._lngMin$1)) / width * 32);\n        var indexY = Math.min(31, ss.truncate(yy));\n        var indexX = Math.min(31, ss.truncate(xx));\n        var ha = xx - indexX;\n        var va = yy - indexY;\n        var ul = this.demData[indexY * 33 + indexX];\n        var ur = this.demData[indexY * 33 + (indexX + 1)];\n        var ll = this.demData[(indexY + 1) * 33 + indexX];\n        var lr = this.demData[(indexY + 1) * 33 + (indexX + 1)];\n        var top = ul * (1 - ha) + ha * ur;\n        var bottom = ll * (1 - ha) + ha * lr;\n        var val = top * (1 - va) + va * bottom;\n        return val / scaleFactor;\n    },\n\n    createGeometry: function (renderContext) {\n        Tile.prototype.createGeometry.call(this, renderContext);\n        if (this.geometryCreated) {\n            return true;\n        }\n        this.geometryCreated = true;\n        if (tileUvMultiple == 256) {\n            if (!this.dataset.get_dataSetType() || this.dataset.get_dataSetType() === 1) {\n                this._subDivisionLevel$1 = Math.max(2, (6 - this.level) * 2);\n            }\n        }\n        for (var i = 0; i < 4; i++) {\n            this._renderTriangleLists[i] = [];\n        }\n        var lat, lng;\n        var index = 0;\n        var tileDegrees = 360 / Math.pow(2, this.level);\n        this._latMin$1 = MercatorTile.absoluteMetersToLatAtZoom(this.tileY * 256, this.level);\n        this._latMax$1 = MercatorTile.absoluteMetersToLatAtZoom((this.tileY + 1) * 256, this.level);\n        this._lngMin$1 = ((this.tileX * tileDegrees) - 180);\n        this._lngMax$1 = ((((this.tileX + 1)) * tileDegrees) - 180);\n        var latCenter = MercatorTile.absoluteMetersToLatAtZoom(((this.tileY * 2) + 1) * 256, this.level + 1);\n        this.topLeft = this.geoTo3d(this._latMin$1, this._lngMin$1, false);\n        this.bottomRight = this.geoTo3d(this._latMax$1, this._lngMax$1, false);\n        this.topRight = this.geoTo3d(this._latMin$1, this._lngMax$1, false);\n        this.bottomLeft = this.geoTo3d(this._latMax$1, this._lngMin$1, false);\n        var verts = new Array((this._subDivisionLevel$1 + 1) * (this._subDivisionLevel$1 + 1));\n        tileDegrees = this._lngMax$1 - this._lngMin$1;\n        var dGrid = (tileDegrees / this._subDivisionLevel$1);\n        var x1, y1;\n        var textureStep = 1 / this._subDivisionLevel$1;\n        var latDegrees = this._latMax$1 - latCenter;\n        for (y1 = 0; y1 < this._subDivisionLevel$1 / 2; y1++) {\n            if (y1 !== this._subDivisionLevel$1 / 2) {\n                lat = this._latMax$1 - (2 * textureStep * latDegrees * y1);\n            }\n            else {\n                lat = latCenter;\n            }\n            for (x1 = 0; x1 <= this._subDivisionLevel$1; x1++) {\n                if (x1 !== this._subDivisionLevel$1) {\n                    lng = this._lngMin$1 + (textureStep * tileDegrees * x1);\n                }\n                else {\n                    lng = this._lngMax$1;\n                }\n                index = y1 * (this._subDivisionLevel$1 + 1) + x1;\n                verts[index] = new PositionTexture();\n                verts[index].position = this.geoTo3dWithAlt(lat, lng, false, true);\n                verts[index].tu = (x1 * textureStep) * tileUvMultiple;\n                verts[index].tv = ((MercatorTile.absoluteLatToMetersAtZoom(lat, this.level) - (this.tileY * 256)) / 256) * tileUvMultiple;\n                this.demIndex++;\n            }\n        }\n        latDegrees = this._latMin$1 - latCenter;\n        for (y1 = this._subDivisionLevel$1 / 2; y1 <= this._subDivisionLevel$1; y1++) {\n            if (y1 !== this._subDivisionLevel$1) {\n                lat = latCenter + (2 * textureStep * latDegrees * (y1 - (this._subDivisionLevel$1 / 2)));\n            }\n            else {\n                lat = this._latMin$1;\n            }\n            for (x1 = 0; x1 <= this._subDivisionLevel$1; x1++) {\n                if (x1 !== this._subDivisionLevel$1) {\n                    lng = this._lngMin$1 + (textureStep * tileDegrees * x1);\n                }\n                else {\n                    lng = this._lngMax$1;\n                }\n                index = y1 * (this._subDivisionLevel$1 + 1) + x1;\n                verts[index] = new PositionTexture();\n                verts[index].position = this.geoTo3dWithAlt(lat, lng, false, true);\n                verts[index].tu = (x1 * textureStep) * tileUvMultiple;\n                verts[index].tv = ((MercatorTile.absoluteLatToMetersAtZoom(lat, this.level) - (this.tileY * 256)) / 256) * tileUvMultiple;\n                this.demIndex++;\n            }\n        }\n        if (!this.tileY) {\n            // Send the tops to the pole to fill in the Bing Hole\n            y1 = this._subDivisionLevel$1;\n            for (x1 = 0; x1 <= this._subDivisionLevel$1; x1++) {\n                index = y1 * (this._subDivisionLevel$1 + 1) + x1;\n                verts[index].position = Vector3d.create(0, 1, 0);\n            }\n        }\n        if (this.tileY === Math.pow(2, this.level) - 1) {\n            // Send the tops to the pole to fill in the Bing Hole\n            y1 = 0;\n            for (x1 = 0; x1 <= this._subDivisionLevel$1; x1++) {\n                index = y1 * (this._subDivisionLevel$1 + 1) + x1;\n                verts[index].position = Vector3d.create(0, -1, 0);\n            }\n        }\n        this.triangleCount = this._subDivisionLevel$1 * this._subDivisionLevel$1 * 2;\n        var quarterDivisions = this._subDivisionLevel$1 / 2;\n        var part = 0;\n        if (renderContext.gl == null) {\n            for (var y2 = 0; y2 < 2; y2++) {\n                for (var x2 = 0; x2 < 2; x2++) {\n                    index = 0;\n                    for (y1 = (quarterDivisions * y2); y1 < (quarterDivisions * (y2 + 1)); y1++) {\n                        for (x1 = (quarterDivisions * x2); x1 < (quarterDivisions * (x2 + 1)); x1++) {\n                            var p1;\n                            var p2;\n                            var p3;\n\n                            // First triangle in quad\n                            p1 = verts[(y1 * (this._subDivisionLevel$1 + 1) + x1)];\n                            p2 = verts[((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1)];\n                            p3 = verts[(y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1))];\n                            var tri = RenderTriangle.create(p1, p2, p3, this.texture, this.level);\n                            this._renderTriangleLists[part].push(tri);\n\n                            // Second triangle in quad\n                            p1 = verts[(y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1))];\n                            p2 = verts[((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1)];\n                            p3 = verts[((y1 + 1) * (this._subDivisionLevel$1 + 1) + (x1 + 1))];\n                            tri = RenderTriangle.create(p1, p2, p3, this.texture, this.level);\n                            this._renderTriangleLists[part].push(tri);\n                        }\n                    }\n                    part++;\n                }\n            }\n        } else {\n            this._vertexBuffer = tilePrepDevice.createBuffer();\n            tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this._vertexBuffer);\n            var f32array = new Float32Array(verts.length * 5);\n            var buffer = f32array;\n            index = 0;\n            var $enum1 = ss.enumerate(verts);\n            while ($enum1.moveNext()) {\n                var pt = $enum1.current;\n                index = this.addVertex(buffer, index, pt);\n            }\n            tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n            for (var y2 = 0; y2 < 2; y2++) {\n                for (var x2 = 0; x2 < 2; x2++) {\n                    var ui16array = new Uint16Array(this.triangleCount * 3);\n                    var indexArray = ui16array;\n                    index = 0;\n                    for (y1 = (quarterDivisions * y2); y1 < (quarterDivisions * (y2 + 1)); y1++) {\n                        for (x1 = (quarterDivisions * x2); x1 < (quarterDivisions * (x2 + 1)); x1++) {\n                            // First triangle in quad\n                            indexArray[index++] = (y1 * (this._subDivisionLevel$1 + 1) + x1);\n                            indexArray[index++] = ((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1);\n                            indexArray[index++] = (y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1));\n\n                            // Second triangle in quad\n                            indexArray[index++] = (y1 * (this._subDivisionLevel$1 + 1) + (x1 + 1));\n                            indexArray[index++] = ((y1 + 1) * (this._subDivisionLevel$1 + 1) + x1);\n                            indexArray[index++] = ((y1 + 1) * (this._subDivisionLevel$1 + 1) + (x1 + 1));\n                        }\n                    }\n                    this._indexBuffers[part] = tilePrepDevice.createBuffer();\n                    tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, this._indexBuffers[part]);\n                    tilePrepDevice.bufferData(WEBGL.ELEMENT_ARRAY_BUFFER, ui16array, WEBGL.STATIC_DRAW);\n                    part++;\n                }\n            }\n        }\n        return true;\n    },\n\n    _getDemSample$1: function (x, y) {\n        return this.demData[(32 - y) * 33 + x];\n    },\n\n    createDemFromParent: function () {\n        var parent = ss.safeCast(this.parent, MercatorTile);\n        if (parent == null || parent.demData == null) {\n            return false;\n        }\n        var offsetX = (((this.tileX % 2) === 1) ? 16 : 0);\n        var offsetY = (((this.tileY % 2) === 1) ? 16 : 0);\n        this.demData = new Array(this.demSize);\n\n        // Interpolate across\n        for (var y = 0; y < 33; y += 2) {\n            var copy = true;\n            for (var x = 0; x < 33; x++) {\n                if (copy) {\n                    this.demData[(32 - y) * 33 + x] = parent._getDemSample$1((x / 2) + offsetX, (y / 2) + offsetY);\n                }\n                else {\n                    this.demData[(32 - y) * 33 + x] = ((parent._getDemSample$1((x / 2) + offsetX, (y / 2) + offsetY) + parent._getDemSample$1(((x / 2) + offsetX) + 1, (y / 2) + offsetY)) / 2);\n                }\n                copy = !copy;\n            }\n        }\n\n        // Interpolate down\n        for (var y = 1; y < 33; y += 2) {\n            for (var x = 0; x < 33; x++) {\n                this.demData[(32 - y) * 33 + x] = ((this._getDemSample$1(x, y - 1) + this._getDemSample$1(x, y + 1)) / 2);\n            }\n        }\n        var $enum1 = ss.enumerate(this.demData);\n        while ($enum1.moveNext()) {\n            var sample = $enum1.current;\n            this.demAverage += sample;\n        }\n        this.demAverage /= this.demData.length;\n        this.demReady = true;\n        return true;\n    }\n};\n\nregisterType(\"MercatorTile\", [MercatorTile, MercatorTile$, Tile]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Rendering the minor planet database\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { Vector3d, Matrix3d } from \"./double3d.js\";\nimport { EOE } from \"./astrocalc/elliptical.js\";\nimport { Texture } from \"./graphics/texture.js\";\nimport { WEBGL } from \"./graphics/webgl_constants.js\";\nimport { KeplerVertexBuffer } from \"./graphics/gl_buffers.js\"\nimport { KeplerPointSpriteShader } from \"./graphics/shaders.js\";\nimport { BlendState } from \"./blend_state.js\";\nimport { Colors } from \"./color.js\";\nimport { freestandingMode } from \"./data_globals.js\";\nimport { KeplerVertex } from \"./kepler_vertex.js\";\nimport { SpaceTimeController } from \"./space_time_controller.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { BinaryReader } from \"./utilities/binary_reader.js\";\nimport { WebFile } from \"./web_file.js\";\n\n\n// wwtlib.MinorPlanets\n\nexport function MinorPlanets() { }\n\nMinorPlanets.mpcList = [];\nMinorPlanets._initBegun = false;\nMinorPlanets._mpcBlendStates = new Array(7);\nMinorPlanets.starTexture = null;\nMinorPlanets._mpcVertexBuffer = null;\nMinorPlanets._mpcCount = 0;\n\nMinorPlanets.getMpcFile = function (url) {\n    MinorPlanets._webMpcFile = new WebFile(url);\n    MinorPlanets._webMpcFile.responseType = 'blob';\n    MinorPlanets._webMpcFile.onStateChange = MinorPlanets.starFileStateChange;\n    MinorPlanets._webMpcFile.send();\n};\n\nMinorPlanets.starFileStateChange = function () {\n    if (MinorPlanets._webMpcFile.get_state() === 2) {\n        alert(MinorPlanets._webMpcFile.get_message());\n    }\n    else if (MinorPlanets._webMpcFile.get_state() === 1) {\n        var mainBlob = MinorPlanets._webMpcFile.getBlob();\n        var chunck = new FileReader();\n        chunck.onloadend = function (e) {\n            MinorPlanets._readFromBin(new BinaryReader(new Uint8Array(chunck.result)));\n            MinorPlanets.initMPCVertexBuffer();\n        };\n        chunck.readAsArrayBuffer(mainBlob);\n    }\n};\n\nMinorPlanets._readFromBin = function (br) {\n    MinorPlanets.mpcList = [];\n    var len = br.get_length();\n    var ee;\n    try {\n        while (br.get_position() < len) {\n            ee = EOE._create(br);\n            MinorPlanets.mpcList.push(ee);\n        }\n    }\n    catch ($e1) { }\n    br.close();\n};\n\nMinorPlanets.drawMPC3D = function (renderContext, opacity, centerPoint) {\n    var zoom = renderContext.viewCamera.zoom;\n    var distAlpha = ((Math.log(Math.max(1, zoom)) / Math.log(4)) - 15.5) * 90;\n    var alpha = Math.min(255, Math.max(0, ss.truncate(distAlpha)));\n    if (alpha > 254) {\n        return;\n    }\n    if (MinorPlanets._mpcVertexBuffer == null) {\n        if (MinorPlanets.starTexture == null) {\n            MinorPlanets.starTexture = Texture.fromUrl(URLHelpers.singleton.engineAssetUrl('StarProfileAlpha.png'));\n        }\n        for (var i = 0; i < 7; i++) {\n            MinorPlanets._mpcBlendStates[i] = BlendState.create(false, 1000);\n        }\n        if (!MinorPlanets._initBegun) {\n            MinorPlanets._startInit();\n            MinorPlanets._initBegun = true;\n        }\n        return;\n    }\n    var offset = Matrix3d.translation(Vector3d.negate(centerPoint));\n    var world = Matrix3d.multiplyMatrix(renderContext.get_world(), offset);\n    var matrixWV = Matrix3d.multiplyMatrix(world, renderContext.get_view());\n    var cam = Vector3d._transformCoordinate(renderContext.cameraPosition, Matrix3d.invertMatrix(renderContext.get_world()));\n    if (MinorPlanets._mpcVertexBuffer != null) {\n        for (var i = 0; i < 7; i++) {\n            MinorPlanets._mpcBlendStates[i].set_targetState(true);\n            if (MinorPlanets._mpcBlendStates[i].get_state()) {\n                KeplerPointSpriteShader.use(renderContext, matrixWV, MinorPlanets._mpcVertexBuffer[i].vertexBuffer, MinorPlanets.starTexture.texture2d, Colors.get_white(), opacity * MinorPlanets._mpcBlendStates[i].get_opacity(), false, (SpaceTimeController.get_jNow() - KeplerVertex.baseDate), 0, renderContext.cameraPosition, 200, 0.1);\n                renderContext.gl.drawArrays(WEBGL.POINTS, 0, MinorPlanets._mpcVertexBuffer[i].count);\n            }\n        }\n    }\n};\n\nMinorPlanets._startInit = function () {\n    if (!freestandingMode) {\n        MinorPlanets.getMpcFile(URLHelpers.singleton.coreStaticUrl('wwtweb/catalog.aspx?Q=mpcbin'));\n    }\n};\n\nMinorPlanets.initMPCVertexBuffer = function () {\n    try {\n        if (MinorPlanets._mpcVertexBuffer == null) {\n            var mpcVertexBufferTemp = new Array(7);\n            MinorPlanets._mpcCount = MinorPlanets.mpcList.length;\n            var lists = new Array(7);\n            for (var i = 0; i < 7; i++) {\n                lists[i] = [];\n            }\n            var $enum1 = ss.enumerate(MinorPlanets.mpcList);\n            while ($enum1.moveNext()) {\n                var ee = $enum1.current;\n                var listID = 0;\n                if (ee.a < 2.5) {\n                    listID = 0;\n                }\n                else if (ee.a < 2.83) {\n                    listID = 1;\n                }\n                else if (ee.a < 2.96) {\n                    listID = 2;\n                }\n                else if (ee.a < 3.3) {\n                    listID = 3;\n                }\n                else if (ee.a < 5) {\n                    listID = 4;\n                }\n                else if (ee.a < 10) {\n                    listID = 5;\n                }\n                else {\n                    listID = 6;\n                }\n                var vert = new KeplerVertex();\n                vert.fill(ee);\n                lists[listID].push(vert);\n            }\n            for (var i = 0; i < 7; i++) {\n                mpcVertexBufferTemp[i] = KeplerVertexBuffer.create(lists[i]);\n                mpcVertexBufferTemp[i].unlock();\n            }\n            MinorPlanets._mpcVertexBuffer = mpcVertexBufferTemp;\n        }\n    }\n    finally { }\n};\n\nvar MinorPlanets$ = {};\n\nregisterType(\"MinorPlanets\", [MinorPlanets, MinorPlanets$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A place to look at, potentially with associated imagesets.\n\nimport { ss } from \"./ss.js\";\nimport { registerType, registerEnum, Enums } from \"./typesystem.js\";\nimport { Vector3d } from \"./double3d.js\";\nimport { freestandingMode, set_createPlace } from \"./data_globals.js\";\nimport { Util } from \"./baseutil.js\";\nimport { CameraParameters } from \"./camera_parameters.js\";\nimport { IPlace, IThumbnail } from \"./interfaces.js\";\nimport { UiTools } from \"./ui_tools.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { Coordinates } from \"./coordinates.js\";\nimport { Imageset } from \"./imageset.js\";\nimport { Planets } from \"./planets.js\";\n\n\n// wwtlib.Classification\n//\n// This was defined in `IPlace.cs`, which we've folded into `interfaces.js`.\n\nexport var Classification = {\n    star: 1,\n    supernova: 2,\n    blackHole: 4,\n    neutronStar: 8,\n    doubleStar: 16,\n    multipleStars: 32,\n    asterism: 64,\n    constellation: 128,\n    openCluster: 256,\n    globularCluster: 512,\n    nebulousCluster: 1024,\n    nebula: 2048,\n    emissionNebula: 4096,\n    planetaryNebula: 8192,\n    reflectionNebula: 16384,\n    darkNebula: 32768,\n    giantMolecularCloud: 65536,\n    supernovaRemnant: 131072,\n    interstellarDust: 262144,\n    quasar: 524288,\n    galaxy: 1048576,\n    spiralGalaxy: 2097152,\n    irregularGalaxy: 4194304,\n    ellipticalGalaxy: 8388608,\n    knot: 16777216,\n    plateDefect: 33554432,\n    clusterOfGalaxies: 67108864,\n    otherNGC: 134217728,\n    unidentified: 268435456,\n    solarSystem: 536870912,\n    unfiltered: 1073741823,\n    stellar: 63,\n    stellarGroupings: 2032,\n    nebulae: 523264,\n    galactic: 133693440,\n    other: 436207616\n};\n\nregisterType(\"Classification\", Classification);\nregisterEnum(\"Classification\", Classification);\n\n\n// wwtlib.Place\n\nexport function Place() {\n    this._camParams = CameraParameters.create(0, 0, -1, 0, 0, 100);\n    this._location3d = Vector3d.create(0, 0, 0);\n    this.htmlDescription = '';\n    this._constellation = '';\n    this._classification = 1048576;\n    this._type = 2;\n    this._magnitude = 0;\n    this._distnace = 0;\n    this.angularSize = 60; // Angular size in arcseconds\n    this.annotation = '';\n    this._thumbNail = null;\n    this._studyImageset = null;\n    this._backgroundImageSet = null;\n    this._searchDistance = 0;\n    this._elevation = 50;\n}\n\nPlace.create = function (name, lat, lng, classification, constellation, type, zoomFactor) {\n    var temp = new Place();\n    temp.set_zoomLevel(zoomFactor);\n    temp._constellation = constellation;\n    temp._name = name;\n    if (type === 2 || type === 4) {\n        temp._camParams.set_RA(lng);\n    }\n    else {\n        temp.set_lng(lng);\n    }\n    temp.set_lat(lat);\n    temp.set_classification(classification);\n    temp.set_type(type);\n    return temp;\n};\n\nPlace.createCameraParams = function (name, camParams, classification, constellation, type, target) {\n    var temp = new Place();\n    temp._constellation = constellation;\n    temp._name = name;\n    temp.set_classification(classification);\n    temp._camParams = camParams;\n    temp.set_type(type);\n    temp.set_target(target);\n    return temp;\n};\n\nPlace._fromXml = function (place) {\n    var newPlace = new Place();\n    newPlace._name = place.attributes.getNamedItem('Name').nodeValue;\n    if (place.attributes.getNamedItem('MSRComponentId') != null && place.attributes.getNamedItem('Permission') != null && place.attributes.getNamedItem('Url') != null) {\n        //communities item\n        newPlace.set_url(place.attributes.getNamedItem('Url').nodeValue);\n        newPlace.set_thumbnailUrl(place.attributes.getNamedItem('Thumbnail').nodeValue);\n        return newPlace;\n    }\n    if (place.attributes.getNamedItem('DataSetType') != null) {\n        newPlace._type = Enums.parse('ImageSetType', place.attributes.getNamedItem('DataSetType').nodeValue);\n    }\n    if (newPlace.get_type() === 2) {\n        newPlace._camParams.set_RA(parseFloat(place.attributes.getNamedItem('RA').nodeValue));\n        newPlace._camParams.set_dec(parseFloat(place.attributes.getNamedItem('Dec').nodeValue));\n    }\n    else {\n        newPlace.set_lat(parseFloat(place.attributes.getNamedItem('Lat').nodeValue));\n        newPlace.set_lng(parseFloat(place.attributes.getNamedItem('Lng').nodeValue));\n    }\n    if (place.attributes.getNamedItem('Constellation') != null) {\n        newPlace._constellation = place.attributes.getNamedItem('Constellation').nodeValue;\n    }\n    if (place.attributes.getNamedItem('Classification') != null) {\n        newPlace._classification = Enums.parse('Classification', place.attributes.getNamedItem('Classification').nodeValue);\n    }\n    if (place.attributes.getNamedItem('Magnitude') != null) {\n        newPlace._magnitude = parseFloat(place.attributes.getNamedItem('Magnitude').nodeValue);\n    }\n    if (place.attributes.getNamedItem('AngularSize') != null) {\n        newPlace.angularSize = parseFloat(place.attributes.getNamedItem('AngularSize').nodeValue);\n    }\n    if (place.attributes.getNamedItem('ZoomLevel') != null) {\n        newPlace.set_zoomLevel(parseFloat(place.attributes.getNamedItem('ZoomLevel').nodeValue));\n    }\n    if (place.attributes.getNamedItem('Rotation') != null) {\n        newPlace._camParams.rotation = parseFloat(place.attributes.getNamedItem('Rotation').nodeValue);\n    }\n    if (place.attributes.getNamedItem('Annotation') != null) {\n        newPlace.annotation = place.attributes.getNamedItem('Annotation').nodeValue;\n    }\n    if (place.attributes.getNamedItem('Angle') != null) {\n        newPlace._camParams.angle = parseFloat(place.attributes.getNamedItem('Angle').nodeValue);\n    }\n    if (place.attributes.getNamedItem('Opacity') != null) {\n        newPlace._camParams.opacity = parseFloat(place.attributes.getNamedItem('Opacity').nodeValue);\n    }\n    else {\n        newPlace._camParams.opacity = 100;\n    }\n    newPlace.set_target(65536);\n    if (place.attributes.getNamedItem('Target') != null) {\n        newPlace.set_target(Enums.parse('SolarSystemObjects', place.attributes.getNamedItem('Target').nodeValue));\n    }\n    if (place.attributes.getNamedItem('ViewTarget') != null) {\n        newPlace._camParams.viewTarget = Vector3d.parse(place.attributes.getNamedItem('ViewTarget').nodeValue);\n    }\n    if (place.attributes.getNamedItem('TargetReferenceFrame') != null) {\n        newPlace._camParams.targetReferenceFrame = place.attributes.getNamedItem('TargetReferenceFrame').nodeValue;\n    }\n    var descriptionNode = Util.selectSingleNode(place, 'Description');\n    if (descriptionNode != null) {\n        newPlace.htmlDescription = Util.getInnerText(descriptionNode);\n    }\n    var backgroundImageSet = Util.selectSingleNode(place, 'BackgroundImageSet');\n    if (backgroundImageSet != null) {\n        var imageSet = Util.selectSingleNode(backgroundImageSet, 'ImageSet');\n        newPlace._backgroundImageSet = Imageset.fromXMLNode(imageSet);\n    }\n    var study = Util.selectSingleNode(place, 'ForegroundImageSet');\n    if (study != null) {\n        var imageSet = Util.selectSingleNode(study, 'ImageSet');\n        newPlace._studyImageset = Imageset.fromXMLNode(imageSet);\n    }\n    study = Util.selectSingleNode(place, 'ImageSet');\n    if (study != null) {\n        newPlace._studyImageset = Imageset.fromXMLNode(study);\n    }\n    return newPlace;\n};\n\nPlace._properCaps = function (name) {\n    var list = name.split(' ');\n    var ProperName = '';\n    var $enum1 = ss.enumerate(list);\n    while ($enum1.moveNext()) {\n        var part = $enum1.current;\n        ProperName = ProperName + part.substr(0, 1).toUpperCase() + ((part.length > 1) ? part.substr(1).toLowerCase() : '') + ' ';\n    }\n    return ss.trim(ProperName);\n};\n\nvar Place$ = {\n    get_tag: function () {\n        return this._tag;\n    },\n\n    set_tag: function (value) {\n        this._tag = value;\n        return value;\n    },\n\n    get_url: function () {\n        return this._url;\n    },\n\n    set_url: function (value) {\n        this._url = value;\n        return value;\n    },\n\n    get_thumbnail: function () {\n        return this._thumbnail;\n    },\n\n    set_thumbnail: function (value) {\n        this._thumbnail = value;\n        return value;\n    },\n\n    get_name: function () {\n        return this.get_names()[0];\n    },\n\n    get_names: function () {\n        if (ss.emptyString(this._name)) {\n            return ''.split(';');\n        }\n        return this._name.split(';');\n    },\n\n    set_names: function (value) {\n        this._name = UiTools.getNamesStringFromArray(value);\n        return value;\n    },\n\n    get_camParams: function () {\n        if (this.get_classification() === 536870912 && this._camParams.target !== 20) {\n            var raDec = Planets.getPlanetLocation(this.get_name());\n            this._camParams.set_RA(raDec.RA);\n            this._camParams.set_dec(raDec.dec);\n            this._distnace = raDec.distance;\n        }\n        return this._camParams;\n    },\n\n    set_camParams: function (value) {\n        this._camParams = value;\n        return value;\n    },\n\n    updatePlanetLocation: function (jNow) {\n        this._camParams.viewTarget = Planets.getPlanet3dLocationJD(this.get_target(), jNow);\n        if (this.get_target() !== 65536 && this.get_target() !== 20) {\n            this._camParams.viewTarget = Planets.getPlanetTargetPoint(this.get_target(), this.get_lat(), this.get_lng(), jNow);\n        }\n    },\n\n    get_location3d: function () {\n        if (this.get_classification() === 536870912 || (!this._location3d.x && !this._location3d.y && !this._location3d.z)) {\n            this._location3d = Coordinates.raDecTo3d(this.get_RA(), this.get_dec());\n        }\n        return this._location3d;\n    },\n\n    get_lat: function () {\n        return this.get_camParams().lat;\n    },\n\n    set_lat: function (value) {\n        this._camParams.lat = value;\n        return value;\n    },\n\n    get_lng: function () {\n        return this.get_camParams().lng;\n    },\n\n    set_lng: function (value) {\n        this._camParams.lng = value;\n        return value;\n    },\n\n    get_opacity: function () {\n        return this.get_camParams().opacity;\n    },\n\n    set_opacity: function (value) {\n        this._camParams.opacity = value;\n        return value;\n    },\n\n    get_constellation: function () {\n        return this._constellation;\n    },\n\n    set_constellation: function (value) {\n        this._constellation = value;\n        return value;\n    },\n\n    get_classification: function () {\n        return this._classification;\n    },\n\n    set_classification: function (value) {\n        this._classification = value;\n        return value;\n    },\n\n    get_type: function () {\n        return this._type;\n    },\n\n    set_type: function (value) {\n        this._type = value;\n        return value;\n    },\n\n    get_magnitude: function () {\n        return this._magnitude;\n    },\n\n    set_magnitude: function (value) {\n        this._magnitude = value;\n        return value;\n    },\n\n    get_distance: function () {\n        return this._distnace;\n    },\n\n    set_distance: function (value) {\n        this._distnace = value;\n        return value;\n    },\n\n    get_zoomLevel: function () {\n        return this.get_camParams().zoom;\n    },\n\n    set_zoomLevel: function (value) {\n        this._camParams.zoom = value;\n        return value;\n    },\n\n    get_annotation: function () {\n        return this.annotation;\n    },\n\n    set_annotation: function (value) {\n        this.annotation = value;\n        return value;\n    },\n\n    get_studyImageset: function () {\n        return this._studyImageset;\n    },\n\n    set_studyImageset: function (value) {\n        this._studyImageset = value;\n        return value;\n    },\n\n    get_backgroundImageset: function () {\n        return this._backgroundImageSet;\n    },\n\n    set_backgroundImageset: function (value) {\n        if (value != null) {\n            this.set_type(value.get_dataSetType());\n        }\n        this._backgroundImageSet = value;\n        return value;\n    },\n\n    get_searchDistance: function () {\n        return this._searchDistance;\n    },\n\n    set_searchDistance: function (value) {\n        this._searchDistance = value;\n        return value;\n    },\n\n    get_elevation: function () {\n        return this._elevation;\n    },\n\n    set_elevation: function (value) {\n        this._elevation = value;\n        return value;\n    },\n\n    get_thumbnailUrl: function () {\n        if (ss.emptyString(this._thumbnailField)) {\n            if (this._studyImageset != null && !ss.emptyString(this._studyImageset.get_thumbnailUrl())) {\n                return this._studyImageset.get_thumbnailUrl();\n            }\n            if (this._backgroundImageSet != null && !ss.emptyString(this._backgroundImageSet.get_thumbnailUrl())) {\n                return this._backgroundImageSet.get_thumbnailUrl();\n            }\n            var name = this.get_name();\n            if (name.indexOf(';') > -1) {\n                name = name.substr(0, name.indexOf(';'));\n            }\n            if (this.get_classification() === 1 || freestandingMode) {\n                return URLHelpers.singleton.engineAssetUrl('thumb_star.jpg');\n            }\n            return URLHelpers.singleton.coreStaticUrl('wwtweb/thumbnail.aspx?name=' + name.toLowerCase());\n        }\n        return this._thumbnailField;\n    },\n\n    set_thumbnailUrl: function (value) {\n        this._thumbnailField = value;\n        return value;\n    },\n\n    get_RA: function () {\n        return this.get_camParams().get_RA();\n    },\n\n    set_RA: function (value) {\n        this._camParams.set_RA(value);\n        return value;\n    },\n\n    get_dec: function () {\n        return this.get_camParams().get_dec();\n    },\n\n    set_dec: function (value) {\n        this._camParams.set_dec(value);\n        return value;\n    },\n\n    toString: function () {\n        return this._name;\n    },\n\n    _saveToXml: function (xmlWriter, elementName) {\n        xmlWriter._writeStartElement(elementName);\n        xmlWriter._writeAttributeString('Name', this._name);\n        xmlWriter._writeAttributeString('DataSetType', Enums.toXml('ImageSetType', this._type));\n        if (this.get_type() === 2) {\n            xmlWriter._writeAttributeString('RA', this._camParams.get_RA().toString());\n            xmlWriter._writeAttributeString('Dec', this._camParams.get_dec().toString());\n        } else {\n            xmlWriter._writeAttributeString('Lat', this.get_lat().toString());\n            xmlWriter._writeAttributeString('Lng', this.get_lng().toString());\n        }\n        xmlWriter._writeAttributeString('Constellation', this._constellation);\n        xmlWriter._writeAttributeString('Classification', Enums.toXml('Classification', this._classification));\n        xmlWriter._writeAttributeString('Magnitude', this._magnitude.toString());\n        xmlWriter._writeAttributeString('Distance', this._distnace.toString());\n        xmlWriter._writeAttributeString('AngularSize', this.angularSize.toString());\n        xmlWriter._writeAttributeString('ZoomLevel', this.get_zoomLevel().toString());\n        xmlWriter._writeAttributeString('Rotation', this._camParams.rotation.toString());\n        xmlWriter._writeAttributeString('Angle', this._camParams.angle.toString());\n        xmlWriter._writeAttributeString('Opacity', this._camParams.opacity.toString());\n        xmlWriter._writeAttributeString('Target', Enums.toXml('SolarSystemObjects', this.get_target()));\n        xmlWriter._writeAttributeString('ViewTarget', this._camParams.viewTarget.toString());\n        xmlWriter._writeAttributeString('TargetReferenceFrame', this._camParams.targetReferenceFrame);\n        xmlWriter._writeStartElement('Description');\n        xmlWriter._writeCData(this.htmlDescription);\n        xmlWriter._writeEndElement();\n        if (this._backgroundImageSet != null) {\n            xmlWriter._writeStartElement('BackgroundImageSet');\n            Imageset.saveToXml(xmlWriter, this._backgroundImageSet, '');\n            xmlWriter._writeEndElement();\n        }\n        if (this._studyImageset != null) {\n            Imageset.saveToXml(xmlWriter, this._studyImageset, '');\n        }\n        xmlWriter._writeEndElement();\n    },\n\n    get_bounds: function () {\n        return this._bounds;\n    },\n\n    set_bounds: function (value) {\n        this._bounds = value;\n        return value;\n    },\n\n    get_isImage: function () {\n        return this._studyImageset != null || this._backgroundImageSet != null;\n    },\n\n    get_isTour: function () {\n        return false;\n    },\n\n    get_isFolder: function () {\n        return false;\n    },\n\n    get_children: function () {\n        return [];\n    },\n\n    get_readOnly: function () {\n        return true;\n    },\n\n    get_target: function () {\n        return this._camParams.target;\n    },\n\n    set_target: function (value) {\n        this._camParams.target = value;\n        return value;\n    },\n\n    get_isCloudCommunityItem: function () {\n        return false;\n    }\n};\n\nregisterType(\"Place\", [Place, Place$, null, IThumbnail, IPlace]);\n\nset_createPlace(Place.create);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The main planet-related code.\n//\n// This does not include the 3D planet-rendering code, which has been separated\n// into `planets_3d.js`.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { Vector3d, Matrix3d, PositionColoredTextured } from \"./double3d.js\";\nimport { CAAEarth } from \"./astrocalc/earth.js\";\nimport { CAAMercury } from \"./astrocalc/mercury.js\";\nimport { CAAVenus } from \"./astrocalc/venus.js\";\nimport { CAAMars } from \"./astrocalc/mars.js\";\nimport { CAAJupiter } from \"./astrocalc/jupiter.js\";\nimport { CAASaturn } from \"./astrocalc/saturn.js\";\nimport { CAAUranus } from \"./astrocalc/uranus.js\";\nimport { CAANeptune } from \"./astrocalc/neptune.js\";\nimport { CAAPluto } from \"./astrocalc/pluto.js\";\nimport { GM } from \"./astrocalc/galilean_moons.js\";\nimport { CAAMoon } from \"./astrocalc/moon.js\";\nimport { AstroCalc } from \"./astrocalc.js\";\nimport { Texture } from \"./graphics/texture.js\";\nimport { Sprite2d } from \"./graphics/sprite2d.js\";\nimport { BasePlanets } from \"./baseplanets.js\";\nimport { SolarSystemObjects } from \"./camera_parameters.js\";\nimport { Color, Colors } from \"./color.js\";\nimport { Coordinates } from \"./coordinates.js\";\nimport { Settings } from \"./settings.js\";\nimport { SpaceTimeController } from \"./space_time_controller.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\n\n\n// wwtlib.KeplerianElements\n//\n// Keplerian elements defined here use eccentric anomaly instead of mean anomaly\n// and have all orbital plane angles converted to a rotation matrix.\nexport function KeplerianElements() {\n    this.a = 0;\n    this.e = 0;\n    this.ea = 0;\n}\n\nvar KeplerianElements$ = {};\n\nregisterType(\"KeplerianElements\", [KeplerianElements, KeplerianElements$, null]);\n\n\n// wwtlib.BodyAngles\n\nexport function BodyAngles(poleRa, poleDec, primeMeridian, rotationRate) {\n    this.poleDec = 0;\n    this.poleRa = 0;\n    this.primeMeridian = 0;\n    this.rotationRate = 0;\n    this.poleDec = poleDec;\n    this.poleRa = poleRa;\n    this.primeMeridian = primeMeridian;\n    this.rotationRate = rotationRate;\n}\n\nvar BodyAngles$ = {};\n\nregisterType(\"BodyAngles\", [BodyAngles, BodyAngles$, null]);\n\n\n// wwtlib.Planets\n\nexport function Planets() { }\n\nPlanets.RC = (Math.PI / 180);\nPlanets._jNow = 0;\n\n// Values taken from version 10 of the SPICE planetary constants file, updated\n// October 21, 2011: ftp://naif.jpl.nasa.gov/pub/naif/generic_kernels/pck/pck00010.tpc\n//\n// Precession rates for rotation angles are currently not stored.\n//\n// All angles are in degrees.\nPlanets._planetAngles = [\n    new BodyAngles(286.13, 63.87, 84.176, 14.1844),\n    new BodyAngles(281.0097, 61.4143, 329.548, 6.1385025),\n    new BodyAngles(272.76, 67.16, 160.2, -1.4813688),\n    new BodyAngles(317.68143, 52.8865, 176.63, 350.89198226),\n    new BodyAngles(268.056595, 64.495303, 284.95, 870.536),\n    new BodyAngles(40.589, 83.537, 38.9, 810.7939024),\n    new BodyAngles(257.311, -15.175, 203.81, 501.1600928),\n    new BodyAngles(299.36, 43.46, 253.18, 536.3128492),\n    new BodyAngles(132.993, -6.163, 302.695, 56.3625225),\n    new BodyAngles(269.9949, 66.5392, 38.3213, 13.17635815),\n    new BodyAngles(268.05, 64.5, 200.39, 203.4889538),\n    new BodyAngles(268.08, 64.51, 36.022, 101.3747235),\n    new BodyAngles(268.2, 64.57, 44.064, 50.3176081),\n    new BodyAngles(268.72, 64.83, 259.51, 21.5710715),\n    new BodyAngles(0, 0, 0, 0),\n    new BodyAngles(0, 0, 0, 0),\n    new BodyAngles(0, 0, 0, 0),\n    new BodyAngles(0, 0, 0, 0),\n    new BodyAngles(0, 0, 0, 0),\n    new BodyAngles(0, 90, 190.147, 360.9856235)\n];\nPlanets._lastPlanetCenterID = -2;\nPlanets._orbitalSampleRate = 256;\nPlanets._obliquity = 23.5 * Planets.RC;\nPlanets._drawOrder = {};\nPlanets.earthMatrix = new Matrix3d();\nPlanets.earthMatrixInv = new Matrix3d();\nPlanets._lastUpdate = new Date();\nPlanets._planetSprite = new Sprite2d();\nPlanets._planetPoints = null;\nPlanets._planet3dLocations = null;\n\n// This function is equivalent to `Texture.from_url` and not specific to the\n// Planets infrastructure at all. It should go away. But at the moment, we\n// preserve it so as not to break API.\nPlanets.loadPlanetTexture = function (url) {\n    var texture = new Texture();\n    texture.load(url);\n    return texture;\n};\n\nPlanets.getPlanet3dLocation = function (target) {\n    try {\n        if (target < 21) {\n            return Planets._planet3dLocations[target].copy();\n        }\n    }\n    catch ($e1) { }\n    return Vector3d.create(0, 0, 0);\n};\n\nPlanets.getPlanet3dSufaceAltitude = function (target) {\n    try {\n        if (target < 21) {\n            return Planets.getAdjustedPlanetRadius(target);\n        }\n    }\n    catch ($e1) { }\n    return 0;\n};\n\nPlanets.getPlanetTargetPoint = function (target, lat, lng, jNow) {\n    var temp;\n    if (!jNow) {\n        temp = Planets.getPlanet3dLocation(target);\n    }\n    else {\n        temp = Planets.getPlanet3dLocationJD(target, jNow);\n    }\n    temp.add(Coordinates.raDecTo3dAu((lng / 15) + 6, lat, Planets.getPlanet3dSufaceAltitude(target)));\n    return temp;\n};\n\nPlanets.getPlanet3dLocationJD = function (target, jNow) {\n    try {\n        var result = new Vector3d();\n        var centerRaDec = AstroCalc.getPlanet(jNow, 0, 0, 0, -6378149);\n        var center = Coordinates.raDecTo3dAu(centerRaDec.RA, centerRaDec.dec, centerRaDec.distance);\n        if (target === SolarSystemObjects.earth) {\n            result = Vector3d.create(-center.x, -center.y, -center.z);\n        } else {\n            var planet = AstroCalc.getPlanet(jNow, target, 0, 0, -6378149);\n            result = Coordinates.raDecTo3dAu(planet.RA, planet.dec, planet.distance);\n            result.subtract(center);\n        }\n        result.rotateX(Coordinates.meanObliquityOfEcliptic(jNow) * Planets.RC);\n        if (Settings.get_active().get_solarSystemScale() !== 1) {\n            switch (target) {\n                case SolarSystemObjects.moon:\n                    var parent = Planets.getPlanet3dLocationJD(SolarSystemObjects.earth, jNow);\n                    result.subtract(parent);\n                    result.multiply(Settings.get_active().get_solarSystemScale() / 2);\n                    result.add(parent);\n                    break;\n                case SolarSystemObjects.io:\n                case SolarSystemObjects.europa:\n                case SolarSystemObjects.ganymede:\n                case SolarSystemObjects.callisto:\n                    var parent = Planets.getPlanet3dLocationJD(SolarSystemObjects.jupiter, jNow);\n                    result.subtract(parent);\n                    result.multiply(Settings.get_active().get_solarSystemScale());\n                    result.add(parent);\n                    break;\n                default:\n                    break;\n            }\n        }\n        return result;\n    }\n    catch ($e1) {\n        return Vector3d.create(0, 0, 0);\n    }\n};\n\nPlanets.getPlanetLocation = function (name) {\n    var id = Planets.getPlanetIDFromName(name);\n    if (Planets._planetLocations != null) {\n        return Planets._planetLocations[id];\n    }\n    else {\n        return AstroCalc.getPlanet(SpaceTimeController.get_jNow(), id, SpaceTimeController.get_location().get_lat(), SpaceTimeController.get_location().get_lng(), SpaceTimeController.get_altitude());\n    }\n};\n\nPlanets.getPlanetLocationJD = function (name, jNow) {\n    var id = Planets.getPlanetIDFromName(name);\n    return AstroCalc.getPlanet(jNow, id, SpaceTimeController.get_location().get_lat(), SpaceTimeController.get_location().get_lng(), SpaceTimeController.get_altitude());\n};\n\nPlanets.getPlanetIDFromName = function (planetName) {\n    switch (planetName) {\n        case 'Sun':\n            return SolarSystemObjects.sun;\n        case 'Mercury':\n            return SolarSystemObjects.mercury;\n        case 'Venus':\n            return SolarSystemObjects.venus;\n        case 'Mars':\n            return SolarSystemObjects.mars;\n        case 'Jupiter':\n            return SolarSystemObjects.jupiter;\n        case 'Saturn':\n            return SolarSystemObjects.saturn;\n        case 'Uranus':\n            return SolarSystemObjects.uranus;\n        case 'Neptune':\n            return SolarSystemObjects.neptune;\n        case 'Pluto':\n            return SolarSystemObjects.pluto;\n        case 'Moon':\n            return SolarSystemObjects.moon;\n        case 'Io':\n            return SolarSystemObjects.io;\n        case 'Europa':\n            return SolarSystemObjects.europa;\n        case 'Ganymede':\n            return SolarSystemObjects.ganymede;\n        case 'Callisto':\n            return SolarSystemObjects.callisto;\n        case 'Earth':\n            return SolarSystemObjects.earth;\n        case 'IoShadow':\n            return SolarSystemObjects.ioShadow;\n        case 'EuropaShadow':\n            return SolarSystemObjects.europaShadow;\n        case 'GanymedeShadow':\n            return SolarSystemObjects.ganymedeShadow;\n        case 'CallistoShadow':\n            return SolarSystemObjects.callistoShadow;\n        case 'SunEclipsed':\n            return SolarSystemObjects.sunEclipsed;\n        case 'Custom':\n            return SolarSystemObjects.custom;\n        case 'Undefined':\n            return SolarSystemObjects.undefined;\n        default:\n            return -1;\n    }\n};\n\nPlanets.getNameFrom3dId = function (id) {\n    switch (id) {\n        case SolarSystemObjects.sun:\n            return 'Sun';\n        case SolarSystemObjects.mercury:\n            return 'Mercury';\n        case SolarSystemObjects.venus:\n            return 'Venus';\n        case SolarSystemObjects.mars:\n            return 'Mars';\n        case SolarSystemObjects.jupiter:\n            return 'Jupiter';\n        case SolarSystemObjects.saturn:\n            return 'Saturn';\n        case SolarSystemObjects.uranus:\n            return 'Uranus';\n        case SolarSystemObjects.neptune:\n            return 'Neptune';\n        case SolarSystemObjects.pluto:\n            return 'Pluto';\n        case SolarSystemObjects.moon:\n            return 'Moon';\n        case SolarSystemObjects.io:\n            return 'Io';\n        case SolarSystemObjects.europa:\n            return 'Europa';\n        case SolarSystemObjects.ganymede:\n            return 'Ganymede';\n        case SolarSystemObjects.callisto:\n            return 'Callisto';\n        case SolarSystemObjects.earth:\n            return 'Earth';\n        default:\n            return '';\n    }\n};\n\nPlanets.updatePlanetLocations = function (threeDee) {\n    Planets._jNow = SpaceTimeController.get_jNow();\n    if (threeDee) {\n        Planets.updateOrbits(0);\n    }\n    if (Planets._planetDiameters == null) {\n        Planets._planetDiameters = new Array(20);\n        Planets._planetDiameters[0] = 0.009291568;\n        Planets._planetDiameters[1] = 3.25794793734425E-05;\n        Planets._planetDiameters[2] = 8.08669220531394E-05;\n        Planets._planetDiameters[3] = 4.53785605596396E-05;\n        Planets._planetDiameters[4] = 0.000954501;\n        Planets._planetDiameters[5] = 0.000802173;\n        Planets._planetDiameters[6] = 0.000339564;\n        Planets._planetDiameters[7] = 0.000324825;\n        Planets._planetDiameters[8] = 1.52007379777805E-05;\n        Planets._planetDiameters[9] = 2.32084653538149E-05;\n        Planets._planetDiameters[10] = 2.43519298386342E-05;\n        Planets._planetDiameters[11] = 2.08692629580609E-05;\n        Planets._planetDiameters[12] = 3.51742670356556E-05;\n        Planets._planetDiameters[13] = 3.22263666626559E-05;\n        Planets._planetDiameters[14] = 2.43519298386342E-05;\n        Planets._planetDiameters[15] = 2.08692629580609E-05;\n        Planets._planetDiameters[16] = 3.51742670356556E-05;\n        Planets._planetDiameters[17] = 3.22263666626559E-05;\n        Planets._planetDiameters[18] = 0.009291568 * 2;\n        Planets._planetDiameters[SolarSystemObjects.earth] = 8.55626412117809E-05;\n    }\n    if (Planets.planetColors == null) {\n        var lightYellow = Color.fromArgb(255, 255, 255, 221);\n        var orangeRed = Color.fromArgb(255, 255, 68, 0);\n        Planets.planetColors = new Array(20);\n        Planets.planetColors[0] = Colors.get_yellow();\n        Planets.planetColors[1] = Colors.get_white();\n        Planets.planetColors[2] = lightYellow;\n        Planets.planetColors[3] = orangeRed;\n        Planets.planetColors[4] = Color.fromArgb(255, 255, 165, 0);\n        Planets.planetColors[5] = Color.fromArgb(255, 184, 134, 11);\n        Planets.planetColors[6] = Color.fromArgb(255, 173, 216, 230);\n        Planets.planetColors[7] = Colors.get_blue();\n        Planets.planetColors[8] = Colors.get_white();\n        Planets.planetColors[9] = Colors.get_white();\n        Planets.planetColors[10] = Colors.get_white();\n        Planets.planetColors[11] = Colors.get_white();\n        Planets.planetColors[12] = Colors.get_white();\n        Planets.planetColors[13] = Colors.get_white();\n        Planets.planetColors[14] = Colors.get_black();\n        Planets.planetColors[15] = Colors.get_black();\n        Planets.planetColors[16] = Colors.get_black();\n        Planets.planetColors[17] = Colors.get_black();\n        Planets.planetColors[18] = Colors.get_white();\n        Planets.planetColors[SolarSystemObjects.earth] = Color.fromArgb(255, 173, 216, 230);\n    }\n    if (Planets._planetTilts == null) {\n        Planets._planetTilts = new Array(20);\n        Planets._planetTilts[0] = 0;\n        Planets._planetTilts[1] = 0.01;\n        Planets._planetTilts[2] = 177.4;\n        Planets._planetTilts[3] = 25.19;\n        Planets._planetTilts[4] = 3.13;\n        Planets._planetTilts[5] = 26.73;\n        Planets._planetTilts[6] = 97.77;\n        Planets._planetTilts[7] = 28.32;\n        Planets._planetTilts[8] = 119.61;\n        Planets._planetTilts[9] = 23.439;\n        Planets._planetTilts[10] = 2.21;\n        Planets._planetTilts[11] = 0;\n        Planets._planetTilts[12] = -0.33;\n        Planets._planetTilts[13] = 0;\n        Planets._planetTilts[14] = 0;\n        Planets._planetTilts[15] = 0;\n        Planets._planetTilts[16] = 0;\n        Planets._planetTilts[17] = 0;\n        Planets._planetTilts[18] = 0;\n        Planets._planetTilts[SolarSystemObjects.earth] = 23.5;\n    }\n    Planets._planetTilts[SolarSystemObjects.earth] = Planets._obliquity / Planets.RC;\n    if (Planets.planetRotationPeriod == null) {\n        Planets.planetRotationPeriod = new Array(20);\n        Planets.planetRotationPeriod[0] = 25.37995;\n        Planets.planetRotationPeriod[1] = 58.6462;\n        Planets.planetRotationPeriod[2] = -243.0187;\n        Planets.planetRotationPeriod[3] = 1.02595675;\n        Planets.planetRotationPeriod[4] = 0.41007;\n        Planets.planetRotationPeriod[5] = 0.426;\n        Planets.planetRotationPeriod[6] = -0.71833;\n        Planets.planetRotationPeriod[7] = 0.67125;\n        Planets.planetRotationPeriod[8] = -6.38718;\n        Planets.planetRotationPeriod[9] = 27.3;\n        Planets.planetRotationPeriod[10] = 1.769137786;\n        Planets.planetRotationPeriod[11] = 3.551;\n        Planets.planetRotationPeriod[12] = 7.155;\n        Planets.planetRotationPeriod[13] = 16.69;\n        Planets.planetRotationPeriod[14] = 0;\n        Planets.planetRotationPeriod[15] = 0;\n        Planets.planetRotationPeriod[16] = 0;\n        Planets.planetRotationPeriod[17] = 0;\n        Planets.planetRotationPeriod[18] = 0;\n        Planets.planetRotationPeriod[SolarSystemObjects.earth] = 0.99726968;\n    }\n    if (Planets._planetScales == null) {\n        Planets._planetScales = new Array(20);\n    }\n    if (Planets._planet3dLocations == null) {\n        Planets._planet3dLocations = new Array(20);\n    }\n    if (Settings.get_active().get_actualPlanetScale()) {\n        Planets._planetScales[0] = 0.5;\n        Planets._planetScales[1] = 0.25;\n        Planets._planetScales[2] = 0.25;\n        Planets._planetScales[3] = 0.25;\n        Planets._planetScales[4] = 0.25;\n        Planets._planetScales[5] = 0.5;\n        Planets._planetScales[6] = 0.25;\n        Planets._planetScales[7] = 0.25;\n        Planets._planetScales[8] = 0.25;\n        Planets._planetScales[9] = 0.25;\n        Planets._planetScales[10] = 0.25;\n        Planets._planetScales[11] = 0.25;\n        Planets._planetScales[12] = 0.25;\n        Planets._planetScales[13] = 0.25;\n        Planets._planetScales[14] = 0.25;\n        Planets._planetScales[15] = 0.25;\n        Planets._planetScales[16] = 0.25;\n        Planets._planetScales[17] = 0.25;\n        Planets._planetScales[18] = 0.5;\n        Planets._planetScales[SolarSystemObjects.earth] = 0.25;\n    }\n    else {\n        for (var i = 0; i < 20; i++) {\n            if (i < 10) {\n                Planets._planetScales[i] = 0.25;\n            }\n            else {\n                Planets._planetScales[i] = 0.1;\n            }\n        }\n\n        // Make Sun and Saturn bigger\n        Planets._planetScales[SolarSystemObjects.sun] = 0.5;\n        Planets._planetScales[SolarSystemObjects.saturn] = 0.5;\n        Planets._planetScales[SolarSystemObjects.sunEclipsed] = 0.5;\n    }\n    Planets._planetDrawOrder = {};\n    Planets._planetLocations = new Array(20);\n    var center = new Vector3d();\n    var planetCenter = 0;\n    if (planetCenter > -1) {\n        var centerRaDec = AstroCalc.getPlanet(Planets._jNow, planetCenter, (threeDee) ? 0 : SpaceTimeController.get_location().get_lat(), (threeDee) ? 0 : SpaceTimeController.get_location().get_lng(), (threeDee) ? -6378149 : SpaceTimeController.get_altitude());\n        center = Coordinates.raDecTo3dAu(centerRaDec.RA, centerRaDec.dec, centerRaDec.distance);\n    }\n    Planets._planet3dLocations[SolarSystemObjects.earth] = Vector3d.create(-center.x, -center.y, -center.z);\n    Planets._planet3dLocations[SolarSystemObjects.earth].rotateX(Planets._obliquity);\n    for (var i = 0; i < 18; i++) {\n        Planets._planetLocations[i] = AstroCalc.getPlanet(Planets._jNow, i, (threeDee) ? 0 : SpaceTimeController.get_location().get_lat(), (threeDee) ? 0 : SpaceTimeController.get_location().get_lng(), (threeDee) ? -6378149 : SpaceTimeController.get_altitude());\n        Planets._planet3dLocations[i] = Coordinates.raDecTo3dAu(Planets._planetLocations[i].RA, Planets._planetLocations[i].dec, Planets._planetLocations[i].distance);\n        Planets._planet3dLocations[i].subtract(center);\n        Planets._planet3dLocations[i].rotateX(Planets._obliquity);\n        if (Settings.get_active().get_actualPlanetScale()) {\n            Planets._planetScales[i] = (2 * Math.atan(0.5 * (Planets._planetDiameters[i] / Planets._planetLocations[i].distance))) / Math.PI * 180;\n        }\n        if (Settings.get_active().get_solarSystemScale() !== 1) {\n            var id = i;\n            switch (id) {\n                case SolarSystemObjects.moon:\n                    var parent = Planets._planet3dLocations[SolarSystemObjects.earth];\n                    Planets._planet3dLocations[i].subtract(parent);\n                    Planets._planet3dLocations[i].multiply(Settings.get_active().get_solarSystemScale() / 2);\n                    Planets._planet3dLocations[i].add(parent);\n                    break;\n                case SolarSystemObjects.io:\n                case SolarSystemObjects.europa:\n                case SolarSystemObjects.ganymede:\n                case SolarSystemObjects.callisto:\n                    var parent = Planets._planet3dLocations[SolarSystemObjects.jupiter];\n                    Planets._planet3dLocations[i].subtract(parent);\n                    Planets._planet3dLocations[i].multiply(Settings.get_active().get_solarSystemScale());\n                    Planets._planet3dLocations[i].add(parent);\n                    break;\n                default:\n                    break;\n            }\n        }\n        var finalDistance = -Planets._planetLocations[i].distance;\n        while (ss.keyExists(Planets._planetDrawOrder, finalDistance)) {\n            finalDistance += 1E-10;\n        }\n        Planets._planetDrawOrder[finalDistance] = i;\n    }\n    Planets._planetLocations[SolarSystemObjects.sunEclipsed] = Planets._planetLocations[SolarSystemObjects.sun];\n    Planets._planetScales[SolarSystemObjects.sun] *= 2;\n    Planets._planetScales[SolarSystemObjects.sunEclipsed] = Planets._planetScales[SolarSystemObjects.sun];\n    Planets._planetScales[SolarSystemObjects.saturn] = Planets._planetScales[SolarSystemObjects.saturn] * 2;\n    Planets._lastUpdate = SpaceTimeController.get_now();\n};\n\nPlanets.planetsReady = function () { };\n\nPlanets.updateOrbits = function (planetCenter) {\n    try {\n        Planets._obliquity = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow()) * Planets.RC;\n        if (planetCenter !== Planets._lastPlanetCenterID) {\n            Planets._orbits = null;\n        }\n        Planets._lastPlanetCenterID = planetCenter;\n        if (Planets._orbits == null) {\n            if (planetCenter < 0) {\n                Planets._eclipticTilt = Matrix3d.get_identity();\n            }\n            else {\n                Planets._eclipticTilt = Matrix3d.get_identity();\n                Planets._eclipticTilt = Matrix3d._rotationX(Planets._obliquity);\n            }\n            if (Planets.planetOrbitalYears == null) {\n                Planets.planetOrbitalYears = new Array(20);\n                Planets.planetOrbitalYears[0] = 1;\n                Planets.planetOrbitalYears[1] = 0.241;\n                Planets.planetOrbitalYears[2] = 0.615;\n                Planets.planetOrbitalYears[3] = 1.881;\n                Planets.planetOrbitalYears[4] = 11.87;\n                Planets.planetOrbitalYears[5] = 29.45;\n                Planets.planetOrbitalYears[6] = 84.07;\n                Planets.planetOrbitalYears[7] = 164.9;\n                Planets.planetOrbitalYears[8] = 248.1;\n                Planets.planetOrbitalYears[9] = 27.3 / 365.25;\n                Planets.planetOrbitalYears[10] = 16.6890184 / 365.25;\n                Planets.planetOrbitalYears[11] = 3.551181 / 365.25;\n                Planets.planetOrbitalYears[12] = 7.15455296 / 365.25;\n                Planets.planetOrbitalYears[13] = 16.6890184 / 365.25;\n                Planets.planetOrbitalYears[SolarSystemObjects.earth] = 1;\n            }\n            if (!Planets.readOrbits()) {\n                Planets._orbits = new Array(20);\n                for (var i = 1; i < 20; i++) {\n                    Planets._orbits[i] = new Array(Planets._orbitalSampleRate);\n                    if (i < 9 || i === SolarSystemObjects.earth) {\n                        for (var j = 0; j < Planets._orbitalSampleRate; j++) {\n                            var centerId = planetCenter;\n                            var now = Planets._jNow + ((Planets.planetOrbitalYears[i] * 365.25 / Planets._orbitalSampleRate) * (j - (Planets._orbitalSampleRate / 2)));\n                            var center = new Vector3d();\n                            if (i === SolarSystemObjects.moone) {\n                                centerId = -1;\n                            }\n                            else if (i > 9 && i < 14) {\n                                centerId = 4;\n                            }\n                            if (centerId > -1) {\n                                var centerRaDec = AstroCalc.getPlanet(now, centerId, 0, 0, -6378149);\n                                center = Coordinates.raDecTo3dAu(centerRaDec.RA, centerRaDec.dec, centerRaDec.distance);\n                            }\n                            if (i !== SolarSystemObjects.earth) {\n                                var planetRaDec = AstroCalc.getPlanet(now, i, 0, 0, -6378149);\n                                Planets._orbits[i][j] = Coordinates.raDecTo3dAu(planetRaDec.RA, planetRaDec.dec, planetRaDec.distance);\n                                Planets._orbits[i][j].subtract(center);\n                            }\n                            else {\n                                Planets._orbits[i][j] = Vector3d.create(-center.x, -center.y, -center.z);\n                            }\n                            Planets._orbits[i][j].rotateX(Planets._obliquity);\n                        }\n                        Planets._orbits[i][Planets._orbitalSampleRate - 1] = Planets._orbits[i][0];\n                    }\n                }\n                Planets.dumpOrbitsFile();\n            }\n        }\n    }\n    finally { }\n};\n\nPlanets.readOrbits = function () {\n    // This function ought to fetch wwtweb/catalog.aspx?Q=orbitsbin and set\n    // `orbits`, see Windows client code.\n    return false;\n};\n\nPlanets.dumpOrbitsFile = function () { };\n\nPlanets.drawPlanets = function (renderContext, opacity) {\n    if (Planets._planetTextures == null) {\n        Planets._loadPlanetTextures();\n    }\n\n    // Get Moon Phase\n\n    var elong = Planets._geocentricElongation(Planets._planetLocations[9].RA, Planets._planetLocations[9].dec, Planets._planetLocations[0].RA, Planets._planetLocations[0].dec);\n    var raDif = Planets._planetLocations[9].RA - Planets._planetLocations[0].RA;\n    if (Planets._planetLocations[9].RA < Planets._planetLocations[0].RA) {\n        raDif += 24;\n    }\n    var phaseAngle = Planets._phaseAngle(elong, Planets._planetLocations[9].distance, Planets._planetLocations[0].distance);\n    var limbAngle = Planets._positionAngle(Planets._planetLocations[9].RA, Planets._planetLocations[9].dec, Planets._planetLocations[0].RA, Planets._planetLocations[0].dec);\n    if (raDif < 12) {\n        phaseAngle += 180;\n    }\n\n    // Check for solar eclipse\n\n    var dista = (Math.abs(Planets._planetLocations[9].RA - Planets._planetLocations[0].RA) * 15) * Math.cos(Coordinates.degreesToRadians(Planets._planetLocations[0].dec));\n    var distb = Math.abs(Planets._planetLocations[9].dec - Planets._planetLocations[0].dec);\n    var sunMoonDist = Math.sqrt(dista * dista + distb * distb);\n    var eclipse = false;\n    var coronaOpacity = 0;\n    var moonEffect = (Planets._planetScales[9] / 2 - sunMoonDist);\n    var darkLimb = Math.min(32, ss.truncate((sunMoonDist * 32)));\n    if (moonEffect > (Planets._planetScales[0] / 4)) {\n        eclipse = true;\n        coronaOpacity = Math.min(1, (moonEffect - (Planets._planetScales[0] / 2)) / 0.001);\n        Planets._drawPlanet(renderContext, 18, coronaOpacity);\n    }\n    var $enum1 = ss.enumerate(ss.keys(Planets._planetDrawOrder));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var planetId = Planets._planetDrawOrder[key];\n        Planets._drawPlanet(renderContext, planetId, 1);\n    }\n    return true;\n};\n\nPlanets._loadPlanetTextures = function () {\n    // Note: these PNG files are fairly large and are loaded at\n    // startup of the web client, adding nontrivially to the needed\n    // network traffic. JPGs are a lot smaller, but unfortunately the\n    // transparency support is important here since we don't want\n    // black boxes surrounding all of our planets when they're viewed\n    // in the sky.\n\n    var baseUrl = URLHelpers.singleton.engineAssetUrl('');\n\n    Planets._planetTextures = new Array(20);\n    Planets._planetTextures[0] = Texture.fromUrl(baseUrl + 'sun.png');\n    Planets._planetTextures[1] = Texture.fromUrl(baseUrl + 'mercury.png');\n    Planets._planetTextures[2] = Texture.fromUrl(baseUrl + 'venus.png');\n    Planets._planetTextures[3] = Texture.fromUrl(baseUrl + 'mars.png');\n    Planets._planetTextures[4] = Texture.fromUrl(baseUrl + 'jupiter.png');\n    Planets._planetTextures[5] = Texture.fromUrl(baseUrl + 'saturn.png');\n    Planets._planetTextures[6] = Texture.fromUrl(baseUrl + 'uranus.png');\n    Planets._planetTextures[7] = Texture.fromUrl(baseUrl + 'neptune.png');\n    Planets._planetTextures[8] = Texture.fromUrl(baseUrl + 'pluto.png');\n    Planets._planetTextures[9] = Texture.fromUrl(baseUrl + 'moon.png');\n    Planets._planetTextures[10] = Texture.fromUrl(baseUrl + 'io.png');\n    Planets._planetTextures[11] = Texture.fromUrl(baseUrl + 'europa.png');\n    Planets._planetTextures[12] = Texture.fromUrl(baseUrl + 'ganymede.png');\n    Planets._planetTextures[13] = Texture.fromUrl(baseUrl + 'callisto.png');\n    Planets._planetTextures[14] = Texture.fromUrl(baseUrl + 'moonshadow.png');\n    Planets._planetTextures[15] = Texture.fromUrl(baseUrl + 'moonshadow.png');\n    Planets._planetTextures[16] = Texture.fromUrl(baseUrl + 'moonshadow.png');\n    Planets._planetTextures[17] = Texture.fromUrl(baseUrl + 'moonshadow.png');\n    Planets._planetTextures[18] = Texture.fromUrl(baseUrl + 'sunCorona.png');\n    Planets._planetTextures[SolarSystemObjects.earth] = Texture.fromUrl(baseUrl + 'earth.png');\n};\n\n// Compute the rotation of a planet at the J2000 epoch.\n//\n// The rotation at some instant in can be computed by multiplying the\n// the returned matrix by Y(W * t)\nPlanets.getPlanetOrientationAtEpoch = function (planetID) {\n    var m = Matrix3d.get_identity();\n\n    // Rotational elements for the planets are in the form used by the\n    // IAU Working Group on Cartographic Coordinates and Rotational Elements:\n    //\n    // a : Right ascension of north pole\n    // d : Declination of north pole\n    // W0 : Prime meridian angle at epoch J2000.0\n    //\n    // The canonical Euler angle sequence is: Z(a - 90) * X(90 - d) * Z(W0)\n    //\n    // The following transformations are required to convert it to a rotation for WWT:\n    //    * WWT uses a coordinate system with +Y = ecliptic north, +X = equinox of J2000\n    //      This system is rotated 90 degrees about the X axis from the standard ecliptic\n    //      system based on the Earth Mean Equinox of J2000 (EMEJ2000)\n    //    * WWT uses row vectors instead of column vectors, so the order of transformations\n    //      is reversed\n    //    * WWT has planet maps with longitude 0 at the edge rather than the middle. This\n    //      requires an extra 180 degrees to be added to W0\n    var obliquityOfEcliptic = 23.4392794;\n\n    if (planetID === SolarSystemObjects.earth) {\n        // Different calculation for Earth, since the meridian offset\n        // is already included in the Mean Sidereal Time function.\n        //\n        // equatorial to ecliptic transformation\n        m._multiply(Matrix3d._rotationX(obliquityOfEcliptic * Planets.RC));\n    } else {\n        // 90 degree rotation from WWT coord sys\n        m._multiply(Matrix3d._rotationX(-90 * Planets.RC));\n\n        m._multiply(Matrix3d._rotationZ((180 + Planets._planetAngles[planetID].primeMeridian) * Planets.RC));\n        m._multiply(Matrix3d._rotationX((90 - Planets._planetAngles[planetID].poleDec) * Planets.RC));\n        m._multiply(Matrix3d._rotationZ((Planets._planetAngles[planetID].poleRa - 90) * Planets.RC));\n        m._multiply(Matrix3d._rotationX(obliquityOfEcliptic * Planets.RC)); // equatorial to ecliptic transformation\n\n        // 90 degree rotation back to WWT coord sys\n        m._multiply(Matrix3d._rotationX(90 * Planets.RC));\n    }\n    return m;\n};\n\nPlanets.setupPlanetMatrix = function (renderContext, planetID, centerPoint, makeFrustum) {\n    var matNonRotating = renderContext.get_world().clone();\n    Planets._setupMatrixForPlanetGeometry(renderContext, planetID, centerPoint, makeFrustum);\n\n    if (planetID === SolarSystemObjects.sun) {\n        // Don't apply the Sun's orientation to its non-rotating frame; this means that\n        // the Sun's reference frame will be the ecliptic frame.\n        var radius = Planets.getAdjustedPlanetRadius(planetID);\n        matNonRotating.scale(Vector3d.create(radius, radius, radius));\n        var translation = Vector3d.subtractVectors(Planets._planet3dLocations[planetID], centerPoint);\n        matNonRotating._multiply(Matrix3d.translation(translation));\n        renderContext.set_worldBaseNonRotating(matNonRotating);\n    }\n};\n\nPlanets._setupMatrixForPlanetGeometry = function (renderContext, planetID, centerPoint, makeFrustum) {\n    var radius = Planets.getAdjustedPlanetRadius(planetID);\n    var rotationCurrent = 0;\n    if (planetID === SolarSystemObjects.earth) {\n        rotationCurrent = Math.PI + Coordinates.mstFromUTC2(SpaceTimeController.get_now(), 0) / 180 * Math.PI;\n    }\n    else {\n        rotationCurrent = Math.PI + (((Planets._jNow - 2451545) / Planets.planetRotationPeriod[planetID]) * Math.PI * 2) % (Math.PI * 2);\n    }\n    if (planetID === 9) {\n        rotationCurrent -= Math.PI / 2;\n    }\n    var matLocal = renderContext.get_world().clone();\n    var matNonRotating = renderContext.get_world().clone();\n    var translation = Vector3d.subtractVectors(Planets._planet3dLocations[planetID], centerPoint);\n    var orientationAtEpoch = Planets.getPlanetOrientationAtEpoch(planetID);\n    matLocal.scale(Vector3d.create(radius, radius, radius));\n    matLocal._multiply(Matrix3d._rotationY(-rotationCurrent));\n    matLocal._multiply(orientationAtEpoch);\n    if (planetID === renderContext.viewCamera.target) {\n        Planets.earthMatrix = Matrix3d.get_identity();\n        Planets.earthMatrix._multiply(Matrix3d._rotationY(-rotationCurrent));\n        Planets.earthMatrix._multiply(orientationAtEpoch);\n        Planets.earthMatrixInv = Planets.earthMatrix.clone();\n        Planets.earthMatrixInv.invert();\n    }\n    matLocal._multiply(Matrix3d.translation(translation));\n    renderContext.set_world(matLocal);\n    renderContext.set_worldBase(renderContext.get_world().clone());\n    renderContext.set_nominalRadius(Planets.getPlanetRadiusInMeters(planetID));\n    if (makeFrustum) {\n        renderContext.makeFrustum();\n    }\n    matNonRotating.scale(Vector3d.create(radius, radius, radius));\n    matNonRotating._multiply(orientationAtEpoch);\n    matNonRotating._multiply(Matrix3d.translation(translation));\n    renderContext.set_worldBaseNonRotating(matNonRotating);\n    return rotationCurrent;\n};\n\n// Get the position of a Solar System object using a 'direct' calculation that\n// avoids including an aberration correction.\n//\n// The returned position is in ecliptic coordinate system with the origin at the center\n// of the parent body (i.e. the Sun for planets, a planet for moons). The position of moons\n// is _not_ modified by the SolarSystemScale, making it possible to use function to\n// a calculate valid Keplerian elements.\nPlanets.getPlanetPositionDirect = function (id, jd) {\n    var L = 0;\n    var B = 0;\n    var R = 0;\n    switch (id) {\n        case 1:\n            L = CAAMercury.eclipticLongitude(jd);\n            B = CAAMercury.eclipticLatitude(jd);\n            R = CAAMercury.radiusVector(jd);\n            break;\n        case 2:\n            L = CAAVenus.eclipticLongitude(jd);\n            B = CAAVenus.eclipticLatitude(jd);\n            R = CAAVenus.radiusVector(jd);\n            break;\n        case SolarSystemObjects.earth:\n            L = CAAEarth.eclipticLongitude(jd);\n            B = CAAEarth.eclipticLatitude(jd);\n            R = CAAEarth.radiusVector(jd);\n            break;\n        case 3:\n            L = CAAMars.eclipticLongitude(jd);\n            B = CAAMars.eclipticLatitude(jd);\n            R = CAAMars.radiusVector(jd);\n            break;\n        case 4:\n            L = CAAJupiter.eclipticLongitude(jd);\n            B = CAAJupiter.eclipticLatitude(jd);\n            R = CAAJupiter.radiusVector(jd);\n            break;\n        case 5:\n            L = CAASaturn.eclipticLongitude(jd);\n            B = CAASaturn.eclipticLatitude(jd);\n            R = CAASaturn.radiusVector(jd);\n            break;\n        case 6:\n            L = CAAUranus.eclipticLongitude(jd);\n            B = CAAUranus.eclipticLatitude(jd);\n            R = CAAUranus.radiusVector(jd);\n            break;\n        case 7:\n            L = CAANeptune.eclipticLongitude(jd);\n            B = CAANeptune.eclipticLatitude(jd);\n            R = CAANeptune.radiusVector(jd);\n            break;\n        case 8:\n            L = CAAPluto.eclipticLongitude(jd);\n            B = CAAPluto.eclipticLatitude(jd);\n            R = CAAPluto.radiusVector(jd);\n            break;\n        case 9:\n            L = CAAMoon.eclipticLongitude(jd);\n            B = CAAMoon.eclipticLatitude(jd);\n            R = CAAMoon.radiusVector(jd) / 149598000;\n            break;\n        case 10:\n            var galileanInfo = GM.calculate(jd);\n            var position = galileanInfo.satellite1.eclipticRectangularCoordinates;\n            return Vector3d.create(position.x, position.z, position.y);\n        case 11:\n            var galileanInfo = GM.calculate(jd);\n            var position = galileanInfo.satellite2.eclipticRectangularCoordinates;\n            return Vector3d.create(position.x, position.z, position.y);\n        case 12:\n            var galileanInfo = GM.calculate(jd);\n            var position = galileanInfo.satellite3.eclipticRectangularCoordinates;\n            return Vector3d.create(position.x, position.z, position.y);\n        case 13:\n            var galileanInfo = GM.calculate(jd);\n            var position = galileanInfo.satellite4.eclipticRectangularCoordinates;\n            return Vector3d.create(position.x, position.z, position.y);\n    }\n\n    // Enabling this code transforms planet positions from the mean ecliptic/equinox of\n    // date to the J2000 ecliptic. It is necessary because the VSOP87D series used\n    // for planet positions is in the mean-of-date frame. The transformation is currently\n    // disabled in order to better match planet positions calculated elsewhere in the code.\n    //CAA2DCoordinate prec = CAAPrecession.PrecessEcliptic(L, B, jd, 2451545.0);\n    //L = prec.X;\n    //B = prec.Y;\n\n    L = Coordinates.degreesToRadians(L);\n    B = Coordinates.degreesToRadians(B);\n    var eclPos = Vector3d.create(Math.cos(L) * Math.cos(B) * R, Math.sin(L) * Math.cos(B) * R, Math.sin(B) * R);\n\n\n    // Transform from the ecliptic of date to the J2000 ecliptic; this transformation should be deleted\n    // once the precession is turned on.\n    var eclipticOfDateRotation = (Coordinates.meanObliquityOfEcliptic(jd) - Coordinates.meanObliquityOfEcliptic(2451545)) * Planets.RC;\n    eclPos.rotateX(eclipticOfDateRotation);\n    return Vector3d.create(eclPos.x, eclPos.z, eclPos.y);\n};\n\nPlanets._stateVectorToKeplerian = function (position, velocity, mu) {\n    // Work in units of km and seconds\n    var r = Vector3d.scale(position, 149598000);\n    var v = Vector3d.scale(Vector3d.scale(velocity, 1 / 86400), 149598000);\n    var rmag = r.length();\n    var vmag = v.length();\n    var sma = 1 / (2 / rmag - vmag * vmag / mu);\n\n    // h is the orbital angular momentum vector\n    var h = Vector3d.cross(r, v);\n\n    // ecc is the eccentricity vector, which points from the\n    // planet at periapsis to the center point.\n    var ecc = Vector3d.subtractVectors(Vector3d.scale(Vector3d.cross(v, h), 1 / mu), Vector3d.scale(r, 1 / rmag));\n    var e = ecc.length();\n\n    h.normalize();\n    ecc.normalize();\n\n    // h, s, and ecc are orthogonal vectors that define a coordinate\n    // system. h is normal to the orbital plane.\n    var s = Vector3d.cross(h, ecc);\n\n    // Calculate the sine and cosine of the true anomaly\n    r.normalize();\n    var cosNu = Vector3d.dot(ecc, r);\n    var sinNu = Vector3d.dot(s, r);\n\n    // Compute the eccentric anomaly\n    var E = Math.atan2(Math.sqrt(1 - e * e) * sinNu, e + cosNu);\n    var elements = new KeplerianElements();\n\n    // Create a rotation matrix given the three orthogonal vectors:\n    //   ecc - eccentricity vector\n    //   s   - in the orbital plane, perpendicular to ecc\n    //   h   - angular momentum vector, normal to orbital plane\n    elements.orientation = Matrix3d.create(ecc.x, ecc.y, ecc.z, 0, s.x, s.y, s.z, 0, h.x, h.y, h.z, 0, 0, 0, 0, 1);\n    elements.a = sma;\n    elements.e = e;\n    elements.ea = E;\n    return elements;\n};\n\nPlanets.getAdjustedPlanetRadius = function (planetID) {\n    if (planetID > Planets._planetDiameters.length - 1) {\n        planetID = SolarSystemObjects.earth;\n    }\n    var diameter = Planets._planetDiameters[planetID];\n    var radius = (diameter / 2);\n    if (!!planetID) {\n        radius = radius * (1 + (3 * (Settings.get_active().get_solarSystemScale() - 1)));\n    }\n    else {\n        radius = radius * (1 + (0.3 * (Settings.get_active().get_solarSystemScale() - 1)));\n    }\n    return radius;\n};\n\nPlanets.getPlanetRadiusInMeters = function (planetID) {\n    if (planetID > Planets._planetDiameters.length - 1) {\n        planetID = SolarSystemObjects.earth;\n    }\n    var diameter = Planets._planetDiameters[planetID];\n    return (diameter / 2) * 149598000 * 1000;\n};\n\nPlanets._drawPlanet = function (renderContext, planetID, opacity) {\n    var planetPosition = Planets._planetLocations[planetID];\n    if (((planetID < 14) && Planets._planetScales[planetID] < (renderContext.viewCamera.zoom / 6) / 400)) {\n        if (planetID < 10 || ((planetID < 14) && Planets._planetScales[planetID] > (renderContext.viewCamera.zoom / 6) / 6400)) {\n            var point = Coordinates.raDecTo3d(planetPosition.RA, planetPosition.dec);\n            BasePlanets.drawPointPlanet(renderContext, point, 3, Planets.planetColors[planetID], false);\n        }\n        return;\n    }\n    var brush = null;\n    if (planetID < 10 || planetID === 18) {\n        brush = Planets._planetTextures[planetID];\n    }\n    else if (planetID < 14) {\n        if (Planets._planetLocations[planetID].eclipsed) {\n            brush = Planets._planetTextures[15];\n        } else {\n            if (Settings.get_active().get_showMoonsAsPointSource()) {\n                brush = Planets._planetTextures[14];\n            }\n            else {\n                brush = Planets._planetTextures[planetID];\n            }\n        }\n    }\n    else {\n        if (!Planets._planetLocations[planetID].shadow) {\n            return;\n        }\n\n        //Shadows of moons\n        brush = Planets._planetTextures[15];\n    }\n    if (renderContext.gl != null) {\n        if (Planets._planetPoints == null) {\n            Planets._planetPoints = new Array(4);\n            for (var i = 0; i < 4; i++) {\n                Planets._planetPoints[i] = new PositionColoredTextured();\n            }\n        }\n        var radius = (Planets._planetScales[planetID] / 2);\n        var raRadius = (radius / Math.cos(planetPosition.dec / 180 * Math.PI));\n        Planets._planetPoints[0].position = Coordinates.raDecTo3dAu((planetPosition.RA - (raRadius / 15)), planetPosition.dec + radius, 1);\n        Planets._planetPoints[0].tu = 0;\n        Planets._planetPoints[0].tv = 1;\n        Planets._planetPoints[0].color = Colors.get_white();\n        Planets._planetPoints[1].position = Coordinates.raDecTo3dAu((planetPosition.RA - (raRadius / 15)), planetPosition.dec - radius, 1);\n        Planets._planetPoints[1].tu = 0;\n        Planets._planetPoints[1].tv = 0;\n        Planets._planetPoints[1].color = Colors.get_white();\n        Planets._planetPoints[2].position = Coordinates.raDecTo3dAu((planetPosition.RA + (raRadius / 15)), planetPosition.dec + radius, 1);\n        Planets._planetPoints[2].tu = 1;\n        Planets._planetPoints[2].tv = 1;\n        Planets._planetPoints[2].color = Colors.get_white();\n        Planets._planetPoints[3].position = Coordinates.raDecTo3dAu((planetPosition.RA + (raRadius / 15)), planetPosition.dec - radius, 1);\n        Planets._planetPoints[3].tu = 1;\n        Planets._planetPoints[3].tv = 0;\n        Planets._planetPoints[3].color = Colors.get_white();\n        Planets._planetSprite.draw(renderContext, Planets._planetPoints, 4, brush, true, 1);\n    }\n    else {\n        var center = Coordinates.raDecTo3d(planetPosition.RA, planetPosition.dec);\n        var rad = Planets._planetScales[planetID] / (renderContext.get_fovScale() / 3600) / 2;\n        var screenSpacePnt = renderContext.WVP.transform(center);\n        if (screenSpacePnt.z < 0) {\n            return;\n        }\n        if (Vector3d.dot(renderContext.get_viewPoint(), center) < 0.55) {\n            return;\n        }\n        var ctx = renderContext.device;\n        ctx.save();\n        ctx.globalAlpha = opacity;\n        ctx.beginPath();\n        ctx.arc(screenSpacePnt.x, screenSpacePnt.y, rad, 0, Math.PI * 2, true);\n        ctx.lineWidth = 0;\n        ctx.closePath();\n        ctx.clip();\n        ctx.drawImage(brush.imageElement, screenSpacePnt.x - rad, screenSpacePnt.y - rad, rad * 2, rad * 2);\n        ctx.globalAlpha = 1;\n        ctx.restore();\n    }\n};\n\nPlanets._drawPlanetPhase = function (renderContext, planetID, phase, angle, dark) { };\n\nPlanets._geocentricElongation = function (ObjectAlpha, ObjectDelta, SunAlpha, SunDelta) {\n    //Convert the RA's to radians\n    ObjectAlpha = Coordinates.degreesToRadians(ObjectAlpha * 15);\n    SunAlpha = Coordinates.degreesToRadians(SunAlpha * 15);\n\n    //Convert the declinations to radians\n    ObjectDelta = Coordinates.degreesToRadians(ObjectDelta);\n    SunDelta = Coordinates.degreesToRadians(SunDelta);\n    return Coordinates.radiansToDegrees(Math.acos(Math.sin(SunDelta) * Math.sin(ObjectDelta) + Math.cos(SunDelta) * Math.cos(ObjectDelta) * Math.cos(SunAlpha - ObjectAlpha)));\n};\n\nPlanets._phaseAngle = function (GeocentricElongation, EarthObjectDistance, EarthSunDistance) {\n    //Convert from degrees to radians\n    GeocentricElongation = Coordinates.degreesToRadians(GeocentricElongation);\n\n    return Coordinates.mapTo0To360Range(Coordinates.radiansToDegrees(Math.atan2(EarthSunDistance * Math.sin(GeocentricElongation), EarthObjectDistance - EarthSunDistance * Math.cos(GeocentricElongation))));\n};\n\nPlanets._positionAngle = function (Alpha0, Delta0, Alpha, Delta) {\n    Alpha0 = Coordinates.hoursToRadians(Alpha0);\n    Alpha = Coordinates.hoursToRadians(Alpha);\n    Delta0 = Coordinates.degreesToRadians(Delta0);\n    Delta = Coordinates.degreesToRadians(Delta);\n    return Coordinates.mapTo0To360Range(Coordinates.radiansToDegrees(Math.atan2(Math.cos(Delta0) * Math.sin(Alpha0 - Alpha), Math.sin(Delta0) * Math.cos(Delta) - Math.cos(Delta0) * Math.sin(Delta) * Math.cos(Alpha0 - Alpha))));\n};\n\nvar Planets$ = {};\n\nregisterType(\"Planets\", [Planets, Planets$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The 3D planet-related code.\n//\n// This does not include the 3D planet-rendering code, which has been separated\n// into `planets_3d.js`.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { Vector3d, Vector4d, Matrix3d, PositionTexture } from \"./double3d.js\";\nimport { WEBGL } from \"./graphics/webgl_constants.js\";\nimport { PositionTextureVertexBuffer } from \"./graphics/gl_buffers.js\";\nimport { OrbitLineList } from \"./graphics/primitives3d.js\";\nimport { Texture } from \"./graphics/texture.js\";\nimport { TileShader } from \"./graphics/shaders.js\";\nimport { Util } from \"./baseutil.js\";\nimport { BasePlanets } from \"./baseplanets.js\";\nimport { globalWWTControl } from \"./data_globals.js\";\nimport { Color, Colors } from \"./color.js\";\nimport { Planets } from \"./planets.js\";\nimport { RenderTriangle } from \"./render_triangle.js\";\nimport { Settings } from \"./settings.js\";\nimport { Triangle } from \"./triangle.js\";\nimport { UiTools } from \"./ui_tools.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { EllipseRenderer } from \"./layers/orbit.js\";\nimport { LayerManager } from \"./layers/layer_manager.js\";\n\n\n// 3D planet code. This used to live in `Planets.cs` with the 2D planet.\n\nexport function Planets3d() { }\n\nPlanets3d._ringsTriangleLists = new Array(2);\nPlanets3d._ringImage = null;\nPlanets3d._triangleCountRings = 192 + 1 * 2;\nPlanets3d._ringsVertexBuffer = null;\n\nPlanets3d.getImageSetNameNameFrom3dId = function (id) {\n    switch (id) {\n        case 0:\n            return 'Sun';\n        case 1:\n            return 'Mercury';\n        case 2:\n            return 'Venus';\n        case 3:\n            return 'Visible Imagery';\n        case 4:\n            return 'Jupiter';\n        case 5:\n            return 'Saturn';\n        case 6:\n            return 'Uranus';\n        case 7:\n            return 'Neptune';\n        case 8:\n            return 'Pluto';\n        case 9:\n            return 'Moon';\n        case 10:\n            return 'Io (Jupiter)';\n        case 11:\n            return 'Europa (Jupiter)';\n        case 12:\n            return 'Ganymede (Jupiter)';\n        case 13:\n            return 'Callisto (Jupiter)';\n        case 19:\n            return 'Bing Maps Aerial';\n        default:\n            return '';\n    }\n};\n\nPlanets3d.initPlanetResources = function (renderContext) { };\n\nPlanets3d.drawPlanets3D = function (renderContext, opacity, centerPoint) {\n    Planets3d.initPlanetResources(renderContext);\n    var distss = UiTools.solarSystemToMeters(renderContext.get_solarSystemCameraDistance());\n    var moonFade = Math.min(1, Math.max(Util.log10(distss) - 7.3, 0));\n    var fade = Math.min(1, Math.max(Util.log10(distss) - 8.6, 0));\n    if (Settings.get_active().get_solarSystemOrbits() && fade > 0) {\n        for (var ii = 1; ii < 10; ii++) {\n            var id = ii;\n            if (ii === 9) {\n                id = 19;\n            }\n            var angle = Math.atan2(Planets._planet3dLocations[id].z, Planets._planet3dLocations[id].x);\n            Planets3d._drawSingleOrbit(renderContext, Planets.planetColors[id], id, centerPoint, angle, Planets._planet3dLocations[id], fade);\n        }\n        var mid = 9;\n        Planets3d._drawSingleOrbit(renderContext, Planets.planetColors[mid], mid, centerPoint, 0, Planets._planet3dLocations[mid], fade);\n    }\n    ss.clearKeys(Planets._drawOrder);\n    var camera = renderContext.cameraPosition.copy();\n    for (var planetId = 0; planetId < 14; planetId++) {\n        // If we're using realistic lighting and this is an eclipsed\n        // moon, don't draw it at all. This is slightly suboptimal\n        // since, if you're looking at the moon, you'll suddenly be able\n        // to see the stars through it. In principle we should do\n        // something like keep on drawing it, but as an all-black\n        // sphere.\n        if (!(Settings.get_active().get_solarSystemLighting() && Planets._planetLocations[planetId].eclipsed)) {\n            var distVector = Vector3d.subtractVectors(camera, Vector3d.subtractVectors(Planets._planet3dLocations[planetId], centerPoint));\n            if (!ss.keyExists(Planets._drawOrder, distVector.length())) {\n                Planets._drawOrder[distVector.length()] = planetId;\n            }\n        }\n    }\n    var distVectorEarth = Vector3d.subtractVectors(camera, Vector3d.subtractVectors(Planets._planet3dLocations[19], centerPoint));\n    if (!ss.keyExists(Planets._drawOrder, distVectorEarth.length())) {\n        Planets._drawOrder[distVectorEarth.length()] = 19;\n    }\n    var $enum1 = ss.enumerate(ss.keys(Planets._drawOrder));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var planetId = Planets._drawOrder[key];\n        Planets3d._drawPlanet3d(renderContext, planetId, centerPoint);\n    }\n    return true;\n};\n\nPlanets3d._drawSingleOrbit = function (renderContext, eclipticColor, id, centerPoint, startAngle, planetNow, opacity) {\n    // mu is the standard gravitational parameter GM, where G\n    // is the gravitational constant and M is the mass of the\n    // central body.\n    const muSun = 1.327124400188e11; // km^3/s^2\n    const muEarth = 3.9860044189e5;\n    const muMoon = 4.9027779e3;\n    const muJupiter = 1.26686534e8;\n\n    if (opacity < 0.01) {\n        return;\n    }\n    if (renderContext.gl == null) {\n        var count = Planets._orbitalSampleRate;\n        var planetDropped = false;\n        var viewPoint = renderContext.get_viewPoint();\n        var ctx = renderContext.device;\n        ctx.save();\n        ctx.strokeStyle = eclipticColor.toString();\n        ctx.lineWidth = 2;\n        ctx.globalAlpha = 1;\n        var point = new Vector3d();\n        var pointTest = new Vector3d();\n        var lastPoint = new Vector3d();\n        var firstPoint = true;\n        var translate = Matrix3d.translation(Vector3d.negate(centerPoint));\n        var mat = Matrix3d.multiplyMatrix(translate, renderContext.WVP);\n        var matWV = Matrix3d.multiplyMatrix(translate, renderContext.WV);\n        for (var i = 0; i < count; i++) {\n            var pnt = Planets._orbits[id][i];\n            var angle = (Math.atan2(Planets._orbits[id][i].z, Planets._orbits[id][i].x) + Math.PI * 2 - startAngle) % (Math.PI * 2);\n            var alpha = ss.truncate((angle / (Math.PI * 2) * 255));\n            var alphaD = alpha / 255;\n            if (alpha < 2 && !planetDropped) {\n                pnt = planetNow;\n                alphaD = 1;\n            }\n            pointTest = matWV.transform(pnt);\n            point = mat.transform(pnt);\n            if (pointTest.z > 0) {\n                if (firstPoint) {\n                    firstPoint = false;\n                }\n                else {\n                    ctx.beginPath();\n                    ctx.globalAlpha = alphaD * opacity;\n                    ctx.moveTo(lastPoint.x, lastPoint.y);\n                    ctx.lineTo(point.x, point.y);\n                    ctx.stroke();\n                }\n            }\n            lastPoint = point;\n        }\n        ctx.restore();\n    }\n    else {\n        if (id !== 9) {\n            var count = Planets._orbitalSampleRate;\n            var planetDropped = false;\n            var viewPoint = renderContext.get_viewPoint();\n            var point = new Vector3d();\n            var pointTest = new Vector3d();\n            var lastPoint = new Vector3d();\n            var lastColor = new Color();\n            var firstPoint = true;\n            var list = new OrbitLineList();\n            for (var i = 0; i < count; i++) {\n                var pnt = Planets._orbits[id][i].copy();\n                var angle = (Math.atan2(pnt.z, pnt.x) + Math.PI * 2 - startAngle) % (Math.PI * 2);\n                var alpha = ss.truncate((angle / (Math.PI * 2) * 255));\n                var alphaD = alpha / 255;\n                var color = Color.fromArgb(alpha, eclipticColor.r, eclipticColor.g, eclipticColor.b);\n                if (alpha < 2 && !planetDropped && !firstPoint) {\n                    pnt = Vector3d.subtractVectors(planetNow, centerPoint);\n                    alphaD = 1;\n                    alpha = 255;\n                    color.a = 255;\n                    lastColor.a = 255;\n                    list.addLine(lastPoint, pnt.copy(), lastColor._clone(), color._clone());\n                    lastColor.a = 0;\n                    color.a = 0;\n                    pnt = Planets._orbits[id][i].copy();\n                    planetDropped = true;\n                }\n                pnt = Vector3d.subtractVectors(pnt, centerPoint);\n                if (firstPoint) {\n                    firstPoint = false;\n                }\n                else {\n                    list.addLine(lastPoint, pnt, lastColor, color);\n                }\n                lastPoint = pnt;\n                lastColor = color._clone();\n            }\n            list.drawLines(renderContext, 1, Colors.get_white());\n            list.clear();\n        } else {\n            var mu = 0;\n            switch (id) {\n                case 9:\n                    mu = muEarth + muMoon;\n                    break;\n                case 10:\n                case 11:\n                case 12:\n                case 13:\n                    mu = muJupiter;\n                    break;\n                default:\n                    mu = muSun;\n                    break;\n            }\n            var deltaT = 1 / 1440 * 0.1;\n            var r0 = Planets.getPlanetPositionDirect(id, Planets._jNow);\n            var r1 = Planets.getPlanetPositionDirect(id, Planets._jNow - deltaT);\n            var v = Vector3d.scale(Vector3d.subtractVectors(r0, r1), 1 / deltaT);\n            var elements = Planets._stateVectorToKeplerian(r0, v, mu);\n            Planets3d._drawSingleOrbitElements(renderContext, eclipticColor, id, centerPoint, startAngle, planetNow, elements);\n        }\n    }\n};\n\nPlanets3d._drawSingleOrbitElements = function (renderContext, eclipticColor, id, centerPoint, xstartAngle, planetNow, el) {\n    var scaleFactor;\n    switch (id) {\n        case 9:\n            if (Settings.get_active().get_solarSystemScale() > 1) {\n                scaleFactor = Settings.get_active().get_solarSystemScale() / 2;\n            }\n            else {\n                scaleFactor = 1;\n            }\n            break;\n        case 10:\n        case 11:\n        case 12:\n        case 13:\n            scaleFactor = Settings.get_active().get_solarSystemScale();\n            break;\n        default:\n            scaleFactor = 1;\n            break;\n    }\n    var translation = Vector3d.negate(centerPoint);\n    if (id === 9) {\n        translation.add(Planets._planet3dLocations[19]);\n    }\n    else if (id === 10 || id === 11 || id === 12 || id === 13) {\n        translation.add(Planets._planet3dLocations[4]);\n    }\n    var currentPosition = Vector3d.subtractVectors(planetNow, centerPoint);\n    var worldMatrix = Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(el.orientation, Matrix3d.translation(translation)), renderContext.get_world());\n    EllipseRenderer.drawEllipseWithPosition(renderContext, el.a / 149598000 * scaleFactor, el.e, el.ea, eclipticColor, worldMatrix, currentPosition);\n};\n\nPlanets3d.isPlanetInFrustum = function (renderContext, rad) {\n    var frustum = renderContext.get_frustum();\n    var center = Vector3d.create(0, 0, 0);\n    var centerV4 = new Vector4d(0, 0, 0, 1);\n    for (var i = 0; i < 6; i++) {\n        if (frustum[i].dot(centerV4) + rad < 0) {\n            return false;\n        }\n    }\n    return true;\n};\n\nPlanets3d._drawPlanet3d = function (renderContext, planetID, centerPoint) {\n    if (planetID === 0) {\n        TileShader.minLightingBrightness = 1;\n    }\n    else {\n        TileShader.minLightingBrightness = 0.025;\n        if (planetID === 19) {\n            TileShader.atmosphereColor = Color.fromArgb(255, 65, 157, 217);\n        } else {\n            TileShader.atmosphereColor = Color.fromArgb(0, 0, 0, 0);\n        }\n    }\n    var matOld = renderContext.get_world();\n    var matOldBase = renderContext.get_worldBase();\n    var matOldNonRotating = renderContext.get_worldBaseNonRotating();\n    var radius = Planets.getAdjustedPlanetRadius(planetID);\n    Planets.setupPlanetMatrix(renderContext, planetID, centerPoint, true);\n    var planetWidth = 1;\n    if (planetID === 5) {\n        planetWidth = 3;\n    }\n    if (Planets3d.isPlanetInFrustum(renderContext, planetWidth)) {\n        // Save all matrices modified by SetupMatrix...\n        var matOld2 = renderContext.get_world();\n        var matOldBase2 = renderContext.get_worldBase();\n        var matOldNonRotating2 = renderContext.get_worldBaseNonRotating();\n        var sun = Planets._planet3dLocations[0].copy();\n        var planet = Planets._planet3dLocations[planetID].copy();\n        sun = matOld.transform(sun);\n        planet = matOld.transform(planet);\n        renderContext.set_world(matOld);\n        renderContext.set_worldBase(matOldBase);\n        renderContext.set_worldBaseNonRotating(matOldNonRotating);\n        Planets._setupMatrixForPlanetGeometry(renderContext, planetID, centerPoint, true);\n        var sunPosition = Vector3d.subtractVectors(sun, planet);\n        sunPosition.normalize();\n        renderContext.set_sunPosition(sunPosition);\n        TileShader.sunPosition = Vector3d.subtractVectors(Planets._planet3dLocations[0], planet);\n        var loc = Vector3d.subtractVectors(Planets._planet3dLocations[planetID], centerPoint);\n        loc.subtract(renderContext.cameraPosition);\n        var dist = loc.length();\n        var sizeIndexParam = (2 * Math.atan(0.5 * (radius / dist))) / Math.PI * 180;\n        var sizeIndex = 0;\n        if (sizeIndexParam > 10.5) {\n            sizeIndex = 0;\n        } else if (sizeIndexParam > 3.9) {\n            sizeIndex = 1;\n        } else if (sizeIndexParam > 0.72) {\n            sizeIndex = 2;\n        } else if (sizeIndexParam > 0.05) {\n            sizeIndex = 3;\n        } else {\n            sizeIndex = 4;\n        }\n        if (planetID === 19 && sizeIndex < 2) {\n            var width = Settings.get_active().get_solarSystemScale() * 1E-05;\n        }\n        if (sizeIndex < 4) {\n            var oldLighting = renderContext.lighting;\n            if (planetID === 5) {\n                if (renderContext.gl == null) {\n                    renderContext.lighting = false;\n                    // DRAW BACK HALF OF RINGS\n                    Planets3d.drawSaturnsRings(renderContext, false, dist);\n                    renderContext.lighting = oldLighting;\n                }\n            }\n            if (!planetID) {\n                renderContext.lighting = false;\n            }\n            Planets3d._drawSphere(renderContext, planetID);\n            if (planetID === 5) {\n                if (renderContext.gl == null) {\n                    renderContext.lighting = false;\n                    // DRAW FRONT HALF OF RINGS\n                    Planets3d.drawSaturnsRings(renderContext, true, dist);\n                }\n                else {\n                    renderContext.lighting = false;\n                    Planets3d._drawRings(renderContext);\n                    renderContext.lighting = oldLighting;\n                }\n            }\n            renderContext.lighting = oldLighting;\n        } else {\n            if (!planetID) {\n                BasePlanets.drawPointPlanet(renderContext, new Vector3d(), (10 * Planets._planetDiameters[planetID]), Planets.planetColors[planetID], true);\n            }\n            else if (planetID < 9 || planetID === 19) {\n                var size = (800 * Planets._planetDiameters[planetID]);\n                BasePlanets.drawPointPlanet(renderContext, new Vector3d(), Math.max(0.05, Math.min(0.1, size)), Planets.planetColors[planetID], true);\n            }\n            else if (sizeIndexParam > 0.002) {\n                var size = (800 * Planets._planetDiameters[planetID]);\n                BasePlanets.drawPointPlanet(renderContext, new Vector3d(), Math.max(0.05, Math.min(0.1, size)), Planets.planetColors[planetID], true);\n            }\n        }\n    }\n    LayerManager._draw(renderContext, 1, false, Planets.getNameFrom3dId(planetID), true, false);\n    renderContext.set_world(matOld);\n    renderContext.set_worldBase(matOldBase);\n    renderContext.set_worldBaseNonRotating(matOldNonRotating);\n};\n\nPlanets3d.drawSaturnsRings = function (renderContext, front, distance) {\n    if (Planets3d._ringsTriangleLists[0] == null) {\n        Planets3d._ringImage = document.createElement('img');\n        var xdomimg = Planets3d._ringImage;\n        xdomimg.crossOrigin = 'anonymous';\n        Planets3d._ringImage.src = URLHelpers.singleton.engineAssetUrl('saturnringsshadow.png');\n        Planets3d._ringsTriangleLists[0] = [];\n        Planets3d._ringsTriangleLists[1] = [];\n        var ringSize = 2.25;\n        var TopLeft = Vector3d.create(-ringSize, 0, -ringSize);\n        var TopRight = Vector3d.create(ringSize, 0, -ringSize);\n        var BottomLeft = Vector3d.create(-ringSize, 0, ringSize);\n        var BottomRight = Vector3d.create(ringSize, 0, ringSize);\n        var center = Vector3d.create(0, 0, 0);\n        var leftCenter = Vector3d.create(-ringSize, 0, 0);\n        var topCenter = Vector3d.create(0, 0, -ringSize);\n        var bottomCenter = Vector3d.create(0, 0, ringSize);\n        var rightCenter = Vector3d.create(ringSize, 0, 0);\n        var level = 6;\n        var vertexList;\n        vertexList = [];\n        var Width = 1024;\n        var Height = 1024;\n        vertexList.push(PositionTexture.createPosSize(TopLeft, 0, 0, Width, Height));\n        vertexList.push(PositionTexture.createPosSize(TopRight, 1, 0, Width, Height));\n        vertexList.push(PositionTexture.createPosSize(BottomLeft, 0, 1, Width, Height));\n        vertexList.push(PositionTexture.createPosSize(BottomRight, 1, 1, Width, Height));\n        var childTriangleList = [];\n        childTriangleList.push(Triangle.create(0, 2, 1));\n        childTriangleList.push(Triangle.create(2, 3, 1));\n        var count = 5;\n        while (count-- > 1) {\n            var newList = [];\n            var $enum1 = ss.enumerate(childTriangleList);\n            while ($enum1.moveNext()) {\n                var tri = $enum1.current;\n                tri.subDivideNoNormalize(newList, vertexList);\n            }\n            childTriangleList = newList;\n        }\n        var miter = 0.6 / (Width / 256);\n        var $enum2 = ss.enumerate(childTriangleList);\n        while ($enum2.moveNext()) {\n            var tri = $enum2.current;\n            var p1 = vertexList[tri.a];\n            var p2 = vertexList[tri.b];\n            var p3 = vertexList[tri.c];\n            Planets3d._ringsTriangleLists[0].push(RenderTriangle.createWithMiter(p1, p2, p3, Planets3d._ringImage, level, miter));\n        }\n    }\n    if (renderContext.gl == null) {\n        var cam = renderContext.cameraPosition;\n        var test = new Vector3d();\n        var worldLocal = Matrix3d.multiplyMatrix(Matrix3d._rotationY(Math.atan2(renderContext.get_sunPosition().x, renderContext.get_sunPosition().z)), renderContext.get_worldBaseNonRotating());\n        var wv = Matrix3d.multiplyMatrix(worldLocal, renderContext.get_view());\n        var wvp = Matrix3d.multiplyMatrix(wv, renderContext.get_projection());\n        var Width = renderContext.width;\n        var Height = renderContext.height;\n        wvp.scale(Vector3d.create(Width / 2, -Height / 2, 1));\n        wvp.translate(Vector3d.create(Width / 2, Height / 2, 0));\n        var td = 0;\n        for (var i = 0; i < 2; i++) {\n            var $enum3 = ss.enumerate(Planets3d._ringsTriangleLists[0]);\n            while ($enum3.moveNext()) {\n                var tri = $enum3.current;\n                test = wv.transform(tri.a.position);\n                td = test.length();\n                var draw = td > distance;\n                if (front) {\n                    draw = !draw;\n                }\n                if (draw) {\n                    tri.opacity = 1;\n                    tri.draw(renderContext.device, wvp);\n                }\n            }\n            RenderTriangle.cullInside = !RenderTriangle.cullInside;\n        }\n    }\n    else { }\n};\n\n// Various input layouts used in 3D solar system mode\n// TODO Replace with an input layout cache\n\nPlanets3d._drawRings = function (renderContext) {\n    Planets3d._initRings();\n    TileShader.use(renderContext, Planets3d._ringsVertexBuffer.vertexBuffer, null, Planets._ringsTexture.texture2d, 1, false, Vector3d.zero);\n    renderContext.gl.drawArrays(WEBGL.TRIANGLE_STRIP, 0, Planets3d._triangleCountRings);\n};\n\nPlanets3d._initRings = function () {\n    if (Planets3d._ringsVertexBuffer != null) {\n        return;\n    }\n    Planets._ringsTexture = Texture.fromUrl(URLHelpers.singleton.engineAssetUrl('saturnringsstrip.png'));\n    var inner = 1.113;\n    var outer = 2.25;\n    Planets3d._ringsVertexBuffer = new PositionTextureVertexBuffer(((192 + 1) * 2));\n    Planets3d._triangleCountRings = (192 + 1) * 2;\n    var verts = Planets3d._ringsVertexBuffer.lock();\n    var radStep = Math.PI * 2 / 192;\n    var index = 0;\n    for (var x = 0; x <= 192; x += 2) {\n        var rads1 = x * radStep;\n        var rads2 = (x + 1) * radStep;\n        verts[index] = new PositionTexture();\n        verts[index].position = Vector3d.create((Math.cos(rads1) * inner), 0, (Math.sin(rads1) * inner));\n        verts[index].tu = 1;\n        verts[index].tv = 0;\n        index++;\n        verts[index] = new PositionTexture();\n        verts[index].position = Vector3d.create((Math.cos(rads1) * outer), 0, (Math.sin(rads1) * outer));\n        verts[index].tu = 0;\n        verts[index].tv = 0;\n        index++;\n        verts[index] = new PositionTexture();\n        verts[index].position = Vector3d.create((Math.cos(rads2) * inner), 0, (Math.sin(rads2) * inner));\n        verts[index].tu = 1;\n        verts[index].tv = 1;\n        index++;\n        verts[index] = new PositionTexture();\n        verts[index].position = Vector3d.create((Math.cos(rads2) * outer), 0, (Math.sin(rads2) * outer));\n        verts[index].tu = 0;\n        verts[index].tv = 1;\n        index++;\n    }\n    Planets3d._ringsVertexBuffer.unlock();\n};\n\nPlanets3d._drawSphere = function (renderContext, planetID) {\n    var planetName = Planets3d.getImageSetNameNameFrom3dId(planetID);\n    var planet = globalWWTControl.getImagesetByName(planetName);\n    if (planet == null) {\n        planet = globalWWTControl.getImagesetByName('Bing Maps Aerial');\n    }\n    if (planet != null) {\n        renderContext.drawImageSet(planet, 100);\n        if (planetID === 19) {\n        }\n        return;\n    }\n};\n\nregisterType(\"Planets3d\", [Planets3d, {}, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A tile that plots tabular data.\n//\n// This tile class is not implemented for the WebGL rendering backend!\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { tileCacheRemoveFromQueue, tileCacheGetTile, tileUvMultiple } from \"./render_globals.js\";\nimport { Vector2d, Vector3d, PositionTexture } from \"./double3d.js\";\nimport { BasePlanets } from \"./baseplanets.js\";\nimport { Coordinates } from \"./coordinates.js\";\nimport { Star } from \"./star.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { WebFile } from \"./web_file.js\";\nimport { Tile } from \"./tile.js\";\n\n\n// wwtlib.PlotTile\n\nexport function PlotTile() {\n    this._topDown$1 = true;\n    this.backslash = false;\n    this._vertexList$1 = null;\n    this._childTriangleList$1 = null;\n    this._stars$1 = [];\n    this._subDivisionLevel$1 = 4;\n    this._subDivided$1 = false;\n    Tile.call(this);\n}\n\nPlotTile.create = function (level, xc, yc, dataset, parent) {\n    var temp = new PlotTile();\n    temp.parent = parent;\n    temp.level = level;\n    temp.tileX = xc;\n    temp.tileY = yc;\n    temp.dataset = dataset;\n    temp._topDown$1 = !dataset.get_bottomsUp();\n    if (temp.tileX !== xc) {\n        alert('bad');\n    }\n    if (!!dataset.get_meanRadius()) {\n        temp.set__demScaleFactor(dataset.get_meanRadius());\n    }\n    else {\n        if (!dataset.get_dataSetType()) {\n            temp.set__demScaleFactor(6371000);\n        } else {\n            temp.set__demScaleFactor(3396010);\n        }\n    }\n    temp.computeBoundingSphere();\n    return temp;\n};\n\nvar PlotTile$ = {\n    computeBoundingSphere: function () {\n        this._initializeGrids$1();\n        this.topLeft = this.bounds[0 + 3 * 0].position.copy();\n        this.bottomRight = this.bounds[2 + 3 * 2].position.copy();\n        this.topRight = this.bounds[2 + 3 * 0].position.copy();\n        this.bottomLeft = this.bounds[0 + 3 * 2].position.copy();\n        this.calcSphere();\n    },\n\n    renderPart: function (renderContext, part, opacity, combine) {\n        if (renderContext.gl != null) {\n            //todo draw in WebGL\n        } else {\n            if (!part) {\n                var $enum1 = ss.enumerate(this._stars$1);\n                while ($enum1.moveNext()) {\n                    var star = $enum1.current;\n                    var radDec = 25 / Math.pow(1.6, star.magnitude);\n                    BasePlanets.drawPointPlanet(renderContext, star.position, radDec, star.col, false);\n                }\n            }\n        }\n    },\n\n    requestImage: function () {\n        if (!this.downloading && !this.readyToRender) {\n            this.downloading = true;\n            this._webFile$1 = new WebFile(URLHelpers.singleton.rewrite(this.get_URL(), 0));\n            this._webFile$1.onStateChange = ss.bind('fileStateChange', this);\n            this._webFile$1.send();\n        }\n    },\n\n    fileStateChange: function () {\n        if (this._webFile$1.get_state() === 2) {\n            this.downloading = false;\n            this.readyToRender = false;\n            this.errored = true;\n            this.requestPending = false;\n            tileCacheRemoveFromQueue(this.get_key(), true);\n        } else if (this._webFile$1.get_state() === 1) {\n            this.texReady = true;\n            this.downloading = false;\n            this.errored = false;\n            this.readyToRender = this.texReady && (this.demReady || !this.demTile);\n            this.requestPending = false;\n            tileCacheRemoveFromQueue(this.get_key(), true);\n            this._loadData$1(this._webFile$1.getText());\n        }\n    },\n\n    _loadData$1: function (data) {\n        var rows = ss.replaceString(data, '\\r\\n', '\\n').split('\\n');\n        var firstRow = true;\n        var type = 0;\n        var star = null;\n        var $enum1 = ss.enumerate(rows);\n        while ($enum1.moveNext()) {\n            var row = $enum1.current;\n            if (firstRow) {\n                firstRow = false;\n                continue;\n            }\n            if (ss.trim(row).length > 5) {\n                star = new Star(row);\n                star.position = Coordinates.raDecTo3dAu(star.RA, star.dec, 1);\n                this._stars$1.push(star);\n            }\n        }\n    },\n\n    isPointInTile: function (lat, lng) {\n        if (!this.level) {\n            return true;\n        }\n        if (this.level === 1) {\n            if ((lng >= 0 && lng <= 90) && (!this.tileX && this.tileY === 1)) {\n                return true;\n            }\n            if ((lng > 90 && lng <= 180) && (this.tileX === 1 && this.tileY === 1)) {\n                return true;\n            }\n            if ((lng < 0 && lng >= -90) && (!this.tileX && !this.tileY)) {\n                return true;\n            }\n            if ((lng < -90 && lng >= -180) && (this.tileX === 1 && !this.tileY)) {\n                return true;\n            }\n            return false;\n        }\n        if (!this.demReady || this.demData == null) {\n            return false;\n        }\n        var testPoint = Coordinates.geoTo3dDouble(-lat, lng);\n        var top = this._isLeftOfHalfSpace$1(this.topLeft.copy(), this.topRight.copy(), testPoint);\n        var right = this._isLeftOfHalfSpace$1(this.topRight.copy(), this.bottomRight.copy(), testPoint);\n        var bottom = this._isLeftOfHalfSpace$1(this.bottomRight.copy(), this.bottomLeft.copy(), testPoint);\n        var left = this._isLeftOfHalfSpace$1(this.bottomLeft.copy(), this.topLeft.copy(), testPoint);\n        if (top && right && bottom && left) {\n            return true;\n        }\n        return false;\n    },\n\n    _isLeftOfHalfSpace$1: function (pntA, pntB, pntTest) {\n        pntA.normalize();\n        pntB.normalize();\n        var cross = Vector3d.cross(pntA, pntB);\n        var dot = Vector3d.dot(cross, pntTest);\n        return dot < 0;\n    },\n\n    _initializeGrids$1: function () {\n        this._vertexList$1 = [];\n        this._childTriangleList$1 = new Array(4);\n        this._childTriangleList$1[0] = [];\n        this._childTriangleList$1[1] = [];\n        this._childTriangleList$1[2] = [];\n        this._childTriangleList$1[3] = [];\n        this.bounds = new Array(9);\n        if (this.level > 0) {\n            if (this.parent == null) {\n                this.parent = tileCacheGetTile(this.level - 1, this.tileX / 2, this.tileY / 2, this.dataset, null);\n            }\n            var parent = this.parent;\n            var xIndex = this.tileX % 2;\n            var yIndex = this.tileY % 2;\n            if (this.level > 1) {\n                this.backslash = parent.backslash;\n            }\n            else {\n                this.backslash = (xIndex === 1 ^ yIndex === 1) === 1;\n            }\n            this.bounds[0 + 3 * 0] = parent.bounds[xIndex + 3 * yIndex].copy();\n            this.bounds[1 + 3 * 0] = this._midpoint$1(parent.bounds[xIndex + 3 * yIndex], parent.bounds[xIndex + 1 + 3 * yIndex]);\n            this.bounds[2 + 3 * 0] = parent.bounds[xIndex + 1 + 3 * yIndex].copy();\n            this.bounds[0 + 3 * 1] = this._midpoint$1(parent.bounds[xIndex + 3 * yIndex], parent.bounds[xIndex + 3 * (yIndex + 1)]);\n            if (this.backslash) {\n                this.bounds[1 + 3 * 1] = this._midpoint$1(parent.bounds[xIndex + 3 * yIndex], parent.bounds[xIndex + 1 + 3 * (yIndex + 1)]);\n            }\n            else {\n                this.bounds[1 + 3 * 1] = this._midpoint$1(parent.bounds[xIndex + 1 + 3 * yIndex], parent.bounds[xIndex + 3 * (yIndex + 1)]);\n            }\n            this.bounds[2 + 3 * 1] = this._midpoint$1(parent.bounds[xIndex + 1 + 3 * yIndex], parent.bounds[xIndex + 1 + 3 * (yIndex + 1)]);\n            this.bounds[0 + 3 * 2] = parent.bounds[xIndex + 3 * (yIndex + 1)].copy();\n            this.bounds[1 + 3 * 2] = this._midpoint$1(parent.bounds[xIndex + 3 * (yIndex + 1)], parent.bounds[xIndex + 1 + 3 * (yIndex + 1)]);\n            this.bounds[2 + 3 * 2] = parent.bounds[xIndex + 1 + 3 * (yIndex + 1)].copy();\n            this.bounds[0 + 3 * 0].tu = 0 * tileUvMultiple;\n            this.bounds[0 + 3 * 0].tv = 0 * tileUvMultiple;\n            this.bounds[1 + 3 * 0].tu = 0.5 * tileUvMultiple;\n            this.bounds[1 + 3 * 0].tv = 0 * tileUvMultiple;\n            this.bounds[2 + 3 * 0].tu = 1 * tileUvMultiple;\n            this.bounds[2 + 3 * 0].tv = 0 * tileUvMultiple;\n            this.bounds[0 + 3 * 1].tu = 0 * tileUvMultiple;\n            this.bounds[0 + 3 * 1].tv = 0.5 * tileUvMultiple;\n            this.bounds[1 + 3 * 1].tu = 0.5 * tileUvMultiple;\n            this.bounds[1 + 3 * 1].tv = 0.5 * tileUvMultiple;\n            this.bounds[2 + 3 * 1].tu = 1 * tileUvMultiple;\n            this.bounds[2 + 3 * 1].tv = 0.5 * tileUvMultiple;\n            this.bounds[0 + 3 * 2].tu = 0 * tileUvMultiple;\n            this.bounds[0 + 3 * 2].tv = 1 * tileUvMultiple;\n            this.bounds[1 + 3 * 2].tu = 0.5 * tileUvMultiple;\n            this.bounds[1 + 3 * 2].tv = 1 * tileUvMultiple;\n            this.bounds[2 + 3 * 2].tu = 1 * tileUvMultiple;\n            this.bounds[2 + 3 * 2].tv = 1 * tileUvMultiple;\n        } else {\n            this.bounds[0 + 3 * 0] = PositionTexture.create(0, -1, 0, 0, 0);\n            this.bounds[1 + 3 * 0] = PositionTexture.create(0, 0, 1, 0.5, 0);\n            this.bounds[2 + 3 * 0] = PositionTexture.create(0, -1, 0, 1, 0);\n            this.bounds[0 + 3 * 1] = PositionTexture.create(-1, 0, 0, 0, 0.5);\n            this.bounds[1 + 3 * 1] = PositionTexture.create(0, 1, 0, 0.5, 0.5);\n            this.bounds[2 + 3 * 1] = PositionTexture.create(1, 0, 0, 1, 0.5);\n            this.bounds[0 + 3 * 2] = PositionTexture.create(0, -1, 0, 0, 1);\n            this.bounds[1 + 3 * 2] = PositionTexture.create(0, 0, -1, 0.5, 1);\n            this.bounds[2 + 3 * 2] = PositionTexture.create(0, -1, 0, 1, 1);\n        }\n    },\n\n    _midpoint$1: function (positionNormalTextured, positionNormalTextured_2) {\n        var a1 = Vector3d.lerp(positionNormalTextured.position, positionNormalTextured_2.position, 0.5);\n        var a1uv = Vector2d.lerp(Vector2d.create(positionNormalTextured.tu, positionNormalTextured.tv), Vector2d.create(positionNormalTextured_2.tu, positionNormalTextured_2.tv), 0.5);\n        a1.normalize();\n        return PositionTexture.createPos(a1, a1uv.x, a1uv.y);\n    },\n\n    createGeometry: function (renderContext) {\n        if (this.geometryCreated) {\n            return true;\n        }\n        this.geometryCreated = true;\n        Tile.prototype.createGeometry.call(this, renderContext);\n        return true;\n    },\n\n    cleanUp: function (removeFromParent) {\n        Tile.prototype.cleanUp.call(this, removeFromParent);\n        if (this._vertexList$1 != null) {\n            this._vertexList$1 = null;\n        }\n        if (this._childTriangleList$1 != null) {\n            this._childTriangleList$1 = null;\n        }\n        this._subDivided$1 = false;\n        this.demArray = null;\n    }\n};\n\nregisterType(\"PlotTile\", [PlotTile, PlotTile$, Tile]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A lat/lon datatype. This is unused in the engine, but preserved for API\n// compatibility.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { HealpixUtils } from \"./healpix_utils.js\";\n\n\n// wwtlib.Pointing\n\nexport function Pointing() {\n    // Colatitude in radians (0 is North Pole; Pi is South Pole)\n    this.theta = 0;\n\n    // Longitude in radians\n    this.phi = 0;\n}\n\nPointing.create = function (theta, phi) {\n    var temp = new Pointing();\n    temp.theta = theta;\n    temp.phi = phi;\n    return temp;\n};\n\nvar Pointing$ = {\n    normalizeTheta: function () {\n        this.theta = HealpixUtils.fmodulo(this.theta, 2 * Math.PI);\n        if (this.theta > Math.PI) {\n            this.phi += Math.PI;\n            this.theta = 2 * Math.PI - this.theta;\n        }\n    },\n\n    normalize: function () {\n        this.normalizeTheta();\n        this.phi = HealpixUtils.fmodulo(this.phi, 2 * Math.PI);\n    },\n\n    toString: function () {\n        var s = new ss.StringBuilder();\n        s.append('ptg(');\n        s.append(this.theta);\n        s.append(',');\n        s.append(this.phi);\n        s.append(')');\n        return s.toString();\n    }\n};\n\nregisterType(\"Pointing\", [Pointing, Pointing$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The main engine renderer implementation.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { Vector3d, Matrix3d, PlaneD } from \"./double3d.js\";\nimport { globalWWTControl, makeNewHipsProperties } from \"./data_globals.js\";\nimport { set_tileDemEnabled, set_tileUvMultiple, tileCacheGetTile } from \"./render_globals.js\";\nimport { Util } from \"./baseutil.js\";\nimport { WEBGL } from \"./graphics/webgl_constants.js\";\nimport { TileShader } from \"./graphics/shaders.js\";\nimport { CameraParameters } from \"./camera_parameters.js\";\nimport { Colors } from \"./color.js\";\nimport { Coordinates } from \"./coordinates.js\";\nimport { ProjectionType, ImageSetType } from \"./imageset.js\";\nimport { Planets } from \"./planets.js\";\nimport { RenderTriangle } from \"./render_triangle.js\";\nimport { Settings } from \"./settings.js\";\nimport { SpaceTimeController } from \"./space_time_controller.js\";\nimport { CatalogSpreadSheetLayer } from \"./layers/spreadsheet_layer.js\";\nimport { LayerManager } from \"./layers/layer_manager.js\";\n\n\n// wwtlib.InViewReturnMessage\n\nexport function InViewReturnMessage() {\n    this.aborted = false;\n}\n\nvar InViewReturnMessage$ = {};\n\nregisterType(\"InViewReturnMessage\", [InViewReturnMessage, InViewReturnMessage$, null]);\n\n\n// wwtlib.RenderContext\n\nexport function RenderContext() {\n    this.height = 0;\n    this.width = 0;\n    this.lighting = false;\n    this._viewPoint = new Vector3d();\n    this.space = false;\n    this._fovAngle = 0;\n    this._fovScale = 0;\n    this._nominalRadius = 6378137;\n    this._mainTexture = null;\n    this.viewMover = null;\n    this.viewCamera = new CameraParameters();\n    this.targetCamera = new CameraParameters();\n    this.alt = 0;\n    this.az = 0;\n    this.targetAlt = 0;\n    this.targetAz = 0;\n    this._backgroundImageset = null;\n    this._foregroundImageset = null;\n    this._activeCatalogHipsImagesets = [];\n    this._targetHeight = 1;\n    this.targetAltitude = 0;\n    this._galactic = true;\n    this._galacticMatrix = Matrix3d.create(-0.4838350155, -0.0548755604, -0.8734370902, 0, 0.7469822445, 0.4941094279, -0.44482963, 0, 0.4559837762, -0.867666149, -0.1980763734, 0, 0, 0, 0, 1);\n    this._firstTimeInit = false;\n    this._useSolarSystemTilt = true;\n    this.customTrackingParams = new CameraParameters();\n    this._cameraOffset = new Vector3d();\n    this._fovLocal = (Math.PI / 4);\n    this.perspectiveFov = Math.PI / 4;\n    this.nearPlane = 0;\n    this._frustumDirty = true;\n    this._frustum = new Array(6);\n    this._ambientLightColor = Colors.get_black();\n    this._hemiLightColor = Colors.get_black();\n    this._hemiLightUp = new Vector3d();\n    this._sunlightColor = Colors.get_white();\n    this._sunPosition = new Vector3d();\n    this._reflectedLightColor = Colors.get_black();\n    this._reflectedLightPosition = new Vector3d();\n    this._occludingPlanetRadius = 0;\n    this._occludingPlanetPosition = new Vector3d();\n    this._lightingStateDirty = true;\n    this._twoSidedLighting = false;\n    this.cameraPosition = new Vector3d();\n    this._skyColor = 'Blue';\n    for (var i = 0; i < 6; i++) {\n        this._frustum[i] = new PlaneD(0, 0, 0, 0);\n    }\n}\n\nRenderContext.back = 0;\n\nRenderContext.create = function (device) {\n    var temp = new RenderContext();\n    temp.device = device;\n    temp.viewCamera.zoom = 700;\n    temp.viewCamera.target = 65536;\n    return temp;\n};\n\nRenderContext.getTilesYForLevel = function (layer, level) {\n    var maxY = 1;\n    switch (layer.get_projection()) {\n        case ProjectionType.mercator:\n            maxY = Math.pow(2, level);\n            break;\n        case ProjectionType.equirectangular:\n            maxY = (Math.pow(2, level) * (180 / layer.get_baseTileDegrees()));\n            break;\n        case ProjectionType.tangent:\n            maxY = Math.pow(2, level);\n            break;\n        case ProjectionType.spherical:\n            maxY = 1;\n            break;\n        case ProjectionType.healpix:\n            maxY = 4 * Math.pow(2, level);\n            break;\n        default:\n            maxY = Math.pow(2, level);\n            break;\n    }\n    if (maxY === Number.POSITIVE_INFINITY) {\n        maxY = 1;\n    }\n    return maxY;\n};\n\nRenderContext.getTilesXForLevel = function (layer, level) {\n    var maxX = 1;\n    switch (layer.get_projection()) {\n        case ProjectionType.plotted:\n        case ProjectionType.toast:\n            maxX = Math.pow(2, level);\n            break;\n        case ProjectionType.mercator:\n            maxX = Math.pow(2, level) * ss.truncate((layer.get_baseTileDegrees() / 360));\n            break;\n        case ProjectionType.equirectangular:\n            maxX = Math.pow(2, level) * ss.truncate((360 / layer.get_baseTileDegrees()));\n            break;\n        case ProjectionType.tangent:\n            if (layer.get_widthFactor() === 1) {\n                maxX = Math.pow(2, level) * 2;\n            }\n            else {\n                maxX = Math.pow(2, level);\n            }\n            break;\n        case ProjectionType.skyImage:\n            maxX = 1;\n            break;\n        case ProjectionType.spherical:\n            maxX = 1;\n            break;\n        case ProjectionType.healpix:\n            maxX = Math.pow(2, level) * 3;\n            break;\n        default:\n            maxX = Math.pow(2, level) * 2;\n            break;\n    }\n    return maxX;\n};\n\nvar RenderContext$ = {\n    save: function () {\n        if (this.gl != null) {\n        } else {\n            this.device.save();\n        }\n    },\n\n    restore: function () {\n        if (this.gl != null) {\n        } else {\n            this.device.restore();\n        }\n    },\n\n    clear: function () {\n        if (this.gl != null) {\n            this.gl.viewport(0, 0, ss.truncate(this.width), ss.truncate(this.height));\n            this.gl.clear(WEBGL.COLOR_BUFFER_BIT | WEBGL.DEPTH_BUFFER_BIT);\n        } else {\n            this.device.save();\n            this.device.fillStyle = 'black';\n            this.device.fillRect(0, 0, this.width, this.height);\n            this.device.restore();\n        }\n    },\n\n    get_viewPoint: function () {\n        return this._viewPoint;\n    },\n\n    get_RA: function () {\n        return ((((180 - (this.viewCamera.lng - 180)) / 15) % 24) + 48) % 24;\n    },\n\n    rAtoViewLng: function (ra) {\n        return 180 - (ra / 24 * 360) - 180;\n    },\n\n    get_dec: function () {\n        return this.viewCamera.lat;\n    },\n\n    get_fovAngle: function () {\n        return this._fovAngle;\n    },\n\n    get_fovScale: function () {\n        return this._fovScale;\n    },\n\n    set_fovScale: function (value) {\n        this._fovScale = value;\n        return value;\n    },\n\n    get_view: function () {\n        return this._view;\n    },\n\n    set_view: function (value) {\n        this._view = value;\n        this._frustumDirty = true;\n        return value;\n    },\n\n    get_viewBase: function () {\n        return this._viewBase;\n    },\n\n    set_viewBase: function (value) {\n        this._viewBase = value;\n        return value;\n    },\n\n    get_projection: function () {\n        return this._projection;\n    },\n\n    set_projection: function (value) {\n        this._projection = value;\n        this._frustumDirty = true;\n        return value;\n    },\n\n    get_world: function () {\n        return this._world;\n    },\n\n    set_world: function (value) {\n        this._world = value;\n        this._frustumDirty = true;\n        return value;\n    },\n\n    _getScreenTexture: function () {\n        //todo add code to capture screen\n        var tex = null;\n        return tex;\n    },\n\n    get_worldBase: function () {\n        return this._worldBase;\n    },\n\n    set_worldBase: function (value) {\n        this._worldBase = value;\n        return value;\n    },\n\n    get_worldBaseNonRotating: function () {\n        return this._worldBaseNonRotating;\n    },\n\n    set_worldBaseNonRotating: function (value) {\n        this._worldBaseNonRotating = value;\n        return value;\n    },\n\n    get_nominalRadius: function () {\n        return this._nominalRadius;\n    },\n\n    set_nominalRadius: function (value) {\n        this._nominalRadius = value;\n        return value;\n    },\n\n    get_mainTexture: function () {\n        return this._mainTexture;\n    },\n\n    set_mainTexture: function (value) {\n        if (value != null) {\n            this._mainTexture = value;\n            this.gl.bindTexture(WEBGL.TEXTURE_2D, this._mainTexture.texture2d);\n        }\n        return value;\n    },\n\n    onTarget: function (place) {\n        return ((Math.abs(this.viewCamera.lat - this.targetCamera.lat) < 1E-12 && Math.abs(this.viewCamera.lng - this.targetCamera.lng) < 1E-12 && Math.abs(this.viewCamera.zoom - this.targetCamera.zoom) < 1E-12) && this.viewMover == null);\n    },\n\n    setTexture: function (texture) { },\n\n    get_backgroundImageset: function () {\n        return this._backgroundImageset;\n    },\n\n    set_backgroundImageset: function (value) {\n        var viewModeChanged = this._backgroundImageset != null && value != null && (this._backgroundImageset.get_dataSetType() !== value.get_dataSetType());\n        this._backgroundImageset = value;\n\n        if (viewModeChanged) {\n            //Prevent potential artifacts when going from 3D to Sky/Pan\n            globalWWTControl._freezeView();\n            globalWWTControl.clampZooms(this);\n        }\n        return value;\n    },\n\n    get_foregroundImageset: function () {\n        return this._foregroundImageset;\n    },\n\n    set_foregroundImageset: function (value) {\n        this._foregroundImageset = value;\n        return value;\n    },\n\n    get_catalogHipsImagesets: function () {\n        return this._activeCatalogHipsImagesets;\n    },\n\n    getCatalogHipsDataInView: function (imageset, limit, onComplete) {\n        var $this = this;\n\n        var layer = new CatalogSpreadSheetLayer();\n        var onHeaderInfoLoad = function () {\n            layer.useHeadersFromVoTable(imageset.get_hipsProperties().get_catalogColumnInfo());\n            $this._tryGetAllDataInView(imageset, limit, layer, onComplete, 0);\n        };\n        if (imageset.get_hipsProperties() == null) {\n            imageset.set_hipsProperties(makeNewHipsProperties(imageset));\n            imageset.get_hipsProperties().setDownloadCompleteListener(onHeaderInfoLoad);\n        } else if (imageset.get_hipsProperties() != null && imageset.get_hipsProperties().get_downloadComplete()) {\n            onHeaderInfoLoad();\n        } else {\n            imageset.get_hipsProperties().setDownloadCompleteListener(onHeaderInfoLoad);\n        }\n    },\n\n    _tryGetAllDataInView: function (imageset, limit, catalogSpreadSheetLayer, onComplete, i) {\n        var $this = this;\n\n        var maxX = RenderContext.getTilesXForLevel(imageset, imageset.get_baseLevel());\n        var maxY = RenderContext.getTilesYForLevel(imageset, imageset.get_baseLevel());\n        var anyTileStillDownloading = false;\n        for (var x = 0; x < maxX; x++) {\n            for (var y = 0; y < maxY; y++) {\n                var tile = tileCacheGetTile(imageset.get_baseLevel(), x, y, imageset, null);\n                if (tile != null) {\n                    var tileAndChildrenReady = (tile).getDataInView(this, limit, catalogSpreadSheetLayer);\n                    anyTileStillDownloading = anyTileStillDownloading || !tileAndChildrenReady;\n                }\n                else {\n                    anyTileStillDownloading = true;\n                }\n            }\n        }\n        if (anyTileStillDownloading) {\n            var count = catalogSpreadSheetLayer.get__table().rows.length;\n            if ((count > 10000 || i > 100 * 60 * 5) && limit) {\n                console.log('Too Many results - Aborting');\n                console.log(count);\n                var returnMessage = new InViewReturnMessage();\n                returnMessage.aborted = true;\n                returnMessage.table = catalogSpreadSheetLayer.getTableDataInView();\n                onComplete(returnMessage);\n                catalogSpreadSheetLayer.cleanUp();\n            }\n            else {\n                setTimeout(function () {\n                    $this._tryGetAllDataInView(imageset, limit, catalogSpreadSheetLayer, onComplete, i);\n                }, 10);\n                if (!(i % 200)) {\n                    console.log('Waiting for more tiles to load');\n                    console.log(count);\n                }\n                i++;\n            }\n        } else {\n            var count = catalogSpreadSheetLayer.get__table().rows.length;\n            console.log('Done!');\n            console.log(count);\n            var returnMessage = new InViewReturnMessage();\n            returnMessage.aborted = false;\n            returnMessage.table = catalogSpreadSheetLayer.getTableDataInView();\n            onComplete(returnMessage);\n            catalogSpreadSheetLayer.cleanUp();\n        }\n    },\n\n    addCatalogHips: function (imageset, onLoad) {\n        if (!(this._activeCatalogHipsImagesets.indexOf(imageset) >= 0)) {\n            this._activeCatalogHipsImagesets.push(imageset);\n        }\n        if (imageset.get_hipsProperties() == null) {\n            imageset.set_hipsProperties(makeNewHipsProperties(imageset));\n            imageset.get_hipsProperties().setDownloadCompleteListener(onLoad);\n        } else if (imageset.get_hipsProperties() != null && imageset.get_hipsProperties().get_downloadComplete()) {\n            LayerManager.addSpreadsheetLayer(imageset.get_hipsProperties().get_catalogSpreadSheetLayer(), 'Sky');\n            if (onLoad != null) {\n                onLoad();\n            }\n        }\n    },\n\n    removeCatalogHips: function (imageset) {\n        ss.remove(this._activeCatalogHipsImagesets, imageset);\n        if (imageset.get_hipsProperties() != null) {\n            LayerManager.deleteLayerByID(imageset.get_hipsProperties().get_catalogSpreadSheetLayer().id, true, true);\n        }\n    },\n\n    getCatalogHipsByName: function (name) {\n        var $enum1 = ss.enumerate(this._activeCatalogHipsImagesets);\n        while ($enum1.moveNext()) {\n            var imageset = $enum1.current;\n            if (imageset.get_name() === name) {\n                return imageset;\n            }\n        }\n        return null;\n    },\n\n    getAltitudeForLatLongForPlanet: function (planetID, viewLat, viewLong) {\n        var layer = globalWWTControl.getImagesetByName(Planets.getNameFrom3dId(planetID));\n        if (layer == null) {\n            return 0;\n        }\n        var maxX = RenderContext.getTilesXForLevel(layer, layer.get_baseLevel());\n        var maxY = RenderContext.getTilesYForLevel(layer, layer.get_baseLevel());\n        for (var x = 0; x < maxX; x++) {\n            for (var y = 0; y < maxY; y++) {\n                var tile = tileCacheGetTile(layer.get_baseLevel(), x, y, layer, null);\n                if (tile != null) {\n                    if (tile.isPointInTile(viewLat, viewLong)) {\n                        return tile.getSurfacePointAltitude(viewLat, viewLong, true);\n                    }\n                }\n            }\n        }\n        return 0;\n    },\n\n    getEarthAltitude: function (ViewLat, ViewLong, meters) {\n        if (globalWWTControl.get_solarSystemMode()) {\n            var pnt = Coordinates.geoTo3dDouble(ViewLat, ViewLong + 90);\n            var EarthMat = Planets.earthMatrixInv;\n            pnt = Vector3d._transformCoordinate(pnt, EarthMat);\n            pnt.normalize();\n            var point = Coordinates.cartesianToLatLng(pnt);\n            return this.getAltitudeForLatLongForPlanet(this.viewCamera.target, point.y, point.x);\n        } else if (this.get_backgroundImageset().get_dataSetType() != ImageSetType.earth) {\n            return (meters) ? this.getMetersAltitudeForLatLong(ViewLat, ViewLong) : this.getScaledAltitudeForLatLong(ViewLat, ViewLong);\n        } else {\n            return 0;\n        }\n    },\n\n    drawImageSet: function (imageset, opacity) {\n        var maxX = RenderContext.getTilesXForLevel(imageset, imageset.get_baseLevel());\n        var maxY = RenderContext.getTilesYForLevel(imageset, imageset.get_baseLevel());\n        for (var x = 0; x < maxX; x++) {\n            for (var y = 0; y < maxY; y++) {\n                var tile = tileCacheGetTile(imageset.get_baseLevel(), x, y, imageset, null);\n                if (tile != null) {\n                    tile.draw3D(this, opacity);\n                }\n            }\n        }\n    },\n\n    _getTileAtLatLong: function (viewLat, viewLong) {\n        var layer = this.get_backgroundImageset();\n        if (layer == null) {\n            return null;\n        }\n        var maxX = RenderContext.getTilesXForLevel(layer, layer.get_baseLevel());\n        var maxY = RenderContext.getTilesYForLevel(layer, layer.get_baseLevel());\n        for (var x = 0; x < maxX; x++) {\n            for (var y = 0; y < maxY; y++) {\n                var tile = tileCacheGetTile(layer.get_baseLevel(), x, y, layer, null);\n                if (tile != null) {\n                    if (tile.isPointInTile(viewLat, viewLong)) {\n                        return tile;\n                    }\n                }\n            }\n        }\n        return null;\n    },\n\n    getScaledAltitudeForLatLong: function (viewLat, viewLong) {\n        var tile = this._getTileAtLatLong(viewLat, viewLong);\n        if (tile != null) {\n            return tile.getSurfacePointAltitude(viewLat, viewLong, false);\n        }\n        return 0;\n    },\n\n    getMetersAltitudeForLatLong: function (viewLat, viewLong) {\n        var tile = this._getTileAtLatLong(viewLat, viewLong);\n        if (tile != null) {\n            return tile.getSurfacePointAltitude(viewLat, viewLong, true);\n        }\n        return 0;\n    },\n\n    _setupMatricesLand3d: function () {\n        this.lighting = false;\n        this.space = false;\n        RenderTriangle.cullInside = false;\n\n        // For our world matrix, we will just rotate the Earth and Clouds about the y-axis.\n        var WorldMatrix = Matrix3d._rotationY(((this.viewCamera.lng - 90) / 180 * Math.PI));\n        WorldMatrix._multiply(Matrix3d._rotationX(((-this.viewCamera.lat) / 180 * Math.PI)));\n        this.set_world(WorldMatrix);\n        this.set_worldBase(WorldMatrix.clone());\n        this._viewPoint = Coordinates.geoTo3d(this.viewCamera.lat, this.viewCamera.lng);\n        var distance = 0;\n        if (this._backgroundImageset.get_isMandelbrot()) {\n            distance = (4 * (this.viewCamera.zoom / 180)) + 1E-41;\n        } else {\n            distance = (4 * (this.viewCamera.zoom / 180)) + 1E-06;\n        }\n        this._fovAngle = (this.viewCamera.zoom / 343.774) / Math.PI * 180;\n        this._fovScale = (this._fovAngle / this.height) * 3600;\n        if (this.gl != null) {\n            this.targetAltitude = this.getScaledAltitudeForLatLong(this.viewCamera.lat, this.viewCamera.lng);\n            var heightNow = 1 + this.targetAltitude;\n            this.targetAltitude *= this.get_nominalRadius();\n            if (this._targetHeight < heightNow) {\n                this._targetHeight = (((this._targetHeight * 2) + heightNow) / 3);\n            }\n            else {\n                this._targetHeight = (((this._targetHeight * 9) + heightNow) / 10);\n            }\n        } else {\n            this.targetAltitude = 0;\n            this._targetHeight = 1;\n        }\n        var rotLocal = this.viewCamera.rotation;\n        this.cameraPosition = Vector3d.create((Math.sin(rotLocal) * Math.sin(this.viewCamera.angle) * distance), (Math.cos(rotLocal) * Math.sin(this.viewCamera.angle) * distance), (-this._targetHeight - (Math.cos(this.viewCamera.angle) * distance)));\n        var cameraTarget = Vector3d.create(0, 0, -this._targetHeight);\n        var camHeight = this.cameraPosition.length();\n        var lookUp = Vector3d.create(Math.sin(rotLocal) * Math.cos(this.viewCamera.angle), Math.cos(rotLocal) * Math.cos(this.viewCamera.angle), Math.sin(this.viewCamera.angle));\n        this.set_view(Matrix3d.lookAtLH(this.cameraPosition, cameraTarget, lookUp));\n        this.set_viewBase(this.get_view());\n        var back = Math.sqrt((distance + 1) * (distance + 1) - 1);\n        back = Math.max(0.5, back);\n        var m_nearPlane = distance * 0.05;\n        m_nearPlane = distance * 0.05;\n        this.set_projection(Matrix3d.perspectiveFovLH((Math.PI / 4), this.width / this.height, m_nearPlane, back));\n        this._setMatrixes();\n        this.makeFrustum();\n    },\n\n    setupMatricesSpace3d: function (canvasWidth, canvasHeight) {\n        this.lighting = false;\n        if (!this._firstTimeInit) {\n            this._galacticMatrix = Matrix3d.get_identity();\n            this._galacticMatrix._multiply(Matrix3d._rotationY(-(270 - (17.7603329867975 * 15)) / 180 * Math.PI));\n            this._galacticMatrix._multiply(Matrix3d._rotationX(-(-28.9361739586894) / 180 * Math.PI));\n            this._galacticMatrix._multiply(Matrix3d._rotationZ(((31.422052860102) - 90) / 180 * Math.PI));\n            this._firstTimeInit = true;\n        }\n        this.space = true;\n        RenderTriangle.cullInside = true;\n        var WorldMatrix = Matrix3d.get_identity();\n        if (Settings.get_active().get_galacticMode()) {\n            WorldMatrix._multiply(this._galacticMatrix);\n            WorldMatrix._multiply(Matrix3d._rotationY(this.az / 180 * Math.PI));\n            WorldMatrix._multiply(Matrix3d._rotationX(-this.alt / 180 * Math.PI));\n            var gPoint = Coordinates.galactictoJ2000(this.az, this.alt);\n            this._viewPoint = Coordinates.raDecTo3dAu(gPoint[0] / 15, gPoint[1], 1);\n            this.targetCamera.lng = this.rAtoViewLng(gPoint[0] / 15);\n            this.targetCamera.lat = gPoint[1];\n            this.viewCamera.lat = this.targetCamera.lat;\n            this.viewCamera.lng = this.targetCamera.lng;\n        } else {\n            WorldMatrix._multiply(Matrix3d._rotationY(-(this.viewCamera.lng - 90) / 180 * Math.PI));\n            WorldMatrix._multiply(Matrix3d._rotationX(-this.viewCamera.lat / 180 * Math.PI));\n            this._viewPoint = Coordinates.raDecTo3dAu(this.get_RA(), this.get_dec(), 1);\n        }\n        var camLocal = this.viewCamera.rotation;\n        this._fovAngle = (this.viewCamera.zoom / 343.774) / Math.PI * 180;\n        this._fovScale = (this._fovAngle / canvasHeight) * 3600;\n\n        // altaz\n        if (Settings.get_active().get_localHorizonMode() && this._backgroundImageset.get_dataSetType() == ImageSetType.sky) {\n            var zenithAltAz = new Coordinates(0, 0);\n            zenithAltAz.set_az(0);\n            zenithAltAz.set_alt(0);\n            var zenith = Coordinates.horizonToEquitorial(zenithAltAz, SpaceTimeController.get_location(), SpaceTimeController.get_now());\n            var raPart = -((zenith.get_RA() - 6) / 24 * (Math.PI * 2));\n            var decPart = -(zenith.get_dec() / 360 * (Math.PI * 2));\n            var raText = Coordinates.formatDMS(zenith.get_RA());\n            WorldMatrix = Matrix3d._rotationY(-raPart - Math.PI);\n            WorldMatrix._multiply(Matrix3d._rotationX(decPart));\n            if (SpaceTimeController.get_location().get_lat() < 0) {\n                WorldMatrix._multiply(Matrix3d._rotationY((this.az / 180 * Math.PI)));\n                WorldMatrix._multiply(Matrix3d._rotationX((this.alt / 180 * Math.PI)));\n                camLocal += Math.PI;\n            }\n            else {\n                WorldMatrix._multiply(Matrix3d._rotationY(((-this.az) / 180 * Math.PI)));\n                WorldMatrix._multiply(Matrix3d._rotationX(((-this.alt) / 180 * Math.PI)));\n            }\n            var currentRaDec = Coordinates.horizonToEquitorial(Coordinates.fromLatLng(this.alt, this.az), SpaceTimeController.get_location(), SpaceTimeController.get_now());\n            this.viewCamera.lat = this.targetCamera.lat = currentRaDec.get_dec();\n            this.viewCamera.lng = this.targetCamera.lng = this.rAtoViewLng(currentRaDec.get_RA());\n        }\n        this.set_world(WorldMatrix);\n        this.set_worldBase(WorldMatrix.clone());\n        var localZoomFactor = this.viewCamera.zoom;\n        var FovAngle = (localZoomFactor / 343.774) / Math.PI * 180;\n        this.cameraPosition = Vector3d.create(0, 0, 0);\n\n        // This is for distance Calculation. For space everything is the same distance, so camera target is key.\n        this.set_view(Matrix3d.lookAtLH(this.cameraPosition, Vector3d.create(0, 0, -1), Vector3d.create(Math.sin(camLocal), Math.cos(camLocal), 0)));\n        this.set_viewBase(this.get_view().clone());\n        var m_nearPlane = 0.1;\n        this.nearPlane = 0.1;\n        this.set_projection(Matrix3d.perspectiveFovLH(localZoomFactor / 343.774, canvasWidth / canvasHeight, 0.1, -2));\n        this._setMatrixes();\n        this.makeFrustum();\n    },\n\n    get_solarSystemTrack: function () {\n        return this.viewCamera.target;\n    },\n\n    set_solarSystemTrack: function (value) {\n        this.viewCamera.target = value;\n        return value;\n    },\n\n    get_solarSystemCameraDistance: function () {\n        return (4 * (this.viewCamera.zoom / 9)) + 1E-06;\n    },\n\n    get_sandboxMode: function () {\n        if (this._backgroundImageset == null) {\n            return false;\n        }\n        return this._backgroundImageset.get_dataSetType() === ImageSetType.sandbox;\n    },\n\n    get_trackingFrame: function () {\n        return this.viewCamera.targetReferenceFrame;\n    },\n\n    set_trackingFrame: function (value) {\n        this.viewCamera.targetReferenceFrame = value;\n        return value;\n    },\n\n    get_fovLocal: function () {\n        return this._fovLocal;\n    },\n\n    set_fovLocal: function (value) {\n        this._fovLocal = value;\n        return value;\n    },\n\n    setupMatricesOverlays: function () {\n        this.set_world(Matrix3d.get_identity());\n        var lookAtAdjust = Matrix3d.get_identity();\n        var lookFrom = Vector3d.create(0, 0, 0);\n        var lookAt = Vector3d.create(0, 0, 1);\n        var lookUp = Vector3d.create(0, 1, 0);\n        var view;\n        view = Matrix3d.lookAtLH(lookFrom, lookAt, lookUp);\n        view._multiply(Matrix3d._scaling(1, -1, 1));\n        this.set_view(view);\n        var back = 10000;\n        this.nearPlane = 0.1;\n        this.set_projection(Matrix3d.perspectiveFovLH(this._fovLocal, this.width / this.height, this.nearPlane, back));\n    },\n\n    setupMatricesSolarSystem: function (forStars) {\n        this.lighting = Settings.get_active().get_solarSystemLighting();\n        this.space = false;\n        if (this.get_solarSystemTrack() !== 20 && this.get_solarSystemTrack() !== 65536) {\n            this.viewCamera.viewTarget = Planets.getPlanetTargetPoint(this.get_solarSystemTrack(), this.viewCamera.lat, this.viewCamera.lng, 0);\n        }\n        RenderTriangle.cullInside = false;\n        var cameraDistance = this.get_solarSystemCameraDistance();\n        var trackingMatrix = Matrix3d.get_identity();\n        cameraDistance -= 1E-06;\n        var activeTrackingFrame = false;\n        if (this.get_solarSystemTrack() === 20 && !ss.emptyString(this.get_trackingFrame())) {\n            activeTrackingFrame = true;\n            var target = LayerManager._getFrameTarget(this, this.get_trackingFrame());\n            this.viewCamera.viewTarget = target.target;\n            trackingMatrix = target.matrix;\n        } else if (!ss.emptyString(this.get_trackingFrame())) {\n            this.set_trackingFrame('');\n        }\n        var center = this.viewCamera.viewTarget;\n        var localZoom = this.viewCamera.zoom * 20;\n        var lookAt = new Vector3d();\n        var viewAdjust = Matrix3d.get_identity();\n        viewAdjust._multiply(Matrix3d._rotationX(((-this.viewCamera.lat) / 180 * Math.PI)));\n        viewAdjust._multiply(Matrix3d._rotationY(((-this.viewCamera.lng) / 180 * Math.PI)));\n        var lookAtAdjust = Matrix3d.get_identity();\n        var dome = false;\n        var lookUp;\n        if (this._useSolarSystemTilt && !this.get_sandboxMode()) {\n            var angle = this.viewCamera.angle;\n            if (cameraDistance > 0.0008) {\n                angle = 0;\n            }\n            else if (cameraDistance > 1E-05) {\n                var val = Math.min(1.903089987, Util.log10(cameraDistance) + 5) / 1.903089987;\n                angle = angle * Math.max(0, 1 - val);\n            }\n            this.cameraPosition = Vector3d.create((Math.sin(-this.viewCamera.rotation) * Math.sin(angle) * cameraDistance), (Math.cos(-this.viewCamera.rotation) * Math.sin(angle) * cameraDistance), (Math.cos(angle) * cameraDistance));\n            lookUp = Vector3d.create(Math.sin(-this.viewCamera.rotation), Math.cos(-this.viewCamera.rotation), 1E-05);\n        } else {\n            this.cameraPosition = Vector3d.create(0, 0, cameraDistance);\n            lookUp = Vector3d.create(Math.sin(-this.viewCamera.rotation), Math.cos(-this.viewCamera.rotation), 0.0001);\n        }\n        this.cameraPosition = viewAdjust.transform(this.cameraPosition);\n        this._cameraOffset = this.cameraPosition.copy();\n        var tmp = trackingMatrix.clone();\n        tmp.invert();\n        this._cameraOffset = Vector3d._transformCoordinate(this._cameraOffset, tmp);\n        lookUp = viewAdjust.transform(lookUp);\n        this.set_world(Matrix3d.get_identity());\n        this.set_worldBase(Matrix3d.get_identity());\n        this.set_worldBaseNonRotating(Matrix3d.get_identity());\n        this.set_view(Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(trackingMatrix, Matrix3d.lookAtLH(this.cameraPosition, lookAt, lookUp)), lookAtAdjust));\n        this.set_viewBase(this.get_view().clone());\n        var temp = Vector3d.subtractVectors(lookAt, this.cameraPosition);\n        temp.normalize();\n        temp = Vector3d._transformCoordinate(temp, trackingMatrix);\n        temp.normalize();\n        this._viewPoint = temp;\n        var radius = Planets.getAdjustedPlanetRadius(this.get_solarSystemTrack());\n        if (cameraDistance < radius * 2 && !forStars) {\n            this.nearPlane = cameraDistance * 0.03;\n            this.nearPlane = Math.max(this.nearPlane, 1E-11);\n            RenderContext.back = 1900;\n        } else {\n            if (forStars) {\n                RenderContext.back = 900056;\n                RenderContext.back = (cameraDistance > 900056) ? cameraDistance * 3 : 900056;\n                this.nearPlane = 3E-05;\n            }\n            else {\n                RenderContext.back = (cameraDistance > 1900) ? cameraDistance + 200 : 1900;\n                if (Settings.get_active().get_solarSystemScale() < 13) {\n                    this.nearPlane = Math.min(cameraDistance * 0.03, 0.01);\n                }\n                else {\n                    this.nearPlane = 0.001;\n                }\n            }\n        }\n        this.set_projection(Matrix3d.perspectiveFovLH(this._fovLocal, this.width / this.height, this.nearPlane, RenderContext.back));\n        this.perspectiveFov = this._fovLocal;\n        this._fovAngle = (this.viewCamera.zoom / 343.774) / Math.PI * 180;\n        this._fovScale = (this._fovAngle / this.height) * 3600;\n        this._setMatrixes();\n        this.makeFrustum();\n    },\n\n    _setMatrixes: function () { },\n\n    get_frustum: function () {\n        return this._frustum;\n    },\n\n    get_ambientLightColor: function () {\n        return this._ambientLightColor;\n    },\n\n    set_ambientLightColor: function (value) {\n        this._ambientLightColor = value;\n        this._lightingStateDirty = true;\n        return value;\n    },\n\n    get_hemisphereLightColor: function () {\n        return this._hemiLightColor;\n    },\n\n    set_hemisphereLightColor: function (value) {\n        this._hemiLightColor = value;\n        this._lightingStateDirty = true;\n        return value;\n    },\n\n    get_hemisphereLightUp: function () {\n        return this._hemiLightUp;\n    },\n\n    set_hemisphereLightUp: function (value) {\n        this._hemiLightUp = value;\n        this._lightingStateDirty = true;\n        return value;\n    },\n\n    get_sunlightColor: function () {\n        return this._sunlightColor;\n    },\n\n    set_sunlightColor: function (value) {\n        this._sunlightColor = value;\n        this._lightingStateDirty = true;\n        return value;\n    },\n\n    get_sunPosition: function () {\n        return this._sunPosition;\n    },\n\n    set_sunPosition: function (value) {\n        this._sunPosition = value;\n        this._lightingStateDirty = true;\n        return value;\n    },\n\n    get_reflectedLightColor: function () {\n        return this._reflectedLightColor;\n    },\n\n    set_reflectedLightColor: function (value) {\n        if (this._reflectedLightColor !== value) {\n            this._reflectedLightColor = value;\n            this._lightingStateDirty = true;\n        }\n        return value;\n    },\n\n    get_reflectedLightPosition: function () {\n        return this._reflectedLightPosition;\n    },\n\n    set_reflectedLightPosition: function (value) {\n        this._reflectedLightPosition = value;\n        this._lightingStateDirty = true;\n        return value;\n    },\n\n    // Radius of a planet casting a shadow; zero when there's no shadow\n    get_occludingPlanetRadius: function () {\n        return this._occludingPlanetRadius;\n    },\n\n    set_occludingPlanetRadius: function (value) {\n        this._occludingPlanetRadius = value;\n        return value;\n    },\n\n    get_occludingPlanetPosition: function () {\n        return this._occludingPlanetPosition;\n    },\n\n    set_occludingPlanetPosition: function (value) {\n        this._occludingPlanetPosition = value;\n        return value;\n    },\n\n    get_twoSidedLighting: function () {\n        return this._twoSidedLighting;\n    },\n\n    set_twoSidedLighting: function (value) {\n        if (value !== this._twoSidedLighting) {\n            this._twoSidedLighting = value;\n            this._lightingStateDirty = true;\n        }\n        return value;\n    },\n\n    makeFrustum: function () {\n        this.WV = Matrix3d.multiplyMatrix(this.get_world(), this.get_view());\n        var viewProjection = Matrix3d.multiplyMatrix(this.WV, this.get_projection());\n        this.WVP = viewProjection.clone();\n        var inverseWorld = this.get_world().clone();\n        inverseWorld.invert();\n\n        // Left plane\n        this._frustum[0].a = viewProjection.get_m14() + viewProjection.get_m11();\n        this._frustum[0].b = viewProjection.get_m24() + viewProjection.get_m21();\n        this._frustum[0].c = viewProjection.get_m34() + viewProjection.get_m31();\n        this._frustum[0].d = viewProjection.get_m44() + viewProjection.get_m41();\n\n        // Right plane\n        this._frustum[1].a = viewProjection.get_m14() - viewProjection.get_m11();\n        this._frustum[1].b = viewProjection.get_m24() - viewProjection.get_m21();\n        this._frustum[1].c = viewProjection.get_m34() - viewProjection.get_m31();\n        this._frustum[1].d = viewProjection.get_m44() - viewProjection.get_m41();\n\n        // Top plane\n        this._frustum[2].a = viewProjection.get_m14() - viewProjection.get_m12();\n        this._frustum[2].b = viewProjection.get_m24() - viewProjection.get_m22();\n        this._frustum[2].c = viewProjection.get_m34() - viewProjection.get_m32();\n        this._frustum[2].d = viewProjection.get_m44() - viewProjection.get_m42();\n\n        // Bottom plane\n        this._frustum[3].a = viewProjection.get_m14() + viewProjection.get_m12();\n        this._frustum[3].b = viewProjection.get_m24() + viewProjection.get_m22();\n        this._frustum[3].c = viewProjection.get_m34() + viewProjection.get_m32();\n        this._frustum[3].d = viewProjection.get_m44() + viewProjection.get_m42();\n\n        // Near plane\n        this._frustum[4].a = viewProjection.get_m13();\n        this._frustum[4].b = viewProjection.get_m23();\n        this._frustum[4].c = viewProjection.get_m33();\n        this._frustum[4].d = viewProjection.get_m43();\n\n        // Far plane\n        this._frustum[5].a = viewProjection.get_m14() - viewProjection.get_m13();\n        this._frustum[5].b = viewProjection.get_m24() - viewProjection.get_m23();\n        this._frustum[5].c = viewProjection.get_m34() - viewProjection.get_m33();\n        this._frustum[5].d = viewProjection.get_m44() - viewProjection.get_m43();\n\n        // Normalize planes\n        for (var i = 0; i < 6; i++) {\n            this._frustum[i].normalize();\n        }\n        this._frustumDirty = false;\n        this.WVP.scale(Vector3d.create(this.width / 2, -this.height / 2, 1));\n        this.WVP.translate(Vector3d.create(this.width / 2, this.height / 2, 0));\n        this._setMatrixes();\n    },\n\n    _initGL: function () {\n        if (this.gl == null) {\n            return;\n        }\n        var uints_for_indices = this.gl.getExtension('OES_element_index_uint');\n        set_tileUvMultiple(1);\n        set_tileDemEnabled(true);\n        TileShader.init(this);\n    },\n\n    freezeView: function () {\n        this.targetAlt = this.alt;\n        this.targetAz = this.az;\n        this.targetCamera = this.viewCamera.copy();\n    },\n\n    _setVertexBuffer: function (vertexBuffer) { },\n\n    _setIndexBuffer: function (indexBuffer) { },\n\n    // Set up a shader for the specified material properties and the\n    // current lighting environment.\n    setMaterial: function (material, diffuseTex, specularTex, normalMap, opacity) {\n        this.set_mainTexture(diffuseTex);\n    },\n\n    preDraw: function () { }\n};\n\nregisterType(\"RenderContext\", [RenderContext, RenderContext$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Various global variables associated with the rendering engine.\n//\n// In the original C# code these were generally static values associated with\n// various classes, but since we want to avoid circular dependencies in our\n// module structure, we gather some of those values in modules that contain\n// minimal amounts of code (like this one) so that they can go early in the\n// dependency graph.\n\n// This used to be Tile.prepDevice. It's the global WebGL rendering context.\nexport var tilePrepDevice = null;\n\nexport function set_tilePrepDevice(value) {\n    tilePrepDevice = value;\n}\n\n// This used to be Tile.uvMultiple. It's some GL rendering state variable.\nexport var tileUvMultiple = 256;\n\nexport function set_tileUvMultiple(value) {\n    tileUvMultiple = value;\n}\n\n// This used to be Tile.demEnabled. It controls whether DEM rendering is\n// enabled, hopefully?\nexport var tileDemEnabled = false;\n\nexport function set_tileDemEnabled(value) {\n    tileDemEnabled = !!value;\n}\n\n// This used to be `RenderContext.useGl`. It sets whether we're using WebGL.\n//\n// Older versions of the engine used to support HTML Canvas rendering, but that\n// mode is now deprecated. Uses where `useGl` is false may break at any time.\nexport var useGl = false;\n\nexport function set_useGl(value) {\n    useGl = !!value;\n}\n\n// This used to be `RenderContext.useGlVersion2`. It sets whether we're\n// using WebGL >= 2.\nexport var useGlVersion2 = false;\n\nexport function set_useGlVersion2(value) {\n    useGlVersion2 = !!value;\n}\n\n// This used to be `TileCache.addTileToQueue()`. It's a function that\n// adds a tile to the fetch queue.\nexport var tileCacheAddTileToQueue = null;\n\nexport function set_tileCacheAddTileToQueue(value) {\n    tileCacheAddTileToQueue = value;\n}\n\n// This used to be `TileCache.removeFromQueue()`. It's a function that\n// removes a tile from the fetch queue.\nexport var tileCacheRemoveFromQueue = null;\n\nexport function set_tileCacheRemoveFromQueue(value) {\n    tileCacheRemoveFromQueue = value;\n}\n\n// This used to be `TileCache.accessID`.\nvar tileCacheAccessID = 0;\n\nexport function inc_tileCacheAccessID() {\n    return tileCacheAccessID++;\n}\n\n// This used to be `TileCache.getTile()`. It gets a tile from the cache, unconditionally.\nexport var tileCacheGetTile = null;\n\nexport function set_tileCacheGetTile(value) {\n    tileCacheGetTile = value;\n}\n\n// This used to be `TileCache.getCachedTile()`. It gets a tile from the cache.\nexport var tileCacheGetCachedTile = null;\n\nexport function set_tileCacheGetCachedTile(value) {\n    tileCacheGetCachedTile = value;\n}\n\n// This is another way to access `WWTControl.singleton.renderContext`. It's the\n// global singleton RenderContext instance.\nexport var globalRenderContext = null;\n\nexport function set_globalRenderContext(value) {\n    globalRenderContext = value;\n}\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A triangle that is part of a tile pyramid render.\n\nimport { registerType } from \"./typesystem.js\";\nimport { Vector2d, Vector3d, PositionTexture } from \"./double3d.js\";\n\n\n// wwtlib.RenderTriangle\n\nexport function RenderTriangle() {\n    this.a = new PositionTexture();\n    this.b = new PositionTexture();\n    this.c = new PositionTexture();\n    this.normal = new Vector3d();\n    this.opacity = 1;\n    this.expansionInPixels = 0.6;\n    this.tileLevel = 0;\n    this._ta = new Vector3d();\n    this._tb = new Vector3d();\n    this._tc = new Vector3d();\n    this._expandedS0 = new Vector2d();\n    this._expandedS1 = new Vector2d();\n    this._expandedS2 = new Vector2d();\n    this.lighting = 1;\n}\n\nRenderTriangle.width = 1024;\nRenderTriangle.height = 768;\nRenderTriangle._contractionInPixels = -0.5;\nRenderTriangle.trianglesRendered = 0;\nRenderTriangle.trianglesCulled = 0;\nRenderTriangle.renderingOn = true;\nRenderTriangle._factor = 1;\nRenderTriangle.cullInside = true;\nRenderTriangle._hw = 0;\nRenderTriangle._qw = 0;\nRenderTriangle._hh = 0;\nRenderTriangle._qh = 0;\n\nRenderTriangle.create = function (a, b, c, img, level) {\n    var temp = new RenderTriangle();\n    temp.a = a.copy();\n    temp.b = b.copy();\n    temp.c = c.copy();\n    temp._texture = img;\n    temp.tileLevel = level;\n    temp.makeNormal();\n    return temp;\n};\n\nRenderTriangle.createWithMiter = function (a, b, c, img, level, expansion) {\n    var temp = new RenderTriangle();\n    temp.expansionInPixels = expansion;\n    temp.a = a.copy();\n    temp.b = b.copy();\n    temp.c = c.copy();\n    temp._texture = img;\n    temp.tileLevel = level;\n    temp.makeNormal();\n    return temp;\n};\n\nRenderTriangle._getMiterPoint = function (p1, p2, p3, edgeOffset) {\n    var edge1 = Vector2d.subtract(p2, p1);\n    var edge2 = Vector2d.subtract(p3, p1);\n    edge1.normalize();\n    edge2.normalize();\n    var dir = Vector2d.create(edge1.x + edge2.x, edge1.y + edge2.y);\n    dir.normalize();\n    var delta = Vector2d.create(edge1.x - edge2.x, edge1.y - edge2.y);\n    var sineHalfAngle = delta.get_length() / 2;\n    var net = Math.min(2, edgeOffset / sineHalfAngle);\n    dir.extend(net);\n    return Vector2d.create(p1.x - dir.x, p1.y - dir.y);\n};\n\nRenderTriangle._miterPoint = function (p1x, p1y, p2x, p2y, p3x, p3y, ExpansionInPixels) {\n    var e1x = p2x - p1x;\n    var e1y = p2y - p1y;\n    var e2x = p3x - p1x;\n    var e2y = p3y - p1y;\n    var length = Math.sqrt(e1x * e1x + e1y * e1y);\n    if (!!length) {\n        e1x /= length;\n        e1y /= length;\n    }\n    length = Math.sqrt(e2x * e2x + e2y * e2y);\n    if (!!length) {\n        e2x /= length;\n        e2y /= length;\n    }\n    var dx = e1x + e2x;\n    var dy = e1y + e2y;\n    length = Math.sqrt(dx * dx + dy * dy);\n    if (!!length) {\n        dx /= length;\n        dy /= length;\n    }\n    var deltax = e1x - e2x;\n    var deltay = e1y - e2y;\n    length = Math.sqrt(deltax * deltax + deltay * deltay);\n    var sineHalfAngle = length / 2;\n    var net = Math.min(2, ExpansionInPixels / sineHalfAngle);\n    dx *= net;\n    dy *= net;\n    return Vector2d.create(p1x - dx, p1y - dy);\n};\n\nRenderTriangle._miterPointOut = function (pntOut, p1x, p1y, p2x, p2y, p3x, p3y, ExpansionInPixels) {\n    var e1x = p2x - p1x;\n    var e1y = p2y - p1y;\n    var e2x = p3x - p1x;\n    var e2y = p3y - p1y;\n    var length = Math.sqrt(e1x * e1x + e1y * e1y);\n    if (!!length) {\n        e1x /= length;\n        e1y /= length;\n    }\n    length = Math.sqrt(e2x * e2x + e2y * e2y);\n    if (!!length) {\n        e2x /= length;\n        e2y /= length;\n    }\n    var dx = e1x + e2x;\n    var dy = e1y + e2y;\n    length = Math.sqrt(dx * dx + dy * dy);\n    if (!!length) {\n        dx /= length;\n        dy /= length;\n    }\n    var deltax = e1x - e2x;\n    var deltay = e1y - e2y;\n    length = Math.sqrt(deltax * deltax + deltay * deltay);\n    var sineHalfAngle = length / 2;\n    var net = Math.min(2, ExpansionInPixels / sineHalfAngle);\n    dx *= net;\n    dy *= net;\n    pntOut.x = p1x - dx;\n    pntOut.y = p1y - dy;\n};\n\nvar RenderTriangle$ = {\n    makeNormal: function () {\n        var a = this.a.position.copy();\n        var b = this.b.position.copy();\n        var c = this.c.position.copy();\n        a.normalize();\n        b.normalize();\n        c.normalize();\n        var x = a.x + b.x + c.x;\n        var y = a.y + b.y + c.y;\n        var z = a.z + b.z + c.z;\n        this.normal = Vector3d.create(x / 3, y / 3, z / 3);\n        this.normal.normalize();\n    },\n\n    _checkBackface: function () {\n        var ab = Vector3d.subtractVectors(this._ta, this._tb);\n        var ac = Vector3d.subtractVectors(this._ta, this._tc);\n        var cp = Vector3d.cross(ab, ac);\n        cp.normalize();\n        return cp.z >= 0;\n    },\n\n    draw: function (ctx, wvp) {\n        if (ctx == null) {\n            return;\n        }\n        wvp._transformTo(this.a.position, this._ta);\n        wvp._transformTo(this.b.position, this._tb);\n        wvp._transformTo(this.c.position, this._tc);\n        if (this._checkBackface() === RenderTriangle.cullInside) {\n            RenderTriangle.trianglesCulled++;\n            return;\n        }\n        this._drawTriangle(ctx, this._texture, this._ta.x, this._ta.y, this._tb.x, this._tb.y, this._tc.x, this._tc.y, this.a.tu, this.a.tv, this.b.tu, this.b.tv, this.c.tu, this.c.tv);\n    },\n\n    _drawTriangle: function (ctx, im, x0, y0, x1, y1, x2, y2, sx0, sy0, sx1, sy1, sx2, sy2) {\n        if (!this.intersects(0, RenderTriangle.width, 0, RenderTriangle.height, x0, y0, x1, y1, x2, y2)) {\n            return false;\n        }\n        RenderTriangle._miterPointOut(this._expandedS0, x0, y0, x1, y1, x2, y2, this.expansionInPixels);\n        RenderTriangle._miterPointOut(this._expandedS1, x1, y1, x0, y0, x2, y2, this.expansionInPixels);\n        RenderTriangle._miterPointOut(this._expandedS2, x2, y2, x1, y1, x0, y0, this.expansionInPixels);\n        x0 = this._expandedS0.x;\n        y0 = this._expandedS0.y;\n        x1 = this._expandedS1.x;\n        y1 = this._expandedS1.y;\n        x2 = this._expandedS2.x;\n        y2 = this._expandedS2.y;\n        ctx.save();\n        if (RenderTriangle.renderingOn) {\n            ctx.beginPath();\n            ctx.moveTo(x0, y0);\n            ctx.lineTo(x1, y1);\n            ctx.lineTo(x2, y2);\n            ctx.closePath();\n            ctx.clip();\n        }\n        var denom = sx0 * (sy2 - sy1) - sx1 * sy2 + sx2 * sy1 + (sx1 - sx2) * sy0;\n        //if (denom == 0)\n        //{\n        //    ctx.Restore();\n        //    return false;\n        //}\n\n        var m11 = -(sy0 * (x2 - x1) - sy1 * x2 + sy2 * x1 + (sy1 - sy2) * x0) / denom;\n        var m12 = (sy1 * y2 + sy0 * (y1 - y2) - sy2 * y1 + (sy2 - sy1) * y0) / denom;\n        var m21 = (sx0 * (x2 - x1) - sx1 * x2 + sx2 * x1 + (sx1 - sx2) * x0) / denom;\n        var m22 = -(sx1 * y2 + sx0 * (y1 - y2) - sx2 * y1 + (sx2 - sx1) * y0) / denom;\n        var dx = (sx0 * (sy2 * x1 - sy1 * x2) + sy0 * (sx1 * x2 - sx2 * x1) + (sx2 * sy1 - sx1 * sy2) * x0) / denom;\n        var dy = (sx0 * (sy2 * y1 - sy1 * y2) + sy0 * (sx1 * y2 - sx2 * y1) + (sx2 * sy1 - sx1 * sy2) * y0) / denom;\n        ctx.transform(m11, m12, m21, m22, dx, dy);\n        if (RenderTriangle.renderingOn) {\n            ctx.globalAlpha = this.opacity;\n            if (this.lighting < 1) {\n                ctx.globalAlpha = 1;\n                ctx.fillStyle = 'Black';\n                ctx.fillRect(0, 0, RenderTriangle.width, RenderTriangle.height);\n                ctx.globalAlpha = this.lighting * this.opacity;\n            }\n            ctx.drawImage(im, 0, 0);\n        }\n        ctx.restore();\n        return true;\n    },\n\n    intersects: function (l, r, t, b, x0, y0, x1, y1, x2, y2) {\n        if (x0 > l && x0 < r && y0 > t && y0 < b) {\n            return true;\n        }\n        if (x1 > l && x1 < r && y1 > t && y1 < b) {\n            return true;\n        }\n        if (x2 > l && x2 < r && y2 > t && y2 < b) {\n            return true;\n        }\n        var h4 = RenderTriangle.height * 4;\n        if (this.tileLevel < 4 && ((Math.abs(x0 - x1) > h4) || (Math.abs(y0 - y1) > h4) || (Math.abs(x2 - x1) > h4) || (Math.abs(y2 - y1) > h4) || (Math.abs(x0 - x2) > h4) || (Math.abs(y0 - y2) > h4))) {\n            return false;\n        }\n        return this.lineRectangleIntersect(l, r, t, b, x0, y0, x1, y1) || this.lineRectangleIntersect(l, r, t, b, x1, y1, x2, y2) || this.lineRectangleIntersect(l, r, t, b, x2, y2, x0, y0);\n    },\n\n    lineRectangleIntersect: function (l, r, t, b, x0, y0, x1, y1) {\n        var top_intersection;\n        var bottom_intersection;\n        var toptrianglepoint;\n        var bottomtrianglepoint;\n        var m;\n        var c;\n\n        // Calculate m and c for the equation for the line (y = mx+c)\n        m = (y1 - y0) / (x1 - x0);\n        c = y0 - (m * x0);\n\n        // if the line is going up from right to left then the top intersect point is on the left\n        if (m > 0) {\n            top_intersection = (m * l + c);\n            bottom_intersection = (m * r + c);\n        } else {\n            // otherwise it's on the right\n            top_intersection = (m * r + c);\n            bottom_intersection = (m * l + c);\n        }\n\n        // work out the top and bottom extents for the triangle\n        if (y0 < y1) {\n            toptrianglepoint = y0;\n            bottomtrianglepoint = y1;\n        } else {\n            toptrianglepoint = y1;\n            bottomtrianglepoint = y0;\n        }\n\n        // and calculate the overlap between those two bounds\n        var topoverlap;\n        var botoverlap;\n        topoverlap = (top_intersection > toptrianglepoint) ? top_intersection : toptrianglepoint;\n        botoverlap = (bottom_intersection < bottomtrianglepoint) ? bottom_intersection : bottomtrianglepoint;\n\n        // (topoverlap<botoverlap) :\n        // if the intersection isn't the right way up then we have no overlap\n\n        // (!((botoverlap<t) || (topoverlap>b)) :\n        // If the bottom overlap is higher than the top of the rectangle or the top overlap is\n        // lower than the bottom of the rectangle we don't have intersection. So return the negative\n        // of that. Much faster than checking each of the points is within the bounds of the rectangle.\n        return (topoverlap < botoverlap) && (!((botoverlap < t) || (topoverlap > b)));\n    }\n};\n\nregisterType(\"RenderTriangle\", [RenderTriangle, RenderTriangle$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The quasi-legacy ScriptInterface control interface.\n//\n// I believe that this new class was created in the very early days of the WWT\n// web control and was used as the interface point with the browser. In the\n// modern WebGL engine, there's not need to put all this functionality in this\n// separate module. But, as always, to preserve API compatibility, we maintain\n// all of the interfaces that were added here.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { Util } from \"./util.js\";\nimport { globalRenderContext, useGlVersion2 } from \"./render_globals.js\";\nimport { globalWWTControl, layerManagerGetAllMaps, loadWtmlFile } from \"./data_globals.js\";\nimport { Annotation, Circle, Poly, PolyLine } from \"./annotation.js\";\nimport { FitsImage } from \"./layers/fits_image.js\";\nimport { FitsImageJs } from \"./layers/fits_image_js.js\";\nimport { Imageset } from \"./imageset.js\";\nimport { ImageSetLayer } from \"./layers/imageset_layer.js\";\nimport { LayerManager } from \"./layers/layer_manager.js\";\nimport { Folder } from \"./folder.js\";\n\n\n// wwtlib.SlideChangedEventArgs\n\nexport function SlideChangedEventArgs(caption) {\n    ss.EventArgs.call(this);\n    this.set_caption(caption);\n}\n\nvar SlideChangedEventArgs$ = {\n    get_caption: function () {\n        return this._caption$2;\n    },\n\n    set_caption: function (value) {\n        this._caption$2 = value;\n        return value;\n    }\n};\n\nregisterType(\"SlideChangedEventArgs\", [SlideChangedEventArgs, SlideChangedEventArgs$, ss.EventArgs]);\n\n\n// wwtlib.ArrivedEventArgs\n\nexport function ArrivedEventArgs(ra, dec, zoom) {\n    this._ra$2 = 0;\n    this._dec$2 = 0;\n    this._zoom$2 = 0;\n    ss.EventArgs.call(this);\n    this.set_RA(ra * 15);\n    this.set_dec(dec);\n    this.set_zoom(zoom / 6);\n}\n\nvar ArrivedEventArgs$ = {\n    get_RA: function () {\n        return this._ra$2;\n    },\n\n    set_RA: function (value) {\n        this._ra$2 = value;\n        return value;\n    },\n\n    get_dec: function () {\n        return this._dec$2;\n    },\n\n    set_dec: function (value) {\n        this._dec$2 = value;\n        return value;\n    },\n\n    get_zoom: function () {\n        return this._zoom$2;\n    },\n\n    set_zoom: function (value) {\n        this._zoom$2 = value;\n        return value;\n    }\n};\n\nregisterType(\"ArrivedEventArgs\", [ArrivedEventArgs, ArrivedEventArgs$, ss.EventArgs]);\n\n\n// wwtlib.AnnotationClickEventArgs\n\nexport function AnnotationClickEventArgs(ra, dec, id) {\n    this._ra$2 = 0;\n    this._dec$2 = 0;\n    ss.EventArgs.call(this);\n    this.set_RA(ra * 15);\n    this.set_dec(dec);\n    this.set_id(id);\n}\n\nvar AnnotationClickEventArgs$ = {\n    get_RA: function () {\n        return this._ra$2;\n    },\n\n    set_RA: function (value) {\n        this._ra$2 = value;\n        return value;\n    },\n\n    get_dec: function () {\n        return this._dec$2;\n    },\n\n    set_dec: function (value) {\n        this._dec$2 = value;\n        return value;\n    },\n\n    get_id: function () {\n        return this._id$2;\n    },\n\n    set_id: function (value) {\n        this._id$2 = value;\n        return value;\n    }\n};\n\nregisterType(\"AnnotationClickEventArgs\", [AnnotationClickEventArgs, AnnotationClickEventArgs$, ss.EventArgs]);\n\n\n// wwtlib.CollectionLoadedEventArgs\n\nexport function CollectionLoadedEventArgs(url) {\n    ss.EventArgs.call(this);\n    this._url$2 = url;\n}\n\nvar CollectionLoadedEventArgs$ = {\n    get_url: function () {\n        return this._url$2;\n    },\n\n    set_url: function (value) {\n        this._url$2 = value;\n        return value;\n    }\n};\n\nregisterType(\"CollectionLoadedEventArgs\", [CollectionLoadedEventArgs, CollectionLoadedEventArgs$, ss.EventArgs]);\n\n\n// wwtlib.ScriptInterface\n\nexport function ScriptInterface() {\n    this._missedReady = false;\n    this.hideTourFeedback = false;\n    this._smoothAnimation = false;\n    this._showCaptions = true;\n}\n\nScriptInterface._containsFitsLikeExtentsion = function (url) {\n    var lowerCaseUrl = url.toLowerCase();\n    return (ss.endsWith(lowerCaseUrl, 'fits') || ss.endsWith(lowerCaseUrl, 'ftz') || ss.endsWith(lowerCaseUrl, 'fit') || ss.endsWith(lowerCaseUrl, 'fts'));\n};\n\nScriptInterface._addImageSet = function (name, gotoTarget, loaded, imageset) {\n    if (ss.whitespace(name)) {\n        name = LayerManager.getNextImageSetName();\n    }\n    var imagesetLayer = LayerManager.addImageSetLayerCallback(imageset, name, loaded);\n    if (gotoTarget) {\n        var zoom = imageset._guessZoomSetting(globalRenderContext.viewCamera.zoom);\n        globalWWTControl.gotoRADecZoom(imageset.get_viewCenterX() / 15, imageset.get_viewCenterY(), zoom, false, null);\n    }\n    return imagesetLayer;\n};\n\nScriptInterface._addFitsLayer = function (url, name, gotoTarget, loaded) {\n    if (ss.whitespace(name)) {\n        name = LayerManager.getNextFitsName();\n    }\n    var imagesetLayer = new ImageSetLayer();\n    var imageset = new Imageset();\n    var wcsLoaded = function (wcsImage) {\n        if ((wcsImage).errored) {\n            return;\n        }\n        var width = ss.truncate(wcsImage.get_sizeX());\n        var height = ss.truncate(wcsImage.get_sizeY());\n        imageset.setInitialParameters(wcsImage.get_description(), wcsImage.get_filename(), 2, 3, 5, Util.getHashCode(wcsImage.get_filename()), 0, 0, wcsImage.get_scaleY(), '.fits', wcsImage.get_scaleX() > 0, '', wcsImage.get_centerX(), wcsImage.get_centerY(), wcsImage.get_rotation(), false, '', false, false, 1, wcsImage.get_referenceX(), wcsImage.get_referenceY(), wcsImage.get_copyright(), wcsImage.get_creditsUrl(), '', '', 0, '');\n        imageset.set_wcsImage(wcsImage);\n        imagesetLayer.set_imageSet(imageset);\n        LayerManager.addFitsImageSetLayer(imagesetLayer, name);\n        if (gotoTarget) {\n            var zoom = imageset._guessZoomSetting(globalRenderContext.viewCamera.zoom);\n            globalWWTControl.gotoRADecZoom(wcsImage.get_viewCenterX() / 15, wcsImage.get_viewCenterY(), zoom, false, null);\n        }\n        if (loaded != null) {\n            loaded(imagesetLayer);\n        }\n    };\n    if (ss.whitespace(name)) {\n        name = LayerManager.getNextFitsName();\n    }\n    if (useGlVersion2) {\n        new FitsImage(imageset, url, null, wcsLoaded);\n    }\n    else {\n        new FitsImageJs(imageset, url, null, wcsLoaded);\n    }\n    return imagesetLayer;\n};\n\nvar ScriptInterface$ = {\n    add_ready: function (value) {\n        this.__ready = ss.bindAdd(this.__ready, value);\n    },\n\n    remove_ready: function (value) {\n        this.__ready = ss.bindSub(this.__ready, value);\n    },\n\n    _fireReady: function () {\n        if (this.__ready != null) {\n            this.__ready(this, new ss.EventArgs());\n        } else {\n            this._missedReady = true;\n        }\n    },\n\n    add_collectionLoaded: function (value) {\n        this.__collectionLoaded = ss.bindAdd(this.__collectionLoaded, value);\n    },\n\n    remove_collectionLoaded: function (value) {\n        this.__collectionLoaded = ss.bindSub(this.__collectionLoaded, value);\n    },\n\n    _fireCollectionLoaded: function (url) {\n        if (this.__collectionLoaded != null) {\n            this.__collectionLoaded(this, new CollectionLoadedEventArgs(url));\n        }\n    },\n\n    add_colorPickerDisplay: function (value) {\n        this.__colorPickerDisplay = ss.bindAdd(this.__colorPickerDisplay, value);\n    },\n\n    remove_colorPickerDisplay: function (value) {\n        this.__colorPickerDisplay = ss.bindSub(this.__colorPickerDisplay, value);\n    },\n\n    add_voTableDisplay: function (value) {\n        this.__voTableDisplay = ss.bindAdd(this.__voTableDisplay, value);\n    },\n\n    remove_voTableDisplay: function (value) {\n        this.__voTableDisplay = ss.bindSub(this.__voTableDisplay, value);\n    },\n\n    add_refreshLayerManager: function (value) {\n        this.__refreshLayerManager = ss.bindAdd(this.__refreshLayerManager, value);\n    },\n\n    remove_refreshLayerManager: function (value) {\n        this.__refreshLayerManager = ss.bindSub(this.__refreshLayerManager, value);\n    },\n\n    add_arrived: function (value) {\n        this.__arrived = ss.bindAdd(this.__arrived, value);\n    },\n\n    remove_arrived: function (value) {\n        this.__arrived = ss.bindSub(this.__arrived, value);\n    },\n\n    add_clicked: function (value) {\n        this.__clicked = ss.bindAdd(this.__clicked, value);\n    },\n\n    remove_clicked: function (value) {\n        this.__clicked = ss.bindSub(this.__clicked, value);\n    },\n\n    add_annotationClicked: function (value) {\n        this.__annotationClicked = ss.bindAdd(this.__annotationClicked, value);\n    },\n\n    remove_annotationClicked: function (value) {\n        this.__annotationClicked = ss.bindSub(this.__annotationClicked, value);\n    },\n\n    add_imageryLoaded: function (value) {\n        this.__imageryLoaded = ss.bindAdd(this.__imageryLoaded, value);\n    },\n\n    remove_imageryLoaded: function (value) {\n        this.__imageryLoaded = ss.bindSub(this.__imageryLoaded, value);\n    },\n\n    add_tourReady: function (value) {\n        this.__tourReady = ss.bindAdd(this.__tourReady, value);\n    },\n\n    remove_tourReady: function (value) {\n        this.__tourReady = ss.bindSub(this.__tourReady, value);\n    },\n\n    add_tourError: function (value) {\n        this.__tourError = ss.bindAdd(this.__tourError, value);\n    },\n\n    remove_tourError: function (value) {\n        this.__tourError = ss.bindSub(this.__tourError, value);\n    },\n\n    add_tourPaused: function (value) {\n        this.__tourPaused = ss.bindAdd(this.__tourPaused, value);\n    },\n\n    remove_tourPaused: function (value) {\n        this.__tourPaused = ss.bindSub(this.__tourPaused, value);\n    },\n\n    add_tourResumed: function (value) {\n        this.__tourResumed = ss.bindAdd(this.__tourResumed, value);\n    },\n\n    remove_tourResumed: function (value) {\n        this.__tourResumed = ss.bindSub(this.__tourResumed, value);\n    },\n\n    add_tourEnded: function (value) {\n        this.__tourEnded = ss.bindAdd(this.__tourEnded, value);\n    },\n\n    remove_tourEnded: function (value) {\n        this.__tourEnded = ss.bindSub(this.__tourEnded, value);\n    },\n\n    add_slideChanged: function (value) {\n        this.__slideChanged = ss.bindAdd(this.__slideChanged, value);\n    },\n\n    remove_slideChanged: function (value) {\n        this.__slideChanged = ss.bindSub(this.__slideChanged, value);\n    },\n\n    //UI will set this to a function that takes 2 string properties (prop,val)\n    //(\"title\", \"left\", or \"right\" for the labels, \"pos\" for the slider pos)\n    //Pass a 0-1 float to set the slider position (stringify it if you need to for strong typing)\n\n    add_timeScrubberHook: function (value) {\n        this.__timeScrubberHook = ss.bindAdd(this.__timeScrubberHook, value);\n    },\n\n    remove_timeScrubberHook: function (value) {\n        this.__timeScrubberHook = ss.bindSub(this.__timeScrubberHook, value);\n    },\n\n    setTimeScrubberPosition: function (posLeft) {\n        LayerManager.setTimeSliderValue(posLeft);\n    },\n\n    setTimeSlider: function (name, value) {\n        this.__timeScrubberHook(name, value);\n    },\n\n    showColorPicker: function (pickerInstance, e) {\n        if (this.__colorPickerDisplay != null) {\n            this.__colorPickerDisplay(pickerInstance, e);\n        }\n    },\n\n    displayVoTableLayer: function (layer) {\n        if (this.__voTableDisplay != null) {\n            this.__voTableDisplay(layer, new ss.EventArgs());\n        }\n    },\n\n    refreshLayerManagerNow: function () {\n        if (this.__refreshLayerManager != null) {\n            this.__refreshLayerManager(null, new ss.EventArgs());\n        }\n    },\n\n    _fireTourReady: function () {\n        if (this.__tourReady != null) {\n            this.__tourReady(this, new ss.EventArgs());\n        }\n    },\n\n    _fireTourError: function (ex) {\n        if (this.__tourError != null) {\n            this.__tourError(ex, new ss.EventArgs());\n        }\n    },\n\n    _fireTourPaused: function () {\n        if (this.__tourPaused != null) {\n            this.__tourPaused(this, new ss.EventArgs());\n        }\n    },\n\n    _fireTourResume: function () {\n        if (this.__tourResumed != null) {\n            this.__tourResumed(this, new ss.EventArgs());\n        }\n    },\n\n    _fireTourEnded: function () {\n        if (this.__tourEnded != null) {\n            this.__tourEnded(this, new ss.EventArgs());\n        }\n    },\n\n    _fireImageryLoaded: function () {\n        if (this.__imageryLoaded != null) {\n            this.__imageryLoaded(this, new ss.EventArgs());\n        }\n    },\n\n    _fireClick: function (ra, dec) {\n        if (this.__clicked != null) {\n            this.__clicked(this, new ArrivedEventArgs(ra, dec, globalRenderContext.viewCamera.zoom));\n        }\n    },\n\n    _fireArrived: function (ra, dec, zoom) {\n        if (this.__arrived != null) {\n            this.__arrived(this, new ArrivedEventArgs(ra, dec, zoom));\n        }\n    },\n\n    _fireAnnotationclicked: function (RA, Dec, id) {\n        try {\n            if (this.__annotationClicked != null) {\n                this.__annotationClicked(this, new AnnotationClickEventArgs(RA, Dec, id));\n            }\n        }\n        catch ($e1) {\n        }\n    },\n\n    _fireSlideChanged: function (caption) {\n        try {\n            if (this.__slideChanged != null) {\n                this.__slideChanged(this, new SlideChangedEventArgs(caption));\n            }\n        }\n        catch ($e1) {\n        }\n    },\n\n    endInit: function () {\n        if (this._missedReady) {\n            this._fireReady();\n        }\n    },\n\n    gotoRaDecZoom: function (ra, dec, zoom, instant, roll) {\n        if (globalWWTControl != null) {\n            globalWWTControl.gotoRADecZoom(ra / 15, dec, zoom * 6, instant, roll);\n        }\n    },\n\n    setBackgroundImageByName: function (name) {\n        if (globalWWTControl != null) {\n            globalWWTControl.setBackgroundImageByName(name);\n        }\n    },\n\n    // Call this to add a VOTable to layers\n    addVoTableLayer: function (table) {\n        return LayerManager.addVoTableLayer(table, 'Vo Table');\n    },\n\n    getLayers: function () {\n        return LayerManager.get_layerList();\n    },\n\n    setForegroundImageByName: function (name) {\n        if (globalWWTControl != null) {\n            globalWWTControl.setForegroundImageByName(name);\n            globalRenderContext.viewCamera.opacity = 100;\n        }\n    },\n\n    setForegroundOpacity: function (opacity) {\n        if (globalWWTControl != null) {\n            globalRenderContext.viewCamera.opacity = opacity;\n        }\n    },\n\n    addCatalogHipsByName: function (name) {\n        if (globalWWTControl != null) {\n            globalWWTControl.addCatalogHipsByName(name);\n        }\n    },\n\n    addCatalogHipsByNameWithCallback: function (name, onLoad) {\n        if (globalWWTControl != null) {\n            globalWWTControl.addCatalogHipsByNameWithCallback(name, onLoad);\n        }\n    },\n\n    removeCatalogHipsByName: function (name) {\n        if (globalWWTControl != null) {\n            globalWWTControl.removeCatalogHipsByName(name);\n        }\n    },\n\n    getCatalogHipsDataInView: function (name, limit, onComplete) {\n        if (globalWWTControl != null) {\n            globalWWTControl.getCatalogHipsDataInView(name, limit, onComplete);\n        }\n    },\n\n    setCutsForFits: function (imagesetName, min, max) {\n        if (globalWWTControl != null) {\n            globalWWTControl.setCutsForFits(imagesetName, min, max);\n        }\n    },\n\n    setColorMapForFits: function (imagesetName, colorMapName) {\n        if (globalWWTControl != null) {\n            globalWWTControl.setColorMapForFits(imagesetName, colorMapName);\n        }\n    },\n\n    setScaleTypeForFits: function (imagesetName, scaleType) {\n        if (globalWWTControl != null) {\n            globalWWTControl.setScaleTypeForFits(imagesetName, scaleType);\n        }\n    },\n\n    hideUI: function (hide) { },\n\n    loadTour: function (url) {\n        if (globalWWTControl != null) {\n            globalWWTControl.playTour(url);\n        }\n    },\n\n    loadFits: function (url) {\n        return this.loadFitsLayer(url, '', true, null);\n    },\n\n    loadFitsLayer: function (url, name, gotoTarget, loaded) {\n        return this.addImageSetLayer(url, 'fits', name, gotoTarget, loaded);\n    },\n\n    addImageSetLayer: function (url, mode, name, gotoTarget, loaded) {\n        if (mode != null && mode.toLowerCase() === 'fits') {\n            return ScriptInterface._addFitsLayer(url, name, gotoTarget, loaded);\n        } else if (mode != null && mode.toLowerCase() === 'preloaded') {\n            var imageset = globalWWTControl.getImageSetByUrl(url);\n            if (imageset != null) {\n                return ScriptInterface._addImageSet(name, gotoTarget, loaded, imageset);\n            }\n        } else {\n            var imageset = globalWWTControl.getImageSetByUrl(url);\n            if (imageset != null) {\n                return ScriptInterface._addImageSet(name, gotoTarget, loaded, imageset);\n            }\n            else if (ScriptInterface._containsFitsLikeExtentsion(url)) {\n                return ScriptInterface._addFitsLayer(url, name, gotoTarget, loaded);\n            }\n        }\n        return null;\n    },\n\n    setImageSetLayerOrder: function (id, order) {\n        var layer = LayerManager.get_layerList()[id];\n        if (ss.canCast(layer, ImageSetLayer) && order >= 0) {\n            ss.remove(layerManagerGetAllMaps()[layer.get_referenceFrame()].layers, layer);\n\n            //In case of order > Layers.length, the layer is properly put at the end of the list\n            layerManagerGetAllMaps()[layer.get_referenceFrame()].layers.splice(order, 0, layer);\n        }\n    },\n\n    isUsingWebGl2: function () {\n        return useGlVersion2;\n    },\n\n    get_hideTourFeedback: function () {\n        return this.hideTourFeedback;\n    },\n\n    set_hideTourFeedback: function (value) {\n        this.hideTourFeedback = value;\n        return value;\n    },\n\n    playTour: function () {\n        if (globalWWTControl != null) {\n            globalWWTControl.playCurrentTour();\n        }\n    },\n\n    stopTour: function () {\n        if (globalWWTControl != null) {\n            globalWWTControl.stopCurrentTour();\n        }\n    },\n\n    loadImageCollection: function (url, loadChildFolders) {\n        var $this = this;\n\n        this._imageUrl = url;\n        loadWtmlFile(url, function () {\n            $this._fireCollectionLoaded(url);\n        }, loadChildFolders);\n    },\n\n    _imageFileLoaded: function () {\n        this._fireCollectionLoaded(this._imageUrl);\n    },\n\n    zoom: function (factor) {\n        if (globalWWTControl != null) {\n            globalWWTControl.zoom(factor);\n        }\n        return;\n    },\n\n    getRA: function () {\n        if (globalWWTControl != null) {\n            return globalRenderContext.get_RA();\n        }\n        return 0;\n    },\n\n    getDec: function () {\n        if (globalWWTControl != null) {\n            return globalRenderContext.get_dec();\n        }\n        return 0;\n    },\n\n    createFolder: function () {\n        var folder = new Folder();\n        return folder;\n    },\n\n    createPolygon: function (fill) {\n        var p = new Poly();\n        p.set_fill(fill);\n        return p;\n    },\n\n    createPolyLine: function (fill) {\n        return new PolyLine();\n    },\n\n    createCircle: function (fill) {\n        var c = new Circle();\n        c.set_fill(fill);\n        return c;\n    },\n\n    addAnnotation: function (annotation) {\n        if (annotation != null && ss.canCast(annotation, Annotation)) {\n            if (globalWWTControl != null) {\n                globalWWTControl._addAnnotation(annotation);\n            }\n        }\n    },\n\n    removeAnnotation: function (annotation) {\n        if (annotation != null) {\n            if (globalWWTControl != null) {\n                globalWWTControl._removeAnnotation(annotation);\n            }\n        }\n    },\n\n    clearAnnotations: function () {\n        if (globalWWTControl != null) {\n            globalWWTControl._clearAnnotations();\n        }\n    },\n\n    get_smoothAnimation: function () {\n        return this._smoothAnimation;\n    },\n\n    set_smoothAnimation: function (value) {\n        this._smoothAnimation = value;\n        return value;\n    },\n\n    get_showCaptions: function () {\n        return this._showCaptions;\n    },\n\n    set_showCaptions: function (value) {\n        this._showCaptions = value;\n        return value;\n    },\n\n    loadVOTable: function (url, useCurrentView) { },\n\n    get_fov: function () {\n        if (globalWWTControl != null) {\n            return globalRenderContext.viewCamera.zoom / 6;\n        }\n        return 60;\n    }\n};\n\nregisterType(\"ScriptInterface\", [ScriptInterface, ScriptInterface$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Planet-related code that can come lower in the dependency graph.\n\nimport { registerType, registerEnum } from \"./typesystem.js\";\nimport { Colors } from \"./color.js\";\nimport { ConstellationFilter } from \"./constellation_filter.js\";\nimport { ISettings } from \"./interfaces.js\";\n\n\n// wwtlib.StockSkyOverlayTypes\n//\n// This was defined in `Tours/ISettings.cs`, which we've folded into `interfaces.js`.\n\nexport var StockSkyOverlayTypes = {\n    empty: 0,\n    equatorialGrid: 1,\n    equatorialGridText: 2,\n    galacticGrid: 3,\n    galacticGridText: 4,\n    eclipticGrid: 5,\n    eclipticGridText: 6,\n    eclipticOverview: 7,\n    eclipticOverviewText: 8,\n    precessionChart: 9,\n    altAzGrid: 10,\n    altAzGridText: 11,\n    constellationFigures: 12,\n    constellationBoundaries: 13,\n    constellationFocusedOnly: 14,\n    constellationNames: 15,\n    constellationPictures: 16,\n    fadeToBlack: 17,\n    fadeToLogo: 18,\n    fadeToGradient: 19,\n    screenBroadcast: 20,\n    fadeRemoteOnly: 21,\n    skyGrids: 22,\n    constellations: 23,\n    solarSystemStars: 24,\n    solarSystemMilkyWay: 25,\n    solarSystemCosmos: 26,\n    solarSystemOrbits: 27,\n    solarSystemPlanets: 28,\n    solarSystemAsteroids: 29,\n    solarSystemLighting: 30,\n    solarSystemMinorOrbits: 31,\n    showEarthCloudLayer: 32,\n    showElevationModel: 33,\n    showAtmosphere: 34,\n    multiResSolarSystemBodies: 35,\n    auroraBorialis: 36,\n    earthCutAway: 37,\n    showSolarSystem: 38,\n    clouds8k: 39,\n    filedOfView: 40,\n    showISSModel: 41,\n    solarSystemCMB: 42,\n    mpcZone1: 43,\n    mpcZone2: 44,\n    mpcZone3: 45,\n    mpcZone4: 46,\n    mpcZone5: 47,\n    mpcZone6: 48,\n    mpcZone7: 49,\n    orbitFilters: 50\n};\n\nregisterType(\"StockSkyOverlayTypes\", StockSkyOverlayTypes);\nregisterEnum(\"StockSkyOverlayTypes\", StockSkyOverlayTypes);\n\n\n// wwtlib.SettingParameter\n//\n// This was defined in `Tours/ISettings.cs`, which we've folded into `interfaces.js`.\n\nexport function SettingParameter(edgeTrigger, opacity, targetState, filter) {\n    this.targetState = false;\n    this.edgeTrigger = false;\n    this.opacity = 0;\n    this.edgeTrigger = edgeTrigger;\n    this.opacity = opacity;\n    this.targetState = targetState;\n    this.filter = filter;\n}\n\nvar SettingParameter$ = {};\n\nregisterType(\"SettingParameter\", [SettingParameter, SettingParameter$, null]);\n\n\n// wwtlib.Settings\n\nexport function Settings() {\n    this.autoRepeatTour = false;\n    this._localHorizonMode = false;\n    this._galacticMode = false;\n    this._constellationBoundryColor = 'blue';\n    this._constellationSelectionColor = 'yellow';\n    this._constellationFigureColor = 'red';\n    this._showConstellationFigures = true;\n    this._showConstellationBoundries = true;\n    this._showConstellationSelection = true;\n    this._showCrosshairs = true;\n    this._crosshairsColor = 'white';\n    this._showEcliptic = false;\n    this._locationLat = 47.717;\n    this._locationLng = -122.0858;\n    this._locationAltitude = 100;\n    this._showFiledOfView = false;\n    this._actualPlanetScale = true;\n    this._fovCamera = 0;\n    this._fovEyepiece = 0;\n    this._fovTelescope = 0;\n    this._showClouds = false;\n    this._showGrid = false;\n    this._showHorizon = true;\n    this._showHorizonPanorama = false;\n    this._showMoonsAsPointSource = true;\n    this._showSolarSystem = true;\n    this._solarSystemStars = true;\n    this._solarSystemMilkyWay = true;\n    this._solarSystemCosmos = true;\n    this._solarSystemOrbits = true;\n    this._solarSystemOverlays = true;\n    this._solarSystemLighting = true;\n    this._solarSystemMultiRes = true;\n    this._solarSystemScale = 1;\n    this._smoothPan = true;\n    this._showElevationModel = true;\n    this._showEquatorialGridText = false;\n    this._showGalacticGrid = false;\n    this._showGalacticGridText = false;\n    this._showEclipticGrid = false;\n    this._showEclipticGridText = false;\n    this._showEclipticOverviewText = false;\n    this._showAltAzGrid = false;\n    this._eclipticGridColor = Colors.get_green();\n    this._galacticGridColor = Colors.get_cyan();\n    this._altAzGridColor = Colors.get_magenta();\n    this._precessionChartColor = Colors.get_orange();\n    this._eclipticColor = Colors.get_blue();\n    this._equatorialGridColor = Colors.get_white();\n    this._showAltAzGridText = false;\n    this._showPrecessionChart = false;\n    this._showConstellationPictures = false;\n    this._showConstellationLabels = false;\n    this._constellationLabelsHeight = 80;\n    this._solarSystemCMB = true;\n    this._solarSystemMinorPlanets = false;\n    this._solarSystemPlanets = true;\n    this._showEarthSky = true;\n    this._solarSystemMinorOrbits = false;\n    this._constellationsEnabled = '';\n    this._constellationFiguresFilter = new ConstellationFilter();\n    this._constellationBoundariesFilter = new ConstellationFilter();\n    this._constellationNamesFilter = new ConstellationFilter();\n    this._constellationArtFilter = new ConstellationFilter();\n    this._showSkyOverlays = true;\n    this._showConstellations = true;\n    this._showSkyNode = true;\n    this._showSkyGrids = true;\n    this._showSkyOverlaysIn3d = true;\n    this._earthCutawayView = false;\n    this._showISSModel = false;\n    this._milkyWayModel = false;\n    this._minorPlanetsFilter = 255;\n    this._planetOrbitsFilter = 2147483647;\n    this._constellations = true;\n}\n\nSettings._active = null;\nSettings.tourSettings = null;\n\nSettings.get_current = function () {\n    if (Settings._active == null) {\n        Settings._active = new Settings();\n    }\n    return Settings._active;\n};\n\nSettings.get_globalSettings = function () {\n    if (Settings._active == null) {\n        Settings._active = new Settings();\n    }\n    return Settings._active;\n};\n\nSettings.get_active = function () {\n    if (Settings._active == null) {\n        Settings._active = new Settings();\n    }\n    if (Settings.tourSettings != null) {\n        return Settings.tourSettings;\n    }\n    return Settings._active;\n};\n\nvar Settings$ = {\n    get_constellationFigureColor: function () {\n        return this._constellationFigureColor;\n    },\n\n    set_constellationFigureColor: function (value) {\n        this._constellationFigureColor = value;\n        return value;\n    },\n\n    get_constellationBoundryColor: function () {\n        return this._constellationBoundryColor;\n    },\n\n    set_constellationBoundryColor: function (value) {\n        this._constellationBoundryColor = value;\n        return value;\n    },\n\n    get_constellationSelectionColor: function () {\n        return this._constellationSelectionColor;\n    },\n\n    set_constellationSelectionColor: function (value) {\n        this._constellationSelectionColor = value;\n        return value;\n    },\n\n    get_showCrosshairs: function () {\n        return this._showCrosshairs;\n    },\n\n    set_showCrosshairs: function (value) {\n        this._showCrosshairs = value;\n        return value;\n    },\n\n    get_smoothPan: function () {\n        return this._smoothPan;\n    },\n\n    set_smoothPan: function (value) {\n        this._smoothPan = value;\n        return value;\n    },\n\n    get_crosshairsColor: function () {\n        return this._crosshairsColor;\n    },\n\n    set_crosshairsColor: function (value) {\n        this._crosshairsColor = value;\n        return value;\n    },\n\n    get_actualPlanetScale: function () {\n        return this._actualPlanetScale;\n    },\n\n    set_actualPlanetScale: function (value) {\n        this._actualPlanetScale = value;\n        return value;\n    },\n\n    get_fovCamera: function () {\n        return this._fovCamera;\n    },\n\n    get_fovEyepiece: function () {\n        return this._fovEyepiece;\n    },\n\n    get_fovTelescope: function () {\n        return this._fovTelescope;\n    },\n\n    get_locationAltitude: function () {\n        return this._locationAltitude;\n    },\n\n    set_locationAltitude: function (value) {\n        this._locationAltitude = value;\n        return value;\n    },\n\n    get_locationLat: function () {\n        return this._locationLat;\n    },\n\n    set_locationLat: function (value) {\n        this._locationLat = value;\n        return value;\n    },\n\n    get_locationLng: function () {\n        return this._locationLng;\n    },\n\n    set_locationLng: function (value) {\n        this._locationLng = value;\n        return value;\n    },\n\n    get_showClouds: function () {\n        return this._showClouds;\n    },\n\n    get_showConstellationBoundries: function () {\n        return this._showConstellationBoundries;\n    },\n\n    set_showConstellationBoundries: function (value) {\n        this._showConstellationBoundries = value;\n        return value;\n    },\n\n    get_showConstellationFigures: function () {\n        return this._showConstellationFigures;\n    },\n\n    set_showConstellationFigures: function (value) {\n        this._showConstellationFigures = value;\n        return value;\n    },\n\n    get_showConstellationSelection: function () {\n        return this._showConstellationSelection;\n    },\n\n    set_showConstellationSelection: function (value) {\n        this._showConstellationSelection = value;\n        return value;\n    },\n\n    get_showEcliptic: function () {\n        return this._showEcliptic;\n    },\n\n    set_showEcliptic: function (value) {\n        this._showEcliptic = value;\n        return value;\n    },\n\n    get_showElevationModel: function () {\n        return this._showElevationModel;\n    },\n\n    set_showElevationModel: function (value) {\n        this._showElevationModel = value;\n        return value;\n    },\n\n    get_showFieldOfView: function () {\n        return this._showFiledOfView;\n    },\n\n    get_showGrid: function () {\n        return this._showGrid;\n    },\n\n    set_showGrid: function (value) {\n        this._showGrid = value;\n        return value;\n    },\n\n    get_showHorizon: function () {\n        return this._showHorizon;\n    },\n\n    set_showHorizon: function (value) {\n        this._showHorizon = value;\n        return value;\n    },\n\n    get_showHorizonPanorama: function () {\n        return this._showHorizonPanorama;\n    },\n\n    get_showMoonsAsPointSource: function () {\n        return this._showMoonsAsPointSource;\n    },\n\n    get_showSolarSystem: function () {\n        return this._showSolarSystem;\n    },\n\n    set_showSolarSystem: function (value) {\n        this._showSolarSystem = value;\n        return value;\n    },\n\n    get_localHorizonMode: function () {\n        return this._localHorizonMode;\n    },\n\n    set_localHorizonMode: function (value) {\n        this._localHorizonMode = value;\n        return value;\n    },\n\n    get_galacticMode: function () {\n        return this._galacticMode;\n    },\n\n    set_galacticMode: function (value) {\n        this._galacticMode = value;\n        return value;\n    },\n\n    get_solarSystemStars: function () {\n        return this._solarSystemStars;\n    },\n\n    set_solarSystemStars: function (value) {\n        this._solarSystemStars = value;\n        return value;\n    },\n\n    get_solarSystemMilkyWay: function () {\n        return this._solarSystemMilkyWay;\n    },\n\n    set_solarSystemMilkyWay: function (value) {\n        this._solarSystemMilkyWay = value;\n        return value;\n    },\n\n    get_solarSystemCosmos: function () {\n        return this._solarSystemCosmos;\n    },\n\n    set_solarSystemCosmos: function (value) {\n        this._solarSystemCosmos = value;\n        return value;\n    },\n\n    get_solarSystemOrbits: function () {\n        return this._solarSystemOrbits;\n    },\n\n    set_solarSystemOrbits: function (value) {\n        this._solarSystemOrbits = value;\n        return value;\n    },\n\n    get_solarSystemOverlays: function () {\n        return this._solarSystemOverlays;\n    },\n\n    set_solarSystemOverlays: function (value) {\n        this._solarSystemOverlays = value;\n        return value;\n    },\n\n    get_solarSystemLighting: function () {\n        return this._solarSystemLighting;\n    },\n\n    set_solarSystemLighting: function (value) {\n        this._solarSystemLighting = value;\n        return value;\n    },\n\n    get_solarSystemMultiRes: function () {\n        return true;\n    },\n\n    set_solarSystemMultiRes: function (value) {\n        this._solarSystemMultiRes = value;\n        return value;\n    },\n\n    get_solarSystemScale: function () {\n        return this._solarSystemScale;\n    },\n\n    set_solarSystemScale: function (value) {\n        this._solarSystemScale = value;\n        return value;\n    },\n\n    get_showEquatorialGridText: function () {\n        return this._showEquatorialGridText;\n    },\n\n    set_showEquatorialGridText: function (value) {\n        this._showEquatorialGridText = value;\n        return value;\n    },\n\n    get_showGalacticGrid: function () {\n        return this._showGalacticGrid;\n    },\n\n    set_showGalacticGrid: function (value) {\n        this._showGalacticGrid = value;\n        return value;\n    },\n\n    get_showGalacticGridText: function () {\n        return this._showGalacticGridText;\n    },\n\n    set_showGalacticGridText: function (value) {\n        this._showGalacticGridText = value;\n        return value;\n    },\n\n    get_showEclipticGrid: function () {\n        return this._showEclipticGrid;\n    },\n\n    set_showEclipticGrid: function (value) {\n        this._showEclipticGrid = value;\n        return value;\n    },\n\n    get_showEclipticGridText: function () {\n        return this._showEclipticGridText;\n    },\n\n    set_showEclipticGridText: function (value) {\n        this._showEclipticGridText = value;\n        return value;\n    },\n\n    get_showEclipticOverviewText: function () {\n        return this._showEclipticOverviewText;\n    },\n\n    set_showEclipticOverviewText: function (value) {\n        this._showEclipticOverviewText = value;\n        return value;\n    },\n\n    get_showAltAzGrid: function () {\n        return this._showAltAzGrid;\n    },\n\n    set_showAltAzGrid: function (value) {\n        this._showAltAzGrid = value;\n        return value;\n    },\n\n    get_eclipticGridColor: function () {\n        return this._eclipticGridColor;\n    },\n\n    set_eclipticGridColor: function (value) {\n        this._eclipticGridColor = value;\n        return value;\n    },\n\n    get_galacticGridColor: function () {\n        return this._galacticGridColor;\n    },\n\n    set_galacticGridColor: function (value) {\n        this._galacticGridColor = value;\n        return value;\n    },\n\n    get_altAzGridColor: function () {\n        return this._altAzGridColor;\n    },\n\n    set_altAzGridColor: function (value) {\n        this._altAzGridColor = value;\n        return value;\n    },\n\n    get_precessionChartColor: function () {\n        return this._precessionChartColor;\n    },\n\n    set_precessionChartColor: function (value) {\n        this._precessionChartColor = value;\n        return value;\n    },\n\n    get_eclipticColor: function () {\n        return this._eclipticColor;\n    },\n\n    set_eclipticColor: function (value) {\n        this._eclipticColor = value;\n        return value;\n    },\n\n    get_equatorialGridColor: function () {\n        return this._equatorialGridColor;\n    },\n\n    set_equatorialGridColor: function (value) {\n        this._equatorialGridColor = value;\n        return value;\n    },\n\n    get_showAltAzGridText: function () {\n        return this._showAltAzGridText;\n    },\n\n    set_showAltAzGridText: function (value) {\n        this._showAltAzGridText = value;\n        return value;\n    },\n\n    get_showPrecessionChart: function () {\n        return this._showPrecessionChart;\n    },\n\n    set_showPrecessionChart: function (value) {\n        this._showPrecessionChart = value;\n        return value;\n    },\n\n    get_showConstellationPictures: function () {\n        return this._showConstellationPictures;\n    },\n\n    set_showConstellationPictures: function (value) {\n        this._showConstellationPictures = value;\n        return value;\n    },\n\n    get_showConstellationLabels: function () {\n        return this._showConstellationLabels;\n    },\n\n    set_showConstellationLabels: function (value) {\n        this._showConstellationLabels = value;\n        return value;\n    },\n\n    get_constellationLabelsHeight: function () {\n        return this._constellationLabelsHeight;\n    },\n\n    set_constellationLabelsHeight: function (value) {\n        this._constellationLabelsHeight = value;\n        return value;\n    },\n\n    get_solarSystemCMB: function () {\n        return this._solarSystemCMB;\n    },\n\n    set_solarSystemCMB: function (value) {\n        this._solarSystemCMB = value;\n        return value;\n    },\n\n    get_solarSystemMinorPlanets: function () {\n        return this._solarSystemMinorPlanets;\n    },\n\n    set_solarSystemMinorPlanets: function (value) {\n        this._solarSystemMinorPlanets = value;\n        return value;\n    },\n\n    get_solarSystemPlanets: function () {\n        return this._solarSystemPlanets;\n    },\n\n    set_solarSystemPlanets: function (value) {\n        this._solarSystemPlanets = value;\n        return value;\n    },\n\n    get_showEarthSky: function () {\n        return this._showEarthSky;\n    },\n\n    set_showEarthSky: function (value) {\n        this._showEarthSky = value;\n        return value;\n    },\n\n    get_solarSystemMinorOrbits: function () {\n        return this._solarSystemMinorOrbits;\n    },\n\n    set_solarSystemMinorOrbits: function (value) {\n        this._solarSystemMinorOrbits = value;\n        return value;\n    },\n\n    get_constellationsEnabled: function () {\n        return this._constellationsEnabled;\n    },\n\n    set_constellationsEnabled: function (value) {\n        this._constellationsEnabled = value;\n        return value;\n    },\n\n    get_constellationFiguresFilter: function () {\n        return this._constellationFiguresFilter;\n    },\n\n    set_constellationFiguresFilter: function (value) {\n        this._constellationFiguresFilter = value;\n        return value;\n    },\n\n    get_constellationBoundariesFilter: function () {\n        return this._constellationBoundariesFilter;\n    },\n\n    set_constellationBoundariesFilter: function (value) {\n        this._constellationBoundariesFilter = value;\n        return value;\n    },\n\n    get_constellationNamesFilter: function () {\n        return this._constellationNamesFilter;\n    },\n\n    set_constellationNamesFilter: function (value) {\n        this._constellationNamesFilter = value;\n        return value;\n    },\n\n    get_constellationArtFilter: function () {\n        return this._constellationArtFilter;\n    },\n\n    set_constellationArtFilter: function (value) {\n        this._constellationArtFilter = value;\n        return value;\n    },\n\n    get_showSkyOverlays: function () {\n        return this._showSkyOverlays;\n    },\n\n    set_showSkyOverlays: function (value) {\n        this._showSkyOverlays = value;\n        return value;\n    },\n\n    get_showConstellations: function () {\n        return this._showConstellations;\n    },\n\n    set_showConstellations: function (value) {\n        this._showConstellations = value;\n        return value;\n    },\n\n    get_showSkyNode: function () {\n        return this._showSkyNode;\n    },\n\n    set_showSkyNode: function (value) {\n        this._showSkyNode = value;\n        return value;\n    },\n\n    get_showSkyGrids: function () {\n        return this._showSkyGrids;\n    },\n\n    set_showSkyGrids: function (value) {\n        this._showSkyGrids = value;\n        return value;\n    },\n\n    get_showSkyOverlaysIn3d: function () {\n        return this._showSkyOverlaysIn3d;\n    },\n\n    set_showSkyOverlaysIn3d: function (value) {\n        this._showSkyOverlaysIn3d = value;\n        return value;\n    },\n\n    get_earthCutawayView: function () {\n        return this._earthCutawayView;\n    },\n\n    set_earthCutawayView: function (value) {\n        this._earthCutawayView = value;\n        return value;\n    },\n\n    get_showISSModel: function () {\n        return this._showISSModel;\n    },\n\n    set_showISSModel: function (value) {\n        this._showISSModel = value;\n        return value;\n    },\n\n    get_milkyWayModel: function () {\n        return this._milkyWayModel;\n    },\n\n    set_milkyWayModel: function (value) {\n        this._milkyWayModel = value;\n        return value;\n    },\n\n    get_minorPlanetsFilter: function () {\n        return this._minorPlanetsFilter;\n    },\n\n    set_minorPlanetsFilter: function (value) {\n        this._minorPlanetsFilter = value;\n        return value;\n    },\n\n    get_planetOrbitsFilter: function () {\n        return this._planetOrbitsFilter;\n    },\n\n    set_planetOrbitsFilter: function (value) {\n        this._planetOrbitsFilter = value;\n        return value;\n    },\n\n    get_constellations: function () {\n        return this._constellations;\n    },\n\n    set_constellations: function (value) {\n        this._constellations = value;\n        return value;\n    },\n\n    getSetting: function (type) {\n        if (type === 17) {\n            return new SettingParameter(true, 0, !!0, null);\n        }\n        return new SettingParameter(false, 1, false, null);\n    }\n};\n\nregisterType(\"Settings\", [Settings, Settings$, null, ISettings]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A \"tile\" that is really a single image displayed using a tangential\n// projection.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { useGl, useGlVersion2 } from \"./render_globals.js\";\nimport { WcsImage } from \"./layers/wcs_image.js\";\nimport { TangentTile, LatLngEdges } from \"./tangent_tile.js\";\n\n\n// wwtlib.SkyImageTile\n\nexport function SkyImageTile(level, x, y, dataset, parent) {\n    this.pixelCenterX = 0;\n    this.pixelCenterY = 0;\n    this.scaleX = 0.01;\n    this.scaleY = 0.01;\n    this.height = 0;\n    this.width = 0;\n    TangentTile.call(this, level, x, y, dataset, parent);\n    this.pixelCenterX = dataset.get_offsetX();\n    this.pixelCenterY = dataset.get_offsetY();\n    this.scaleX = -(this.scaleY = dataset.get_baseTileDegrees());\n    if (dataset.get_bottomsUp()) {\n        this.scaleX = -this.scaleX;\n    }\n    this.sphereCenter = this.geoTo3dTan(0, 0);\n    this.radius = 1.25;\n    this.computeBoundingSphere();\n}\n\nvar SkyImageTile$ = {\n    getLatLngEdges: function () {\n        var edges = new LatLngEdges();\n        var wcsImage = ss.safeCast(this.dataset.get_wcsImage(), WcsImage);\n        if (wcsImage != null && useGl) {\n            if (useGlVersion2) {\n                this.width = wcsImage.get_sizeX();\n                this.height = wcsImage.get_sizeY();\n            }\n            else {\n                this.height = this.bmp.height;\n                this.width = this.bmp.width;\n                if (this.bmp.height !== wcsImage.get_sizeY()) {\n                    this.pixelCenterY += this.bmp.height - wcsImage.get_sizeY();\n                }\n            }\n        } else if (this.texture != null) {\n            this.height = this.texture.naturalHeight;\n            this.width = this.texture.naturalWidth;\n        } else {\n            this.height = 256;\n            this.width = 256;\n        }\n        edges.latMin = 0 + (this.scaleY * (this.height - this.pixelCenterY));\n        edges.latMax = 0 - (this.scaleY * this.pixelCenterY);\n        edges.lngMin = 0 + (this.scaleX * this.pixelCenterX);\n        edges.lngMax = 0 - (this.scaleX * (this.width - this.pixelCenterX));\n        return edges;\n    }\n};\n\nregisterType(\"SkyImageTile\", [SkyImageTile, SkyImageTile$, TangentTile]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Text rendered on the sky.\n\nimport { ss } from \"./ss.js\";\nimport { registerType, registerEnum } from \"./typesystem.js\";\nimport { Vector2d, Vector3d, Matrix3d, PositionTexture } from \"./double3d.js\";\nimport { Util } from \"./baseutil.js\";\nimport { Colors } from \"./color.js\";\nimport { WEBGL } from \"./graphics/webgl_constants.js\";\nimport { PositionTextureVertexBuffer } from \"./graphics/gl_buffers.js\";\nimport { Texture } from \"./graphics/texture.js\";\nimport { TextShader } from \"./graphics/shaders.js\";\nimport { TextObject } from \"./tours/text_object.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { Rectangle } from \"./util.js\";\nimport { WebFile } from \"./web_file.js\";\n\n\n// wwtlib.Alignment\n\nexport var Alignment = {\n    center: 0,\n    left: 1\n};\n\nregisterType(\"Alignment\", Alignment);\nregisterEnum(\"Alignment\", Alignment);\n\n\n// wwtlib.Text3dBatch\n\nexport function Text3dBatch(height) {\n    this.height = 128;\n    this.items = [];\n    this._glyphVersion = -1;\n    this.viewTransform = Matrix3d.get_identity();\n    this._textObject = new TextObject();\n    this._vertCount = 0;\n    this.height = (height * 3);\n}\n\nvar Text3dBatch$ = {\n    add: function (newItem) {\n        this.items.push(newItem);\n    },\n\n    draw: function (renderContext, opacity, color) {\n        if (renderContext.gl == null) {\n            var viewPoint = Vector3d._transformCoordinate(renderContext.get_viewPoint(), this.viewTransform);\n            var drawHeight = (this.height / renderContext.get_fovAngle()) * renderContext.height / 180;\n            var $enum1 = ss.enumerate(this.items);\n            while ($enum1.moveNext()) {\n                var t3d = $enum1.current;\n                var screenSpacePnt = renderContext.WVP.transform(t3d.center);\n                if (screenSpacePnt.z < 0) {\n                    continue;\n                }\n                if (Vector3d.dot(viewPoint, t3d.center) < 0.55) {\n                    continue;\n                }\n                var screenSpaceTop = renderContext.WVP.transform(t3d.top);\n                var rotation = Math.atan2(screenSpacePnt.x - screenSpaceTop.x, screenSpacePnt.y - screenSpaceTop.y);\n                var ctx = renderContext.device;\n                ctx.save();\n                ctx.translate(screenSpacePnt.x, screenSpacePnt.y);\n                ctx.rotate(-rotation); // todo update with up vector\n                ctx.globalAlpha = opacity;\n                ctx.fillStyle = color.toString();\n                ctx.font = 'normal' + ' ' + ((false) ? 'bold' : 'normal') + ' ' + Math.round(drawHeight * 1.2).toString() + 'px ' + 'Arial';\n                ctx.textBaseline = 'top';\n                var tm = ctx.measureText(t3d.text);\n                ctx.fillText(t3d.text, -tm.width / 2, -drawHeight / 2);\n                ctx.restore();\n            }\n        } else {\n            if (this._glyphCache == null || this._glyphCache.get_version() > this._glyphVersion) {\n                this.prepareBatch();\n            }\n            if (!this._glyphCache.ready) {\n                return;\n            }\n            TextShader.use(renderContext, this._vertexBuffer.vertexBuffer, this._glyphCache.get_texture().texture2d);\n            renderContext.gl.drawArrays(WEBGL.TRIANGLES, 0, this._vertexBuffer.count);\n        }\n    },\n\n    prepareBatch: function () {\n        if (this._glyphCache == null) {\n            this._glyphCache = GlyphCache.getCache(this.height);\n        }\n        if (!this._glyphCache.ready) {\n            return;\n        }\n        this._textObject.text = '';\n        this._textObject.fontSize = this.height * 0.5;\n        var verts = [];\n        var $enum1 = ss.enumerate(this.items);\n        while ($enum1.moveNext()) {\n            var t3d = $enum1.current;\n            var text = t3d.text;\n            var left = 0;\n            var top = 0;\n            var fntAdjust = this._textObject.fontSize / 128;\n            var factor = 0.6666;\n            var width = 0;\n            var height = 0;\n            for (var i = 0; i < text.length; i++) {\n                var item = this._glyphCache.getGlyphItem(text.substr(i, 1));\n                if (item != null) {\n                    width += item.extents.x;\n                    height = Math.max(item.extents.y, height);\n                }\n            }\n            var size = Vector2d.create(width, height);\n            t3d.width = size.x * t3d.scale * factor * fntAdjust;\n            t3d.height = size.y * t3d.scale * factor * fntAdjust;\n            var charsLeft = text.length;\n            for (var i = 0; i < charsLeft; i++) {\n                var item = this._glyphCache.getGlyphItem(text.substr(i, 1));\n                if (item != null) {\n                    var position = Rectangle.create(left * t3d.scale * factor, 0 * t3d.scale * factor, item.extents.x * fntAdjust * t3d.scale * factor, item.extents.y * fntAdjust * t3d.scale * factor);\n                    left += (item.extents.x * fntAdjust);\n                    t3d.addGlyphPoints(verts, item.size, position, item.uvRect);\n                }\n            }\n        }\n        this._vertCount = verts.length;\n        this._vertexBuffer = new PositionTextureVertexBuffer(this._vertCount);\n        var vertBuf = this._vertexBuffer.lock();\n        for (var i = 0; i < this._vertCount; i++) {\n            vertBuf[i] = verts[i];\n        }\n        this._vertexBuffer.unlock();\n        this._glyphVersion = this._glyphCache.get_version();\n    },\n\n    cleanUp: function () {\n        if (this._vertexBuffer != null) {\n            this._vertexBuffer = null;\n        }\n        this.items.length = 0;\n    }\n};\n\nregisterType(\"Text3dBatch\", [Text3dBatch, Text3dBatch$, null]);\n\n// wwtlib.GlyphItem\n\nexport function GlyphItem(glyph) {\n    this.referenceCount = 0;\n    this.glyph = glyph;\n    this.uvRect = new Rectangle();\n    this.size = new Vector2d();\n    this.referenceCount = 1;\n}\n\nGlyphItem.create = function (glyph, uv, size, extents) {\n    var temp = new GlyphItem(glyph);\n    temp.glyph = glyph;\n    temp.uvRect = uv;\n    temp.size = size;\n    temp.extents = extents;\n    temp.referenceCount = 1;\n    return temp;\n};\n\nGlyphItem._fromXML = function (node) {\n    var glyph = node.attributes.getNamedItem('Glyph').nodeValue;\n    var item = new GlyphItem(glyph);\n    item.uvRect = Rectangle.create(parseFloat(node.attributes.getNamedItem('UVLeft').nodeValue), parseFloat(node.attributes.getNamedItem('UVTop').nodeValue), parseFloat(node.attributes.getNamedItem('UVWidth').nodeValue), parseFloat(node.attributes.getNamedItem('UVHeight').nodeValue));\n    item.size = Vector2d.create(parseFloat(node.attributes.getNamedItem('SizeWidth').nodeValue), parseFloat(node.attributes.getNamedItem('SizeHeight').nodeValue));\n    item.extents = Vector2d.create(parseFloat(node.attributes.getNamedItem('ExtentsWidth').nodeValue), parseFloat(node.attributes.getNamedItem('ExtentsHeight').nodeValue));\n    return item;\n};\n\nvar GlyphItem$ = {\n    addRef: function () {\n        this.referenceCount++;\n    },\n\n    release: function () {\n        this.referenceCount--;\n    }\n};\n\nregisterType(\"GlyphItem\", [GlyphItem, GlyphItem$, null]);\n\n// wwtlib.GlyphCache\n\nexport function GlyphCache(height) {\n    this._cellHeight = 128;\n    this._gridSize = 8;\n    this.ready = false;\n    this._glyphItems = {};\n    this.textObject = new TextObject();\n    this._dirty = true;\n    this._textureDirty = true;\n    this._version = 0;\n    this._cellHeight = height;\n    this._texture = Texture.fromUrl(URLHelpers.singleton.engineAssetUrl('glyphs1.png'));\n    this._webFile = new WebFile(URLHelpers.singleton.engineAssetUrl('glyphs1.xml'));\n    this._webFile.onStateChange = ss.bind('_glyphXmlReady', this);\n    this._webFile.send();\n}\n\nGlyphCache._caches = {};\nGlyphCache._allGlyphs = '';\n\nGlyphCache.getCache = function (height) {\n    if (!ss.keyExists(GlyphCache._caches, height)) {\n        GlyphCache._caches[height] = new GlyphCache(height);\n    }\n    return GlyphCache._caches[height];\n};\n\nGlyphCache.cleanUpAll = function () {\n    ss.clearKeys(GlyphCache._caches);\n};\n\nvar GlyphCache$ = {\n    get_height: function () {\n        return this._cellHeight;\n    },\n\n    _glyphXmlReady: function () {\n        if (this._webFile.get_state() === 2) {\n            alert(this._webFile.get_message());\n        } else if (this._webFile.get_state() === 1) {\n            this._loadXmlGlyph(this._webFile.getXml());\n        }\n    },\n\n    _loadXmlGlyph: function (xml) {\n        var nodes = Util.selectSingleNode(xml, 'GlyphItems');\n        var $enum1 = ss.enumerate(nodes.childNodes);\n        while ($enum1.moveNext()) {\n            var glyphItem = $enum1.current;\n            if (glyphItem.nodeName === 'GlyphItem') {\n                var item = GlyphItem._fromXML(glyphItem);\n                this._glyphItems[item.glyph] = item;\n                GlyphCache._allGlyphs = GlyphCache._allGlyphs + item.glyph;\n            }\n        }\n        this.ready = true;\n    },\n\n    get_texture: function () {\n        return this._texture;\n    },\n\n    _makeTexture: function () {\n        this._calcOrMake(true);\n    },\n\n    getGlyphItem: function (glyph) {\n        if (this._dirty) {\n            this._calculateGlyphDetails();\n        }\n        return this._glyphItems[glyph];\n    },\n\n    _calculateGlyphDetails: function () {\n        this._calcOrMake(false);\n    },\n\n    _calcOrMake: function (makeTexture) { },\n\n    get_version: function () {\n        return this._version;\n    },\n\n    set_version: function (value) {\n        this._version = value;\n        return value;\n    },\n\n    addGlyph: function (glyph) {\n        if (!ss.keyExists(this._glyphItems, glyph)) {\n            var item = new GlyphItem(glyph);\n            this._glyphItems[glyph] = item;\n            this._dirty = true;\n            this._textureDirty = true;\n            this._version++;\n            GlyphCache._allGlyphs = GlyphCache._allGlyphs + glyph;\n        } else {\n            this._glyphItems[glyph].addRef();\n        }\n    },\n\n    cleanUp: function () {\n        this._dirty = true;\n        this._texture = null;\n    },\n\n    dispose: function () {\n        this.cleanUp();\n    },\n\n    get_dirty: function () {\n        return this._dirty;\n    },\n\n    set_dirty: function (value) {\n        this._dirty = value;\n        return value;\n    }\n};\n\nregisterType(\"GlyphCache\", [GlyphCache, GlyphCache$, null, ss.IDisposable]);\n\n// wwtlib.Text3d\n\nexport function Text3d(center, up, text, fontsize, scale) {\n    this.rotation = 0;\n    this.tilt = 0;\n    this.bank = 0;\n    this._matInit = false;\n    this.color = Colors.get_white();\n    this.sky = true;\n    this.scale = 0;\n    this.opacity = 1;\n    this.text = '';\n    this.width = 1;\n    this.height = 1;\n    this.alignment = 0;\n    this.text = text;\n    this.up = up;\n    this.center = center;\n    this.scale = scale;\n    this.top = Vector3d.addVectors(center, Vector3d.scale(up, scale));\n    if (fontsize < 0) {\n        this.sky = false;\n    }\n}\n\nvar Text3d$ = {\n    addGlyphPoints: function (pointList, size, position, uv) {\n        var points = new Array(6);\n        for (var i = 0; i < 6; i++) {\n            points[i] = new PositionTexture();\n        }\n        var left = Vector3d.cross(this.center, this.up);\n        var right = Vector3d.cross(this.up, this.center);\n        left.normalize();\n        right.normalize();\n        this.up.normalize();\n        var upTan = Vector3d.cross(this.center, right);\n        upTan.normalize();\n        if (!this.alignment) {\n            left.multiply(this.width - position.get_left() * 2);\n            right.multiply(this.width - ((this.width * 2) - position.get_right() * 2));\n        } else if (this.alignment === 1) {\n            left.multiply(-position.get_left() * 2);\n            right.multiply(position.get_right() * 2);\n        }\n        var top = upTan.copy();\n        var bottom = Vector3d.subtractVectors(Vector3d.get_empty(), upTan);\n        top.multiply(this.height - position.get_top() * 2);\n        bottom.multiply(this.height - ((this.height * 2) - position.get_bottom() * 2));\n        var ul = this.center.copy();\n        ul.add(top);\n        if (this.sky) {\n            ul.add(left);\n        } else {\n            ul.subtract(left);\n        }\n        var ur = this.center.copy();\n        ur.add(top);\n        if (this.sky) {\n            ur.add(right);\n        } else {\n            ur.subtract(right);\n        }\n        var ll = this.center.copy();\n        if (this.sky) {\n            ll.add(left);\n        } else {\n            ll.subtract(left);\n        }\n        ll.add(bottom);\n        var lr = this.center.copy();\n        if (this.sky) {\n            lr.add(right);\n        } else {\n            lr.subtract(right);\n        }\n        lr.add(bottom);\n        points[0].position = ul.copy();\n        points[0].tu = uv.get_left();\n        points[0].tv = uv.get_top();\n        points[2].tu = uv.get_left();\n        points[2].tv = uv.get_bottom();\n        points[2].position = ll.copy();\n        points[1].tu = uv.get_right();\n        points[1].tv = uv.get_top();\n        points[1].position = ur.copy();\n        points[3].tu = uv.get_right();\n        points[3].tv = uv.get_bottom();\n        points[3].position = lr.copy();\n        points[5].tu = uv.get_right();\n        points[5].tv = uv.get_top();\n        points[5].position = ur.copy();\n        points[4].tu = uv.get_left();\n        points[4].tv = uv.get_bottom();\n        points[4].position = ll.copy();\n        if (!!this.rotation || !!this.tilt || !!this.bank) {\n            if (!this._matInit) {\n                var lookAt = Matrix3d.lookAtLH(this.center, new Vector3d(), this.up);\n                var lookAtInv = lookAt.clone();\n                lookAtInv.invert();\n                this._rtbMat = Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(Matrix3d.multiplyMatrix(lookAt, Matrix3d._rotationZ(-this.rotation / 180 * Math.PI)), Matrix3d._rotationX(-this.tilt / 180 * Math.PI)), Matrix3d._rotationY(-this.bank / 180 * Math.PI)), lookAtInv);\n                // \"todo make this true after debug\"\n                this._matInit = true;\n            }\n            for (var i = 0; i < 6; i++) {\n                points[i].position = Vector3d._transformCoordinate(points[i].position, this._rtbMat);\n            }\n        }\n        var $enum1 = ss.enumerate(points);\n        while ($enum1.moveNext()) {\n            var pnt = $enum1.current;\n            pointList.push(pnt);\n        }\n    }\n};\n\nregisterType(\"Text3d\", [Text3d, Text3d$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The WWT clock and related calculations.\n\nimport { registerType } from \"./typesystem.js\";\nimport { ss } from \"./ss.js\";\nimport { DT } from \"./astrocalc/date.js\";\nimport { AstroCalc } from \"./astrocalc.js\";\nimport { Coordinates } from \"./coordinates.js\";\nimport { Settings } from \"./settings.js\";\n\n\n// wwtlib.SpaceTimeController\n\nexport function SpaceTimeController() { }\n\nSpaceTimeController.framesPerSecond = 30;\nSpaceTimeController.frameDumping = false;\nSpaceTimeController.cancelFrameDump = false;\nSpaceTimeController.currentFrameNumber = 0;\nSpaceTimeController.totalFrames = 0;\nSpaceTimeController._offset = 0;\nSpaceTimeController._syncToClock = true;\nSpaceTimeController._timeRate = 1;\nSpaceTimeController._altitude = 0;\n\nSpaceTimeController.updateClock = function () {\n    if (SpaceTimeController._syncToClock) {\n        var justNow = SpaceTimeController.get_metaNow();\n        if (SpaceTimeController._timeRate !== 1) {\n            var ts = justNow.getTime() - SpaceTimeController.last.getTime();\n            var ticks = (ts * SpaceTimeController._timeRate);\n            SpaceTimeController._offset += ticks;\n        }\n        SpaceTimeController.last = justNow;\n        try {\n            SpaceTimeController._now = new Date(justNow.getTime() + SpaceTimeController._offset);\n        }\n        catch ($e1) {\n            SpaceTimeController._now = new Date(1, 12, 25, 23, 59, 59);\n            SpaceTimeController._offset = SpaceTimeController._now - SpaceTimeController.get_metaNow();\n        }\n        if (SpaceTimeController._now.getFullYear() > 4000) {\n            SpaceTimeController._now = new Date(4000, 12, 31, 23, 59, 59);\n            SpaceTimeController._offset = SpaceTimeController._now - SpaceTimeController.get_metaNow();\n        }\n        if (SpaceTimeController._now.getFullYear() < 1) {\n            SpaceTimeController._now = new Date(0, 12, 25, 23, 59, 59);\n            SpaceTimeController._offset = SpaceTimeController._now - SpaceTimeController.get_metaNow();\n        }\n    }\n};\n\nSpaceTimeController.getTimeForFutureTime = function (delta) {\n    try {\n        if (SpaceTimeController._syncToClock) {\n            var future = new Date((SpaceTimeController.get_now().getTime() + (delta * 1000) * SpaceTimeController._timeRate));\n            return future;\n        } else {\n            return SpaceTimeController.get_now();\n        }\n    }\n    catch ($e1) {\n        return SpaceTimeController.get_now();\n    }\n};\n\nSpaceTimeController.getJNowForFutureTime = function (delta) {\n    try {\n        if (SpaceTimeController._syncToClock) {\n            var future = new Date(SpaceTimeController.get_now().getTime() + ss.truncate((delta * 1000 * SpaceTimeController._timeRate)));\n            return SpaceTimeController.utcToJulian(future);\n        } else {\n            return SpaceTimeController.utcToJulian(SpaceTimeController.get_now());\n        }\n    }\n    catch ($e1) {\n        return SpaceTimeController.utcToJulian(SpaceTimeController.get_now());\n    }\n};\n\nSpaceTimeController.get_now = function () {\n    return SpaceTimeController._now;\n};\n\nSpaceTimeController.set_now = function (value) {\n    SpaceTimeController._now = value;\n    SpaceTimeController._offset = SpaceTimeController._now - SpaceTimeController.get_metaNow();\n    SpaceTimeController.last = SpaceTimeController.get_metaNow();\n    return value;\n};\n\nSpaceTimeController.get_metaNow = function () {\n    return SpaceTimeController._metaNow;\n};\n\nSpaceTimeController.set_metaNow = function (value) {\n    if (!SpaceTimeController.frameDumping) {\n        SpaceTimeController._metaNow = value;\n    }\n    return value;\n};\n\nSpaceTimeController.nextFrame = function () {\n    SpaceTimeController._metaNow.setMilliseconds(SpaceTimeController._metaNow.getMilliseconds() + Math.round(1000 / SpaceTimeController.framesPerSecond));\n    SpaceTimeController.currentFrameNumber += 1;\n};\n\nSpaceTimeController.get_doneDumping = function () {\n    return !SpaceTimeController.frameDumping || SpaceTimeController.cancelFrameDump || (SpaceTimeController.currentFrameNumber >= SpaceTimeController.totalFrames);\n};\n\nSpaceTimeController.syncTime = function () {\n    SpaceTimeController._offset = 0;\n    SpaceTimeController._now = ss.now();\n    SpaceTimeController._syncToClock = true;\n};\n\nSpaceTimeController.get_jNow = function () {\n    return SpaceTimeController.utcToJulian(SpaceTimeController.get_now());\n};\n\nSpaceTimeController.get_syncToClock = function () {\n    return SpaceTimeController._syncToClock;\n};\n\nSpaceTimeController.set_syncToClock = function (value) {\n    if (SpaceTimeController._syncToClock !== value) {\n        SpaceTimeController._syncToClock = value;\n        if (value) {\n            SpaceTimeController.last = ss.now();\n            SpaceTimeController._offset = SpaceTimeController._now - ss.now();\n        } else {\n            SpaceTimeController._now = new Date(ss.now().getTime() + SpaceTimeController._offset);\n        }\n    }\n    return value;\n};\n\nSpaceTimeController.get_timeRate = function () {\n    return SpaceTimeController._timeRate;\n};\n\nSpaceTimeController.set_timeRate = function (value) {\n    SpaceTimeController._timeRate = value;\n    return value;\n};\n\nSpaceTimeController.get_altitude = function () {\n    return SpaceTimeController._altitude;\n};\n\nSpaceTimeController.set_altitude = function (value) {\n    SpaceTimeController._altitude = value;\n    return value;\n};\n\nSpaceTimeController.get_location = function () {\n    SpaceTimeController._location = Coordinates.fromLatLng(Settings.get_active().get_locationLat(), Settings.get_active().get_locationLng());\n    SpaceTimeController._altitude = Settings.get_active().get_locationAltitude();\n    return SpaceTimeController._location;\n};\n\nSpaceTimeController.set_location = function (value) {\n    if (Settings.get_globalSettings().get_locationLat() !== value.get_lat()) {\n        Settings.get_globalSettings().set_locationLat(value.get_lat());\n    }\n    if (Settings.get_globalSettings().get_locationLng() !== value.get_lng()) {\n        Settings.get_globalSettings().set_locationLng(value.get_lng());\n    }\n    SpaceTimeController._location = value;\n    return value;\n};\n\nSpaceTimeController.julianToUtc = function (jDate) {\n    var date = new DT();\n    date.setJD(jDate, true);\n    var ms = (date.second() - ss.truncate(date.second())) * 1000;\n    return new Date(date.year(), date.month() - 1, date.day(), date.hour(), date.minute(), ss.truncate(date.second()), ss.truncate(ms));\n};\n\nSpaceTimeController._twoLineDateToJulian = function (p) {\n    var pre1950 = parseInt(p.substring(0, 1)) < 6;\n    var year = parseInt(((pre1950) ? ' 20' : '19') + p.substring(0, 2));\n    var days = parseFloat(p.substring(2, 3));\n    var fraction = parseFloat(p.substr(5));\n    var date = new Date(year, 0, 1, 0, 0);\n    return SpaceTimeController.utcToJulian(date) + (days - 1 + fraction);\n};\n\nSpaceTimeController.julianToTwoLineDate = function (jDate) {\n    return SpaceTimeController.dateToTwoLineDate(SpaceTimeController.julianToUtc(jDate));\n};\n\nSpaceTimeController.dateToTwoLineDate = function (date) {\n    var sb = new ss.StringBuilder();\n    sb.append(date.getFullYear() % 100);\n    var fullYear = new Date(date.getFullYear(), 0, 1, 0, 0);\n    var dayofyear = Math.floor((date - fullYear) / (60 * 60 * 24 * 1000)) + 2;\n    var day = dayofyear + date.getHours() / 24 + date.getMinutes() / 60 / 24 + date.getSeconds() / 60 / 60 / 24 + date.getMilliseconds() / 1000 / 60 / 60 / 24;\n    var sDay = SpaceTimeController.tleDayString(day);\n    sb.append(sDay);\n    return sb.toString();\n};\n\nSpaceTimeController.tleDayString = function (day) {\n    var formated = day.toString();\n    var point = formated.indexOf('.');\n    if (point === -1) {\n        point = formated.length;\n        formated += '.0';\n    }\n    var len = formated.length - point - 1;\n    var fill = '00000000';\n    formated = fill.substr(0, 3 - point) + formated + fill.substr(0, 8 - len);\n    return formated;\n};\n\nSpaceTimeController.utcToJulian = function (utc) {\n    var year = utc.getUTCFullYear();\n    var month = utc.getUTCMonth() + 1;\n    var day = utc.getUTCDate();\n    var hour = utc.getUTCHours();\n    var minute = utc.getUTCMinutes();\n    var second = utc.getUTCSeconds() + utc.getUTCMilliseconds() / 1000;\n    var dblDay = day + (hour / 24) + (minute / 1440) + (second / 86400);\n    return AstroCalc.getJulianDay(year, month, dblDay);\n};\n\nSpaceTimeController.dateToJD = function (Year, Month, Day, bGregorianCalendar) {\n    var Y = Year;\n    var M = Month;\n    if (M < 3) {\n        Y = Y - 1;\n        M = M + 12;\n    }\n    var A = 0;\n    var B = 0;\n    if (bGregorianCalendar) {\n        A = ss.truncate((Y / 100));\n        B = 2 - A + ss.truncate((A / 4));\n    }\n    return ss.truncate((365.25 * (Y + 4716))) + ss.truncate((30.6001 * (M + 1))) + Day + B - 1524.5;\n};\n\nvar SpaceTimeController$ = {};\n\nregisterType(\"SpaceTimeController\", [SpaceTimeController, SpaceTimeController$, null]);\n","// This file is part of WorldWide Telescope and derived from:\n\n/*! Script# Runtime\n * Designed and licensed for use and distribution with Script#-generated scripts.\n * Copyright (c) 2012, Nikhil Kothari, and the Script# Project.\n * More information at http://scriptsharp.com\n */\n\n// It has been customized to adapt to the particulars of the WWT JavaScript\n// build system.\n\nfunction _ss() {\n  \"use strict\";\n\n  // Various Helpers/Utilities\n\n  function _nop() {\n  }\n\n  function isValue(o) {\n    return (o !== null) && (o !== undefined);\n  }\n\n  function _value(args) {\n    for (var i = 2, l = args.length; i < l; i++) {\n      if (isValue(args[i])) {\n        return args[i];\n      }\n    }\n    return null;\n  }\n\n  function value(a, b) {\n    return isValue(a) ? a : isValue(b) ? b : _value(arguments);\n  }\n\n  function extend(o, items) {\n    for (var n in items) {\n      o[n] = items[n];\n    }\n    return o;\n  }\n\n  function parseBoolean(s) {\n    return (s.toLowerCase() == 'true');\n  }\n\n  function parseRegExp(s) {\n    if (s[0] == '/') {\n      var endSlashIndex = s.lastIndexOf('/');\n      if (endSlashIndex > 1) {\n        var expression = s.substring(1, endSlashIndex);\n        var flags = s.substr(endSlashIndex + 1);\n        return new RegExp(expression, flags);\n      }\n    }\n\n    return null;\n  }\n\n  function parseNumber(s) {\n    if (!s || !s.length) {\n      return 0;\n    }\n    if ((s.indexOf('.') >= 0) || (s.indexOf('e') >= 0) ||\n      endsWith(s, 'f') || endsWith(s, 'F')) {\n      return parseFloat(s);\n    }\n    return parseInt(s, 10);\n  }\n\n  function parseDate(s) {\n    var t = Date.parse(s);\n    return isNaN(t) ? undefined : new Date(t);\n  }\n\n  function truncate(n) {\n    return (n >= 0) ? Math.floor(n) : Math.ceil(n);\n  }\n\n  function now() {\n    return new Date();\n  }\n\n  function today() {\n    var d = new Date();\n    return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n  }\n\n  function compareDates(d1, d2) {\n    return (d1 === d2) ? true : ((isValue(d1) && isValue(d2)) ? (d1.getTime() == d2.getTime()) : false);\n  }\n\n  function _popStackFrame(e) {\n    if (!isValue(e.stack) ||\n      !isValue(e.fileName) ||\n      !isValue(e.lineNumber)) {\n      return;\n    }\n\n    var stackFrames = e.stack.split('\\n');\n    var currentFrame = stackFrames[0];\n    var pattern = e.fileName + ':' + e.lineNumber;\n    while (isValue(currentFrame) && currentFrame.indexOf(pattern) === -1) {\n      stackFrames.shift();\n      currentFrame = stackFrames[0];\n    }\n\n    var nextFrame = stackFrames[1];\n    if (!isValue(nextFrame)) {\n      return;\n    }\n\n    var nextFrameParts = nextFrame.match(/@(.*):(\\d+)$/);\n    if (!isValue(nextFrameParts)) {\n      return;\n    }\n\n    stackFrames.shift();\n    e.stack = stackFrames.join('\\n');\n    e.fileName = nextFrameParts[1];\n    e.lineNumber = parseInt(nextFrameParts[2], 10);\n  }\n\n  function error(message, errorInfo, innerException) {\n    var e = new Error(message);\n    if (errorInfo) {\n      for (var v in errorInfo) {\n        e[v] = errorInfo[v];\n      }\n    }\n    if (innerException) {\n      e.innerException = innerException;\n    }\n\n    _popStackFrame(e);\n    return e;\n  }\n\n  function fail(message) {\n    console.assert(false, message);\n    if (globalThis.navigator) {\n      eval('debugger;');\n    }\n  }\n\n  // Collections\n\n  function toArray(obj) {\n    return obj ? (typeof obj == 'string' ? JSON.parse('(' + obj + ')') : Array.prototype.slice.call(obj)) : null;\n  }\n\n  function removeItem(a, item) {\n    var index = a.indexOf(item);\n    return index >= 0 ? (a.splice(index, 1), true) : false;\n  }\n\n  function clearKeys(obj) {\n    for (var key in obj) {\n      delete obj[key];\n    }\n  }\n\n  function keyExists(obj, key) {\n    return obj[key] !== undefined;\n  }\n\n  function keys(obj) {\n    if (Object.keys) {\n      return Object.keys(obj);\n    }\n    var keys = [];\n    for (var key in obj) {\n      keys.push(key);\n    }\n    return keys;\n  }\n\n  function keyCount(obj) {\n    return keys(obj).length;\n  }\n\n  function Enumerator(obj, keys) {\n    var index = -1;\n    var length = keys ? keys.length : obj.length;\n    var lookup = keys ? function () { return { key: keys[index], value: obj[keys[index]] }; } :\n      function () { return obj[index]; };\n\n    this.current = null;\n    this.moveNext = function () {\n      index++;\n      this.current = lookup();\n      return index < length;\n    };\n    this.reset = function () {\n      index = -1;\n      this.current = null;\n    };\n  }\n\n  var _nopEnumerator = {\n    current: null,\n    moveNext: function () { return false; },\n    reset: _nop\n  };\n\n  function enumerate(o) {\n    if (!isValue(o)) {\n      return _nopEnumerator;\n    }\n    if (o.getEnumerator) {\n      return o.getEnumerator();\n    }\n    if (o.length !== undefined) {\n      return new Enumerator(o);\n    }\n    return new Enumerator(o, keys(o));\n  }\n\n  function Stack() {\n    this.count = 0;\n    this._items = [];\n  }\n\n  var Stack$ = {\n    clear: function () {\n      this._items.length = 0;\n      this.count = 0;\n    },\n    contains: function (item) {\n      for (var i = this.count - 1; i >= 0; i--) {\n        if (this._items[i] === item) {\n          return true;\n        }\n      }\n      return false;\n    },\n    getEnumerator: function () {\n      return new Enumerator(this._items.reverse());\n    },\n    peek: function () {\n      return this._items[this.count - 1];\n    },\n    push: function (item) {\n      this._items.push(item);\n      this.count++;\n    },\n    pop: function () {\n      if (this.count) {\n        this.count--;\n        return this._items.pop();\n      }\n      return undefined;\n    }\n  }\n\n  function Queue() {\n    this.count = 0;\n    this._items = [];\n    this._offset = 0;\n  }\n\n  function _cleanQueue(q) {\n    q._items = q._items.slice(q._offset);\n    q._offset = 0;\n  }\n\n  var Queue$ = {\n    clear: function () {\n      this._items.length = 0;\n      this._offset = 0;\n      this.count = 0;\n    },\n    contains: function (item) {\n      for (var i = this._offset, length = this._items.length; i <= length; i++) {\n        if (this._items[i] === item) {\n          return true;\n        }\n      }\n      return false;\n    },\n    dequeue: function () {\n      if (this.count) {\n        var item = this._items[this._offset];\n        if (++this._offset * 2 >= this._items.length) {\n          _cleanQueue(this);\n        }\n        this.count--;\n        return item;\n      }\n      return undefined;\n    },\n    enqueue: function (item) {\n      this._items.push(item);\n      this.count++;\n    },\n    getEnumerator: function () {\n      if (this._offset != 0) {\n        _cleanQueue(this);\n      }\n      return new Enumerator(this._items);\n    },\n    peek: function () {\n      return this._items.length ? this._items[this._offset] : undefined;\n    }\n  }\n\n  // String\n\n  function string(arg1, arg2) {\n    if (typeof arg2 == 'number') {\n      return arg2 > 1 ? new Array(arg2 + 1).join(arg1) : arg1;\n    }\n    return Array.prototype.join.call(arguments, '');\n  }\n\n  function emptyString(s) {\n    return !s || !s.length;\n  }\n\n  function whitespace(s) {\n    return emptyString(s) || !s.replace(/^\\s*/, '').length;\n  }\n\n  function compareStrings(s1, s2, ignoreCase) {\n    s1 = s1 || '', s2 = s2 || '';\n    ignoreCase ? (s1 = s1.toUpperCase(), s2 = s2.toUpperCase()) : 0;\n    return (s1 === s2) ? 0 : (s1 < s2) ? -1 : 1;\n  }\n\n  var _formatPlaceHolderRE = /(\\{[^}^{]+\\})/g;\n  var _formatters = {};\n\n  function format(cultureOrFormat) {\n    var culture = neutralCulture;\n    var format = cultureOrFormat;\n    var values = Array.prototype.slice.call(arguments, 1);\n\n    if (cultureOrFormat.constructor != String) {\n      culture = cultureOrFormat;\n      format = values[0];\n      values = values.slice(1);\n    }\n\n    return format.replace(_formatPlaceHolderRE,\n      function (str, match) {\n        var index = parseInt(match.substr(1), 10);\n        var value = values[index];\n        if (!isValue(value)) {\n          return '';\n        }\n\n        var formatter = _formatters[typeName(value)];\n        if (formatter) {\n          var formatSpec = '';\n          var formatIndex = match.indexOf(':');\n          if (formatIndex > 0) {\n            formatSpec = match.substring(formatIndex + 1, match.length - 1);\n          }\n          if (formatSpec && (formatSpec != 'i')) {\n            return formatter(value, formatSpec, culture);\n          }\n        }\n        return culture == neutralCulture ? value.toString() : value.toLocaleString();\n      });\n  }\n\n  function trim(s, tc) {\n    if (tc || !String.prototype.trim) {\n      tc = tc ? tc.join('') : null;\n      var r = tc ? new RegExp('^[' + tc + ']+|[' + tc + ']+$', 'g') : /^\\s+|\\s+$/g;\n      return s.replace(r, '');\n    }\n    return s.trim();\n  }\n\n  function trimStart(s, tc) {\n    var r = tc ? new RegExp('^[' + tc.join('') + ']+') : /^\\s+/;\n    return s.replace(r, '');\n  }\n\n  function trimEnd(s, tc) {\n    var r = tc ? new RegExp('[' + tc.join('') + ']+$') : /\\s+$/;\n    return s.replace(r, '');\n  }\n\n  function startsWith(s, prefix) {\n    if (emptyString(prefix)) {\n      return true;\n    }\n    if (emptyString(s) || (prefix.length > s.length)) {\n      return false;\n    }\n    return s.substr(0, prefix.length) == prefix;\n  }\n\n  function endsWith(s, suffix) {\n    if (emptyString(suffix)) {\n      return true;\n    }\n    if (emptyString(s) || (suffix.length > s.length)) {\n      return false;\n    }\n    return s.substr(-suffix.length) == suffix;\n  }\n\n  function padLeft(s, totalWidth, ch) {\n    return (s.length < totalWidth) ? string(ch || ' ', totalWidth - s.length) + s : s;\n  }\n\n  function padRight(s, totalWidth, ch) {\n    return (s.length < totalWidth) ? s + string(ch || ' ', totalWidth - s.length) : s;\n  }\n\n  function removeString(s, index, count) {\n    if (!count || ((index + count) > s.length)) {\n      return s.substr(0, index);\n    }\n    return s.substr(0, index) + s.substr(index + count);\n  }\n\n  function insertString(s, index, value) {\n    if (!value) {\n      return s;\n    }\n    if (!index) {\n      return value + s;\n    }\n    return s.substr(0, index) + value + s.substr(index);\n  }\n\n  function replaceString(s, oldValue, newValue) {\n    return s.split(oldValue).join(newValue || '');\n  }\n\n  // Delegate Functionality\n\n  function _bindList(fnList) {\n    var d = function () {\n      var args = arguments;\n      var result = null;\n      for (var i = 0, l = fnList.length; i < l; i++) {\n        result = args.length ? fnList[i].apply(null, args) : fnList[i].call(null);\n      }\n      return result;\n    };\n    d._fnList = fnList;\n    return d;\n  }\n\n  function bind(fn, o) {\n    if (!o) {\n      return fn;\n    }\n\n    var name = null;\n    fn = typeof fn == 'string' ? o[name = fn] : fn;\n\n    var cache = name ? o.$$b || (o.$$b = {}) : null;\n    var binding = cache ? cache[name] : null;\n\n    if (!binding) {\n      // Create a function that invokes the specified function, in the\n      // context of the specified object.\n      binding = function () {\n        return fn.apply(o, arguments);\n      };\n\n      if (cache) {\n        cache[name] = binding;\n      }\n    }\n    return binding;\n  }\n\n  function bindAdd(binding, value) {\n    if (!binding) {\n      return value;\n    }\n    if (!value) {\n      return binding;\n    }\n\n    var fnList = [].concat(binding._fnList || binding, value);\n    return _bindList(fnList);\n  }\n\n  function bindSub(binding, value) {\n    if (!binding) {\n      return null;\n    }\n    if (!value) {\n      return binding;\n    }\n\n    var fnList = binding._fnList || [binding];\n    var index = fnList.indexOf(value);\n    if (index >= 0) {\n      if (fnList.length == 1) {\n        return null;\n      }\n\n      fnList = index ? fnList.slice(0, index).concat(fnList.slice(index + 1)) : fnList.slice(1);\n      return _bindList(fnList);\n    }\n    return binding;\n  }\n\n  function bindExport(fn, multiUse, name, root) {\n    // Generate a unique name if one is not specified\n    name = name || '__' + (new Date()).valueOf();\n\n    // If unspecified, exported bindings go on the global object\n    // (so they are callable using a simple identifier).\n    root = root || globalThis;\n\n    var exp = {\n      name: name,\n      detach: function () {\n        root[name] = _nop;\n      },\n      dispose: function () {\n        try { delete root[name]; } catch (e) { root[name] = undefined; }\n      }\n    };\n\n    // Multi-use bindings are exported directly; for the rest a stub is exported, and the stub\n    // first auto-disposes, and then invokes the actual binding.\n    root[name] = multiUse ? fn : function () {\n      exp.dispose();\n      return fn.apply(null, arguments);\n    };\n\n    return exp;\n  }\n\n  // EventArgs\n\n  function EventArgs() {\n  }\n\n  EventArgs.Empty = new EventArgs();\n\n  function CancelEventArgs() {\n    this.cancel = false;\n  }\n\n  // Contracts\n\n  function IDisposable() { }\n  function IEnumerable() { }\n  function IEnumerator() { }\n  function IObserver() { }\n  function IApplication() { }\n  function IContainer() { }\n  function IObjectFactory() { }\n  function IEventManager() { }\n  function IInitializable() { }\n\n  // StringBuilder\n\n  function StringBuilder(s) {\n    this._parts = isValue(s) && s !== '' ? [s] : [];\n    this.isEmpty = this._parts.length == 0;\n  }\n\n  var StringBuilder$ = {\n    append: function (s) {\n      if (isValue(s) && s !== '') {\n        this._parts.push(s);\n        this.isEmpty = false;\n      }\n      return this;\n    },\n\n    appendLine: function (s) {\n      this.append(s);\n      this.append('\\r\\n');\n      this.isEmpty = false;\n      return this;\n    },\n\n    clear: function () {\n      this._parts = [];\n      this.isEmpty = true;\n    },\n\n    toString: function (s) {\n      return this._parts.join(s || '');\n    }\n  };\n\n  // Observable\n\n  var _observerStack = [];\n  var _observerRegistration = {\n    dispose: function () {\n      _observerStack.pop();\n    }\n  }\n\n  function _captureObservers(observers) {\n    var registeredObservers = _observerStack;\n    var observerCount = registeredObservers.length;\n\n    if (observerCount) {\n      observers = observers || [];\n      for (var i = 0; i < observerCount; i++) {\n        var observer = registeredObservers[i];\n        if (observers.indexOf(observer) < 0) {\n          observers.push(observer);\n        }\n      }\n      return observers;\n    }\n    return null;\n  }\n\n  function _invalidateObservers(observers) {\n    for (var i = 0, len = observers.length; i < len; i++) {\n      observers[i].invalidateObserver();\n    }\n  }\n\n  function Observable(v) {\n    this._v = v;\n    this._observers = null;\n  }\n\n  var Observable$ = {\n    getValue: function () {\n      this._observers = _captureObservers(this._observers);\n      return this._v;\n    },\n    setValue: function (v) {\n      if (this._v !== v) {\n        this._v = v;\n\n        var observers = this._observers;\n        if (observers) {\n          this._observers = null;\n          _invalidateObservers(observers);\n        }\n      }\n    }\n  };\n\n  Observable.registerObserver = function (o) {\n    _observerStack.push(o);\n    return _observerRegistration;\n  }\n\n  function ObservableCollection(items) {\n    this._items = items || [];\n    this._observers = null;\n  }\n\n  var ObservableCollection$ = {\n    get_item: function (index) {\n      this._observers = _captureObservers(this._observers);\n      return this._items[index];\n    },\n    set_item: function (index, item) {\n      this._items[index] = item;\n      this._updated();\n    },\n    get_length: function () {\n      this._observers = _captureObservers(this._observers);\n      return this._items.length;\n    },\n    add: function (item) {\n      this._items.push(item);\n      this._updated();\n    },\n    clear: function () {\n      this._items.clear();\n      this._updated();\n    },\n    contains: function (item) {\n      return this._items.indexOf(item) >= 0;\n    },\n    getEnumerator: function () {\n      this._observers = _captureObservers(this._observers);\n      // TODO: Change this\n      return this._items.getEnumerator();\n    },\n    indexOf: function (item) {\n      return this._items.indexOf(item);\n    },\n    insert: function (index, item) {\n      this._items.insert(index, item);\n      this._updated();\n    },\n    remove: function (item) {\n      if (this._items.remove(item)) {\n        this._updated();\n        return true;\n      }\n      return false;\n    },\n    removeAt: function (index) {\n      this._items.splice(index, 1);\n      this._updated();\n    },\n    toArray: function () {\n      return this._items;\n    },\n    _updated: function () {\n      var observers = this._observers;\n      if (observers) {\n        this._observers = null;\n        _invalidateObservers(observers);\n      }\n    }\n  }\n\n  // Task\n\n  function Task(result) {\n    this._continuations = result !== undefined ?\n      (this.status = 'done', null) :\n      (this.status = 'pending', []);\n    this.result = result;\n    this.error = null;\n  }\n\n  var Task$ = {\n    get_completed: function () {\n      return this.status != 'pending';\n    },\n    changeWith: function (continuation) {\n      var task = new Task();\n      this.continueWith(function (t) {\n        var error = t.error;\n        var result;\n        if (!error) {\n          try {\n            result = continuation(t);\n          }\n          catch (e) {\n            error = e;\n          }\n        }\n        _updateTask(task, result, error);\n      });\n      return task;\n    },\n    continueWith: function (continuation) {\n      if (this._continuations) {\n        this._continuations.push(continuation);\n      }\n      else {\n        var self = this;\n        setTimeout(function () { continuation(self); }, 0);\n      }\n      return this;\n    },\n    done: function (callback) {\n      return this.continueWith(function (t) {\n        if (t.status == 'done') {\n          callback(t.result);\n        }\n      });\n    },\n    fail: function (callback) {\n      return this.continueWith(function (t) {\n        if (t.status == 'failed') {\n          callback(t.error);\n        }\n      });\n    },\n    then: function (doneCallback, failCallback) {\n      return this.continueWith(function (t) {\n        t.status == 'done' ? doneCallback(t.result) : failCallback(t.error);\n      });\n    }\n  };\n\n  function _updateTask(task, result, error) {\n    if (task.status == 'pending') {\n      if (error) {\n        task.error = error;\n        task.status = 'failed';\n      }\n      else {\n        task.result = result;\n        task.status = 'done';\n      }\n\n      var continuations = task._continuations;\n      task._continuations = null;\n\n      for (var i = 0, c = continuations.length; i < c; i++) {\n        continuations[i](task);\n      }\n    }\n  }\n\n  function _joinTasks(tasks, any) {\n    tasks = toArray(tasks);\n\n    var count = tasks.length;\n\n    var interval = 0;\n    if ((count > 1) && (typeof tasks[0] == 'number')) {\n      interval = tasks[0];\n      tasks = tasks.slice(1);\n      count--;\n    }\n    if (Array.isArray(tasks[0])) {\n      tasks = tasks[0];\n      count = tasks.length;\n    }\n\n    var joinTask = new Task();\n    var seen = 0;\n\n    function continuation(t) {\n      if (joinTask.status == 'pending') {\n        seen++;\n        if (any) {\n          _updateTask(joinTask, t);\n        }\n        else if (seen == count) {\n          _updateTask(joinTask, true);\n        }\n      }\n    }\n\n    function timeout() {\n      if (joinTask.status == 'pending') {\n        if (any) {\n          _updateTask(joinTask, null);\n        }\n        else {\n          _updateTask(joinTask, false);\n        }\n      }\n    }\n\n    if (interval != 0) {\n      setTimeout(timeout, interval);\n    }\n\n    for (var i = 0; i < count; i++) {\n      tasks[i].continueWith(continuation);\n    }\n\n    return joinTask;\n  }\n  Task.all = function () {\n    return _joinTasks(arguments, false);\n  }\n  Task.any = function () {\n    return _joinTasks(arguments, true);\n  }\n  Task.delay = function (timeout) {\n    var timerTask = new Task();\n\n    setTimeout(function () {\n      _updateTask(timerTask, true);\n    }, timeout);\n\n    return timerTask;\n  }\n\n  function deferred(result) {\n    var task = new Task(result);\n\n    return {\n      task: task,\n      resolve: function (result) {\n        _updateTask(task, result);\n      },\n      reject: function (error) {\n        _updateTask(task, null, (error || new Error()));\n      }\n    };\n  }\n\n  // Culture\n\n  var neutralCulture = {\n    name: '',\n    // numberFormat\n    nf: {\n      nan: 'NaN',           // naNSymbol\n      neg: '-',             // negativeSign\n      pos: '+',             // positiveSign\n      negInf: '-Infinity',  // negativeInfinityText\n      posInf: 'Infinity',   // positiveInfinityText\n      gw: [3],              // numberGroupSizes\n      dd: 2,                // numberDecimalDigits\n      ds: '.',              // numberDecimalSeparator\n      gs: ',',             // numberGroupSeparator\n\n      per: '%',             // percentSymbol\n      perGW: [3],           // percentGroupSizes\n      perDD: 2,             // percentDecimalDigits\n      perDS: '.',           // percentDecimalSeparator\n      perGS: ',',           // percentGroupSeparator\n      perPP: '{0} %',       // percentPositivePattern\n      perNP: '-{0} %',      // percentNegativePattern\n\n      cur: '$',             // currencySymbol\n      curGW: [3],           // currencyGroupSizes\n      curDD: 2,             // currencyDecimalDigits\n      curDS: '.',           // currencyDecimalSeparator\n      curGS: ',',           // currencyGroupSeparator\n      curNP: '(${0})',      // currencyNegativePattern\n      curPP: '${0}'         // currencyPositivePattern\n    },\n    // dateFormat\n    dtf: {\n      am: 'AM',             // amDesignator\n      pm: 'PM',             // pmDesignator\n\n      ds: '/',              // dateSeparator\n      ts: ':',              // timeSeparator\n\n      gmt: 'ddd, dd MMM yyyy HH:mm:ss \\'GMT\\'',   // gmtDateTimePattern\n      uni: 'yyyy-MM-dd HH:mm:ssZ',                // universalDateTimePattern\n      sort: 'yyyy-MM-ddTHH:mm:ss',                // sortableDateTimePattern\n      dt: 'dddd, MMMM dd, yyyy h:mm:ss tt',       // dateTimePattern\n\n      ld: 'dddd, MMMM dd, yyyy',                  // longDatePattern\n      sd: 'M/d/yyyy',                             // shortDatePattern\n\n      lt: 'h:mm:ss tt',                           // longTimePattern\n      st: 'h:mm tt',                              // shortTimePattern\n\n      day0: 0,                                    // firstDayOfWeek\n      day: ['Sunday', 'Monday', 'Tuesday',\n        'Wednesday', 'Thursday',\n        'Friday', 'Saturday'],                // dayNames\n      sday: ['Sun', 'Mon', 'Tue', 'Wed',\n        'Thu', 'Fri', 'Sat'],                // shortDayNames\n      mday: ['Su', 'Mo', 'Tu', 'We',\n        'Th', 'Fr', 'Sa'],                   // minimizedDayNames\n\n      mon: ['January', 'February', 'March',\n        'April', 'May', 'June', 'July',\n        'August', 'September', 'October',\n        'November', 'December', ''],          // monthNames\n      smon: ['Jan', 'Feb', 'Mar', 'Apr',\n        'May', 'Jun', 'Jul', 'Aug',\n        'Sep', 'Oct', 'Nov', 'Dec', '']      // shortMonthNames\n    }\n  };\n\n  var currentCulture = { name: 'en-us', dtf: neutralCulture.dtf, nf: neutralCulture.nf };\n\n  // Formatting Helpers\n\n  function _commaFormatNumber(number, groups, decimal, comma) {\n    var decimalPart = null;\n    var decimalIndex = number.indexOf(decimal);\n    if (decimalIndex > 0) {\n      decimalPart = number.substr(decimalIndex);\n      number = number.substr(0, decimalIndex);\n    }\n\n    var negative = number.startsWith('-');\n    if (negative) {\n      number = number.substr(1);\n    }\n\n    var groupIndex = 0;\n    var groupSize = groups[groupIndex];\n    if (number.length < groupSize) {\n      return decimalPart ? number + decimalPart : number;\n    }\n\n    var index = number.length;\n    var s = '';\n    var done = false;\n    while (!done) {\n      var length = groupSize;\n      var startIndex = index - length;\n      if (startIndex < 0) {\n        groupSize += startIndex;\n        length += startIndex;\n        startIndex = 0;\n        done = true;\n      }\n      if (!length) {\n        break;\n      }\n\n      var part = number.substr(startIndex, length);\n      if (s.length) {\n        s = part + comma + s;\n      }\n      else {\n        s = part;\n      }\n      index -= length;\n\n      if (groupIndex < groups.length - 1) {\n        groupIndex++;\n        groupSize = groups[groupIndex];\n      }\n    }\n\n    if (negative) {\n      s = '-' + s;\n    }\n    return decimalPart ? s + decimalPart : s;\n  }\n\n  _formatters['Number'] = function (number, format, culture) {\n    var nf = culture.nf;\n    var s = '';\n    var precision = -1;\n\n    if (format.length > 1) {\n      precision = parseInt(format.substr(1));\n    }\n\n    var fs = format.charAt(0);\n    switch (fs) {\n      case 'd': case 'D':\n        s = parseInt(Math.abs(number)).toString();\n        if (precision != -1) {\n          s = padLeft(s, precision, '0');\n        }\n        if (number < 0) {\n          s = '-' + s;\n        }\n        break;\n      case 'x': case 'X':\n        s = parseInt(Math.abs(number)).toString(16);\n        if (fs == 'X') {\n          s = s.toUpperCase();\n        }\n        if (precision != -1) {\n          s = padLeft(s, precision, '0');\n        }\n        break;\n      case 'e': case 'E':\n        if (precision == -1) {\n          s = number.toExponential();\n        }\n        else {\n          s = number.toExponential(precision);\n        }\n        if (fs == 'E') {\n          s = s.toUpperCase();\n        }\n        break;\n      case 'f': case 'F':\n      case 'n': case 'N':\n        if (precision == -1) {\n          precision = nf.dd;\n        }\n        s = number.toFixed(precision).toString();\n        if (precision && (nf.ds != '.')) {\n          var index = s.indexOf('.');\n          s = s.substr(0, index) + nf.ds + s.substr(index + 1);\n        }\n        if ((fs == 'n') || (fs == 'N')) {\n          s = _commaFormatNumber(s, nf.gw, nf.ds, nf.gs);\n        }\n        break;\n      case 'c': case 'C':\n        if (precision == -1) {\n          precision = nf.curDD;\n        }\n        s = Math.abs(number).toFixed(precision).toString();\n        if (precision && (nf.curDS != '.')) {\n          var index = s.indexOf('.');\n          s = s.substr(0, index) + nf.curDS + s.substr(index + 1);\n        }\n        s = _commaFormatNumber(s, nf.curGW, nf.curDS, nf.curGS);\n        if (number < 0) {\n          s = String.format(culture, nf.curNP, s);\n        }\n        else {\n          s = String.format(culture, nf.curPP, s);\n        }\n        break;\n      case 'p': case 'P':\n        if (precision == -1) {\n          precision = nf.perDD;\n        }\n        s = (Math.abs(number) * 100.0).toFixed(precision).toString();\n        if (precision && (nf.perDS != '.')) {\n          var index = s.indexOf('.');\n          s = s.substr(0, index) + nf.perDS + s.substr(index + 1);\n        }\n        s = _commaFormatNumber(s, nf.perGW, nf.perDS, nf.perGS);\n        if (number < 0) {\n          s = String.format(culture, nf.perNP, s);\n        }\n        else {\n          s = String.format(culture, nf.perPP, s);\n        }\n        break;\n    }\n\n    return s;\n  }\n\n  var _dateFormatRE = /'.*?[^\\\\]'|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z/g;\n\n  _formatters['Date'] = function (dt, format, culture) {\n    if (format == 'iso') {\n      return dt.toISOString();\n    }\n    else if (format.charAt(0) == 'i') {\n      var fnName = 'String';\n      switch (format) {\n        case 'id': fnName = 'DateString'; break;\n        case 'it': fnName = 'TimeString'; break;\n      }\n      return culture == neutralCulture ? dt['to' + fnName]() : dt['toLocale' + fnName]();\n    }\n\n    var dtf = culture.dtf;\n\n    if (format.length == 1) {\n      switch (format) {\n        case 'f': format = dtf.ld + ' ' + dtf.st; break;\n        case 'F': format = dtf.dt; break;\n\n        case 'd': format = dtf.sd; break;\n        case 'D': format = dtf.ld; break;\n\n        case 't': format = dtf.st; break;\n        case 'T': format = dtf.lt; break;\n\n        case 'g': format = dtf.sd + ' ' + dtf.st; break;\n        case 'G': format = dtf.sd + ' ' + dtf.lt; break;\n\n        case 'R': case 'r':\n          dtf = neutralCulture.dtf;\n          format = dtf.gmt;\n          break;\n        case 'u': format = dtf.uni; break;\n        case 'U':\n          format = dtf.dt;\n          dt = new Date(dt.getUTCFullYear(), dt.getUTCMonth(), dt.getUTCDate(),\n            dt.getUTCHours(), dt.getUTCMinutes(), dt.getUTCSeconds(), dt.getUTCMilliseconds());\n          break;\n\n        case 's': format = dtf.sort; break;\n      }\n    }\n\n    if (format.charAt(0) == '%') {\n      format = format.substr(1);\n    }\n\n    var sb = new StringBuilder();\n\n    _dateFormatRE.lastIndex = 0;\n    while (true) {\n      var index = _dateFormatRE.lastIndex;\n      var match = _dateFormatRE.exec(format);\n\n      sb.append(format.slice(index, match ? match.index : format.length));\n      if (!match) {\n        break;\n      }\n\n      var fs = match[0];\n      var part = fs;\n      switch (fs) {\n        case 'dddd':\n          part = dtf.day[dt.getDay()];\n          break;\n        case 'ddd':\n          part = dtf.sday[dt.getDay()];\n          break;\n        case 'dd':\n          part = padLeft(dt.getDate().toString(), 2, '0');\n          break;\n        case 'd':\n          part = dt.getDate();\n          break;\n        case 'MMMM':\n          part = dtf.mon[dt.getMonth()];\n          break;\n        case 'MMM':\n          part = dtf.smon[dt.getMonth()];\n          break;\n        case 'MM':\n          part = padLeft((dt.getMonth() + 1).toString(), 2, '0');\n          break;\n        case 'M':\n          part = (dt.getMonth() + 1);\n          break;\n        case 'yyyy':\n          part = dt.getFullYear();\n          break;\n        case 'yy':\n          part = padLeft((dt.getFullYear() % 100).toString(), 2, '0');\n          break;\n        case 'y':\n          part = (dt.getFullYear() % 100);\n          break;\n        case 'h': case 'hh':\n          part = dt.getHours() % 12;\n          if (!part) {\n            part = '12';\n          }\n          else if (fs == 'hh') {\n            part = padLeft(part.toString(), 2, '0');\n          }\n          break;\n        case 'HH':\n          part = padLeft(dt.getHours().toString(), 2, '0');\n          break;\n        case 'H':\n          part = dt.getHours();\n          break;\n        case 'mm':\n          part = padLeft(dt.getMinutes().toString(), 2, '0');\n          break;\n        case 'm':\n          part = dt.getMinutes();\n          break;\n        case 'ss':\n          part = padLeft(dt.getSeconds().toString(), 2, '0');\n          break;\n        case 's':\n          part = dt.getSeconds();\n          break;\n        case 't': case 'tt':\n          part = (dt.getHours() < 12) ? dtf.am : dtf.pm;\n          if (fs == 't') {\n            part = part.charAt(0);\n          }\n          break;\n        case 'fff':\n          part = padLeft(dt.getMilliseconds().toString(), 3, '0');\n          break;\n        case 'ff':\n          part = padLeft(dt.getMilliseconds().toString(), 3).substr(0, 2);\n          break;\n        case 'f':\n          part = padLeft(dt.getMilliseconds().toString(), 3).charAt(0);\n          break;\n        case 'z':\n          part = dt.getTimezoneOffset() / 60;\n          part = ((part >= 0) ? '-' : '+') + Math.floor(Math.abs(part));\n          break;\n        case 'zz': case 'zzz':\n          part = dt.getTimezoneOffset() / 60;\n          part = ((part >= 0) ? '-' : '+') + padLeft(Math.floor(Math.abs(part)).toString(), 2, '0');\n          if (fs == 'zzz') {\n            part += dtf.ts + padLeft(Math.abs(dt.getTimezoneOffset() % 60).toString(), 2, '0');\n          }\n          break;\n        default:\n          if (part.charAt(0) == '\\'') {\n            part = part.substr(1, part.length - 2).replace(/\\\\'/g, '\\'');\n          }\n          break;\n      }\n      sb.append(part);\n    }\n\n    return sb.toString();\n  }\n\n  // Type System\n\n  var _modules = {};\n\n  var _classMarker = 'class';\n  var _interfaceMarker = 'interface';\n\n  function createType(typeName, typeInfo, typeRegistry) {\n    // The typeInfo is either an array of information representing\n    // classes and interfaces, or an object representing enums and resources\n    // or a function, representing a record factory.\n\n    if (Array.isArray(typeInfo)) {\n      var type = typeInfo[0];\n\n      // A class is minimally the class type and an object representing\n      // its prototype members, and optionally the base type, and references\n      // to interfaces implemented by the class.\n      if (typeInfo.length >= 2) {\n        var baseType = typeInfo[2];\n        if (baseType) {\n          // Chain the prototype of the base type (using an anonymous type\n          // in case the base class is not creatable, or has side-effects).\n          var anonymous = function () { };\n          anonymous.prototype = baseType.prototype;\n          type.prototype = new anonymous();\n          type.prototype.constructor = type;\n        }\n\n        // Add the type's prototype members if there are any\n        typeInfo[1] && extend(type.prototype, typeInfo[1]);\n\n        type.$base = baseType || Object;\n        type.$interfaces = typeInfo.slice(3);\n        type.$type = _classMarker;\n      }\n      else {\n        type.$type = _interfaceMarker;\n      }\n\n      type.$name = typeName;\n      return typeRegistry[typeName] = type;\n    }\n\n    return typeInfo;\n  }\n\n  function isClass(fn) {\n    return fn.$type == _classMarker;\n  }\n\n  function isInterface(fn) {\n    return fn.$type == _interfaceMarker;\n  }\n\n  function typeOf(instance) {\n    var ctor;\n\n    // NOTE: We have to catch exceptions because the constructor\n    //       cannot be looked up on native COM objects\n    try {\n      ctor = instance.constructor;\n    }\n    catch (ex) {\n    }\n    return ctor || Object;\n  }\n\n  function type(s) {\n    var nsIndex = s.indexOf('.');\n    var ns = nsIndex > 0 ? _modules[s.substr(0, nsIndex)] : globalThis;\n    var name = nsIndex > 0 ? s.substr(nsIndex + 1) : s;\n\n    return ns ? ns[name] : null;\n  }\n\n  var _typeNames = [\n    Number, 'Number',\n    String, 'String',\n    Boolean, 'Boolean',\n    Array, 'Array',\n    Date, 'Date',\n    RegExp, 'RegExp',\n    Function, 'Function'\n  ];\n\n  function typeName(type) {\n    if (!(type instanceof Function)) {\n      type = type.constructor;\n    }\n    if (type.$name) {\n      return type.$name;\n    }\n    if (type.name) {\n      return type.name;\n    }\n    for (var i = 0, len = _typeNames.length; i < len; i += 2) {\n      if (type == _typeNames[i]) {\n        return _typeNames[i + 1];\n      }\n    }\n    return 'Object';\n  }\n\n  function canAssign(type, otherType) {\n    // Checks if the specified type is equal to otherType,\n    // or is a parent of otherType\n\n    if ((type == Object) || (type == otherType)) {\n      return true;\n    }\n    if (type.$type == _classMarker) {\n      var baseType = otherType.$base;\n      while (baseType) {\n        if (type == baseType) {\n          return true;\n        }\n        baseType = baseType.$base;\n      }\n    }\n    else if (type.$type == _interfaceMarker) {\n      var baseType = otherType;\n      while (baseType) {\n        var interfaces = baseType.$interfaces;\n        if (interfaces && (interfaces.indexOf(type) >= 0)) {\n          return true;\n        }\n        baseType = baseType.$base;\n      }\n    }\n    return false;\n  }\n\n  function instanceOf(type, instance) {\n    // Checks if the specified instance is of the specified type\n\n    if (!isValue(instance)) {\n      return false;\n    }\n\n    if ((type == Object) || (instance instanceof type)) {\n      return true;\n    }\n\n    var instanceType = typeOf(instance);\n    return canAssign(type, instanceType);\n  }\n\n  function canCast(instance, type) {\n    return instanceOf(type, instance);\n  }\n\n  function safeCast(instance, type) {\n    return instanceOf(type, instance) ? instance : null;\n  }\n\n  function ss_module(name, implementation, exports) {\n    var registry = _modules[name] = { $name: name };\n\n    if (implementation) {\n      for (var typeName in implementation) {\n        createType(typeName, implementation[typeName], registry);\n      }\n    }\n\n    var api = {};\n    if (exports) {\n      for (var typeName in exports) {\n        api[typeName] = createType(typeName, exports[typeName], registry);\n      }\n    }\n\n    return api;\n  }\n\n  function createRegistry(name) {\n    var registry = _modules[name] = { $name: name };\n    return registry;\n  }\n\n  return extend(ss_module('ss', null, {\n    IDisposable: [IDisposable],\n    IEnumerable: [IEnumerable],\n    IEnumerator: [IEnumerator],\n    IObserver: [IObserver],\n    IApplication: [IApplication],\n    IContainer: [IContainer],\n    IObjectFactory: [IObjectFactory],\n    IEventManager: [IEventManager],\n    IInitializable: [IInitializable],\n    EventArgs: [EventArgs, {}],\n    CancelEventArgs: [CancelEventArgs, {}, EventArgs],\n    StringBuilder: [StringBuilder, StringBuilder$],\n    Stack: [Stack, Stack$],\n    Queue: [Queue, Queue$],\n    Observable: [Observable, Observable$],\n    ObservableCollection: [ObservableCollection, ObservableCollection$, null, IEnumerable],\n    Task: [Task, Task$]\n  }), {\n    version: '0.8',\n\n    isValue: isValue,\n    value: value,\n    extend: extend,\n    keys: keys,\n    keyCount: keyCount,\n    keyExists: keyExists,\n    clearKeys: clearKeys,\n    enumerate: enumerate,\n    array: toArray,\n    remove: removeItem,\n    boolean: parseBoolean,\n    regexp: parseRegExp,\n    number: parseNumber,\n    date: parseDate,\n    truncate: truncate,\n    now: now,\n    today: today,\n    compareDates: compareDates,\n    error: error,\n    string: string,\n    emptyString: emptyString,\n    whitespace: whitespace,\n    format: format,\n    compareStrings: compareStrings,\n    startsWith: startsWith,\n    endsWith: endsWith,\n    padLeft: padLeft,\n    padRight: padRight,\n    trim: trim,\n    trimStart: trimStart,\n    trimEnd: trimEnd,\n    insertString: insertString,\n    removeString: removeString,\n    replaceString: replaceString,\n    bind: bind,\n    bindAdd: bindAdd,\n    bindSub: bindSub,\n    bindExport: bindExport,\n    deferred: deferred,\n\n    module: ss_module,\n    modules: _modules,\n    createRegistry: createRegistry,\n    createType: createType,\n\n    isClass: isClass,\n    isInterface: isInterface,\n    typeOf: typeOf,\n    type: type,\n    typeName: typeName,\n    canCast: canCast,\n    safeCast: safeCast,\n    canAssign: canAssign,\n    instanceOf: instanceOf,\n\n    culture: {\n      neutral: neutralCulture,\n      current: currentCulture\n    },\n\n    fail: fail\n  });\n}\n\nexport var ss = _ss();","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Information about catalogued objects.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { Util } from \"./baseutil.js\";\nimport { Color } from \"./color.js\";\nimport { Coordinates } from \"./coordinates.js\";\n\n\n// wwtlib.Star\n\nexport function Star(input) {\n    this.magnitude = 0;\n    this.RA = 0;\n    this.dec = 0;\n    this.BMV = 0;\n    this.id = 0;\n    this.absoluteMagnitude = 0;\n    this.par = 0;\n    this.distance = 0;\n    var sa = input.split('\\t');\n    this.id = parseInt(ss.replaceString(sa[0], 'HIP', ''));\n    this.dec = parseFloat(sa[3]);\n    this.RA = parseFloat(sa[2]) / 15;\n    if (sa.length > 4) {\n        try {\n            if (sa[4].toUpperCase() !== 'NULL' && !!sa[4]) {\n                this.magnitude = parseFloat(sa[4]);\n            }\n        }\n        catch ($e1) {\n        }\n    }\n    if (sa.length > 5) {\n        try {\n            this.BMV = parseFloat(sa[5]);\n            this._makeColor(this.BMV);\n        }\n        catch ($e2) {\n        }\n    }\n    if (sa.length > 6) {\n        this.par = parseFloat(sa[6]);\n        this._makeDistanceAndMagnitude();\n    }\n}\n\nvar Star$ = {\n    get_name: function () {\n        return 'HIP' + this.id.toString();\n    },\n\n    get_coordinates: function () {\n        return Coordinates.fromRaDec(this.RA, this.dec);\n    },\n\n    stars: function (input, newish) {\n        var sa = input.split('\\t');\n        this.id = parseInt(sa[0]);\n        this.RA = parseFloat(sa[1]) / 15;\n        this.dec = parseFloat(sa[2]);\n        if (sa.length > 3) {\n            try {\n                this.magnitude = parseFloat(sa[3]);\n            }\n            catch ($e1) {\n            }\n        }\n        if (sa.length > 4) {\n            try {\n                this.col = Color.load(sa[4]);\n            }\n            catch ($e2) {\n            }\n        }\n    },\n\n    _makeDistanceAndMagnitude: function () {\n        this.distance = 1 / (this.par / 1000);\n        this.absoluteMagnitude = this.magnitude - 5 * (Util.logN(this.distance, 10) - 1);\n        //Convert to AU\n        this.distance *= 206264.806;\n    },\n\n    _makeColor: function (bmv) {\n        var c = 0xFFFFFFFF;\n\n        if (bmv <= -0.32) {\n            c = 0xFFA2B8FF;\n        } else if (bmv <= -0.31) {\n            c = 0xFFA3B8FF;\n        } else if (bmv <= -0.3) {\n            c = 0xFFA4BAFF;\n        }\n        // mistake in original source. Should this be \"<= -0.29\" or something?\n        // else if (bmv <= -0.3) {\n        //   c = 0xFFA5BAFF;\n        // }\n        else if (bmv <= -0.28) {\n            c = 0xFFA7BCFF;\n        } else if (bmv <= -0.26) {\n            c = 0xFFA9BDFF;\n        } else if (bmv <= -0.24) {\n            c = 0xFFABBFFF;\n        } else if (bmv <= -0.2) {\n            c = 0xFFAFC2FF;\n        } else if (bmv <= -0.16) {\n            c = 0xFFB4C6FF;\n        } else if (bmv <= -0.14) {\n            c = 0xFFB6C8FF;\n        } else if (bmv <= -0.12) {\n            c = 0xFFB9CAFF;\n        } else if (bmv <= -0.09) {\n            c = 0xFFBCCDFF;\n        } else if (bmv <= -0.06) {\n            c = 0xFFC1D0FF;\n        } else if (bmv <= 0) {\n            c = 0xFFCAD6FF;\n        } else if (bmv <= 0.06) {\n            c = 0xFFD2DCFF;\n        } else if (bmv <= 0.14) {\n            c = 0xFFDDE4FF;\n        } else if (bmv <= 0.19) {\n            c = 0xFFE3E8FF;\n        } else if (bmv <= 0.31) {\n            c = 0xFFF2F2FF;\n        } else if (bmv <= 0.36) {\n            c = 0xFFF9F6FF;\n        } else if (bmv <= 0.43) {\n            c = 0xFFFFF9FC;\n        } else if (bmv <= 0.54) {\n            c = 0xFFFFF6F3;\n        } else if (bmv <= 0.59) {\n            c = 0xFFFFF3EB;\n        } else if (bmv <= 0.63) {\n            c = 0xFFFFF1E7;\n        } else if (bmv <= 0.66) {\n            c = 0xFFFFEFE1;\n        } else if (bmv <= 0.74) {\n            c = 0xFFFFEEDD;\n        } else if (bmv <= 0.82) {\n            c = 0xFFFFEAD5;\n        } else if (bmv <= 0.92) {\n            c = 0xFFFFE4C4;\n        } else if (bmv <= 1.15) {\n            c = 0xFFFFFDFB8;\n        } else if (bmv <= 1.3) {\n            c = 0xFFFFDDB4;\n        } else if (bmv <= 1.41) {\n            c = 0xFFFFD39D;\n        } else if (bmv <= 1.48) {\n            c = 0xFFFFCD91;\n        } else if (bmv <= 1.52) {\n            c = 0xFFFFC987;\n        } else if (bmv <= 1.55) {\n            c = 0xFFFFC57F;\n        } else if (bmv <= 1.56) {\n            c = 0xFFFFC177;\n        } else if (bmv <= 1.61) {\n            c = 0xFFFFBD71;\n        } else if (bmv <= 1.72) {\n            c = 0xFFFFB866;\n        } else if (bmv <= 1.84) {\n            c = 0xFFFFB25B;\n        } else if (bmv <= 2) {\n            c = 0xFFFFAD51;\n        }\n\n        this.col = Color.fromInt(c);\n    }\n};\n\nregisterType(\"Star\", [Star, Star$, null]);\n\n\n// wwtlib.Galaxy\n\nexport function Galaxy(br) {\n    this.RA = 0;\n    this.dec = 0;\n    this.distance = 0;\n    this.type = 0;\n    this.eTypeBucket = 0;\n    this.size = 5;\n    this.sdssID = 0;\n    this.sdssID = br.readInt64();\n    this.RA = br.readSingle();\n    this.dec = br.readSingle();\n    this.distance = br.readSingle();\n    this.eTypeBucket = br.readByte();\n    this.size = br.readSingle();\n}\n\nGalaxy._eTypeBuckets = [-3, -0.186, -0.168, -0.158, -0.15, -0.143, -0.137, -0.13, -0.123, -0.115, -0.104, -0.089, -0.068, -0.042, -0.011, 0.024, 0.064, 0.111, 0.169, 0.252, 3];\n\nGalaxy.getEType = function (value) {\n    var a = 0;\n    var b = Galaxy._eTypeBuckets.length - 1;\n    while (b - a > 1) {\n        var m = (a + b) / 2;\n        if (value > Galaxy._eTypeBuckets[m]) {\n            a = m;\n        } else {\n            b = m;\n        }\n    }\n    return a;\n};\n\nvar Galaxy$ = {};\n\nregisterType(\"Galaxy\", [Galaxy, Galaxy$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A tile in a pyramid that uses a tangential (gnomonic) projection.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { tileCacheRemoveFromQueue, tilePrepDevice, useGlVersion2 } from \"./render_globals.js\";\nimport { Vector3d, PositionTexture } from \"./double3d.js\";\nimport { WEBGL } from \"./graphics/webgl_constants.js\";\nimport { RenderTriangle } from \"./render_triangle.js\";\nimport { FitsImage } from \"./layers/fits_image.js\";\nimport { Tile } from \"./tile.js\";\n\n\n// wwtlib.LatLngEdges\n\nexport function LatLngEdges() {\n    this.latMin = 0;\n    this.latMax = 0;\n    this.lngMin = 0;\n    this.lngMax = 0;\n}\n\nvar LatLngEdges$ = {};\n\nregisterType(\"LatLngEdges\", [LatLngEdges, LatLngEdges$, null]);\n\n\n// wwtlib.TangentTile\n\nexport function TangentTile(level, x, y, dataset, parent) {\n    this._topDown$1 = true;\n    Tile.call(this);\n    this.parent = parent;\n    this.level = level;\n    this.tileX = x;\n    this.tileY = y;\n    this.dataset = dataset;\n    this._topDown$1 = !dataset.get_bottomsUp();\n    this.computeBoundingSphere();\n}\n\nvar TangentTile$ = {\n    computeBoundingSphere: function () {\n        if (!this._topDown$1) {\n            this.computeBoundingSphereBottomsUp();\n            return;\n        }\n        var tileDegrees = this.dataset.get_baseTileDegrees() / Math.pow(2, this.level);\n        var latMin = (this.dataset.get_baseTileDegrees() / 2 - (this.tileY) * tileDegrees) + this.dataset.get_offsetY();\n        var latMax = (this.dataset.get_baseTileDegrees() / 2 - ((this.tileY + 1)) * tileDegrees) + this.dataset.get_offsetY();\n        var lngMin = ((this.tileX) * tileDegrees - this.dataset.get_baseTileDegrees() / this.dataset.get_widthFactor()) + this.dataset.get_offsetX();\n        var lngMax = (((this.tileX + 1)) * tileDegrees - this.dataset.get_baseTileDegrees() / this.dataset.get_widthFactor()) + this.dataset.get_offsetX();\n        var latCenter = (latMin + latMax) / 2;\n        var lngCenter = (lngMin + lngMax) / 2;\n        this.sphereCenter = this.geoTo3dTan(latCenter, lngCenter);\n        this.topLeft = this.geoTo3dTan(latMin, lngMin);\n        this.bottomRight = this.geoTo3dTan(latMax, lngMax);\n        this.topRight = this.geoTo3dTan(latMin, lngMax);\n        this.bottomLeft = this.geoTo3dTan(latMax, lngMin);\n        var distVect = this.geoTo3dTan(latMin, lngMin);\n        distVect.subtract(this.sphereCenter);\n        this.sphereRadius = distVect.length();\n    },\n\n    computeBoundingSphereBottomsUp: function () {\n        var tileDegrees = this.dataset.get_baseTileDegrees() / Math.pow(2, this.level);\n        var latMin = (this.dataset.get_baseTileDegrees() / 2 + ((this.tileY + 1)) * tileDegrees) + this.dataset.get_offsetY();\n        var latMax = (this.dataset.get_baseTileDegrees() / 2 + (this.tileY) * tileDegrees) + this.dataset.get_offsetY();\n        var lngMin = ((this.tileX) * tileDegrees - this.dataset.get_baseTileDegrees() / this.dataset.get_widthFactor()) + this.dataset.get_offsetX();\n        var lngMax = (((this.tileX + 1)) * tileDegrees - this.dataset.get_baseTileDegrees() / this.dataset.get_widthFactor()) + this.dataset.get_offsetX();\n        this.topLeft = this.geoTo3dTan(latMin, lngMin);\n        this.bottomRight = this.geoTo3dTan(latMax, lngMax);\n        this.topRight = this.geoTo3dTan(latMin, lngMax);\n        this.bottomLeft = this.geoTo3dTan(latMax, lngMin);\n    },\n\n    getLatLngEdges: function () {\n        var tileDegrees = this.dataset.get_baseTileDegrees() / Math.pow(2, this.level);\n        var edges = new LatLngEdges();\n        edges.latMin = (this.dataset.get_baseTileDegrees() / 2 - (this.tileY) * tileDegrees) + this.dataset.get_offsetY();\n        edges.latMax = (this.dataset.get_baseTileDegrees() / 2 - ((this.tileY + 1)) * tileDegrees) + this.dataset.get_offsetY();\n        edges.lngMin = ((this.tileX) * tileDegrees - this.dataset.get_baseTileDegrees() / this.dataset.get_widthFactor()) + this.dataset.get_offsetX();\n        edges.lngMax = (((this.tileX + 1)) * tileDegrees - this.dataset.get_baseTileDegrees() / this.dataset.get_widthFactor()) + this.dataset.get_offsetX();\n        return edges;\n    },\n\n    geoTo3dTan: function (lat, lng) {\n        lng = -lng;\n        var fac1 = this.dataset.get_baseTileDegrees() / 2;\n        var factor = Math.tan(fac1 * Tile.RC);\n        return this.dataset.get_matrix().transform(Vector3d.create(1, (lat / fac1 * factor), (lng / fac1 * factor)));\n    },\n\n    requestImage: function () {\n        this.fitsImage = ss.safeCast(this.dataset.get_wcsImage(), FitsImage);\n        if (this.fitsImage != null) {\n            this.texReady = true;\n            this.downloading = false;\n            this.errored = this.fitsImage.errored;\n            this.requestPending = false;\n            tileCacheRemoveFromQueue(this.get_key(), true);\n            if (useGlVersion2) {\n                this.makeTexture();\n                this.readyToRender = true;\n            }\n            else {\n                //Cached bitmap for performance reasons\n                //Only used in legacy rendering of FITS (WebGL 1.0) inside SkyImageTile\n                this.bmp = this.fitsImage.getBitmap();\n                this.texture2d = this.bmp.getTexture();\n                this.readyToRender = true;\n            }\n        } else {\n            Tile.prototype.requestImage.call(this);\n        }\n    },\n\n    createGeometry: function (renderContext) {\n        if (this.geometryCreated) {\n            return true;\n        }\n        this.geometryCreated = true;\n        for (var i = 0; i < 4; i++) {\n            this._renderTriangleLists[i] = [];\n        }\n        this.globalCenter = this.geoTo3dTan(0, 0);\n        var edges = this.getLatLngEdges();\n        this.topLeft = this.geoTo3dTan(edges.latMin, edges.lngMin).subtract(this.globalCenter);\n        this.bottomRight = this.geoTo3dTan(edges.latMax, edges.lngMax).subtract(this.globalCenter);\n        this.topRight = this.geoTo3dTan(edges.latMin, edges.lngMax).subtract(this.globalCenter);\n        this.bottomLeft = this.geoTo3dTan(edges.latMax, edges.lngMin).subtract(this.globalCenter);\n        var center = Vector3d.midPoint(this.topLeft, this.bottomRight);\n        var leftCenter = Vector3d.midPoint(this.topLeft, this.bottomLeft);\n        var rightCenter = Vector3d.midPoint(this.topRight, this.bottomRight);\n        var topCenter = Vector3d.midPoint(this.topLeft, this.topRight);\n        var bottomCenter = Vector3d.midPoint(this.bottomLeft, this.bottomRight);\n        if (renderContext.gl == null) {\n            this._renderTriangleLists[0].push(RenderTriangle.create(PositionTexture.createPos(this.topLeft, 0, 0), PositionTexture.createPos(leftCenter, 0, 0.5), PositionTexture.createPos(topCenter, 0.5, 0), this.texture, this.level));\n            this._renderTriangleLists[0].push(RenderTriangle.create(PositionTexture.createPos(leftCenter, 0, 0.5), PositionTexture.createPos(center, 0.5, 0.5), PositionTexture.createPos(topCenter, 0.5, 0), this.texture, this.level));\n            this._renderTriangleLists[1].push(RenderTriangle.create(PositionTexture.createPos(topCenter, 0.5, 0), PositionTexture.createPos(rightCenter, 1, 0.5), PositionTexture.createPos(this.topRight, 1, 0), this.texture, this.level));\n            this._renderTriangleLists[1].push(RenderTriangle.create(PositionTexture.createPos(topCenter, 0.5, 0), PositionTexture.createPos(center, 0.5, 0.5), PositionTexture.createPos(rightCenter, 1, 0.5), this.texture, this.level));\n            this._renderTriangleLists[2].push(RenderTriangle.create(PositionTexture.createPos(leftCenter, 0, 0.5), PositionTexture.createPos(bottomCenter, 0.5, 1), PositionTexture.createPos(center, 0.5, 0.5), this.texture, this.level));\n            this._renderTriangleLists[2].push(RenderTriangle.create(PositionTexture.createPos(leftCenter, 0, 0.5), PositionTexture.createPos(this.bottomLeft, 0, 1), PositionTexture.createPos(bottomCenter, 0.5, 1), this.texture, this.level));\n            this._renderTriangleLists[3].push(RenderTriangle.create(PositionTexture.createPos(center, 0.5, 0.5), PositionTexture.createPos(this.bottomRight, 1, 1), PositionTexture.createPos(rightCenter, 1, 0.5), this.texture, this.level));\n            this._renderTriangleLists[3].push(RenderTriangle.create(PositionTexture.createPos(center, 0.5, 0.5), PositionTexture.createPos(bottomCenter, 0.5, 1), PositionTexture.createPos(this.bottomRight, 1, 1), this.texture, this.level));\n            this.readyToRender = true;\n        } else {\n            //process vertex list\n            this._vertexBuffer = tilePrepDevice.createBuffer();\n            tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this._vertexBuffer);\n            var f32array = new Float32Array(9 * 5);\n            var buffer = f32array;\n            var index = 0;\n            index = this.addVertex(buffer, index, PositionTexture.createPos(bottomCenter, 0.5, 1));\n            index = this.addVertex(buffer, index, PositionTexture.createPos(this.bottomLeft, 0, 1));\n            index = this.addVertex(buffer, index, PositionTexture.createPos(this.bottomRight, 1, 1));\n            index = this.addVertex(buffer, index, PositionTexture.createPos(center, 0.5, 0.5));\n            index = this.addVertex(buffer, index, PositionTexture.createPos(leftCenter, 0, 0.5));\n            index = this.addVertex(buffer, index, PositionTexture.createPos(rightCenter, 1, 0.5));\n            index = this.addVertex(buffer, index, PositionTexture.createPos(topCenter, 0.5, 0));\n            index = this.addVertex(buffer, index, PositionTexture.createPos(this.topLeft, 0, 0));\n            index = this.addVertex(buffer, index, PositionTexture.createPos(this.topRight, 1, 0));\n            tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n\n            // process index buffers\n            for (var i = 0; i < 4; i++) {\n                index = 0;\n                this.triangleCount = 2;\n                var ui16array = new Uint16Array(this.triangleCount * 3);\n                var indexArray = ui16array;\n                switch (i) {\n                    case 0:\n                        indexArray[index++] = 7;\n                        indexArray[index++] = 4;\n                        indexArray[index++] = 6;\n                        indexArray[index++] = 4;\n                        indexArray[index++] = 3;\n                        indexArray[index++] = 6;\n                        break;\n                    case 1:\n                        indexArray[index++] = 6;\n                        indexArray[index++] = 5;\n                        indexArray[index++] = 8;\n                        indexArray[index++] = 6;\n                        indexArray[index++] = 3;\n                        indexArray[index++] = 5;\n                        break;\n                    case 2:\n                        indexArray[index++] = 4;\n                        indexArray[index++] = 0;\n                        indexArray[index++] = 3;\n                        indexArray[index++] = 4;\n                        indexArray[index++] = 1;\n                        indexArray[index++] = 0;\n                        break;\n                    case 3:\n                        indexArray[index++] = 3;\n                        indexArray[index++] = 2;\n                        indexArray[index++] = 5;\n                        indexArray[index++] = 3;\n                        indexArray[index++] = 0;\n                        indexArray[index++] = 2;\n                        break;\n                }\n                this._indexBuffers[i] = tilePrepDevice.createBuffer();\n                tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, this._indexBuffers[i]);\n                tilePrepDevice.bufferData(WEBGL.ELEMENT_ARRAY_BUFFER, ui16array, WEBGL.STATIC_DRAW);\n            }\n        }\n        return true;\n    }\n};\n\nregisterType(\"TangentTile\", [TangentTile, TangentTile$, Tile]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The base class for tiles in image tile pyramids.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { Vector3d, Vector4d, ConvexHull } from \"./double3d.js\";\nimport {\n    tileCacheAddTileToQueue,\n    tileCacheGetCachedTile,\n    tileCacheGetTile,\n    tileCacheRemoveFromQueue,\n    tilePrepDevice,\n    tileDemEnabled,\n    useGlVersion2,\n    inc_tileCacheAccessID,\n    set_tileDemEnabled,\n    set_tileUvMultiple,\n} from \"./render_globals.js\";\nimport { freestandingMode } from \"./data_globals.js\";\nimport { WEBGL } from \"./graphics/webgl_constants.js\";\nimport { Texture } from \"./graphics/texture.js\";\nimport { FitsShader, TileShader } from \"./graphics/shaders.js\";\nimport { getTileKey } from \"./util.js\";\nimport { BlendState } from \"./blend_state.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { ColorMapContainer } from \"./layers/color_map_container.js\";\nimport { FitsImageJs } from \"./layers/fits_image_js.js\";\nimport { FitsImageTile } from \"./layers/fits_image_tile.js\";\n\n\n// wwtlib.Tile\n\nexport function Tile() {\n    this._renderTriangleLists = new Array(4);\n    this._indexBuffers = new Array(4);\n    this.level = 0;\n    this.tileX = 0;\n    this.tileY = 0;\n    this.texture = null;\n    this.texture2d = null;\n    this.isCatalogTile = false;\n    this.readyToRender = false;\n    this.inViewFrustum = true;\n    this.globalCenter = Vector3d.zero;\n    this.children = [null, null, null, null];\n    this.parent = null;\n    this.localCenter = new Vector3d();\n    this.renderedAtOrBelowGeneration = 0;\n    this._demScaleFactor = 6371000;\n    this.demIndex = 0;\n    this.demAverage = 0;\n    this.demReady = false;\n    this.texReady = false;\n    this.demTile = false;\n    this.demDownloading = false;\n    this.renderedGeneration = 0;\n    this.accomidation = 0;\n    this.accessCount = 0;\n    this.downloading = false;\n    this.geometryCreated = false;\n    this._isHdTile = false;\n    this.demSize = 33 * 33;\n    this._topLeftScreen = new Vector3d();\n    this._bottomRightScreen = new Vector3d();\n    this._topRightScreen = new Vector3d();\n    this._bottomLeftScreen = new Vector3d();\n    this.sphereRadius = 0;\n    this.sphereCenter = new Vector3d();\n    this.radius = 1;\n    this.triangleCount = 0;\n    this.requestHits = 0;\n    this.requestPending = false;\n    this.errored = false;\n    this._key = null;\n    this._tileId = null;\n    this._vertexCount = 0;\n    this.renderChildPart = null;\n    this.renderChildPart = new Array(4);\n    for (var i = 0; i < 4; i++) {\n        this.renderChildPart[i] = BlendState.create(false, 500);\n    }\n}\n\nTile.currentRenderGeneration = 0;\nTile.tileTargetX = -1;\nTile.tileTargetY = -1;\nTile.tileTargetLevel = -1;\nTile.tilesInView = 0;\nTile.trianglesRendered = 0;\nTile.tilesTouched = 0;\nTile.frustumList = null;\nset_tileUvMultiple(1);\nTile.callCount = 0;\nTile.useAccomidation = true;\nset_tileDemEnabled(true);\nTile.maxLevel = 20;\nTile.meshComplexity = 50;\nTile.imageQuality = 50;\nTile.lastDeepestLevel = 0;\nTile.deepestLevel = 0;\nTile.RC = (3.1415927 / 180);\n\nTile.getFrustumList = function () {\n    try {\n        return Tile.frustumList;\n    }\n    catch ($e1) {\n        return null;\n    }\n};\n\nTile.get_subDivisions = function () {\n    return 32;\n};\n\nvar Tile$ = {\n    getIndexBuffer: function (index, accomidation) {\n        return this._indexBuffers[index];\n    },\n\n    isPointInTile: function (lat, lng) {\n        return false;\n    },\n\n    getSurfacePointAltitude: function (lat, lng, meters) {\n        return 0;\n    },\n\n    makeTexture: function () {\n        if (tilePrepDevice != null) {\n            try {\n                this.texture2d = tilePrepDevice.createTexture();\n                tilePrepDevice.bindTexture(WEBGL.TEXTURE_2D, this.texture2d);\n                tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_WRAP_S, WEBGL.CLAMP_TO_EDGE);\n                tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_WRAP_T, WEBGL.CLAMP_TO_EDGE);\n                if (this.dataset.get_extension().toLowerCase().indexOf('fits') > -1 && useGlVersion2) {\n                    tilePrepDevice.texImage2D(WEBGL.TEXTURE_2D, 0, WEBGL.R32F, ss.truncate(this.fitsImage.get_sizeX()), ss.truncate(this.fitsImage.get_sizeY()), 0, WEBGL.RED, WEBGL.FLOAT, this.fitsImage.dataUnit);\n                    tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_MIN_FILTER, WEBGL.NEAREST);\n                    tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_MAG_FILTER, WEBGL.NEAREST);\n                }\n                else {\n                    var image = this.texture;\n                    // Before we bind resize to a power of two if nessesary so we can MIPMAP\n                    if ((!Texture.isPowerOfTwo(this.texture.height) | !Texture.isPowerOfTwo(this.texture.width)) === 1) {\n                        var temp = document.createElement('canvas');\n                        temp.height = Texture.fitPowerOfTwo(image.height);\n                        temp.width = Texture.fitPowerOfTwo(image.width);\n                        var ctx = temp.getContext('2d');\n                        ctx.drawImage(image, 0, 0, temp.width, temp.height);\n                        //Substitute the resized image\n                        image = temp;\n                    }\n                    tilePrepDevice.texImage2D(WEBGL.TEXTURE_2D, 0, WEBGL.RGBA, WEBGL.RGBA, WEBGL.UNSIGNED_BYTE, image);\n                    tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_MIN_FILTER, WEBGL.LINEAR_MIPMAP_NEAREST);\n                    tilePrepDevice.generateMipmap(WEBGL.TEXTURE_2D);\n                }\n                tilePrepDevice.bindTexture(WEBGL.TEXTURE_2D, null);\n            }\n            catch ($e1) {\n                this.errored = true;\n            }\n        }\n    },\n\n    addVertex: function (buffer, index, p) {\n        buffer[index++] = p.position.x;\n        buffer[index++] = p.position.y;\n        buffer[index++] = p.position.z;\n        buffer[index++] = p.tu;\n        buffer[index++] = p.tv;\n        return index;\n    },\n\n    geoTo3dWithAlt: function (lat, lng, useLocalCenter, rev) {\n        lat = Math.max(Math.min(90, lat), -90);\n        lng = Math.max(Math.min(180, lng), -180);\n        if (!tileDemEnabled || this.demData == null) {\n            return this.geoTo3d(lat, lng, useLocalCenter);\n        }\n        if (rev) {\n            lng -= 180;\n        }\n        var altitude = this.demData[this.demIndex];\n        var retVal = this.geoTo3dWithAltitude(lat, lng, altitude, useLocalCenter);\n        return retVal;\n    },\n\n    geoTo3dWithAltitude: function (lat, lng, altitude, useLocalCenter) {\n        var radius = 1 + (altitude / this.get__demScaleFactor());\n        var retVal = Vector3d.create((Math.cos(lng * Tile.RC) * Math.cos(lat * Tile.RC) * radius), (Math.sin(lat * Tile.RC) * radius), (Math.sin(lng * Tile.RC) * Math.cos(lat * Tile.RC) * radius));\n        if (useLocalCenter) {\n            retVal.subtract(this.localCenter);\n        }\n        return retVal;\n    },\n\n    get__demScaleFactor: function () {\n        return this._demScaleFactor; // / Properties.Settings.Default.TerrainScaling;\n    },\n\n    set__demScaleFactor: function (value) {\n        this._demScaleFactor = value;\n        return value;\n    },\n\n    requestImage: function () {\n        var $this = this;\n\n        if (this.dataset.get_extension().toLowerCase().indexOf('fits') > -1) {\n            if (!this.downloading && !this.readyToRender) {\n                this.downloading = true;\n                if (useGlVersion2) {\n                    this.fitsImage = new FitsImageTile(this.dataset, this.get_URL(), function (wcsImage) {\n                        $this.downloading = false;\n                        $this.errored = $this.fitsImage.errored;\n                        tileCacheRemoveFromQueue($this.get_key(), true);\n                        if (!$this.fitsImage.errored) {\n                            if (!$this.level) {\n                                // For a non-HiPS tiled FITS, this is our\n                                // mechanism for notifying the layer creator\n                                // that the initial FITS data have loaded and\n                                // the FitsProperties can be trusted.\n                                $this.dataset.get_fitsProperties()._fireMainImageLoaded($this.fitsImage);\n                                $this.fitsImage.applyDisplaySettings();\n                            }\n                            $this.texReady = true;\n                            $this.readyToRender = $this.texReady && ($this.demReady || !$this.demTile);\n                            $this.requestPending = false;\n                            $this.makeTexture();\n                        }\n                    });\n                }\n                else {\n                    this.fitsImage = FitsImageJs.createTiledFits(this.dataset, this.get_URL(), function (wcsImage) {\n                        if (!$this.level) {\n                            $this.dataset.get_fitsProperties()._fireMainImageLoaded($this.fitsImage);\n                        }\n                        $this.texReady = true;\n                        $this.downloading = false;\n                        $this.errored = $this.fitsImage.errored;\n                        $this.readyToRender = $this.texReady && ($this.demReady || !$this.demTile);\n                        $this.requestPending = false;\n                        tileCacheRemoveFromQueue($this.get_key(), true);\n                        $this.texture2d = wcsImage.getBitmap().getTexture();\n                    });\n                }\n            }\n        } else {\n            if (this.get_dataset().get_wcsImage() != null) {\n                this.texReady = true;\n                this.downloading = false;\n                this.errored = false;\n                this.readyToRender = true;\n                this.requestPending = false;\n                tileCacheRemoveFromQueue(this.get_key(), true);\n                return;\n            }\n            if (!this.downloading && !this.readyToRender) {\n                this.downloading = true;\n                this.texture = document.createElement('img');\n                var xdomimg = this.texture;\n                this.texture.addEventListener('load', function (e) {\n                    $this.texReady = true;\n                    $this.downloading = false;\n                    $this.errored = false;\n                    $this.readyToRender = $this.texReady && ($this.demReady || !$this.demTile);\n                    $this.requestPending = false;\n                    tileCacheRemoveFromQueue($this.get_key(), true);\n                    $this.makeTexture();\n                }, false);\n                this.texture.addEventListener('error', function (e) {\n                    if (!$this.texture.hasAttribute('proxyattempt')) {\n                        $this.texture.setAttribute('proxyattempt', true);\n                        // NOTE: `this.URL` is dynamically generated using\n                        // URLHelpers.rewrite(). Say that we request tiles from\n                        // example.com, which requires CORS proxying. Say also\n                        // that this callback is called for a request to a tile\n                        // that should in fact be available. If a different\n                        // request fails before this callback is called,\n                        // activateProxy() will be called on the example.com\n                        // domain, making it so that `this.URL` in the following\n                        // call goes through the proxy, making it so that\n                        // `new_url` is null, making it so that this tile is\n                        // erroneously marked as failed when it should not be.\n                        // The solution: make sure to check proxy activation\n                        // with the *original* request URL, `texture.Src`, not\n                        // the one that may have been updated, `this.URL`.\n                        var new_url = URLHelpers.singleton.activateProxy($this.texture.src);\n                        if (new_url != null) {\n                            // null => don't bother: we know that the proxy won't help\n                            $this.texture.src = new_url;\n                            return;\n                        }\n                    }\n                    $this.downloading = false;\n                    $this.readyToRender = false;\n                    $this.errored = true;\n                    $this.requestPending = false;\n                    tileCacheRemoveFromQueue($this.get_key(), true);\n                }, false);\n                xdomimg.crossOrigin = 'anonymous';\n                this.texture.src = this.get_URL();\n            }\n        }\n    },\n\n    createDemFromParent: function () {\n        return false;\n    },\n\n    _loadDemData: function () {\n        if (this.demFile == null) {\n            return this.createDemFromParent();\n        }\n        this.demData = this.demFile;\n        if (this.demFile.length !== 1089 && this.demFile.length !== 513) {\n            return this.createDemFromParent();\n        }\n        var total = 0;\n        var $enum1 = ss.enumerate(this.demData);\n        while ($enum1.moveNext()) {\n            var fv = $enum1.current;\n            total += fv;\n        }\n        this.demAverage /= this.demData.length;\n        return true;\n    },\n\n    requestDem: function () {\n        var $this = this;\n\n        if (!this.readyToRender && !this.demDownloading) {\n            this.demTile = true;\n            this.demDownloading = true;\n            Tile.callCount++;\n            var xhr = new XMLHttpRequest();\n            xhr.addEventListener('load', function (e) {\n                $this.demReady = true;\n                $this.demDownloading = false;\n                $this.readyToRender = $this.texReady && ($this.demReady || !$this.demTile);\n                $this.requestPending = false;\n                try {\n                    $this.demFile = new Float32Array(xhr.response);\n                }\n                catch ($e1) {\n                }\n                tileCacheRemoveFromQueue($this.get_key(), true);\n            }, false);\n            xhr.addEventListener('error', function (e) {\n                $this.demDownloading = false;\n                $this.demReady = false;\n                $this.readyToRender = false;\n                $this.errored = true;\n                $this.requestPending = false;\n                tileCacheRemoveFromQueue($this.get_key(), true);\n            }, false);\n            xhr.open('GET', this.get_demURL(), true);\n            xhr.responseType = 'arraybuffer';\n            xhr.send();\n        }\n    },\n\n    draw3D: function (renderContext, opacity) {\n        this.renderedGeneration = Tile.currentRenderGeneration;\n        Tile.tilesTouched++;\n        this.accessCount = inc_tileCacheAccessID();\n        if (this.errored) {\n            return false;\n        }\n        var xMax = 2;\n        this.inViewFrustum = true;\n        if (!this.readyToRender) {\n            tileCacheAddTileToQueue(this);\n            return false;\n        }\n        var transitioning = false;\n        var childIndex = 0;\n        var yOffset = 0;\n        if (this.dataset.get_mercator() || this.dataset.get_bottomsUp()) {\n            yOffset = 1;\n        }\n        var xOffset = 0;\n        var anythingToRender = false;\n        var childRendered = false;\n        for (var y1 = 0; y1 < 2; y1++) {\n            for (var x1 = 0; x1 < xMax; x1++) {\n                if (this.level < this.dataset.get_levels()) {\n                    // make children\n                    if (this.children[childIndex] == null) {\n                        this.children[childIndex] = tileCacheGetTile(this.level + 1, this.tileX * 2 + ((x1 + xOffset) % 2), this.tileY * 2 + ((y1 + yOffset) % 2), this.dataset, this);\n                    }\n                    if (this.children[childIndex].isTileInFrustum(renderContext.get_frustum())) {\n                        this.inViewFrustum = true;\n                        if (this.children[childIndex].isTileBigEnough(renderContext)) {\n                            this.renderChildPart[childIndex].set_targetState(!this.children[childIndex].draw3D(renderContext, opacity));\n                            if (this.renderChildPart[childIndex].get_targetState()) {\n                                childRendered = true;\n                            }\n                        }\n                        else {\n                            this.renderChildPart[childIndex].set_targetState(true);\n                        }\n                    }\n                    else {\n                        this.renderChildPart[childIndex].set_targetState(this.renderChildPart[childIndex].set_state(false));\n                    }\n                    if (this.renderChildPart[childIndex].get_targetState() !== this.renderChildPart[childIndex].get_state()) {\n                        transitioning = true;\n                    }\n                }\n                else {\n                    this.renderChildPart[childIndex].set_state(true);\n                }\n                if (!!this.renderChildPart[childIndex].get_state()) {\n                    anythingToRender = true;\n                }\n                childIndex++;\n            }\n        }\n        if (childRendered || anythingToRender) {\n            this.renderedAtOrBelowGeneration = Tile.currentRenderGeneration;\n            if (this.parent != null) {\n                this.parent.renderedAtOrBelowGeneration = this.renderedAtOrBelowGeneration;\n            }\n        }\n        if (!anythingToRender) {\n            return true;\n        }\n        if (!this.createGeometry(renderContext)) {\n            return false;\n        }\n        Tile.tilesInView++;\n        this.accomidation = this._computeAccomidation();\n        for (var i = 0; i < 4; i++) {\n            if (this.renderChildPart[i].get_targetState()) {\n                this.renderPart(renderContext, i, (opacity / 100), false);\n            }\n        }\n        return true;\n    },\n\n    _computeAccomidation: function () {\n        var accVal = 0;\n        if (!Tile.useAccomidation) {\n            return 0;\n        }\n        var top = tileCacheGetCachedTile(this.level, this.tileX, this.tileY + 1, this.dataset, this);\n        if (top == null || top.renderedAtOrBelowGeneration < Tile.currentRenderGeneration - 2) {\n            accVal += 1;\n        }\n        var right = tileCacheGetCachedTile(this.level, this.tileX + 1, this.tileY, this.dataset, this);\n        if (right == null || right.renderedAtOrBelowGeneration < Tile.currentRenderGeneration - 2) {\n            accVal += 2;\n        }\n        var bottom = tileCacheGetCachedTile(this.level, this.tileX, this.tileY - 1, this.dataset, this);\n        if (bottom == null || bottom.renderedAtOrBelowGeneration < Tile.currentRenderGeneration - 2) {\n            accVal += 4;\n        }\n        var left = tileCacheGetCachedTile(this.level, this.tileX - 1, this.tileY, this.dataset, this);\n        if (left == null || left.renderedAtOrBelowGeneration < Tile.currentRenderGeneration - 2) {\n            accVal += 8;\n        }\n        return accVal;\n    },\n\n    renderPart: function (renderContext, part, opacity, combine) {\n        if (tilePrepDevice == null) {\n            var lighting = renderContext.lighting && renderContext.get_sunPosition() != null;\n            var $enum1 = ss.enumerate(this._renderTriangleLists[part]);\n            while ($enum1.moveNext()) {\n                var tri = $enum1.current;\n                tri.opacity = opacity;\n                if (lighting) {\n                    // transform normal by WV\n                    var norm = tri.normal.copy();\n                    renderContext.get_world().multiplyVector(norm);\n                    norm.normalize();\n\n                    // Dot product from sun angle\n                    var light = Vector3d.dot(norm, renderContext.get_sunPosition());\n                    if (light < 0) {\n                        light = 0;\n                    }\n                    else {\n                        light = Math.min(1, (light * 1));\n                    }\n\n                    // set lighting\n                    tri.lighting = light;\n                }\n                else {\n                    tri.lighting = 1;\n                }\n                tri.draw(renderContext.device, renderContext.WVP);\n            }\n        } else {\n            if (useGlVersion2 && this.fitsImage != null) {\n                ColorMapContainer.bindColorMapTexture(tilePrepDevice, this.dataset.get_fitsProperties().colorMapName);\n                FitsShader.min = this.dataset.get_fitsProperties().lowerCut;\n                FitsShader.max = this.dataset.get_fitsProperties().upperCut;\n                FitsShader.containsBlanks = this.dataset.get_fitsProperties().containsBlanks;\n                FitsShader.blankValue = this.dataset.get_fitsProperties().blankValue;\n                FitsShader.bZero = this.dataset.get_fitsProperties().bZero;\n                FitsShader.bScale = this.dataset.get_fitsProperties().bScale;\n                FitsShader.scaleType = this.dataset.get_fitsProperties().scaleType;\n                FitsShader.transparentBlack = this.dataset.get_fitsProperties().transparentBlack;\n                FitsShader.use(renderContext, this._vertexBuffer, this.getIndexBuffer(part, this.accomidation), this.texture2d, opacity, false, this.globalCenter);\n            }\n            else {\n                TileShader.use(renderContext, this._vertexBuffer, this.getIndexBuffer(part, this.accomidation), this.texture2d, opacity, false, this.globalCenter);\n            }\n            renderContext.gl.drawElements(WEBGL.TRIANGLES, this.triangleCount * 3, WEBGL.UNSIGNED_SHORT, 0);\n        }\n    },\n\n    cleanUp: function (removeFromParent) {\n        this.readyToRender = false;\n        this.demData = null;\n        this.demFile = null;\n        this.demDownloading = false;\n        this.texReady = false;\n        this.demReady = false;\n        this.errored = false;\n        if (this.texture != null) {\n            this.texture = null;\n        }\n        this._renderTriangleLists = new Array(4);\n        this.geometryCreated = false;\n        if (removeFromParent && this.parent != null) {\n            this.parent.removeChild(this);\n            this.parent = null;\n        }\n        if (tilePrepDevice != null) {\n            var $enum1 = ss.enumerate(this._indexBuffers);\n            while ($enum1.moveNext()) {\n                var buf = $enum1.current;\n                tilePrepDevice.deleteBuffer(buf);\n            }\n            this._indexBuffers = new Array(4);\n            if (this._vertexBuffer != null) {\n                tilePrepDevice.deleteBuffer(this._vertexBuffer);\n                this._vertexBuffer = null;\n            }\n            if (this.texture2d != null) {\n                tilePrepDevice.deleteTexture(this.texture2d);\n                this.texture2d = null;\n            }\n        }\n    },\n\n    removeChild: function (child) {\n        for (var i = 0; i < 4; i++) {\n            if (this.children[i] === child) {\n                this.children[i] = null;\n                return;\n            }\n        }\n    },\n\n    createGeometry: function (renderContext) {\n        if (tileDemEnabled && this.demReady && this.demData == null) {\n            if (!this._loadDemData()) {\n                return false;\n            }\n        }\n        if (tileDemEnabled && this.demData == null) {\n            return false;\n        }\n        this.readyToRender = true;\n        return true;\n    },\n\n    calcSphere: function () {\n        var corners = new Array(4);\n        corners[0] = this.topLeft;\n        corners[1] = this.bottomRight;\n        corners[2] = this.topRight;\n        corners[3] = this.bottomLeft;\n        var result = ConvexHull.findEnclosingSphere(corners);\n        this.sphereCenter = result.center;\n        this.sphereRadius = result.radius;\n    },\n\n    isTileBigEnough: function (renderContext) {\n        if (this.level > 1) {\n            // Test for tile scale in view.\n            var wvp = renderContext.WVP;\n            wvp._transformTo(this.topLeft, this._topLeftScreen);\n            wvp._transformTo(this.bottomRight, this._bottomRightScreen);\n            wvp._transformTo(this.topRight, this._topRightScreen);\n            wvp._transformTo(this.bottomLeft, this._bottomLeftScreen);\n            var top = this._topLeftScreen;\n            top.subtract(this._topRightScreen);\n            var topLength = top.length();\n            var bottom = this._bottomLeftScreen;\n            bottom.subtract(this._bottomRightScreen);\n            var bottomLength = bottom.length();\n            var left = this._bottomLeftScreen;\n            left.subtract(this._topLeftScreen);\n            var leftLength = left.length();\n            var right = this._bottomRightScreen;\n            right.subtract(this._topRightScreen);\n            var rightLength = right.length();\n            var lengthMax = Math.max(Math.max(rightLength, leftLength), Math.max(bottomLength, topLength));\n            if (lengthMax < 300) {  // was 220\n                return false;\n            }\n            else {\n                Tile.deepestLevel = (this.level > Tile.deepestLevel) ? this.level : Tile.deepestLevel;\n            }\n        }\n        return true;\n    },\n\n    isTileInFrustum: function (frustum) {\n        if (this.level < 2 && (!this.dataset.get_projection() || this.dataset.get_projection() === 3)) {\n            // return true;\n        }\n        this.inViewFrustum = false;\n        var centerV4 = new Vector4d(this.sphereCenter.x, this.sphereCenter.y, this.sphereCenter.z, 1);\n        for (var i = 0; i < 6; i++) {\n            if (frustum[i].dot(centerV4) < -this.sphereRadius) {\n                return false;\n            }\n        }\n        this.inViewFrustum = true;\n        return true;\n    },\n\n    get_sphereRadius: function () {\n        return this.sphereRadius;\n    },\n\n    get_sphereCenter: function () {\n        return this.sphereCenter;\n    },\n\n    geoTo3d: function (lat, lng, useLocalCenter) {\n        if (this.dataset.get_dataSetType() === 3) {\n            var retVal = Vector3d.create(-(Math.cos(lng * Tile.RC) * Math.cos(lat * Tile.RC) * this.radius), (Math.sin(lat * Tile.RC) * this.radius), (Math.sin(lng * Tile.RC) * Math.cos(lat * Tile.RC) * this.radius));\n            return retVal;\n        } else {\n            lng -= 180;\n            var retVal = Vector3d.create((Math.cos(lng * Tile.RC) * Math.cos(lat * Tile.RC) * this.radius), (Math.sin(lat * Tile.RC) * this.radius), (Math.sin(lng * Tile.RC) * Math.cos(lat * Tile.RC) * this.radius));\n            return retVal;\n        }\n    },\n\n    onCreateVertexBuffer: function (sender, e) { },\n\n    get_dataset: function () {\n        return this.dataset;\n    },\n\n    set_dataset: function (value) {\n        this.dataset = value;\n        return value;\n    },\n\n    get_key: function () {\n        if (this._key == null) {\n            this._key = getTileKey(this.dataset, this.level, this.tileX, this.tileY, this.parent);\n        }\n        return this._key;\n    },\n\n    // URL parameters\n    //\n    //{0} ImageSetID\n    //{1} level\n    //{2} x tile id\n    //{3} y tile id\n    //{4} quadtree address (VE style)\n    //{5} quadtree address (Google maps style)\n    //{6} top left corner RA\n    //{7} top left corner Dec\n    //{8} bottom right corner RA\n    //{9} bottom right corner dec\n    //{10} bottom left corner RA\n    //{11} bottom left corner dec\n    //{12} top right corner RA\n    //{13} top right corner dec\n    //{X} - Tile X value\n    //{Y} - Tile Y value\n    //{L} - Tile Level\n    //{Q} - Quad Key ID\n    //{S} - Last Digit of Quadkey\n    get_URL: function () {\n        var rewritten_url = URLHelpers.singleton.rewrite(this.dataset.get_url(), 0);\n        var returnUrl = rewritten_url;\n        if (rewritten_url.indexOf('{1}') > -1) {\n            // Old style URL\n            if (!this.dataset.get_projection() && !ss.emptyString(this.dataset.get_quadTreeTileMap())) {\n                returnUrl = ss.format(rewritten_url, this.getServerID(), this.getTileID());\n                if (returnUrl.indexOf('virtualearth.net') > -1) {\n                    returnUrl += '&n=z';\n                }\n                return returnUrl;\n            }\n            else {\n                return ss.format(rewritten_url, this.dataset.get_imageSetID(), this.level, this.tileX, this.tileY);\n            }\n        }\n        returnUrl = ss.replaceString(returnUrl, '{X}', this.tileX.toString());\n        returnUrl = ss.replaceString(returnUrl, '{Y}', this.tileY.toString());\n        returnUrl = ss.replaceString(returnUrl, '{L}', this.level.toString());\n        var hash = 0;\n        if (returnUrl.indexOf('{S:0}') > -1) {\n            hash = 0;\n            returnUrl = ss.replaceString(returnUrl, '{S:0}', '{S}');\n        }\n        if (returnUrl.indexOf('{S:1}') > -1) {\n            hash = 1;\n            returnUrl = ss.replaceString(returnUrl, '{S:1}', '{S}');\n        }\n        if (returnUrl.indexOf('{S:2}') > -1) {\n            hash = 2;\n            returnUrl = ss.replaceString(returnUrl, '{S:2}', '{S}');\n        }\n        if (returnUrl.indexOf('{S:3}') > -1) {\n            hash = 3;\n            returnUrl = ss.replaceString(returnUrl, '{S:3}', '{S}');\n        }\n        if (returnUrl.indexOf('a{S}') > -1) {\n            returnUrl = ss.replaceString(returnUrl, 'a{S}', 'r{S}');\n        }\n        if (returnUrl.indexOf('h{S}') > -1) {\n            returnUrl = ss.replaceString(returnUrl, 'h{S}', 'r{S}');\n        }\n        if (returnUrl.indexOf('//r{S}.ortho.tiles.virtualearth.net') > -1) {\n            returnUrl = ss.replaceString(returnUrl, '//r{S}.ortho.tiles.virtualearth.net', '//ecn.t{S}.tiles.virtualearth.net');\n        }\n        var id = this.getTileID();\n        var server = '';\n        if (!id.length) {\n            server = hash.toString();\n        } else {\n            server = id.substr(id.length - 1, 1);\n        }\n        returnUrl = ss.replaceString(returnUrl, '{Q}', id);\n        returnUrl = ss.replaceString(returnUrl, '{S}', server);\n        if (returnUrl.indexOf('virtualearth.net') > -1) {\n            returnUrl += '&n=z';\n        }\n        return returnUrl;\n    },\n\n    get_demURL: function () {\n        var rewritten_url = URLHelpers.singleton.rewrite(this.dataset.get_demUrl(), 0);\n        if (!this.dataset.get_projection() && !freestandingMode) {\n            var baseUrl = URLHelpers.singleton.coreStaticUrl('wwtweb/demtile.aspx?q={0},{1},{2},M');\n            if (!ss.emptyString(rewritten_url)) {\n                baseUrl = rewritten_url;\n            }\n        }\n        if (rewritten_url.indexOf('{1}') > -1) {\n            return ss.format(rewritten_url + '&new', this.level, this.tileX, this.tileY);\n        }\n        var returnUrl = rewritten_url;\n        returnUrl = ss.replaceString(returnUrl, '{X}', this.tileX.toString());\n        returnUrl = ss.replaceString(returnUrl, '{Y}', this.tileY.toString());\n        returnUrl = ss.replaceString(returnUrl, '{L}', this.level.toString());\n        var hash = 0;\n        if (returnUrl.indexOf('{S:0}') > -1) {\n            hash = 0;\n            returnUrl = ss.replaceString(returnUrl, '{S:0}', '{S}');\n        }\n        if (returnUrl.indexOf('{S:1}') > -1) {\n            hash = 1;\n            returnUrl = ss.replaceString(returnUrl, '{S:1}', '{S}');\n        }\n        if (returnUrl.indexOf('{S:2}') > -1) {\n            hash = 2;\n            returnUrl = ss.replaceString(returnUrl, '{S:2}', '{S}');\n        }\n        if (returnUrl.indexOf('{S:3}') > -1) {\n            hash = 3;\n            returnUrl = ss.replaceString(returnUrl, '{S:3}', '{S}');\n        }\n        var id = this.getTileID();\n        var server = '';\n        if (!id.length) {\n            server = hash.toString();\n        } else {\n            server = id.substr(id.length - 1, 1);\n        }\n        returnUrl = ss.replaceString(returnUrl, '{Q}', id);\n        returnUrl = ss.replaceString(returnUrl, '{S}', server);\n        return returnUrl;\n    },\n\n    getServerID: function () {\n        var server = (this.tileX & 1) + ((this.tileY & 1) << 1);\n        return server;\n    },\n\n    getTileID: function () {\n        if (this._tileId != null) {\n            return this._tileId;\n        }\n        var netLevel = this.level;\n        var netX = this.tileX;\n        var netY = this.tileY;\n        if (this.dataset.get_projection() === 1) {\n            netLevel++;\n        }\n        var tileMap = this.dataset.get_quadTreeTileMap();\n        if (!ss.emptyString(tileMap)) {\n            var sb = new ss.StringBuilder();\n            for (var i = netLevel; i > 0; --i) {\n                var mask = 1 << (i - 1);\n                var val = 0;\n                if (!!(netX & mask)) {\n                    val = 1;\n                }\n                if (!!(netY & mask)) {\n                    val += 2;\n                }\n                sb.append(tileMap.substr(val, 1));\n            }\n            this._tileId = sb.toString();\n            return this._tileId;\n        } else {\n            this._tileId = '0';\n            return this._tileId;\n        }\n    },\n\n    get_vertexCount: function () {\n        return this._vertexCount;\n    },\n\n    set_vertexCount: function (value) {\n        this._vertexCount = value;\n        return value;\n    }\n};\n\nregisterType(\"Tile\", [Tile, Tile$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The cache of tiles and associated download queue.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { Vector3d } from \"./double3d.js\";\nimport {\n    set_tileCacheAddTileToQueue,\n    set_tileCacheGetCachedTile,\n    set_tileCacheGetTile,\n    set_tileCacheRemoveFromQueue,\n} from \"./render_globals.js\";\nimport { getTileKey } from \"./util.js\";\nimport { Tile } from \"./tile.js\";\nimport { Imageset, ProjectionType } from \"./imageset.js\";\n\n\n// wwtlib.TileCache\n\nexport function TileCache() { }\n\nTileCache._queue = {};\nTileCache._tiles = {};\nTileCache.openThreads = 8;\nTileCache.readyToRenderCount = 0;\nTileCache.maxTileCacheSize = 800;\nTileCache.maxReadyToRenderSize = 200;\nTileCache._maxTotalToPurge = 0;\n\nTileCache.get_queueCount = function () {\n    return ss.keyCount(TileCache._queue);\n};\n\n// This name is no longer used internally, but preserve it\n// for API compatibility.\nTileCache.getTile = function (level, x, y, dataset, parent) {\n    var retTile = null;\n    var tileKey = getTileKey(dataset, level, x, y, parent);\n    if (!ss.keyExists(TileCache._tiles, tileKey)) {\n        retTile = Imageset.getNewTile(dataset, level, x, y, parent);\n        if (retTile != null) {\n            TileCache._tiles[tileKey] = retTile;\n        }\n    }\n    else {\n        retTile = TileCache._tiles[tileKey];\n    }\n    var p = 0;\n    return retTile;\n};\n\nset_tileCacheGetTile(TileCache.getTile);\n\n// This name is no longer used internally, but preserve it\n// for API compatibility.\nTileCache.getCachedTile = function (level, x, y, dataset, parent) {\n    if (level < dataset.get_baseLevel()) {\n        return null;\n    }\n    var retTile = null;\n    var tileKey = getTileKey(dataset, level, x, y, parent);\n    try {\n        if (!ss.keyExists(TileCache._tiles, tileKey)) {\n            return null;\n        } else {\n            retTile = TileCache._tiles[tileKey];\n        }\n    }\n    catch ($e1) { }\n    return retTile;\n};\n\nset_tileCacheGetCachedTile(TileCache.getCachedTile);\n\nTileCache.getReadyToRenderTileCount = function () {\n    var notReadyCullList = [];\n    var readyCullList = [];\n    try {\n        try {\n            var $enum1 = ss.enumerate(ss.keys(TileCache._tiles));\n            while ($enum1.moveNext()) {\n                var key = $enum1.current;\n                var tile = TileCache._tiles[key];\n                if (tile.renderedGeneration < (Tile.currentRenderGeneration - 10) && !(tile.requestPending || tile.downloading)) {\n                    if (tile.readyToRender) {\n                        readyCullList.push(tile);\n                    }\n                    else {\n                        notReadyCullList.push(tile);\n                    }\n                }\n            }\n        }\n        catch ($e2) {\n        }\n        return readyCullList.length;\n    }\n    catch ($e3) {\n        return -1;\n    }\n};\n\nTileCache.processQueue = function (renderContext) {\n    while (ss.keyCount(TileCache._queue) > 0 && TileCache.openThreads > 0) {\n        var minDistance = 100000;\n        var overlayTile = false;\n        var maxKey = null;\n        var level = 1000;\n        var $enum1 = ss.enumerate(ss.keys(TileCache._queue));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var t = TileCache._queue[key];\n            if (!t.requestPending && t.inViewFrustum) {\n                var vectTemp = Vector3d.makeCopy(t.get_sphereCenter());\n                vectTemp._transformByMatrics(renderContext.get_world());\n                if (renderContext.space) {\n                    vectTemp.subtract(Vector3d.create(0, 0, -1));\n                }\n                else {\n                    vectTemp.subtract(renderContext.cameraPosition);\n                }\n                var distTemp = Math.max(0, vectTemp.length() - t.get_sphereRadius());\n                var thisIsOverlay = (t.get_dataset().get_projection() === ProjectionType.tangent) || (t.get_dataset().get_projection() === ProjectionType.skyImage);\n                if (distTemp < minDistance && (!overlayTile || thisIsOverlay)) {\n                    minDistance = distTemp;\n                    maxKey = t.get_key();\n                    level = t.level;\n                    overlayTile = thisIsOverlay;\n                }\n            }\n        }\n        if (maxKey != null) {\n            var workTile = TileCache._queue[maxKey];\n            workTile.requestPending = true;\n            TileCache.openThreads--;\n            if (TileCache.openThreads < 0) {\n                TileCache.openThreads = 0;\n            }\n            workTile.requestImage();\n            if (workTile.get_dataset().get_elevationModel()) {\n                workTile.requestDem();\n            }\n        } else {\n            return;\n        }\n    }\n};\n\n// This name is no longer used internally, but preserve it\n// for API compatibility.\nTileCache.addTileToQueue = function (tile) {\n    var hitValue;\n    hitValue = 256;\n    if (!tile.downloading && !tile.readyToRender) {\n        if (ss.keyExists(TileCache._queue, tile.get_key())) {\n            TileCache._queue[tile.get_key()].requestHits += hitValue;\n        } else {\n            tile.requestHits = hitValue;\n            TileCache._queue[tile.get_key()] = tile;\n        }\n    }\n    return true;\n};\n\nset_tileCacheAddTileToQueue(TileCache.addTileToQueue);\n\n// This name is no longer used internally, but preserve it\n// for API compatibility.\nTileCache.removeFromQueue = function (key, complete) {\n    if (complete) {\n        var workTile = TileCache._queue[key];\n        if (workTile != null) {\n            workTile.requestPending = false;\n            delete TileCache._queue[workTile.get_key()];\n        }\n        TileCache.openThreads++;\n    }\n    delete TileCache._queue[key];\n};\n\nset_tileCacheRemoveFromQueue(TileCache.removeFromQueue);\n\nTileCache.clearCache = function () {\n    ss.clearKeys(TileCache._tiles);\n};\n\nTileCache.purgeQueue = function () {\n    ss.clearKeys(TileCache._queue);\n};\n\nTileCache.purgeLRU = function () {\n    if (ss.keyCount(TileCache._tiles) < TileCache.maxReadyToRenderSize) {\n        return;\n    }\n    var notReadyCullList = [];\n    var readyCullList = [];\n    try {\n        try {\n            var $enum1 = ss.enumerate(ss.keys(TileCache._tiles));\n            while ($enum1.moveNext()) {\n                var key = $enum1.current;\n                var tile = TileCache._tiles[key];\n                if (tile.renderedGeneration < (Tile.currentRenderGeneration - 10) && !(tile.requestPending || tile.downloading)) {\n                    if (tile.readyToRender) {\n                        readyCullList.push(tile);\n                    }\n                    else {\n                        notReadyCullList.push(tile);\n                    }\n                }\n            }\n        }\n        catch ($e2) {\n        }\n        TileCache.readyToRenderCount = readyCullList.length;\n        if (readyCullList.length > TileCache.maxReadyToRenderSize) {\n            readyCullList.sort(function (t1, t2) {\n                return (t2.accessCount < t1.accessCount) ? 1 : ((t2.accessCount === t1.accessCount) ? 0 : -1);\n            });\n            var totalToPurge = readyCullList.length - TileCache.maxReadyToRenderSize;\n            var $enum3 = ss.enumerate(readyCullList);\n            while ($enum3.moveNext()) {\n                var tile = $enum3.current;\n                if (totalToPurge < 1) {\n                    break;\n                }\n                tile.cleanUp(false);\n                totalToPurge--;\n            }\n        }\n        if (ss.keyCount(TileCache._tiles) < TileCache.maxTileCacheSize) {\n            return;\n        }\n        if (notReadyCullList.length > TileCache.maxTileCacheSize) {\n            notReadyCullList.sort(function (t1, t2) {\n                return (t2.accessCount < t1.accessCount) ? 1 : ((t2.accessCount === t1.accessCount) ? 0 : -1);\n            });\n            var totalToPurge = notReadyCullList.length - TileCache.maxTileCacheSize;\n            if (totalToPurge > 20) {\n                totalToPurge = 20;\n            }\n            var $enum4 = ss.enumerate(notReadyCullList);\n            while ($enum4.moveNext()) {\n                var tile = $enum4.current;\n                if (totalToPurge < 1) {\n                    break;\n                }\n                tile.cleanUp(true);\n                delete TileCache._tiles[tile.get_key()];\n                totalToPurge--;\n            }\n        }\n    }\n    catch ($e5) { }\n    finally { }\n    return;\n};\n\n// Age things in queue. If they are not visible they will go away in time\nTileCache.decimateQueue = function () {\n    var list = [];\n    var $enum1 = ss.enumerate(ss.keys(TileCache._queue));\n    while ($enum1.moveNext()) {\n        var key = $enum1.current;\n        var t = TileCache._queue[key];\n        if (!t.requestPending) {\n            t.requestHits = t.requestHits / 2;\n            try {\n                if (t.requestHits < 2) {\n                    list.push(t);\n                }\n                else if (!t.inViewFrustum) {\n                    list.push(t);\n                }\n            }\n            catch ($e2) {\n            }\n        }\n    }\n    var $enum3 = ss.enumerate(list);\n    while ($enum3.moveNext()) {\n        var t = $enum3.current;\n        delete TileCache._queue[t.get_key()];\n    }\n};\n\nvar TileCache$ = {};\n\nregisterType(\"TileCache\", [TileCache, TileCache$, null]);\n\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A tile in a pyramid that uses a TOAST projection.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { tileCacheGetTile, tilePrepDevice, tileUvMultiple } from \"./render_globals.js\";\nimport { Vector2d, Vector3d, PositionTexture, ConvexHull } from \"./double3d.js\";\nimport { WEBGL } from \"./graphics/webgl_constants.js\";\nimport { Coordinates } from \"./coordinates.js\";\nimport { RenderTriangle } from \"./render_triangle.js\";\nimport { Tile } from \"./tile.js\";\nimport { Triangle } from \"./triangle.js\";\nimport { DistanceCalc } from \"./util.js\";\n\n\n// wwtlib.ToastTile\n\nexport function ToastTile() {\n    this._topDown$1 = true;\n    this.backslash = false;\n    this._vertexList$1 = null;\n    this._childTriangleList$1 = null;\n    this._subDivisionLevel$1 = 4;\n    this._subDivided$1 = false;\n    Tile.call(this);\n}\n\nToastTile.slashIndexBuffer = new Array(64);\nToastTile.backSlashIndexBuffer = new Array(64);\nToastTile.rootIndexBuffer = new Array(4);\n\nToastTile._cloneArray$1 = function (indexArray) {\n    var count = indexArray.length;\n    var ui16array = new Uint16Array(count);\n    var indexArrayNew = ui16array;\n    for (var i = 0; i < count; i++) {\n        indexArrayNew[i] = indexArray[i];\n    }\n    return indexArrayNew;\n};\n\nToastTile.create = function (level, xc, yc, dataset, parent) {\n    var temp = new ToastTile();\n    temp.parent = parent;\n    temp.level = level;\n    temp.tileX = xc;\n    temp.tileY = yc;\n    temp.dataset = dataset;\n    temp._topDown$1 = !dataset.get_bottomsUp();\n    if (temp.tileX !== xc) {\n        alert('bad');\n    }\n    if (!!dataset.get_meanRadius()) {\n        temp.set__demScaleFactor(dataset.get_meanRadius());\n    }\n    else {\n        if (!dataset.get_dataSetType()) {\n            temp.set__demScaleFactor(6371000);\n        } else {\n            temp.set__demScaleFactor(3396010);\n        }\n    }\n    temp.computeBoundingSphere();\n    return temp;\n};\n\nvar ToastTile$ = {\n    computeBoundingSphere: function () {\n        this._initializeGrids$1();\n        this.topLeft = this.bounds[0 + 3 * 0].position.copy();\n        this.bottomRight = this.bounds[2 + 3 * 2].position.copy();\n        this.topRight = this.bounds[2 + 3 * 0].position.copy();\n        this.bottomLeft = this.bounds[0 + 3 * 2].position.copy();\n        this.calcSphere();\n    },\n\n    getIndexBuffer: function (index, accomidation) {\n        if (!this.level) {\n            return ToastTile.rootIndexBuffer[index];\n        }\n        if (this.backslash) {\n            return ToastTile.backSlashIndexBuffer[index * 16 + accomidation];\n        } else {\n            return ToastTile.slashIndexBuffer[index * 16 + accomidation];\n        }\n    },\n    _processIndexBuffer$1: function (indexArray, part) {\n        if (!this.level) {\n            ToastTile.rootIndexBuffer[part] = tilePrepDevice.createBuffer();\n            tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, ToastTile.rootIndexBuffer[part]);\n            tilePrepDevice.bufferData(WEBGL.ELEMENT_ARRAY_BUFFER, indexArray, WEBGL.STATIC_DRAW);\n            return;\n        }\n        for (var a = 0; a < 16; a++) {\n            var partArray = ToastTile._cloneArray$1(indexArray);\n            this._processAccomindations$1(partArray, a);\n            if (this.backslash) {\n                ToastTile.backSlashIndexBuffer[part * 16 + a] = tilePrepDevice.createBuffer();\n                tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, ToastTile.backSlashIndexBuffer[part * 16 + a]);\n                tilePrepDevice.bufferData(WEBGL.ELEMENT_ARRAY_BUFFER, partArray, WEBGL.STATIC_DRAW);\n            }\n            else {\n                ToastTile.slashIndexBuffer[part * 16 + a] = tilePrepDevice.createBuffer();\n                tilePrepDevice.bindBuffer(WEBGL.ELEMENT_ARRAY_BUFFER, ToastTile.slashIndexBuffer[part * 16 + a]);\n                tilePrepDevice.bufferData(WEBGL.ELEMENT_ARRAY_BUFFER, partArray, WEBGL.STATIC_DRAW);\n            }\n        }\n    },\n    _processAccomindations$1: function (indexArray, a) {\n        var map = {};\n        var gridMap = {};\n        var $enum1 = ss.enumerate(indexArray);\n        while ($enum1.moveNext()) {\n            var index = $enum1.current;\n            var vert = this._vertexList$1[index];\n            var arrayX = ss.truncate((vert.tu * 16 + 0.5));\n            var arrayY = ss.truncate((vert.tv * 16 + 0.5));\n            var ii = (arrayY << 8) + arrayX;\n            if (!ss.keyExists(gridMap, ii)) {\n                gridMap[ii] = index;\n            }\n        }\n        var sections = 16;\n        if ((a & 1) === 1) {\n            for (var x = 1; x < sections; x += 2) {\n                var y = sections;\n                var key = (y << 8) + x;\n                var val = (y << 8) + x + 1;\n                if (ss.keyExists(gridMap, key)) {\n                    map[gridMap[key]] = gridMap[val];\n                }\n            }\n        }\n        if ((a & 2) === 2) {\n            for (var y = 1; y < sections; y += 2) {\n                var x = sections;\n                var key = (y << 8) + x;\n                var val = ((y + 1) << 8) + x;\n                if (ss.keyExists(gridMap, key)) {\n                    map[gridMap[key]] = gridMap[val];\n                }\n            }\n        }\n        if ((a & 4) === 4) {\n            for (var x = 1; x < sections; x += 2) {\n                var y = 0;\n                var key = (y << 8) + x;\n                var val = (y << 8) + x + 1;\n                if (ss.keyExists(gridMap, key)) {\n                    map[gridMap[key]] = gridMap[val];\n                }\n            }\n        }\n        if ((a & 8) === 8) {\n            for (var y = 1; y < sections; y += 2) {\n                var x = 0;\n                var key = (y << 8) + x;\n                var val = ((y + 1) << 8) + x;\n                if (ss.keyExists(gridMap, key)) {\n                    map[gridMap[key]] = gridMap[val];\n                }\n            }\n        }\n        if (!ss.keyCount(map)) {\n            //nothing to process\n            return;\n        }\n        for (var i = 0; i < indexArray.length; i++) {\n            if (ss.keyExists(map, indexArray[i])) {\n                indexArray[i] = map[indexArray[i]];\n            }\n        }\n    },\n\n    calculateFullSphere: function (list) {\n        var result = ConvexHull.findEnclosingSphere(list);\n        this.sphereCenter = result.center;\n        this.sphereRadius = result.radius;\n    },\n\n    isPointInTile: function (lat, lng) {\n        if (!this.level) {\n            return true;\n        }\n        if (this.level === 1) {\n            if ((lng >= 0 && lng <= 90) && (!this.tileX && this.tileY === 1)) {\n                return true;\n            }\n            if ((lng > 90 && lng <= 180) && (this.tileX === 1 && this.tileY === 1)) {\n                return true;\n            }\n            if ((lng < 0 && lng >= -90) && (!this.tileX && !this.tileY)) {\n                return true;\n            }\n            if ((lng < -90 && lng >= -180) && (this.tileX === 1 && !this.tileY)) {\n                return true;\n            }\n            return false;\n        }\n        if (!this.demReady || this.demData == null) {\n            return false;\n        }\n        var testPoint = Coordinates.geoTo3dDouble(-lat, lng);\n        var top = this._isLeftOfHalfSpace$1(this.topLeft.copy(), this.topRight.copy(), testPoint);\n        var right = this._isLeftOfHalfSpace$1(this.topRight.copy(), this.bottomRight.copy(), testPoint);\n        var bottom = this._isLeftOfHalfSpace$1(this.bottomRight.copy(), this.bottomLeft.copy(), testPoint);\n        var left = this._isLeftOfHalfSpace$1(this.bottomLeft.copy(), this.topLeft.copy(), testPoint);\n        if (top && right && bottom && left) {\n            return true;\n        }\n        return false;\n    },\n    _isLeftOfHalfSpace$1: function (pntA, pntB, pntTest) {\n        pntA.normalize();\n        pntB.normalize();\n        var cross = Vector3d.cross(pntA, pntB);\n        var dot = Vector3d.dot(cross, pntTest);\n        return dot < 0;\n    },\n\n    getSurfacePointAltitude: function (lat, lng, meters) {\n        if (this.level < Tile.lastDeepestLevel) {\n            for (var ii = 0; ii < 4; ii++) {\n                var child = this.children[ii];\n                if (child != null) {\n                    if (child.isPointInTile(lat, lng)) {\n                        var retVal = child.getSurfacePointAltitude(lat, lng, meters);\n                        if (!!retVal) {\n                            return retVal;\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        Tile.tileTargetLevel = this.level;\n        Tile.tileTargetX = this.tileX;\n        Tile.tileTargetY = this.tileY;\n        var testPoint = Coordinates.geoTo3dDouble(-lat, lng);\n        testPoint = Vector3d.subtractVectors(new Vector3d(), testPoint);\n        var uv = DistanceCalc.getUVFromInnerPoint(this.topLeft.copy(), this.topRight.copy(), this.bottomLeft.copy(), this.bottomRight.copy(), testPoint.copy());\n\n        // Get 4 samples and interpolate\n        var uud = Math.max(0, Math.min(16, (uv.x * 16)));\n        var vvd = Math.max(0, Math.min(16, (uv.y * 16)));\n        var uu = Math.max(0, Math.min(15, ss.truncate((uv.x * 16))));\n        var vv = Math.max(0, Math.min(15, ss.truncate((uv.y * 16))));\n        var ha = uud - uu;\n        var va = vvd - vv;\n\n        if (this.demArray != null) {\n            // 4 nearest neighbors\n            var ul = this.demArray[uu + 17 * vv];\n            var ur = this.demArray[(uu + 1) + 17 * vv];\n            var ll = this.demArray[uu + 17 * (vv + 1)];\n            var lr = this.demArray[(uu + 1) + 17 * (vv + 1)];\n            var top = ul * (1 - ha) + ha * ur;\n            var bottom = ll * (1 - ha) + ha * lr;\n            var val = top * (1 - va) + va * bottom;\n            return val / this.get__demScaleFactor();\n        }\n        return this.demAverage / this.get__demScaleFactor();\n    },\n    _initializeGrids$1: function () {\n        this._vertexList$1 = [];\n        this._childTriangleList$1 = new Array(4);\n        this._childTriangleList$1[0] = [];\n        this._childTriangleList$1[1] = [];\n        this._childTriangleList$1[2] = [];\n        this._childTriangleList$1[3] = [];\n        this.bounds = new Array(9);\n        if (this.level > 0) {\n            if (this.parent == null) {\n                this.parent = tileCacheGetTile(this.level - 1, this.tileX / 2, this.tileY / 2, this.dataset, null);\n            }\n            var parent = this.parent;\n            var xIndex = this.tileX % 2;\n            var yIndex = this.tileY % 2;\n            if (this.level > 1) {\n                this.backslash = parent.backslash;\n            }\n            else {\n                this.backslash = (xIndex === 1 ^ yIndex === 1) === 1;\n            }\n            this.bounds[0 + 3 * 0] = parent.bounds[xIndex + 3 * yIndex].copy();\n            this.bounds[1 + 3 * 0] = this._midpoint$1(parent.bounds[xIndex + 3 * yIndex], parent.bounds[xIndex + 1 + 3 * yIndex]);\n            this.bounds[2 + 3 * 0] = parent.bounds[xIndex + 1 + 3 * yIndex].copy();\n            this.bounds[0 + 3 * 1] = this._midpoint$1(parent.bounds[xIndex + 3 * yIndex], parent.bounds[xIndex + 3 * (yIndex + 1)]);\n            if (this.backslash) {\n                this.bounds[1 + 3 * 1] = this._midpoint$1(parent.bounds[xIndex + 3 * yIndex], parent.bounds[xIndex + 1 + 3 * (yIndex + 1)]);\n            }\n            else {\n                this.bounds[1 + 3 * 1] = this._midpoint$1(parent.bounds[xIndex + 1 + 3 * yIndex], parent.bounds[xIndex + 3 * (yIndex + 1)]);\n            }\n            this.bounds[2 + 3 * 1] = this._midpoint$1(parent.bounds[xIndex + 1 + 3 * yIndex], parent.bounds[xIndex + 1 + 3 * (yIndex + 1)]);\n            this.bounds[0 + 3 * 2] = parent.bounds[xIndex + 3 * (yIndex + 1)].copy();\n            this.bounds[1 + 3 * 2] = this._midpoint$1(parent.bounds[xIndex + 3 * (yIndex + 1)], parent.bounds[xIndex + 1 + 3 * (yIndex + 1)]);\n            this.bounds[2 + 3 * 2] = parent.bounds[xIndex + 1 + 3 * (yIndex + 1)].copy();\n            this.bounds[0 + 3 * 0].tu = 0 * tileUvMultiple;\n            this.bounds[0 + 3 * 0].tv = 0 * tileUvMultiple;\n            this.bounds[1 + 3 * 0].tu = 0.5 * tileUvMultiple;\n            this.bounds[1 + 3 * 0].tv = 0 * tileUvMultiple;\n            this.bounds[2 + 3 * 0].tu = 1 * tileUvMultiple;\n            this.bounds[2 + 3 * 0].tv = 0 * tileUvMultiple;\n            this.bounds[0 + 3 * 1].tu = 0 * tileUvMultiple;\n            this.bounds[0 + 3 * 1].tv = 0.5 * tileUvMultiple;\n            this.bounds[1 + 3 * 1].tu = 0.5 * tileUvMultiple;\n            this.bounds[1 + 3 * 1].tv = 0.5 * tileUvMultiple;\n            this.bounds[2 + 3 * 1].tu = 1 * tileUvMultiple;\n            this.bounds[2 + 3 * 1].tv = 0.5 * tileUvMultiple;\n            this.bounds[0 + 3 * 2].tu = 0 * tileUvMultiple;\n            this.bounds[0 + 3 * 2].tv = 1 * tileUvMultiple;\n            this.bounds[1 + 3 * 2].tu = 0.5 * tileUvMultiple;\n            this.bounds[1 + 3 * 2].tv = 1 * tileUvMultiple;\n            this.bounds[2 + 3 * 2].tu = 1 * tileUvMultiple;\n            this.bounds[2 + 3 * 2].tv = 1 * tileUvMultiple;\n            this._vertexList$1.push(this.bounds[0 + 3 * 0]);\n            this._vertexList$1.push(this.bounds[1 + 3 * 0]);\n            this._vertexList$1.push(this.bounds[2 + 3 * 0]);\n            this._vertexList$1.push(this.bounds[0 + 3 * 1]);\n            this._vertexList$1.push(this.bounds[1 + 3 * 1]);\n            this._vertexList$1.push(this.bounds[2 + 3 * 1]);\n            this._vertexList$1.push(this.bounds[0 + 3 * 2]);\n            this._vertexList$1.push(this.bounds[1 + 3 * 2]);\n            this._vertexList$1.push(this.bounds[2 + 3 * 2]);\n            if (this.backslash) {\n                this._childTriangleList$1[0].push(Triangle.create(4, 1, 0));\n                this._childTriangleList$1[0].push(Triangle.create(3, 4, 0));\n                this._childTriangleList$1[1].push(Triangle.create(5, 2, 1));\n                this._childTriangleList$1[1].push(Triangle.create(4, 5, 1));\n                this._childTriangleList$1[2].push(Triangle.create(7, 4, 3));\n                this._childTriangleList$1[2].push(Triangle.create(6, 7, 3));\n                this._childTriangleList$1[3].push(Triangle.create(8, 5, 4));\n                this._childTriangleList$1[3].push(Triangle.create(7, 8, 4));\n            }\n            else {\n                this._childTriangleList$1[0].push(Triangle.create(3, 1, 0));\n                this._childTriangleList$1[0].push(Triangle.create(4, 1, 3));\n                this._childTriangleList$1[1].push(Triangle.create(4, 2, 1));\n                this._childTriangleList$1[1].push(Triangle.create(5, 2, 4));\n                this._childTriangleList$1[2].push(Triangle.create(6, 4, 3));\n                this._childTriangleList$1[2].push(Triangle.create(7, 4, 6));\n                this._childTriangleList$1[3].push(Triangle.create(7, 5, 4));\n                this._childTriangleList$1[3].push(Triangle.create(8, 5, 7));\n            }\n        } else {\n            this.bounds[0 + 3 * 0] = PositionTexture.create(0, -1, 0, 0, 0);\n            this.bounds[1 + 3 * 0] = PositionTexture.create(0, 0, 1, 0.5, 0);\n            this.bounds[2 + 3 * 0] = PositionTexture.create(0, -1, 0, 1, 0);\n            this.bounds[0 + 3 * 1] = PositionTexture.create(-1, 0, 0, 0, 0.5);\n            this.bounds[1 + 3 * 1] = PositionTexture.create(0, 1, 0, 0.5, 0.5);\n            this.bounds[2 + 3 * 1] = PositionTexture.create(1, 0, 0, 1, 0.5);\n            this.bounds[0 + 3 * 2] = PositionTexture.create(0, -1, 0, 0, 1);\n            this.bounds[1 + 3 * 2] = PositionTexture.create(0, 0, -1, 0.5, 1);\n            this.bounds[2 + 3 * 2] = PositionTexture.create(0, -1, 0, 1, 1);\n            this._vertexList$1.push(this.bounds[0 + 3 * 0]);\n            this._vertexList$1.push(this.bounds[1 + 3 * 0]);\n            this._vertexList$1.push(this.bounds[2 + 3 * 0]);\n            this._vertexList$1.push(this.bounds[0 + 3 * 1]);\n            this._vertexList$1.push(this.bounds[1 + 3 * 1]);\n            this._vertexList$1.push(this.bounds[2 + 3 * 1]);\n            this._vertexList$1.push(this.bounds[0 + 3 * 2]);\n            this._vertexList$1.push(this.bounds[1 + 3 * 2]);\n            this._vertexList$1.push(this.bounds[2 + 3 * 2]);\n            this._childTriangleList$1[0].push(Triangle.create(3, 1, 0));\n            this._childTriangleList$1[0].push(Triangle.create(4, 1, 3));\n            this._childTriangleList$1[1].push(Triangle.create(5, 2, 1));\n            this._childTriangleList$1[1].push(Triangle.create(4, 5, 1));\n            this._childTriangleList$1[2].push(Triangle.create(7, 4, 3));\n            this._childTriangleList$1[2].push(Triangle.create(6, 7, 3));\n            this._childTriangleList$1[3].push(Triangle.create(7, 5, 4));\n            this._childTriangleList$1[3].push(Triangle.create(8, 5, 7));\n        }\n    },\n    _midpoint$1: function (positionNormalTextured, positionNormalTextured_2) {\n        var a1 = Vector3d.lerp(positionNormalTextured.position, positionNormalTextured_2.position, 0.5);\n        var a1uv = Vector2d.lerp(Vector2d.create(positionNormalTextured.tu, positionNormalTextured.tv), Vector2d.create(positionNormalTextured_2.tu, positionNormalTextured_2.tv), 0.5);\n        a1.normalize();\n        return PositionTexture.createPos(a1, a1uv.x, a1uv.y);\n    },\n\n    createGeometry: function (renderContext) {\n        if (this.geometryCreated) {\n            return true;\n        }\n        this.geometryCreated = true;\n        Tile.prototype.createGeometry.call(this, renderContext);\n        if (!this._subDivided$1) {\n            if (this._vertexList$1 == null) {\n                this._initializeGrids$1();\n            }\n            if (tileUvMultiple == 256) {\n                if (!this.dataset.get_dataSetType() || this.dataset.get_dataSetType() === 1) {\n                    this._subDivisionLevel$1 = Math.min(5, Math.max(0, 5 - this.level));\n                }\n                else {\n                    this._subDivisionLevel$1 = Math.min(5, Math.max(0, 5 - this.level));\n                }\n            }\n            else {\n                if (this.demTile && this.level > 1) {\n                    this.demArray = new Array(17 * 17);\n                    this.demSize = 17 * 17;\n                    if (this.backslash) {\n                        if (ToastTile._backslashYIndex$1 == null) {\n                            this._tempBackslashYIndex$1 = new Array(this.demSize);\n                            this._tempBackslashXIndex$1 = new Array(this.demSize);\n                        }\n                    }\n                    else {\n                        if (ToastTile._slashYIndex$1 == null) {\n                            this._tempSlashYIndex$1 = new Array(this.demSize);\n                            this._tempSlashXIndex$1 = new Array(this.demSize);\n                        }\n                    }\n                }\n            }\n            for (var i = 0; i < 4; i++) {\n                var count = this._subDivisionLevel$1;\n                while (count-- > 1) {\n                    var newList = [];\n                    var $enum1 = ss.enumerate(this._childTriangleList$1[i]);\n                    while ($enum1.moveNext()) {\n                        var tri = $enum1.current;\n                        tri.subDivide(newList, this._vertexList$1);\n                    }\n                    this._childTriangleList$1[i] = newList;\n                }\n            }\n            if (renderContext.gl == null) {\n                for (var i = 0; i < 4; i++) {\n                    this._renderTriangleLists[i] = [];\n                    var $enum2 = ss.enumerate(this._childTriangleList$1[i]);\n                    while ($enum2.moveNext()) {\n                        var tri = $enum2.current;\n                        var p1 = this._vertexList$1[tri.c];\n                        var p2 = this._vertexList$1[tri.b];\n                        var p3 = this._vertexList$1[tri.a];\n                        this._renderTriangleLists[i].push(RenderTriangle.create(p1, p2, p3, this.texture, this.level));\n                    }\n                }\n            }\n            else {\n                this._vertexBuffer = tilePrepDevice.createBuffer();\n                tilePrepDevice.bindBuffer(WEBGL.ARRAY_BUFFER, this._vertexBuffer);\n                var f32array = new Float32Array(this._vertexList$1.length * 5);\n                var buffer = f32array;\n                var index = 0;\n                var $enum3 = ss.enumerate(this._vertexList$1);\n                while ($enum3.moveNext()) {\n                    var pt = $enum3.current;\n                    if (this.demTile) {\n                        index = this.addVertex(buffer, index, this._getMappedVertex(pt));\n                        this.demIndex++;\n                    }\n                    else {\n                        index = this.addVertex(buffer, index, pt);\n                    }\n                }\n                if (this.demTile) {\n                    if (this.backslash) {\n                        if (this._tempBackslashXIndex$1 != null) {\n                            ToastTile._backslashXIndex$1 = this._tempBackslashXIndex$1;\n                            ToastTile._backslashYIndex$1 = this._tempBackslashYIndex$1;\n                            this._tempBackslashXIndex$1 = null;\n                            this._tempBackslashYIndex$1 = null;\n                        }\n                    }\n                    else {\n                        if (this._tempSlashYIndex$1 != null) {\n                            ToastTile._slashXIndex$1 = this._tempSlashXIndex$1;\n                            ToastTile._slashYIndex$1 = this._tempSlashYIndex$1;\n                            this._tempSlashYIndex$1 = null;\n                            this._tempSlashXIndex$1 = null;\n                        }\n                    }\n                }\n                tilePrepDevice.bufferData(WEBGL.ARRAY_BUFFER, f32array, WEBGL.STATIC_DRAW);\n                for (var i = 0; i < 4; i++) {\n                    this.triangleCount = this._childTriangleList$1[i].length;\n                    if (this.getIndexBuffer(i, 0) == null) {\n                        var ui16array = new Uint16Array(this.triangleCount * 3);\n                        var indexArray = ui16array;\n                        index = 0;\n                        var $enum4 = ss.enumerate(this._childTriangleList$1[i]);\n                        while ($enum4.moveNext()) {\n                            var tri = $enum4.current;\n                            indexArray[index++] = tri.c;\n                            indexArray[index++] = tri.b;\n                            indexArray[index++] = tri.a;\n                        }\n                        this._processIndexBuffer$1(indexArray, i);\n                    }\n                }\n            }\n            this._subDivided$1 = true;\n        }\n        return true;\n    },\n\n    _getMappedVertex: function (vert) {\n        var vertOut = new PositionTexture();\n        var latLng = Coordinates.cartesianToSpherical2(vert.position);\n        if (latLng.get_lng() < -180) {\n            latLng.set_lng(latLng.get_lng() + 360);\n        }\n        if (latLng.get_lng() > 180) {\n            latLng.set_lng(latLng.get_lng() - 360);\n        }\n        if (this.level > 1) {\n            var arrayX = ss.truncate((vert.tu * 16 + 0.5));\n            var arrayY = ss.truncate((vert.tv * 16 + 0.5));\n            this.demArray[arrayX + arrayY * 17] = this.demData[this.demIndex];\n            if (this.backslash) {\n                if (this._tempBackslashYIndex$1 != null) {\n                    this._tempBackslashXIndex$1[this.demIndex] = arrayX;\n                    this._tempBackslashYIndex$1[this.demIndex] = arrayY;\n                }\n            }\n            else {\n                if (this._tempSlashYIndex$1 != null) {\n                    this._tempSlashXIndex$1[this.demIndex] = arrayX;\n                    this._tempSlashYIndex$1[this.demIndex] = arrayY;\n                }\n            }\n        }\n        var pos = this.geoTo3dWithAlt(latLng.get_lat(), latLng.get_lng(), false, false);\n        vertOut.tu = vert.tu;\n        vertOut.tv = vert.tv;\n        pos.subtract(this.localCenter);\n        vertOut.position = pos;\n        return vertOut;\n    },\n\n    cleanUp: function (removeFromParent) {\n        Tile.prototype.cleanUp.call(this, removeFromParent);\n        if (this._vertexList$1 != null) {\n            this._vertexList$1 = null;\n        }\n        if (this._childTriangleList$1 != null) {\n            this._childTriangleList$1 = null;\n        }\n        this._subDivided$1 = false;\n        this.demArray = null;\n    },\n    _getDemSample$1: function (xc, yc) {\n        return this.demArray[(16 - yc) * 17 + xc];\n    },\n\n    createDemFromParent: function () {\n        var parent = ss.safeCast(this.parent, ToastTile);\n        if (parent == null) {\n            return false;\n        }\n        var offsetX = (((this.tileX % 2) === 1) ? 8 : 0);\n        var offsetY = ((!(this.tileY % 2)) ? 8 : 0);\n        this.demArray = new Array(17 * 17);\n\n        // Interpolate across\n        for (var yy1 = 0; yy1 < 17; yy1 += 2) {\n            var copy = true;\n            for (var xx1 = 0; xx1 < 17; xx1++) {\n                if (copy) {\n                    this.demArray[(16 - yy1) * 17 + xx1] = parent._getDemSample$1((xx1 / 2) + offsetX, (yy1 / 2) + offsetY);\n                }\n                else {\n                    this.demArray[(16 - yy1) * 17 + xx1] = ((parent._getDemSample$1((xx1 / 2) + offsetX, (yy1 / 2) + offsetY) + parent._getDemSample$1(((xx1 / 2) + offsetX) + 1, (yy1 / 2) + offsetY)) / 2);\n                }\n                copy = !copy;\n            }\n        }\n\n        // Interpolate down\n        for (var yy2 = 1; yy2 < 17; yy2 += 2) {\n            for (var xx2 = 0; xx2 < 17; xx2++) {\n                this.demArray[(16 - yy2) * 17 + xx2] = ((this._getDemSample$1(xx2, yy2 - 1) + this._getDemSample$1(xx2, yy2 + 1)) / 2);\n            }\n        }\n\n        // Convert the dem array back to the arranged DEM list thu slash/backslash mapping tables\n        this.demData = new Array(this.demSize);\n        for (var i = 0; i < this.demSize; i++) {\n            if (this.backslash) {\n                this.demData[i] = this.demArray[ToastTile._backslashXIndex$1[i] + ToastTile._backslashYIndex$1[i] * 17];\n            }\n            else {\n                this.demData[i] = this.demArray[ToastTile._slashXIndex$1[i] + ToastTile._slashYIndex$1[i] * 17];\n            }\n            this.demAverage += this.demData[i];\n        }\n\n        // Get Average value for new DemData table\n        this.demAverage /= this.demData.length;\n        this.demReady = true;\n        return true;\n    }\n};\n\nregisterType(\"ToastTile\", [ToastTile, ToastTile$, Tile]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Top-level information about a tour.\n\nimport { ss } from \"./ss.js\";\nimport { registerType, Enums } from \"./typesystem.js\";\nimport { freestandingMode } from \"./data_globals.js\";\nimport { IThumbnail } from \"./interfaces.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\n\n\n// wwtlib.Tour\n\nexport function Tour() {\n    this.userLevel = 0;\n    this.classification = 0;\n    this.averageRating = 0;\n    this.lengthInSecs = 0;\n    this._thumbnailUrlField = '';\n}\n\nTour._fromXml = function (child) {\n    var temp = new Tour();\n    if (child.attributes.getNamedItem('ID') != null) {\n        temp.id = child.attributes.getNamedItem('ID').nodeValue;\n    }\n    if (child.attributes.getNamedItem('TourUrl') != null) {\n        temp._tourUrl = child.attributes.getNamedItem('TourUrl').nodeValue;\n    }\n    if (child.attributes.getNamedItem('Title') != null) {\n        temp.title = child.attributes.getNamedItem('Title').nodeValue;\n    }\n    if (child.attributes.getNamedItem('Description') != null) {\n        temp.description = child.attributes.getNamedItem('Description').nodeValue;\n    }\n    if (child.attributes.getNamedItem('Classification') != null) {\n        temp.classification = Enums.parse('Classification', child.attributes.getNamedItem('Classification').nodeValue);\n    }\n    if (child.attributes.getNamedItem('AuthorEmail') != null) {\n        temp.authorEmail = child.attributes.getNamedItem('AuthorEmail').nodeValue;\n    }\n    if (child.attributes.getNamedItem('Author') != null) {\n        temp.author = child.attributes.getNamedItem('Author').nodeValue;\n    }\n    if (child.attributes.getNamedItem('AuthorURL') != null) {\n        temp.authorURL = child.attributes.getNamedItem('AuthorURL').nodeValue;\n    }\n    if (child.attributes.getNamedItem('AuthorImageUrl') != null) {\n        temp.authorImageUrl = child.attributes.getNamedItem('AuthorImageUrl').nodeValue;\n    }\n    if (child.attributes.getNamedItem('AverageRating') != null) {\n        temp.averageRating = parseFloat(child.attributes.getNamedItem('AverageRating').nodeValue);\n    }\n    if (child.attributes.getNamedItem('LengthInSecs') != null) {\n        temp.lengthInSecs = parseFloat(child.attributes.getNamedItem('LengthInSecs').nodeValue);\n    }\n    if (child.attributes.getNamedItem('OrganizationUrl') != null) {\n        temp.organizationUrl = child.attributes.getNamedItem('OrganizationUrl').nodeValue;\n    }\n    if (child.attributes.getNamedItem('OrganizationName') != null) {\n        temp.organizationName = child.attributes.getNamedItem('OrganizationName').nodeValue;\n    }\n    if (child.attributes.getNamedItem('RelatedTours') != null) {\n        temp.relatedTours = child.attributes.getNamedItem('RelatedTours').nodeValue;\n    }\n    if (child.attributes.getNamedItem('Keywords') != null) {\n        temp.keywords = child.attributes.getNamedItem('Keywords').nodeValue;\n    }\n    if (child.attributes.getNamedItem('ThumbnailUrl') != null) {\n        temp.set_thumbnailUrl(child.attributes.getNamedItem('ThumbnailUrl').nodeValue);\n    }\n    return temp;\n};\n\nvar Tour$ = {\n    get_name: function () {\n        return this.title;\n    },\n\n    get_thumbnail: function () {\n        return this._thumbnail;\n    },\n\n    set_thumbnail: function (value) {\n        this._thumbnail = value;\n        return value;\n    },\n\n    get_thumbnailUrl: function () {\n        if (!ss.emptyString(this._thumbnailUrlField)) {\n            return this._thumbnailUrlField;\n        } else if (freestandingMode) {\n            return URLHelpers.singleton.engineAssetUrl('thumb_star.jpg');\n        }\n        return ss.format(URLHelpers.singleton.coreStaticUrl('wwtweb/GetTourThumbnail.aspx?GUID={0}'), this.id);\n    },\n\n    set_thumbnailUrl: function (value) {\n        this._thumbnailUrlField = value;\n        return value;\n    },\n\n    get_tourUrl: function () {\n        if (ss.emptyString(this._tourUrl) && !freestandingMode) {\n            return ss.format(URLHelpers.singleton.coreStaticUrl('wwtweb/GetTour.aspx?GUID={0}'), this.id);\n        } else {\n            return this._tourUrl;\n        }\n    },\n\n    set_tourUrl: function (value) {\n        this._tourUrl = value;\n        return value;\n    },\n\n    get_bounds: function () {\n        return this._bounds;\n    },\n\n    set_bounds: function (value) {\n        this._bounds = value;\n        return value;\n    },\n\n    get_isImage: function () {\n        return false;\n    },\n\n    get_isTour: function () {\n        return true;\n    },\n\n    get_isFolder: function () {\n        return false;\n    },\n\n    get_isCloudCommunityItem: function () {\n        return false;\n    },\n\n    get_readOnly: function () {\n        return false;\n    },\n\n    get_children: function () {\n        return [];\n    }\n};\n\nregisterType(\"Tour\", [Tour, Tour$, null, IThumbnail]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A simple XML-based file archive format.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { Util } from \"../baseutil.js\";\nimport { XmlTextWriter } from \"../utilities/xml_text_writer.js\";\nimport { WebFile } from \"../web_file.js\";\n\n\n// wwtlib.FileEntry\n\nexport function FileEntry(filename, size) {\n    this.size = 0;\n    this.offset = 0;\n    this.filename = filename;\n    this.size = size;\n}\n\nvar FileEntry$ = {\n    toString: function () {\n        return this.filename;\n    }\n};\n\nregisterType(\"FileEntry\", [FileEntry, FileEntry$, null]);\n\n\n// wwtlib.FileCabinet\n\nexport function FileCabinet() {\n    this.tempDirectory = '';\n    this._currentOffset = 0;\n    this._packageID = '';\n    this.url = '';\n    this.clearFileList();\n}\n\nFileCabinet.fromUrl = function (url, callMe) {\n    var temp = new FileCabinet();\n    temp.url = url;\n    temp._callMe = callMe;\n    temp._webFile = new WebFile(url);\n    temp._webFile.responseType = 'blob';\n    temp._webFile.onStateChange = ss.bind('_loadCabinet', temp);\n    temp._webFile.send();\n    return temp;\n};\n\nvar FileCabinet$ = {\n    get_packageID: function () {\n        return this._packageID;\n    },\n\n    set_packageID: function (value) {\n        this._packageID = value;\n        return value;\n    },\n\n    addFile: function (filename, data) {\n        if (data == null) {\n            return;\n        }\n        if (!ss.keyExists(this._fileDirectory, filename)) {\n            var fe = new FileEntry(filename, data.size);\n            fe.offset = this._currentOffset;\n            fe.blob = data;\n            this.fileList.push(fe);\n            this._fileDirectory[filename] = fe;\n            this._currentOffset += fe.size;\n        }\n    },\n\n    clearFileList: function () {\n        if (this.fileList == null) {\n            this.fileList = [];\n        }\n        if (this._fileDirectory == null) {\n            this._fileDirectory = {};\n        }\n        this.fileList.length = 0;\n        ss.clearKeys(this._fileDirectory);\n        this._currentOffset = 0;\n    },\n\n    packageFiles: function () {\n        var xmlWriter = new XmlTextWriter();\n        xmlWriter.formatting = 1;\n        xmlWriter._writeProcessingInstruction('xml', \"version='1.0' encoding='UTF-8'\");\n        xmlWriter._writeStartElement('FileCabinet');\n        xmlWriter._writeAttributeString('HeaderSize', '0x0BADFOOD');\n        xmlWriter._writeStartElement('Files');\n        var $enum1 = ss.enumerate(this.fileList);\n        while ($enum1.moveNext()) {\n            var entry = $enum1.current;\n            xmlWriter._writeStartElement('File');\n            xmlWriter._writeAttributeString('Name', entry.filename);\n            xmlWriter._writeAttributeString('Size', entry.size.toString());\n            xmlWriter._writeAttributeString('Offset', entry.offset.toString());\n            xmlWriter._writeEndElement();\n        }\n        xmlWriter._writeEndElement();\n        xmlWriter._writeFullEndElement();\n        xmlWriter._close();\n        var data = xmlWriter.body;\n        var blob = new Blob([data]);\n        var sizeText = ss.format('0x{0:x8}', blob.size);\n        data = ss.replaceString(data, '0x0BADFOOD', sizeText);\n        blob = new Blob([data]);\n        var blobs = [];\n        blobs.push(blob);\n        var $enum2 = ss.enumerate(this.fileList);\n\n        // add the blobs to array to append in order\n        while ($enum2.moveNext()) {\n            var entry = $enum2.current;\n            blobs.push(entry.blob);\n        }\n        var cabBlob = new Blob(blobs, { type: 'application/x-wtt' });\n        return cabBlob;\n    },\n\n    _loadCabinet: function () {\n        var $this = this;\n\n        if (this._webFile.get_state() === 2) {\n            alert(this._webFile.get_message());\n        } else if (this._webFile.get_state() === 1) {\n            this._mainBlob = this._webFile.getBlob();\n            var chunck = new FileReader();\n            chunck.onloadend = function (e) {\n                var offset = $this._getSize(chunck.result);\n                var header = new FileReader();\n                header.onloadend = function (ee) {\n                    var data = ss.safeCast(header.result, String);\n                    var xParser = new DOMParser();\n                    $this.extract(xParser.parseFromString(data, 'text/xml'), offset);\n                    $this._callMe();\n                };\n                header.readAsText($this._mainBlob.slice(0, offset));\n            };\n            chunck.readAsText(this._mainBlob.slice(0, 255));\n        }\n    },\n\n    _getSize: function (data) {\n        var start = data.indexOf('0x');\n        if (start === -1) {\n            return 0;\n        }\n        return parseInt(data.substring(start, start + 10), 16);\n    },\n\n    extract: function (doc, offset) {\n        try {\n            var cab = Util.selectSingleNode(doc, 'FileCabinet');\n            var files = Util.selectSingleNode(cab, 'Files');\n            this.fileList.length = 0;\n            var $enum1 = ss.enumerate(files.childNodes);\n            while ($enum1.moveNext()) {\n                var child = $enum1.current;\n                if (child.nodeName === 'File') {\n                    var fe = new FileEntry(child.attributes.getNamedItem('Name').nodeValue, parseInt(child.attributes.getNamedItem('Size').nodeValue));\n                    fe.offset = offset;\n                    offset += fe.size;\n                    this.fileList.push(fe);\n                }\n            }\n        }\n        catch ($e2) {\n        }\n    },\n\n    getFileBlob: function (filename) {\n        var fe = this.getFileEntry(filename);\n        if (fe != null) {\n            var ext = filename.substr(filename.lastIndexOf('.')).toLowerCase();\n            var type = null;\n            switch (ext) {\n                case '.png':\n                    type = 'image/png';\n                    break;\n                case '.jpg':\n                case '.jpeg':\n                    type = 'image/jpeg';\n                    break;\n                case '.mp3':\n                    type = 'audio/mpeg3';\n                    break;\n                case '.txt':\n                    type = 'text/plain';\n                    break;\n                case '.fit':\n                case '.fits':\n                    type = 'application/octet-stream';\n                    break;\n            }\n            return this._mainBlob.slice(fe.offset, fe.offset + fe.size, type);\n        }\n        return null;\n    },\n\n    getFileEntry: function (filename) {\n        var $enum1 = ss.enumerate(this.fileList);\n        while ($enum1.moveNext()) {\n            var entry = $enum1.current;\n            if (entry.filename === filename) {\n                return entry;\n            }\n        }\n        return null;\n    },\n\n    get_masterFile: function () {\n        if (this.fileList.length > 0) {\n            return this.fileList[0].filename;\n        } else {\n            return null;\n        }\n    },\n\n    clearTempFiles: function () {\n        var $enum1 = ss.enumerate(this.fileList);\n        while ($enum1.moveNext()) {\n            var entry = $enum1.current;\n        }\n    }\n};\n\nregisterType(\"FileCabinet\", [FileCabinet, FileCabinet$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A graphical overlay shown inside a tour.\n\nimport { ss } from \"../ss.js\";\nimport { registerType, registerEnum, Enums } from \"../typesystem.js\";\nimport { Vector2d, Vector3d, Matrix2d, Matrix3d, PositionColoredTextured } from \"../double3d.js\";\nimport { globalRenderContext, useGl } from \"../render_globals.js\";\nimport { Texture } from \"../graphics/texture.js\";\nimport { Sprite2d } from \"../graphics/sprite2d.js\";\nimport { Util } from \"../baseutil.js\";\nimport { Color, Colors } from \"../color.js\";\nimport { Coordinates } from \"../coordinates.js\";\nimport { SpaceTimeController } from \"../space_time_controller.js\";\nimport { UiTools } from \"../ui_tools.js\";\nimport { Rectangle } from \"../util.js\";\nimport { TextObject } from \"./text_object.js\";\n\n\n// wwtlib.OverlayAnchor\n\nexport var OverlayAnchor = {\n    sky: 0,\n    screen: 1\n};\n\nregisterType(\"OverlayAnchor\", OverlayAnchor);\nregisterEnum(\"OverlayAnchor\", OverlayAnchor);\n\n\n// wwtlib.AudioType\n\nexport var AudioType = {\n    music: 0,\n    voice: 1\n};\n\nregisterType(\"AudioType\", AudioType);\nregisterEnum(\"AudioType\", AudioType);\n\n\n// wwtlib.ShapeType\n\nexport var ShapeType = {\n    circle: 0,\n    rectagle: 1,\n    star: 2,\n    donut: 3,\n    arrow: 4,\n    line: 5,\n    openRectagle: 6\n};\n\nregisterType(\"ShapeType\", ShapeType);\nregisterEnum(\"ShapeType\", ShapeType);\n\n\n// wwtlib.LoopTypes\n\nexport var LoopTypes = {\n    loop: 0,\n    upDown: 1,\n    down: 2,\n    upDownOnce: 3,\n    once: 4,\n    begin: 5,\n    end: 6\n};\n\nregisterType(\"LoopTypes\", LoopTypes);\nregisterEnum(\"LoopTypes\", LoopTypes);\n\n\n// wwtlib.Overlay\n\nexport function Overlay() {\n    this.isDynamic = false;\n    this.isDesignTimeOnly = false;\n    this._name = '';\n\n    // this used to be a GUID and should become that again now that we have\n    // proper support for them in the web engine.\n    this.id = (Overlay.nextId++).toString();\n    this._owner = null;\n    this._url = '';\n    this._linkID = '';\n    this._domeMatrix = Matrix3d.get_identity();\n    this._domeMatX = 0;\n    this._domeMatY = 0;\n    this._domeAngle = 0;\n    this.points = null;\n    this._animate = false;\n    this._tweenFactor = 0;\n    this._endX = 0;\n    this._endY = 0;\n    this._endOpacity = 0;\n    this._endColor = new Color();\n    this._endWidth = 0;\n    this._endHeight = 0;\n    this._endRotationAngle = 0;\n    this._anchor = 1;\n    this._x = 0;\n    this._y = 0;\n    this._width = 0;\n    this._height = 0;\n    this._color = Colors.get_white();\n    this._opacity = 0.5;\n    this._rotationAngle = 0;\n    this.currentRotation = 0;\n    this.texture = null;\n    this.texture2d = null;\n    this._interpolationType = 5;\n}\n\nOverlay.defaultAnchor = 1;\nOverlay.clipboardFormat = 'WorldWideTelescope.Overlay';\nOverlay.nextId = 11231;\nOverlay.RC = 3.1415927 / 180;\n\nOverlay._fromXml = function (owner, overlay) {\n    if (overlay.attributes == null) {\n        return null;\n    }\n    if (overlay.attributes.getNamedItem('Type') == null) {\n        return null;\n    }\n    var overlayClassName = overlay.attributes.getNamedItem('Type').nodeValue;\n    var overLayType = ss.replaceString(overlayClassName, 'TerraViewer.', '');\n    var newOverlay = null;\n    switch (overLayType) {\n        case 'AudioOverlay':\n            newOverlay = new AudioOverlay();\n            break;\n        case 'BitmapOverlay':\n            newOverlay = new BitmapOverlay();\n            break;\n        case 'FlipBookOverlay':\n            newOverlay = new FlipbookOverlay();\n            break;\n        case 'ShapeOverlay':\n            newOverlay = new ShapeOverlay();\n            break;\n        case 'TextOverlay':\n            newOverlay = new TextOverlay();\n            break;\n        default:\n            return null;\n    }\n    newOverlay._owner = owner;\n    newOverlay._initOverlayFromXml(overlay);\n    return newOverlay;\n};\n\nvar Overlay$ = {\n    get_name: function () {\n        return this._name;\n    },\n\n    set_name: function (value) {\n        this._name = value;\n        return value;\n    },\n\n    get_owner: function () {\n        return this._owner;\n    },\n\n    set_owner: function (value) {\n        this._owner = value;\n        return value;\n    },\n\n    get_zOrder: function () {\n        var index = 0;\n        var $enum1 = ss.enumerate(this._owner.get_overlays());\n        while ($enum1.moveNext()) {\n            var item = $enum1.current;\n            if (item === this) {\n                break;\n            }\n            index++;\n        }\n        return index;\n    },\n\n    get_url: function () {\n        return this._url;\n    },\n\n    set_url: function (value) {\n        this._url = value;\n        return value;\n    },\n\n    get_linkID: function () {\n        return this._linkID;\n    },\n\n    set_linkID: function (value) {\n        this._linkID = value;\n        return value;\n    },\n\n    play: function () { },\n\n    pause: function () { },\n\n    stop: function () { },\n\n    seek: function (time) { },\n\n    makePosition: function (centerX, centerY, offsetX, offsetY, angle) {\n        centerX -= 960;\n        centerY -= 558;\n        var point = Vector3d.create(centerX + offsetX, centerY + offsetY, 1347);\n        if (!!this._domeMatX || !!this._domeMatY || this._domeAngle !== angle) {\n            this._domeMatX = centerX;\n            this._domeMatY = centerY;\n            this._domeMatrix = Matrix3d.translation(Vector3d.create(-centerX, -centerY, 0));\n            this._domeMatrix._multiply(Matrix3d._rotationZ((angle / 180 * Math.PI)));\n            this._domeMatrix._multiply(Matrix3d.translation(Vector3d.create(centerX, centerY, 0)));\n        }\n        point = Vector3d._transformCoordinate(point, this._domeMatrix);\n        return point;\n    },\n\n    draw3D: function (renderContext, designTime) {\n        if (useGl) {\n            if (this.texture == null || this.isDynamic) {\n                this.initializeTexture();\n            }\n            if (!this.isDesignTimeOnly || designTime) {\n                this.initializeGeometry();\n                this.updateRotation();\n            }\n        } else {\n        }\n    },\n\n    cleanUp: function () {\n        if (this.texture != null) {\n            this.texture = null;\n        }\n        this.texture2d = null;\n    },\n\n    initializeTexture: function () { },\n\n    // This hook exists to deal with web browser autoplay restrictions. In the\n    // strictest case, we can't just start playing media files at will -- we\n    // need to start playing them in response to a user-initiated event. But\n    // there is a generally a scheme in which files are \"unlocked\" once they've\n    // started to be played, and after that point we can control their playback\n    // more precisely. So, this function should do any multimedia playback\n    // initialization needed. It will be called when the user initiates tour\n    // playback.\n    //\n    // Repeated calls should be idempotent.\n    prepMultimedia: function () { },\n\n    cleanUpGeometry: function () {\n        this.currentRotation = 0;\n        this.points = null;\n    },\n\n    initializeGeometry: function () {\n        if (this.points == null) {\n            this.currentRotation = 0;\n            this.points = new Array(4);\n            this.points[0] = new PositionColoredTextured();\n            this.points[0].position = this.makePosition(this.get_x(), this.get_y(), -this.get_width() / 2, -this.get_height() / 2, this.get_rotationAngle());\n            this.points[0].tu = 0;\n            this.points[0].tv = 0;\n            this.points[0].color = this.get_color();\n            this.points[1] = new PositionColoredTextured();\n            this.points[1].position = this.makePosition(this.get_x(), this.get_y(), this.get_width() / 2, -this.get_height() / 2, this.get_rotationAngle());\n            this.points[1].tu = 1;\n            this.points[1].tv = 0;\n            this.points[1].color = this.get_color();\n            this.points[2] = new PositionColoredTextured();\n            this.points[2].position = this.makePosition(this.get_x(), this.get_y(), -this.get_width() / 2, this.get_height() / 2, this.get_rotationAngle());\n            this.points[2].tu = 0;\n            this.points[2].tv = 1;\n            this.points[2].color = this.get_color();\n            this.points[3] = new PositionColoredTextured();\n            this.points[3].position = this.makePosition(this.get_x(), this.get_y(), this.get_width() / 2, this.get_height() / 2, this.get_rotationAngle());\n            this.points[3].tu = 1;\n            this.points[3].tv = 1;\n            this.points[3].color = this.get_color();\n        }\n    },\n\n    updateRotation: function () { },\n\n    // Animation Support\n\n    get_animate: function () {\n        return this._animate;\n    },\n\n    set_animate: function (value) {\n        if (this._animate !== value) {\n            this._animate = value;\n            if (this._animate) {\n                this._endX = this._x;\n                this._endY = this._y;\n                this._endRotationAngle = this._rotationAngle;\n                this._endColor = this._color;\n                this._endWidth = this._width;\n                this._endHeight = this._height;\n                this.cleanUpGeometry();\n            }\n            else {\n                this._endX = this._x = this.get_x();\n                this._endY = this._y = this.get_y();\n                this._endRotationAngle = this._rotationAngle = this.get_rotationAngle();\n                this._endColor = this._color = this.get_color();\n                this._endWidth = this._width = this.get_width();\n                this._endHeight = this._height = this.get_height();\n                this.cleanUpGeometry();\n                this._tweenFactor = 0;\n            }\n        }\n        return value;\n    },\n\n    get_tweenFactor: function () {\n        return this._tweenFactor;\n    },\n\n    set_tweenFactor: function (value) {\n        if (!this._animate) {\n            this._tweenFactor = 0;\n        } else {\n            if (this._tweenFactor !== value) {\n                this._tweenFactor = value;\n                this.cleanUpGeometry();\n            }\n        }\n        return value;\n    },\n\n    get_anchor: function () {\n        return this._anchor;\n    },\n\n    set_anchor: function (value) {\n        this._anchor = value;\n        return value;\n    },\n\n    get_position: function () {\n        return Vector2d.create(this.get_x(), this.get_y());\n    },\n\n    set_position: function (value) {\n        this.set_x(value.x);\n        this.set_y(value.y);\n        return value;\n    },\n\n    get_x: function () {\n        return (this._x * (1 - this._tweenFactor)) + (this._endX * this._tweenFactor);\n    },\n\n    set_x: function (value) {\n        if (this._tweenFactor < 0.5) {\n            if (this._x !== value) {\n                this._x = value;\n                this.cleanUpGeometry();\n            }\n        } else {\n            if (this._endX !== value) {\n                this._endX = value;\n                this.cleanUpGeometry();\n            }\n        }\n        return value;\n    },\n\n    get_y: function () {\n        return (this._y * (1 - this._tweenFactor)) + (this._endY * this._tweenFactor);\n    },\n\n    set_y: function (value) {\n        if (this._tweenFactor < 0.5) {\n            if (this._y !== value) {\n                this._y = value;\n                this.cleanUpGeometry();\n            }\n        } else {\n            if (this._endY !== value) {\n                this._endY = value;\n                this.cleanUpGeometry();\n            }\n        }\n        return value;\n    },\n\n    get_width: function () {\n        return (this._width * (1 - this._tweenFactor)) + (this._endWidth * this._tweenFactor);\n    },\n\n    set_width: function (value) {\n        if (value < 5 && !!value) {\n            value = 5;\n        }\n        if (this._tweenFactor < 0.5) {\n            if (this._width !== value) {\n                this._width = value;\n                this.cleanUpGeometry();\n            }\n        } else {\n            if (this._endWidth !== value) {\n                this._endWidth = value;\n                this.cleanUpGeometry();\n            }\n        }\n        return value;\n    },\n\n    get_height: function () {\n        return (this._height * (1 - this._tweenFactor)) + (this._endHeight * this._tweenFactor);\n    },\n\n    set_height: function (value) {\n        if (value < 5 && !!value) {\n            value = 5;\n        }\n        if (this._tweenFactor < 0.5) {\n            if (this._height !== value) {\n                this._height = value;\n                this.cleanUpGeometry();\n            }\n        } else {\n            if (this._endHeight !== value) {\n                this._endHeight = value;\n                this.cleanUpGeometry();\n            }\n        }\n        return value;\n    },\n\n    get_color: function () {\n        var red = ss.truncate(((this._color.r * (1 - this._tweenFactor)) + (this._endColor.r * this._tweenFactor)));\n        var green = ss.truncate(((this._color.g * (1 - this._tweenFactor)) + (this._endColor.g * this._tweenFactor)));\n        var blue = ss.truncate(((this._color.b * (1 - this._tweenFactor)) + (this._endColor.b * this._tweenFactor)));\n        var alpha = ss.truncate(((this._color.a * (1 - this._tweenFactor)) + (this._endColor.a * this._tweenFactor)));\n        return Color.fromArgb(Math.max(0, Math.min(255, alpha)), Math.max(0, Math.min(255, red)), Math.max(0, Math.min(255, green)), Math.max(0, Math.min(255, blue)));\n    },\n\n    set_color: function (value) {\n        if (this._tweenFactor < 0.5) {\n            if (this._color !== value) {\n                this._color = value;\n                this.cleanUpGeometry();\n            }\n        } else {\n            if (this._endColor !== value) {\n                this._endColor = value;\n                this.cleanUpGeometry();\n            }\n        }\n        return value;\n    },\n\n    get_opacity: function () {\n        return this.get_color().a / 255;\n    },\n\n    set_opacity: function (value) {\n        var col = this.get_color();\n        this.set_color(Color.fromArgb(Math.min(255, ss.truncate((value * 255))), col.r, col.g, col.b));\n        this._opacity = value;\n        return value;\n    },\n\n    get_rotationAngle: function () {\n        return (this._rotationAngle * (1 - this._tweenFactor)) + (this._endRotationAngle * this._tweenFactor);\n    },\n\n    set_rotationAngle: function (value) {\n        if (this._tweenFactor < 0.5) {\n            if (this._rotationAngle !== value) {\n                this._rotationAngle = value;\n                this.cleanUpGeometry();\n            }\n        } else {\n            if (this._endRotationAngle !== value) {\n                this._endRotationAngle = value;\n                this.cleanUpGeometry();\n            }\n        }\n        return value;\n    },\n\n    hitTest: function (pntTest) {\n        var tempPoints = new Array(1);\n        tempPoints[0] = Vector2d.create(pntTest.x, pntTest.y);\n        var mat = Matrix2d.rotateAt(-this.get_rotationAngle() / 180 * Math.PI, Vector2d.create(this.get_x(), this.get_y()));\n        mat._transformPoints(tempPoints);\n        var rect = Rectangle.create((this.get_x() - (this.get_width() / 2)), (this.get_y() - (this.get_height() / 2)), this.get_width(), this.get_height());\n        return rect.contains(tempPoints[0]);\n    },\n\n    get_bounds: function () {\n        return this._bounds;\n    },\n\n    set_bounds: function (value) {\n        this._bounds = value;\n        return value;\n    },\n\n    get_interpolationType: function () {\n        return this._interpolationType;\n    },\n\n    set_interpolationType: function (value) {\n        this._interpolationType = value;\n        return value;\n    },\n\n    saveToXml: function (xmlWriter, saveKeys) {\n        xmlWriter._writeStartElement('Overlay');\n        xmlWriter._writeAttributeString('Id', this.id);\n        xmlWriter._writeAttributeString('Type', this.getTypeName());\n        xmlWriter._writeAttributeString('Name', this.get_name());\n        xmlWriter._writeAttributeString('X', this._x.toString());\n        xmlWriter._writeAttributeString('Y', this._y.toString());\n        xmlWriter._writeAttributeString('Width', this._width.toString());\n        xmlWriter._writeAttributeString('Height', this._height.toString());\n        xmlWriter._writeAttributeString('Rotation', this._rotationAngle.toString());\n        xmlWriter._writeAttributeString('Color', this._color.save());\n        xmlWriter._writeAttributeString('Url', this._url);\n        xmlWriter._writeAttributeString('LinkID', this._linkID);\n        xmlWriter._writeAttributeString('Animate', this._animate.toString());\n        if (this._animate) {\n            xmlWriter._writeAttributeString('EndX', this._endX.toString());\n            xmlWriter._writeAttributeString('EndY', this._endY.toString());\n            xmlWriter._writeAttributeString('EndWidth', this._endWidth.toString());\n            xmlWriter._writeAttributeString('EndHeight', this._endHeight.toString());\n            xmlWriter._writeAttributeString('EndRotation', this._endRotationAngle.toString());\n            xmlWriter._writeAttributeString('EndColor', this._endColor.save());\n            xmlWriter._writeAttributeString('InterpolationType', Enums.toXml('InterpolationType', this._interpolationType));\n        }\n        xmlWriter._writeAttributeString('Anchor', Enums.toXml('OverlayAnchor', this._anchor));\n        this.writeOverlayProperties(xmlWriter);\n        xmlWriter._writeEndElement();\n    },\n\n    getTypeName: function () {\n        return 'TerraViewer.Overlay';\n    },\n\n    addFilesToCabinet: function (fc) { },\n\n    writeOverlayProperties: function (xmlWriter) { },\n\n    _initOverlayFromXml: function (node) {\n        this.id = node.attributes.getNamedItem('Id').nodeValue;\n        this.set_name(node.attributes.getNamedItem('Name').nodeValue);\n        this._x = parseFloat(node.attributes.getNamedItem('X').nodeValue);\n        this._y = parseFloat(node.attributes.getNamedItem('Y').nodeValue);\n        this._width = parseFloat(node.attributes.getNamedItem('Width').nodeValue);\n        this._height = parseFloat(node.attributes.getNamedItem('Height').nodeValue);\n        this._rotationAngle = parseFloat(node.attributes.getNamedItem('Rotation').nodeValue);\n        this._color = Color.load(node.attributes.getNamedItem('Color').nodeValue);\n        if (node.attributes.getNamedItem('Url') != null) {\n            this.set_url(node.attributes.getNamedItem('Url').nodeValue);\n        }\n        if (node.attributes.getNamedItem('LinkID') != null) {\n            this.set_linkID(node.attributes.getNamedItem('LinkID').nodeValue);\n        }\n        if (node.attributes.getNamedItem('Animate') != null) {\n            this._animate = ss.boolean(node.attributes.getNamedItem('Animate').nodeValue);\n            if (this._animate) {\n                this._endX = parseFloat(node.attributes.getNamedItem('EndX').nodeValue);\n                this._endY = parseFloat(node.attributes.getNamedItem('EndY').nodeValue);\n                this._endColor = Color.load(node.attributes.getNamedItem('EndColor').nodeValue);\n                this._endWidth = parseFloat(node.attributes.getNamedItem('EndWidth').nodeValue);\n                this._endHeight = parseFloat(node.attributes.getNamedItem('EndHeight').nodeValue);\n                this._endRotationAngle = parseFloat(node.attributes.getNamedItem('EndRotation').nodeValue);\n                if (node.attributes.getNamedItem('InterpolationType') != null) {\n                    this.set_interpolationType(Enums.parse('InterpolationType', node.attributes.getNamedItem('InterpolationType').nodeValue));\n                }\n            }\n        }\n        this.initializeFromXml(node);\n    },\n\n    initializeFromXml: function (node) { },\n\n    toString: function () {\n        return this.get_name();\n    }\n};\n\nregisterType(\"Overlay\", [Overlay, Overlay$, null]);\n\n// wwtlib.BitmapOverlay\n\nexport function BitmapOverlay() {\n    this._textureReady$1 = false;\n    this._sprite$1 = new Sprite2d();\n    Overlay.call(this);\n}\n\n//todo figure out how to load local files into cloud and to cabinet\nBitmapOverlay.create = function (owner, file) {\n    var temp = new BitmapOverlay();\n    temp.set_owner(owner);\n    // to make directory and guid filename in tour temp dir.\n    temp._filename$1 = file.name;\n    temp.set_name(owner.getNextDefaultName('Image'));\n    temp.set_x(0);\n    temp.set_y(0);\n    owner.get_owner().addCachedFile(file.name, file);\n    return temp;\n};\n\nvar BitmapOverlay$ = {\n    getTypeName: function () {\n        return 'TerraViewer.BitmapOverlay';\n    },\n\n    copy: function (owner) {\n        var newBmpOverlay = new BitmapOverlay();\n        newBmpOverlay.set_owner(owner);\n        newBmpOverlay._filename$1 = this._filename$1;\n        newBmpOverlay.set_x(this.get_x());\n        newBmpOverlay.set_y(this.get_y());\n        newBmpOverlay.set_width(this.get_width());\n        newBmpOverlay.set_height(this.get_height());\n        newBmpOverlay.set_color(this.get_color());\n        newBmpOverlay.set_opacity(this.get_opacity());\n        newBmpOverlay.set_rotationAngle(this.get_rotationAngle());\n        newBmpOverlay.set_name(this.get_name() + ' - Copy');\n        return newBmpOverlay;\n    },\n\n    cleanUp: function () {\n        this.texture = null;\n        if (this.texture2d != null) {\n            this.texture2d.cleanUp();\n            this.texture2d = null;\n        }\n    },\n\n    initializeTexture: function () {\n        var $this = this;\n\n        try {\n            if (useGl) {\n                this.texture2d = this.get_owner().get_owner().getCachedTexture2d(this._filename$1);\n                this._textureReady$1 = true;\n            }\n            else {\n                this.texture = this.get_owner().get_owner().getCachedTexture(this._filename$1, function () {\n                    $this._textureReady$1 = true;\n                });\n            }\n        }\n        catch ($e1) {\n        }\n    },\n\n    draw3D: function (renderContext, designTime) {\n        if (useGl) {\n            if (this.texture2d == null) {\n                this.initializeTexture();\n            }\n            if (!this.get_width() && !this.get_height()) {\n                this.set_width(this.texture2d.imageElement.width);\n                this.set_height(this.texture2d.imageElement.height);\n            }\n            this.initializeGeometry();\n            this.updateRotation();\n            this._sprite$1.draw(renderContext, this.points, this.points.length, this.texture2d, true, 1);\n        } else {\n            if (this.texture == null) {\n                this.initializeTexture();\n            }\n            if (!this._textureReady$1) {\n                return;\n            }\n            if (!this.get_width() && !this.get_height()) {\n                this.set_width(this.texture.width);\n                this.set_height(this.texture.height);\n            }\n            var ctx = renderContext.device;\n            ctx.save();\n            ctx.translate(this.get_x(), this.get_y());\n            ctx.rotate(this.get_rotationAngle() * Overlay.RC);\n            ctx.globalAlpha = this.get_opacity();\n            ctx.drawImage(this.texture, -this.get_width() / 2, -this.get_height() / 2, this.get_width(), this.get_height());\n            ctx.restore();\n        }\n    },\n\n    addFilesToCabinet: function (fc) {\n        fc.addFile(this.get_owner().get_owner().get_workingDirectory() + this._filename$1, this.get_owner().get_owner().getFileBlob(this._filename$1));\n    },\n\n    writeOverlayProperties: function (xmlWriter) {\n        xmlWriter._writeStartElement('Bitmap');\n        xmlWriter._writeAttributeString('Filename', this._filename$1);\n        xmlWriter._writeEndElement();\n    },\n\n    initializeFromXml: function (node) {\n        var bitmap = Util.selectSingleNode(node, 'Bitmap');\n        this._filename$1 = bitmap.attributes.getNamedItem('Filename').nodeValue;\n    }\n};\n\nregisterType(\"BitmapOverlay\", [BitmapOverlay, BitmapOverlay$, Overlay]);\n\n// wwtlib.TextOverlay\n\nexport function TextOverlay() {\n    this._sprite$1 = new Sprite2d();\n    this._ctx$1 = null;\n    this._ce$1 = null;\n    Overlay.call(this);\n}\n\nTextOverlay.create = function (textObject) {\n    var to = new TextOverlay();\n    to.textObject = textObject;\n    to._calculateTextSize$1();\n    return to;\n};\n\nvar TextOverlay$ = {\n    getTypeName: function () {\n        return 'TerraViewer.TextOverlay';\n    },\n\n    get_color: function () {\n        return Overlay.prototype.get_color.call(this);\n    },\n\n    set_color: function (value) {\n        if (this.textObject.foregroundColor !== value) {\n            this.textObject.foregroundColor = value;\n            Overlay.prototype.set_color.call(this, value);\n            this.cleanUp();\n        }\n        return value;\n    },\n\n    draw3D: function (renderContext, designTime) {\n        if (useGl) {\n            this.initializeTexture();\n            this.initializeGeometry();\n            this.updateRotation();\n            this._sprite$1.draw(renderContext, this.points, this.points.length, this.texture2d, true, 1);\n        } else {\n            var ctx = renderContext.device;\n            ctx.save();\n            ctx.translate(this.get_x(), this.get_y());\n            ctx.rotate(this.get_rotationAngle() * Overlay.RC);\n            ctx.globalAlpha = this.get_opacity();\n            this._drawCanvasText$1(ctx);\n            ctx.restore();\n        }\n    },\n    _drawCanvasText$1: function (ctx) {\n        ctx.fillStyle = this.textObject.foregroundColor.toString();\n        ctx.font = ((this.textObject.italic) ? 'italic' : 'normal') + ' ' + ((this.textObject.bold) ? 'bold' : 'normal') + ' ' + Math.round(this.textObject.fontSize * 1.2).toString() + 'px ' + this.textObject.fontName;\n        ctx.textBaseline = 'top';\n        var text = this.textObject.text;\n        if (text.indexOf('{$') > -1) {\n            if (text.indexOf('{$DATE}') > -1) {\n                var date = ss.format('{0:yyyy/MM/dd}', SpaceTimeController.get_now());\n                text = ss.replaceString(text, '{$DATE}', date);\n            }\n            if (text.indexOf('{$TIME}') > -1) {\n                var time = ss.format('{0:HH:mm:ss}', SpaceTimeController.get_now());\n                text = ss.replaceString(text, '{$TIME}', time);\n            }\n            text = ss.replaceString(text, '{$DIST}', UiTools.formatDistance(globalRenderContext.get_solarSystemCameraDistance()));\n            text = ss.replaceString(text, '{$LAT}', Coordinates.formatDMS(globalRenderContext.viewCamera.lat));\n            text = ss.replaceString(text, '{$LNG}', Coordinates.formatDMS(globalRenderContext.viewCamera.lat));\n            text = ss.replaceString(text, '{$RA}', Coordinates.formatDMS(globalRenderContext.viewCamera.get_RA()));\n            text = ss.replaceString(text, '{$DEC}', Coordinates.formatDMS(globalRenderContext.viewCamera.get_dec()));\n            text = ss.replaceString(text, '{$FOV}', Coordinates.formatDMS(globalRenderContext.get_fovAngle()));\n        }\n        var lines = text.split('\\n');\n        var baseline = -(this.get_height() / 2);\n        var lineSpace = this.textObject.fontSize * 1.7;\n        var $enum1 = ss.enumerate(lines);\n        while ($enum1.moveNext()) {\n            var line = $enum1.current;\n            var parts = Util.getWrappedText(ctx, line, this.get_width());\n            var $enum2 = ss.enumerate(parts);\n            while ($enum2.moveNext()) {\n                var part = $enum2.current;\n                ctx.fillText(part, -this.get_width() / 2, baseline);\n                baseline += lineSpace;\n            }\n        }\n    },\n    _calculateTextSize$1: function () {\n        if (this._ctx$1 == null || this._ce$1 == null) {\n            this._ce$1 = document.createElement('canvas');\n            this._ce$1.height = 100;\n            this._ce$1.width = 100;\n            this._ctx$1 = this._ce$1.getContext('2d');\n        }\n        this._ctx$1.fillStyle = this.textObject.foregroundColor.toString();\n        this._ctx$1.font = ((this.textObject.italic) ? 'italic' : 'normal') + ' ' + ((this.textObject.bold) ? 'bold' : 'normal') + ' ' + Math.round(this.textObject.fontSize * 1.2).toString() + 'px ' + this.textObject.fontName;\n        this._ctx$1.textBaseline = 'top';\n        var text = this.textObject.text;\n        if (text.indexOf('{$') > -1) {\n            if (text.indexOf('{$DATE}') > -1) {\n                var date = ss.format('{0:yyyy/MM/dd}', SpaceTimeController.get_now());\n                text = ss.replaceString(text, '{$DATE}', date);\n            }\n            if (text.indexOf('{$TIME}') > -1) {\n                var time = ss.format('{0:HH:mm:ss}', SpaceTimeController.get_now());\n                text = ss.replaceString(text, '{$TIME}', time);\n            }\n            text = ss.replaceString(text, '{$DIST}', UiTools.formatDistance(globalRenderContext.get_solarSystemCameraDistance()));\n            text = ss.replaceString(text, '{$LAT}', Coordinates.formatDMS(globalRenderContext.viewCamera.lat));\n            text = ss.replaceString(text, '{$LNG}', Coordinates.formatDMS(globalRenderContext.viewCamera.lat));\n            text = ss.replaceString(text, '{$RA}', Coordinates.formatDMS(globalRenderContext.viewCamera.get_RA()));\n            text = ss.replaceString(text, '{$DEC}', Coordinates.formatDMS(globalRenderContext.viewCamera.get_dec()));\n            text = ss.replaceString(text, '{$FOV}', Coordinates.formatDMS(globalRenderContext.get_fovAngle()));\n        }\n        var lines = text.split('\\n');\n        var baseline = 0;\n        var lineSpace = this.textObject.fontSize * 1.7;\n        var maxWidth = 0;\n        var $enum1 = ss.enumerate(lines);\n        while ($enum1.moveNext()) {\n            var line = $enum1.current;\n            var width = this._ctx$1.measureText(line).width;\n            maxWidth = Math.max(width, maxWidth);\n            baseline += lineSpace;\n        }\n\n        //Width + fudge factor\n        this.set_width(maxWidth * 1.01);\n        this.set_height(baseline);\n        this._ce$1 = null;\n        this._ctx$1 = null;\n    },\n\n    initializeTexture: function () {\n        if (this.texture2d == null || (this.textObject.text.indexOf('{$') > -1)) {\n            if (!this.get_height() || !this.get_width()) {\n                this._calculateTextSize$1();\n            }\n            if (this._ctx$1 == null || this._ce$1 == null) {\n                this._ce$1 = document.createElement('canvas');\n                this._ce$1.height = ss.truncate(this.get_height());\n                this._ce$1.width = ss.truncate(this.get_width());\n                this._ctx$1 = this._ce$1.getContext('2d');\n            }\n            this._ctx$1.translate(this.get_width() / 2, this.get_height() / 2);\n            this._ctx$1.clearRect(0, 0, this.get_width(), this.get_height());\n            this._drawCanvasText$1(this._ctx$1);\n            this.texture2d = new Texture();\n            this.texture2d.imageElement = this._ce$1;\n            this.texture2d.makeTexture();\n            this._ce$1 = null;\n            this._ctx$1 = null;\n        }\n    },\n\n    writeOverlayProperties: function (xmlWriter) {\n        xmlWriter._writeStartElement('Text');\n        this.textObject._saveToXml(xmlWriter);\n        xmlWriter._writeEndElement();\n    },\n\n    initializeFromXml: function (node) {\n        var text = Util.selectSingleNode(node, 'Text');\n        this.textObject = TextObject._fromXml(Util.selectSingleNode(text, 'TextObject'));\n    },\n\n    initializeGeometry: function () {\n        if (useGl) {\n            Overlay.prototype.initializeGeometry.call(this);\n        }\n    }\n};\n\nregisterType(\"TextOverlay\", [TextOverlay, TextOverlay$, Overlay]);\n\n// wwtlib.ShapeOverlay\n\nexport function ShapeOverlay() {\n    this._shapeType$1 = 1;\n    this._sprite$1 = new Sprite2d();\n    this._triangleStrip$1 = true;\n    Overlay.call(this);\n}\n\nShapeOverlay._create = function (currentTourStop, shapeType) {\n    var overlay = new ShapeOverlay();\n    overlay._shapeType$1 = shapeType;\n    overlay.set_owner(currentTourStop);\n    return overlay;\n};\n\nvar ShapeOverlay$ = {\n    getTypeName: function () {\n        return 'TerraViewer.ShapeOverlay';\n    },\n\n    get_shapeType: function () {\n        return this._shapeType$1;\n    },\n\n    set_shapeType: function (value) {\n        this._shapeType$1 = value;\n        this.cleanUpGeometry();\n        return value;\n    },\n\n    draw3D: function (renderContext, designTime) {\n        if (useGl) {\n            this.initializeGeometry();\n            this._sprite$1.draw(renderContext, this.points, this.points.length, null, this._triangleStrip$1, this.get_opacity());\n        } else {\n            switch (this._shapeType$1) {\n                case 0:\n                    this._drawCircleGeometry$1(renderContext);\n                    break;\n                case 1:\n                    this._drawRectGeometry$1(renderContext);\n                    break;\n                case 6:\n                    this._drawOpenRectGeometry$1(renderContext);\n                    break;\n                case 2:\n                    this._drawStarGeometry$1(renderContext);\n                    break;\n                case 3:\n                    this._drawDonutGeometry$1(renderContext);\n                    break;\n                case 4:\n                    this._drawArrowGeometry$1(renderContext);\n                    break;\n                case 5:\n                    this._drawLineGeometry$1(renderContext);\n                    break;\n                default:\n                    break;\n            }\n        }\n    },\n\n    initializeGeometry: function () {\n        if (this.points == null) {\n            switch (this._shapeType$1) {\n                case 0:\n                    this._createCircleGeometry$1();\n                    break;\n                case 1:\n                    Overlay.prototype.initializeGeometry.call(this);\n                    break;\n                case 6:\n                    this._createOpenRectGeometry$1();\n                    break;\n                case 2:\n                    this._createStarGeometry$1();\n                    break;\n                case 3:\n                    this._createDonutGeometry$1();\n                    break;\n                case 4:\n                    this._createArrowGeometry$1();\n                    break;\n                case 5:\n                    this._createLineGeometry$1();\n                    break;\n                default:\n                    break;\n            }\n        }\n    },\n    _createLineGeometry$1: function () {\n        var centerX = this.get_x();\n        var centerY = this.get_y();\n        var radius = this.get_width() / 2;\n        var length = this.get_width();\n        var segments = ss.truncate((length / 12)) + 1;\n        var radiansPerSegment = (Math.PI * 2) / segments;\n        if (this.points == null) {\n            this.points = new Array(segments * 2 + 2);\n        }\n        for (var j = 0; j <= segments; j++) {\n            var i = j * 2;\n            this.points[i] = new PositionColoredTextured();\n            this.points[i].position = this.makePosition(this.get_x(), this.get_y(), ((j / segments) * this.get_width() - (this.get_width() / 2)), 6, this.get_rotationAngle());\n            this.points[i].tu = (j % 2);\n            this.points[i].tv = 0;\n            this.points[i].color = this.get_color();\n            this.points[i + 1] = new PositionColoredTextured();\n            this.points[i + 1].position = this.makePosition(this.get_x(), this.get_y(), ((j / segments) * this.get_width() - (this.get_width() / 2)), -6, this.get_rotationAngle());\n            this.points[i + 1].tu = (j % 2);\n            this.points[i + 1].tv = 1;\n            this.points[i + 1].color = this.get_color();\n        }\n    },\n    _createOpenRectGeometry$1: function () {\n        var centerX = this.get_x();\n        var centerY = this.get_y();\n        var radius = this.get_width() / 2;\n        var length = this.get_width();\n        var segments = ss.truncate((length / 12)) + 1;\n        var segmentsHigh = ss.truncate((this.get_height() / 12)) + 1;\n        var totalPoints = (((segments + 1) * 2) + ((segmentsHigh + 1) * 2)) * 2;\n        if (this.points == null) {\n            this.points = new Array(totalPoints);\n        }\n        for (var j = 0; j <= segments; j++) {\n            var i = j * 2;\n            this.points[i] = new PositionColoredTextured();\n            this.points[i].position = this.makePosition(centerX, centerY, (j / segments) * this.get_width() - (this.get_width() / 2), (this.get_height() / 2), this.get_rotationAngle());\n            this.points[i].tu = (j % 2);\n            this.points[i].tv = 0;\n            this.points[i].color = this.get_color();\n            this.points[i + 1] = new PositionColoredTextured();\n            this.points[i + 1].position = this.makePosition(centerX, centerY, (j / segments) * this.get_width() - (this.get_width() / 2), ((this.get_height() / 2) - 12), this.get_rotationAngle());\n            this.points[i + 1].tu = (j % 2);\n            this.points[i + 1].tv = 1;\n            this.points[i + 1].color = this.get_color();\n            var k = (((segments + 1) * 4) + ((segmentsHigh + 1) * 2) - 2) - i;\n            this.points[k] = new PositionColoredTextured();\n            this.points[k].position = this.makePosition(centerX, centerY, (j / segments) * this.get_width() - (this.get_width() / 2), (-(this.get_height() / 2)) + 12, this.get_rotationAngle());\n            this.points[k].tu = (j % 2);\n            this.points[k].tv = 0;\n            this.points[k].color = this.get_color();\n            this.points[k + 1] = new PositionColoredTextured();\n            this.points[k + 1].position = this.makePosition(centerX, centerY, (j / segments) * this.get_width() - (this.get_width() / 2), (-(this.get_height() / 2)), this.get_rotationAngle());\n            this.points[k + 1].tu = (j % 2);\n            this.points[k + 1].tv = 1;\n            this.points[k + 1].color = this.get_color();\n        }\n        var offset = ((segments + 1) * 2);\n        for (var j = 0; j <= segmentsHigh; j++) {\n            var top = ((segmentsHigh + 1) * 2) + offset - 2;\n            var i = j * 2;\n            this.points[top - i] = new PositionColoredTextured();\n            this.points[top - i].position = this.makePosition(centerX, centerY, (this.get_width() / 2), ((j / segmentsHigh) * this.get_height() - (this.get_height() / 2)), this.get_rotationAngle());\n            this.points[top - i].tu = (j % 2);\n            this.points[top - i].tv = 0;\n            this.points[top - i].color = this.get_color();\n            this.points[top - i + 1] = new PositionColoredTextured();\n            this.points[top - i + 1].position = this.makePosition(centerX, centerY, ((this.get_width() / 2) - 12), ((j / segmentsHigh) * this.get_height() - (this.get_height() / 2)), this.get_rotationAngle());\n            this.points[top - i + 1].tu = (j % 2);\n            this.points[top - i + 1].tv = 1;\n            this.points[top - i + 1].color = this.get_color();\n            var k = i + ((segments + 1) * 4) + ((segmentsHigh + 1) * 2);\n            this.points[k] = new PositionColoredTextured();\n            this.points[k].position = this.makePosition(centerX, centerY, (-(this.get_width() / 2) + 12), ((j / segmentsHigh) * this.get_height() - (this.get_height() / 2)), this.get_rotationAngle());\n            this.points[k].tu = (j % 2);\n            this.points[k].tv = 0;\n            this.points[k].color = this.get_color();\n            this.points[k + 1] = new PositionColoredTextured();\n            this.points[k + 1].position = this.makePosition(centerX, centerY, (-(this.get_width() / 2)), ((j / segmentsHigh) * this.get_height() - (this.get_height() / 2)), this.get_rotationAngle());\n            this.points[k + 1].tu = (j % 2);\n            this.points[k + 1].tv = 1;\n            this.points[k + 1].color = this.get_color();\n        }\n    },\n    _createStarGeometry$1: function () {\n        var centerX = this.get_x();\n        var centerY = this.get_y();\n        var radius = this.get_width() / 2;\n        var radiansPerSegment = (Math.PI * 2) / 5;\n        if (this.points == null) {\n            this.points = new Array(12);\n        }\n        if (this._pnts$1 == null) {\n            this._pnts$1 = new Array(10);\n        }\n        for (var i = 0; i < 5; i++) {\n            var rads = i * radiansPerSegment - (Math.PI / 2);\n            this._pnts$1[i] = new PositionColoredTextured();\n            this._pnts$1[i].position = this.makePosition(centerX, centerY, (Math.cos(rads) * (this.get_width() / 2)), (Math.sin(rads) * (this.get_height() / 2)), this.get_rotationAngle());\n            this._pnts$1[i].tu = 0;\n            this._pnts$1[i].tv = 0;\n            this._pnts$1[i].color = this.get_color();\n        }\n        for (var i = 5; i < 10; i++) {\n            var rads = i * radiansPerSegment + (radiansPerSegment / 2) - (Math.PI / 2);\n            this._pnts$1[i] = new PositionColoredTextured();\n            this._pnts$1[i].position = this.makePosition(centerX, centerY, (Math.cos(rads) * (this.get_width() / 5.3)), (Math.sin(rads) * (this.get_height() / 5.3)), this.get_rotationAngle());\n            this._pnts$1[i].tu = 0;\n            this._pnts$1[i].tv = 0;\n            this._pnts$1[i].color = this.get_color();\n        }\n        this.points[0] = this._pnts$1[0];\n        this.points[1] = this._pnts$1[5];\n        this.points[2] = this._pnts$1[9];\n        this.points[3] = this._pnts$1[1];\n        this.points[4] = this._pnts$1[7];\n        this.points[5] = this._pnts$1[4];\n        this.points[6] = this._pnts$1[6];\n        this.points[7] = this._pnts$1[2];\n        this.points[8] = this._pnts$1[7];\n        this.points[9] = this._pnts$1[7];\n        this.points[10] = this._pnts$1[3];\n        this.points[11] = this._pnts$1[8];\n        this._triangleStrip$1 = false;\n    },\n    _createArrowGeometry$1: function () {\n        if (this.points == null) {\n            this.points = new Array(9);\n        }\n        this.points[0] = new PositionColoredTextured();\n        this.points[0].position = this.makePosition(this.get_x(), this.get_y(), -this.get_width() / 2, -this.get_height() / 4, this.get_rotationAngle());\n        this.points[0].tu = 0;\n        this.points[0].tv = 0;\n        this.points[0].color = this.get_color();\n        this.points[1] = new PositionColoredTextured();\n        this.points[1].position = this.makePosition(this.get_x(), this.get_y(), this.get_width() / 4, -this.get_height() / 4, this.get_rotationAngle());\n        this.points[1].tu = 1;\n        this.points[1].tv = 0;\n        this.points[1].color = this.get_color();\n        this.points[2] = new PositionColoredTextured();\n        this.points[2].position = this.makePosition(this.get_x(), this.get_y(), -this.get_width() / 2, this.get_height() / 4, this.get_rotationAngle());\n        this.points[2].tu = 0;\n        this.points[2].tv = 1;\n        this.points[2].color = this.get_color();\n        this.points[3] = new PositionColoredTextured();\n        this.points[3].position = this.makePosition(this.get_x(), this.get_y(), this.get_width() / 4, -this.get_height() / 4, this.get_rotationAngle());\n        this.points[3].tu = 1;\n        this.points[3].tv = 0;\n        this.points[3].color = this.get_color();\n        this.points[4] = new PositionColoredTextured();\n        this.points[4].position = this.makePosition(this.get_x(), this.get_y(), -this.get_width() / 2, this.get_height() / 4, this.get_rotationAngle());\n        this.points[4].tu = 0;\n        this.points[4].tv = 1;\n        this.points[4].color = this.get_color();\n        this.points[5] = new PositionColoredTextured();\n        this.points[5].position = this.makePosition(this.get_x(), this.get_y(), this.get_width() / 4, this.get_height() / 4, this.get_rotationAngle());\n        this.points[5].tu = 1;\n        this.points[5].tv = 1;\n        this.points[5].color = this.get_color();\n        this.points[6] = new PositionColoredTextured();\n        this.points[6].position = this.makePosition(this.get_x(), this.get_y(), this.get_width() / 4, -this.get_height() / 2, this.get_rotationAngle());\n        this.points[6].tu = 1;\n        this.points[6].tv = 1;\n        this.points[6].color = this.get_color();\n        this.points[7] = new PositionColoredTextured();\n        this.points[7].position = this.makePosition(this.get_x(), this.get_y(), this.get_width() / 2, 0, this.get_rotationAngle());\n        this.points[7].tu = 1;\n        this.points[7].tv = 0.5;\n        this.points[7].color = this.get_color();\n        this.points[8] = new PositionColoredTextured();\n        this.points[8].position = this.makePosition(this.get_x(), this.get_y(), this.get_width() / 4, this.get_height() / 2, this.get_rotationAngle());\n        this.points[8].tu = 1;\n        this.points[8].tv = 1;\n        this.points[8].color = this.get_color();\n        this._triangleStrip$1 = false;\n    },\n    _createDonutGeometry$1: function () {\n        var centerX = this.get_x();\n        var centerY = this.get_y();\n        var radius = this.get_width() / 2;\n        var circumference = Math.PI * 2 * radius;\n        var segments = ss.truncate((circumference / 12)) + 1;\n        var radiansPerSegment = (Math.PI * 2) / segments;\n        if (this.points == null) {\n            this.points = new Array(segments * 2 + 2);\n        }\n        for (var j = 0; j <= segments; j++) {\n            var i = j * 2;\n            this.points[i] = new PositionColoredTextured();\n            this.points[i].position = this.makePosition(centerX, centerY, (Math.cos(j * radiansPerSegment) * (this.get_width() / 2)), (Math.sin(j * radiansPerSegment) * (this.get_height() / 2)), this.get_rotationAngle());\n            this.points[i].tu = (j % 2);\n            this.points[i].tv = 0;\n            this.points[i].color = this.get_color();\n            this.points[i + 1] = new PositionColoredTextured();\n            this.points[i + 1].position = this.makePosition(centerX, centerY, (Math.cos(j * radiansPerSegment) * ((this.get_width() / 2) - 10)), (Math.sin(j * radiansPerSegment) * ((this.get_height() / 2) - 10)), this.get_rotationAngle());\n            this.points[i + 1].tu = (j % 2);\n            this.points[i + 1].tv = 1;\n            this.points[i + 1].color = this.get_color();\n        }\n    },\n    _createCircleGeometry$1: function () {\n        var centerX = this.get_x();\n        var centerY = this.get_y();\n        var radius = this.get_width() / 2;\n        var circumference = Math.PI * 2 * radius;\n        var segments = ss.truncate((circumference / 12)) + 1;\n        var radiansPerSegment = (Math.PI * 2) / segments;\n        if (this.points == null) {\n            this.points = new Array(segments * 2 + 2);\n        }\n        for (var j = 0; j <= segments; j++) {\n            var i = j * 2;\n            this.points[i] = new PositionColoredTextured();\n            this.points[i].position = this.makePosition(centerX, centerY, (Math.cos(j * radiansPerSegment) * (this.get_width() / 2)), (Math.sin(j * radiansPerSegment) * (this.get_height() / 2)), this.get_rotationAngle());\n            this.points[i].tu = (j % 2);\n            this.points[i].tv = 0;\n            this.points[i].color = this.get_color();\n            this.points[i + 1] = new PositionColoredTextured();\n            this.points[i + 1].position = this.makePosition(centerX, centerY, 0, 0, this.get_rotationAngle());\n            this.points[i + 1].tu = (j % 2);\n            this.points[i + 1].tv = 1;\n            this.points[i + 1].color = this.get_color();\n        }\n    },\n\n    initializeTexture: function () {\n        switch (this.get_shapeType()) {\n            case 5:\n            case 3:\n            case 6:\n                break;\n            case 0:\n            case 1:\n            case 2:\n            case 4:\n            default:\n                this.texture = null;\n                break;\n        }\n    },\n\n    //todo this needs to be Dashed rounded lines..\n    _drawLineGeometry$1: function (renderContext) {\n        var ctx = renderContext.device;\n        ctx.save();\n        var radius = this.get_width() / 2;\n        ctx.translate(this.get_x(), this.get_y());\n        ctx.rotate(this.get_rotationAngle() * Overlay.RC);\n        ctx.moveTo(-radius, 0);\n        ctx.lineTo(radius, 0);\n        ctx.lineWidth = 9;\n        ctx.strokeStyle = this.get_color().toString();\n        ctx.globalAlpha = this.get_opacity();\n        ctx.stroke();\n        ctx.restore();\n    },\n\n    _drawOpenRectGeometry$1: function (renderContext) {\n        var ctx = renderContext.device;\n        ctx.save();\n        ctx.translate(this.get_x(), this.get_y());\n        ctx.rotate(this.get_rotationAngle() * Overlay.RC);\n        ctx.beginPath();\n        ctx.moveTo(-this.get_width() / 2, -this.get_height() / 2);\n        ctx.lineTo(this.get_width() / 2, -this.get_height() / 2);\n        ctx.lineTo(this.get_width() / 2, this.get_height() / 2);\n        ctx.lineTo(-this.get_width() / 2, this.get_height() / 2);\n        ctx.closePath();\n        ctx.lineWidth = 9;\n        ctx.strokeStyle = this.get_color().toString();\n        ctx.globalAlpha = this.get_opacity();\n        ctx.stroke();\n        ctx.restore();\n    },\n\n    _drawRectGeometry$1: function (renderContext) {\n        var ctx = renderContext.device;\n        ctx.save();\n        ctx.translate(this.get_x(), this.get_y());\n        ctx.rotate(this.get_rotationAngle() * Overlay.RC);\n        ctx.beginPath();\n        ctx.moveTo(-this.get_width() / 2, -this.get_height() / 2);\n        ctx.lineTo(this.get_width() / 2, -this.get_height() / 2);\n        ctx.lineTo(this.get_width() / 2, this.get_height() / 2);\n        ctx.lineTo(-this.get_width() / 2, this.get_height() / 2);\n        ctx.closePath();\n        ctx.lineWidth = 0;\n        ctx.fillStyle = this.get_color().toString();\n        ctx.globalAlpha = this.get_opacity();\n        ctx.fill();\n        ctx.restore();\n    },\n\n    _drawStarGeometry$1: function (renderContext) {\n        var ctx = renderContext.device;\n        ctx.save();\n        ctx.translate(this.get_x(), this.get_y());\n        ctx.rotate(this.get_rotationAngle() * Overlay.RC);\n        ctx.beginPath();\n        var centerX = 0;\n        var centerY = 0;\n        var radius = this.get_width() / 2;\n        var radiansPerSegment = (Math.PI * 2) / 5;\n        var first = true;\n        for (var i = 0; i < 5; i++) {\n            var rads = i * radiansPerSegment - (Math.PI / 2);\n            if (first) {\n                first = false;\n                ctx.moveTo(centerX + Math.cos(rads) * (this.get_width() / 2), centerY + Math.sin(rads) * (this.get_height() / 2));\n            }\n            else {\n                ctx.lineTo(centerX + Math.cos(rads) * (this.get_width() / 2), centerY + Math.sin(rads) * (this.get_height() / 2));\n            }\n            var rads2 = i * radiansPerSegment + (radiansPerSegment / 2) - (Math.PI / 2);\n            ctx.lineTo(centerX + Math.cos(rads2) * (this.get_width() / 5.3), centerY + Math.sin(rads2) * (this.get_height() / 5.3));\n        }\n        ctx.closePath();\n        ctx.lineWidth = 0;\n        ctx.fillStyle = this.get_color().toString();\n        ctx.globalAlpha = this.get_opacity();\n        ctx.fill();\n        ctx.restore();\n    },\n\n    _drawArrowGeometry$1: function (renderContext) {\n        var ctx = renderContext.device;\n        ctx.save();\n        ctx.translate(this.get_x(), this.get_y());\n        ctx.rotate(this.get_rotationAngle() * Overlay.RC);\n        ctx.beginPath();\n        ctx.moveTo((-(this.get_width() / 2)), (-(this.get_height() / 4)));\n        ctx.lineTo((this.get_width() / 4), (-(this.get_height() / 4)));\n        ctx.lineTo((this.get_width() / 4), (-(this.get_height() / 2)));\n        ctx.lineTo((this.get_width() / 2), 0);\n        ctx.lineTo((this.get_width() / 4), (this.get_height() / 2));\n        ctx.lineTo((this.get_width() / 4), (this.get_height() / 4));\n        ctx.lineTo((-(this.get_width() / 2)), (this.get_height() / 4));\n        ctx.closePath();\n        ctx.lineWidth = 0;\n        ctx.fillStyle = this.get_color().toString();\n        ctx.globalAlpha = this.get_opacity();\n        ctx.fill();\n        ctx.restore();\n    },\n\n    //todo move to dashed lines in future\n    _drawDonutGeometry$1: function (renderContext) {\n        var ctx = renderContext.device;\n        ctx.save();\n        ctx.translate(this.get_x(), this.get_y());\n        ctx.scale(1, this.get_height() / this.get_width());\n        ctx.rotate(this.get_rotationAngle() * Overlay.RC);\n        ctx.beginPath();\n        ctx.arc(0, 0, this.get_width() / 2, 0, Math.PI * 2, false);\n        ctx.closePath();\n        ctx.lineWidth = 9;\n        ctx.strokeStyle = this.get_color().toString();\n        ctx.globalAlpha = this.get_opacity();\n        ctx.stroke();\n        ctx.restore();\n    },\n\n    _drawCircleGeometry$1: function (renderContext) {\n        var ctx = renderContext.device;\n        ctx.save();\n        ctx.scale(1, this.get_width() / this.get_height());\n        ctx.translate(this.get_x(), this.get_y());\n        ctx.rotate(this.get_rotationAngle() * Overlay.RC);\n        ctx.beginPath();\n        ctx.arc(0, 0, this.get_width(), 0, Math.PI * 2, false);\n        ctx.closePath();\n        ctx.lineWidth = 0;\n        ctx.fillStyle = this.get_color().toString();\n        ctx.globalAlpha = this.get_opacity();\n        ctx.fill();\n        ctx.restore();\n    },\n\n    cleanUpGeometry: function () {\n        Overlay.prototype.cleanUpGeometry.call(this);\n        this.cleanUp();\n    },\n\n    writeOverlayProperties: function (xmlWriter) {\n        xmlWriter._writeStartElement('Shape');\n        xmlWriter._writeAttributeString('ShapeType', Enums.toXml('ShapeType', this._shapeType$1));\n        xmlWriter._writeEndElement();\n    },\n\n    initializeFromXml: function (node) {\n        var shape = Util.selectSingleNode(node, 'Shape');\n        this._shapeType$1 = Enums.parse('ShapeType', shape.attributes.getNamedItem('ShapeType').nodeValue);\n    }\n};\n\nregisterType(\"ShapeOverlay\", [ShapeOverlay, ShapeOverlay$, Overlay]);\n\n// wwtlib.AudioOverlay\n\nexport function AudioOverlay() {\n    this._audio$1 = null;\n    this._audioReady$1 = false;\n    this._wantPlaying$1 = false;\n    this._volume$1 = 100;\n    this._mute$1 = false;\n    this._position$1 = 0;\n    this._trackType$1 = 0;\n    Overlay.call(this);\n    this.isDesignTimeOnly = true;\n}\n\nAudioOverlay.create = function (currentTourStop, file) {\n    var ao = new AudioOverlay();\n    ao.set_owner(currentTourStop);\n    ao._filename$1 = file.name;\n    ao.get_owner().get_owner().addCachedFile(file.name, file);\n    return ao;\n};\n\nvar AudioOverlay$ = {\n    getTypeName: function () {\n        return 'TerraViewer.AudioOverlay';\n    },\n\n    get_mute: function () {\n        return this._mute$1;\n    },\n\n    set_mute: function (value) {\n        this._mute$1 = value;\n        this.set_volume(this.get_volume());\n        return value;\n    },\n\n    get_volume: function () {\n        return this._volume$1;\n    },\n\n    set_volume: function (value) {\n        this._volume$1 = value;\n        if (this._audio$1 != null) {\n            this._audio$1.volume = (this._mute$1) ? 0 : (this._volume$1 / 100);\n        }\n        return value;\n    },\n\n    addFilesToCabinet: function (fc) {\n        fc.addFile(this.get_owner().get_owner().get_workingDirectory() + this._filename$1, this.get_owner().get_owner().getFileBlob(this._filename$1));\n    },\n\n    play: function () {\n        if (this._audio$1 == null) {\n            this.prepMultimedia();\n        }\n        this._wantPlaying$1 = true;\n        if (this._audio$1 != null && this._audioReady$1) {\n            this._audio$1.play();\n            this.set_volume(this.get_volume());\n            this._audio$1.currentTime = this._position$1;\n        }\n    },\n\n    pause: function () {\n        if (this._audio$1 == null) {\n            this.prepMultimedia();\n        }\n        this._wantPlaying$1 = false;\n        if (this._audio$1 != null && this._audioReady$1) {\n            this._audio$1.pause();\n        }\n    },\n\n    stop: function () {\n        this.pause();  // these operations are identical for audio\n    },\n\n    seek: function (time) {\n        this._position$1 = time;\n        if (this._audio$1 == null) {\n            this.prepMultimedia();\n        }\n        if (this._audioReady$1) {\n            if (this._audio$1.duration < time) {\n                this._audio$1.pause();\n            }\n            else {\n                this._audio$1.currentTime = this._position$1;\n            }\n        }\n    },\n\n    prepMultimedia: function () {\n        var $this = this;\n\n        if (this._audio$1 != null) {\n            return;\n        }\n        this._audio$1 = document.createElement('audio');\n        this._audio$1.addEventListener('canplaythrough', function () {\n            if (!$this._audioReady$1) {\n                $this._audioReady$1 = true;\n                if ($this._wantPlaying$1) {\n                    $this.play();\n                }\n            }\n        }, false);\n\n        // As of December 2020, on Safari, we need to use a <source>\n        // sub-element for the audio to play. If we set src/type on the\n        // parent element the playback breaks. This in turn breaks some\n        // older browsers -- in a world of infinite developer time we'd\n        // choose the behavior based on the browser version.\n        var source = document.createElement('source');\n        this._audio$1.appendChild(source);\n        source.src = this.get_owner().get_owner().getFileStream(this._filename$1);\n        source.type = 'audio/mp3';\n        this._audio$1.load();\n    },\n\n    // TODO: understand better when/how this function is called. It ought to\n    // be called for every frame by the generic Draw3D implementation since\n    // we never set `texture`, I think. But note that the main music and\n    // voice tracks aren't \"rendered\" in this way, so this function doesn't\n    // get called for them, it looks.\n    initializeTexture: function () {\n        this.prepMultimedia();\n    },\n\n    cleanUp: function () {\n        Overlay.prototype.cleanUp.call(this);\n        this._wantPlaying$1 = false;\n        if (this._audio$1 != null) {\n            this._audio$1.pause();\n            this._audio$1.src = null;\n            this._audio$1 = null;\n        }\n    },\n\n    get_trackType: function () {\n        return this._trackType$1;\n    },\n\n    set_trackType: function (value) {\n        this._trackType$1 = value;\n        return value;\n    },\n\n    writeOverlayProperties: function (xmlWriter) {\n        xmlWriter._writeStartElement('Audio');\n        xmlWriter._writeAttributeString('Filename', this._filename$1);\n        xmlWriter._writeAttributeString('Volume', this._volume$1.toString());\n        xmlWriter._writeAttributeString('Mute', this._mute$1.toString());\n        xmlWriter._writeAttributeString('TrackType', Enums.toXml('AudioType', this._trackType$1));\n        xmlWriter._writeEndElement();\n    },\n\n    initializeFromXml: function (node) {\n        var audio = Util.selectSingleNode(node, 'Audio');\n        this._filename$1 = audio.attributes.getNamedItem('Filename').nodeValue;\n        if (audio.attributes.getNamedItem('Volume') != null) {\n            this._volume$1 = parseInt(audio.attributes.getNamedItem('Volume').nodeValue);\n        }\n        if (audio.attributes.getNamedItem('Mute') != null) {\n            this._mute$1 = ss.boolean(audio.attributes.getNamedItem('Mute').nodeValue);\n        }\n        if (audio.attributes.getNamedItem('TrackType') != null) {\n            this._trackType$1 = Enums.parse('AudioType', audio.attributes.getNamedItem('TrackType').nodeValue);\n        }\n    }\n};\n\nregisterType(\"AudioOverlay\", [AudioOverlay, AudioOverlay$, Overlay]);\n\n// wwtlib.FlipbookOverlay\n\nexport function FlipbookOverlay() {\n    this._loopType$1 = 1;\n    this._startFrame$1 = 0;\n    this._framesList$1 = [];\n    this._frames$1 = 1;\n    this._framesX$1 = 8;\n    this._framesY$1 = 8;\n    this._textureReady$1 = false;\n    this._currentFrame$1 = 0;\n    this._cellHeight$1 = 256;\n    this._cellWidth$1 = 256;\n    this._timeStart$1 = ss.now();\n    this._playing$1 = true;\n    Overlay.call(this);\n}\n\nvar FlipbookOverlay$ = {\n    getTypeName: function () {\n        return 'TerraViewer.FlipbookOverlay';\n    },\n\n    get_loopType: function () {\n        return this._loopType$1;\n    },\n\n    set_loopType: function (value) {\n        this._loopType$1 = value;\n        return value;\n    },\n\n    get_startFrame: function () {\n        return this._startFrame$1;\n    },\n\n    set_startFrame: function (value) {\n        this._startFrame$1 = value;\n        return value;\n    },\n\n    get_frameSequence: function () {\n        return this._frameSequence$1;\n    },\n\n    set_frameSequence: function (value) {\n        if (this._frameSequence$1 !== value) {\n            this._frameSequence$1 = value;\n            this._framesList$1 = [];\n            if (!ss.emptyString(this._frameSequence$1)) {\n                try {\n                    var parts = this._frameSequence$1.split(',');\n                    var $enum1 = ss.enumerate(parts);\n                    while ($enum1.moveNext()) {\n                        var part = $enum1.current;\n                        var x = parseInt(ss.trim(part));\n                        this._framesList$1.push(x);\n                    }\n                }\n                catch ($e2) {\n                }\n            }\n        }\n        return value;\n    },\n\n    get_frames: function () {\n        return this._frames$1;\n    },\n\n    set_frames: function (value) {\n        this._frames$1 = value;\n        return value;\n    },\n\n    get_framesX: function () {\n        return this._framesX$1;\n    },\n\n    set_framesX: function (value) {\n        this._framesX$1 = value;\n        return value;\n    },\n\n    get_framesY: function () {\n        return this._framesY$1;\n    },\n\n    set_framesY: function (value) {\n        this._framesY$1 = value;\n        return value;\n    },\n\n    copy: function (owner) {\n        var newFlipbookOverlay = new FlipbookOverlay();\n        newFlipbookOverlay.set_owner(owner);\n        newFlipbookOverlay._filename$1 = this._filename$1;\n        newFlipbookOverlay.set_x(this.get_x());\n        newFlipbookOverlay.set_y(this.get_y());\n        newFlipbookOverlay.set_width(this.get_width());\n        newFlipbookOverlay.set_height(this.get_height());\n        newFlipbookOverlay.set_color(this.get_color());\n        newFlipbookOverlay.set_opacity(this.get_opacity());\n        newFlipbookOverlay.set_rotationAngle(this.get_rotationAngle());\n        newFlipbookOverlay.set_name(this.get_name() + ' - Copy');\n        newFlipbookOverlay.set_startFrame(this.get_startFrame());\n        newFlipbookOverlay.set_frames(this.get_frames());\n        newFlipbookOverlay.set_loopType(this.get_loopType());\n        newFlipbookOverlay.set_frameSequence(this.get_frameSequence());\n        newFlipbookOverlay.set_framesX(this.get_framesX());\n        newFlipbookOverlay.set_framesY(this.get_framesY());\n        return newFlipbookOverlay;\n    },\n\n    cleanUp: function () {\n        this.texture = null;\n    },\n\n    initializeTexture: function () {\n        var $this = this;\n\n        try {\n            var colorKey = ss.endsWith(this._filename$1.toLowerCase(), '.jpg');\n            this.texture = this.get_owner().get_owner().getCachedTexture(this._filename$1, function () {\n                $this._textureReady$1 = true;\n            });\n        }\n        catch ($e1) {\n        }\n    },\n\n    addFilesToCabinet: function (fc) {\n        fc.addFile(this.get_owner().get_owner().get_workingDirectory() + this._filename$1, this.get_owner().get_owner().getFileBlob(this._filename$1));\n    },\n\n    writeOverlayProperties: function (xmlWriter) {\n        xmlWriter._writeStartElement('Flipbook');\n        xmlWriter._writeAttributeString('Filename', this._filename$1);\n        xmlWriter._writeAttributeString('Frames', this._frames$1.toString());\n        xmlWriter._writeAttributeString('Loop', Enums.toXml('LoopTypes', this._loopType$1));\n        xmlWriter._writeAttributeString('FramesX', this._framesX$1.toString());\n        xmlWriter._writeAttributeString('FramesY', this._framesY$1.toString());\n        xmlWriter._writeAttributeString('StartFrame', this._startFrame$1.toString());\n        if (!ss.emptyString(this._frameSequence$1)) {\n            xmlWriter._writeAttributeString('FrameSequence', this._frameSequence$1);\n        }\n        xmlWriter._writeEndElement();\n    },\n\n    initializeFromXml: function (node) {\n        var flipbook = Util.selectSingleNode(node, 'Flipbook');\n        this._filename$1 = flipbook.attributes.getNamedItem('Filename').nodeValue;\n        this._frames$1 = parseInt(flipbook.attributes.getNamedItem('Frames').nodeValue);\n        this._loopType$1 = Enums.parse('LoopTypes', flipbook.attributes.getNamedItem('Loop').nodeValue);\n        if (flipbook.attributes.getNamedItem('FramesX') != null) {\n            this.set_framesX(parseInt(flipbook.attributes.getNamedItem('FramesX').nodeValue));\n        }\n        if (flipbook.attributes.getNamedItem('FramesY') != null) {\n            this.set_framesY(parseInt(flipbook.attributes.getNamedItem('FramesY').nodeValue));\n        }\n        if (flipbook.attributes.getNamedItem('StartFrame') != null) {\n            this.set_startFrame(parseInt(flipbook.attributes.getNamedItem('StartFrame').nodeValue));\n        }\n        if (flipbook.attributes.getNamedItem('FrameSequence') != null) {\n            this.set_frameSequence(flipbook.attributes.getNamedItem('FrameSequence').nodeValue);\n        }\n    },\n\n    play: function () {\n        this._playing$1 = true;\n        this._timeStart$1 = ss.now();\n    },\n\n    pause: function () {\n        this._playing$1 = false;\n    },\n\n    stop: function () {\n        this._playing$1 = false;\n        this._currentFrame$1 = 0;\n    },\n\n    initializeGeometry: function () {\n        var frameCount = this._frames$1;\n        if (!ss.emptyString(this._frameSequence$1)) {\n            frameCount = this._framesList$1.length;\n        }\n        if (this._playing$1) {\n            var ts = ss.now() - this._timeStart$1;\n            switch (this._loopType$1) {\n                case 0:\n                    this._currentFrame$1 = ss.truncate(((ts / 1000 * 24) % frameCount)) + this._startFrame$1;\n                    break;\n                case 1:\n                    this._currentFrame$1 = Math.abs(ss.truncate(((ts / 1000 * 24 + frameCount) % (frameCount * 2 - 1))) - (frameCount - 1)) + this._startFrame$1;\n                    if (this._currentFrame$1 < 0 || this._currentFrame$1 > frameCount - 1) {\n                        var p = 0;\n                    }\n                    break;\n                case 2:\n                    this._currentFrame$1 = Math.max(0, frameCount - ss.truncate(((ts / 1000 * 24) % frameCount))) + this._startFrame$1;\n                    break;\n                case 3:\n                    var temp = Math.min(ts / 1000 * 24, frameCount * 2 + 1) + frameCount;\n                    this._currentFrame$1 = Math.abs((temp % (frameCount * 2 - 1)) - (frameCount - 1)) + this._startFrame$1;\n                    break;\n                case 4:\n                    this._currentFrame$1 = Math.min(frameCount - 1, ss.truncate((ts / 1000 * 24)));\n                    break;\n                case 5:\n                    this._currentFrame$1 = this._startFrame$1;\n                    break;\n                case 6:\n                    this._currentFrame$1 = (frameCount - 1) + this._startFrame$1;\n                    break;\n                default:\n                    this._currentFrame$1 = this._startFrame$1;\n                    break;\n            }\n        }\n        if (!ss.emptyString(this._frameSequence$1)) {\n            if (this._currentFrame$1 < this._framesList$1.length && this._currentFrame$1 > -1) {\n                this._currentFrame$1 = this._framesList$1[this._currentFrame$1];\n            }\n            else {\n                this._currentFrame$1 = 0;\n            }\n        }\n        this.currentRotation = 0;\n    }\n};\n\nregisterType(\"FlipbookOverlay\", [FlipbookOverlay, FlipbookOverlay$, Overlay]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// An interactive selection for the tour editor.\n\nimport { ss } from \"../ss.js\";\nimport { registerType, registerEnum } from \"../typesystem.js\";\nimport { Vector2d, Matrix2d, PositionColoredTextured } from \"../double3d.js\";\nimport { Sprite2d } from \"../graphics/sprite2d.js\";\nimport { Texture } from \"../graphics/texture.js\";\nimport { Colors } from \"../color.js\";\nimport { Rectangle } from \"../util.js\";\n\n\n// wwtlib.SelectionAnchor\n\nexport var SelectionAnchor = {\n    topLeft: 0,\n    top: 1,\n    topRight: 2,\n    right: 3,\n    bottomRight: 4,\n    bottom: 5,\n    bottomLeft: 6,\n    left: 7,\n    rotate: 8,\n    move: 9,\n    center: 10,\n    none: 11\n};\n\nregisterType(\"SelectionAnchor\", SelectionAnchor);\nregisterEnum(\"SelectionAnchor\", SelectionAnchor);\n\n\n// wwtlib.Selection\n//\n// Note: this type is a bit dangerous because there is a built-in browser type\n// of the same name. So if you forget to import this type into your module, your\n// code will likely get the other one instead. As usual, we're reluctant to\n// rename it because that would break API compatibility.\n\nexport function Selection() {\n    this._singleSelectHandles = null;\n    this._multiSelectHandles = null;\n    this._focusHandles = null;\n    this.selectionSet = [];\n    this._focus = null;\n    this._ratio = 1;\n    this._sprite = new Sprite2d();\n    this._centerX = 0;\n    this._centerY = 0;\n}\n\nSelection._points = new Array(9 * 3 * 2);\n\nvar Selection$ = {\n    clearSelection: function () {\n        this.selectionSet.length = 0;\n    },\n\n    addSelection: function (overlay) {\n        if (overlay != null) {\n            if (!(this.selectionSet.indexOf(overlay) >= 0)) {\n                this.selectionSet.push(overlay);\n            }\n        }\n    },\n\n    addSelectionRange: function (overlays) {\n        var $enum1 = ss.enumerate(overlays);\n        while ($enum1.moveNext()) {\n            var ov = $enum1.current;\n            this.selectionSet.push(ov);\n        }\n    },\n\n    isOverlaySelected: function (overlay) {\n        return (this.selectionSet.indexOf(overlay) >= 0);\n    },\n\n    setSelection: function (overlay) {\n        this.selectionSet.length = 0;\n        if (overlay != null) {\n            this.selectionSet.push(overlay);\n        }\n    },\n\n    get_multiSelect: function () {\n        return this.selectionSet.length > 1;\n    },\n\n    setSelectionRange: function (overlays) {\n        this.selectionSet.length = 0;\n        var $enum1 = ss.enumerate(overlays);\n        while ($enum1.moveNext()) {\n            var ov = $enum1.current;\n            this.selectionSet.push(ov);\n        }\n    },\n\n    get_focus: function () {\n        return this._focus;\n    },\n\n    set_focus: function (value) {\n        this._focus = value;\n        return value;\n    },\n\n    draw3D: function (renderContext, transparancy) {\n        this._ratio = 1116 / renderContext.height;\n        if (this._singleSelectHandles == null) {\n            this._singleSelectHandles = Texture.fromUrl('images/Selhand.bmp');\n        }\n        if (this._multiSelectHandles == null) {\n            this._multiSelectHandles = Texture.fromUrl('images/multiSelhand.bmp');\n        }\n        if (this._focusHandles == null) {\n            this._focusHandles = Texture.fromUrl('images/FocusHandles.png');\n        }\n        if (this.selectionSet.length > 1) {\n            var $enum1 = ss.enumerate(this.selectionSet);\n            while ($enum1.moveNext()) {\n                var overlay = $enum1.current;\n                if (overlay === this._focus) {\n                    this._drawSelectionHandles(renderContext, overlay, this._focusHandles);\n                }\n                else {\n                    this._drawSelectionHandles(renderContext, overlay, this._multiSelectHandles);\n                }\n            }\n        } else {\n            var $enum2 = ss.enumerate(this.selectionSet);\n            while ($enum2.moveNext()) {\n                var overlay = $enum2.current;\n                this._drawSelectionHandles(renderContext, overlay, this._singleSelectHandles);\n            }\n        }\n    },\n\n    _drawSelectionHandles: function (renderContext, overlay, handleTexture) {\n        var handles = this.makeHandles(overlay);\n        var angle = overlay.get_rotationAngle();\n        var i = 0;\n        var j = 0;\n        var $enum1 = ss.enumerate(handles);\n        while ($enum1.moveNext()) {\n            var handle = $enum1.current;\n            Selection._points[i + 0] = new PositionColoredTextured();\n            Selection._points[i + 0].position = overlay.makePosition(this._centerX, this._centerY, handle.get_left() - this._centerX, handle.get_top() - this._centerY, angle);\n            Selection._points[i + 0].tu = j * (1 / 9);\n            Selection._points[i + 0].tv = 0;\n            Selection._points[i + 0].color = Colors.get_white();\n            Selection._points[i + 1] = new PositionColoredTextured();\n            Selection._points[i + 1].position = overlay.makePosition(this._centerX, this._centerY, handle.get_right() - this._centerX, handle.get_top() - this._centerY, angle);\n            Selection._points[i + 1].tu = (j + 1) * (1 / 9);\n            Selection._points[i + 1].tv = 0;\n            Selection._points[i + 1].color = Colors.get_white();\n            Selection._points[i + 2] = new PositionColoredTextured();\n            Selection._points[i + 2].position = overlay.makePosition(this._centerX, this._centerY, handle.get_left() - this._centerX, handle.get_bottom() - this._centerY, angle);\n            Selection._points[i + 2].tu = j * (1 / 9);\n            Selection._points[i + 2].tv = 1;\n            Selection._points[i + 2].color = Colors.get_white();\n            Selection._points[i + 3] = new PositionColoredTextured();\n            Selection._points[i + 3].position = overlay.makePosition(this._centerX, this._centerY, handle.get_right() - this._centerX, handle.get_top() - this._centerY, angle);\n            Selection._points[i + 3].tu = (j + 1) * (1 / 9);\n            Selection._points[i + 3].tv = 0;\n            Selection._points[i + 3].color = Colors.get_white();\n            Selection._points[i + 4] = new PositionColoredTextured();\n            Selection._points[i + 4].position = overlay.makePosition(this._centerX, this._centerY, handle.get_right() - this._centerX, handle.get_bottom() - this._centerY, angle);\n            Selection._points[i + 4].tu = (j + 1) * (1 / 9);\n            Selection._points[i + 4].tv = 1;\n            Selection._points[i + 4].color = Colors.get_white();\n            Selection._points[i + 5] = new PositionColoredTextured();\n            Selection._points[i + 5].position = overlay.makePosition(this._centerX, this._centerY, handle.get_left() - this._centerX, handle.get_bottom() - this._centerY, angle);\n            Selection._points[i + 5].tu = j * (1 / 9);\n            Selection._points[i + 5].tv = 1;\n            Selection._points[i + 5].color = Colors.get_white();\n            i += 6;\n            j++;\n        }\n        if (this.get_multiSelect()) {\n            this._sprite.draw(renderContext, Selection._points, Selection._points.length - 6, handleTexture, false, 1);\n        } else {\n            this._sprite.draw(renderContext, Selection._points, Selection._points.length, handleTexture, false, 1);\n        }\n    },\n\n    pointToSelectionSpace: function (pntIn) {\n        var tempPoints = new Array(1);\n        tempPoints[0] = Vector2d.create(pntIn.x, pntIn.y);\n        var mat = Matrix2d.rotateAt(-this.selectionSet[0].get_rotationAngle() / 180 * Math.PI, Vector2d.create(this.selectionSet[0].get_x(), this.selectionSet[0].get_y()));\n        mat._transformPoints(tempPoints);\n        return tempPoints[0];\n    },\n\n    pointToScreenSpace: function (pntIn) {\n        var tempPoints = new Array(1);\n        tempPoints[0] = Vector2d.create(pntIn.x, pntIn.y);\n        var mat = Matrix2d.rotateAt(this.selectionSet[0].get_rotationAngle() / 180 * Math.PI, Vector2d.create(this.selectionSet[0].get_x(), this.selectionSet[0].get_y()));\n        mat._transformPoints(tempPoints);\n        return tempPoints[0];\n    },\n\n    hitTest: function (position) {\n        if (this.selectionSet.length === 1) {\n            var $enum1 = ss.enumerate(this.selectionSet);\n            while ($enum1.moveNext()) {\n                var overlay = $enum1.current;\n                var handles = this.makeHandles(overlay);\n                var index = 0;\n                var testPoint = this.pointToSelectionSpace(position);\n                var $enum2 = ss.enumerate(handles);\n                while ($enum2.moveNext()) {\n                    var rectf = $enum2.current;\n                    if (rectf.contains(testPoint)) {\n                        return index;\n                    }\n                    index++;\n                }\n            }\n        }\n        return 11;\n    },\n\n    makeHandles: function (overlay) {\n        var x = ss.truncate((overlay.get_x() - (overlay.get_width() / 2))) + 0.5;\n        var y = (ss.truncate(overlay.get_y()) - (overlay.get_height() / 2)) + 0.5;\n        this._centerX = overlay.get_x();\n        this._centerY = overlay.get_y();\n        var width = overlay.get_width();\n        var height = overlay.get_height();\n        var handleSize = 12 * this._ratio;\n        var handles = new Array(9);\n        handles[0] = Rectangle.create(x - handleSize, y - handleSize, handleSize, handleSize);\n        handles[1] = Rectangle.create((x + (width / 2)) - (handleSize / 2), y - handleSize, handleSize, handleSize);\n        handles[2] = Rectangle.create(x + width, y - handleSize, handleSize, handleSize);\n        handles[3] = Rectangle.create(x + width, (y + (height / 2)) - (handleSize / 2), handleSize, handleSize);\n        handles[4] = Rectangle.create(x + width, (y + height), handleSize, handleSize);\n        handles[5] = Rectangle.create((x + (width / 2)) - (handleSize / 2), (y + height), handleSize, handleSize);\n        handles[6] = Rectangle.create(x - handleSize, (y + height), handleSize, handleSize);\n        handles[7] = Rectangle.create(x - handleSize, (y + (height / 2)) - (handleSize / 2), handleSize, handleSize);\n        handles[8] = Rectangle.create((x + (width / 2)) - (handleSize / 2), y - 30 * this._ratio, handleSize, handleSize);\n        return handles;\n    }\n};\n\nregisterType(\"Selection\", [Selection, Selection$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A basic text data object.\n\nimport { registerType, registerEnum, Enums } from \"../typesystem.js\";\nimport { ss } from \"../ss.js\";\nimport { Util } from \"../baseutil.js\";\nimport { Color } from \"../color.js\";\n\n\n\n// wwtlib.TextBorderStyle\n\nexport var TextBorderStyle = {\n    none: 0,\n    tight: 1,\n    small: 2,\n    medium: 3,\n    large: 4\n};\n\nregisterType(\"TextBorderStyle\", TextBorderStyle);\nregisterEnum(\"TextBorderStyle\", TextBorderStyle);\n\n\n// wwtlib.TextObject\n\nexport function TextObject() {\n    this.bold = false;\n    this.italic = false;\n    this.underline = false;\n    this.fontSize = 0;\n    this.borderStyle = 0;\n}\n\nTextObject.create = function (text, bold, italic, underline, fontSize, fontName, forgroundColor, backgroundColor, borderStyle) {\n    var temp = new TextObject();\n    temp.text = text;\n    temp.bold = bold;\n    temp.italic = italic;\n    temp.underline = underline;\n    temp.fontSize = fontSize;\n    temp.fontName = fontName;\n    temp.foregroundColor = forgroundColor;\n    temp.backgroundColor = backgroundColor;\n    temp.borderStyle = borderStyle;\n    return temp;\n};\n\nTextObject._fromXml = function (node) {\n    var newTextObject = new TextObject();\n    newTextObject.text = Util.getInnerText(node);\n    newTextObject.borderStyle = 0;\n    newTextObject.bold = ss.boolean(node.attributes.getNamedItem('Bold').nodeValue);\n    newTextObject.italic = ss.boolean(node.attributes.getNamedItem('Italic').nodeValue);\n    newTextObject.underline = ss.boolean(node.attributes.getNamedItem('Underline').nodeValue);\n    newTextObject.fontSize = parseFloat(node.attributes.getNamedItem('FontSize').nodeValue);\n    newTextObject.fontName = node.attributes.getNamedItem('FontName').nodeValue;\n    newTextObject.foregroundColor = Color.load(node.attributes.getNamedItem('ForgroundColor').nodeValue);\n    newTextObject.backgroundColor = Color.load(node.attributes.getNamedItem('BackgroundColor').nodeValue);\n    if (node.attributes.getNamedItem('BorderStyle') != null) {\n        newTextObject.borderStyle = Enums.parse('TextBorderStyle', node.attributes.getNamedItem('BorderStyle').nodeValue);\n    }\n    return newTextObject;\n};\n\nvar TextObject$ = {\n    toString: function () {\n        return this.text;\n    },\n\n    _saveToXml: function (xmlWriter) {\n        xmlWriter._writeStartElement('TextObject');\n        xmlWriter._writeAttributeString('Bold', this.bold.toString());\n        xmlWriter._writeAttributeString('Italic', this.italic.toString());\n        xmlWriter._writeAttributeString('Underline', this.underline.toString());\n        xmlWriter._writeAttributeString('FontSize', this.fontSize.toString());\n        xmlWriter._writeAttributeString('FontName', this.fontName);\n        xmlWriter._writeAttributeString('ForgroundColor', this.foregroundColor.save());\n        xmlWriter._writeAttributeString('BackgroundColor', this.backgroundColor.save());\n        xmlWriter._writeAttributeString('BorderStyle', Enums.toXml('TextBorderStyle', this.borderStyle));\n        xmlWriter._writeString(this.text);\n        xmlWriter._writeEndElement();\n    }\n};\n\nregisterType(\"TextObject\", [TextObject, TextObject$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A WWT Tour document.\n\nimport { ss } from \"../ss.js\";\nimport { registerType, registerEnum, Enums } from \"../typesystem.js\";\nimport {\n    globalScriptInterface,\n    globalWWTControl,\n    layerManagerGetAllMaps,\n    set_tourDocumentFromUrlRaw,\n} from \"../data_globals.js\";\nimport { globalRenderContext } from \"../render_globals.js\";\nimport { Util } from \"../baseutil.js\";\nimport { Texture } from \"../graphics/texture.js\";\nimport { Guid } from \"../util.js\";\nimport { XmlTextWriter } from \"../utilities/xml_text_writer.js\";\nimport { ImageSetType, ProjectionType } from \"../imageset.js\";\nimport { ViewMoverSlew } from \"../view_mover.js\";\nimport { ReferenceFrame } from \"../layers/reference_frame.js\";\nimport { FileCabinet } from \"./file_cabinet.js\";\nimport { TourStop } from \"./tour_stop.js\";\nimport { MasterTime } from \"./tour_player.js\";\nimport { Layer } from \"../layers/layer.js\";\nimport { ImageSetLayer } from \"../layers/imageset_layer.js\";\nimport { LayerManager, LayerMap } from \"../layers/layer_manager.js\";\n\n\n// wwtlib.UserLevel\n\nexport var UserLevel = {\n    beginner: 0,\n    intermediate: 1,\n    advanced: 2,\n    educator: 3,\n    professional: 4\n};\n\nregisterType(\"UserLevel\", UserLevel);\nregisterEnum(\"UserLevel\", UserLevel);\n\n\n// wwtlib.TourDocument\n\nexport function TourDocument() {\n    this._tourDirty = 0;\n    this._workingDirectory = '';\n    this.url = '';\n    this._tagId = '';\n    this._representativeThumbnailTourstop = 0;\n    this._id = '';\n    this._title = '';\n    this._runTime = 0;\n    this._lastDirtyCheck = 0;\n    this._description = '';\n    this._attributesAndCredits = '';\n    this._authorEmailOther = '';\n    this._authorEmail = '';\n    this._authorUrl = '';\n    this._authorPhone = '';\n    this._authorContactText = '';\n    this._orgName = 'None';\n    this._orgUrl = '';\n    this._author = '';\n    this._authorImageUrl = '';\n    this._authorImage = null;\n    this._organizationUrl = '';\n    this._filename = '';\n    this._level = 0;\n    this._type = 268435456;\n    this._taxonomy = '';\n    this._keywords = '';\n    this._objects = '';\n    this._editMode = false;\n    this.explicitTourLinks = [];\n    this.implicitTourLinks = [];\n    this._tourStops = [];\n    this._currentTourstopIndex = -1;\n    this._textureList = {};\n    this._textureList2d = {};\n\n    // This handles new files added while editing a tour\n    this._fileCache = {};\n    this.dontCleanUpTempFiles = false;\n    this._id = Guid.newGuid().toString();\n}\n\nTourDocument.get_baseWorkingDirectory = function () {\n    return '';\n};\n\nTourDocument.fromUrl = function (url, callMe) {\n    var temp = new TourDocument();\n    temp.url = url;\n    temp._callMe = callMe;\n    temp._cabinet = FileCabinet.fromUrl(url, ss.bind('_loadXmlDocument', temp));\n    return temp;\n};\n\nTourDocument.fromUrlRaw = function (url, callMe) {\n    var temp = new TourDocument();\n    temp.url = url;\n    temp._callMe = callMe;\n    temp._cabinet = FileCabinet.fromUrl(url, callMe);\n    return temp;\n};\n\nset_tourDocumentFromUrlRaw(TourDocument.fromUrlRaw);\n\nvar TourDocument$ = {\n    get_tourDirty: function () {\n        return this._tourDirty > 0;\n    },\n\n    set_tourDirty: function (value) {\n        if (value) {\n            this._tourDirty++;\n        } else {\n            this._tourDirty = 0;\n        }\n        return value;\n    },\n\n    get_workingDirectory: function () {\n        if (ss.emptyString(this._workingDirectory)) {\n            this._workingDirectory = TourDocument.get_baseWorkingDirectory() + this._id + '\\\\';\n        }\n        return this._workingDirectory;\n    },\n\n    set_workingDirectory: function (value) {\n        this._workingDirectory = value;\n        return value;\n    },\n\n    _loadXmlDocument: function () {\n        var $this = this;\n\n        try {\n            var master = this._cabinet.get_masterFile();\n            var doc = new FileReader();\n            doc.onloadend = function (ee) {\n                var data = ss.safeCast(doc.result, String);\n                var xParser = new DOMParser();\n                $this.fromXml(xParser.parseFromString(data, 'text/xml'));\n                $this._callMe();\n            };\n            doc.readAsText(this._cabinet.getFileBlob(master));\n        }\n        catch (ex) {\n            globalScriptInterface._fireTourError(ex);\n        }\n    },\n\n    fromXml: function (doc) {\n        var root = Util.selectSingleNode(doc, 'Tour');\n        this._id = root.attributes.getNamedItem('ID').nodeValue;\n        this.set_title(root.attributes.getNamedItem('Title').nodeValue);\n        this.set_author(root.attributes.getNamedItem('Author').nodeValue);\n        if (root.attributes.getNamedItem('Descirption') != null) {\n            this.set_description(root.attributes.getNamedItem('Descirption').nodeValue);\n        }\n        if (root.attributes.getNamedItem('AuthorEmail') != null) {\n            this._authorEmail = root.attributes.getNamedItem('AuthorEmail').nodeValue;\n        }\n        if (root.attributes.getNamedItem('Keywords') != null) {\n            this.set_keywords(root.attributes.getNamedItem('Keywords').nodeValue);\n        }\n        if (root.attributes.getNamedItem('OrganizationName') != null) {\n            this.set_orgName(root.attributes.getNamedItem('OrganizationName').nodeValue);\n        }\n        this._organizationUrl = root.attributes.getNamedItem('OrganizationUrl').nodeValue;\n        this._level = Enums.parse('UserLevel', root.attributes.getNamedItem('UserLevel').nodeValue);\n        this._type = Enums.parse('Classification', root.attributes.getNamedItem('Classification').nodeValue);\n        this._taxonomy = root.attributes.getNamedItem('Taxonomy').nodeValue;\n        var TourStops = Util.selectSingleNode(root, 'TourStops');\n        var $enum1 = ss.enumerate(TourStops.childNodes);\n        while ($enum1.moveNext()) {\n            var tourStop = $enum1.current;\n            if (tourStop.nodeName === 'TourStop') {\n                this.addTourStop(TourStop._fromXml(this, tourStop));\n            }\n        }\n        var Frames = Util.selectSingleNode(root, 'ReferenceFrames');\n        if (Frames != null) {\n            var $enum2 = ss.enumerate(Frames.childNodes);\n            while ($enum2.moveNext()) {\n                var frame = $enum2.current;\n                if (frame.nodeName === 'ReferenceFrame') {\n                    var newFrame = new ReferenceFrame();\n                    newFrame.initializeFromXml(frame);\n                    if (!ss.keyExists(layerManagerGetAllMaps(), newFrame.name)) {\n                        var map = new LayerMap(newFrame.name, 18);\n                        map.frame = newFrame;\n                        map.loadedFromTour = true;\n                        layerManagerGetAllMaps()[newFrame.name] = map;\n                    }\n                }\n            }\n            LayerManager.connectAllChildren();\n            LayerManager.loadTree();\n        }\n        var Layers = Util.selectSingleNode(root, 'Layers');\n        if (Layers != null) {\n            var $enum3 = ss.enumerate(Layers.childNodes);\n            while ($enum3.moveNext()) {\n                var layer = $enum3.current;\n                if (layer.nodeName === 'Layer') {\n                    var newLayer = Layer.fromXml(layer, true);\n                    if (newLayer != null) {\n                        if (ss.canCast(newLayer, ImageSetLayer)) {\n                            var imageSetLayer = newLayer;\n                            var imageset = imageSetLayer.get_imageSet();\n                            if (imageset.get_projection() === ProjectionType.healpix && imageset.get_extension() === '.tsv') {\n                                globalWWTControl.addCatalogHips(imageset);\n                                continue;\n                            }\n                        }\n                        var fileName = ss.format('{0}.txt', newLayer.id.toString());\n                        if (ss.keyExists(LayerManager.get_layerList(), newLayer.id)) {\n                            LayerManager.deleteLayerByID(newLayer.id, true, false);\n                        }\n                        try {\n                            newLayer.loadedFromTour = true;\n                            newLayer.loadData(this, fileName);\n                            LayerManager.add(newLayer, false);\n                        }\n                        catch ($e4) {\n                        }\n                    }\n                }\n            }\n            LayerManager.loadTree();\n        }\n        this._tourDirty = 0;\n    },\n\n    saveToDataUrl: function () {\n        return URL.createObjectURL(this.saveToBlob());\n    },\n\n    saveToBlob: function () {\n        var excludeAudio = false;\n        this.cleanUp();\n        var tourXml = this.getTourXML();\n        var fc = new FileCabinet();\n        fc.set_packageID(this.get_id());\n        fc.addFile('Tour.wwtxml', new Blob([tourXml]));\n        if (this._authorImage != null) {\n        }\n        var $enum1 = ss.enumerate(this.get_tourStops());\n        while ($enum1.moveNext()) {\n            var stop = $enum1.current;\n            stop._addFilesToCabinet(fc, excludeAudio);\n        }\n        var masterList = this._createLayerMasterList();\n        var $enum2 = ss.enumerate(masterList);\n        while ($enum2.moveNext()) {\n            var id = $enum2.current;\n            if (ss.keyExists(LayerManager.get_layerList(), id)) {\n                LayerManager.get_layerList()[id].addFilesToCabinet(fc);\n            }\n        }\n        this.set_tourDirty(false);\n        return fc.packageFiles();\n    },\n\n    getTourXML: function () {\n        var xmlWriter = new XmlTextWriter();\n        xmlWriter.formatting = 1;\n        xmlWriter._writeProcessingInstruction('xml', \"version='1.0' encoding='UTF-8'\");\n        xmlWriter._writeStartElement('Tour');\n        xmlWriter._writeAttributeString('ID', this._id);\n        xmlWriter._writeAttributeString('Title', this._title);\n        xmlWriter._writeAttributeString('Descirption', this.get_description());\n        xmlWriter._writeAttributeString('Description', this.get_description());\n        xmlWriter._writeAttributeString('RunTime', (this.get_runTime() / 1000).toString());\n        xmlWriter._writeAttributeString('Author', this._author);\n        xmlWriter._writeAttributeString('AuthorEmail', this._authorEmail);\n        xmlWriter._writeAttributeString('OrganizationUrl', this._organizationUrl);\n        xmlWriter._writeAttributeString('OrganizationName', this.get_orgName());\n        xmlWriter._writeAttributeString('Keywords', this.get_keywords());\n        xmlWriter._writeAttributeString('UserLevel', Enums.toXml('UserLevel', this._level));\n        xmlWriter._writeAttributeString('Classification', Enums.toXml('Classification', this._type));\n        xmlWriter._writeAttributeString('Taxonomy', this._taxonomy);\n        var timeLineTour = this._isTimelineTour();\n        xmlWriter._writeAttributeString('TimeLineTour', timeLineTour.toString());\n        xmlWriter._writeStartElement('TourStops');\n        var $enum1 = ss.enumerate(this.get_tourStops());\n        while ($enum1.moveNext()) {\n            var stop = $enum1.current;\n            stop._saveToXml(xmlWriter, true);\n        }\n        xmlWriter._writeEndElement();\n        var masterList = this._createLayerMasterList();\n\n        // This will now save and sync emtpy frames...\n        var referencedFrames = this._getReferenceFrameList();\n        xmlWriter._writeStartElement('ReferenceFrames');\n        var $enum2 = ss.enumerate(referencedFrames);\n        while ($enum2.moveNext()) {\n            var item = $enum2.current;\n            item.saveToXml(xmlWriter);\n        }\n        xmlWriter._writeEndElement();\n        xmlWriter._writeStartElement('Layers');\n        var $enum3 = ss.enumerate(masterList);\n        while ($enum3.moveNext()) {\n            var id = $enum3.current;\n            if (ss.keyExists(LayerManager.get_layerList(), id)) {\n                var layer = LayerManager.get_layerList()[id];\n                var name = layer.get_name();\n                var imageset = globalRenderContext.getCatalogHipsByName(name);\n                if (imageset != null) {\n                    var imageSetLayer = ImageSetLayer.create(imageset);\n                    imageSetLayer.id = id;\n                    imageSetLayer.set_name(name);\n                    imageSetLayer.set_referenceFrame('Sky');\n                    imageSetLayer.saveToXml(xmlWriter);\n                }\n                else {\n                    LayerManager.get_layerList()[id].saveToXml(xmlWriter);\n                }\n            }\n        }\n        xmlWriter._writeEndElement();\n        xmlWriter._writeFullEndElement();\n        xmlWriter._close();\n        return xmlWriter.body;\n    },\n\n    _getReferenceFrameList: function () {\n        var list = [];\n        var $enum1 = ss.enumerate(ss.keys(layerManagerGetAllMaps()));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var lm = layerManagerGetAllMaps()[key];\n            if ((lm.frame.reference === 18 || lm.frame.reference === 19) && !(list.indexOf(lm.frame) >= 0) && !lm.frame._systemGenerated) {\n                list.push(lm.frame);\n            }\n        }\n        return list;\n    },\n\n    _createLayerMasterList: function () {\n        var masterList = [];\n        var $enum1 = ss.enumerate(this.get_tourStops());\n        while ($enum1.moveNext()) {\n            var stop = $enum1.current;\n            var $enum2 = ss.enumerate(ss.keys(stop.layers));\n            while ($enum2.moveNext()) {\n                var id = $enum2.current;\n                if (!(masterList.indexOf(id) >= 0)) {\n                    if (ss.keyExists(LayerManager.get_layerList(), id)) {\n                        masterList.push(id);\n                    }\n                }\n            }\n        }\n        return masterList;\n    },\n\n    _isTimelineTour: function () {\n        return false;\n    },\n\n    get_tagId: function () {\n        return this._tagId;\n    },\n\n    set_tagId: function (value) {\n        this._tagId = value;\n        return value;\n    },\n\n    get_authorThumbnailFilename: function () {\n        return 'Author.Png';\n    },\n\n    get_tourThumbnailFilename: function () {\n        if (this._representativeThumbnailTourstop < this._tourStops.length) {\n            return this._tourStops[this._representativeThumbnailTourstop].get_tourStopThumbnailFilename();\n        } else {\n            return null;\n        }\n    },\n\n    get_id: function () {\n        return this._id;\n    },\n\n    set_id: function (value) {\n        this._id = value;\n        return value;\n    },\n\n    get_title: function () {\n        return this._title;\n    },\n\n    set_title: function (value) {\n        this._title = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_runTime: function () {\n        if (!this._runTime || this._lastDirtyCheck !== this._tourDirty) {\n            this._runTime = this._calculateRunTime();\n            this._lastDirtyCheck = this._tourDirty;\n        }\n        return this._runTime;\n    },\n\n    get_description: function () {\n        return this._description;\n    },\n\n    set_description: function (value) {\n        this._description = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_attributesAndCredits: function () {\n        return this._attributesAndCredits;\n    },\n\n    set_attributesAndCredits: function (value) {\n        this._attributesAndCredits = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_authorEmailOther: function () {\n        return this._authorEmailOther;\n    },\n\n    set_authorEmailOther: function (value) {\n        this._authorEmailOther = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_authorEmail: function () {\n        return this._authorEmail;\n    },\n\n    set_authorEmail: function (value) {\n        this._authorEmail = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_authorUrl: function () {\n        return this._authorUrl;\n    },\n\n    set_authorUrl: function (value) {\n        this._authorUrl = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_authorPhone: function () {\n        return this._authorPhone;\n    },\n\n    set_authorPhone: function (value) {\n        this._authorPhone = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_authorContactText: function () {\n        return this._authorContactText;\n    },\n\n    set_authorContactText: function (value) {\n        this._authorContactText = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_orgName: function () {\n        return this._orgName;\n    },\n\n    set_orgName: function (value) {\n        this._orgName = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_orgUrl: function () {\n        return this._orgUrl;\n    },\n\n    set_orgUrl: function (value) {\n        this._orgUrl = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_author: function () {\n        return this._author;\n    },\n\n    set_author: function (value) {\n        this._author = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_authorImageUrl: function () {\n        return this._authorImageUrl;\n    },\n\n    set_authorImageUrl: function (value) {\n        this._authorImageUrl = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_authorImage: function () {\n        return this._authorImage;\n    },\n\n    set_authorImage: function (value) {\n        this._authorImage = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_organizationUrl: function () {\n        return this._organizationUrl;\n    },\n\n    set_organizationUrl: function (value) {\n        this._organizationUrl = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_fileName: function () {\n        return this._filename;\n    },\n\n    set_fileName: function (value) {\n        this._filename = value;\n        return value;\n    },\n\n    get_level: function () {\n        return this._level;\n    },\n\n    set_level: function (value) {\n        this._level = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_type: function () {\n        return this._type;\n    },\n\n    set_type: function (value) {\n        this._type = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_taxonomy: function () {\n        return this._taxonomy;\n    },\n\n    set_taxonomy: function (value) {\n        this._taxonomy = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_keywords: function () {\n        return this._keywords;\n    },\n\n    set_keywords: function (value) {\n        this._keywords = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_objects: function () {\n        return this._objects;\n    },\n\n    set_objects: function (value) {\n        this._objects = value;\n        this.set_tourDirty(true);\n        return value;\n    },\n\n    get_editMode: function () {\n        return this._editMode;\n    },\n\n    set_editMode: function (value) {\n        this._editMode = value;\n        return value;\n    },\n\n    get_tourStops: function () {\n        return this._tourStops;\n    },\n\n    set_tourStops: function (value) {\n        this._tourStops = value;\n        return value;\n    },\n\n    get_currentTourstopIndex: function () {\n        return this._currentTourstopIndex;\n    },\n\n    set_currentTourstopIndex: function (value) {\n        this._currentTourstopIndex = value;\n        return value;\n    },\n\n    addTourStop: function (ts) {\n        ts.set_owner(this);\n        this.get_tourStops().push(ts);\n        this._currentTourstopIndex = this._tourStops.length - 1;\n        this.set_tourDirty(true);\n    },\n\n    insertTourStop: function (ts) {\n        ts.set_owner(this);\n        if (this._currentTourstopIndex > -1) {\n            this.get_tourStops().splice(this._currentTourstopIndex, 0, ts);\n        } else {\n            this.get_tourStops().push(ts);\n            this._currentTourstopIndex = this._tourStops.length - 1;\n        }\n        this.set_tourDirty(true);\n    },\n\n    insertAfterTourStop: function (ts) {\n        ts.set_owner(this);\n        if (this._currentTourstopIndex > -1 || this._currentTourstopIndex < this.get_tourStops().length) {\n            this.get_tourStops().splice(this._currentTourstopIndex + 1, 0, ts);\n        } else {\n            this.get_tourStops().push(ts);\n            this._currentTourstopIndex = this._tourStops.length - 1;\n        }\n        this.set_tourDirty(true);\n    },\n\n    removeTourStop: function (ts) {\n        ss.remove(this._tourStops, ts);\n        if (this._currentTourstopIndex > this._tourStops.length - 1) {\n            this._currentTourstopIndex--;\n        }\n        this.set_tourDirty(true);\n    },\n\n    _calculateRunTime: function () {\n        var totalTime = 0;\n        for (var i = 0; i < this._tourStops.length; i++) {\n            totalTime += this._tourStops[i].get_duration();\n            if (i > 0) {\n                switch (this._tourStops[i].get__transition()) {\n                    case 0:\n                        if (this._tourStops[i].get_target().get_backgroundImageset() == null || (this._tourStops[i - 1].get_target().get_backgroundImageset().get_dataSetType() === this._tourStops[i].get_target().get_backgroundImageset().get_dataSetType() && ((this._tourStops[i - 1].get_target().get_backgroundImageset().get_dataSetType() != ImageSetType.solarSystem) || (this._tourStops[i - 1].get_target().get_target() === this._tourStops[i].get_target().get_target())))) {\n                            var start = (this._tourStops[i - 1].get_endTarget() == null) ? this._tourStops[i - 1].get_target().get_camParams() : this._tourStops[i - 1].get_endTarget().get_camParams();\n                            var slew = ViewMoverSlew.create(start, this._tourStops[i].get_target().get_camParams());\n                            totalTime += slew.get_moveTime() * 1000;\n                        }\n                        break;\n                    case 2:\n                        break;\n                    case 1:\n                        break;\n                    case 5:\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        return ss.truncate(totalTime);\n    },\n\n    elapsedTimeTillTourstop: function (index) {\n        if (!index && index >= this._tourStops.length) {\n            return 0;\n        }\n        var totalTime = 0;\n        for (var i = 0; i < index; i++) {\n            totalTime += this._tourStops[i].get_duration();\n            if (i > 0) {\n                switch (this._tourStops[i].get__transition()) {\n                    case 0:\n                        var start = (this._tourStops[i - 1].get_endTarget() == null) ? this._tourStops[i - 1].get_target().get_camParams() : this._tourStops[i - 1].get_endTarget().get_camParams();\n                        if (this._tourStops[i - 1].get_target().get_backgroundImageset().get_dataSetType() === this._tourStops[i].get_target().get_backgroundImageset().get_dataSetType() && ((this._tourStops[i - 1].get_target().get_backgroundImageset().get_dataSetType() != ImageSetType.solarSystem) || (this._tourStops[i - 1].get_target().get_target() === this._tourStops[i].get_target().get_target()))) {\n                            var slew = ViewMoverSlew.create(start, this._tourStops[i].get_target().get_camParams());\n                            totalTime += slew.get_moveTime() * 1000;\n                        }\n                        break;\n                    case 2:\n                        break;\n                    case 1:\n                        break;\n                    case 5:\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        return totalTime / 1000;\n    },\n\n    elapsedTimeSinceLastMaster: function (index) {\n        var masterOut = null;\n        if (!index && index >= this._tourStops.length) {\n            return null;\n        }\n        var totalTime = 0;\n        for (var i = 0; i < index; i++) {\n            if (this._tourStops[i].get_masterSlide()) {\n                totalTime = 0;\n                masterOut = this._tourStops[i];\n            }\n            totalTime += this._tourStops[i].get_duration();\n            if (i > 0) {\n                switch (this._tourStops[i].get__transition()) {\n                    case 0:\n                        var start = (this._tourStops[i - 1].get_endTarget() == null) ? this._tourStops[i - 1].get_target().get_camParams() : this._tourStops[i - 1].get_endTarget().get_camParams();\n                        if (this._tourStops[i - 1].get_target().get_backgroundImageset().get_dataSetType() === this._tourStops[i].get_target().get_backgroundImageset().get_dataSetType() && ((this._tourStops[i - 1].get_target().get_backgroundImageset().get_dataSetType() != ImageSetType.solarSystem) || (this._tourStops[i - 1].get_target().get_target() === this._tourStops[i].get_target().get_target()))) {\n                            var slew = ViewMoverSlew.create(start, this._tourStops[i].get_target().get_camParams());\n                            totalTime += slew.get_moveTime() * 1000;\n                        }\n                        break;\n                    case 2:\n                        break;\n                    case 1:\n                        break;\n                    case 5:\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        return new MasterTime(masterOut, totalTime / 1000);\n    },\n\n    getMasterSlideForIndex: function (index) {\n        var master = -1;\n        for (var i = 0; i < index; i++) {\n            if (this._tourStops[i].get_masterSlide()) {\n                master = i;\n            }\n        }\n        if (master === -1) {\n            return null;\n        }\n        return this._tourStops[master];\n    },\n\n    getTourStopIndexByID: function (id) {\n        if (!id || id === 'Next') {\n            return this._currentTourstopIndex++;\n        }\n        var index = 0;\n        var $enum1 = ss.enumerate(this._tourStops);\n        while ($enum1.moveNext()) {\n            var stop = $enum1.current;\n            if (stop.get_id() === id) {\n                return index;\n            }\n            index++;\n        }\n        return -1;\n    },\n\n    cleanUp: function () { },\n\n    getCachedTexture: function (filename, callMe) {\n        if (this._textureList == null) {\n            this._textureList = {};\n        }\n        if (ss.keyExists(this._textureList, filename)) {\n            callMe();\n            return this._textureList[filename];\n        }\n        var url = this.getFileStream(filename);\n        if (!ss.whitespace(url)) {\n            var texture = document.createElement('img');\n            texture.src = this.getFileStream(filename);\n            texture.addEventListener('load', function () {\n                callMe();\n            }, false);\n            this._textureList[filename] = texture;\n            return texture;\n        } else {\n            return null;\n        }\n    },\n\n    getCachedTexture2d: function (filename) {\n        if (this._textureList2d == null) {\n            this._textureList2d = {};\n        }\n        if (ss.keyExists(this._textureList2d, filename)) {\n            return this._textureList2d[filename];\n        }\n        var texture = new Texture();\n        texture.load(this.getFileStream(filename));\n        this._textureList2d[filename] = texture;\n        return texture;\n    },\n\n    addCachedFile: function (filename, file) {\n        this._fileCache[filename] = file;\n\n        //Clean up old Cached Textures if they are based on this file.\n\n        if (ss.keyExists(this._textureList2d, filename)) {\n            delete this._textureList2d[filename];\n        }\n        if (ss.keyExists(this._textureList, filename)) {\n            delete this._textureList[filename];\n        }\n    },\n\n    getFileStream: function (filename) {\n        var blob = this.getFileBlob(filename);\n        if (blob == null) {\n            return null;\n        }\n        return URL.createObjectURL(blob);\n    },\n\n    getFileBlob: function (filename) {\n        if (ss.keyExists(this._fileCache, filename)) {\n            return this._fileCache[filename];\n        } else if (this._cabinet != null) {\n            return this._cabinet.getFileBlob(this.get_workingDirectory() + filename);\n        } else {\n            return null;\n        }\n    },\n\n    get_currentTourStop: function () {\n        if (this._currentTourstopIndex > -1) {\n            return this.get_tourStops()[this._currentTourstopIndex];\n        } else {\n            return null;\n        }\n    },\n\n    set_currentTourStop: function (value) {\n        var i = 0;\n        var $enum1 = ss.enumerate(this.get_tourStops());\n        while ($enum1.moveNext()) {\n            var stop = $enum1.current;\n            if (stop === value) {\n                if (this._currentTourstopIndex > -1) {\n                }\n                this._currentTourstopIndex = i;\n                break;\n            }\n            i++;\n        }\n        return value;\n    },\n\n    clearTempFiles: function () { }\n};\n\nregisterType(\"TourDocument\", [TourDocument, TourDocument$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The \"tour editor tab\" UX.\n//\n// This file defines `TourEditTab`; the types `TourEdit` and `TourEditor` are\n// defined in `tour_editor.js`.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { globalWWTControl, setManagerVisibleLayerList } from \"../data_globals.js\";\nimport { globalRenderContext } from \"../render_globals.js\";\nimport { Vector2d } from \"../double3d.js\";\nimport { Util } from \"../baseutil.js\";\nimport { Colors } from \"../color.js\";\nimport { XmlTextWriter } from \"../utilities/xml_text_writer.js\";\nimport { ContextMenuStrip, ToolStripMenuItem, ToolStripSeparator } from \"../utilities/context_menu_strip.js\";\nimport { Cursor, Cursors, Guid, Language, SelectLink } from \"../util.js\";\nimport { Place } from \"../place.js\";\nimport { SpaceTimeController } from \"../space_time_controller.js\";\nimport { UiTools } from \"../ui_tools.js\";\nimport { LayerManager } from \"../layers/layer_manager.js\";\nimport { Overlay } from \"./overlay.js\";\nimport { Undo, UndoTourSlidelistChange } from \"./undo.js\";\nimport { TourStop, UndoTourStopChange } from \"./tour_stop.js\";\nimport { TourPlayer } from \"./tour_player.js\";\nimport { TourEditor, TourEdit, SoundEditor, OverlayList, TourStopList, TimeLine } from \"./tour_editor.js\";\n\n\n// wwtlib.TourEditTab\n\nexport function TourEditTab() {\n    this.musicTrack = new SoundEditor();\n    this.voiceTrack = new SoundEditor();\n    this._tour = null;\n    this.tourStopList = new TourStopList();\n    this.tourEditorUI = new TourEditor();\n    this._contextMenu = new ContextMenuStrip();\n    this.nextSlideCallback = null;\n    this.playing = false;\n    this._player = null;\n    this._defultColor = Colors.get_white();\n}\n\nvar TourEditTab$ = {\n    setUiStrings: function () { },\n\n    get_tour: function () {\n        return this._tour;\n    },\n\n    set_tour: function (value) {\n        this._tour = value;\n        this.tourEditorUI.set_tour(this._tour);\n        this.tourStopList.tour = this._tour;\n        Overlay.defaultAnchor = 1;\n        if (this._tour.get_tourStops().length > 0) {\n            globalWWTControl.gotoTarget(this._tour.get_tourStops()[0].get_target(), false, true, false);\n            this._tour.set_currentTourstopIndex(0);\n            this.tourStopList.selectedItem = this._tour.get_currentTourstopIndex();\n            this.musicTrack.target = this._tour.get_currentTourStop();\n            this.voiceTrack.target = this._tour.get_currentTourStop();\n            setManagerVisibleLayerList(this._tour.get_currentTourStop().layers);\n        }\n        this.setEditMode(this._tour.get_editMode());\n        return value;\n    },\n\n    tour_CurrentTourstopChanged: function () {\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.tourEditorUI.selection);\n        if (this.tourEditorUI != null) {\n            this.tourEditorUI.clearSelection();\n        }\n        this.tourStopList.refresh();\n    },\n\n    setFocusedChild: function () { },\n\n    selectCurrent: function () {\n        this.tourStopList.selectedItem = this._tour.get_currentTourstopIndex();\n        this.tourStopList.refresh();\n    },\n\n    tourEdit_Load: function (sender, e) { },\n\n    playNow: function (fromStart) {\n        this.playing = true;\n        if (this.get_tour().get_editMode() || fromStart) {\n            this.get_tour().set_currentTourstopIndex(-1);\n        }\n        this.setPlayPauseMode();\n    },\n\n    _tourPlayer_TourEnded: function (sender, e) { },\n\n    _endTour_CloseTour: function (sender, e) { },\n\n    _endTour_LaunchTour: function (sender, e) {\n        this.playNow(true);\n    },\n\n    setEditMode: function (visible) { },\n\n    tourStopList_ItemClicked: function (sender, e) {\n        if (this._tour.get_currentTourStop() !== e) {\n            this._tour.set_currentTourStop(e);\n            if (e != null) {\n                this.musicTrack.target = this._tour.get_currentTourStop();\n                this.voiceTrack.target = this._tour.get_currentTourStop();\n            }\n            else {\n                this.musicTrack.target = null;\n                this.voiceTrack.target = null;\n            }\n            this.tourEditorUI.clearSelection();\n        }\n        if (this.playing) {\n            this._playFromHere_Click(sender, new ss.EventArgs());\n        }\n    },\n\n    tourStopList_ItemDoubleClicked: function (sender, e) {\n        this.showSlideStartPosition(e);\n    },\n\n    showSlideStartPosition: function (ts) {\n        this._tour.set_currentTourStop(ts);\n        if (ts != null) {\n            this.musicTrack.target = this._tour.get_currentTourStop();\n            this.voiceTrack.target = this._tour.get_currentTourStop();\n        } else {\n            this.musicTrack.target = null;\n            this.voiceTrack.target = null;\n        }\n        this.tourEditorUI.clearSelection();\n        if (this._tour.get_currentTourStop() != null) {\n            this._tour.get_currentTourStop().syncSettings();\n            SpaceTimeController.set_now(this._tour.get_currentTourStop().get_startTime());\n            SpaceTimeController.set_syncToClock(false);\n            globalWWTControl.gotoTarget(ts.get_target(), false, true, false);\n            this._tour.get_currentTourStop().set_tweenPosition(0);\n            this._tour.get_currentTourStop()._updateLayerOpacity();\n            setManagerVisibleLayerList(this._tour.get_currentTourStop().layers);\n        }\n    },\n\n    tourStopList_MouseClick: function (sender, e) {\n        if (!this._tour.get_editMode()) {\n        }\n        if (this.tourStopList.multipleSelection) {\n            // MultiSelection Menu\n            if (this._contextMenu != null) {\n                this._contextMenu._dispose();\n            }\n            this._contextMenu = new ContextMenuStrip();\n            var selectAllMenu = ToolStripMenuItem.create(Language.getLocalizedText(1345, 'Select All'));\n            var cutMenu = ToolStripMenuItem.create(Language.getLocalizedText(427, 'Cut'));\n            var copyMenu = ToolStripMenuItem.create(Language.getLocalizedText(428, 'Copy'));\n            var pasteMenu = ToolStripMenuItem.create(Language.getLocalizedText(429, 'Paste'));\n            var deleteMenu = ToolStripMenuItem.create(Language.getLocalizedText(167, 'Delete'));\n            cutMenu.click = ss.bind('_cutMenu_Click', this);\n            copyMenu.click = ss.bind('_copyMenu_Click', this);\n            pasteMenu.click = ss.bind('_pasteMenu_Click', this);\n            deleteMenu.click = ss.bind('_deleteMenu_Click', this);\n            selectAllMenu.click = ss.bind('_selectAllMenu_Click', this);\n            var sep1 = new ToolStripSeparator();\n            this._contextMenu.items.push(selectAllMenu);\n            this._contextMenu.items.push(sep1);\n            this._contextMenu.items.push(cutMenu);\n            this._contextMenu.items.push(copyMenu);\n            pasteMenu.enabled = this.tourEditorUI.clipboardType === 'WorldWideTelescope.Slide';\n            this._contextMenu.items.push(pasteMenu);\n            this._contextMenu.items.push(deleteMenu);\n            this._contextMenu._show(Cursor.get_position());\n        } else if (this._tour.get_currentTourStop() == null) {\n            // Context menu for no selection\n            if (this._contextMenu != null) {\n                this._contextMenu._dispose();\n            }\n            this._contextMenu = new ContextMenuStrip();\n            var selectAllMenu = ToolStripMenuItem.create(Language.getLocalizedText(1345, 'Select All'));\n            var pasteMenu = ToolStripMenuItem.create(Language.getLocalizedText(425, 'Paste'));\n            var sep1 = new ToolStripSeparator();\n            var sep2 = new ToolStripSeparator();\n            var insertSlide = ToolStripMenuItem.create(Language.getLocalizedText(426, 'Add New Slide'));\n            pasteMenu.click = ss.bind('_pasteMenu_Click', this);\n            selectAllMenu.click = ss.bind('_selectAllMenu_Click', this);\n            insertSlide.click = ss.bind('_addNewSlide_Click', this);\n            pasteMenu.enabled = this.tourEditorUI.clipboardType === 'WorldWideTelescope.Slide';\n            this._contextMenu.items.push(selectAllMenu);\n            this._contextMenu.items.push(sep1);\n            this._contextMenu.items.push(pasteMenu);\n            this._contextMenu.items.push(sep2);\n            this._contextMenu.items.push(insertSlide);\n            this._contextMenu._show(Cursor.get_position());\n        } else {\n            if (this._contextMenu != null) {\n                this._contextMenu._dispose();\n            }\n            this._contextMenu = new ContextMenuStrip();\n            var selectAllMenu = ToolStripMenuItem.create(Language.getLocalizedText(1345, 'Select All'));\n            var cutMenu = ToolStripMenuItem.create(Language.getLocalizedText(427, 'Cut'));\n            var copyMenu = ToolStripMenuItem.create(Language.getLocalizedText(428, 'Copy'));\n            var pasteMenu = ToolStripMenuItem.create(Language.getLocalizedText(429, 'Paste'));\n            var deleteMenu = ToolStripMenuItem.create(Language.getLocalizedText(167, 'Delete'));\n            var sep1 = new ToolStripSeparator();\n            var sep3 = new ToolStripSeparator();\n            var sep4 = new ToolStripSeparator();\n            var sep5 = new ToolStripSeparator();\n            var sep6 = new ToolStripSeparator();\n            var sep7 = new ToolStripSeparator();\n            var insertSlide = ToolStripMenuItem.create(Language.getLocalizedText(431, 'Insert New Slide'));\n            var insertDuplicate = ToolStripMenuItem.create(Language.getLocalizedText(627, 'Duplicate Slide at End Position'));\n            var insertSlideshow = ToolStripMenuItem.create(Language.getLocalizedText(628, 'Merge Tour after slide...'));\n            var playFromHere = ToolStripMenuItem.create(Language.getLocalizedText(432, 'Preview Tour From Here'));\n            var sep2 = new ToolStripSeparator();\n            var captureThumbnail = ToolStripMenuItem.create(Language.getLocalizedText(433, 'Capture New Thumbnail'));\n            var setSkyPosition = ToolStripMenuItem.create(Language.getLocalizedText(434, 'Set Start Camera Position'));\n            var setEndSkyPosition = ToolStripMenuItem.create(Language.getLocalizedText(435, 'Set End Camera Position'));\n            var showSkyPosition = ToolStripMenuItem.create(Language.getLocalizedText(436, 'Show Start Camera Position'));\n            var showEndSkyPosition = ToolStripMenuItem.create(Language.getLocalizedText(437, 'Show End Camera Position'));\n            var masterSlide = ToolStripMenuItem.create(Language.getLocalizedText(438, 'Master Slide'));\n            var makeTimeline = ToolStripMenuItem.create(Language.getLocalizedText(1346, 'Create Timeline'));\n            var showTimeline = ToolStripMenuItem.create(Language.getLocalizedText(1347, 'Show Timeline'));\n            var linkString = this._tour.get_currentTourStop().get_nextSlide();\n            switch (linkString) {\n                case '':\n                case null:\n                case 'Next':\n                    linkString = ' (' + Language.getLocalizedText(610, 'Next Slide') + ')';\n                    break;\n                case 'Return':\n                    linkString = ' (' + Language.getLocalizedText(602, 'Return to Caller') + ')';\n                    break;\n                default:\n                    var index = this.get_tour().getTourStopIndexByID(linkString);\n                    if (index > -1) {\n                        if (ss.emptyString(this._tour.get_tourStops()[index].get_description())) {\n                            linkString = ss.format(' (Slide {0})', index);\n                        }\n                        else {\n                            linkString = ' (' + this._tour.get_tourStops()[index].get_description() + ')';\n                        }\n                    }\n                    break;\n            }\n            var setNextSlide = ToolStripMenuItem.create(Language.getLocalizedText(590, 'Set Next Slide') + linkString);\n            var trackSpaceTime = ToolStripMenuItem.create(Language.getLocalizedText(439, 'Track Date/Time/Location'));\n            var fadeInOverlays = ToolStripMenuItem.create(Language.getLocalizedText(629, 'Fade In Slide Elements'));\n            var properties = ToolStripMenuItem.create(Language.getLocalizedText(20, 'Properties'));\n            var interpolation = ToolStripMenuItem.create(Language.getLocalizedText(1029, 'Animation Tween Type'));\n            var Linear = ToolStripMenuItem.create(Language.getLocalizedText(1030, 'Linear'));\n            var Ease = ToolStripMenuItem.create(Language.getLocalizedText(1031, 'Ease In/Out'));\n            var EaseIn = ToolStripMenuItem.create(Language.getLocalizedText(1032, 'Ease In'));\n            var EaseOut = ToolStripMenuItem.create(Language.getLocalizedText(1033, 'Ease Out'));\n            var Exponential = ToolStripMenuItem.create(Language.getLocalizedText(1034, 'Exponential'));\n            Linear.tag = 0;\n            Ease.tag = 3;\n            EaseIn.tag = 1;\n            EaseOut.tag = 2;\n            Exponential.tag = 4;\n            Linear.click = ss.bind('_interpolation_Click', this);\n            Ease.click = ss.bind('_interpolation_Click', this);\n            EaseIn.click = ss.bind('_interpolation_Click', this);\n            EaseOut.click = ss.bind('_interpolation_Click', this);\n            Exponential.click = ss.bind('_interpolation_Click', this);\n            switch (this._tour.get_currentTourStop().get_interpolationType()) {\n                case 0:\n                    Linear.checked = true;\n                    break;\n                case 1:\n                    EaseIn.checked = true;\n                    break;\n                case 2:\n                    EaseOut.checked = true;\n                    break;\n                case 3:\n                    Ease.checked = true;\n                    break;\n                case 4:\n                    Exponential.checked = true;\n                    break;\n                default:\n                    break;\n            }\n            interpolation.dropDownItems.push(Linear);\n            interpolation.dropDownItems.push(Ease);\n            interpolation.dropDownItems.push(EaseIn);\n            interpolation.dropDownItems.push(EaseOut);\n            interpolation.dropDownItems.push(Exponential);\n            selectAllMenu.click = ss.bind('_selectAllMenu_Click', this);\n            insertDuplicate.click = ss.bind('_insertDuplicate_Click', this);\n            cutMenu.click = ss.bind('_cutMenu_Click', this);\n            copyMenu.click = ss.bind('_copyMenu_Click', this);\n            pasteMenu.click = ss.bind('_pasteMenu_Click', this);\n            deleteMenu.click = ss.bind('_deleteMenu_Click', this);\n            insertSlide.click = ss.bind('_insertNewSlide_Click', this);\n            properties.click = ss.bind('_properties_Click', this);\n            captureThumbnail.click = ss.bind('_captureThumbnail_Click', this);\n            setSkyPosition.click = ss.bind('_setSkyPosition_Click', this);\n            setEndSkyPosition.click = ss.bind('_setEndSkyPosition_Click', this);\n            showEndSkyPosition.click = ss.bind('_showEndSkyPosition_Click', this);\n            showSkyPosition.click = ss.bind('_showSkyPosition_Click', this);\n            playFromHere.click = ss.bind('_playFromHere_Click', this);\n            masterSlide.click = ss.bind('_masterSlide_Click', this);\n            setNextSlide.click = ss.bind('_setNextSlide_Click', this);\n            trackSpaceTime.click = ss.bind('_trackSpaceTime_Click', this);\n            insertSlideshow.click = ss.bind('_insertSlideshow_Click', this);\n            fadeInOverlays.click = ss.bind('_fadeInOverlays_Click', this);\n            if (this._tour.get_currentTourStop().get_masterSlide()) {\n                masterSlide.checked = true;\n            }\n            if (this._tour.get_currentTourStop().get_hasTime()) {\n                trackSpaceTime.checked = true;\n            }\n            fadeInOverlays.checked = this._tour.get_currentTourStop().get_fadeInOverlays();\n            this._contextMenu.items.push(selectAllMenu);\n            this._contextMenu.items.push(sep7);\n            this._contextMenu.items.push(cutMenu);\n            this._contextMenu.items.push(copyMenu);\n            pasteMenu.enabled = this.tourEditorUI.clipboardType === 'WorldWideTelescope.Slide';\n            this._contextMenu.items.push(pasteMenu);\n            this._contextMenu.items.push(deleteMenu);\n            this._contextMenu.items.push(sep1);\n            this._contextMenu.items.push(insertSlide);\n            this._contextMenu.items.push(insertDuplicate);\n            this._contextMenu.items.push(insertSlideshow);\n            this._contextMenu.items.push(sep2);\n            this._contextMenu.items.push(playFromHere);\n            this._contextMenu.items.push(sep3);\n            this._contextMenu.items.push(setSkyPosition);\n            this._contextMenu.items.push(setEndSkyPosition);\n            this._contextMenu.items.push(sep4);\n            this._contextMenu.items.push(showSkyPosition);\n            this._contextMenu.items.push(showEndSkyPosition);\n            this._contextMenu.items.push(sep5);\n            this._contextMenu.items.push(captureThumbnail);\n            this._contextMenu.items.push(sep6);\n            this._contextMenu.items.push(masterSlide);\n            this._contextMenu.items.push(setNextSlide);\n            this._contextMenu.items.push(fadeInOverlays);\n            this._contextMenu.items.push(trackSpaceTime);\n            this._contextMenu.items.push(interpolation);\n            this._contextMenu._show(Vector2d.create(e.clientX, e.clientY));\n        }\n    },\n\n    _selectAllMenu_Click: function (sender, e) {\n        this.tourStopList.selectAll();\n    },\n\n    _interpolation_Click: function (sender, e) {\n        var item = sender;\n        this._tour.get_currentTourStop().set_interpolationType(item.tag);\n    },\n\n    _nextSlideChosen: function () {\n        if (this._selectDialog.get_OK()) {\n            this._tour.get_currentTourStop().set_nextSlide(this._selectDialog.get_id());\n        }\n    },\n\n    _setNextSlide_Click: function (sender, e) {\n        this._selectDialog = new SelectLink(null);\n        this.nextSlideCallback(this._selectDialog, ss.bind('_nextSlideChosen', this));\n    },\n\n    _insertDuplicate_Click: function (sender, e) {\n        Undo.push(new UndoTourSlidelistChange(Language.getLocalizedText(530, 'Duplicate Slide at End Position'), this._tour));\n        var ts = this._tour.get_currentTourStop().copy();\n        if (ts == null) {\n            return;\n        }\n        if (ts.get_endTarget() != null) {\n            ts.get_endTarget().set_backgroundImageset(ts.get_target().get_backgroundImageset());\n            ts.get_endTarget().set_studyImageset(ts.get_target().get_studyImageset());\n            ts.set_target(ts.get_endTarget());\n            ts.set_startTime(ts.get_endTime());\n            ts.set_endTarget(null);\n        }\n        var $enum1 = ss.enumerate(ts.get_overlays());\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.set_tweenFactor(1);\n            overlay.set_animate(!overlay.get_animate());\n            overlay.set_animate(!overlay.get_animate());\n        }\n        ts.set_tweenPosition(0);\n        ts.set_fadeInOverlays(false);\n        this._tour.insertAfterTourStop(ts);\n        this.tourStopList.refresh();\n    },\n\n    _fadeInOverlays_Click: function (sender, e) {\n        this._tour.get_currentTourStop().set_fadeInOverlays(!this._tour.get_currentTourStop().get_fadeInOverlays());\n    },\n\n    _insertSlideshow_Click: function (sender, e) { },\n\n    _trackSpaceTime_Click: function (sender, e) {\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(532, 'Track Time Edit'), this._tour));\n        this._tour.get_currentTourStop().set_hasTime(!this._tour.get_currentTourStop().get_hasTime());\n    },\n\n    _masterSlide_Click: function (sender, e) {\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(533, 'Master Slide State Edit'), this._tour));\n        this._tour.get_currentTourStop().set_masterSlide(!this._tour.get_currentTourStop().get_masterSlide());\n        this.tourStopList.refresh();\n    },\n\n    _playFromHere_Click: function (sender, e) {\n        this.playFromCurrentTourstop();\n    },\n\n    playFromCurrentTourstop: function () {\n        this.playing = true;\n        globalWWTControl.gotoTarget(this._tour.get_currentTourStop().get_target(), false, true, false);\n        SpaceTimeController.set_now(this._tour.get_currentTourStop().get_startTime());\n        SpaceTimeController.set_syncToClock(false);\n        this.setPlayPauseMode();\n    },\n\n    playFromTourstop: function (ts) {\n        this._tour.set_currentTourStop(ts);\n        this.playFromCurrentTourstop();\n    },\n\n    _showSkyPosition_Click: function (sender, e) {\n        if (this._tour.get_currentTourStop() != null) {\n            globalWWTControl.gotoTarget(this._tour.get_currentTourStop().get_target(), false, true, false);\n            this._tour.get_currentTourStop().syncSettings();\n            SpaceTimeController.set_now(this._tour.get_currentTourStop().get_startTime());\n            SpaceTimeController.set_syncToClock(false);\n            this._tour.get_currentTourStop().set_tweenPosition(0);\n            setManagerVisibleLayerList(this._tour.get_currentTourStop().layers);\n            this.tourStopList.refresh();\n        }\n    },\n\n    _showEndSkyPosition_Click: function (sender, e) {\n        this._tour.get_currentTourStop().set_tweenPosition(1);\n        this._tour.get_currentTourStop()._updateLayerOpacity();\n        if (this._tour.get_currentTourStop() != null && this._tour.get_currentTourStop().get_endTarget() != null) {\n            globalWWTControl.gotoTargetFull(false, true, this._tour.get_currentTourStop().get_endTarget().get_camParams(), this._tour.get_currentTourStop().get_target().get_studyImageset(), this._tour.get_currentTourStop().get_target().get_backgroundImageset());\n            globalRenderContext.set_solarSystemTrack(this._tour.get_currentTourStop().get_endTarget().get_target());\n            SpaceTimeController.set_now(this._tour.get_currentTourStop().get_endTime());\n            this._tour.get_currentTourStop().syncSettings();\n            setManagerVisibleLayerList(this._tour.get_currentTourStop().layers);\n            SpaceTimeController.set_syncToClock(false);\n            this.tourStopList.refresh();\n            this.tourEditorUI.clearSelection();\n        }\n    },\n\n    _setEndSkyPosition_Click: function (sender, e) {\n        if (this._tour.get_currentTourStop() != null) {\n            Undo.push(new UndoTourStopChange(Language.getLocalizedText(435, 'Set End Camera Position'), this._tour));\n            var newPlace = Place.createCameraParams('End Place', globalRenderContext.viewCamera.copy(), 268435456, globalWWTControl.constellation, globalRenderContext.get_backgroundImageset().get_dataSetType(), globalRenderContext.get_solarSystemTrack());\n            this._tour.get_currentTourStop().set_endTarget(newPlace);\n            this._tour.get_currentTourStop().get_endTarget().set_constellation(globalWWTControl.constellation);\n            this._tour.get_currentTourStop().set_endTime(SpaceTimeController.get_now());\n            this._tour.get_currentTourStop().set_tweenPosition(1);\n            var $enum1 = ss.enumerate(ss.keys(this._tour.get_currentTourStop().layers));\n            while ($enum1.moveNext()) {\n                var key = $enum1.current;\n                var info = this._tour.get_currentTourStop().layers[key];\n                if (ss.keyExists(LayerManager.get_layerList(), info.id)) {\n                    info.endOpacity = LayerManager.get_layerList()[info.id].get_opacity();\n                    info.endParams = LayerManager.get_layerList()[info.id].getParams();\n                }\n            }\n            this._tour.get_currentTourStop()._updateLayerOpacity();\n            this.tourStopList.refresh();\n            TimeLine.refreshUi();\n            this.tourEditorUI.clearSelection();\n        }\n    },\n\n    _setSkyPosition_Click: function (sender, e) {\n        if (this._tour.get_currentTourStop() != null) {\n            Undo.push(new UndoTourStopChange(Language.getLocalizedText(434, 'Set Start Camera Position'), this._tour));\n            this._tour.get_currentTourStop().get_target().set_target(globalRenderContext.get_solarSystemTrack());\n            this._tour.get_currentTourStop().get_target().set_type(globalRenderContext.get_backgroundImageset().get_dataSetType());\n            this._tour.get_currentTourStop().get_target().set_camParams(globalRenderContext.viewCamera.copy());\n            this._tour.get_currentTourStop().get_target().set_constellation(globalWWTControl.constellation);\n            this._tour.get_currentTourStop().get_target().set_studyImageset(globalRenderContext.get_foregroundImageset());\n            this._tour.get_currentTourStop().get_target().set_type(globalRenderContext.get_backgroundImageset().get_dataSetType());\n            this._tour.get_currentTourStop().get_target().set_backgroundImageset(globalRenderContext.get_backgroundImageset().get_stockImageSet());\n            this._tour.get_currentTourStop().captureSettings();\n            this._tour.get_currentTourStop().layers = LayerManager._getVisibleLayerList(this._tour.get_currentTourStop().layers);\n            this._tour.get_currentTourStop().set_tweenPosition(0);\n            this.tourStopList.refresh();\n            TimeLine.refreshUi();\n            this.tourEditorUI.clearSelection();\n        }\n    },\n\n    _captureThumbnail_Click: function (sender, e) {\n        if (this._tour.get_currentTourStop() != null) {\n            this._captureThumbnail(this._tour.get_currentTourStop());\n        }\n    },\n\n    _captureThumbnail: function (tourStop) {\n        var $this = this;\n\n        globalWWTControl.captureThumbnail(function (blob) {\n            var filename = ss.format('{0}.thumb.png', tourStop.get_id());\n            $this._tour.addCachedFile(filename, blob);\n            tourStop.set_thumbnail($this._tour.getCachedTexture(filename, function () {\n                $this.tourStopList.refresh();\n            }));\n        });\n    },\n\n    _properties_Click: function (sender, e) {\n        throw new Error('The method or operation is not implemented.');\n    },\n\n    tourStopList_AddNewSlide: function (sender, e) {\n        this.addSlide(false);\n        this.tourStopList.ensureAddVisible();\n    },\n\n    _addNewSlide_Click: function (sender, e) {\n        this.addSlide(false);\n        this.tourStopList.ensureAddVisible();\n    },\n\n    _insertNewSlide_Click: function (sender, e) {\n        this.addSlide(true);\n    },\n\n    addSlide: function (insert) {\n        Undo.push(new UndoTourSlidelistChange(Language.getLocalizedText(426, 'Add New Slide'), this._tour));\n        Cursor.set_current(Cursors.get_waitCursor());\n        var placeName = 'Current Screen';\n        var newPlace = Place.createCameraParams(placeName, globalRenderContext.viewCamera.copy(), 268435456, globalWWTControl.constellation, globalRenderContext.get_backgroundImageset().get_dataSetType(), globalRenderContext.get_solarSystemTrack());\n        newPlace.set_studyImageset(globalRenderContext.get_foregroundImageset());\n        newPlace.set_backgroundImageset(globalRenderContext.get_backgroundImageset().get_stockImageSet());\n        var newTourStop = TourStop.create(newPlace);\n        if (insert) {\n            this._tour.insertTourStop(newTourStop);\n        } else {\n            this._tour.addTourStop(newTourStop);\n        }\n        if (this._tour.get_currentTourStop() != null) {\n            this.musicTrack.target = this._tour.get_currentTourStop();\n            this.voiceTrack.target = this._tour.get_currentTourStop();\n        } else {\n            this.musicTrack.target = null;\n            this.voiceTrack.target = null;\n        }\n        this._tour.get_currentTourStop().layers = LayerManager._getVisibleLayerList(this._tour.get_currentTourStop().layers);\n        this._captureThumbnail(newTourStop);\n        this.tourStopList.selectedItem = this.tourStopList.findItem(newTourStop);\n        this.tourStopList.refresh();\n        this.tourEditorUI.clearSelection();\n        Cursor.set_current(Cursors.get_defaultV());\n        TimeLine.refreshUi();\n    },\n\n    _deleteMenu_Click: function (sender, e) {\n        Undo.push(new UndoTourSlidelistChange(Language.getLocalizedText(534, 'Delete Slide'), this._tour));\n        var $enum1 = ss.enumerate(ss.keys(this.tourStopList.selectedItems));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var item = this.tourStopList.selectedItems[key];\n            this._tour.removeTourStop(item);\n        }\n        ss.clearKeys(this.tourStopList.selectedItems);\n        this.tourStopList.selectedItem = -1;\n        this._tour.set_currentTourStop(null);\n        this.musicTrack.target = null;\n        this.voiceTrack.target = null;\n        this.tourStopList.refresh();\n        this.tourEditorUI.clearSelection();\n    },\n\n    _pasteMenu_Click: function (sender, e) {\n        if (this.tourEditorUI.clipboardType === 'WorldWideTelescope.Slide') {\n            Undo.push(new UndoTourSlidelistChange(Language.getLocalizedText(535, 'Paste Slide'), this._tour));\n            var xParser = new DOMParser();\n            var doc = xParser.parseFromString(this.tourEditorUI.clipboardData, 'text/xml');\n            var node = Util.selectSingleNode(doc, 'TourStops');\n            var pasteStack = new ss.Stack();\n            var $enum1 = ss.enumerate(node.childNodes);\n            while ($enum1.moveNext()) {\n                var child = $enum1.current;\n                if (child.nodeName === 'TourStop') {\n                    var ts = TourStop._fromXml(this._tour, child);\n                    ts.set_id(Guid.newGuid().toString());\n                    pasteStack.push(ts);\n                }\n            }\n            ss.clearKeys(this.tourStopList.selectedItems);\n            var curIndex = this.tourStopList.selectedItem + pasteStack.count - 1;\n            while (pasteStack.count > 0) {\n                var ts = pasteStack.pop();\n                this._tour.insertTourStop(ts);\n                this.tourStopList.selectedItems[curIndex--] = ts;\n            }\n            this.tourStopList.refresh();\n            this.tourEditorUI.clearSelection();\n        }\n    },\n\n    _copyMenu_Click: function (sender, e) {\n        var writer = new XmlTextWriter();\n        writer._writeProcessingInstruction('xml', \"version='1.0' encoding='UTF-8'\");\n        writer._writeStartElement('TourStops');\n        var $enum1 = ss.enumerate(ss.keys(this.tourStopList.selectedItems));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var item = this.tourStopList.selectedItems[key];\n            item._saveToXml(writer, true);\n        }\n        writer._writeEndElement();\n        this.tourEditorUI.clipboardType = 'WorldWideTelescope.Slide';\n        this.tourEditorUI.clipboardData = writer.body;\n    },\n\n    _cutMenu_Click: function (sender, e) {\n        Undo.push(new UndoTourSlidelistChange(Language.getLocalizedText(536, 'Cut Slide'), this._tour));\n        this._copyMenu_Click(sender, e);\n        var $enum1 = ss.enumerate(ss.keys(this.tourStopList.selectedItems));\n        while ($enum1.moveNext()) {\n            var key = $enum1.current;\n            var item = this.tourStopList.selectedItems[key];\n            this._tour.removeTourStop(item);\n        }\n        ss.clearKeys(this.tourStopList.selectedItems);\n        this.tourStopList.refresh();\n        this.tourEditorUI.clearSelection();\n    },\n\n    pauseTour: function () {\n        if (this.playing) {\n            this.playing = false;\n        }\n        this.setPlayPauseMode();\n    },\n\n    preview_Click: function (sender, e) {\n        this.playing = !this.playing;\n        if (this.playing && this._tour.get_editMode()) {\n            this.get_tour().set_currentTourstopIndex(-1);\n        }\n        this.setPlayPauseMode();\n    },\n\n    setPlayPauseMode: function () {\n        if (this._tour.get_editMode()) {\n            if (this.playing) {\n                if (this._player == null) {\n                    this._player = new TourPlayer();\n                }\n                this._player.set_tour(this._tour);\n                globalWWTControl.uiController = this._player;\n                this._player.play();\n                this.tourStopList.showAddButton = false;\n            }\n            else {\n                globalWWTControl.uiController = this.tourEditorUI;\n                if (this._player != null) {\n                    this._player.stop(false);\n                }\n                this._player = null;\n                globalWWTControl.set__mover(null);\n                this.tourStopList.showAddButton = this._tour.get_editMode();\n            }\n        } else {\n            if (this.playing) {\n                if (this._player == null) {\n                    this._player = new TourPlayer();\n                }\n                this._player.set_tour(this._tour);\n                globalWWTControl.uiController = this._player;\n                this._player.play();\n                this.tourStopList.showAddButton = false;\n            }\n            else {\n                globalWWTControl.uiController = null;\n                globalRenderContext.freezeView();\n                if (this._player != null) {\n                    this._player.stop(false);\n                }\n                this._player = null;\n                globalWWTControl.uiController = null;\n                globalWWTControl.set__mover(null);\n                this.tourStopList.showAddButton = this._tour.get_editMode();\n            }\n        }\n        this.tourStopList.refresh();\n    },\n\n    playerTimer_Tick: function (sender, e) {\n        if (this.playing) {\n            if (this._player != null) {\n                if (!TourPlayer.get_playing()) {\n                    this.playing = false;\n                    this.setPlayPauseMode();\n                }\n                else {\n                    if (this.tourStopList.selectedItem !== this._tour.get_currentTourstopIndex()) {\n                        this.tourStopList.selectedItem = this._tour.get_currentTourstopIndex();\n                    }\n                }\n            }\n        }\n    },\n\n    insertShapeCircle_Click: function (sender, e) {\n        this.tourEditorUI.addShape('', 0);\n    },\n\n    insertShapeRectangle_Click: function (sender, e) {\n        this.tourEditorUI.addShape('', 1);\n    },\n\n    insertShapeLine_Click: function (sender, e) {\n        this.tourEditorUI.addShape('', 5);\n    },\n\n    insertDonut_Click: function (sender, e) {\n        this.tourEditorUI.addShape('', 3);\n    },\n\n    _addArrow_Click: function (sender, e) {\n        this.tourEditorUI.addShape('', 4);\n    },\n\n    insertVideo_Click: function (sender, e) { },\n\n    insertAudio_Click: function (sender, e) { },\n\n    insertHyperlink_Click: function (sender, e) { },\n\n    colorPicker_Click: function (sender, e) { },\n\n    tourEditTab_Leave: function (sender, e) { },\n\n    editTourProperties_Click: function (sender, e) { },\n\n    saveTour_Click: function (sender, e) {\n        this.save(false);\n    },\n\n    save: function (saveAs) {\n        return true;\n    },\n\n    addVideo_Click: function (sender, e) { },\n\n    addPicture_Click: function (sender, e) { },\n\n    addShape_Click: function (sender, e) { },\n\n    _addOpenRectangle_Click: function (sender, e) {\n        this.tourEditorUI.addShape('', 6);\n    },\n\n    _addStar_Click: function (sender, e) {\n        this.tourEditorUI.addShape('', 2);\n    },\n\n    addText_Click: function (sender, e) { },\n\n    preview_EnabledChanged: function (sender, e) {\n        if (this.playing) {\n        } else {\n        }\n    },\n\n    preview_MouseEnter: function (sender, e) { },\n\n    preview_MouseLeave: function (sender, e) { },\n\n    preview_MouseUp: function (sender, e) { },\n\n    preview_MouseDown: function (sender, e) { },\n\n    tourStopList_ItemHover: function (sender, e) { },\n\n    refresh: function () { },\n\n    undoStep: function () {\n        if (Undo.peekAction()) {\n            Undo.stepBack();\n            this.tourStopList.refresh();\n            this.tourStopList.selectedItem = this._tour.get_currentTourstopIndex();\n            this.showSlideStartPosition(this._tour.get_currentTourStop());\n            this.refresh();\n            OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.tourEditorUI.selection);\n        }\n    },\n\n    redoStep: function () {\n        if (Undo.peekRedoAction()) {\n            Undo.stepForward();\n            this.tourStopList.refresh();\n            this.tourStopList.selectedItem = this._tour.get_currentTourstopIndex();\n            this.showSlideStartPosition(this._tour.get_currentTourStop());\n            this.refresh();\n            OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.tourEditorUI.selection);\n        }\n    },\n\n    tourStopList_ShowEndPosition: function (sender, e) {\n        this._showEndSkyPosition_Click(this, new ss.EventArgs());\n    },\n\n    tourStopList_ShowStartPosition: function (sender, e) {\n        this.showSlideStartPosition(this.get_tour().get_currentTourStop());\n        this.tourEditorUI.clearSelection();\n    },\n\n    tourStopList_KeyDown: function (sender, e) {\n        if (e.ctrlKey) {\n            switch (e.keyCode) {\n                case 67:\n                    this._copyMenu_Click(null, new ss.EventArgs());\n                    break;\n                case 86:\n                    this._pasteMenu_Click(null, new ss.EventArgs());\n                    break;\n                case 88:\n                    this._cutMenu_Click(null, new ss.EventArgs());\n                    break;\n                case 90:\n                    if (Undo.peekAction()) {\n                        TourEdit._undoStep();\n                    }\n                    else {\n                        UiTools._beep();\n                    }\n                    break;\n                case 89:\n                    if (Undo.peekRedoAction()) {\n                        TourEdit._redoStep();\n                    }\n                    else {\n                        UiTools._beep();\n                    }\n                    break;\n            }\n        }\n        if (e.keyCode === 46) {\n            this._deleteMenu_Click(null, new ss.EventArgs());\n        }\n    },\n\n    _ensureSelectedVisible: function () {\n        this.tourStopList.ensureSelectedVisible();\n    }\n};\n\nregisterType(\"TourEditTab\", [TourEditTab, TourEditTab$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Infrastructure for editing tours.\n//\n// This file defines `TourEdit` and `TourEditor`, among others; the type\n// `TourEditTab` is defined in `tour_edit.js`.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { Vector2d } from \"../double3d.js\";\nimport { Util } from \"../baseutil.js\";\nimport { Colors } from \"../color.js\";\nimport { ColorPicker } from \"../utilities/color_picker.js\";\nimport { ContextMenuStrip, ToolStripMenuItem, ToolStripSeparator } from \"../utilities/context_menu_strip.js\";\nimport { SimpleInput } from \"../utilities/simple_input.js\";\nimport { XmlTextWriter } from \"../utilities/xml_text_writer.js\";\nimport { IUiController } from \"../interfaces.js\";\nimport { globalRenderContext } from \"../render_globals.js\";\nimport { Settings } from \"../settings.js\";\nimport { UiTools } from \"../ui_tools.js\";\nimport { Cursor, Cursors, Language, OverlayProperties, SelectLink, PopupVolume } from \"../util.js\";\nimport { Overlay, AudioOverlay, BitmapOverlay, FlipbookOverlay, ShapeOverlay, TextOverlay } from \"./overlay.js\";\nimport { Selection } from \"./selection.js\";\nimport { Undo, UndoTourSlidelistChange } from \"./undo.js\";\nimport { UndoTourStopChange } from \"./tour_stop.js\";\n\n\n// wwtlib.TourEditor\n\nexport function TourEditor() {\n    this.selection = new Selection();\n    this._contextMenu = new ContextMenuStrip();\n    this._tour = null;\n    this._mouseDown = false;\n    this._selectionAction = 11;\n    this._needUndoFrame = false;\n    this._contextPoint = new Vector2d();\n    this._dragCopying = false;\n    this._brokeThreshold = false;\n    this.nextSlideCallback = null;\n    this.clipboardData = '';\n    this.clipboardType = '';\n    this.editTextCallback = null;\n    this._defaultColor = Colors.get_white();\n}\n\nTourEditor.capturing = false;\nTourEditor.currentEditor = null;\n\nvar TourEditor$ = {\n    render: function (renderContext) {\n        renderContext.setupMatricesOverlays();\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        var $enum1 = ss.enumerate(this._tour.get_currentTourStop().get_overlays());\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            if (overlay.get_animate() && this.get_tour().get_currentTourStop().get_keyFramed()) {\n                overlay.set_tweenFactor(this._tour.get_currentTourStop().get_tweenPosition());\n            }\n            else if (!this.get_tour().get_currentTourStop().get_keyFramed()) {\n                overlay.set_tweenFactor((this._tour.get_currentTourStop().get_tweenPosition() < 0.5) ? 0 : 1);\n            }\n            overlay.draw3D(renderContext, true);\n        }\n        this.selection.draw3D(renderContext, 1);\n        if (TourEditor.currentEditor != null) {\n            TourEditor.currentEditor.render(renderContext);\n        }\n        Settings.tourSettings = null;\n    },\n\n    get_tour: function () {\n        return this._tour;\n    },\n\n    set_tour: function (value) {\n        this._tour = value;\n        return value;\n    },\n\n    close: function () {\n        if (this._tour != null) {\n            // todo check for changes\n            this._tour = null;\n            this.set_focus(null);\n        }\n    },\n\n    clearSelection: function () {\n        this.selection.clearSelection();\n        OverlayList._updateOverlayListSelection(this.selection);\n        this.set_focus(null);\n    },\n\n    get_focus: function () {\n        return this.selection.get_focus();\n    },\n\n    set_focus: function (value) {\n        this.selection.set_focus(value);\n        return value;\n    },\n\n    pointToView: function (pnt) {\n        var clientHeight = globalRenderContext.height;\n        var clientWidth = globalRenderContext.width;\n        var viewWidth = (globalRenderContext.width / globalRenderContext.height) * 1116;\n        var x = ((pnt.x) / (clientWidth) * viewWidth) - ((viewWidth - 1920) / 2);\n        var y = (pnt.y) / clientHeight * 1116;\n        return Vector2d.create(x, y);\n    },\n\n    mouseDown: function (sender, e) {\n        this._brokeThreshold = false;\n        this._needUndoFrame = true;\n        var location = this.pointToView(Vector2d.create(e.offsetX, e.offsetY));\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            this._needUndoFrame = false;\n            return false;\n        }\n        if (TourEditor.currentEditor != null) {\n            if (TourEditor.currentEditor.mouseDown(sender, e)) {\n                return true;\n            }\n        }\n        if (this.get_focus() != null) {\n            if (this.selection.get_multiSelect()) {\n                var $enum1 = ss.enumerate(this.selection.selectionSet);\n                while ($enum1.moveNext()) {\n                    var overlay = $enum1.current;\n                    if (overlay.hitTest(location)) {\n                        this._selectionAction = 9;\n                        this._mouseDown = true;\n                        this._pointDown = location;\n                        this.set_focus(overlay);\n                        if (e.ctrlKey) {\n                            this._dragCopying = true;\n                        }\n                        return true;\n                    }\n                }\n            }\n            else {\n                if (this.get_focus().hitTest(location)) {\n                    this._selectionAction = 9;\n                    this._mouseDown = true;\n                    this._pointDown = location;\n                    if (e.ctrlKey) {\n                        this._dragCopying = true;\n                    }\n                    return true;\n                }\n            }\n            var hit = this.selection.hitTest(location);\n            if (hit !== 11) {\n                this._selectionAction = hit;\n                this._mouseDown = true;\n                if (hit === 8) {\n                    this._pointDown = location;\n                }\n                else {\n                    this._pointDown = this.selection.pointToSelectionSpace(location);\n                }\n                return true;\n            }\n        }\n        for (var i = this._tour.get_currentTourStop().get_overlays().length - 1; i >= 0; i--) {\n            if (this._tour.get_currentTourStop().get_overlays()[i].hitTest(location)) {\n                this._selectionAction = 9;\n                this.set_focus(this._tour.get_currentTourStop().get_overlays()[i]);\n                if (e.ctrlKey || e.shiftKey) {\n                    this.selection.addSelection(this.get_focus());\n                }\n                else {\n                    this.selection.setSelection(this.get_focus());\n                }\n                OverlayList._updateOverlayListSelection(this.selection);\n                this._mouseDown = true;\n                this._pointDown = location;\n                return true;\n            }\n        }\n        this.set_focus(null);\n        this.clearSelection();\n        this._needUndoFrame = false;\n        return false;\n    },\n\n    mouseUp: function (sender, e) {\n        this._brokeThreshold = false;\n        if (TourEditor.currentEditor != null) {\n            if (TourEditor.currentEditor.mouseUp(sender, e)) {\n                return true;\n            }\n        }\n        this._contextPoint = Vector2d.create(e.offsetX, e.offsetY);\n        if (this._mouseDown) {\n            this._mouseDown = false;\n            if (e.button === 2) {\n                if (this.get_focus() != null) {\n                    this.showSelectionContextMenu(Vector2d.create(e.offsetX, e.offsetY));\n                }\n            }\n            return true;\n        }\n        if (e.button === 2) {\n            if (this.get_focus() == null) {\n                this._showNoSelectionContextMenu(Vector2d.create(e.offsetX, e.offsetY));\n            }\n            return true;\n        }\n        return false;\n    },\n\n    mouseMove: function (sender, e) {\n        if (TourEditor.currentEditor != null) {\n            if (TourEditor.currentEditor.mouseMove(sender, e)) {\n                return true;\n            }\n        }\n        var location = this.pointToView(Vector2d.create(e.offsetX, e.offsetY));\n        if (this._mouseDown && this.get_focus() != null) {\n            var undoFrame = null;\n            var actionText = Language.getLocalizedText(502, 'Edit');\n            if (this._needUndoFrame) {\n                undoFrame = new UndoTourStopChange(Language.getLocalizedText(502, 'Edit'), this._tour);\n            }\n            var moveX;\n            var moveY;\n            if (this._selectionAction !== 9 && this._selectionAction !== 8) {\n                var newPoint = this.selection.pointToSelectionSpace(location);\n                moveX = newPoint.x - this._pointDown.x;\n                moveY = newPoint.y - this._pointDown.y;\n                this._pointDown = newPoint;\n            }\n            else {\n                moveX = location.x - this._pointDown.x;\n                moveY = location.y - this._pointDown.y;\n                if (this._selectionAction === 9 && !this._brokeThreshold) {\n                    if (Math.abs(moveX) > 3 || Math.abs(moveY) > 3) {\n                        this._brokeThreshold = true;\n                    }\n                    else {\n                        return true;\n                    }\n                }\n                this._pointDown = location;\n            }\n            if (this._dragCopying) {\n                if (this.selection.get_multiSelect()) {\n                    var set = this.selection.selectionSet;\n                    this.clearSelection();\n                    var $enum1 = ss.enumerate(set);\n                    while ($enum1.moveNext()) {\n                        var overlay = $enum1.current;\n                        var newOverlay = this.addOverlay(overlay);\n                        newOverlay.set_x(overlay.get_x());\n                        newOverlay.set_y(overlay.get_y());\n                        this.set_focus(newOverlay);\n                        this.selection.addSelection(this.get_focus());\n                    }\n                    OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n                    this._dragCopying = false;\n                }\n                else {\n                    var newOverlay = this.addOverlay(this.get_focus());\n                    newOverlay.set_x(this.get_focus().get_x());\n                    newOverlay.set_y(this.get_focus().get_y());\n                    this.set_focus(newOverlay);\n                    this.selection.setSelection(this.get_focus());\n                    OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n                    this._dragCopying = false;\n                }\n            }\n            var aspect = this.get_focus().get_width() / this.get_focus().get_height();\n            var center = Vector2d.create(this.get_focus().get_x(), this.get_focus().get_y());\n            if (e.ctrlKey) {\n                actionText = Language.getLocalizedText(537, 'Resize');\n                switch (this._selectionAction) {\n                    case 0:\n                        this.get_focus().set_width(Math.max(2, this.get_focus().get_width() - moveX * 2));\n                        this.get_focus().set_height(Math.max(2, this.get_focus().get_height() - (moveX / aspect) * 2));\n                        break;\n                    case 1:\n                        this.get_focus().set_height(Math.max(2, this.get_focus().get_height() - moveY * 2));\n                        break;\n                    case 2:\n                        this.get_focus().set_width(Math.max(2, this.get_focus().get_width() + moveX * 2));\n                        this.get_focus().set_height(Math.max(2, this.get_focus().get_height() + (moveX / aspect) * 2));\n                        break;\n                    case 3:\n                        this.get_focus().set_width(Math.max(2, this.get_focus().get_width() + moveX * 2));\n                        break;\n                    case 4:\n                        this.get_focus().set_width(Math.max(2, this.get_focus().get_width() + moveX * 2));\n                        this.get_focus().set_height(Math.max(2, this.get_focus().get_height() + (moveX / aspect) * 2));\n                        break;\n                    case 5:\n                        this.get_focus().set_height(Math.max(2, this.get_focus().get_height() + moveY * 2));\n                        break;\n                    case 6:\n                        this.get_focus().set_width(Math.max(2, this.get_focus().get_width() - moveX * 2));\n                        this.get_focus().set_height(Math.max(2, this.get_focus().get_height() - (moveX / aspect) * 2));\n                        break;\n                    case 7:\n                        this.get_focus().set_width(Math.max(2, this.get_focus().get_width() - moveX * 2));\n                        break;\n                    case 8:\n                        actionText = Language.getLocalizedText(538, 'Rotate');\n                        this.get_focus().set_rotationAngle(this.get_focus().get_rotationAngle() + moveX / 10);\n                        break;\n                    case 9:\n                        actionText = Language.getLocalizedText(539, 'Drag Copy');\n                        center.x += moveX;\n                        center.y += moveY;\n                        break;\n                    case 10:\n                        break;\n                    case 11:\n                        break;\n                    default:\n                        break;\n                }\n            }\n            else {\n                if (this._selectionAction !== 8 && this._selectionAction !== 9) {\n                    if (moveX > (this.get_focus().get_width() - 2)) {\n                        moveX = 0;\n                    }\n                    if (moveY > (this.get_focus().get_height() - 2)) {\n                        moveY = 0;\n                    }\n                }\n                actionText = Language.getLocalizedText(537, 'Resize');\n                switch (this._selectionAction) {\n                    case 0:\n                        this.get_focus().set_width(this.get_focus().get_width() - moveX);\n                        this.get_focus().set_height(this.get_focus().get_height() - (moveX / aspect));\n                        center.x += (moveX / 2);\n                        center.y += ((moveX / aspect) / 2);\n                        break;\n                    case 1:\n                        this.get_focus().set_height(this.get_focus().get_height() - moveY);\n                        center.y += (moveY / 2);\n                        break;\n                    case 2:\n                        this.get_focus().set_width(this.get_focus().get_width() + moveX);\n                        this.get_focus().set_height(this.get_focus().get_height() + (moveX / aspect));\n                        center.x += (moveX / 2);\n                        center.y -= ((moveX / aspect) / 2);\n                        break;\n                    case 3:\n                        this.get_focus().set_width(this.get_focus().get_width() + moveX);\n                        center.x += (moveX / 2);\n                        break;\n                    case 4:\n                        this.get_focus().set_width(this.get_focus().get_width() + moveX);\n                        this.get_focus().set_height(this.get_focus().get_height() + (moveX / aspect));\n                        center.x += (moveX / 2);\n                        center.y += ((moveX / aspect) / 2);\n                        break;\n                    case 5:\n                        this.get_focus().set_height(this.get_focus().get_height() + moveY);\n                        center.y += (moveY / 2);\n                        break;\n                    case 6:\n                        this.get_focus().set_width(this.get_focus().get_width() - moveX);\n                        this.get_focus().set_height(this.get_focus().get_height() - (moveX / aspect));\n                        center.x += (moveX / 2);\n                        center.y -= ((moveX / aspect) / 2);\n                        break;\n                    case 7:\n                        this.get_focus().set_width(this.get_focus().get_width() - moveX);\n                        center.x += (moveX / 2);\n                        break;\n                    case 8:\n                        actionText = Language.getLocalizedText(538, 'Rotate');\n                        this.get_focus().set_rotationAngle(this.get_focus().get_rotationAngle() + moveX);\n                        break;\n                    case 9:\n                        actionText = Language.getLocalizedText(540, 'Move');\n                        center.x += moveX;\n                        center.y += moveY;\n                        break;\n                    case 10:\n                        break;\n                    case 11:\n                        break;\n                    default:\n                        break;\n                }\n            }\n            if (this._selectionAction !== 9 && this._selectionAction !== 8) {\n                center = this.selection.pointToScreenSpace(center);\n            }\n            if (this.selection.get_multiSelect()) {\n                var $enum2 = ss.enumerate(this.selection.selectionSet);\n                while ($enum2.moveNext()) {\n                    var overlay = $enum2.current;\n                    overlay.set_x(overlay.get_x() + moveX);\n                    overlay.set_y(overlay.get_y() + moveY);\n                }\n            }\n            else {\n                this.get_focus().set_x(center.x);\n                this.get_focus().set_y(center.y);\n            }\n            if (this._needUndoFrame) {\n                this._needUndoFrame = false;\n                undoFrame.set_actionText(actionText);\n                Undo.push(undoFrame);\n            }\n        } else {\n            if (this.get_focus() != null) {\n                if (this.get_focus().hitTest(location)) {\n                    Cursor.set_current(Cursors.get_sizeAll());\n                    return false;\n                }\n                var hit = this.selection.hitTest(location);\n                if (hit === 11) {\n                    return false;\n                }\n                switch (hit) {\n                    case 0:\n                        Cursor.set_current(Cursors.get_sizeNWSE());\n                        break;\n                    case 1:\n                        Cursor.set_current(Cursors.get_sizeNS());\n                        break;\n                    case 2:\n                        Cursor.set_current(Cursors.get_sizeNESW());\n                        break;\n                    case 3:\n                        Cursor.set_current(Cursors.get_sizeWE());\n                        break;\n                    case 4:\n                        Cursor.set_current(Cursors.get_sizeNWSE());\n                        break;\n                    case 5:\n                        Cursor.set_current(Cursors.get_sizeNS());\n                        break;\n                    case 6:\n                        Cursor.set_current(Cursors.get_sizeNESW());\n                        break;\n                    case 7:\n                        Cursor.set_current(Cursors.get_sizeWE());\n                        break;\n                    case 8:\n                        Cursor.set_current(Cursors.get_sizeWE());\n                        break;\n                    case 10:\n                        break;\n                    case 11:\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        return false;\n    },\n\n    _showNoSelectionContextMenu: function (position) {\n        if (this._contextMenu != null) {\n            this._contextMenu._dispose();\n        }\n        if (this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        this._contextMenu = new ContextMenuStrip();\n        var pasteMenu = ToolStripMenuItem.create(Language.getLocalizedText(425, 'Paste'));\n        pasteMenu.enabled = this.clipboardType === 'WorldWideTelescope.Overlay';\n        pasteMenu.click = ss.bind('_pasteMenu_Click', this);\n        this._contextMenu.items.push(pasteMenu);\n        this._contextMenu._show(position);\n    },\n\n    _addOpenRectangle_Click: function (sender, e) {\n        this.addShape('', 6);\n    },\n\n    _addStar_Click: function (sender, e) {\n        this.addShape('', 2);\n    },\n\n    _insertShapeCircle_Click: function (sender, e) {\n        this.addShape('', 0);\n    },\n\n    _insertShapeRectangle_Click: function (sender, e) {\n        this.addShape('', 1);\n    },\n\n    _insertShapeLine_Click: function (sender, e) {\n        this.addShape('', 5);\n    },\n\n    _insertDonut_Click: function (sender, e) {\n        this.addShape('', 3);\n    },\n\n    _addArrow_Click: function (sender, e) {\n        this.addShape('', 4);\n    },\n\n    showSelectionContextMenu: function (position) {\n        if (this.get_focus() == null) {\n            return;\n        }\n        var multiSelect = this.selection.get_multiSelect();\n        if (this._contextMenu != null) {\n            this._contextMenu._dispose();\n        }\n        this._contextMenu = new ContextMenuStrip();\n        var cutMenu = ToolStripMenuItem.create(Language.getLocalizedText(427, 'Cut'));\n        var copyMenu = ToolStripMenuItem.create(Language.getLocalizedText(428, 'Copy'));\n        var pasteMenu = ToolStripMenuItem.create(Language.getLocalizedText(425, 'Paste'));\n        var deleteMenu = ToolStripMenuItem.create(Language.getLocalizedText(167, 'Delete'));\n        var sep1 = new ToolStripSeparator();\n        var sep2 = new ToolStripSeparator();\n        var sep3 = new ToolStripSeparator();\n        var bringToFront = ToolStripMenuItem.create(Language.getLocalizedText(452, 'Bring to Front'));\n        var sendToBack = ToolStripMenuItem.create(Language.getLocalizedText(453, 'Send to Back'));\n        var bringForward = ToolStripMenuItem.create(Language.getLocalizedText(454, 'Bring Forward'));\n        var sendBackward = ToolStripMenuItem.create(Language.getLocalizedText(455, 'Send Backward'));\n        var properties = ToolStripMenuItem.create(Language.getLocalizedText(20, 'Properties'));\n        var editText = ToolStripMenuItem.create(Language.getLocalizedText(502, 'Edit'));\n        var url = ToolStripMenuItem.create(Language.getLocalizedText(587, 'Hyperlink'));\n        var linkString = this.get_focus().get_linkID();\n        switch (this.get_focus().get_linkID()) {\n            case '':\n            case null:\n                linkString = ' (' + Language.getLocalizedText(609, 'No Link') + ')';\n                break;\n            case 'Next':\n                linkString = ' (' + Language.getLocalizedText(610, 'Next Slide') + ')';\n                break;\n            case 'Return':\n                linkString = ' (' + Language.getLocalizedText(602, 'Return to Caller') + ')';\n                break;\n            default:\n                var index = this.get_tour().getTourStopIndexByID(this.get_focus().get_linkID());\n                if (index > -1) {\n                    if (ss.emptyString(this._tour.get_tourStops()[index].get_description())) {\n                        linkString = ss.format(' (' + Language.getLocalizedText(1340, 'Slide') + ' {0})', index);\n                    }\n                    else {\n                        linkString = ' (' + this._tour.get_tourStops()[index].get_description() + ')';\n                    }\n                }\n                break;\n        }\n        var animateMenu = ToolStripMenuItem.create(Language.getLocalizedText(588, 'Animate'));\n        var linkID = ToolStripMenuItem.create(Language.getLocalizedText(589, 'Link to Slide') + linkString);\n        var pickColor = ToolStripMenuItem.create(Language.getLocalizedText(458, 'Color/Opacity'));\n        var flipbookProperties = ToolStripMenuItem.create(Language.getLocalizedText(630, 'Flipbook Properties'));\n        var interpolateMenu = ToolStripMenuItem.create(Language.getLocalizedText(1029, 'Animation Tween Type'));\n        var Linear = ToolStripMenuItem.create(Language.getLocalizedText(1030, 'Linear'));\n        var Ease = ToolStripMenuItem.create(Language.getLocalizedText(1031, 'Ease In/Out'));\n        var EaseIn = ToolStripMenuItem.create(Language.getLocalizedText(1032, 'Ease In'));\n        var EaseOut = ToolStripMenuItem.create(Language.getLocalizedText(1033, 'Ease Out'));\n        var Exponential = ToolStripMenuItem.create(Language.getLocalizedText(1034, 'Exponential'));\n        var Default = ToolStripMenuItem.create(Language.getLocalizedText(1035, 'Slide Default'));\n        var Align = ToolStripMenuItem.create(Language.getLocalizedText(790, 'Align'));\n        var AlignTop = ToolStripMenuItem.create(Language.getLocalizedText(1333, 'Top'));\n        var AlignBottom = ToolStripMenuItem.create(Language.getLocalizedText(1334, 'Bottom'));\n        var AlignLeft = ToolStripMenuItem.create(Language.getLocalizedText(1335, 'Left'));\n        var AlignRight = ToolStripMenuItem.create(Language.getLocalizedText(1336, 'Right'));\n        var AlignHorizon = ToolStripMenuItem.create(Language.getLocalizedText(1337, 'Horizontal'));\n        var AlignVertical = ToolStripMenuItem.create(Language.getLocalizedText(1338, 'Vertical'));\n        var AlignCenter = ToolStripMenuItem.create(Language.getLocalizedText(1339, 'Centered'));\n        Align.dropDownItems.push(AlignTop);\n        Align.dropDownItems.push(AlignBottom);\n        Align.dropDownItems.push(AlignLeft);\n        Align.dropDownItems.push(AlignRight);\n        Align.dropDownItems.push(AlignHorizon);\n        Align.dropDownItems.push(AlignVertical);\n        Align.dropDownItems.push(AlignCenter);\n        Linear.tag = 0;\n        Ease.tag = 3;\n        EaseIn.tag = 1;\n        EaseOut.tag = 2;\n        Exponential.tag = 4;\n        Default.tag = 5;\n        Linear.click = ss.bind('_interpolation_Click', this);\n        Ease.click = ss.bind('_interpolation_Click', this);\n        EaseIn.click = ss.bind('_interpolation_Click', this);\n        EaseOut.click = ss.bind('_interpolation_Click', this);\n        Exponential.click = ss.bind('_interpolation_Click', this);\n        Default.click = ss.bind('_interpolation_Click', this);\n        switch (this.get_focus().get_interpolationType()) {\n            case 0:\n                Linear.checked = true;\n                break;\n            case 1:\n                EaseIn.checked = true;\n                break;\n            case 2:\n                EaseOut.checked = true;\n                break;\n            case 3:\n                Ease.checked = true;\n                break;\n            case 4:\n                Exponential.checked = true;\n                break;\n            case 5:\n                Default.checked = true;\n                break;\n            default:\n                break;\n        }\n        interpolateMenu.dropDownItems.push(Default);\n        interpolateMenu.dropDownItems.push(Linear);\n        interpolateMenu.dropDownItems.push(Ease);\n        interpolateMenu.dropDownItems.push(EaseIn);\n        interpolateMenu.dropDownItems.push(EaseOut);\n        interpolateMenu.dropDownItems.push(Exponential);\n        cutMenu.click = ss.bind('_cutMenu_Click', this);\n        copyMenu.click = ss.bind('_copyMenu_Click', this);\n        deleteMenu.click = ss.bind('_deleteMenu_Click', this);\n        bringToFront.click = ss.bind('_bringToFront_Click', this);\n        sendToBack.click = ss.bind('_sendToBack_Click', this);\n        sendBackward.click = ss.bind('_sendBackward_Click', this);\n        bringForward.click = ss.bind('_bringForward_Click', this);\n        properties.click = ss.bind('_properties_Click', this);\n        editText.click = ss.bind('_editText_Click', this);\n        url.click = ss.bind('_url_Click', this);\n        pickColor.click = ss.bind('_pickColor_Click', this);\n        pasteMenu.click = ss.bind('_pasteMenu_Click', this);\n        animateMenu.click = ss.bind('_animateMenu_Click', this);\n        flipbookProperties.click = ss.bind('_flipbookProperties_Click', this);\n        linkID.click = ss.bind('_linkID_Click', this);\n        AlignTop.click = ss.bind('_alignTop_Click', this);\n        AlignBottom.click = ss.bind('_alignBottom_Click', this);\n        AlignLeft.click = ss.bind('_alignLeft_Click', this);\n        AlignRight.click = ss.bind('_alignRight_Click', this);\n        AlignHorizon.click = ss.bind('_alignHorizon_Click', this);\n        AlignVertical.click = ss.bind('_alignVertical_Click', this);\n        AlignCenter.click = ss.bind('_alignCenter_Click', this);\n        this._contextMenu.items.push(cutMenu);\n        this._contextMenu.items.push(copyMenu);\n        this._contextMenu.items.push(pasteMenu);\n        this._contextMenu.items.push(deleteMenu);\n        this._contextMenu.items.push(sep1);\n        this._contextMenu.items.push(bringToFront);\n        this._contextMenu.items.push(sendToBack);\n        this._contextMenu.items.push(bringForward);\n        this._contextMenu.items.push(sendBackward);\n        this._contextMenu.items.push(Align);\n        this._contextMenu.items.push(sep2);\n        pasteMenu.enabled = false;\n        this._contextMenu.items.push(pickColor);\n        this._contextMenu.items.push(url);\n        this._contextMenu.items.push(linkID);\n        this._contextMenu.items.push(animateMenu);\n        this._contextMenu.items.push(sep3);\n        this._contextMenu.items.push(flipbookProperties);\n        animateMenu.checked = this.get_focus().get_animate();\n        this._contextMenu.items.push(interpolateMenu);\n        interpolateMenu.enabled = this.get_focus().get_animate();\n        flipbookProperties.visible = (ss.canCast(this.get_focus(), FlipbookOverlay));\n        sep3.visible = (ss.canCast(this.get_focus(), FlipbookOverlay));\n        if (multiSelect) {\n            url.visible = false;\n            linkID.visible = false;\n            properties.visible = false;\n            flipbookProperties.visible = false;\n            bringForward.visible = false;\n            sendBackward.visible = false;\n        } else {\n            Align.visible = false;\n        }\n        this._contextMenu.items.push(properties);\n        if (this.get_focus() != null) {\n            if (ss.typeOf(this.get_focus()) === TextOverlay) {\n                this._contextMenu.items.push(editText);\n            }\n        }\n        this._contextMenu._show(position);\n    },\n\n    _editText_Click: function (sender, e) {\n        if (this.get_focus() != null) {\n            if (ss.typeOf(this.get_focus()) === TextOverlay) {\n                this._editText();\n            }\n        }\n    },\n\n    _alignVertical_Click: function (sender, e) {\n        if (this.get_focus() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(1036, 'Vertical Align'), this._tour));\n        var xCenter = this.get_focus().get_x();\n        var $enum1 = ss.enumerate(this.selection.selectionSet);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.set_x(xCenter);\n        }\n    },\n\n    _alignHorizon_Click: function (sender, e) {\n        if (this.get_focus() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(1037, 'Horizontal Align'), this._tour));\n        var yCenter = this.get_focus().get_y();\n        var $enum1 = ss.enumerate(this.selection.selectionSet);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.set_y(yCenter);\n        }\n    },\n\n    _alignCenter_Click: function (sender, e) {\n        if (this.get_focus() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(1038, 'Align Centers'), this._tour));\n        var yCenter = this.get_focus().get_y();\n        var xCenter = this.get_focus().get_x();\n        var $enum1 = ss.enumerate(this.selection.selectionSet);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.set_y(yCenter);\n            overlay.set_x(xCenter);\n        }\n    },\n\n    _alignRight_Click: function (sender, e) {\n        if (this.get_focus() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(1040, 'Align Right'), this._tour));\n        var left = this.get_focus().get_x() + this.get_focus().get_width() / 2;\n        var $enum1 = ss.enumerate(this.selection.selectionSet);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.set_x(left - overlay.get_width() / 2);\n        }\n    },\n\n    _alignLeft_Click: function (sender, e) {\n        if (this.get_focus() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(1041, 'Align Left'), this._tour));\n        var right = this.get_focus().get_x() - this.get_focus().get_width() / 2;\n        var $enum1 = ss.enumerate(this.selection.selectionSet);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.set_x(right + overlay.get_width() / 2);\n        }\n    },\n\n    _alignBottom_Click: function (sender, e) {\n        if (this.get_focus() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(1042, 'Align Bottoms'), this._tour));\n        var top = this.get_focus().get_y() + this.get_focus().get_height() / 2;\n        var $enum1 = ss.enumerate(this.selection.selectionSet);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.set_y(top - overlay.get_height() / 2);\n        }\n    },\n\n    _alignTop_Click: function (sender, e) {\n        if (this.get_focus() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(1039, 'Align Tops'), this._tour));\n        var top = this.get_focus().get_y() - this.get_focus().get_height() / 2;\n        var $enum1 = ss.enumerate(this.selection.selectionSet);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.set_y(top + overlay.get_height() / 2);\n        }\n    },\n\n    _interpolation_Click: function (sender, e) {\n        var item = sender;\n        if (this.get_focus() != null) {\n            var $enum1 = ss.enumerate(this.selection.selectionSet);\n            while ($enum1.moveNext()) {\n                var overlay = $enum1.current;\n                overlay.set_interpolationType(item.tag);\n            }\n        }\n    },\n\n    _linkSlideChosen: function () {\n        if (this.selectDialog.get_OK()) {\n            this.get_focus().set_linkID(this.selectDialog.get_id());\n        }\n    },\n\n    _linkID_Click: function (sender, e) {\n        this.selectDialog = new SelectLink(this.get_focus().get_linkID());\n        this.nextSlideCallback(this.selectDialog, ss.bind('_linkSlideChosen', this));\n    },\n\n    _flipbookProperties_Click: function (sender, e) { },\n\n    _animateMenu_Click: function (sender, e) {\n        if (this.get_focus() != null) {\n            Undo.push(new UndoTourStopChange(Language.getLocalizedText(588, 'Animate'), this._tour));\n            var animate = !this.get_focus().get_animate();\n            var $enum1 = ss.enumerate(this.selection.selectionSet);\n            while ($enum1.moveNext()) {\n                var overlay = $enum1.current;\n                overlay.set_animate(animate);\n            }\n        }\n    },\n\n    _url_Click: function (sender, e) {\n        var $this = this;\n\n        if (this.get_focus() != null) {\n            var input = new SimpleInput(Language.getLocalizedText(541, 'Edit Hyperlink'), Language.getLocalizedText(542, 'Url'), this.get_focus().get_url(), 2048);\n            input.show(Cursor.get_position(), function () {\n                Undo.push(new UndoTourStopChange(Language.getLocalizedText(541, 'Edit Hyperlink'), $this._tour));\n                $this.get_focus().set_url(input.text);\n            });\n        }\n    },\n\n    _pickColor_Click: function (sender, e) {\n        var $this = this;\n\n        var picker = new ColorPicker();\n        picker.color = this.get_focus().get_color();\n        picker.callBack = function () {\n            Undo.push(new UndoTourStopChange(Language.getLocalizedText(543, 'Edit Color'), $this._tour));\n            var $enum1 = ss.enumerate($this.selection.selectionSet);\n            while ($enum1.moveNext()) {\n                var overlay = $enum1.current;\n                overlay.set_color(picker.color);\n            }\n        };\n        picker.show(e);\n    },\n\n    _volume_Click: function (sender, e) {\n        var vol = new PopupVolume();\n        vol.volume = (this.get_focus()).get_volume();\n        vol.showDialog();\n        (this.get_focus()).set_volume(vol.volume);\n    },\n\n    _deleteMenu_Click: function (sender, e) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(167, 'Delete'), this._tour));\n        var $enum1 = ss.enumerate(this.selection.selectionSet);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            this._tour.get_currentTourStop().removeOverlay(overlay);\n        }\n        this.set_focus(null);\n        this.clearSelection();\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n    },\n\n    _properties_Click: function (sender, e) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(549, 'Properties Edit'), this._tour));\n        var props = new OverlayProperties();\n        props.overlay = this.get_focus();\n        props.showDialog();\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n    },\n\n    _bringForward_Click: function (sender, e) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(454, 'Bring Forward'), this._tour));\n        var $enum1 = ss.enumerate(this._getSortedSelection(false));\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            this._tour.get_currentTourStop().bringForward(overlay);\n        }\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n    },\n\n    _sendBackward_Click: function (sender, e) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(455, 'Send Backward'), this._tour));\n        var $enum1 = ss.enumerate(this._getSortedSelection(true));\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            this._tour.get_currentTourStop().sendBackward(overlay);\n        }\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n    },\n\n    _sendToBack_Click: function (sender, e) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(453, 'Send to Back'), this._tour));\n        var $enum1 = ss.enumerate(this._getSortedSelection(true));\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            this._tour.get_currentTourStop().sendToBack(overlay);\n        }\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n    },\n\n    _bringToFront_Click: function (sender, e) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(452, 'Bring to Front'), this._tour));\n        var $enum1 = ss.enumerate(this._getSortedSelection(false));\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            this._tour.get_currentTourStop().bringToFront(overlay);\n        }\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n    },\n\n    _getSortedSelection: function (reverse) {\n        var sorted = [];\n        var $enum1 = ss.enumerate(this.selection.selectionSet);\n        while ($enum1.moveNext()) {\n            var ov = $enum1.current;\n            sorted.push(ov);\n        }\n        if (reverse) {\n            sorted.sort(function (p1, p2) {\n                return -Util.compare(p1.get_zOrder(), p2.get_zOrder());\n            });\n        } else {\n            sorted.sort(function (p1, p2) {\n                return Util.compare(p1.get_zOrder(), p2.get_zOrder());\n            });\n        }\n        return sorted;\n    },\n\n    _copyMenu_Click: function (sender, e) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        var writer = new XmlTextWriter();\n        writer._writeProcessingInstruction('xml', \"version='1.0' encoding='UTF-8'\");\n        writer._writeStartElement('Overlays');\n        var $enum1 = ss.enumerate(this.selection.selectionSet);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.saveToXml(writer, true);\n        }\n        writer._writeEndElement();\n        this.clipboardData = writer.body;\n        this.clipboardType = 'WorldWideTelescope.Overlay';\n    },\n\n    _cutMenu_Click: function (sender, e) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(427, 'Cut'), this._tour));\n        this._copyMenu_Click(sender, e);\n        var $enum1 = ss.enumerate(this.selection.selectionSet);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            this._tour.get_currentTourStop().removeOverlay(overlay);\n        }\n        this.set_focus(null);\n        this.clearSelection();\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n    },\n\n    _pasteMenu_Click: function (sender, e) {\n        Undo.push(new UndoTourSlidelistChange(Language.getLocalizedText(544, 'Paste Object'), this._tour));\n        if (this.clipboardType === 'WorldWideTelescope.Overlay') {\n            var xParser = new DOMParser();\n            var doc = xParser.parseFromString(this.clipboardData, 'text/xml');\n            this.clearSelection();\n            var parent = Util.selectSingleNode(doc, 'Overlays');\n            var $enum1 = ss.enumerate(parent.childNodes);\n            while ($enum1.moveNext()) {\n                var child = $enum1.current;\n                if (child.nodeName === 'Overlay') {\n                    var copy = Overlay._fromXml(this._tour.get_currentTourStop(), child);\n                    var found = false;\n                    var maxX = 0;\n                    var maxY = 0;\n                    var $enum2 = ss.enumerate(this._tour.get_currentTourStop().get_overlays());\n                    while ($enum2.moveNext()) {\n                        var item = $enum2.current;\n                        if (item.id === copy.id && ss.typeOf(item) === ss.typeOf(copy)) {\n                            found = true;\n                            if (maxY < item.get_y() || maxX < item.get_x()) {\n                                maxX = item.get_x();\n                                maxY = item.get_y();\n                            }\n                        }\n                    }\n                    if (found) {\n                        copy.set_x(maxX + 20);\n                        copy.set_y(maxY + 20);\n                    }\n                    this._tour.get_currentTourStop().addOverlay(copy);\n                    this.set_focus(copy);\n                    this.selection.addSelection(this.get_focus());\n                    OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n                }\n            }\n        }\n    },\n\n    mouseClick: function (sender, e) {\n        if (TourEditor.currentEditor != null) {\n            if (TourEditor.currentEditor.mouseClick(sender, e)) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    click: function (sender, e) {\n        if (TourEditor.currentEditor != null) {\n            if (TourEditor.currentEditor.click(sender, e)) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    mouseDoubleClick: function (sender, e) {\n        if (TourEditor.currentEditor != null) {\n            if (TourEditor.currentEditor.mouseDoubleClick(sender, e)) {\n                return true;\n            }\n        }\n        if (this.get_focus() != null) {\n            if (ss.typeOf(this.get_focus()) === TextOverlay) {\n                this._editText();\n                return true;\n            }\n        }\n        return true;\n    },\n\n    _doneEditing: function () {\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(545, 'Text Edit'), this._tour));\n        (this.get_focus()).set_width(0);\n        (this.get_focus()).set_height(0);\n        this.get_focus().set_color((this.get_focus()).textObject.foregroundColor);\n        this.get_focus().cleanUp();\n    },\n\n    _editText: function () {\n        var textObj = (this.get_focus()).textObject;\n        this.editTextCallback(textObj, ss.bind('_doneEditing', this));\n    },\n\n    keyDown: function (sender, e) {\n        if (TourEditor.currentEditor != null) {\n            if (TourEditor.currentEditor.keyDown(sender, e)) {\n                return true;\n            }\n        }\n        var increment = 1;\n        if (e.ctrlKey) {\n            increment = 10;\n        }\n        switch (e.keyCode) {\n            case 65:\n                if (e.ctrlKey) {\n                    this.clearSelection();\n                    this.selection.addSelectionRange(this._tour.get_currentTourStop().get_overlays());\n                    OverlayList._updateOverlayListSelection(this.selection);\n                    if (this._tour.get_currentTourStop().get_overlays().length > 0) {\n                        this.set_focus(this._tour.get_currentTourStop().get_overlays()[0]);\n                    }\n                }\n                break;\n            case 90:\n                if (e.ctrlKey) {\n                    if (Undo.peekAction()) {\n                        TourEdit._undoStep();\n                    }\n                    else {\n                        UiTools._beep();\n                    }\n                }\n                break;\n            case 89:\n                if (e.ctrlKey) {\n                    if (Undo.peekRedoAction()) {\n                        TourEdit._redoStep();\n                    }\n                    else {\n                        UiTools._beep();\n                    }\n                }\n                break;\n            case 67:\n                if (e.ctrlKey) {\n                    this._copyMenu_Click(this, new ss.EventArgs());\n                }\n                break;\n            case 86:\n                if (e.ctrlKey) {\n                    this._pasteMenu_Click(this, new ss.EventArgs());\n                }\n                break;\n            case 88:\n                if (e.ctrlKey) {\n                    this._cutMenu_Click(this, new ss.EventArgs());\n                }\n                break;\n            case 46:\n                this._deleteMenu_Click(null, null);\n                return true;\n            case 9:\n                if (e.shiftKey) {\n                    this._selectLast();\n                }\n                else {\n                    this._selectNext();\n                }\n                return true;\n            case 37:\n                if (this.get_focus() != null) {\n                    var $enum1 = ss.enumerate(this.selection.selectionSet);\n                    while ($enum1.moveNext()) {\n                        var overlay = $enum1.current;\n                        if (e.shiftKey) {\n                            if (e.altKey) {\n                                if (overlay.get_width() > increment) {\n                                    Undo.push(new UndoTourStopChange(Language.getLocalizedText(537, 'Resize'), this._tour));\n                                    overlay.set_width(overlay.get_width() - increment);\n                                }\n                            }\n                            else {\n                                var aspect = overlay.get_width() / overlay.get_height();\n                                if (overlay.get_width() > increment && overlay.get_height() > (increment * aspect)) {\n                                    Undo.push(new UndoTourStopChange(Language.getLocalizedText(537, 'Resize'), this._tour));\n                                    overlay.set_width(overlay.get_width() - increment);\n                                    overlay.set_height(overlay.get_height() - increment * aspect);\n                                }\n                            }\n                        }\n                        else if (e.altKey) {\n                            Undo.push(new UndoTourStopChange(Language.getLocalizedText(538, 'Rotate'), this._tour));\n                            overlay.set_rotationAngle(overlay.get_rotationAngle() - increment);\n                        }\n                        else {\n                            Undo.push(new UndoTourStopChange(Language.getLocalizedText(540, 'Move'), this._tour));\n                            overlay.set_x(overlay.get_x() - increment);\n                        }\n                    }\n                    return true;\n                }\n                break;\n            case 39:\n                if (this.get_focus() != null) {\n                    var $enum2 = ss.enumerate(this.selection.selectionSet);\n                    while ($enum2.moveNext()) {\n                        var overlay = $enum2.current;\n                        if (e.shiftKey) {\n                            Undo.push(new UndoTourStopChange(Language.getLocalizedText(537, 'Resize'), this._tour));\n                            if (e.altKey) {\n                                overlay.set_width(overlay.get_width() + increment);\n                            }\n                            else {\n                                var aspect = overlay.get_width() / overlay.get_height();\n                                overlay.set_width(overlay.get_width() + increment);\n                                overlay.set_height(overlay.get_height() + increment * aspect);\n                            }\n                        }\n                        else if (e.altKey) {\n                            Undo.push(new UndoTourStopChange(Language.getLocalizedText(538, 'Rotate'), this._tour));\n                            overlay.set_rotationAngle(overlay.get_rotationAngle() + increment);\n                        }\n                        else {\n                            Undo.push(new UndoTourStopChange(Language.getLocalizedText(540, 'Move'), this._tour));\n                            overlay.set_x(overlay.get_x() + increment);\n                        }\n                    }\n                    return true;\n                }\n                break;\n            case 38:\n                if (this.get_focus() != null) {\n                    var $enum3 = ss.enumerate(this.selection.selectionSet);\n                    while ($enum3.moveNext()) {\n                        var overlay = $enum3.current;\n                        if (e.shiftKey) {\n                            Undo.push(new UndoTourStopChange(Language.getLocalizedText(537, 'Resize'), this._tour));\n                            if (e.altKey) {\n                                overlay.set_height(overlay.get_height() + increment);\n                            }\n                            else {\n                                var aspect = overlay.get_width() / overlay.get_height();\n                                overlay.set_width(overlay.get_width() + increment);\n                                overlay.set_height(overlay.get_height() + increment * aspect);\n                            }\n                        }\n                        else if (!e.altKey) {\n                            Undo.push(new UndoTourStopChange(Language.getLocalizedText(540, 'Move'), this._tour));\n                            overlay.set_y(overlay.get_y() - increment);\n                        }\n                    }\n                    return true;\n                }\n                break;\n            case 40:\n                if (this.get_focus() != null) {\n                    var $enum4 = ss.enumerate(this.selection.selectionSet);\n                    while ($enum4.moveNext()) {\n                        var overlay = $enum4.current;\n                        if (e.shiftKey) {\n                            if (e.altKey) {\n                                if (overlay.get_height() > increment) {\n                                    Undo.push(new UndoTourStopChange(Language.getLocalizedText(537, 'Resize'), this._tour));\n                                    overlay.set_height(overlay.get_height() - increment);\n                                }\n                            }\n                            else {\n                                var aspect = overlay.get_width() / overlay.get_height();\n                                if (overlay.get_width() > increment && overlay.get_height() > (increment * aspect)) {\n                                    Undo.push(new UndoTourStopChange(Language.getLocalizedText(537, 'Resize'), this._tour));\n                                    overlay.set_width(overlay.get_width() - increment);\n                                    overlay.set_height(overlay.get_height() - increment * aspect);\n                                }\n                            }\n                        }\n                        else if (!e.altKey) {\n                            Undo.push(new UndoTourStopChange(Language.getLocalizedText(540, 'Move'), this._tour));\n                            overlay.set_y(overlay.get_y() + increment);\n                        }\n                    }\n                    return true;\n                }\n                break;\n            case 34:\n                // Next Slide\n                if (e.altKey) {\n                    if (this._tour.get_currentTourstopIndex() < (this._tour.get_tourStops().length - 1)) {\n                        this._tour.set_currentTourstopIndex(this._tour.get_currentTourstopIndex() + 1) - 1;\n                        TourEdit._selectCurrent();\n                        TourEdit._ensureSelectedVisible();\n                    }\n                    return true;\n                }\n                break;\n            case 33:\n                // Prev Slide\n                if (e.altKey) {\n                    if (this._tour.get_currentTourstopIndex() > 0) {\n                        this._tour.set_currentTourstopIndex(this._tour.get_currentTourstopIndex() - 1) + 1;\n                        TourEdit._selectCurrent();\n                        TourEdit._ensureSelectedVisible();\n                    }\n                    return true;\n                }\n                break;\n        }\n        return false;\n    },\n\n    _selectNext: function () {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        this.set_focus(this._tour.get_currentTourStop().getNextOverlay(this.get_focus()));\n        this.selection.setSelection(this.get_focus());\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n    },\n\n    _selectLast: function () {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        this.set_focus(this._tour.get_currentTourStop().getPerviousOverlay(this.get_focus()));\n        this.selection.setSelection(this.get_focus());\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n    },\n\n    keyUp: function (sender, e) {\n        if (TourEditor.currentEditor != null) {\n            if (TourEditor.currentEditor.keyUp(sender, e)) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    addPicture: function (file) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return false;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(546, 'Insert Picture'), this._tour));\n        var bmp = BitmapOverlay.create(this._tour.get_currentTourStop(), file);\n        bmp.set_x(960);\n        bmp.set_y(600);\n        this._tour.get_currentTourStop().addOverlay(bmp);\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n        return true;\n    },\n\n    addFlipbook: function (filename) {\n        return false;\n    },\n\n    addAudio: function (file, music) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return false;\n        }\n        var audio = AudioOverlay.create(this._tour.get_currentTourStop(), file);\n        audio.set_x(900);\n        audio.set_y(600);\n        if (music) {\n            this._tour.get_currentTourStop().set_musicTrack(audio);\n        } else {\n            this._tour.get_currentTourStop().set_voiceTrack(audio);\n        }\n        return true;\n    },\n\n    addVideo: function (filename) {\n        return true;\n    },\n\n    addText: function (p, textObject) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return false;\n        }\n        var text = TextOverlay.create(textObject);\n        text.set_color(textObject.foregroundColor);\n        text.set_x(960);\n        text.set_y(600);\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(547, 'Insert Text'), this._tour));\n        this._tour.get_currentTourStop().addOverlay(text);\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n        return true;\n    },\n\n    addOverlay: function (ol) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return null;\n        }\n        if (ss.typeOf(ol) === ShapeOverlay) {\n            var srcShapeOverlay = ol;\n            if (srcShapeOverlay != null) {\n                var shape = ShapeOverlay._create(this._tour.get_currentTourStop(), srcShapeOverlay.get_shapeType());\n                shape.set_width(srcShapeOverlay.get_width());\n                shape.set_height(srcShapeOverlay.get_height());\n                shape.set_x(this._contextPoint.x);\n                shape.set_y(this._contextPoint.y);\n                shape.set_color(srcShapeOverlay.get_color());\n                shape.set_rotationAngle(srcShapeOverlay.get_rotationAngle());\n                this._tour.get_currentTourStop().addOverlay(shape);\n                return shape;\n            }\n        } else if (ss.typeOf(ol) === TextOverlay) {\n            var srcTxtOverlay = ol;\n            if (srcTxtOverlay != null) {\n                var text = TextOverlay.create(srcTxtOverlay.textObject);\n                text.set_x(this._contextPoint.x);\n                text.set_y(this._contextPoint.y);\n                text.set_color(srcTxtOverlay.get_color());\n                this._tour.get_currentTourStop().addOverlay(text);\n                return text;\n            }\n        } else if (ss.typeOf(ol) === BitmapOverlay) {\n            var srcBmpOverlay = ol;\n            if (srcBmpOverlay != null) {\n                var bitmap = srcBmpOverlay.copy(this._tour.get_currentTourStop());\n                bitmap.set_x(this._contextPoint.x);\n                bitmap.set_y(this._contextPoint.y);\n                this._tour.get_currentTourStop().addOverlay(bitmap);\n                return bitmap;\n            }\n        } else if (ss.typeOf(ol) === FlipbookOverlay) {\n            var srcFlipbookOverlay = ol;\n            if (srcFlipbookOverlay != null) {\n                var bitmap = srcFlipbookOverlay.copy(this._tour.get_currentTourStop());\n                bitmap.set_x(this._contextPoint.x);\n                bitmap.set_y(this._contextPoint.y);\n                this._tour.get_currentTourStop().addOverlay(bitmap);\n                return bitmap;\n            }\n        }\n        return null;\n    },\n\n    addShape: function (p, shapeType) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return false;\n        }\n        Undo.push(new UndoTourStopChange(Language.getLocalizedText(548, 'Insert Shape'), this._tour));\n        var shape = ShapeOverlay._create(this._tour.get_currentTourStop(), shapeType);\n        shape.set_width(200);\n        shape.set_height(200);\n        if (shapeType === 4) {\n            shape.set_height(shape.get_height() / 2);\n        }\n        if (shapeType === 5) {\n            shape.set_height(12);\n        }\n        shape.set_x(960);\n        shape.set_y(600);\n        this._tour.get_currentTourStop().addOverlay(shape);\n        this.set_focus(shape);\n        this.selection.setSelection(this.get_focus());\n        OverlayList._updateOverlayList(this._tour.get_currentTourStop(), this.selection);\n        return true;\n    },\n\n    getCurrentColor: function () {\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return this._defaultColor;\n        }\n        if (this.get_focus() != null) {\n            return this.get_focus().get_color();\n        } else {\n            return this._defaultColor;\n        }\n    },\n\n    setCurrentColor: function (color) {\n        this._defaultColor = color;\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return;\n        }\n        if (this.get_focus() != null) {\n            this.get_focus().set_color(color);\n        }\n    },\n\n    dispose: function () {\n        if (this._contextMenu != null) {\n            this._contextMenu._dispose();\n            this._contextMenu = null;\n        }\n    },\n\n    hover: function (pnt) {\n        if (TourEditor.currentEditor != null) {\n            if (TourEditor.currentEditor.hover(pnt)) {\n                return true;\n            }\n        }\n        return true;\n    }\n};\n\nregisterType(\"TourEditor\", [TourEditor, TourEditor$, null, IUiController]);\n\n\n// wwtlib.OverlayList\n\nexport function OverlayList() { }\n\nOverlayList._updateOverlayList = function (currentTourStop, selection) { };\n\nOverlayList._updateOverlayListSelection = function (selection) { };\n\nvar OverlayList$ = {};\n\nregisterType(\"OverlayList\", [OverlayList, OverlayList$, null]);\n\n\n// wwtlib.TourEdit\n\nexport function TourEdit() { }\n\nTourEdit._ensureSelectedVisible = function () { };\n\nTourEdit._selectCurrent = function () { };\n\nTourEdit._undoStep = function () {\n    if (Undo.peekAction()) {\n        Undo.stepBack();\n    }\n};\n\nTourEdit._redoStep = function () {\n    if (Undo.peekRedoAction()) {\n        Undo.stepForward();\n    }\n};\n\nvar TourEdit$ = {};\n\nregisterType(\"TourEdit\", [TourEdit, TourEdit$, null]);\n\n\n// wwtlib.SoundEditor\n\nexport function SoundEditor() {\n    this.target = null;\n}\n\nvar SoundEditor$ = {};\n\nregisterType(\"SoundEditor\", [SoundEditor, SoundEditor$, null]);\n\n\n// wwtlib.TourStopList\n\nexport function TourStopList() {\n    this.tour = null;\n    this.showAddButton = false;\n    this.selectedItems = null;\n    this.selectedItem = -1;\n    this.refreshCallback = null;\n    this.multipleSelection = false;\n    this.hitType = false;\n}\n\nvar TourStopList$ = {\n    selectAll: function () {\n        this.selectedItems = {};\n        for (var i = 0; i < this.tour.get_tourStops().length; i++) {\n            this.selectedItems[i] = this.tour.get_tourStops()[i];\n        }\n    },\n\n    refresh: function () {\n        if (this.refreshCallback != null) {\n            this.refreshCallback();\n        }\n    },\n\n    findItem: function (ts) {\n        return -1;\n    },\n\n    ensureSelectedVisible: function () { },\n\n    ensureAddVisible: function () { }\n};\n\nregisterType(\"TourStopList\", [TourStopList, TourStopList$, null]);\n\n\n// wwtlib.TimeLine\n\nexport function TimeLine() { }\n\nTimeLine.refreshUi = function () { };\n\nvar TimeLine$ = {};\n\nregisterType(\"TimeLine\", [TimeLine, TimeLine$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Infrastructure for playing back tours.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { Vector2d } from \"../double3d.js\";\nimport { Util } from \"../baseutil.js\";\nimport { BlendState } from \"../blend_state.js\";\nimport { CameraParameters } from \"../camera_parameters.js\";\nimport { IUiController } from \"../interfaces.js\";\nimport { globalScriptInterface, globalWWTControl, setManagerVisibleLayerList } from \"../data_globals.js\";\nimport { Settings } from \"../settings.js\";\nimport { SpaceTimeController } from \"../space_time_controller.js\";\nimport { ViewMoverKenBurnsStyle } from \"../view_mover.js\";\nimport { TextOverlay } from \"./overlay.js\";\n\n\n// wwtlib.TourPlayer\n\nexport function TourPlayer() {\n    this._overlayBlend = BlendState.create(false, 1000);\n    this._tour = null;\n    this._onTarget = false;\n    this._currentMasterSlide = null;\n    this._callStack = new ss.Stack();\n    this._leaveSettingsWhenStopped = false;\n}\n\nTourPlayer._playing = false;\nTourPlayer._switchedToFullScreen = false;\nTourPlayer.noRestoreUIOnStop = false;\n\nTourPlayer.get_playing = function () {\n    return TourPlayer._playing;\n};\n\nTourPlayer.set_playing = function (value) {\n    TourPlayer._playing = value;\n    return value;\n};\n\nTourPlayer.add_tourEnded = function (value) {\n    TourPlayer.__tourEnded = ss.bindAdd(TourPlayer.__tourEnded, value);\n};\n\nTourPlayer.remove_tourEnded = function (value) {\n    TourPlayer.__tourEnded = ss.bindSub(TourPlayer.__tourEnded, value);\n};\n\nvar TourPlayer$ = {\n    render: function (renderContext) {\n        if (this._tour == null || this._tour.get_currentTourStop() == null || !TourPlayer._playing) {\n            return;\n        }\n        renderContext.save();\n        this.updateSlideStates();\n        if (!this._onTarget) {\n            this._slideStartTime = ss.now();\n            if (renderContext.onTarget(this.get_tour().get_currentTourStop().get_target())) {\n                this._onTarget = true;\n                this._overlayBlend.set_state(!this.get_tour().get_currentTourStop().get_fadeInOverlays());\n                this._overlayBlend.set_targetState(true);\n                if (this._tour.get_currentTourStop().get_musicTrack() != null) {\n                    this._tour.get_currentTourStop().get_musicTrack().seek(0);\n                    this._tour.get_currentTourStop().get_musicTrack().play();\n                }\n                if (this._tour.get_currentTourStop().get_voiceTrack() != null) {\n                    this._tour.get_currentTourStop().get_voiceTrack().seek(0);\n                    this._tour.get_currentTourStop().get_voiceTrack().play();\n                }\n                var caption = '';\n                var $enum1 = ss.enumerate(this._tour.get_currentTourStop().get_overlays());\n                while ($enum1.moveNext()) {\n                    var overlay = $enum1.current;\n                    if (overlay.get_name().toLowerCase() === 'caption') {\n                        var text = ss.safeCast(overlay, TextOverlay);\n                        if (text != null) {\n                            caption = text.textObject.text;\n                        }\n                    }\n                    overlay.play();\n                }\n                setManagerVisibleLayerList(this._tour.get_currentTourStop().layers);\n                if (this._tour.get_currentTourStop().get_endTarget() != null && this._tour.get_currentTourStop().get_endTarget().get_zoomLevel() !== -1) {\n                    if (this._tour.get_currentTourStop().get_target().get_type() === 4) {\n                        // TODO fix this when Planets are implemented\n                        //tour.CurrentTourStop.Target.UpdatePlanetLocation(SpaceTimeController.UtcToJulian(tour.CurrentTourStop.StartTime));\n                        //tour.CurrentTourStop.EndTarget.UpdatePlanetLocation(SpaceTimeController.UtcToJulian(tour.CurrentTourStop.EndTime));\n                    }\n                    renderContext.viewMover = new ViewMoverKenBurnsStyle(this._tour.get_currentTourStop().get_target().get_camParams(), this._tour.get_currentTourStop().get_endTarget().get_camParams(), this._tour.get_currentTourStop().get_duration() / 1000, this._tour.get_currentTourStop().get_startTime(), this._tour.get_currentTourStop().get_endTime(), this._tour.get_currentTourStop().get_interpolationType());\n                }\n                Settings.tourSettings = this._tour.get_currentTourStop();\n                SpaceTimeController.set_now(this._tour.get_currentTourStop().get_startTime());\n                SpaceTimeController.set_syncToClock(false);\n                globalScriptInterface._fireSlideChanged(caption);\n            }\n        }\n        if (renderContext.gl != null) {\n            renderContext.setupMatricesOverlays();\n            if (this._currentMasterSlide != null) {\n                var $enum2 = ss.enumerate(this._currentMasterSlide.get_overlays());\n                while ($enum2.moveNext()) {\n                    var overlay = $enum2.current;\n                    overlay.set_tweenFactor(1);\n                    overlay.draw3D(renderContext, false);\n                }\n            }\n            if (this._onTarget) {\n                var $enum3 = ss.enumerate(this._tour.get_currentTourStop().get_overlays());\n                while ($enum3.moveNext()) {\n                    var overlay = $enum3.current;\n                    if (overlay.get_name().toLowerCase() !== 'caption' || globalScriptInterface.get_showCaptions()) {\n                        overlay.set_tweenFactor(CameraParameters.easeCurve(this._tour.get_currentTourStop().get_tweenPosition(), (overlay.get_interpolationType() === 5) ? this._tour.get_currentTourStop().get_interpolationType() : overlay.get_interpolationType()));\n                        overlay.draw3D(renderContext, false);\n                    }\n                }\n            }\n            renderContext.restore();\n\n            // There used to be code to draw on-screen tour player controls here.\n            // In the web engine, that kind of work is now taken care of at higher levels.\n            //DrawPlayerControls(renderContext);\n        } else {\n            renderContext.device.scale(renderContext.height / 1116, renderContext.height / 1116);\n            var aspectOrig = 1920 / 1116;\n            var aspectNow = renderContext.width / renderContext.height;\n            renderContext.device.translate(-((1920 - (aspectNow * 1116)) / 2), 0);\n            if (this._currentMasterSlide != null) {\n                var $enum4 = ss.enumerate(this._currentMasterSlide.get_overlays());\n                while ($enum4.moveNext()) {\n                    var overlay = $enum4.current;\n                    overlay.set_tweenFactor(1);\n                    overlay.draw3D(renderContext, false);\n                }\n            }\n            if (this._onTarget) {\n                var $enum5 = ss.enumerate(this._tour.get_currentTourStop().get_overlays());\n                while ($enum5.moveNext()) {\n                    var overlay = $enum5.current;\n                    if (overlay.get_name().toLowerCase() !== 'caption' || globalScriptInterface.get_showCaptions()) {\n                        overlay.set_tweenFactor(CameraParameters.easeCurve(this._tour.get_currentTourStop().get_tweenPosition(), (overlay.get_interpolationType() === 5) ? this._tour.get_currentTourStop().get_interpolationType() : overlay.get_interpolationType()));\n                        overlay.draw3D(renderContext, false);\n                    }\n                }\n            }\n            else {\n                var i = 0;\n            }\n            renderContext.restore();\n        }\n    },\n\n    get_tour: function () {\n        return this._tour;\n    },\n\n    set_tour: function (value) {\n        this._tour = value;\n        return value;\n    },\n\n    nextSlide: function () {\n        if (this._tour.get_currentTourStop() != null) {\n            if (!this._tour.get_currentTourStop().get_masterSlide()) {\n                if (this._tour.get_currentTourStop().get_musicTrack() != null) {\n                    this._tour.get_currentTourStop().get_musicTrack().stop();\n                }\n                if (this._tour.get_currentTourStop().get_voiceTrack() != null) {\n                    this._tour.get_currentTourStop().get_voiceTrack().stop();\n                }\n                var $enum1 = ss.enumerate(this._tour.get_currentTourStop().get_overlays());\n                while ($enum1.moveNext()) {\n                    var overlay = $enum1.current;\n                    overlay.stop();\n                }\n            }\n            else {\n                this._currentMasterSlide = this._tour.get_currentTourStop();\n            }\n        }\n        if (this._tour.get_currentTourstopIndex() < (this._tour.get_tourStops().length - 1) || this._tour.get_currentTourStop().get_isLinked()) {\n            if (this._tour.get_currentTourStop().get_endTarget() != null) {\n                globalWWTControl.gotoTargetFull(false, true, this._tour.get_currentTourStop().get_endTarget().get_camParams(), this._tour.get_currentTourStop().get_target().get_studyImageset(), this._tour.get_currentTourStop().get_target().get_backgroundImageset());\n                globalWWTControl.set__mover(null);\n            }\n            this._onTarget = false;\n            if (this._tour.get_currentTourStop().get_isLinked()) {\n                try {\n                    switch (this._tour.get_currentTourStop().get_nextSlide()) {\n                        case 'Return':\n                            if (this._callStack.count > 0) {\n                                this.playFromTourstop(this._tour.get_tourStops()[this._callStack.pop()]);\n                            }\n                            else {\n                                this._tour.set_currentTourstopIndex(this._tour.get_tourStops().length - 1);\n                            }\n                            break;\n                        default:\n                            this.playFromTourstop(this._tour.get_tourStops()[this._tour.getTourStopIndexByID(this._tour.get_currentTourStop().get_nextSlide())]);\n                            break;\n                    }\n                }\n                catch ($e2) {\n                    if (this._tour.get_currentTourstopIndex() < (this._tour.get_tourStops().length - 1)) {\n                        this._tour.set_currentTourstopIndex(this._tour.get_currentTourstopIndex() + 1) - 1;\n                    }\n                }\n            }\n            else {\n                this._tour.set_currentTourstopIndex(this._tour.get_currentTourstopIndex() + 1) - 1;\n            }\n            if (this._currentMasterSlide != null && this._tour.get_currentTourStop().get_masterSlide()) {\n                this._stopCurrentMaster();\n            }\n            var instant = false;\n            switch (this._tour.get_currentTourStop().get__transition()) {\n                case 0:\n                    break;\n                case 1:\n                    instant = true;\n                    break;\n                case 2:\n                    instant = true;\n                    break;\n                case 3:\n                    instant = true;\n                    break;\n                case 5:\n                    instant = true;\n                    break;\n                case 4:\n                    instant = true;\n                    break;\n                default:\n                    break;\n            }\n            globalWWTControl.gotoTarget(this._tour.get_currentTourStop().get_target(), false, instant, false);\n            this._slideStartTime = ss.now();\n            // Move to new settings\n            Settings.tourSettings = this._tour.get_currentTourStop();\n            SpaceTimeController.set_now(this._tour.get_currentTourStop().get_startTime());\n            SpaceTimeController.set_syncToClock(false);\n        } else {\n            this._stopCurrentMaster();\n            TourPlayer._playing = false;\n            if (Settings.get_current().autoRepeatTour) {\n                this._tour.set_currentTourstopIndex(-1);\n                this.play();\n            }\n            else {\n                globalWWTControl._freezeView();\n                if (TourPlayer.__tourEnded != null) {\n                    TourPlayer.__tourEnded(this, new ss.EventArgs());\n                }\n                globalWWTControl._hideUI(false);\n                globalScriptInterface._fireTourEnded();\n            }\n        }\n    },\n\n    _stopCurrentMaster: function () {\n        if (this._currentMasterSlide != null) {\n            if (this._currentMasterSlide.get_musicTrack() != null) {\n                this._currentMasterSlide.get_musicTrack().stop();\n            }\n            if (this._currentMasterSlide.get_voiceTrack() != null) {\n                this._currentMasterSlide.get_voiceTrack().stop();\n            }\n            var $enum1 = ss.enumerate(this._currentMasterSlide.get_overlays());\n            while ($enum1.moveNext()) {\n                var overlay = $enum1.current;\n                overlay.stop();\n            }\n            this._currentMasterSlide = null;\n        }\n    },\n\n    get_leaveSettingsWhenStopped: function () {\n        return this._leaveSettingsWhenStopped;\n    },\n\n    set_leaveSettingsWhenStopped: function (value) {\n        this._leaveSettingsWhenStopped = value;\n        return value;\n    },\n\n    play: function () {\n        if (this._tour == null) {\n            return;\n        }\n        if (TourPlayer._playing) {\n            this.stop(true);\n        } else {\n            TourPlayer._playing = true;\n        }\n        globalWWTControl._hideUI(true);\n        TourPlayer._playing = true;\n        if (this._tour.get_tourStops().length > 0) {\n            this._onTarget = false;\n            if (this._tour.get_currentTourstopIndex() === -1) {\n                this._tour.set_currentTourStop(this._tour.get_tourStops()[0]);\n            }\n\n            // Ensure that all multimedia elements are prepared. When\n            // playing back a tour in a browser, restrictions on autoplay\n            // mean that we have to ensure that all of our multimedia\n            // elements are prepared for playback inside code that is\n            // triggered by a user-initiated event. The PrepMultimedia\n            // callback should do whatever's needed to make sure that media\n            // files are all ready to go.\n\n            var $enum1 = ss.enumerate(this._tour.get_tourStops());\n            while ($enum1.moveNext()) {\n                var stop = $enum1.current;\n                if (stop.get_musicTrack() != null) {\n                    stop.get_musicTrack().prepMultimedia();\n                }\n                if (stop.get_voiceTrack() != null) {\n                    stop.get_voiceTrack().prepMultimedia();\n                }\n                var $enum2 = ss.enumerate(stop.get_overlays());\n                while ($enum2.moveNext()) {\n                    var overlay = $enum2.current;\n                    overlay.prepMultimedia();\n                }\n            }\n            if (this._tour.get_currentTourstopIndex() > 0) {\n                this._playMasterForCurrent();\n            }\n            globalWWTControl.gotoTarget(this._tour.get_currentTourStop().get_target(), false, true, false);\n        }\n        this._slideStartTime = ss.now();\n        TourPlayer._playing = true;\n    },\n\n    _playMasterForCurrent: function () {\n        if (!this._tour.get_currentTourStop().get_masterSlide()) {\n            var currentMaster = this._tour.elapsedTimeSinceLastMaster(this._tour.get_currentTourstopIndex());\n            if (currentMaster != null) {\n                var elapsed = currentMaster.duration;\n                this._currentMasterSlide = currentMaster.master;\n                if (this._currentMasterSlide.get_musicTrack() != null) {\n                    this._currentMasterSlide.get_musicTrack().seek(elapsed);\n                    this._currentMasterSlide.get_musicTrack().play();\n                }\n                if (this._currentMasterSlide.get_voiceTrack() != null) {\n                    this._currentMasterSlide.get_voiceTrack().seek(elapsed);\n                    this._currentMasterSlide.get_voiceTrack().play();\n                }\n                var $enum1 = ss.enumerate(this._currentMasterSlide.get_overlays());\n                while ($enum1.moveNext()) {\n                    var overlay = $enum1.current;\n                    overlay.seek(elapsed);\n                    overlay.play();\n                }\n            }\n        }\n    },\n\n    stop: function (noSwitchBackFullScreen) {\n        if (TourPlayer._switchedToFullScreen && !noSwitchBackFullScreen) {\n        }\n\n        // By default, when you stop (or pause) a tour, the main WWT\n        // settings become active again. However, this can cause a jarring\n        // jump if, say, the tour has localHorizonMode active and the main\n        // settings don't. If you activate this option, we'll leave the tour\n        // settings lingering, preventing any dramatic changes.\n        if (!this._leaveSettingsWhenStopped) {\n            Settings.tourSettings = null;\n        }\n        TourPlayer._playing = false;\n        if (this._tour.get_currentTourStop() != null) {\n            if (this._tour.get_currentTourStop().get_musicTrack() != null) {\n                this._tour.get_currentTourStop().get_musicTrack().stop();\n            }\n            if (this._tour.get_currentTourStop().get_voiceTrack() != null) {\n                this._tour.get_currentTourStop().get_voiceTrack().stop();\n            }\n            var $enum1 = ss.enumerate(this._tour.get_currentTourStop().get_overlays());\n            while ($enum1.moveNext()) {\n                var overlay = $enum1.current;\n                overlay.stop();\n            }\n        }\n        if (this._currentMasterSlide != null) {\n            if (this._currentMasterSlide.get_musicTrack() != null) {\n                this._currentMasterSlide.get_musicTrack().stop();\n            }\n            if (this._currentMasterSlide.get_voiceTrack() != null) {\n                this._currentMasterSlide.get_voiceTrack().stop();\n            }\n            var $enum2 = ss.enumerate(this._currentMasterSlide.get_overlays());\n            while ($enum2.moveNext()) {\n                var overlay = $enum2.current;\n                overlay.stop();\n            }\n        }\n        globalWWTControl._hideUI(TourPlayer.noRestoreUIOnStop);\n        globalScriptInterface._fireTourEnded();\n    },\n\n    updateSlideStates: function () {\n        var slideChanging = false;\n        var slideElapsedTime = ss.now() - this._slideStartTime;\n        if (slideElapsedTime > this._tour.get_currentTourStop().get_duration() && TourPlayer._playing) {\n            this.nextSlide();\n            slideChanging = true;\n        }\n        slideElapsedTime = ss.now() - this._slideStartTime;\n        if (this._tour.get_currentTourStop() != null) {\n            this._tour.get_currentTourStop().set_tweenPosition(Math.min(1, (slideElapsedTime / this._tour.get_currentTourStop().get_duration())));\n            this._tour.get_currentTourStop().faderOpacity = 0;\n            var elapsedSeconds = this._tour.get_currentTourStop().get_tweenPosition() * this._tour.get_currentTourStop().get_duration() / 1000;\n            if (slideChanging) {\n                globalWWTControl.set_crossFadeFrame(false);\n            }\n            switch (this._tour.get_currentTourStop().get__transition()) {\n                case 0:\n                    this._tour.get_currentTourStop().faderOpacity = 0;\n                    globalWWTControl.set_crossFadeFrame(false);\n                    break;\n                case 2:\n                    if (slideChanging) {\n                    }\n                    if (elapsedSeconds < (elapsedSeconds - this._tour.get_currentTourStop().get__transitionHoldTime())) {\n                        globalWWTControl.set_crossFadeFrame(true);\n                        this._tour.get_currentTourStop().faderOpacity = 1;\n                    }\n                    else {\n                        this._tour.get_currentTourStop().faderOpacity = 0;\n                        globalWWTControl.set_crossFadeFrame(false);\n                    }\n                    break;\n                case 1:\n                    globalWWTControl.set_crossFadeFrame(true);\n                    var opacity = Math.max(0, 1 - Math.min(1, (elapsedSeconds - this._tour.get_currentTourStop().get__transitionHoldTime()) / this._tour.get_currentTourStop().get__transitionTime()));\n                    this._tour.get_currentTourStop().faderOpacity = opacity;\n                    if (slideChanging) {\n                    }\n                    break;\n                case 3:\n                case 4:\n                    globalWWTControl.set_crossFadeFrame(false);\n                    var opacity = Math.max(0, 1 - Math.max(0, elapsedSeconds - this._tour.get_currentTourStop().get__transitionHoldTime()) / this._tour.get_currentTourStop().get__transitionTime());\n                    this._tour.get_currentTourStop().faderOpacity = opacity;\n                    break;\n                case 5:\n                    globalWWTControl.set_crossFadeFrame(false);\n                    break;\n                default:\n                    break;\n            }\n            if (!this._tour.get_currentTourStop().get_isLinked() && this._tour.get_currentTourstopIndex() < (this._tour.get_tourStops().length - 1)) {\n                var nextTrans = this._tour.get_tourStops()[this._tour.get_currentTourstopIndex() + 1].get__transition();\n                var nextTransTime = this._tour.get_tourStops()[this._tour.get_currentTourstopIndex() + 1].get__transitionOutTime();\n                switch (nextTrans) {\n                    case 5:\n                    case 3:\n                        if (!this._tour.get_currentTourStop().faderOpacity) {\n                            globalWWTControl.set_crossFadeFrame(false);\n                            var opacity = Math.max(0, 1 - Math.min(1, ((this._tour.get_currentTourStop().get_duration() / 1000) - elapsedSeconds) / nextTransTime));\n                            this._tour.get_currentTourStop().faderOpacity = opacity;\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n    },\n\n    updateTweenPosition: function (tween) {\n        var slideElapsedTime = ss.now() - this._slideStartTime;\n        if (tween > -1) {\n            return this._tour.get_currentTourStop().set_tweenPosition(Math.min(1, tween));\n        } else {\n            return this._tour.get_currentTourStop().set_tweenPosition(Math.min(1, (slideElapsedTime / this._tour.get_currentTourStop().get_duration())));\n        }\n    },\n\n    close: function () {\n        if (this._tour != null) {\n            if (TourPlayer.get_playing()) {\n                this.stop(TourPlayer._switchedToFullScreen);\n            }\n            this._tour = null;\n        }\n    },\n\n    mouseDown: function (sender, e) {\n        var location;\n        location = this.pointToView(Vector2d.create(e.offsetX, e.offsetY));\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return false;\n        }\n        for (var i = this._tour.get_currentTourStop().get_overlays().length - 1; i >= 0; i--) {\n            if (this._tour.get_currentTourStop().get_overlays()[i].hitTest(location)) {\n                if (!ss.emptyString(this._tour.get_currentTourStop().get_overlays()[i].get_url())) {\n                    var linkItem = this._tour.get_currentTourStop().get_overlays()[i];\n                    Util._openUrl(linkItem.get_url());\n                    return true;\n                }\n                if (!ss.emptyString(this._tour.get_currentTourStop().get_overlays()[i].get_linkID())) {\n                    this._callStack.push(this._tour.get_currentTourstopIndex());\n                    this.playFromTourstop(this._tour.get_tourStops()[this._tour.getTourStopIndexByID(this._tour.get_currentTourStop().get_overlays()[i].get_linkID())]);\n                    return true;\n                }\n            }\n        }\n        return false;\n    },\n\n    mouseUp: function (sender, e) {\n        return false;\n    },\n\n    mouseMove: function (sender, e) {\n        var location;\n        try {\n            location = this.pointToView(Vector2d.create(e.offsetX, e.offsetY));\n        }\n        catch ($e1) {\n            return false;\n        }\n        if (this._tour == null || this._tour.get_currentTourStop() == null) {\n            return false;\n        }\n        for (var i = this._tour.get_currentTourStop().get_overlays().length - 1; i >= 0; i--) {\n            if (this._tour.get_currentTourStop().get_overlays()[i].hitTest(location) && (!ss.emptyString(this._tour.get_currentTourStop().get_overlays()[i].get_url()) || !ss.emptyString(this._tour.get_currentTourStop().get_overlays()[i].get_linkID()))) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    mouseClick: function (sender, e) {\n        return false;\n    },\n\n    click: function (sender, e) {\n        return false;\n    },\n\n    mouseDoubleClick: function (sender, e) {\n        return false;\n    },\n\n    keyDown: function (sender, e) {\n        switch (e.keyCode) {\n            case 27: // escape\n                this.stop(TourPlayer._switchedToFullScreen);\n                globalWWTControl._closeTour();\n                return true;\n            case 32: // spacebar\n                this.pauseTour();\n                return true;\n            case 39: // right arrow\n                this._playNextSlide();\n                return true;\n            case 37: // left arrow\n                this._playPreviousSlide();\n                return true;\n            case 35: // end key\n                if (this._tour.get_tourStops().length > 0) {\n                    this.playFromTourstop(this._tour.get_tourStops()[this._tour.get_tourStops().length - 1]);\n                }\n                return true;\n            case 36: // home key\n                if (this._tour.get_tourStops().length > 0) {\n                    this.playFromTourstop(this._tour.get_tourStops()[0]);\n                }\n                return true;\n        }\n        return false;\n    },\n\n    _playNextSlide: function () {\n        if ((this._tour.get_currentTourstopIndex() < this._tour.get_tourStops().length - 1) && this._tour.get_tourStops().length > 0) {\n            this.playFromTourstop(this._tour.get_tourStops()[this._tour.get_currentTourstopIndex() + 1]);\n        }\n    },\n\n    _playPreviousSlide: function () {\n        if (this._tour.get_currentTourstopIndex() > 0) {\n            this.playFromTourstop(this._tour.get_tourStops()[this._tour.get_currentTourstopIndex() - 1]);\n        }\n    },\n\n    playFromTourstop: function (tourStop) {\n        this.stop(true);\n        this._tour.set_currentTourStop(tourStop);\n        globalWWTControl.gotoTarget(this._tour.get_currentTourStop().get_target(), false, true, false);\n        SpaceTimeController.set_now(this._tour.get_currentTourStop().get_startTime());\n        SpaceTimeController.set_syncToClock(false);\n        this.play();\n    },\n\n    pauseTour: function () {\n        if (TourPlayer._playing) {\n            this.stop(TourPlayer._switchedToFullScreen);\n            globalWWTControl._freezeView();\n            globalScriptInterface._fireTourPaused();\n        } else {\n            this.play();\n            globalScriptInterface._fireTourResume();\n        }\n    },\n\n    keyUp: function (sender, e) {\n        return false;\n    },\n\n    hover: function (pnt) {\n        if (TourPlayer._playing) {\n            return true;\n        }\n        return false;\n    },\n\n    pointToView: function (pnt) {\n        var clientHeight = globalWWTControl.canvas.height;\n        var clientWidth = globalWWTControl.canvas.width;\n        var viewWidth = (clientWidth / clientHeight) * 1116;\n        var x = ((pnt.x) / (clientWidth) * viewWidth) - ((viewWidth - 1920) / 2);\n        var y = (pnt.y) / clientHeight * 1116;\n        return Vector2d.create(x, y);\n    }\n};\n\nregisterType(\"TourPlayer\", [TourPlayer, TourPlayer$, null, IUiController]);\n\n// wwtlib.MasterTime\n\nexport function MasterTime(master, duration) {\n    this.duration = 0;\n    this.master = master;\n    this.duration = duration;\n}\n\nvar MasterTime$ = {};\n\nregisterType(\"MasterTime\", [MasterTime, MasterTime$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A stop on a tour.\n\nimport { ss } from \"../ss.js\";\nimport { registerType, registerEnum, Enums } from \"../typesystem.js\";\nimport { globalScriptInterface } from \"../data_globals.js\";\nimport { XmlTextWriter } from \"../utilities/xml_text_writer.js\";\nimport { Util } from \"../baseutil.js\";\nimport { Color, Colors } from \"../color.js\";\nimport { ConstellationFilter } from \"../constellation_filter.js\";\nimport { ISettings, IUndoStep } from \"../interfaces.js\";\nimport { Place } from \"../place.js\";\nimport { Settings, SettingParameter } from \"../settings.js\";\nimport { SpaceTimeController } from \"../space_time_controller.js\";\nimport { Guid } from \"../util.js\";\nimport { Overlay } from \"./overlay.js\";\n\n\n// wwtlib.TransitionType\n\nexport var TransitionType = {\n    slew: 0,\n    crossFade: 1,\n    crossCut: 2,\n    fadeOutIn: 3,\n    fadeIn: 4,\n    fadeOut: 5\n};\n\nregisterType(\"TransitionType\", TransitionType);\nregisterEnum(\"TransitionType\", TransitionType);\n\n\n// wwtlib.TourStop\n\nexport function TourStop() {\n    this._tourStopType = 0;\n    this._keyFramed = false;\n    this._tweenPosition = 0;\n    this.faderOpacity = 0;\n    this._owner = null;\n    this._transition = 0;\n    this._transitionTime = 2;\n    this._transitionHoldTime = 4;\n    this._transitionOutTime = 2;\n    this._nextSlide = 'Next';\n    this._fadeInOverlays = false;\n    this._masterSlide = false;\n    this._id = '';\n    this._description = '';\n    this._name = '';\n    this._duration = 10000;\n    this._interpolationType = 0;\n    this._hasLocation = true;\n    this._hasTime = true;\n    this._startTime = SpaceTimeController.get_now();\n    this._endTime = SpaceTimeController.get_now();\n    this._actualPlanetScale = Settings.get_current().get_actualPlanetScale();\n    this._locationAltitude = Settings.get_current().get_locationAltitude();\n    this._locationLat = Settings.get_current().get_locationLat();\n    this._locationLng = Settings.get_current().get_locationLng();\n    this._showClouds = Settings.get_current().get_showClouds();\n    this._showConstellationBoundries = Settings.get_current().get_showConstellationBoundries();\n    this._showConstellationFigures = Settings.get_current().get_showConstellationFigures();\n    this._showConstellationSelection = Settings.get_current().get_showConstellationSelection();\n    this._showEcliptic = Settings.get_current().get_showEcliptic();\n    this._showElevationModel = Settings.get_current().get_showElevationModel();\n    this._showFieldOfView = Settings.get_current().get_showFieldOfView();\n    this._showGrid = Settings.get_current().get_showGrid();\n    this._showHorizon = Settings.get_current().get_showHorizon();\n    this._showHorizonPanorama = Settings.get_current().get_showHorizonPanorama();\n    this._showMoonsAsPointSource = Settings.get_current().get_showMoonsAsPointSource();\n    this._showSolarSystem = Settings.get_current().get_showSolarSystem();\n    this._fovTelescope = Settings.get_current().get_fovTelescope();\n    this._fovEyepiece = Settings.get_current().get_fovEyepiece();\n    this._fovCamera = Settings.get_current().get_fovCamera();\n    this._localHorizonMode = Settings.get_current().get_localHorizonMode();\n    this._galacticMode = Settings.get_current().get_galacticMode();\n    this._solarSystemStars = Settings.get_current().get_solarSystemStars();\n    this._solarSystemMilkyWay = Settings.get_current().get_solarSystemMilkyWay();\n    this._solarSystemCosmos = Settings.get_current().get_solarSystemCosmos();\n    this._solarSystemOrbits = Settings.get_current().get_solarSystemOrbits();\n    this._solarSystemOverlays = Settings.get_current().get_solarSystemOverlays();\n    this._solarSystemLighting = Settings.get_current().get_solarSystemLighting();\n    this._solarSystemScale = Settings.get_current().get_solarSystemScale();\n    this._solarSystemMultiRes = Settings.get_current().get_solarSystemMultiRes();\n    this._showEquatorialGridText = Settings.get_current().get_showEquatorialGridText();\n    this._showGalacticGrid = Settings.get_current().get_showGalacticGrid();\n    this._showGalacticGridText = Settings.get_current().get_showGalacticGridText();\n    this._showEclipticGrid = Settings.get_current().get_showEclipticGrid();\n    this._showEclipticGridText = Settings.get_current().get_showEclipticGridText();\n    this._showEclipticOverviewText = Settings.get_current().get_showEclipticOverviewText();\n    this._showAltAzGrid = Settings.get_current().get_showAltAzGrid();\n    this._showAltAzGridText = Settings.get_current().get_showAltAzGridText();\n    this._showPrecessionChart = Settings.get_current().get_showPrecessionChart();\n    this._showConstellationPictures = Settings.get_current().get_showConstellationPictures();\n    this._showConstellationLabels = Settings.get_current().get_showConstellationLabels();\n    this._solarSystemCMB = Settings.get_current().get_solarSystemCMB();\n    this._solarSystemMinorPlanets = Settings.get_current().get_solarSystemMinorPlanets();\n    this._solarSystemPlanets = Settings.get_current().get_solarSystemPlanets();\n    this._showEarthSky = Settings.get_current().get_showEarthSky();\n    this._solarSystemMinorOrbits = Settings.get_current().get_solarSystemMinorOrbits();\n    this._constellationsEnabled = '';\n    this._constellationFiguresFilter = Settings.get_current().get_constellationFiguresFilter().clone();\n    this._constellationBoundariesFilter = Settings.get_current().get_constellationBoundariesFilter().clone();\n    this._constellationNamesFilter = Settings.get_current().get_constellationNamesFilter().clone();\n    this._constellationArtFilter = Settings.get_current().get_constellationArtFilter().clone();\n    this._showSkyOverlays = Settings.get_current().get_showSkyOverlays();\n    this._showConstellations = Settings.get_current().get_showConstellations();\n    this._showSkyNode = Settings.get_current().get_showSkyNode();\n    this._showSkyGrids = Settings.get_current().get_showSkyGrids();\n    this._showSkyOverlaysIn3d = Settings.get_current().get_showSkyOverlaysIn3d();\n    this._earthCutawayView = Settings.get_current().get_earthCutawayView();\n    this._showISSModel = Settings.get_current().get_showISSModel();\n    this._milkyWayModel = Settings.get_current().get_milkyWayModel();\n    this._minorPlanetsFilter = Settings.get_current().get_minorPlanetsFilter();\n    this._planetOrbitsFilter = Settings.get_current().get_planetOrbitsFilter();\n    this._thumbnailString = '';\n    this._thumbnail = null;\n    this.layers = {};\n    this._overlays = [];\n    this._musicTrack = null;\n    this._voiceTrack = null;\n    this._eclipticGridColor = Colors.get_green();\n    this._galacticGridColor = Colors.get_cyan();\n    this._altAzGridColor = Colors.get_magenta();\n    this._precessionChartColor = Colors.get_orange();\n    this._eclipticColor = Colors.get_blue();\n    this._equatorialGridColor = Colors.get_white();\n    this._constellationLabelsHeight = 80;\n    this._id = Guid.newGuid().toString();\n}\n\nTourStop.clipboardFormat = 'WorldWideTelescope.Slide';\n\nTourStop.create = function (target) {\n    var ts = new TourStop();\n    ts._target = target;\n    return ts;\n};\n\nTourStop.getXmlText = function (ts) {\n    var writer = new XmlTextWriter();\n    writer._writeProcessingInstruction('xml', \"version='1.0' encoding='UTF-8'\");\n    ts._saveToXml(writer, true);\n    writer._close();\n    return writer.body;\n};\n\nTourStop._fromXml = function (owner, tourStop) {\n    try {\n        var newTourStop = new TourStop();\n        newTourStop._owner = owner;\n        newTourStop.set_id(tourStop.attributes.getNamedItem('Id').nodeValue);\n        newTourStop.set_name(tourStop.attributes.getNamedItem('Name').nodeValue);\n        newTourStop.set_description(tourStop.attributes.getNamedItem('Description').nodeValue);\n        newTourStop._thumbnailString = tourStop.attributes.getNamedItem('Thumbnail').nodeValue;\n        newTourStop._duration = Util.parseTimeSpan(tourStop.attributes.getNamedItem('Duration').nodeValue);\n        if (tourStop.attributes.getNamedItem('Master') != null) {\n            newTourStop._masterSlide = ss.boolean(tourStop.attributes.getNamedItem('Master').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('NextSlide') != null) {\n            newTourStop._nextSlide = tourStop.attributes.getNamedItem('NextSlide').nodeValue;\n        }\n        if (tourStop.attributes.getNamedItem('InterpolationType') != null) {\n            newTourStop.set_interpolationType(Enums.parse('InterpolationType', tourStop.attributes.getNamedItem('InterpolationType').nodeValue));\n        }\n        newTourStop._fadeInOverlays = true;\n        if (tourStop.attributes.getNamedItem('FadeInOverlays') != null) {\n            newTourStop._fadeInOverlays = ss.boolean(tourStop.attributes.getNamedItem('FadeInOverlays').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('Transition') != null) {\n            newTourStop._transition = Enums.parse('TransitionType', tourStop.attributes.getNamedItem('Transition').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('HasLocation') != null) {\n            newTourStop._hasLocation = ss.boolean(tourStop.attributes.getNamedItem('HasLocation').nodeValue);\n        }\n        if (newTourStop._hasLocation) {\n            if (tourStop.attributes.getNamedItem('LocationAltitude') != null) {\n                newTourStop._locationAltitude = parseFloat(tourStop.attributes.getNamedItem('LocationAltitude').nodeValue);\n            }\n            if (tourStop.attributes.getNamedItem('LocationLat') != null) {\n                newTourStop._locationLat = parseFloat(tourStop.attributes.getNamedItem('LocationLat').nodeValue);\n            }\n            if (tourStop.attributes.getNamedItem('LocationLng') != null) {\n                newTourStop._locationLng = parseFloat(tourStop.attributes.getNamedItem('LocationLng').nodeValue);\n            }\n        }\n        if (tourStop.attributes.getNamedItem('HasTime') != null) {\n            newTourStop._hasTime = ss.boolean(tourStop.attributes.getNamedItem('HasTime').nodeValue);\n            if (newTourStop._hasTime) {\n                if (tourStop.attributes.getNamedItem('StartTime') != null) {\n                    newTourStop._startTime = ss.date(tourStop.attributes.getNamedItem('StartTime').nodeValue + ' UTC');\n                }\n                if (tourStop.attributes.getNamedItem('EndTime') != null) {\n                    newTourStop._endTime = ss.date(tourStop.attributes.getNamedItem('EndTime').nodeValue + ' UTC');\n                }\n            }\n        }\n        if (tourStop.attributes.getNamedItem('ActualPlanetScale') != null) {\n            newTourStop._actualPlanetScale = ss.boolean(tourStop.attributes.getNamedItem('ActualPlanetScale').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowClouds') != null) {\n            newTourStop._showClouds = ss.boolean(tourStop.attributes.getNamedItem('ShowClouds').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowConstellationBoundries') != null) {\n            newTourStop._showConstellationBoundries = ss.boolean(tourStop.attributes.getNamedItem('ShowConstellationBoundries').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowConstellationFigures') != null) {\n            newTourStop._showConstellationFigures = ss.boolean(tourStop.attributes.getNamedItem('ShowConstellationFigures').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowConstellationSelection') != null) {\n            newTourStop._showConstellationSelection = ss.boolean(tourStop.attributes.getNamedItem('ShowConstellationSelection').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowEcliptic') != null) {\n            newTourStop._showEcliptic = ss.boolean(tourStop.attributes.getNamedItem('ShowEcliptic').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('EclipticColor') != null) {\n            newTourStop._eclipticColor = Color.load(tourStop.attributes.getNamedItem('EclipticColor').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowElevationModel') != null) {\n            newTourStop._showElevationModel = ss.boolean(tourStop.attributes.getNamedItem('ShowElevationModel').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowFieldOfView') != null) {\n            newTourStop._showFieldOfView = ss.boolean(tourStop.attributes.getNamedItem('ShowFieldOfView').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowGrid') != null) {\n            newTourStop._showGrid = ss.boolean(tourStop.attributes.getNamedItem('ShowGrid').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowHorizon') != null) {\n            newTourStop._showHorizon = ss.boolean(tourStop.attributes.getNamedItem('ShowHorizon').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowHorizonPanorama') != null) {\n            newTourStop._showHorizonPanorama = ss.boolean(tourStop.attributes.getNamedItem('ShowHorizonPanorama').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowMoonsAsPointSource') != null) {\n            newTourStop._showMoonsAsPointSource = ss.boolean(tourStop.attributes.getNamedItem('ShowMoonsAsPointSource').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowSolarSystem') != null) {\n            newTourStop._showSolarSystem = ss.boolean(tourStop.attributes.getNamedItem('ShowSolarSystem').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('FovTelescope') != null) {\n            newTourStop._fovTelescope = parseInt(tourStop.attributes.getNamedItem('FovTelescope').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('FovEyepiece') != null) {\n            newTourStop._fovEyepiece = parseInt(tourStop.attributes.getNamedItem('FovEyepiece').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('FovCamera') != null) {\n            newTourStop._fovCamera = parseInt(tourStop.attributes.getNamedItem('FovCamera').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('LocalHorizonMode') != null) {\n            newTourStop._localHorizonMode = ss.boolean(tourStop.attributes.getNamedItem('LocalHorizonMode').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('GalacticMode') != null) {\n            newTourStop._galacticMode = ss.boolean(tourStop.attributes.getNamedItem('GalacticMode').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemStars') != null) {\n            newTourStop._solarSystemStars = ss.boolean(tourStop.attributes.getNamedItem('SolarSystemStars').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemMilkyWay') != null) {\n            newTourStop._solarSystemMilkyWay = ss.boolean(tourStop.attributes.getNamedItem('SolarSystemMilkyWay').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemCosmos') != null) {\n            newTourStop._solarSystemCosmos = ss.boolean(tourStop.attributes.getNamedItem('SolarSystemCosmos').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemOrbits') != null) {\n            newTourStop._solarSystemOrbits = ss.boolean(tourStop.attributes.getNamedItem('SolarSystemOrbits').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemOverlays') != null) {\n            newTourStop._solarSystemOverlays = ss.boolean(tourStop.attributes.getNamedItem('SolarSystemOverlays').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemLighting') != null) {\n            newTourStop._solarSystemLighting = ss.boolean(tourStop.attributes.getNamedItem('SolarSystemLighting').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemScale') != null) {\n            newTourStop._solarSystemScale = parseInt(tourStop.attributes.getNamedItem('SolarSystemScale').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemMultiRes') != null) {\n            newTourStop._solarSystemMultiRes = ss.boolean(tourStop.attributes.getNamedItem('SolarSystemMultiRes').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowEquatorialGridText') != null) {\n            newTourStop._showEquatorialGridText = ss.boolean(tourStop.attributes.getNamedItem('ShowEquatorialGridText').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('EquatorialGridColor') != null) {\n            newTourStop._equatorialGridColor = Color.load(tourStop.attributes.getNamedItem('EquatorialGridColor').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowGalacticGrid') != null) {\n            newTourStop._showGalacticGrid = ss.boolean(tourStop.attributes.getNamedItem('ShowGalacticGrid').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowGalacticGridText') != null) {\n            newTourStop._showGalacticGridText = ss.boolean(tourStop.attributes.getNamedItem('ShowGalacticGridText').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('GalacticGridColor') != null) {\n            newTourStop._galacticGridColor = Color.load(tourStop.attributes.getNamedItem('GalacticGridColor').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowEclipticGrid') != null) {\n            newTourStop._showEclipticGrid = ss.boolean(tourStop.attributes.getNamedItem('ShowEclipticGrid').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowEclipticGridText') != null) {\n            newTourStop._showEclipticGridText = ss.boolean(tourStop.attributes.getNamedItem('ShowEclipticGridText').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('EclipticGridColor') != null) {\n            newTourStop._eclipticGridColor = Color.load(tourStop.attributes.getNamedItem('EclipticGridColor').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowEclipticOverviewText') != null) {\n            newTourStop._showEclipticOverviewText = ss.boolean(tourStop.attributes.getNamedItem('ShowEclipticOverviewText').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowAltAzGrid') != null) {\n            newTourStop._showAltAzGrid = ss.boolean(tourStop.attributes.getNamedItem('ShowAltAzGrid').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowAltAzGridText') != null) {\n            newTourStop._showAltAzGridText = ss.boolean(tourStop.attributes.getNamedItem('ShowAltAzGridText').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('AltAzGridColor') != null) {\n            newTourStop._altAzGridColor = Color.load(tourStop.attributes.getNamedItem('AltAzGridColor').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowPrecessionChart') != null) {\n            newTourStop._showPrecessionChart = ss.boolean(tourStop.attributes.getNamedItem('ShowPrecessionChart').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('PrecessionChartColor') != null) {\n            newTourStop._precessionChartColor = Color.load(tourStop.attributes.getNamedItem('PrecessionChartColor').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowConstellationPictures') != null) {\n            newTourStop._showConstellationPictures = ss.boolean(tourStop.attributes.getNamedItem('ShowConstellationPictures').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowConstellationLabels') != null) {\n            newTourStop._showConstellationLabels = ss.boolean(tourStop.attributes.getNamedItem('ShowConstellationLabels').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemCMB') != null) {\n            newTourStop._solarSystemCMB = ss.boolean(tourStop.attributes.getNamedItem('SolarSystemCMB').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemMinorPlanets') != null) {\n            newTourStop._solarSystemMinorPlanets = ss.boolean(tourStop.attributes.getNamedItem('SolarSystemMinorPlanets').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemPlanets') != null) {\n            newTourStop._solarSystemPlanets = ss.boolean(tourStop.attributes.getNamedItem('SolarSystemPlanets').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowEarthSky') != null) {\n            newTourStop._showEarthSky = ss.boolean(tourStop.attributes.getNamedItem('ShowEarthSky').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('SolarSystemMinorOrbits') != null) {\n            newTourStop._solarSystemMinorOrbits = ss.boolean(tourStop.attributes.getNamedItem('SolarSystemMinorOrbits').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowSkyOverlays') != null) {\n            newTourStop._showSkyOverlays = ss.boolean(tourStop.attributes.getNamedItem('ShowSkyOverlays').nodeValue);\n        } else {\n            newTourStop._showSkyOverlays = true;\n        }\n        if (tourStop.attributes.getNamedItem('ShowConstellations') != null) {\n            newTourStop._showConstellations = ss.boolean(tourStop.attributes.getNamedItem('ShowConstellations').nodeValue);\n        } else {\n            newTourStop._showConstellations = true;\n        }\n        if (tourStop.attributes.getNamedItem('ShowSkyNode') != null) {\n            newTourStop._showSkyNode = ss.boolean(tourStop.attributes.getNamedItem('ShowSkyNode').nodeValue);\n        } else {\n            newTourStop._showSkyNode = true;\n        }\n        if (tourStop.attributes.getNamedItem('ShowSkyGrids') != null) {\n            newTourStop._showSkyGrids = ss.boolean(tourStop.attributes.getNamedItem('ShowSkyGrids').nodeValue);\n        } else {\n            newTourStop._showSkyGrids = true;\n        }\n        if (tourStop.attributes.getNamedItem('ShowSkyOverlaysIn3d') != null) {\n            newTourStop._showSkyOverlaysIn3d = ss.boolean(tourStop.attributes.getNamedItem('ShowSkyOverlaysIn3d').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('EarthCutawayView') != null) {\n            newTourStop._earthCutawayView = ss.boolean(tourStop.attributes.getNamedItem('EarthCutawayView').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ShowISSModel') != null) {\n            newTourStop._showISSModel = ss.boolean(tourStop.attributes.getNamedItem('ShowISSModel').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('MilkyWayModel') != null) {\n            newTourStop._milkyWayModel = ss.boolean(tourStop.attributes.getNamedItem('MilkyWayModel').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('ConstellationBoundariesFilter') != null) {\n            newTourStop._constellationBoundariesFilter = ConstellationFilter.parse(tourStop.attributes.getNamedItem('ConstellationBoundariesFilter').nodeValue);\n        } else {\n            newTourStop._constellationBoundariesFilter = ConstellationFilter.get_allConstellation();\n        }\n        if (tourStop.attributes.getNamedItem('ConstellationBoundariesFilter') != null) {\n            newTourStop._constellationFiguresFilter = ConstellationFilter.parse(tourStop.attributes.getNamedItem('ConstellationBoundariesFilter').nodeValue);\n        } else {\n            newTourStop._constellationFiguresFilter = new ConstellationFilter();\n        }\n        if (tourStop.attributes.getNamedItem('ConstellationNamesFilter') != null) {\n            newTourStop._constellationNamesFilter = ConstellationFilter.parse(tourStop.attributes.getNamedItem('ConstellationNamesFilter').nodeValue);\n        } else {\n            newTourStop._constellationNamesFilter = new ConstellationFilter();\n        }\n        if (tourStop.attributes.getNamedItem('ConstellationArtFilter') != null) {\n            newTourStop._constellationArtFilter = ConstellationFilter.parse(tourStop.attributes.getNamedItem('ConstellationArtFilter').nodeValue);\n        } else {\n            newTourStop._constellationArtFilter = new ConstellationFilter();\n        }\n        if (tourStop.attributes.getNamedItem('MinorPlanetsFilter') != null) {\n            newTourStop._minorPlanetsFilter = parseInt(tourStop.attributes.getNamedItem('MinorPlanetsFilter').nodeValue);\n        }\n        if (tourStop.attributes.getNamedItem('PlanetOrbitsFilter') != null) {\n            newTourStop._planetOrbitsFilter = parseInt(tourStop.attributes.getNamedItem('PlanetOrbitsFilter').nodeValue);\n        }\n        var place = Util.selectSingleNode(tourStop, 'Place');\n        newTourStop._target = Place._fromXml(place);\n        var endTarget = Util.selectSingleNode(tourStop, 'EndTarget');\n        if (endTarget != null) {\n            newTourStop._endTarget = Place._fromXml(endTarget);\n        }\n        var overlays = Util.selectSingleNode(tourStop, 'Overlays');\n        var $enum1 = ss.enumerate(overlays.childNodes);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            if (overlay.nodeName === 'Overlay') {\n                newTourStop.addOverlay(Overlay._fromXml(newTourStop, overlay));\n            }\n        }\n        var musicNode = Util.selectSingleNode(tourStop, 'MusicTrack');\n        if (musicNode != null) {\n            newTourStop._musicTrack = Overlay._fromXml(newTourStop, Util.selectSingleNode(musicNode, 'Overlay'));\n        }\n        var voiceNode = Util.selectSingleNode(tourStop, 'VoiceTrack');\n        if (voiceNode != null) {\n            newTourStop._voiceTrack = Overlay._fromXml(newTourStop, Util.selectSingleNode(voiceNode, 'Overlay'));\n        }\n        var layerNode = Util.selectSingleNode(tourStop, 'VisibleLayers');\n        if (layerNode != null) {\n            newTourStop._loadLayerList(layerNode);\n        }\n        newTourStop._thumbnail = owner.getCachedTexture(ss.format('{0}.thumb.png', newTourStop._id), function () {\n            var c = 0;\n        });\n        return newTourStop;\n    }\n    catch (ex) {\n        globalScriptInterface._fireTourError(ex);\n        return null;\n    }\n};\n\nvar TourStop$ = {\n    get_keyFramed: function () {\n        return this._keyFramed;\n    },\n\n    get_tourStopType: function () {\n        if (this._target.get_backgroundImageset() != null) {\n            return this._target.get_backgroundImageset().get_dataSetType();\n        } else {\n            return this._tourStopType;\n        }\n    },\n\n    set_tourStopType: function (value) {\n        if (this._target.get_backgroundImageset() != null) {\n            if (this._target.get_backgroundImageset().get_dataSetType() !== value) {\n                this._target.set_backgroundImageset(null);\n            }\n        }\n        this._tourStopType = value;\n        return value;\n    },\n\n    get_tweenPosition: function () {\n        return this._tweenPosition;\n    },\n\n    set_tweenPosition: function (value) {\n        if (this._tweenPosition !== value) {\n            this._tweenPosition = Math.max(0, Math.min(1, value));\n            this.updateTweenPosition();\n        }\n        return value;\n    },\n\n    updateTweenPosition: function () {\n        if (this.get_keyFramed()) {\n        }\n    },\n\n    copy: function () {\n        var writer = new XmlTextWriter();\n        writer._writeProcessingInstruction('xml', \"version='1.0' encoding='UTF-8'\");\n        this._saveToXml(writer, true);\n        try {\n            var xParser = new DOMParser();\n            var doc = xParser.parseFromString(writer.body, 'text/xml');\n            var node = Util.selectSingleNode(doc, 'TourStop');\n            var ts = TourStop._fromXml(this.get_owner(), node);\n            ts.set_id(Guid.newGuid().toString());\n            return ts;\n        }\n        catch ($e1) {\n        }\n        return null;\n    },\n\n    get_owner: function () {\n        return this._owner;\n    },\n\n    set_owner: function (value) {\n        this._owner = value;\n        return value;\n    },\n\n    get__transition: function () {\n        return this._transition;\n    },\n\n    set__transition: function (value) {\n        if (this._transition !== value) {\n            this._transition = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get__transitionTime: function () {\n        return this._transitionTime;\n    },\n\n    set__transitionTime: function (value) {\n        if (this._transitionTime !== value) {\n            this._transitionTime = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get__transitionHoldTime: function () {\n        return this._transitionHoldTime;\n    },\n\n    set__transitionHoldTime: function (value) {\n        if (this._transitionHoldTime !== value) {\n            this._transitionHoldTime = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get__transitionOutTime: function () {\n        return this._transitionOutTime;\n    },\n\n    set__transitionOutTime: function (value) {\n        if (this._transitionOutTime !== value) {\n            this._transitionOutTime = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get_nextSlide: function () {\n        return this._nextSlide;\n    },\n\n    set_nextSlide: function (value) {\n        this._nextSlide = value;\n        return value;\n    },\n\n    get_isLinked: function () {\n        if (this._nextSlide == null || this._nextSlide === 'Next' || !this._nextSlide) {\n            return false;\n        }\n        return true;\n    },\n\n    get_fadeInOverlays: function () {\n        return this._fadeInOverlays;\n    },\n\n    set_fadeInOverlays: function (value) {\n        this._fadeInOverlays = value;\n        return value;\n    },\n\n    get_masterSlide: function () {\n        return this._masterSlide;\n    },\n\n    set_masterSlide: function (value) {\n        if (this._masterSlide !== value) {\n            this._masterSlide = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get_id: function () {\n        return this._id;\n    },\n\n    set_id: function (value) {\n        this._id = value;\n        if (this._owner != null) {\n            this._owner.set_tourDirty(true);\n        }\n        return value;\n    },\n\n    toString: function () {\n        if (this._target != null) {\n            return this.get_target().get_name();\n        } else {\n            return this._description;\n        }\n    },\n\n    get_description: function () {\n        return this._description;\n    },\n\n    set_description: function (value) {\n        if (this._description !== value) {\n            this._description = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get_name: function () {\n        if (this._target != null) {\n            return this._target.get_name();\n        }\n        return this._name;\n    },\n\n    set_name: function (value) {\n        if (this._name !== value) {\n            this._name = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get_duration: function () {\n        return this._duration;\n    },\n\n    set_duration: function (value) {\n        if (this._duration !== value) {\n            this._duration = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get_target: function () {\n        return this._target;\n    },\n\n    set_target: function (value) {\n        if (this._target !== value) {\n            this._target = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get_endTarget: function () {\n        return this._endTarget;\n    },\n\n    set_endTarget: function (value) {\n        if (this._endTarget !== value) {\n            this._endTarget = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get_interpolationType: function () {\n        return this._interpolationType;\n    },\n\n    set_interpolationType: function (value) {\n        this._interpolationType = value;\n        return value;\n    },\n\n    get_hasLocation: function () {\n        return this._hasTime;\n    },\n\n    set_hasLocation: function (value) {\n        if (this._hasLocation !== value) {\n            this._hasLocation = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get_hasTime: function () {\n        return this._hasTime;\n    },\n\n    set_hasTime: function (value) {\n        if (this._hasTime !== value) {\n            this._hasTime = this._hasLocation = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get_startTime: function () {\n        return this._startTime;\n    },\n\n    set_startTime: function (value) {\n        this._startTime = value;\n        if (!ss.compareDates(this._startTime, value)) {\n            this._startTime = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get_endTime: function () {\n        return this._endTime;\n    },\n\n    set_endTime: function (value) {\n        if (!ss.compareDates(this._endTime, value)) {\n            this._endTime = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    captureSettings: function () {\n        this._startTime = SpaceTimeController.get_now();\n        this._actualPlanetScale = Settings.get_current().get_actualPlanetScale();\n        this._locationAltitude = Settings.get_current().get_locationAltitude();\n        this._locationLat = Settings.get_current().get_locationLat();\n        this._locationLng = Settings.get_current().get_locationLng();\n        this._showClouds = Settings.get_current().get_showClouds();\n        this._showConstellationBoundries = Settings.get_current().get_showConstellationBoundries();\n        this._showConstellationFigures = Settings.get_current().get_showConstellationFigures();\n        this._showConstellationSelection = Settings.get_current().get_showConstellationSelection();\n        this._showEcliptic = Settings.get_current().get_showEcliptic();\n        this._showElevationModel = Settings.get_current().get_showElevationModel();\n        this._showFieldOfView = Settings.get_current().get_showFieldOfView();\n        this._showGrid = Settings.get_current().get_showGrid();\n        this._showHorizon = Settings.get_current().get_showHorizon();\n        this._showHorizonPanorama = Settings.get_current().get_showHorizonPanorama();\n        this._showMoonsAsPointSource = Settings.get_current().get_showMoonsAsPointSource();\n        this._showSolarSystem = Settings.get_current().get_showSolarSystem();\n        this._fovTelescope = Settings.get_current().get_fovTelescope();\n        this._fovEyepiece = Settings.get_current().get_fovEyepiece();\n        this._fovCamera = Settings.get_current().get_fovCamera();\n        this._localHorizonMode = Settings.get_current().get_localHorizonMode();\n        this._galacticMode = Settings.get_current().get_galacticMode();\n        this._solarSystemStars = Settings.get_current().get_solarSystemStars();\n        this._solarSystemMilkyWay = Settings.get_current().get_solarSystemMilkyWay();\n        this._solarSystemCosmos = Settings.get_current().get_solarSystemCosmos();\n        this._solarSystemOrbits = Settings.get_current().get_solarSystemOrbits();\n        this._solarSystemOverlays = Settings.get_current().get_solarSystemOverlays();\n        this._solarSystemLighting = Settings.get_current().get_solarSystemLighting();\n        this._solarSystemScale = Settings.get_current().get_solarSystemScale();\n        this._solarSystemMultiRes = Settings.get_current().get_solarSystemMultiRes();\n        this._showEquatorialGridText = Settings.get_current().get_showEquatorialGridText();\n        this._showGalacticGrid = Settings.get_current().get_showGalacticGrid();\n        this._showGalacticGridText = Settings.get_current().get_showGalacticGridText();\n        this._showEclipticGrid = Settings.get_current().get_showEclipticGrid();\n        this._showEclipticGridText = Settings.get_current().get_showEclipticGridText();\n        this._showEclipticOverviewText = Settings.get_current().get_showEclipticOverviewText();\n        this._showAltAzGrid = Settings.get_current().get_showAltAzGrid();\n        this._showAltAzGridText = Settings.get_current().get_showAltAzGridText();\n        this._showPrecessionChart = Settings.get_current().get_showPrecessionChart();\n        this._showConstellationPictures = Settings.get_current().get_showConstellationPictures();\n        this._showConstellationLabels = Settings.get_current().get_showConstellationLabels();\n        this._solarSystemCMB = Settings.get_current().get_solarSystemCMB();\n        this._solarSystemMinorPlanets = Settings.get_current().get_solarSystemMinorPlanets();\n        this._solarSystemPlanets = Settings.get_current().get_solarSystemPlanets();\n        this._showEarthSky = Settings.get_current().get_showEarthSky();\n        this._solarSystemMinorOrbits = Settings.get_current().get_solarSystemMinorOrbits();\n        this._constellationFiguresFilter = Settings.get_current().get_constellationFiguresFilter().clone();\n        this._constellationBoundariesFilter = Settings.get_current().get_constellationBoundariesFilter().clone();\n        this._constellationNamesFilter = Settings.get_current().get_constellationNamesFilter().clone();\n        this._constellationArtFilter = Settings.get_current().get_constellationArtFilter().clone();\n        this._showSkyOverlays = Settings.get_current().get_showSkyOverlays();\n        this._showConstellations = Settings.get_current().get_showConstellations();\n        this._showSkyNode = Settings.get_current().get_showSkyNode();\n        this._showSkyGrids = Settings.get_current().get_showSkyGrids();\n        this._showSkyOverlaysIn3d = Settings.get_current().get_showSkyOverlaysIn3d();\n        this._earthCutawayView = Settings.get_current().get_earthCutawayView();\n        this._showISSModel = Settings.get_current().get_showISSModel();\n        this._milkyWayModel = Settings.get_current().get_milkyWayModel();\n        this._minorPlanetsFilter = Settings.get_current().get_minorPlanetsFilter();\n        this._planetOrbitsFilter = Settings.get_current().get_planetOrbitsFilter();\n    },\n\n    syncSettings: function () {\n        Settings.get_globalSettings().set_actualPlanetScale(this._actualPlanetScale);\n        Settings.get_globalSettings().set_locationAltitude(this._locationAltitude);\n        Settings.get_globalSettings().set_locationLat(this._locationLat);\n        Settings.get_globalSettings().set_locationLng(this._locationLng);\n        Settings.get_globalSettings().set_earthCutawayView(this._earthCutawayView);\n        Settings.get_globalSettings().set_showConstellationBoundries(this._showConstellationBoundries);\n        Settings.get_globalSettings().set_showConstellationFigures(this._showConstellationFigures);\n        Settings.get_globalSettings().set_showConstellationSelection(this._showConstellationSelection);\n        Settings.get_globalSettings().set_showEcliptic(this._showEcliptic);\n        Settings.get_globalSettings().set_showElevationModel(this._showElevationModel);\n        Settings.get_globalSettings().set_showGrid(this._showGrid);\n        Settings.get_globalSettings().set_showHorizon(this._showHorizon);\n        Settings.get_globalSettings().set_showSolarSystem(this._showSolarSystem);\n        Settings.get_globalSettings().set_localHorizonMode(this._localHorizonMode);\n        Settings.get_globalSettings().set_galacticMode(this._galacticMode);\n        Settings.get_globalSettings().set_solarSystemStars(this._solarSystemStars);\n        Settings.get_globalSettings().set_solarSystemMilkyWay(this._solarSystemMilkyWay);\n        Settings.get_globalSettings().set_solarSystemCosmos(this._solarSystemCosmos);\n        Settings.get_globalSettings().set_solarSystemCMB(this._solarSystemCMB);\n        Settings.get_globalSettings().set_solarSystemOrbits(this._solarSystemOrbits);\n        Settings.get_globalSettings().set_solarSystemMinorOrbits(this._solarSystemMinorOrbits);\n        Settings.get_globalSettings().set_solarSystemMinorPlanets(this._solarSystemMinorPlanets);\n        Settings.get_globalSettings().set_solarSystemOverlays(this._solarSystemOverlays);\n        Settings.get_globalSettings().set_solarSystemLighting(this._solarSystemLighting);\n        Settings.get_globalSettings().set_showISSModel(this._showISSModel);\n        Settings.get_globalSettings().set_solarSystemScale(this._solarSystemScale);\n        Settings.get_globalSettings().set_solarSystemMultiRes(this._solarSystemMultiRes);\n        Settings.get_globalSettings().set_showEarthSky(this._showEarthSky);\n        Settings.get_globalSettings().set_minorPlanetsFilter(this._minorPlanetsFilter);\n        Settings.get_globalSettings().set_planetOrbitsFilter(this._planetOrbitsFilter);\n        Settings.get_globalSettings().set_showEquatorialGridText(this._showEquatorialGridText);\n        Settings.get_globalSettings().set_showGalacticGrid(this._showGalacticGrid);\n        Settings.get_globalSettings().set_showGalacticGridText(this._showGalacticGridText);\n        Settings.get_globalSettings().set_showEclipticGrid(this._showEclipticGrid);\n        Settings.get_globalSettings().set_showEclipticGridText(this._showEclipticGridText);\n        Settings.get_globalSettings().set_showEclipticOverviewText(this._showEclipticOverviewText);\n        Settings.get_globalSettings().set_showAltAzGrid(this._showAltAzGrid);\n        Settings.get_globalSettings().set_showAltAzGridText(this._showAltAzGridText);\n        Settings.get_globalSettings().set_showPrecessionChart(this._showPrecessionChart);\n        Settings.get_globalSettings().set_showConstellationPictures(this._showConstellationPictures);\n        Settings.get_globalSettings().set_constellationsEnabled(this._constellationsEnabled);\n        Settings.get_globalSettings().set_showSkyOverlays(this._showSkyOverlays);\n        Settings.get_globalSettings().set_constellations(this._showConstellations);\n        Settings.get_globalSettings().set_showSkyNode(this._showSkyNode);\n        Settings.get_globalSettings().set_showSkyGrids(this._showSkyGrids);\n        Settings.get_globalSettings().set_constellationFiguresFilter(this._constellationFiguresFilter.clone());\n        Settings.get_globalSettings().set_constellationBoundariesFilter(this._constellationBoundariesFilter.clone());\n        Settings.get_globalSettings().set_constellationNamesFilter(this._constellationNamesFilter.clone());\n        Settings.get_globalSettings().set_constellationArtFilter(this._constellationArtFilter.clone());\n    },\n\n    get_solarSystemStars: function () {\n        return this._solarSystemStars;\n    },\n\n    get_solarSystemMultiRes: function () {\n        return this._solarSystemMultiRes;\n    },\n\n    get_solarSystemMilkyWay: function () {\n        return this._solarSystemMilkyWay;\n    },\n\n    get_solarSystemCosmos: function () {\n        return this._solarSystemCosmos;\n    },\n\n    get_solarSystemOrbits: function () {\n        return this._solarSystemOrbits;\n    },\n\n    get_solarSystemOverlays: function () {\n        return this._solarSystemOverlays;\n    },\n\n    get_solarSystemLighting: function () {\n        return this._solarSystemLighting;\n    },\n\n    get_solarSystemScale: function () {\n        return this._solarSystemScale;\n    },\n\n    get_actualPlanetScale: function () {\n        return this._actualPlanetScale;\n    },\n\n    get_fovCamera: function () {\n        return this._fovCamera;\n    },\n\n    get_fovEyepiece: function () {\n        return this._fovEyepiece;\n    },\n\n    get_fovTelescope: function () {\n        return this._fovTelescope;\n    },\n\n    get_locationAltitude: function () {\n        if (this._hasLocation) {\n            return this._locationAltitude;\n        } else {\n            return Settings.get_current().get_locationAltitude();\n        }\n    },\n\n    get_locationLat: function () {\n        if (this._hasLocation) {\n            return this._locationLat;\n        } else {\n            return Settings.get_current().get_locationLat();\n        }\n    },\n\n    get_locationLng: function () {\n        if (this._hasLocation) {\n            return this._locationLng;\n        } else {\n            return Settings.get_current().get_locationLng();\n        }\n    },\n\n    get_showClouds: function () {\n        return this._showClouds;\n    },\n\n    get_showConstellationBoundries: function () {\n        return this._showConstellationBoundries;\n    },\n\n    get_showConstellationFigures: function () {\n        return this._showConstellationFigures;\n    },\n\n    get_showConstellationSelection: function () {\n        return this._showConstellationSelection;\n    },\n\n    get_showEcliptic: function () {\n        return this._showEcliptic;\n    },\n\n    get_showElevationModel: function () {\n        return this._showElevationModel;\n    },\n\n    get_showFieldOfView: function () {\n        return this._showFieldOfView;\n    },\n\n    get_showGrid: function () {\n        return this._showGrid;\n    },\n\n    get_showHorizon: function () {\n        return this._showHorizon;\n    },\n\n    get_showHorizonPanorama: function () {\n        return this._showHorizonPanorama;\n    },\n\n    get_showMoonsAsPointSource: function () {\n        return this._showMoonsAsPointSource;\n    },\n\n    get_showSolarSystem: function () {\n        return this._showSolarSystem;\n    },\n\n    get_localHorizonMode: function () {\n        return this._localHorizonMode;\n    },\n\n    get_galacticMode: function () {\n        return this._galacticMode;\n    },\n\n    get_thumbnail: function () {\n        if (this._target != null && this._thumbnail == null) {\n            return null;\n        }\n        return this._thumbnail;\n    },\n\n    set_thumbnail: function (value) {\n        this._thumbnail = value;\n        if (this._owner != null) {\n            this._owner.set_tourDirty(true);\n        }\n        return value;\n    },\n\n    get_overlays: function () {\n        return this._overlays;\n    },\n\n    get_musicTrack: function () {\n        return this._musicTrack;\n    },\n\n    set_musicTrack: function (value) {\n        if (this._musicTrack !== value) {\n            this._musicTrack = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    get_voiceTrack: function () {\n        return this._voiceTrack;\n    },\n\n    set_voiceTrack: function (value) {\n        if (this._voiceTrack !== value) {\n            this._voiceTrack = value;\n            if (this._owner != null) {\n                this._owner.set_tourDirty(true);\n            }\n        }\n        return value;\n    },\n\n    addOverlay: function (overlay) {\n        if (overlay == null) {\n            return;\n        }\n        overlay.set_owner(this);\n        this._overlays.push(overlay);\n        if (this._owner != null) {\n            this._owner.set_tourDirty(true);\n        }\n    },\n\n    removeOverlay: function (overlay) {\n        ss.remove(this._overlays, overlay);\n        if (this._owner != null) {\n            this._owner.set_tourDirty(true);\n        }\n    },\n\n    cleanUp: function () {\n        // \"todo this needs to be evaluated. Causes major pain in WebClient\"\n        var $enum1 = ss.enumerate(this.get_overlays());\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.cleanUp();\n        }\n        if (this._voiceTrack != null) {\n            this._voiceTrack.cleanUp();\n        }\n        if (this._musicTrack != null) {\n            this._musicTrack.cleanUp();\n        }\n    },\n\n    sendToBack: function (target) {\n        ss.remove(this._overlays, target);\n        this._overlays.splice(0, 0, target);\n        if (this._owner != null) {\n            this._owner.set_tourDirty(true);\n        }\n    },\n\n    bringToFront: function (target) {\n        ss.remove(this._overlays, target);\n        this._overlays.push(target);\n        if (this._owner != null) {\n            this._owner.set_tourDirty(true);\n        }\n    },\n\n    bringForward: function (target) {\n        var index = this._overlays.indexOf(target);\n        if (index < this._overlays.length - 1) {\n            ss.remove(this._overlays, target);\n            this._overlays.splice(index + 1, 0, target);\n        }\n        if (this._owner != null) {\n            this._owner.set_tourDirty(true);\n        }\n    },\n\n    sendBackward: function (target) {\n        var index = this._overlays.indexOf(target);\n        if (index > 0) {\n            ss.remove(this._overlays, target);\n            this._overlays.splice(index - 1, 0, target);\n        }\n        if (this._owner != null) {\n            this._owner.set_tourDirty(true);\n        }\n    },\n\n    getNextOverlay: function (current) {\n        if (current == null) {\n            if (this._overlays.length > 0) {\n                return this._overlays[0];\n            }\n            else {\n                return null;\n            }\n        }\n        var index = this._overlays.indexOf(current);\n        if (index < this._overlays.length - 1) {\n            return this._overlays[index + 1];\n        } else {\n            return this._overlays[0];\n        }\n    },\n\n    getPerviousOverlay: function (current) {\n        if (current == null) {\n            if (this._overlays.length > 0) {\n                return this._overlays[0];\n            }\n            else {\n                return null;\n            }\n        }\n        var index = this._overlays.indexOf(current);\n        if (index > 0) {\n            return this._overlays[index - 1];\n        } else {\n            return this._overlays[this._overlays.length - 1];\n        }\n    },\n\n    getOverlayById: function (id) {\n        var $enum1 = ss.enumerate(this._overlays);\n        while ($enum1.moveNext()) {\n            var ol = $enum1.current;\n            if (ol.id === id) {\n                return ol;\n            }\n        }\n        return null;\n    },\n\n    get_tourStopThumbnailFilename: function () {\n        return ss.format('{0}.thumb.png', this._id);\n    },\n\n    _saveToXml: function (xmlWriter, saveContent) {\n        if (saveContent) {\n            if (this._thumbnail != null) {\n            }\n        }\n        xmlWriter._writeStartElement('TourStop');\n        xmlWriter._writeAttributeString('Id', this._id);\n        xmlWriter._writeAttributeString('Name', this._name);\n        xmlWriter._writeAttributeString('Description', this._description);\n        xmlWriter._writeAttributeString('Thumbnail', this._thumbnailString);\n        xmlWriter._writeAttributeString('Duration', Util.xmlDuration(this._duration));\n        xmlWriter._writeAttributeString('Master', this._masterSlide.toString());\n        xmlWriter._writeAttributeString('TransitionType', Enums.toXml('TransitionType', this._transition));\n        xmlWriter._writeAttributeString('TransitionTime', this._transitionTime.toString());\n        xmlWriter._writeAttributeString('TransitionOutTime', this._transitionOutTime.toString());\n        xmlWriter._writeAttributeString('TransitionHoldTime', this._transitionHoldTime.toString());\n        xmlWriter._writeAttributeString('NextSlide', this._nextSlide);\n        xmlWriter._writeAttributeString('InterpolationType', Enums.toXml('InterpolationType', this._interpolationType));\n        xmlWriter._writeAttributeString('HasLocation', this._hasLocation.toString());\n        if (this._hasLocation) {\n            xmlWriter._writeAttributeString('LocationAltitude', this._locationAltitude.toString());\n            xmlWriter._writeAttributeString('LocationLat', this._locationLat.toString());\n            xmlWriter._writeAttributeString('LocationLng', this._locationLng.toString());\n        }\n        xmlWriter._writeAttributeString('HasTime', this._hasTime.toString());\n        if (this._hasTime) {\n            xmlWriter._writeAttributeString('StartTime', Util.xmlDate(this._startTime));\n            xmlWriter._writeAttributeString('EndTime', Util.xmlDate(this._endTime));\n        }\n        xmlWriter._writeAttributeString('ActualPlanetScale', this._actualPlanetScale.toString());\n        xmlWriter._writeAttributeString('ShowClouds', this._showClouds.toString());\n        xmlWriter._writeAttributeString('EarthCutawayView', this._earthCutawayView.toString());\n        xmlWriter._writeAttributeString('ShowConstellationBoundries', this._showConstellationBoundries.toString());\n        xmlWriter._writeAttributeString('ShowConstellationFigures', this._showConstellationFigures.toString());\n        xmlWriter._writeAttributeString('ShowConstellationSelection', this._showConstellationSelection.toString());\n        xmlWriter._writeAttributeString('ShowEcliptic', this._showEcliptic.toString());\n        xmlWriter._writeAttributeString('EclipticColor', this._eclipticColor.save());\n        xmlWriter._writeAttributeString('ShowElevationModel', this._showElevationModel.toString());\n        this._showFieldOfView = false;\n        xmlWriter._writeAttributeString('ShowFieldOfView', this._showFieldOfView.toString());\n        xmlWriter._writeAttributeString('ShowGrid', this._showGrid.toString());\n        xmlWriter._writeAttributeString('ShowHorizon', this._showHorizon.toString());\n        xmlWriter._writeAttributeString('ShowHorizonPanorama', this._showHorizonPanorama.toString());\n        xmlWriter._writeAttributeString('ShowMoonsAsPointSource', this._showMoonsAsPointSource.toString());\n        xmlWriter._writeAttributeString('ShowSolarSystem', this._showSolarSystem.toString());\n        xmlWriter._writeAttributeString('FovTelescope', this._fovTelescope.toString());\n        xmlWriter._writeAttributeString('FovEyepiece', this._fovEyepiece.toString());\n        xmlWriter._writeAttributeString('FovCamera', this._fovCamera.toString());\n        xmlWriter._writeAttributeString('LocalHorizonMode', this._localHorizonMode.toString());\n        xmlWriter._writeAttributeString('GalacticMode', this._galacticMode.toString());\n        xmlWriter._writeAttributeString('FadeInOverlays', this._fadeInOverlays.toString());\n        xmlWriter._writeAttributeString('SolarSystemStars', this._solarSystemStars.toString());\n        xmlWriter._writeAttributeString('SolarSystemMilkyWay', this._solarSystemMilkyWay.toString());\n        xmlWriter._writeAttributeString('SolarSystemCosmos', this._solarSystemCosmos.toString());\n        xmlWriter._writeAttributeString('SolarSystemCMB', this._solarSystemCMB.toString());\n        xmlWriter._writeAttributeString('SolarSystemOrbits', this._solarSystemOrbits.toString());\n        xmlWriter._writeAttributeString('SolarSystemMinorOrbits', this._solarSystemMinorOrbits.toString());\n        xmlWriter._writeAttributeString('SolarSystemOverlays', this._solarSystemOverlays.toString());\n        xmlWriter._writeAttributeString('SolarSystemLighting', this._solarSystemLighting.toString());\n        xmlWriter._writeAttributeString('ShowISSModel', this._showISSModel.toString());\n        xmlWriter._writeAttributeString('SolarSystemScale', this._solarSystemScale.toString());\n        xmlWriter._writeAttributeString('MinorPlanetsFilter', this._minorPlanetsFilter.toString());\n        xmlWriter._writeAttributeString('PlanetOrbitsFilter', this._planetOrbitsFilter.toString());\n        xmlWriter._writeAttributeString('SolarSystemMultiRes', this._solarSystemMultiRes.toString());\n        xmlWriter._writeAttributeString('SolarSystemMinorPlanets', this._solarSystemMinorPlanets.toString());\n        xmlWriter._writeAttributeString('SolarSystemPlanets', this._solarSystemPlanets.toString());\n        xmlWriter._writeAttributeString('ShowEarthSky', this._showEarthSky.toString());\n        xmlWriter._writeAttributeString('ShowEquatorialGridText', this.get_showEquatorialGridText().toString());\n        xmlWriter._writeAttributeString('EquatorialGridColor', this.get_equatorialGridColor().save());\n        xmlWriter._writeAttributeString('ShowGalacticGrid', this.get_showGalacticGrid().toString());\n        xmlWriter._writeAttributeString('ShowGalacticGridText', this.get_showGalacticGridText().toString());\n        xmlWriter._writeAttributeString('GalacticGridColor', this.get_galacticGridColor().save());\n        xmlWriter._writeAttributeString('ShowEclipticGrid', this.get_showEclipticGrid().toString());\n        xmlWriter._writeAttributeString('ShowEclipticGridText', this.get_showEclipticGridText().toString());\n        xmlWriter._writeAttributeString('EclipticGridColor', this.get_eclipticGridColor().save());\n        xmlWriter._writeAttributeString('ShowEclipticOverviewText', this.get_showEclipticOverviewText().toString());\n        xmlWriter._writeAttributeString('ShowAltAzGrid', this.get_showAltAzGrid().toString());\n        xmlWriter._writeAttributeString('ShowAltAzGridText', this.get_showAltAzGridText().toString());\n        xmlWriter._writeAttributeString('AltAzGridColor', this.get_altAzGridColor().save());\n        xmlWriter._writeAttributeString('ShowPrecessionChart', this.get_showPrecessionChart().toString());\n        xmlWriter._writeAttributeString('PrecessionChartColor', this.get_precessionChartColor().save());\n        xmlWriter._writeAttributeString('ConstellationPictures', this.get_showConstellationPictures().toString());\n        xmlWriter._writeAttributeString('ConstellationsEnabled', this.get_constellationsEnabled());\n        xmlWriter._writeAttributeString('ShowConstellationLabels', this.get_showConstellationLabels().toString());\n        xmlWriter._writeAttributeString('ShowSkyOverlays', this.get_showSkyOverlays().toString());\n        xmlWriter._writeAttributeString('ShowConstellations', this.get_showConstellations().toString());\n        xmlWriter._writeAttributeString('ShowSkyNode', this.get_showSkyNode().toString());\n        xmlWriter._writeAttributeString('ShowSkyGrids', this.get_showSkyGrids().toString());\n        xmlWriter._writeAttributeString('SkyOverlaysIn3d', this.get_showSkyOverlaysIn3d().toString());\n        xmlWriter._writeAttributeString('ConstellationFiguresFilter', this._constellationFiguresFilter.toString());\n        xmlWriter._writeAttributeString('ConstellationBoundariesFilter', this._constellationBoundariesFilter.toString());\n        xmlWriter._writeAttributeString('ConstellationNamesFilter', this._constellationNamesFilter.toString());\n        xmlWriter._writeAttributeString('ConstellationArtFilter', this._constellationArtFilter.toString());\n        this._target._saveToXml(xmlWriter, 'Place');\n        if (this._endTarget != null) {\n            this._endTarget._saveToXml(xmlWriter, 'EndTarget');\n        }\n        xmlWriter._writeStartElement('Overlays');\n        var $enum1 = ss.enumerate(this._overlays);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.saveToXml(xmlWriter, false);\n        }\n        xmlWriter._writeEndElement();\n        if (this._musicTrack != null) {\n            xmlWriter._writeStartElement('MusicTrack');\n            this._musicTrack.saveToXml(xmlWriter, false);\n            xmlWriter._writeEndElement();\n        }\n        if (this._voiceTrack != null) {\n            xmlWriter._writeStartElement('VoiceTrack');\n            this._voiceTrack.saveToXml(xmlWriter, false);\n            xmlWriter._writeEndElement();\n        }\n        this._writeLayerList(xmlWriter);\n        xmlWriter._writeEndElement();\n    },\n\n    _writeLayerList: function (xmlWriter) {\n        if (ss.keyCount(this.layers) > 0) {\n            xmlWriter._writeStartElement('VisibleLayers');\n            var $enum1 = ss.enumerate(ss.keys(this.layers));\n            while ($enum1.moveNext()) {\n                var key = $enum1.current;\n                var info = this.layers[key];\n                xmlWriter._writeStartElement('Layer');\n                xmlWriter._writeAttributeString('StartOpacity', info.startOpacity.toString());\n                xmlWriter._writeAttributeString('EndOpacity', info.endOpacity.toString());\n                var len = info.startParams.length;\n                xmlWriter._writeAttributeString('ParamCount', len.toString());\n                for (var i = 0; i < len; i++) {\n                    xmlWriter._writeAttributeString(ss.format('StartParam{0}', i), info.startParams[i].toString());\n                    xmlWriter._writeAttributeString(ss.format('EndParam{0}', i), info.endParams[i].toString());\n                }\n                xmlWriter._writeValue(info.id.toString());\n                xmlWriter._writeEndElement();\n            }\n            xmlWriter._writeEndElement();\n        }\n    },\n\n    _addFilesToCabinet: function (fc, excludeAudio) {\n        if (this._thumbnail != null) {\n            var filename = ss.format('{0}.thumb.png', this._id);\n            var blob = this._owner.getFileBlob(filename);\n            fc.addFile(this._owner.get_workingDirectory() + filename, blob);\n        }\n        if (!excludeAudio) {\n            if (this._musicTrack != null) {\n                this._musicTrack.addFilesToCabinet(fc);\n            }\n            if (this._voiceTrack != null) {\n                this._voiceTrack.addFilesToCabinet(fc);\n            }\n        }\n        var $enum1 = ss.enumerate(this._overlays);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            overlay.addFilesToCabinet(fc);\n        }\n    },\n\n    getNextDefaultName: function (baseName) {\n        var suffixId = 1;\n        var $enum1 = ss.enumerate(this._overlays);\n        while ($enum1.moveNext()) {\n            var overlay = $enum1.current;\n            if (ss.startsWith(overlay.get_name(), baseName)) {\n                var id = 0;\n                try {\n                    id = parseInt(overlay.get_name().substr(baseName.length));\n                }\n                catch ($e2) {\n                }\n                if (id >= suffixId) {\n                    suffixId = id + 1;\n                }\n            }\n        }\n        return ss.format('{0} {1}', baseName, suffixId);\n    },\n\n    _loadLayerList: function (layersNode) {\n        var $enum1 = ss.enumerate(layersNode.childNodes);\n        while ($enum1.moveNext()) {\n            var layer = $enum1.current;\n            if (layer.nodeName === 'Layer') {\n                var info = new LayerInfo();\n                var id = layer.innerHTML;\n                info.id = Guid.fromString(id);\n                info.startOpacity = parseFloat(layer.attributes.getNamedItem('StartOpacity').nodeValue);\n                info.endOpacity = parseFloat(layer.attributes.getNamedItem('EndOpacity').nodeValue);\n                var len = 0;\n                if (layer.attributes.getNamedItem('ParamCount') != null) {\n                    len = parseInt(layer.attributes.getNamedItem('ParamCount').nodeValue);\n                }\n                info.startParams = new Array(len);\n                info.endParams = new Array(len);\n                info.frameParams = new Array(len);\n                for (var i = 0; i < len; i++) {\n                    info.startParams[i] = parseFloat(layer.attributes.getNamedItem(ss.format('StartParam{0}', i)).nodeValue);\n                    info.endParams[i] = parseFloat(layer.attributes.getNamedItem(ss.format('EndParam{0}', i)).nodeValue);\n                    info.frameParams[i] = info.startParams[i];\n                }\n                this.layers[info.id] = info;\n            }\n        }\n    },\n\n    _updateLayerOpacity: function () {\n        if (!this.get_keyFramed()) {\n        } else {\n            this.updateTweenPosition();\n        }\n    },\n\n    get_showEquatorialGridText: function () {\n        return this._showEquatorialGridText;\n    },\n\n    set_showEquatorialGridText: function (value) {\n        this._showEquatorialGridText = value;\n        return value;\n    },\n\n    get_showGalacticGrid: function () {\n        return this._showGalacticGrid;\n    },\n\n    set_showGalacticGrid: function (value) {\n        this._showGalacticGrid = value;\n        return value;\n    },\n\n    get_showGalacticGridText: function () {\n        return this._showGalacticGridText;\n    },\n\n    set_showGalacticGridText: function (value) {\n        this._showGalacticGridText = value;\n        return value;\n    },\n\n    get_showEclipticGrid: function () {\n        return this._showEclipticGrid;\n    },\n\n    set_showEclipticGrid: function (value) {\n        this._showEclipticGrid = value;\n        return value;\n    },\n\n    get_showEclipticGridText: function () {\n        return this._showEclipticGridText;\n    },\n\n    set_showEclipticGridText: function (value) {\n        this._showEclipticGridText = value;\n        return value;\n    },\n\n    get_showEclipticOverviewText: function () {\n        return this._showEclipticOverviewText;\n    },\n\n    set_showEclipticOverviewText: function (value) {\n        this._showEclipticOverviewText = value;\n        return value;\n    },\n\n    get_showAltAzGrid: function () {\n        return this._showAltAzGrid;\n    },\n\n    set_showAltAzGrid: function (value) {\n        this._showAltAzGrid = value;\n        return value;\n    },\n\n    get_showAltAzGridText: function () {\n        return this._showAltAzGridText;\n    },\n\n    set_showAltAzGridText: function (value) {\n        this._showAltAzGridText = value;\n        return value;\n    },\n\n    get_showPrecessionChart: function () {\n        return this._showPrecessionChart;\n    },\n\n    set_showPrecessionChart: function (value) {\n        this._showPrecessionChart = value;\n        return value;\n    },\n\n    get_showConstellationPictures: function () {\n        return this._showConstellationPictures;\n    },\n\n    set_showConstellationPictures: function (value) {\n        this._showConstellationPictures = value;\n        return value;\n    },\n\n    get_showConstellationLabels: function () {\n        return this._showConstellationLabels;\n    },\n\n    set_showConstellationLabels: function (value) {\n        this._showConstellationLabels = value;\n        return value;\n    },\n\n    get_solarSystemCMB: function () {\n        return this._solarSystemCMB;\n    },\n\n    set_solarSystemCMB: function (value) {\n        this._solarSystemCMB = value;\n        return value;\n    },\n\n    get_solarSystemMinorPlanets: function () {\n        return this._solarSystemMinorPlanets;\n    },\n\n    set_solarSystemMinorPlanets: function (value) {\n        this._solarSystemMinorPlanets = value;\n        return value;\n    },\n\n    get_solarSystemPlanets: function () {\n        return this._solarSystemPlanets;\n    },\n\n    set_solarSystemPlanets: function (value) {\n        this._solarSystemPlanets = value;\n        return value;\n    },\n\n    get_showEarthSky: function () {\n        return this._showEarthSky;\n    },\n\n    set_showEarthSky: function (value) {\n        this._showEarthSky = value;\n        return value;\n    },\n\n    get_solarSystemMinorOrbits: function () {\n        return this._solarSystemMinorOrbits;\n    },\n\n    set_solarSystemMinorOrbits: function (value) {\n        this._solarSystemMinorOrbits = value;\n        return value;\n    },\n\n    get_constellationsEnabled: function () {\n        return this._constellationsEnabled;\n    },\n\n    set_constellationsEnabled: function (value) {\n        this._constellationsEnabled = value;\n        return value;\n    },\n\n    get_constellationFiguresFilter: function () {\n        return this._constellationFiguresFilter;\n    },\n\n    set_constellationFiguresFilter: function (value) {\n        this._constellationFiguresFilter = value;\n        return value;\n    },\n\n    get_constellationBoundariesFilter: function () {\n        return this._constellationBoundariesFilter;\n    },\n\n    set_constellationBoundariesFilter: function (value) {\n        this._constellationBoundariesFilter = value;\n        return value;\n    },\n\n    get_constellationNamesFilter: function () {\n        return this._constellationNamesFilter;\n    },\n\n    set_constellationNamesFilter: function (value) {\n        this._constellationNamesFilter = value;\n        return value;\n    },\n\n    get_constellationArtFilter: function () {\n        return this._constellationArtFilter;\n    },\n\n    set_constellationArtFilter: function (value) {\n        this._constellationArtFilter = value;\n        return value;\n    },\n\n    get_showSkyOverlays: function () {\n        return this._showSkyOverlays;\n    },\n\n    set_showSkyOverlays: function (value) {\n        this._showSkyOverlays = value;\n        return value;\n    },\n\n    get_showConstellations: function () {\n        return this._showConstellations;\n    },\n\n    set_showConstellations: function (value) {\n        this._showConstellations = value;\n        return value;\n    },\n\n    get_showSkyNode: function () {\n        return this._showSkyNode;\n    },\n\n    set_showSkyNode: function (value) {\n        this._showSkyNode = value;\n        return value;\n    },\n\n    get_showSkyGrids: function () {\n        return this._showSkyGrids;\n    },\n\n    set_showSkyGrids: function (value) {\n        this._showSkyGrids = value;\n        return value;\n    },\n\n    get_showSkyOverlaysIn3d: function () {\n        return this._showSkyOverlaysIn3d;\n    },\n\n    set_showSkyOverlaysIn3d: function (value) {\n        this._showSkyOverlaysIn3d = value;\n        return value;\n    },\n\n    get_earthCutawayView: function () {\n        return this._earthCutawayView;\n    },\n\n    set_earthCutawayView: function (value) {\n        this._earthCutawayView = value;\n        return value;\n    },\n\n    get_showISSModel: function () {\n        return this._showISSModel;\n    },\n\n    set_showISSModel: function (value) {\n        this._showISSModel = value;\n        return value;\n    },\n\n    get_milkyWayModel: function () {\n        return this._milkyWayModel;\n    },\n\n    set_milkyWayModel: function (value) {\n        this._milkyWayModel = value;\n        return value;\n    },\n\n    get_minorPlanetsFilter: function () {\n        return this._minorPlanetsFilter;\n    },\n\n    set_minorPlanetsFilter: function (value) {\n        this._minorPlanetsFilter = value;\n        return value;\n    },\n\n    get_planetOrbitsFilter: function () {\n        return this._planetOrbitsFilter;\n    },\n\n    set_planetOrbitsFilter: function (value) {\n        this._planetOrbitsFilter = value;\n        return value;\n    },\n\n    getSetting: function (type) {\n        if (type === 17) {\n            return new SettingParameter(true, this.faderOpacity, !!this.faderOpacity, null);\n        }\n        return new SettingParameter(false, 1, false, null);\n    },\n\n    get_eclipticGridColor: function () {\n        return this._eclipticGridColor;\n    },\n\n    set_eclipticGridColor: function (value) {\n        this._eclipticGridColor = value;\n        return value;\n    },\n\n    get_galacticGridColor: function () {\n        return this._galacticGridColor;\n    },\n\n    set_galacticGridColor: function (value) {\n        this._galacticGridColor = value;\n        return value;\n    },\n\n    get_altAzGridColor: function () {\n        return this._altAzGridColor;\n    },\n\n    set_altAzGridColor: function (value) {\n        this._altAzGridColor = value;\n        return value;\n    },\n\n    get_precessionChartColor: function () {\n        return this._precessionChartColor;\n    },\n\n    set_precessionChartColor: function (value) {\n        this._precessionChartColor = value;\n        return value;\n    },\n\n    get_eclipticColor: function () {\n        return this._eclipticColor;\n    },\n\n    set_eclipticColor: function (value) {\n        this._eclipticColor = value;\n        return value;\n    },\n\n    get_equatorialGridColor: function () {\n        return this._equatorialGridColor;\n    },\n\n    set_equatorialGridColor: function (value) {\n        this._equatorialGridColor = value;\n        return value;\n    },\n\n    get_constellationLabelsHeight: function () {\n        return this._constellationLabelsHeight;\n    },\n\n    set_constellationLabelsHeight: function (value) {\n        this._constellationLabelsHeight = value;\n        return value;\n    }\n};\n\nregisterType(\"TourStop\", [TourStop, TourStop$, null, ISettings]);\n\n\n// wwtlib.LayerInfo\n\nexport function LayerInfo() {\n    this.id = Guid.newGuid();\n    this.startOpacity = 1;\n    this.endOpacity = 1;\n    this.frameOpacity = 1;\n    this.startParams = new Array(0);\n    this.endParams = new Array(0);\n    this.frameParams = new Array(0);\n}\n\nvar LayerInfo$ = {};\n\nregisterType(\"LayerInfo\", [LayerInfo, LayerInfo$, null]);\n\n\n// wwtlib.UndoTourStopChange\n\nexport function UndoTourStopChange(text, tour) {\n    this._undoXml = '';\n    this._redoXml = '';\n    this._currentIndex = 0;\n    this._actionText = '';\n    this._targetTour = null;\n    this._currentIndex = tour.get_currentTourstopIndex();\n    this._actionText = text;\n    this._targetTour = tour;\n    this._undoXml = TourStop.getXmlText(tour.get_currentTourStop());\n    this._targetTour.set_tourDirty(true);\n}\n\nvar UndoTourStopChange$ = {\n    get_actionText: function () {\n        return this._actionText;\n    },\n\n    set_actionText: function (value) {\n        this._actionText = value;\n        return value;\n    },\n\n    undo: function () {\n        var tsRedo = this._targetTour.get_tourStops()[this._currentIndex];\n        var parser = new DOMParser();\n        var doc = parser.parseFromString(this._undoXml, 'text/xml');\n        var node = Util.selectSingleNode(doc, 'TourStop');\n        this._targetTour.get_tourStops()[this._currentIndex] = TourStop._fromXml(this._targetTour, node);\n        this._targetTour.set_currentTourstopIndex(this._currentIndex);\n        if (ss.emptyString(this._redoXml)) {\n            this._redoXml = TourStop.getXmlText(tsRedo);\n        }\n        this._targetTour.set_tourDirty(true);\n    },\n\n    redo: function () {\n        var parser = new DOMParser();\n        var doc = parser.parseFromString(this._redoXml, 'text/xml');\n        var node = Util.selectSingleNode(doc, 'TourStop');\n        this._targetTour.get_tourStops()[this._currentIndex] = TourStop._fromXml(this._targetTour, node);\n        this._targetTour.set_currentTourstopIndex(this._currentIndex);\n        this._targetTour.set_tourDirty(true);\n    },\n\n    toString: function () {\n        return this._actionText;\n    }\n};\n\nregisterType(\"UndoTourStopChange\", [UndoTourStopChange, UndoTourStopChange$, null, IUndoStep]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Managing undos of changes made in the tour editor.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { IUndoStep } from \"../interfaces.js\";\nimport { Language } from \"../util.js\";\n\n\n// wwtlib.Undo\n\nexport function Undo() { }\n\nUndo._undoStack = new ss.Stack();\nUndo._redoStack = new ss.Stack();\n\nUndo.clear = function () {\n    Undo._undoStack = new ss.Stack();\n    Undo._redoStack = new ss.Stack();\n};\n\nUndo.push = function (step) {\n    Undo._undoStack.push(step);\n    Undo._redoStack = new ss.Stack();\n};\n\nUndo.peekActionString = function () {\n    if (Undo._undoStack.count > 0) {\n        return Undo._undoStack.peek().toString();\n    }\n    else {\n        return Language.getLocalizedText(551, 'Nothing to Undo');\n    }\n};\n\nUndo.peekRedoActionString = function () {\n    if (Undo._redoStack.count > 0) {\n        return Undo._redoStack.peek().toString();\n    }\n    else {\n        return '';\n    }\n};\n\nUndo.peekAction = function () {\n    return (Undo._undoStack.count > 0);\n};\n\nUndo.peekRedoAction = function () {\n    return (Undo._redoStack.count > 0);\n};\n\nUndo.stepBack = function () {\n    var step = Undo._undoStack.pop();\n    step.undo();\n    Undo._redoStack.push(step);\n};\n\nUndo.stepForward = function () {\n    var step = Undo._redoStack.pop();\n    step.redo();\n    Undo._undoStack.push(step);\n};\n\nvar Undo$ = {};\n\nregisterType(\"Undo\", [Undo, Undo$, null]);\n\n\n// wwtlib.UndoStep\n\nexport function UndoStep() { }\n\nvar UndoStep$ = {\n    undo: function () { },\n\n    redo: function () { },\n\n    toString: function () {\n        return Language.getLocalizedText(551, 'Nothing to Undo');\n    }\n};\n\nregisterType(\"UndoStep\", [UndoStep, UndoStep$, null, IUndoStep]);\n\n\n// wwtlib.UndoTourSlidelistChange\n\nexport function UndoTourSlidelistChange(text, tour) {\n    this._currentIndex = 0;\n    this._actionText = '';\n    this._targetTour = null;\n    this._undoList = [];\n    for (var i = 0; i < tour.get_tourStops().length; i++) {\n        this._undoList.push(tour.get_tourStops()[i]);\n    }\n    this._currentIndex = tour.get_currentTourstopIndex();\n    this._actionText = text;\n    this._targetTour = tour;\n    this._targetTour.set_tourDirty(true);\n}\n\nvar UndoTourSlidelistChange$ = {\n    get_actionText: function () {\n        return this._actionText;\n    },\n\n    set_actionText: function (value) {\n        this._actionText = value;\n        return value;\n    },\n\n    undo: function () {\n        this._redoList = this._targetTour.get_tourStops();\n        this._targetTour.set_tourStops(this._undoList);\n        this._targetTour.set_currentTourstopIndex(this._currentIndex);\n        this._targetTour.set_tourDirty(true);\n    },\n\n    redo: function () {\n        this._undoList = this._targetTour.get_tourStops();\n        this._targetTour.set_tourStops(this._redoList);\n        this._targetTour.set_currentTourstopIndex(this._currentIndex);\n        this._targetTour.set_tourDirty(true);\n    },\n\n    toString: function () {\n        return this._actionText;\n    }\n};\n\nregisterType(\"UndoTourSlidelistChange\", [UndoTourSlidelistChange, UndoTourSlidelistChange$, null, IUndoStep]);\n\n\n// wwtlib.UndoTourPropertiesChange\n\nexport function UndoTourPropertiesChange(text, tour) {\n    this._actionText = '';\n    this._targetTour = null;\n    this._undoDomeMode = false;\n    this._undoLevel = 0;\n    this._redoDomeMode = false;\n    this._redoLevel = 0;\n    this._undoTitle = tour.get_title();\n    this._undoAuthor = tour.get_author();\n    this._undoAuthorEmail = tour.get_authorEmail();\n    this._undoDescription = tour.get_description();\n    this._undoAuthorImage = tour.get_authorImage();\n    this._undoOrganizationUrl = tour.get_organizationUrl();\n    this._undoOrgName = tour.get_orgName();\n    this._undoKeywords = tour.get_keywords();\n    this._undoTaxonomy = tour.get_taxonomy();\n    this._undoLevel = tour.get_level();\n    this._actionText = text;\n    this._targetTour = tour;\n    this._targetTour.set_tourDirty(true);\n}\n\nvar UndoTourPropertiesChange$ = {\n    get_actionText: function () {\n        return this._actionText;\n    },\n\n    set_actionText: function (value) {\n        this._actionText = value;\n        return value;\n    },\n\n    undo: function () {\n        this._redoTitle = this._targetTour.get_title();\n        this._redoAuthor = this._targetTour.get_author();\n        this._redoAuthorEmail = this._targetTour.get_authorEmail();\n        this._redoDescription = this._targetTour.get_description();\n        this._redoAuthorImage = this._targetTour.get_authorImage();\n        this._redoOrganizationUrl = this._targetTour.get_organizationUrl();\n        this._redoOrgName = this._targetTour.get_orgName();\n        this._redoKeywords = this._targetTour.get_keywords();\n        this._redoTaxonomy = this._targetTour.get_taxonomy();\n        this._redoLevel = this._targetTour.get_level();\n        this._targetTour.set_title(this._undoTitle);\n        this._targetTour.set_author(this._undoAuthor);\n        this._targetTour.set_authorEmail(this._undoAuthorEmail);\n        this._targetTour.set_description(this._undoDescription);\n        this._targetTour.set_authorImage(this._undoAuthorImage);\n        this._targetTour.set_organizationUrl(this._undoOrganizationUrl);\n        this._targetTour.set_orgName(this._undoOrgName);\n        this._targetTour.set_keywords(this._undoKeywords);\n        this._targetTour.set_taxonomy(this._undoTaxonomy);\n        this._targetTour.set_level(this._undoLevel);\n        this._targetTour.set_tourDirty(true);\n    },\n\n    redo: function () {\n        this._targetTour.set_title(this._redoTitle);\n        this._targetTour.set_author(this._redoAuthor);\n        this._targetTour.set_authorEmail(this._redoAuthorEmail);\n        this._targetTour.set_description(this._redoDescription);\n        this._targetTour.set_authorImage(this._redoAuthorImage);\n        this._targetTour.set_organizationUrl(this._redoOrganizationUrl);\n        this._targetTour.set_orgName(this._redoOrgName);\n        this._targetTour.set_keywords(this._redoKeywords);\n        this._targetTour.set_taxonomy(this._redoTaxonomy);\n        this._targetTour.set_level(this._redoLevel);\n        this._targetTour.set_tourDirty(true);\n    },\n\n    toString: function () {\n        return this._actionText;\n    }\n};\n\nregisterType(\"UndoTourPropertiesChange\", [UndoTourPropertiesChange, UndoTourPropertiesChange$, null, IUndoStep]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A spherical triangle that can be subdivided.\n\nimport { registerType } from \"./typesystem.js\";\nimport { Vector2d, Vector3d, PositionTexture } from \"./double3d.js\";\n\n\n// wwtlib.Triangle\n\nexport function Triangle() {\n    // Vertex Indices\n    this.a = -1;\n    this.b = -1;\n    this.c = -1;\n}\n\nTriangle.create = function (a, b, c) {\n    var temp = new Triangle();\n    temp.a = a;\n    temp.b = b;\n    temp.c = c;\n    return temp;\n};\n\nvar Triangle$ = {\n    subDivide: function (triList, vertexList) {\n        var a1 = Vector3d.lerp(vertexList[this.b].position, vertexList[this.c].position, 0.5);\n        var b1 = Vector3d.lerp(vertexList[this.c].position, vertexList[this.a].position, 0.5);\n        var c1 = Vector3d.lerp(vertexList[this.a].position, vertexList[this.b].position, 0.5);\n        var a1uv = Vector2d.lerp(Vector2d.create(vertexList[this.b].tu, vertexList[this.b].tv), Vector2d.create(vertexList[this.c].tu, vertexList[this.c].tv), 0.5);\n        var b1uv = Vector2d.lerp(Vector2d.create(vertexList[this.c].tu, vertexList[this.c].tv), Vector2d.create(vertexList[this.a].tu, vertexList[this.a].tv), 0.5);\n        var c1uv = Vector2d.lerp(Vector2d.create(vertexList[this.a].tu, vertexList[this.a].tv), Vector2d.create(vertexList[this.b].tu, vertexList[this.b].tv), 0.5);\n        a1.normalize();\n        b1.normalize();\n        c1.normalize();\n        var aIndex = vertexList.length;\n        var bIndex = vertexList.length + 1;\n        var cIndex = vertexList.length + 2;\n        vertexList.push(PositionTexture.createPosRaw(a1, a1uv.x, a1uv.y));\n        vertexList.push(PositionTexture.createPosRaw(b1, b1uv.x, b1uv.y));\n        vertexList.push(PositionTexture.createPosRaw(c1, c1uv.x, c1uv.y));\n        triList.push(Triangle.create(this.a, cIndex, bIndex));\n        triList.push(Triangle.create(this.b, aIndex, cIndex));\n        triList.push(Triangle.create(this.c, bIndex, aIndex));\n        triList.push(Triangle.create(aIndex, bIndex, cIndex));\n    },\n\n    subDivideNoNormalize: function (triList, vertexList) {\n        var a1 = Vector3d.lerp(vertexList[this.b].position, vertexList[this.c].position, 0.5);\n        var b1 = Vector3d.lerp(vertexList[this.c].position, vertexList[this.a].position, 0.5);\n        var c1 = Vector3d.lerp(vertexList[this.a].position, vertexList[this.b].position, 0.5);\n        var a1uv = Vector2d.lerp(Vector2d.create(vertexList[this.b].tu, vertexList[this.b].tv), Vector2d.create(vertexList[this.c].tu, vertexList[this.c].tv), 0.5);\n        var b1uv = Vector2d.lerp(Vector2d.create(vertexList[this.c].tu, vertexList[this.c].tv), Vector2d.create(vertexList[this.a].tu, vertexList[this.a].tv), 0.5);\n        var c1uv = Vector2d.lerp(Vector2d.create(vertexList[this.a].tu, vertexList[this.a].tv), Vector2d.create(vertexList[this.b].tu, vertexList[this.b].tv), 0.5);\n        var aIndex = vertexList.length;\n        var bIndex = vertexList.length + 1;\n        var cIndex = vertexList.length + 2;\n        vertexList.push(PositionTexture.createPosRaw(a1, a1uv.x, a1uv.y));\n        vertexList.push(PositionTexture.createPosRaw(b1, b1uv.x, b1uv.y));\n        vertexList.push(PositionTexture.createPosRaw(c1, c1uv.x, c1uv.y));\n        triList.push(Triangle.create(this.a, cIndex, bIndex));\n        triList.push(Triangle.create(this.b, aIndex, cIndex));\n        triList.push(Triangle.create(this.c, bIndex, aIndex));\n        triList.push(Triangle.create(aIndex, bIndex, cIndex));\n    }\n};\n\nregisterType(\"Triangle\", [Triangle, Triangle$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Some small but helpful structures applied on top of the type system\n// provided by ScriptSharp.\n\nimport { ss } from \"./ss.js\";\n\nconst registry = ss.createRegistry(\"wwtlib\");\nconst enumTypes = {};\n\n\n// Finish the creation and registration of a type that plugs into the\n// ScriptSharp type system. The return value is the new type object.\n//\n// The `typeinfo` argument has a complex structure and comes from the code\n// generated by ScriptSharp.\nexport function registerType(name, typeinfo) {\n    // This function modifies the class object and returns it, but we can just\n    // ignore the return value.\n    ss.createType(name, typeinfo, registry);\n}\n\n\n// Register an enumeration with the type system.\n//\n// This is used to parse various enumerations from serialized formats.\nexport function registerEnum(name, type) {\n    enumTypes[name] = type;\n}\n\n\n// The Enums helper \"class\". We could easily port this to a non-OO interface.\n\nexport function Enums() { }\n\nEnums.parse = function (enumType, value) {\n    if (value === \"Default\") {\n        value = \"DefaultV\";\n    }\n\n    if (value === \"0\") {\n        return 0;\n    }\n\n    var val = value.substr(0, 1).toLowerCase() + value.substr(1);\n    return enumTypes[enumType][val];\n};\n\nEnums.toXml = function (enumType, value) {\n    var x = \"0\";\n    var p = Object.keys(enumTypes[enumType]);\n\n    for (var i in p) {\n        if (enumTypes[enumType][p[i]] == value) {\n            x = p[i];\n            break;\n        }\n    }\n\n    var val = x;\n    var enumString = val.substr(0, 1).toUpperCase() + val.substr(1);\n    if (enumString === \"DefaultV\") {\n        enumString = \"Default\";\n    }\n\n    return enumString;\n};\n\nconst Enums$ = {};\n\nregisterType(\"Enums\", [Enums, Enums$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A tile in a pyramid that uses a HEALPix projection.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\n\n\n// wwtlib.UiTools\n\nexport function UiTools() { }\n\nUiTools.kilometersPerAu = 149598000;\nUiTools.auPerParsec = 206264.806;\nUiTools.auPerLightYear = 63239.6717;\nUiTools.ssmUnitConversion = 370; // No idea where this fudge factor comes from\n\nUiTools.gamma = function (val, gamma) {\n    return Math.min(255, ss.truncate(((255 * Math.pow(val / 255, 1 / gamma)) + 0.5)));\n};\n\nUiTools.getNamesStringFromArray = function (array) {\n    var names = '';\n    var delim = '';\n    var $enum1 = ss.enumerate(array);\n    while ($enum1.moveNext()) {\n        var name = $enum1.current;\n        names += delim;\n        names += name;\n        delim = ';';\n    }\n    return names;\n};\n\nUiTools.solarSystemToMeters = function (SolarSystemCameraDistance) {\n    return SolarSystemCameraDistance * 149598000 * 370;\n};\n\nUiTools.metersToSolarSystemDistance = function (meters) {\n    return meters / 370 * 149598000;\n};\n\nUiTools.metersToZoom = function (meters) {\n    return ((meters / 1000 / 370) - 1E-06) / 4 * 9;\n};\n\n// Distance is stored in AU in WWT but is displayed in KM AU, LY, MPC\nUiTools.formatDistance = function (distance) {\n    if (distance < 0.1) {\n        var km = (distance * 149598000);\n        if (km < 10) {\n            var m = ss.truncate((km * 1000));\n            return ss.format('{0} m', m);\n        } else {\n            km = ss.truncate(km);\n            return ss.format('{0} km', km);\n        }\n    }\n    else if (distance < (10)) {\n        var au = ss.truncate((distance * 10)) / 10;\n        return ss.format('{0} au', au);\n    }\n    else if (distance < (63239.6717 / 10)) {\n        var au = ss.truncate(distance);\n        return ss.format('{0} au', au);\n    }\n    else if (distance < (63239.6717 * 10)) {\n        var ly = ss.truncate(((distance * 10) / 63239.6717)) / 10;\n        return ss.format('{0} ly', ly);\n    }\n    else if (distance < (63239.6717 * 1000000)) {\n        var ly = ss.truncate((distance / 63239.6717));\n        return ss.format('{0} ly', ly);\n    }\n    else if (distance < (206264.806 * 10000000)) {\n        var mpc = ss.truncate(((distance * 10) / (206264.806 * 1000000))) / 10;\n        return ss.format('{0} Mpc', mpc);\n    }\n    else if (distance < (206264.806 * 1000000000)) {\n        var mpc = ss.truncate((distance / (206264.806 * 1000000)));\n        return ss.format('{0} Mpc', mpc);\n    }\n    else {\n        var mpc = ss.truncate(((distance * 10) / (206264.806 * 1000000000))) / 10;\n        return ss.format('{0} Gpc', mpc);\n    }\n};\n\nUiTools.formatDecimalHours = function (dayFraction) {\n    var today = ss.now();\n    var ts = today.getTimezoneOffset() / 60;\n    ts = 0;\n    var day = (dayFraction - ts) + 0.0083333334;\n    while (day > 24) {\n        day -= 24;\n    }\n    while (day < 0) {\n        day += 24;\n    }\n    var hours = ss.truncate(day);\n    var minutes = ss.truncate(((day * 60) - (hours * 60)));\n    var seconds = ss.truncate(((day * 3600) - ((hours * 3600) + (minutes * 60))));\n    return ss.format('{0}:{1}', hours, minutes, seconds);\n};\n\nUiTools.splitString = function (data, delimiter) {\n    var output = [];\n    var nestingLevel = 0;\n    var current = 0;\n    var count = 0;\n    var start = 0;\n    while (current < data.length) {\n        if (data.substr(current, 1) === '(') {\n            nestingLevel++;\n        }\n        if (data.substr(current, 1) === ')') {\n            nestingLevel--;\n        }\n        if (current === (data.length - 1)) {\n            if (data.substr(current, 1) === delimiter) {\n                output.push(data.substr(start, count));\n                output.push('');\n                return output;\n            }\n            else {\n                count++;\n            }\n        }\n        if (current === (data.length - 1) || (data.substr(current, 1) === delimiter && delimiter === '\\t') || (!nestingLevel && data.substr(current, 1) === delimiter)) {\n            output.push(data.substr(start, count));\n            start = current + 1;\n            count = 0;\n        } else {\n            count++;\n        }\n        current++;\n    }\n    return output;\n};\n\nUiTools.split = function (data, delimiters) {\n    var output = [];\n    var nestingLevel = 0;\n    var current = 0;\n    var count = 0;\n    var start = 0;\n    while (current < data.length) {\n        if (current === (data.length - 1)) {\n            count++;\n        }\n        if (current === (data.length - 1) || delimiters.indexOf(data.substr(current, 1)) > -1) {\n            output.push(data.substr(start, count));\n            start = current + 1;\n            count = 0;\n        } else {\n            count++;\n        }\n        current++;\n    }\n    return output;\n};\n\nUiTools._beep = function () { };\n\nvar UiTools$ = {};\n\nregisterType(\"UiTools\", [UiTools, UiTools$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The helper class for rewriting URLs. This gets complicated, because we might\n// need to proxy for CORS headers and/or HTTPS support, *and* we sometimes also\n// want to change the host and/or path to allow the engine or the webclient to\n// swap out the data backend or the frontend.\n\nimport { registerType, registerEnum } from \"./typesystem.js\";\nimport { ss } from \"./ss.js\";\nimport { freestandingMode } from \"./data_globals.js\";\n\nvar DomainHandling = {\n    wwtFlagship: 0, // this host is worldwidetelescope.org or an equivalent\n    localhost: 1, // this host is localhost or an equivalent\n    neverProxy: 2, // this host is known to never need proxying\n    tryNoProxy: 3,  // none of the above, and we hope that we can get data from it without needing to use our proxy\n    proxy: 4, // none of the above, and we need to proxy it for HTTPS/CORS reasons\n}\n\n// wwtlib.URLRewriteMode\n\nexport var URLRewriteMode = {\n    asIfAbsolute: 0, // act as if this URL is absolute even if it is missing a domain\n    originRelative: 1, // if this URL is relative, treat it as relative to the browser origin\n};\n\nregisterType(\"URLRewriteMode\", URLRewriteMode);\nregisterEnum(\"URLRewriteMode\", URLRewriteMode);\n\n\n// wwtlib.URLHelpers\n\nexport function URLHelpers() {\n    // this will be \"http:\" or \"https:\"\n    this._origin_protocol = typeof window === \"undefined\" ? \"https:\" : window.location.protocol;\n    this._force_https = (this._origin_protocol === 'https:');\n\n    // host name, no port number\n    this._origin_domain = typeof window === \"undefined\" ? \"\" : window.location.hostname;\n\n\n    this._domain_handling = {};\n    this._domain_handling['worldwidetelescope.org'] = DomainHandling.wwtFlagship;\n    this._domain_handling['www.worldwidetelescope.org'] = DomainHandling.wwtFlagship;\n    this._domain_handling['cdn.worldwidetelescope.org'] = DomainHandling.wwtFlagship;\n    this._domain_handling['content.worldwidetelescope.org'] = DomainHandling.wwtFlagship;\n    this._domain_handling['beta.worldwidetelescope.org'] = DomainHandling.wwtFlagship;\n    this._domain_handling['beta-cdn.worldwidetelescope.org'] = DomainHandling.wwtFlagship;\n    this._domain_handling['wwtstaging.azurewebsites.net'] = DomainHandling.wwtFlagship;\n    this._domain_handling['wwtfiles.blob.core.windows.net'] = DomainHandling.neverProxy;\n    this._domain_handling['wwttiles.blob.core.windows.net'] = DomainHandling.neverProxy;\n    this._domain_handling['web.wwtassets.org'] = DomainHandling.neverProxy;\n    this._domain_handling['data1.wwtassets.org'] = DomainHandling.neverProxy;\n    this._domain_handling['localhost'] = DomainHandling.localhost;\n    this._domain_handling['127.0.0.1'] = DomainHandling.localhost;\n\n    switch (this._origin_domain) {\n        case 'worldwidetelescope.org':\n        case 'www.worldwidetelescope.org':\n        case 'cdn.worldwidetelescope.org':\n            this._core_static_baseurl = this._origin_protocol + '//cdn.worldwidetelescope.org';\n            this._core_dynamic_baseurl = this._origin_protocol + '//worldwidetelescope.org';\n            break;\n        case 'beta.worldwidetelescope.org':\n        case 'beta-cdn.worldwidetelescope.org':\n            this._core_static_baseurl = this._origin_protocol + '//beta-cdn.worldwidetelescope.org';\n            this._core_dynamic_baseurl = this._origin_protocol + '//beta.worldwidetelescope.org';\n            break;\n        default:\n            this._core_static_baseurl = this._origin_protocol + '//cdn.worldwidetelescope.org';\n            this._core_dynamic_baseurl = this._origin_protocol + '//worldwidetelescope.org';\n            break;\n    }\n\n    this._engine_asset_baseurl = this._origin_protocol + '//web.wwtassets.org/engine/assets';\n\n    // this should be a set, but ScriptSharp had trouble with that.\n    this._flagship_static_lcpaths = {};\n    this._flagship_static_lcpaths['/wwtweb/2massoct.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/bingdemtile.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/bingdemtile2.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/catalog.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/catalog2.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/dem.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/dembath.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/demmars.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/demtile.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/dss.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/dsstoast.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/dusttoast.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/earthblend.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/earthmerbath.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/fixedaltitudedemtile.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/g360.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/galex4far.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/galex4near.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/galextoast.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/gettile.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/gettour.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/gettourfile.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/gettours.aspx'] = true; // maybe not?\n    this._flagship_static_lcpaths['/wwtweb/glimpse.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/halphatoast.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/hirise.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/hirisedem2.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/hirisedem3.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/jupiter.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/mandel.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/mandel1.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/mars.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/marsdem.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/marshirise.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/marsmoc.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/martiantile.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/martiantile2.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/mipsgal.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/moondem.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/moonoct.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/moontoast.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/moontoastdem.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/postmars.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/postmarsdem.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/postmarsdem2.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/rasstoast.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/sdsstoast.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/sdsstoast2.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/sdsstoast2.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/thumbnail.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/tiles.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/tiles2.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/tilesthumb.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/twomasstoast.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/tychooct.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/veblend.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/vlsstoast.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/wmap.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/wmsmoon.aspx'] = true;\n    this._flagship_static_lcpaths['/wwtweb/wmstoast.aspx'] = true;\n}\n\nvar URLHelpers$ = {\n    overrideAssetBaseurl: function (baseurl) {\n        this._engine_asset_baseurl = baseurl;\n    },\n\n    rewrite: function (url, rwmode) {\n        // Sadly, we can't take advantage of JS/browser URL parsing\n        // because this function might be passed template URLs like\n        // \"http://r{S:2}.ortho.tiles.virtualearth.net/...\" that won't\n        // parse. So we have to split up the URL manually.\n        var lc = url.toLowerCase();\n        var lcproto;\n        var url_no_protocol;\n\n        if (ss.startsWith(lc, 'http://')) {\n            lcproto = 'http:';\n            url_no_protocol = url.substring(7);\n        } else if (ss.startsWith(lc, 'https://')) {\n            lcproto = 'https:';\n            url_no_protocol = url.substring(8);\n        } else if (ss.startsWith(lc, '//')) {\n            lcproto = '';\n            url_no_protocol = url.substring(2);\n        } else if (ss.startsWith(lc, 'blob:')) {\n            // The web client uses URL.createObjectURL() to ingest local\n            // disk files into the web app. That function creates blob\n            // URLs, and it turns out that we definitely don't want to\n            // rewrite them!\n            return url;\n        } else {\n            switch (rwmode) {\n                case URLRewriteMode.asIfAbsolute:\n                default:\n                    // Treat `foo/bar` as a domain name of `foo` and a\n                    // path of `/bar`. Really we should demand that the\n                    // caller always pass us an absolute URL, but URLs\n                    // will be coming from random data sources and we're\n                    // not currently rigorous enough to guarantee that\n                    // this function will get validated inputs -- and in\n                    // such cases, throwing exceptions won't help.\n                    lcproto = '';\n                    url_no_protocol = url;\n                    break;\n\n                case URLRewriteMode.originRelative:\n                    // Treat `foo/bar` as a URL relative to the window\n                    // origin. Since it looks relative, any weird\n                    // templating stuff in the URL text *ought* not cause\n                    // problems for the browser URL parsing ...\n                    url = (new URL(url, window.location.href)).toString();\n                    return this.rewrite(url, 0);\n            }\n        }\n\n        // If we're freestanding, we can't use the proxy and we don't want\n        // to forcibly rewrite URLs to potentially point at any core WWT\n        // domains, so there is nothing more to do (now that we've potentially\n        // handled origin-relative URLs).\n        if (freestandingMode) {\n            return url;\n        }\n\n        var domain;\n        var rest; // potentially \"/foo/CASE/bar?q=1&b=1#fragment\"\n        var slash_index = url_no_protocol.indexOf('/');\n\n        if (slash_index < 0) {\n            domain = url_no_protocol;\n            rest = '/';\n        } else {\n            domain = url_no_protocol.substring(0, slash_index);\n            rest = url_no_protocol.substring(slash_index); // starts with \"/\"\n        }\n\n        var lcdomain = domain.toLowerCase();\n        var lcpath = rest.toLowerCase().split('?')[0];\n\n        if (!ss.keyExists(this._domain_handling, lcdomain)) {\n            // Domains include nonstandard port specifications, so it's\n            // possible that we could get here with a discernably\n            // localhost-y domain.\n            if (ss.startsWith(lcdomain, 'localhost:') || ss.startsWith(lcdomain, '127.0.0.1:')) {\n                this._domain_handling[lcdomain] = DomainHandling.localhost;\n            } else {\n                this._domain_handling[lcdomain] = DomainHandling.tryNoProxy;\n            }\n        }\n\n        var mode = this._domain_handling[lcdomain];\n\n        switch (mode) {\n            case DomainHandling.localhost:\n                return url;  // can't proxy, so we'll just have to hope it works\n\n            case DomainHandling.neverProxy:\n            case DomainHandling.tryNoProxy:\n            default:\n                if (this._force_https && lcproto !== 'https:') {\n                    // Force HTTPS and we'll see what happens. If\n                    // downloading fails, we'll set a flag and use our\n                    // proxy to launder the security.\n                    //\n                    // NOTE: it is important that we use `domain` and not\n                    // `lcdomain`, even though domain names are\n                    // case-insensitive, because we might be processing a\n                    // template URL containing text like `{S}`, and WWT's\n                    // replacements *are* case-sensitive. Yes, I did learn\n                    // this the hard way.\n                    return 'https://' + domain + rest;\n                }\n                return url;\n\n            case DomainHandling.proxy:\n                if (!lcproto) {\n                    // Make sure that we give the proxy a real absolute\n                    // URL. Guess http, and if the proxy is forced to\n                    // upgrade, so be it.\n                    url = 'http://' + url;\n                }\n\n                // We need to encode the URL as a query-string parameter\n                // to pass to the proxy. However, the encoding will turn\n                // \"{}\" into \"%7B%7D\", so that *if* this URL is then going\n                // to be fed into the templating system,\n                // search-and-replace for e.g. \"{0}\" will break. So we\n                // un-encode those particular characters, since it ought\n                // to be safe to do so anyway.\n                url = ss.replaceString(ss.replaceString(encodeURIComponent(url), '%7B', '{'), '%7D', '}');\n                return this._core_dynamic_baseurl + '/webserviceproxy.aspx?targeturl=' + url;\n\n            case DomainHandling.wwtFlagship:\n                // Rewrite \"flagship\"/core URLs to go through whatever our\n                // core bases are. Assume that URLs are dynamic (=> are\n                // not loaded through the CDN) unless proven otherwise.\n                var is_static = false;\n\n                if (ss.startsWith(lcpath, '/data/')) {\n                    is_static = true;\n                } else if (ss.keyExists(this._flagship_static_lcpaths, lcpath)) {\n                    is_static = true;\n                } else if (ss.startsWith(lcpath, '/content/')) {\n                    is_static = true;\n                } else if (ss.startsWith(lcpath, '/engine/assets/')) {\n                    is_static = true;\n                }\n\n                if (is_static) {\n                    return this._core_static_baseurl + rest;\n                }\n\n                return this._core_dynamic_baseurl + rest;\n        }\n    },\n\n    // Call this when you have tried to load a url via XMLHttpRequest or\n    // something along those lines, and the attempt has failed. We will mark the\n    // domain as needing proxying, and will return a new proxy-enabled URL to try.\n    // The exception is for flagship website URLs, which we know that the proxy\n    // won't help with. For those, null is returned.\n    activateProxy: function (url) {\n        // If we're freestanding, we never proxy.\n        if (freestandingMode) {\n            return null;\n        }\n\n        // Get the domain. XXX copy/pastey from the above.\n\n        var lc = url.toLowerCase();\n        var url_no_protocol;\n\n        if (ss.startsWith(lc, 'http://')) {\n            url_no_protocol = url.substring(7);\n        } else if (ss.startsWith(lc, 'https://')) {\n            url_no_protocol = url.substring(8);\n        } else if (ss.startsWith(lc, '//')) {\n            url_no_protocol = url.substring(2);\n        } else {\n            url_no_protocol = url;\n        }\n\n        var lcdomain;\n        var slash_index = url_no_protocol.indexOf('/');\n\n        if (slash_index < 0) {\n            lcdomain = url_no_protocol;\n        } else {\n            lcdomain = url_no_protocol.substring(0, slash_index).toLowerCase();\n        }\n\n        // Is this a flagship or never-proxy URL? If so, don't bother proxying.\n\n        if (!ss.keyExists(this._domain_handling, lcdomain)) {\n            if (ss.startsWith(lcdomain, 'localhost:') || ss.startsWith(lcdomain, '127.0.0.1:')) {\n                this._domain_handling[lcdomain] = DomainHandling.localhost;\n            }\n            else {\n                this._domain_handling[lcdomain] = DomainHandling.tryNoProxy;\n            }\n        }\n\n        var mode = this._domain_handling[lcdomain];\n        if (mode === DomainHandling.wwtFlagship || mode === DomainHandling.neverProxy || mode === DomainHandling.localhost) {\n            return null;\n        }\n\n        // OK, we should try proxying. So:\n        this._domain_handling[lcdomain] = DomainHandling.proxy;\n        return this.rewrite(url, 0);\n    },\n\n    engineAssetUrl: function (subpath) {\n        return ss.format('{0}/{1}', this._engine_asset_baseurl, subpath);\n    },\n\n    coreDynamicUrl: function (subpath) {\n        return ss.format('{0}/{1}', this._core_dynamic_baseurl, subpath);\n    },\n\n    coreStaticUrl: function (subpath) {\n        return ss.format('{0}/{1}', this._core_static_baseurl, subpath);\n    }\n};\n\nregisterType(\"URLHelpers\", [URLHelpers, URLHelpers$, null]);\n\nURLHelpers.singleton = new URLHelpers();\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Miscellaneous utilities.\n\nimport * as uuid from \"uuid\";\n\nimport { registerType, registerEnum } from \"./typesystem.js\";\nimport { ss } from \"./ss.js\";\nexport { Util } from \"./baseutil.js\";\nimport { Color } from \"./color.js\";\nimport { Vector2d, Vector3d } from \"./double3d.js\";\n\n\n// wwtlib.Rectangle\n\nexport function Rectangle() {\n    this.x = 0;\n    this.y = 0;\n    this.width = 0;\n    this.height = 0;\n}\n\nRectangle.create = function (x, y, width, height) {\n    var temp = new Rectangle();\n    temp.x = x;\n    temp.y = y;\n    temp.width = width;\n    temp.height = height;\n    return temp;\n};\n\nvar Rectangle$ = {\n    get_left: function () {\n        return this.x;\n    },\n\n    get_right: function () {\n        return this.x + this.width;\n    },\n\n    get_top: function () {\n        return this.y;\n    },\n\n    get_bottom: function () {\n        return this.y + this.height;\n    },\n\n    contains: function (point) {\n        return (this._between(point.x, this.x, this.x + this.width) && this._between(point.y, this.y, this.y + this.height));\n    },\n\n    _between: function (n, n1, n2) {\n        if (n1 > n2) {\n            return !(n > n1) && !(n < n2);\n        }\n        else {\n            return !(n < n1) && !(n > n2);\n        }\n    },\n\n    copy: function () {\n        var temp = new Rectangle();\n        temp.x = this.x;\n        temp.y = this.y;\n        temp.width = this.width;\n        temp.height = this.height;\n        return temp;\n    }\n};\n\nregisterType(\"Rectangle\", [Rectangle, Rectangle$, null]);\n\n\n// wwtlib.Guid\n\nexport function Guid() {\n    this._guid = Guid.create();\n}\n\nGuid.newGuid = function () {\n    return new Guid();\n};\n\nGuid.fromString = function (id) {\n    var temp = new Guid();\n    temp._guid = ss.trim(id);\n    return temp;\n};\n\nGuid.create = function () {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) { var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8); return v.toString(16); });\n};\n\n// The value 1420736a-a637-40a7-813a-ba692e72204e is a UUID (generated using the uuid CLI)\n// that serves as a 'namespace' for our GUIDs\n// The key property here is that this function always yields the same result for a given input\n// See for example https://www.sohamkamani.com/uuid-versions-explained/\nGuid.createFrom = function (value) {\n    var str = uuid.v5(value, '1420736a-a637-40a7-813a-ba692e72204e');\n    return Guid.fromString(str);\n};\n\nvar Guid$ = {\n    toString: function () {\n        return this._guid;\n    }\n};\n\nregisterType(\"Guid\", [Guid, Guid$, null]);\n\n\n// The \"Enums\" typed lived here in the C#, but is now in `typesystem.js`.\n\n// wwtlib.Mouse\n\nexport function Mouse() { }\n\nMouse.offsetX = function (canvas, e) {\n    var x = 0;\n    var element = canvas;\n    var me = e;\n    if (element.offsetParent != null) {\n        do {\n            x += element.offsetLeft;\n        } while ((element = element.offsetParent) != null);\n    }\n    return me.pageX - x;\n};\n\nMouse.offsetY = function (canvas, e) {\n    var y = 0;\n    var element = canvas;\n    var me = e;\n    if (element.offsetParent != null) {\n        do {\n            y += element.offsetTop;\n        } while ((element = element.offsetParent) != null);\n    }\n    return me.pageY - y;\n};\n\nregisterType(\"Mouse\", [Mouse, null, null]);\n\n\n// wwtlib.Language\n\nexport function Language() { }\n\nLanguage.getLocalizedText = function (id, text) {\n    return text;\n};\n\nvar Language$ = {};\n\nregisterType(\"Language\", [Language, Language$, null]);\n\n\n// wwtlib.Cursor\n\nexport function Cursor() { }\n\nCursor.get_position = function () {\n    return new Vector2d();\n};\n\nCursor.get_current = function () {\n    return document.body.style.cursor;\n};\n\nCursor.set_current = function (value) {\n    document.body.style.cursor = value;\n    return value;\n};\n\nvar Cursor$ = {};\n\nregisterType(\"Cursor\", [Cursor, Cursor$, null]);\n\n\n// wwtlib.Cursors\n\nexport function Cursors() { }\n\nCursors.get_arrow = function () {\n    return 'default';\n};\n\nCursors.get_cross = function () {\n    return 'crosshair';\n};\n\nCursors.get_defaultV = function () {\n    return 'default';\n};\n\nCursors.get_hand = function () {\n    return 'grab';\n};\n\nCursors.get_help = function () {\n    return 'help';\n};\n\nCursors.get_hSplit = function () {\n    return 'row-resize';\n};\n\nCursors.get_iBeam = function () {\n    return 'text';\n};\n\nCursors.get_no = function () {\n    return 'not-allowed';\n};\n\nCursors.get_sizeAll = function () {\n    return 'help';\n};\n\nCursors.get_sizeNESW = function () {\n    return 'nwse-resize';\n};\n\nCursors.get_sizeNS = function () {\n    return 'ns-resize';\n};\n\nCursors.get_sizeNWSE = function () {\n    return 'nwse-resize';\n};\n\nCursors.get_sizeWE = function () {\n    return 'ew-resize';\n};\n\nCursors.get_upArrow = function () {\n    return 'help';\n};\n\nCursors.get_vSplit = function () {\n    return 'col-resize';\n};\n\nCursors.get_waitCursor = function () {\n    return 'wait';\n};\n\nvar Cursors$ = {};\n\nregisterType(\"Cursors\", [Cursors, Cursors$, null]);\n\n\n// wwtlib.Keys\n\nexport var Keys = {\n    modifiers: -65536,\n    none: 0,\n    lButton: 1,\n    rButton: 2,\n    cancel: 3,\n    mButton: 4,\n    xButton1: 5,\n    xButton2: 6,\n    back: 8,\n    tab: 9,\n    lineFeed: 10,\n    clearKey: 12,\n    returnKey: 13,\n    enter: 13,\n    shiftKey: 16,\n    controlKey: 17,\n    menu: 18,\n    pause: 19,\n    capital: 20,\n    capsLock: 20,\n    kanaMode: 21,\n    hanguelMode: 21,\n    hangulMode: 21,\n    junjaMode: 23,\n    finalMode: 24,\n    hanjaMode: 25,\n    kanjiMode: 25,\n    escape: 27,\n    imeConvert: 28,\n    imeNonconvert: 29,\n    imeAccept: 30,\n    imeAceept: 30,\n    imeModeChange: 31,\n    space: 32,\n    prior: 33,\n    pageUp: 33,\n    next: 34,\n    pageDown: 34,\n    end: 35,\n    home: 36,\n    left: 37,\n    up: 38,\n    right: 39,\n    down: 40,\n    select: 41,\n    print: 42,\n    execute: 43,\n    snapshot: 44,\n    printScreen: 44,\n    insertKey: 45,\n    deleteKey: 46,\n    help: 47,\n    d0: 48,\n    d1: 49,\n    d2: 50,\n    d3: 51,\n    d4: 52,\n    d5: 53,\n    d6: 54,\n    d7: 55,\n    d8: 56,\n    d9: 57,\n    a: 65,\n    b: 66,\n    c: 67,\n    d: 68,\n    e: 69,\n    f: 70,\n    g: 71,\n    h: 72,\n    i: 73,\n    j: 74,\n    k: 75,\n    l: 76,\n    m: 77,\n    n: 78,\n    o: 79,\n    p: 80,\n    q: 81,\n    r: 82,\n    s: 83,\n    t: 84,\n    u: 85,\n    v: 86,\n    w: 87,\n    x: 88,\n    y: 89,\n    z: 90,\n    lWin: 91,\n    rWin: 92,\n    apps: 93,\n    sleep: 95,\n    numPad0: 96,\n    numPad1: 97,\n    numPad2: 98,\n    numPad3: 99,\n    numPad4: 100,\n    numPad5: 101,\n    numPad6: 102,\n    numPad7: 103,\n    numPad8: 104,\n    numPad9: 105,\n    multiply: 106,\n    add: 107,\n    separator: 108,\n    subtract: 109,\n    decimal: 110,\n    divide: 111,\n    f1: 112,\n    f2: 113,\n    f3: 114,\n    f4: 115,\n    f5: 116,\n    f6: 117,\n    f7: 118,\n    f8: 119,\n    f9: 120,\n    f10: 121,\n    f11: 122,\n    f12: 123,\n    f13: 124,\n    f14: 125,\n    f15: 126,\n    f16: 127,\n    f17: 128,\n    f18: 129,\n    f19: 130,\n    f20: 131,\n    f21: 132,\n    f22: 133,\n    f23: 134,\n    f24: 135,\n    numLock: 144,\n    scroll: 145,\n    lShiftKey: 160,\n    rShiftKey: 161,\n    lControlKey: 162,\n    rControlKey: 163,\n    lMenu: 164,\n    rMenu: 165,\n    browserBack: 166,\n    browserForward: 167,\n    browserRefresh: 168,\n    browserStop: 169,\n    browserSearch: 170,\n    browserFavorites: 171,\n    browserHome: 172,\n    volumeMute: 173,\n    volumeDown: 174,\n    volumeUp: 175,\n    mediaNextTrack: 176,\n    mediaPreviousTrack: 177,\n    mediaStop: 178,\n    mediaPlayPause: 179,\n    launchMail: 180,\n    selectMedia: 181,\n    launchApplication1: 182,\n    launchApplication2: 183,\n    oemSemicolon: 186,\n    oem1: 186,\n    oemplus: 187,\n    oemcomma: 188,\n    oemMinus: 189,\n    oemPeriod: 190,\n    oemQuestion: 191,\n    oem2: 191,\n    oemtilde: 192,\n    oem3: 192,\n    oemOpenBrackets: 219,\n    oem4: 219,\n    oemPipe: 220,\n    oem5: 220,\n    oemCloseBrackets: 221,\n    oem6: 221,\n    oemQuotes: 222,\n    oem7: 222,\n    oem8: 223,\n    oemBackslash: 226,\n    oem102: 226,\n    processKey: 229,\n    packet: 231,\n    attn: 246,\n    crsel: 247,\n    exsel: 248,\n    eraseEof: 249,\n    play: 250,\n    zoom: 251,\n    noName: 252,\n    pa1: 253,\n    oemClear: 254,\n    keyCode: 65535,\n    shift: 65536,\n    control: 131072,\n    alt: 262144\n};\n\nregisterType(\"Keys\", Keys);\n\n\n// wwtlib.SelectLink\n\nexport function SelectLink(id) {\n    this._return = false;\n    this._next = true;\n    this._linkSlide = false;\n    this._slide = null;\n    this._ok = false;\n    if (id != null) {\n        this.set_id(id);\n    }\n    else {\n        this.set_next(true);\n    }\n}\n\nvar SelectLink$ = {\n    get_returnCaller: function () {\n        return this._return;\n    },\n\n    set_returnCaller: function (value) {\n        if (value) {\n            this._slide = 'Return';\n        }\n        this._return = value;\n        return value;\n    },\n\n    get_next: function () {\n        return this._next;\n    },\n\n    set_next: function (value) {\n        if (value) {\n            this._slide = 'Next';\n        }\n        this._next = value;\n        return value;\n    },\n\n    get_linkToSlide: function () {\n        return this._linkSlide;\n    },\n\n    set_linkToSlide: function (value) {\n        if (value) {\n            this._slide = 'Next';\n        }\n        this._linkSlide = value;\n        return value;\n    },\n\n    get_id: function () {\n        return this._slide;\n    },\n\n    set_id: function (value) {\n        this._return = false;\n        this._next = false;\n        this._linkSlide = true;\n        this._slide = value;\n        return value;\n    },\n\n    get_OK: function () {\n        return this._ok;\n    },\n\n    set_OK: function (value) {\n        this._ok = value;\n        return value;\n    }\n};\n\nregisterType(\"SelectLink\", [SelectLink, SelectLink$, null]);\n\n\n// wwtlib.PopupVolume\n\nexport function PopupVolume() {\n    this.volume = 0;\n}\n\nvar PopupVolume$ = {\n    showDialog: function () {\n        return 1;\n    }\n};\n\nregisterType(\"PopupVolume\", [PopupVolume, PopupVolume$, null]);\n\n\n// wwtlib.PopupColorPicker\n\nexport function PopupColorPicker() {\n    this.volume = 0;\n    this.location = new Vector2d();\n    this.color = new Color();\n}\n\nvar PopupColorPicker$ = {\n    showDialog: function () {\n        return 1;\n    }\n};\n\nregisterType(\"PopupColorPicker\", [PopupColorPicker, PopupColorPicker$, null]);\n\n\n// wwtlib.OverlayProperties\n\nexport function OverlayProperties() {\n    this.volume = 0;\n    this.location = new Vector2d();\n    this.overlay = null;\n}\n\nvar OverlayProperties$ = {\n    showDialog: function () {\n        return 1;\n    }\n};\n\nregisterType(\"OverlayProperties\", [OverlayProperties, OverlayProperties$, null]);\n\n\n// This used to be Imageset.getTileKey, but to break\n// circular dependencies, we move it here.\n\nexport function getTileKey(imageset, level, x, y, parent) {\n    if (imageset.get_projection() === 7 && parent != null) {\n        var ipix = (parent).ipix * 4 + y * 2 + x;\n        return imageset.get_imageSetID().toString() + '\\\\' + level.toString() + '\\\\' + ipix.toString();\n    }\n\n    return imageset.get_imageSetID().toString() + '\\\\' + level.toString() + '\\\\' + y.toString() + '_' + x.toString();\n}\n\n\n// wwtlib.DistanceCalc\n//\n// This was originally defined in ToastTile.cs but we moved it to sort out the\n// dependency graph.\n\nexport function DistanceCalc() { }\n\nDistanceCalc.lineToPoint = function (l0, l1, p) {\n    var v = Vector3d.subtractVectors(l1, l0);\n    var w = Vector3d.subtractVectors(p, l0);\n    var dist = Vector3d.cross(w, v).length() / v.length();\n    return dist;\n};\n\nDistanceCalc.getUVFromInnerPoint = function (ul, ur, ll, lr, pnt) {\n    ul.normalize();\n    ur.normalize();\n    ll.normalize();\n    lr.normalize();\n    pnt.normalize();\n    var dUpper = DistanceCalc.lineToPoint(ul, ur, pnt);\n    var dLower = DistanceCalc.lineToPoint(ll, lr, pnt);\n    var dVert = dUpper + dLower;\n    var dRight = DistanceCalc.lineToPoint(ur, lr, pnt);\n    var dLeft = DistanceCalc.lineToPoint(ul, ll, pnt);\n    var dHoriz = dRight + dLeft;\n    return Vector2d.create(dLeft / dHoriz, dUpper / dVert);\n};\n\nvar DistanceCalc$ = {};\n\nregisterType(\"DistanceCalc\", [DistanceCalc, DistanceCalc$, null]);\n\n\n// wwtlib.DialogResult\n\nexport var DialogResult = {\n    OK: 1\n};\n\nregisterType(\"DialogResult\", DialogResult);\nregisterEnum(\"DialogResult\", DialogResult);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Reading binary data from a stream.\n\nimport { registerType } from \"../typesystem.js\";\n\n\n// wwtlib.BinaryReader\n\nexport function BinaryReader(arraybuf) {\n    this.position = 0;\n    this._data = null;\n    this._data = arraybuf;\n}\n\nBinaryReader.id = 1;\n\nvar BinaryReader$ = {\n    get_position: function () {\n        return this.position;\n    },\n\n    seek: function (pos) {\n        this.position = pos;\n    },\n\n    seekRelative: function (pos) {\n        this.position += pos;\n    },\n\n    get_length: function () {\n        return this._data.length;\n    },\n\n    get_endOfStream: function () {\n        return this.position >= this.get_length();\n    },\n\n    readByte: function () {\n        var result;\n        result = this._data[this.position];\n        this.position += 1;\n        return result;\n    },\n\n    readSByte: function () {\n        var result;\n        result = this._data[this.position];\n        this.position += 1;\n        return result;\n    },\n\n    readBytes: function (count) {\n        var buf = new Array(count);\n        for (var i = 0; i < count; i++) {\n            buf[i] = this._data[this.position + i];\n        }\n        this.position += count;\n        return buf;\n    },\n\n    readRemainingI16: function (i16Remaining) {\n        var data = new Float32Array(i16Remaining);\n        for (var i = 0; i < i16Remaining; i++) {\n            data[i] = this.readInt16(true);\n        }\n        return data;\n    },\n\n    readByteString: function (count) {\n        var data = '';\n        for (var i = 0; i < count; i++) {\n            data += String.fromCharCode(this._data[this.position + i]);\n        }\n        this.position += count;\n        return data;\n    },\n\n    readSingle: function () {\n        var tmp = new Uint8Array(4);\n        tmp[0] = this._data[this.position];\n        tmp[1] = this._data[this.position + 1];\n        tmp[2] = this._data[this.position + 2];\n        tmp[3] = this._data[this.position + 3];\n        var result = new Float32Array(tmp.buffer, 0, 1)[0];\n        this.position += 4;\n        return result;\n    },\n\n    readUInt32: function () {\n        var result = (this._data[this.position] + (this._data[this.position + 1] << 8) + (this._data[this.position + 2] << 16) + (this._data[this.position + 3] << 24));\n        this.position += 4;\n        return result;\n    },\n\n    readUInt16: function () {\n        var result = (this._data[this.position] + (this._data[this.position + 1] << 8));\n        this.position += 2;\n        return result;\n    },\n\n    readUInt16LittleEndian: function () {\n        var result = ((this._data[this.position] << 8) + this._data[this.position + 1]);\n        this.position += 2;\n        return result;\n    },\n\n    readInt16: function (littleEndian) {\n        var result = (littleEndian) ? this.readUInt16LittleEndian() : this.readUInt16();\n        if (!!(result & 0x8000)) {\n            return (-((result - 1) ^ 0xFFFF));\n        }\n        return result;\n    },\n\n    readInt32: function () {\n        var result = this.readUInt32();\n        if (!!(result & 0x80000000)) {\n            return (-((result - 1) ^ 0xFFFFFFFF));\n        }\n        return result;\n    },\n\n    readInt64: function () {\n        this.position += 8;\n        return BinaryReader.id++;\n    },\n\n    close: function () { }\n};\n\nregisterType(\"BinaryReader\", [BinaryReader, BinaryReader$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A basic bitmap class.\n\nimport { registerType } from \"../typesystem.js\";\nimport { tilePrepDevice } from \"../render_globals.js\";\nimport { WEBGL } from \"../graphics/webgl_constants.js\";\nimport { Texture } from \"../graphics/texture.js\";\n\n\n// wwtlib.Bitmap\n\nexport function Bitmap() {\n    this.width = 0;\n    this.height = 0;\n}\n\nBitmap.create = function (width, height) {\n    height = Texture.fitPowerOfTwo(height);\n    width = Texture.fitPowerOfTwo(width);\n    var bmp = new Bitmap();\n    bmp.height = height;\n    bmp.width = width;\n    bmp._buffer = new Uint8Array(width * height * 4);\n    return bmp;\n};\n\nvar Bitmap$ = {\n    setPixel: function (x, y, r, g, b, a) {\n        var index = (x + y * this.width) * 4;\n        this._buffer[index++] = r;\n        this._buffer[index++] = g;\n        this._buffer[index++] = b;\n        this._buffer[index++] = a;\n    },\n\n    getTexture: function () {\n        var tex = tilePrepDevice.createTexture();\n        tilePrepDevice.bindTexture(WEBGL.TEXTURE_2D, tex);\n        tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_WRAP_S, WEBGL.CLAMP_TO_EDGE);\n        tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_WRAP_T, WEBGL.CLAMP_TO_EDGE);\n        tilePrepDevice.texImage2D(WEBGL.TEXTURE_2D, 0, WEBGL.RGBA, this.width, this.height, 0, WEBGL.RGBA, WEBGL.UNSIGNED_BYTE, this._buffer);\n        tilePrepDevice.texParameteri(WEBGL.TEXTURE_2D, WEBGL.TEXTURE_MIN_FILTER, WEBGL.LINEAR_MIPMAP_NEAREST);\n        tilePrepDevice.generateMipmap(WEBGL.TEXTURE_2D);\n        tilePrepDevice.bindTexture(WEBGL.TEXTURE_2D, null);\n        return tex;\n    }\n};\n\nregisterType(\"Bitmap\", [Bitmap, Bitmap$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A color picker UI.\n\nimport { registerType } from \"../typesystem.js\";\nimport { Color, Colors } from \"../color.js\";\nimport { globalScriptInterface } from \"../data_globals.js\";\n\n\n// wwtlib.ColorPicker\n\nexport function ColorPicker() {\n    this.callBack = null;\n    this.color = Colors.get_white();\n}\n\nvar ColorPicker$ = {\n    nonMenuClick: function (e) { },\n\n    show: function (e) {\n        globalScriptInterface.showColorPicker(this, e);\n    },\n\n    getColorFromClick: function (e) {\n        var image = document.getElementById('colorhex');\n        var canvas = document.createElement('canvas');\n        canvas.width = image.width;\n        canvas.height = image.height;\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(image, 0, 0);\n        var pixels = ctx.getImageData(e.offsetX, e.offsetY, 1, 1).data;\n        this.color = Color.fromArgb(pixels[3], pixels[0], pixels[1], pixels[2]);\n        return this.color;\n    },\n\n    pickColor: function (e) {\n        this.callBack(this.color);\n    }\n};\n\nregisterType(\"ColorPicker\", [ColorPicker, ColorPicker$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Context menu items\n\nimport { registerType } from \"../typesystem.js\";\nimport { ss } from \"../ss.js\";\nimport { Vector2d } from \"../double3d.js\";\n\n\n// wwtlib.ContextMenuStrip\n\nexport function ContextMenuStrip() {\n    this.items = [];\n}\n\nvar ContextMenuStrip$ = {\n    _dispose: function () { },\n\n    _nonMenuClick: function (e) {\n        var menu = document.getElementById('contextmenu');\n        menu.style.display = 'none';\n        window.removeEventListener('click', ss.bind('_nonMenuClick', this), false);\n        var popup = document.getElementById('popoutmenu');\n        while (popup.firstChild != null) {\n            popup.removeChild(popup.firstChild);\n        }\n        popup.style.display = 'none';\n    },\n\n    _menuItemClicked: function (e) {\n        var me = e.currentTarget;\n        me.itemTag.click(me.itemTag, new ss.EventArgs());\n    },\n\n    _show: function (position) {\n        var menu = document.getElementById('contextmenu');\n        while (menu.firstChild != null) {\n            menu.removeChild(menu.firstChild);\n        }\n        menu.className = 'contextmenu';\n        menu.style.display = 'block';\n        menu.style.left = position.x.toString() + 'px';\n        menu.style.top = position.y.toString() + 'px';\n        window.addEventListener('click', ss.bind('_nonMenuClick', this), true);\n        var $enum1 = ss.enumerate(this.items);\n        while ($enum1.moveNext()) {\n            var item = $enum1.current;\n            if (item.visible) {\n                var md = document.createElement('div');\n                if (item.dropDownItems.length > 0) {\n                    md.className = 'contextmenuitem submenu';\n                }\n                else {\n                    if (item.checked) {\n                        md.className = 'contextmenuitem checkedmenu';\n                    }\n                    else {\n                        md.className = 'contextmenuitem';\n                    }\n                }\n                md.innerText = item.name;\n                var it = md;\n                it.itemTag = item;\n                md.addEventListener('mouseover', ss.bind('_openSubMenu', this), false);\n                if (item.click != null) {\n                    md.addEventListener('click', ss.bind('_menuItemClicked', this), false);\n                }\n                menu.appendChild(md);\n            }\n        }\n    },\n\n    _openSubMenu: function (e) {\n        var me = e.currentTarget;\n        var child = me.itemTag;\n        var menu = document.getElementById('popoutmenu');\n        while (menu.firstChild != null) {\n            menu.removeChild(menu.firstChild);\n        }\n        menu.style.display = 'none';\n        if (!child.dropDownItems.length) {\n            return;\n        }\n        var position = new Vector2d();\n        position.x = e.currentTarget.parentNode.offsetLeft + e.currentTarget.parentNode.clientWidth;\n        position.y = e.currentTarget.parentNode.offsetTop + e.currentTarget.offsetTop;\n        menu.className = 'contextmenu';\n        menu.style.display = 'block';\n        menu.style.left = position.x.toString() + 'px';\n        menu.style.top = position.y.toString() + 'px';\n        window.addEventListener('click', ss.bind('_nonMenuClick', this), true);\n        var $enum1 = ss.enumerate(child.dropDownItems);\n        while ($enum1.moveNext()) {\n            var item = $enum1.current;\n            if (item.visible) {\n                var md = document.createElement('div');\n                md.className = (item.checked) ? 'contextmenuitem checkedmenu' : 'contextmenuitem';\n                md.innerText = item.name;\n                var it = md;\n                it.itemTag = item;\n                md.addEventListener('click', ss.bind('_menuItemClicked', this), false);\n                menu.appendChild(md);\n            }\n        }\n    }\n};\n\nregisterType(\"ContextMenuStrip\", [ContextMenuStrip, ContextMenuStrip$, null]);\n\n\n// wwtlib.ToolStripMenuItem\n\nexport function ToolStripMenuItem() {\n    this.tag = null;\n    this.dropDownItems = [];\n    this.checked = false;\n    this.enabled = true;\n    this.visible = true;\n}\n\nToolStripMenuItem.create = function (name) {\n    var tsmi = new ToolStripMenuItem();\n    tsmi.name = name;\n    return tsmi;\n};\n\nvar ToolStripMenuItem$ = {};\n\nregisterType(\"ToolStripMenuItem\", [ToolStripMenuItem, ToolStripMenuItem$, null]);\n\n\n// wwtlib.ToolStripSeparator\n\nexport function ToolStripSeparator() {\n    ToolStripMenuItem.call(this);\n    this.name = '--------------------------------------';\n}\n\nvar ToolStripSeparator$ = {};\n\nregisterType(\"ToolStripSeparator\", [ToolStripSeparator, ToolStripSeparator$, ToolStripMenuItem]);\n\n\n// wwtlib.TagMe\n\nexport function TagMe() { }\n\nvar TagMe$ = {};\n\nregisterType(\"TagMe\", [TagMe, TagMe$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Types corresponding to popup dialog boxes.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\n\n\n// wwtlib.Dialog\n\nexport function Dialog() { }\n\nvar Dialog$ = {\n    add_showDialogHook: function (value) {\n        this.__showDialogHook = ss.bindAdd(this.__showDialogHook, value);\n    },\n\n    remove_showDialogHook: function (value) {\n        this.__showDialogHook = ss.bindSub(this.__showDialogHook, value);\n    },\n\n    show: function (dialogArgs, e) {\n        if (this.__showDialogHook != null) {\n            this.__showDialogHook(dialogArgs, e);\n        }\n    }\n};\n\nregisterType(\"Dialog\", [Dialog, Dialog$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// UI for viewing and manipulating a data histogram.\n\nimport { ss } from \"../ss.js\";\nimport { registerType } from \"../typesystem.js\";\nimport { Vector2d } from \"../double3d.js\";\nimport { useGlVersion2, tileCacheGetTile } from \"../render_globals.js\";\nimport { Mouse } from \"../util.js\";\nimport { FitsImageJs } from \"../layers/fits_image_js.js\";\n\n\n// wwtlib.Histogram\n\nexport function Histogram() {\n    this.image = null;\n    this.layer = null;\n    this.tile = null;\n    this._dropDown = null;\n    this._downPosition = 0;\n    this._lowPosition = 0;\n    this._highPosition = 255;\n    this._center = 127;\n    this._ignoreNextClick = false;\n    this._dragType = 4;\n    this._updated = false;\n    this.selectedCurveStyle = 0;\n}\n\nHistogram.updateImage = function (isl, z) {\n    if (!useGlVersion2) {\n        var image = ss.safeCast(isl.get_imageSet().get_wcsImage(), FitsImageJs);\n        var Tile = tileCacheGetTile(0, 0, 0, isl.get_imageSet(), null);\n        Tile.texture2d = image.getBitmap().getTexture();\n    }\n};\n\nHistogram.updateScale = function (isl, scale, low, hi) {\n    isl.get_imageSet().get_fitsProperties().scaleType = scale;\n    isl.get_imageSet().get_fitsProperties().lowerCut = low;\n    isl.get_imageSet().get_fitsProperties().upperCut = hi;\n    if (!useGlVersion2) {\n        var image = ss.safeCast(isl.get_imageSet().get_wcsImage(), FitsImageJs);\n        var Tile = tileCacheGetTile(0, 0, 0, isl.get_imageSet(), null);\n        Tile.texture2d = image.getBitmap().getTexture();\n    }\n};\n\nHistogram.updateColorMapper = function (isl, colorMapperName) {\n    isl.get_imageSet().get_fitsProperties().colorMapName = colorMapperName;\n    if (!useGlVersion2) {\n        var image = ss.safeCast(isl.get_imageSet().get_wcsImage(), FitsImageJs);\n        var Tile = tileCacheGetTile(0, 0, 0, isl.get_imageSet(), null);\n        Tile.texture2d = image.getBitmap().getTexture();\n    }\n};\n\nvar Histogram$ = {\n    close: function (e) {\n        var menu = document.getElementById('histogram');\n        var closeBtn = document.getElementById('histogramClose');\n        menu.style.display = 'none';\n        window.removeEventListener('click', ss.bind('close', this), true);\n        var image = document.getElementById('graph');\n        image.removeEventListener('mousedown', ss.bind('onPointerDown', this), false);\n        image.removeEventListener('mousemove', ss.bind('onPointerMove', this), false);\n        image.removeEventListener('mouseup', ss.bind('onPointerUp', this), false);\n        this._dropDown.removeEventListener('change', ss.bind('curveStyleSelected', this), false);\n        this._dropDown.removeEventListener('click', ss.bind('ignoreMe', this), true);\n    },\n\n    show: function (position) {\n        this.tile = tileCacheGetTile(0, 0, 0, this.layer.get_imageSet(), null);\n        var picker = document.getElementById('histogram');\n        var closeBtn = document.getElementById('histogramClose');\n        picker.style.display = 'block';\n        picker.style.left = position.x.toString() + 'px';\n        picker.style.top = position.y.toString() + 'px';\n        this.selectedCurveStyle = this.layer.get_imageSet().get_fitsProperties().scaleType;\n        this._dropDown = document.getElementById('ScaleTypePicker');\n        this._dropDown.addEventListener('change', ss.bind('curveStyleSelected', this), false);\n        this._dropDown.addEventListener('click', ss.bind('ignoreMe', this), true);\n        var canvas = document.getElementById('graph');\n        canvas.addEventListener('pointerdown', ss.bind('onPointerDown', this), false);\n        canvas.addEventListener('pointermove', ss.bind('onPointerMove', this), false);\n        canvas.addEventListener('pointerup', ss.bind('onPointerUp', this), false);\n        closeBtn.addEventListener('click', ss.bind('close', this), true);\n        this.draw();\n    },\n\n    ignoreMe: function (e) {\n        this._ignoreNextClick = true;\n    },\n\n    curveStyleSelected: function (e) {\n        this.selectedCurveStyle = this._dropDown.selectedIndex;\n        this.setUpdateTimer();\n        this.layer.get_imageSet().get_fitsProperties().scaleType = this.selectedCurveStyle;\n        this.draw();\n        this._ignoreNextClick = true;\n    },\n\n    onPointerDown: function (e) {\n        var canvas = document.getElementById('graph');\n        var x = Mouse.offsetX(canvas, e);\n        var y = Mouse.offsetY(canvas, e);\n        canvas.setPointerCapture(e.pointerId);\n        if ((Math.abs(x - this._center) < 10) && Math.abs(y - 75) < 10) {\n            this._dragType = 3;\n        } else if (Math.abs(x - this._lowPosition) < 10) {\n            this._dragType = 0;\n        } else if (Math.abs(x - this._highPosition) < 10) {\n            this._dragType = 1;\n        } else {\n            this._dragType = 2;\n            this._downPosition = Math.min(255, Math.max(0, x));\n            this.draw();\n        }\n        e.cancelBubble = true;\n    },\n\n    onPointerMove: function (e) {\n        var canvas = document.getElementById('graph');\n        var x = Mouse.offsetX(canvas, e);\n        var y = Mouse.offsetY(canvas, e);\n        switch (this._dragType) {\n            case 0:\n                this._lowPosition = Math.min(255, Math.max(0, x));\n                break;\n            case 1:\n                this._highPosition = Math.min(255, Math.max(0, x));\n                break;\n            case 2:\n                this._lowPosition = this._downPosition;\n                this._highPosition = Math.min(255, Math.max(0, x));\n                break;\n            case 3:\n                var hWidth = Math.abs(this._highPosition - this._lowPosition) / 2;\n                var adCenter = Math.min(255 - hWidth, Math.max(hWidth, x));\n                var moved = this._center - adCenter;\n                this._lowPosition -= moved;\n                this._highPosition -= moved;\n                break;\n            case 4:\n                return;\n            default:\n                break;\n        }\n        this._center = (this._lowPosition + this._highPosition) / 2;\n        this.draw();\n        var factor = (this.layer.get_imageSet().get_fitsProperties().maxVal - this.layer.get_imageSet().get_fitsProperties().minVal) / 256;\n        var low = this.layer.get_imageSet().get_fitsProperties().minVal + (this._lowPosition * factor);\n        var hi = this.layer.get_imageSet().get_fitsProperties().minVal + (this._highPosition * factor);\n        this.setUpdateTimer();\n        this.layer.get_imageSet().get_fitsProperties().upperCut = hi;\n        this.layer.get_imageSet().get_fitsProperties().lowerCut = low;\n        this.layer.get_imageSet().get_fitsProperties().scaleType = this.selectedCurveStyle;\n        e.cancelBubble = true;\n    },\n\n    onPointerUp: function (e) {\n        e.srcElement.releasePointerCapture(e.pointerId);\n        if (this._dragType !== 4) {\n            this._dragType = 4;\n            this.setUpdateTimer();\n            this._ignoreNextClick = true;\n        }\n        e.cancelBubble = true;\n    },\n\n    setUpdateTimer: function () {\n        var $this = this;\n\n        if (!useGlVersion2) {\n            setTimeout(function () {\n                $this.update();\n            }, 500);\n            this._updated = false;\n        }\n    },\n\n    update: function () {\n        if (this._updated) {\n            return;\n        }\n        if (ss.canCast(this.image, FitsImageJs)) {\n            var factor = (this.layer.get_imageSet().get_fitsProperties().maxVal - this.layer.get_imageSet().get_fitsProperties().minVal) / 256;\n            var low = this.layer.get_imageSet().get_fitsProperties().minVal + (this._lowPosition * factor);\n            var hi = this.layer.get_imageSet().get_fitsProperties().minVal + (this._highPosition * factor);\n            this.tile.texture2d = (this.image).getScaledBitmap(low, hi, this.selectedCurveStyle, 0, null).getTexture();\n        }\n        this._updated = true;\n    },\n\n    draw: function () {\n        var canvas = document.getElementById('graph');\n        var ctx = canvas.getContext('2d');\n        if (this.image != null) {\n            this.image.drawHistogram(ctx);\n        }\n        var red = 'rgba(255,0,0,255)';\n        var green = 'rgba(0,255,0,255)';\n        var blue = 'rgba(0,0,255,255)';\n        ctx.strokeStyle = red;\n        ctx.beginPath();\n        ctx.moveTo(this._lowPosition, 0);\n        ctx.lineTo(this._lowPosition, 150);\n        ctx.stroke();\n        ctx.strokeStyle = green;\n        ctx.beginPath();\n        ctx.moveTo(this._highPosition, 0);\n        ctx.lineTo(this._highPosition, 150);\n        ctx.stroke();\n        ctx.strokeStyle = blue;\n        ctx.beginPath();\n        ctx.arc(this._center, 75, 10, 0, Math.PI * 2, false);\n        ctx.closePath();\n        ctx.stroke();\n        var Curve = [];\n        switch (this.selectedCurveStyle) {\n            case 0: // linear\n                Curve.length = 0;\n                Curve.push(Vector2d.create(this._lowPosition, 150));\n                Curve.push(Vector2d.create(this._highPosition, 0));\n                break;\n            case 1: // log\n                Curve.length = 0;\n                var factor = 150 / Math.log(255);\n                var diff = (this._highPosition - this._lowPosition);\n                var jump = (diff < 0) ? -1 : 1;\n                var step = Math.abs(256 / ((!diff) ? 1E-06 : diff));\n                var val = 1E-06;\n                for (var i = this._lowPosition; i !== this._highPosition; i += jump) {\n                    Curve.push(Vector2d.create(i, (150 - (Math.log(val) * factor))));\n                    val += step;\n                }\n                break;\n            case 2: // power 2\n                Curve.length = 0;\n                var factor = 150 / Math.pow(255, 2);\n                var diff = (this._highPosition - this._lowPosition);\n                var jump = (diff < 0) ? -1 : 1;\n                var step = Math.abs(256 / ((!diff) ? 1E-06 : diff));\n                var val = 1E-06;\n                for (var i = this._lowPosition; i !== this._highPosition; i += jump) {\n                    Curve.push(Vector2d.create(i, (150 - (Math.pow(val, 2) * factor))));\n                    val += step;\n                }\n                break;\n            case 3: // square root\n                Curve.length = 0;\n                var factor = 150 / Math.sqrt(255);\n                var diff = (this._highPosition - this._lowPosition);\n                var jump = (diff < 0) ? -1 : 1;\n                var step = Math.abs(256 / ((!diff) ? 1E-06 : diff));\n                var val = 1E-06;\n                for (var i = this._lowPosition; i !== this._highPosition; i += jump) {\n                    Curve.push(Vector2d.create(i, (150 - (Math.sqrt(val) * factor))));\n                    val += step;\n                }\n                break;\n        }\n        if (Curve.length > 1) {\n            ctx.beginPath();\n            ctx.strokeStyle = blue;\n            ctx.moveTo(Curve[0].x, Curve[0].y);\n            for (var i = 1; i < Curve.length; i++) {\n                ctx.lineTo(Curve[i].x, Curve[i].y);\n            }\n            ctx.stroke();\n        }\n    }\n};\n\nregisterType(\"Histogram\", [Histogram, Histogram$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A manually-built HTML based input dialog.\n\nimport { registerType } from \"../typesystem.js\";\nimport { ss } from \"../ss.js\";\n\n\n// wwtlib.SimpleInput\n\nexport function SimpleInput(title, label, text, v3) {\n    this.title = 'Tile';\n    this.label = 'Enter Text Below';\n    this.text = '';\n    this._textElement = null;\n    this._ignoreNextClick = false;\n    this.title = title;\n    this.label = label;\n    this.text = text;\n}\n\nvar SimpleInput$ = {\n    showDialog: function () {\n        return 1;\n    },\n\n    nonMenuClick: function (e) {\n        if (!this._ignoreNextClick) {\n            this._close();\n        }\n        this._ignoreNextClick = false;\n    },\n\n    show: function (position, callback) {\n        var simpleInputElement = document.getElementById('simpleinput');\n        var modalElement = document.getElementById('simplemodal');\n        modalElement.style.display = 'block';\n        simpleInputElement.style.display = 'block';\n        simpleInputElement.style.marginLeft = position.x.toString() + 'px';\n        simpleInputElement.style.marginTop = position.y.toString() + 'px';\n        this._textElement = document.getElementById('inputtext');\n        this._textElement.value = this.text;\n        var titleDiv = document.getElementById('simpletitle');\n        var labelDiv = document.getElementById('inputlabel');\n        titleDiv.innerText = this.title;\n        labelDiv.innerText = this.label;\n        this._textElement.addEventListener('change', ss.bind('textChanged', this), false);\n        this._textElement.addEventListener('click', ss.bind('ignoreMe', this), true);\n        var okButton = document.getElementById('simpleinputok');\n        var cancelButton = document.getElementById('simpleinputcancel');\n        okButton.addEventListener('click', ss.bind('okClicked', this), false);\n        cancelButton.addEventListener('click', ss.bind('cancelClicked', this), false);\n        this._okCallback = callback;\n    },\n\n    okClicked: function (e) {\n        this._close();\n        if (this._okCallback != null) {\n            this._okCallback();\n        }\n    },\n\n    cancelClicked: function (e) {\n        this._close();\n    },\n\n    _close: function () {\n        var simpleInputElement = document.getElementById('simplemodal');\n        simpleInputElement.style.display = 'none';\n        this._textElement.removeEventListener('change', ss.bind('textChanged', this), false);\n        var okButton = document.getElementById('simpleinputok');\n        var cancelButton = document.getElementById('simpleinputcancel');\n        okButton.removeEventListener('click', ss.bind('okClicked', this), false);\n        cancelButton.removeEventListener('click', ss.bind('cancelClicked', this), false);\n    },\n\n    ignoreMe: function (e) {\n        this._ignoreNextClick = true;\n    },\n\n    textChanged: function (e) {\n        this.text = this._textElement.value;\n        this._ignoreNextClick = true;\n    }\n};\n\nregisterType(\"SimpleInput\", [SimpleInput, SimpleInput$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Writing XML.\n\nimport { registerType, registerEnum } from \"../typesystem.js\";\nimport { ss } from \"../ss.js\";\n\n\n// wwtlib.Formatting\n\nexport var Formatting = {\n    indented: 1\n};\n\nregisterType(\"Formatting\", Formatting);\nregisterEnum(\"Formatting\", Formatting);\n\n\n// wwtlib.XmlTextWriter\n\nexport function XmlTextWriter() {\n    this.body = \"<?xml version='1.0' encoding='UTF-8'?>\\r\\n\";\n    this.formatting = 1;\n    this._elementStack = new ss.Stack();\n    this._pending = false;\n    this._currentName = '';\n    this._attributes = {};\n    this._value = '';\n}\n\nvar XmlTextWriter$ = {\n    _pushNewElement: function (name) {\n        //write pending element and attributes\n        this._writePending(false);\n\n        //Push new attribute on to stack\n        this._elementStack.push(name);\n\n        //setup pending structures\n        this._pending = true;\n        this._currentName = name;\n    },\n\n    _writePending: function (fullClose) {\n        var closed = true;\n        if (this._pending) {\n            for (var i = 1; i < this._elementStack.count; i++) {\n                this.body += '  ';\n            }\n            this.body += '<' + this._currentName;\n            if (ss.keyCount(this._attributes) > 0) {\n                var $enum1 = ss.enumerate(ss.keys(this._attributes));\n                while ($enum1.moveNext()) {\n                    var key = $enum1.current;\n                    this.body += ss.format(' {0}=\"{1}\"', key, this._attributes[key]);\n                }\n            }\n            if (!ss.emptyString(this._value)) {\n                this.body += '>';\n                closed = false;\n                if (!ss.emptyString(this._value)) {\n                    this.body += this._value;\n                }\n            }\n            else {\n                if (fullClose) {\n                    this.body += ' />\\r\\n';\n                    closed = true;\n                }\n                else {\n                    this.body += '>\\r\\n';\n                }\n            }\n            this._pending = false;\n            this._currentName = '';\n            this._value = '';\n            this._attributes = {};\n            return closed;\n        }\n        return false;\n    },\n\n    _writeProcessingInstruction: function (v1, v2) { },\n\n    _writeStartElement: function (name) {\n        this._pushNewElement(name);\n    },\n\n    _writeAttributeString: function (key, value) {\n        if (value != null) {\n            this._attributes[key] = ss.replaceString(value.toString(), '&', '&amp;');\n        } else {\n            this._attributes[key] = '';\n        }\n    },\n\n    _writeEndElement: function () {\n        if (!this._writePending(true)) {\n            for (var i = 1; i < this._elementStack.count; i++) {\n                this.body += '  ';\n            }\n            this.body += ss.format('</{0}>\\r\\n', this._elementStack.pop());\n        } else {\n            this._elementStack.pop();\n        }\n    },\n\n    _writeString: function (text) {\n        this._value = ss.replaceString(text, '&', '&amp;');\n    },\n\n    _writeFullEndElement: function () {\n        this._writePending(false);\n        for (var i = 1; i < this._elementStack.count; i++) {\n            this.body += '  ';\n        }\n        this.body += ss.format('</{0}>\\r\\n', this._elementStack.pop());\n    },\n\n    _close: function () { },\n\n    _writeElementString: function (name, value) {\n        this._writeStartElement(name);\n        this._writeValue(ss.replaceString(value, '&', '&amp;'));\n        this._writeEndElement();\n    },\n\n    _writeValue: function (val) {\n        this._value = ss.replaceString(val, '&', '&amp;');\n    },\n\n    _writeCData: function (htmlDescription) {\n        this._value = ss.format('<![CDATA[{0}]]>', htmlDescription);\n    }\n};\n\nregisterType(\"XmlTextWriter\", [XmlTextWriter, XmlTextWriter$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Specifications of a requested video output format.\n\nimport { registerType } from \"./typesystem.js\";\n\n\n// wwtlib.VideoOutputType\n\nexport function VideoOutputType(width, height, fps, format, waitDownload) {\n    this.fps = 0;\n    this.width = 0;\n    this.height = 0;\n    this.totalFrames = 0;\n    this.waitDownload = false;\n    this.format = 'image/jpeg';\n    this.width = width;\n    this.height = height;\n    this.fps = fps;\n    this.format = format;\n    this.waitDownload = waitDownload;\n}\n\nvar VideoOutputType$ = {};\n\nregisterType(\"VideoOutputType\", [VideoOutputType, VideoOutputType$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Moving the view around.\n//\n// These types were originally implemented in `IViewMover.cs`, but we merged the\n// `IViewMover` interface into `interfaces.js`, since currently in the JS\n// implementation the interfaces don't contain any content.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { Util } from \"./baseutil.js\";\nimport { CameraParameters } from \"./camera_parameters.js\";\nimport { IViewMover } from \"./interfaces.js\";\nimport { globalRenderContext } from \"./render_globals.js\";\nimport { Settings } from \"./settings.js\";\nimport { SpaceTimeController } from \"./space_time_controller.js\";\n\n\n// wwtlib.ViewMoverKenBurnsStyle\n//\n// This was defined in `IViewMover.cs`, which we've folded into `interfaces.js`.\n\nexport function ViewMoverKenBurnsStyle(from, to, time, fromDateTime, toDateTime, type) {\n    this.interpolationType = 0;\n    this.fastDirectionMove = false;\n    this._toTargetTime = 0;\n    this._dateTimeSpan = 0;\n    this._complete = false;\n    this._midpointFired = false;\n    this.interpolationType = type;\n    if (Math.abs(from.lng - to.lng) > 180) {\n        if (from.lng > to.lng) {\n            from.lng -= 360;\n        } else {\n            from.lng += 360;\n        }\n    }\n    this._fromDateTime = fromDateTime;\n    this._toDateTime = toDateTime;\n    this._dateTimeSpan = toDateTime - fromDateTime;\n    this._from = from.copy();\n    this._to = to.copy();\n    this._fromTime = SpaceTimeController.get_metaNow();\n    this._toTargetTime = time;\n}\n\nvar ViewMoverKenBurnsStyle$ = {\n    get_complete: function () {\n        return this._complete;\n    },\n\n    get_currentPosition: function () {\n        var elapsed = SpaceTimeController.get_metaNow() - this._fromTime;\n        var elapsedSeconds = (elapsed) / 1000;\n        var alpha = elapsedSeconds / this._toTargetTime;\n        if (!this._midpointFired && alpha >= 0.5) {\n            this._midpointFired = true;\n            if (this._midpoint != null) {\n                this._midpoint();\n            }\n        }\n        if (alpha >= 1) {\n            alpha = 1;\n            this._complete = true;\n            return this._to.copy();\n        }\n        if (Settings.get_active().get_galacticMode() && globalRenderContext.space) {\n            return CameraParameters.interpolateGreatCircle(this._from, this._to, alpha, this.interpolationType, this.fastDirectionMove);\n        }\n        return CameraParameters.interpolate(this._from, this._to, alpha, this.interpolationType, this.fastDirectionMove);\n    },\n\n    get_currentDateTime: function () {\n        var elapsed = SpaceTimeController.get_metaNow() - this._fromTime;\n        var elapsedSeconds = (elapsed) / 1000;\n        var alpha = elapsedSeconds / this._toTargetTime;\n        var delta = this._dateTimeSpan * alpha;\n        var retDate = new Date(this._fromDateTime.getTime() + ss.truncate(delta));\n        return retDate;\n    },\n\n    get_midpoint: function () {\n        return this._midpoint;\n    },\n\n    set_midpoint: function (value) {\n        this._midpoint = value;\n        return value;\n    },\n\n    get_moveTime: function () {\n        return this._toTargetTime;\n    }\n};\n\nregisterType(\"ViewMoverKenBurnsStyle\", [ViewMoverKenBurnsStyle, ViewMoverKenBurnsStyle$, null, IViewMover]);\n\n\n// wwtlib.ViewMoverSlew\n//\n// This was defined in `IViewMover.cs`, which we've folded into `interfaces.js`.\n\nexport function ViewMoverSlew() {\n    this._upTargetTime = 0;\n    this._downTargetTime = 0;\n    this._toTargetTime = 0;\n    this._upTimeFactor = 0.6;\n    this._downTimeFactor = 0.6;\n    this._travelTimeFactor = 7;\n    this._midpointFired = false;\n    this._complete = false;\n}\n\nViewMoverSlew.create = function (from, to) {\n    var temp = new ViewMoverSlew();\n    temp.init(from, to);\n    return temp;\n};\n\nViewMoverSlew.createUpDown = function (from, to, upDowFactor) {\n    var temp = new ViewMoverSlew();\n    temp._upTimeFactor = temp._downTimeFactor = upDowFactor;\n    temp.init(from.copy(), to.copy());\n    return temp;\n};\n\nvar ViewMoverSlew$ = {\n    init: function (from, to) {\n        if (Math.abs(from.lng - to.lng) > 180) {\n            if (from.lng > to.lng) {\n                from.lng -= 360;\n            }\n            else {\n                from.lng += 360;\n            }\n        }\n        if (to.zoom <= 0) {\n            to.zoom = 360;\n        }\n        if (from.zoom <= 0) {\n            from.zoom = 360;\n        }\n        this._from = from;\n        this._to = to;\n        this._fromTime = SpaceTimeController.get_metaNow();\n        var zoomUpTarget = 360;\n        var travelTime;\n        var lngDist = Math.abs(from.lng - to.lng);\n        var latDist = Math.abs(from.lat - to.lat);\n        var distance = Math.sqrt(latDist * latDist + lngDist * lngDist);\n        zoomUpTarget = (distance / 3) * 20;\n        if (zoomUpTarget > 360) {\n            zoomUpTarget = 360;\n        }\n        if (zoomUpTarget < from.zoom) {\n            zoomUpTarget = from.zoom;\n        }\n        travelTime = (distance / 180) * (360 / zoomUpTarget) * this._travelTimeFactor;\n        var rotateTime = Math.max(Math.abs(from.angle - to.angle), Math.abs(from.rotation - to.rotation));\n        var logDistUp = Math.max(Math.abs(Util.logN(zoomUpTarget, 2) - Util.logN(from.zoom, 2)), rotateTime);\n        this._upTargetTime = this._upTimeFactor * logDistUp;\n        this._downTargetTime = this._upTargetTime + travelTime;\n        var logDistDown = Math.abs(Util.logN(zoomUpTarget, 2) - Util.logN(to.zoom, 2));\n        this._toTargetTime = this._downTargetTime + Math.max((this._downTimeFactor * logDistDown), rotateTime);\n        this._fromTop = from.copy();\n        this._fromTop.zoom = zoomUpTarget;\n        this._fromTop.angle = (from.angle + to.angle) / 2;\n        this._fromTop.rotation = (from.rotation + to.rotation) / 2;\n        this._toTop = to.copy();\n        this._toTop.zoom = this._fromTop.zoom;\n        this._toTop.angle = this._fromTop.angle;\n        this._toTop.rotation = this._fromTop.rotation;\n    },\n\n    get_complete: function () {\n        return this._complete;\n    },\n\n    get_currentPosition: function () {\n        var elapsed = SpaceTimeController.get_metaNow() - this._fromTime;\n        var elapsedSeconds = (elapsed) / 1000;\n        if (elapsedSeconds < this._upTargetTime) {\n            // Log interpolate from from to fromTop\n            return CameraParameters.interpolate(this._from, this._fromTop, elapsedSeconds / this._upTargetTime, 3, false);\n        } else if (elapsedSeconds < this._downTargetTime) {\n            elapsedSeconds -= this._upTargetTime;\n            if (Settings.get_active().get_galacticMode() && globalRenderContext.space) {\n                return CameraParameters.interpolateGreatCircle(this._fromTop, this._toTop, elapsedSeconds / (this._downTargetTime - this._upTargetTime), 3, false);\n            }\n            // interpolate linear fromTop and toTop\n            return CameraParameters.interpolate(this._fromTop, this._toTop, elapsedSeconds / (this._downTargetTime - this._upTargetTime), 3, false);\n        } else {\n            if (!this._midpointFired) {\n                this._midpointFired = true;\n                if (this._midpoint != null) {\n                    this._midpoint();\n                }\n            }\n            elapsedSeconds -= this._downTargetTime;\n            // Interpolate log from toTop and to\n            var alpha = elapsedSeconds / (this._toTargetTime - this._downTargetTime);\n            if (alpha > 1) {\n                alpha = 1;\n                this._complete = true;\n                return this._to.copy();\n            }\n            return CameraParameters.interpolate(this._toTop, this._to, alpha, 3, false);\n        }\n    },\n\n    get_currentDateTime: function () {\n        SpaceTimeController.updateClock();\n        return SpaceTimeController.get_now();\n    },\n\n    get_midpoint: function () {\n        return this._midpoint;\n    },\n\n    set_midpoint: function (value) {\n        this._midpoint = value;\n        return value;\n    },\n\n    get_moveTime: function () {\n        return this._toTargetTime;\n    }\n};\n\nregisterType(\"ViewMoverSlew\", [ViewMoverSlew, ViewMoverSlew$, null, IViewMover]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// A layer displaying catalog data? This type is unused in the WWT engine, but\n// we preserve it because it is exported in the API.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { Vector3d } from \"./double3d.js\";\nimport { DataItem } from \"./graphics/primitives3d.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { Coordinates } from \"./coordinates.js\";\n\n\n// wwtlib.VizLayer\n\nexport function VizLayer() {\n    this.table = [];\n    this.items = [];\n    this._imageReady = false;\n    this._dateColumn = 0;\n    this._latColumn = 1;\n    this._lngColumn = 2;\n    this._depthColumn = 3;\n    this._magColumn = 4;\n}\n\nVizLayer.earthRadius = 6371000;\n\nvar VizLayer$ = {\n    load: function (data) {\n        var $this = this;\n\n        var lines = data.split('\\r\\n');\n        this._starProfile = document.createElement('img');\n        this._starProfile.addEventListener('load', function (e) {\n            $this._imageReady = true;\n        }, false);\n        this._starProfile.src = URLHelpers.singleton.engineAssetUrl('StarProfileAlpha.png');\n        var gotHeader = false;\n        var $enum1 = ss.enumerate(lines);\n        while ($enum1.moveNext()) {\n            var line = $enum1.current;\n            if (gotHeader) {\n                this.table.push(line.split('\\t'));\n            }\n            else {\n                this.header = line.split('\\t');\n                gotHeader = true;\n            }\n        }\n    },\n\n    prepare: function () {\n        this._worldList = new Array(this.table.length);\n        this._transformedList = new Array(this.table.length);\n        var index = 0;\n        var $enum1 = ss.enumerate(this.table);\n        while ($enum1.moveNext()) {\n            var row = $enum1.current;\n            var item = new DataItem();\n            item.eventTime = ss.date(row[this._dateColumn]);\n            var radius = (6371000 - parseFloat(row[this._depthColumn]) * 1000) / 6371000;\n            item.location = Coordinates.geoTo3dRad(parseFloat(row[this._latColumn]), parseFloat(row[this._lngColumn]) + 180, radius);\n            item.tranformed = new Vector3d();\n            item.size = Math.pow(2, parseFloat(row[this._magColumn])) / 50;\n            this._worldList[index] = item.location;\n            this._transformedList[index] = item.tranformed;\n            this.items.push(item);\n            index++;\n        }\n    },\n\n    draw: function (renderContext) {\n        if (!this._imageReady) {\n            return;\n        }\n        renderContext.device.save();\n        renderContext.WVP.projectArrayToScreen(this._worldList, this._transformedList);\n        var ctx = renderContext.device;\n        ctx.globalAlpha = 0.4;\n        var width = renderContext.width;\n        var height = renderContext.height;\n        var viewPoint = Vector3d.makeCopy(renderContext.get_viewPoint());\n        var scaleFactor = renderContext.get_fovScale() / 100;\n        var $enum1 = ss.enumerate(this.items);\n        while ($enum1.moveNext()) {\n            var item = $enum1.current;\n            if (item.tranformed.z < 1) {\n                var x = item.tranformed.x;\n                var y = item.tranformed.y;\n                var size = 4 * item.size / scaleFactor;\n                var half = size / 2;\n                if (x > -half && x < width + half && y > -half && y < height + half) {\n                    ctx.drawImage(this._starProfile, x - size / 2, y - size / 2, size, size);\n                }\n            }\n        }\n        renderContext.device.restore();\n    }\n};\n\nregisterType(\"VizLayer\", [VizLayer, VizLayer$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Files downloaded over the web.\n\nimport { ss } from \"./ss.js\";\nimport { registerType, registerEnum } from \"./typesystem.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\n\n\n// wwtlib.StateType\n\nexport var StateType = {\n    pending: 0,\n    received: 1,\n    error: 2\n};\n\nregisterType(\"StateType\", StateType);\nregisterEnum(\"StateType\", StateType);\n\n\n// wwtlib.WebFile\n\nexport function WebFile(url) {\n    this._state = 0;\n    this.responseType = '';\n    this._triedOnce = false;\n    this._url = url;\n}\n\nvar WebFile$ = {\n    send: function () {\n        // There used to be code here to work with IE 8/9, but we're not\n        // worrying about those anymore.\n        if (typeof navigator === \"undefined\") { return; }\n        this._CORS();\n        this.set_state(StateType.pending);\n    },\n\n    get_message: function () {\n        return this._message;\n    },\n\n    get_state: function () {\n        return this._state;\n    },\n\n    set_state: function (value) {\n        this._state = value;\n        if (this.onStateChange != null) {\n            this.onStateChange();\n        }\n        return value;\n    },\n\n    _loadData: function (textReceived) {\n        // received data, set the state vars and send statechange\n        this._data = textReceived;\n        this.set_state(StateType.received);\n    },\n\n    _loadBlob: function (blob) {\n        // received data, set the state vars and send statechange\n        this._blobdata = blob;\n        this.set_state(StateType.received);\n    },\n\n    _error: function () {\n        this._message = ss.format('Error encountered loading {0}', this._url);\n        this.set_state(StateType.error);\n    },\n\n    _timeOut: function () {\n        this._message = ss.format('Timeout encountered loading {0}', this._url);\n        this.set_state(StateType.error);\n    },\n\n    _CORS: function () {\n        var $this = this;\n\n        this._xhr = new XMLHttpRequest();\n        try {\n            this._xhr.open('GET', this._url);\n            if (this.responseType != null) {\n                this._xhr.responseType = this.responseType;\n            }\n            this._xhr.onreadystatechange = function () {\n                if ($this._xhr.readyState === 4) {\n                    if (!$this._xhr.status) {\n                        if (!$this._triedOnce) {\n                            $this._triedOnce = true;\n                            $this._xhr.onreadystatechange = null;\n                            var new_url = URLHelpers.singleton.activateProxy($this._url);\n\n                            // null => don't bother: we know that the proxy won't help\n                            if (new_url !== null) {\n                                $this._url = new_url;\n                                $this._CORS();\n                            } else {\n                                $this._message = $this._xhr.statusText;\n                                $this.set_state(StateType.error);\n                            }\n                        }\n                    } else {\n                        if ($this._xhr.status >= 400) {\n                            $this._message = $this._xhr.statusText;\n                            $this.set_state(StateType.error);\n                        } else {\n                            if (!$this.responseType) {\n                                $this._loadData($this._xhr.responseText);\n                            } else {\n                                $this._loadBlob($this._xhr.response);\n                            }\n                        }\n                    }\n                }\n            };\n            this._xhr.send();\n        } catch (err) {\n            this._message = err.message;\n            this.set_state(StateType.error);\n            throw err;\n        }\n    },\n\n    getText: function () {\n        return this._data;\n    },\n\n    getBlob: function () {\n        return this._blobdata;\n    },\n\n    getXml: function () {\n        var xParser = new DOMParser();\n        return xParser.parseFromString(this._data, 'text/xml');\n    }\n};\n\nregisterType(\"WebFile\", [WebFile, WebFile$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// Global methods for dealing with WTML folders.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\nimport { globalRenderContext } from \"./render_globals.js\";\nimport { set_loadWtmlFile } from \"./data_globals.js\";\nimport { Imageset } from \"./imageset.js\";\nimport { Place } from \"./place.js\";\nimport { Folder } from \"./folder.js\";\nimport { WWTControl } from \"./wwt_control.js\";\n\n\n// wwtlib.FolderDownloadAction\n\nexport function FolderDownloadAction(action, loadChildFolders) {\n    this.loadChildFolders = false;\n    this._numLoadingFolders = 0;\n    this._onComplete = action;\n    this.loadChildFolders = loadChildFolders;\n}\n\nvar FolderDownloadAction$ = {\n    _folderLoaded: function () {\n        this._numLoadingFolders--;\n        if (!this._numLoadingFolders) {\n            this._onComplete();\n        }\n    },\n\n    startingNewFolderLoad: function (folder) {\n        var $this = this;\n\n        this._numLoadingFolders++;\n        folder.childLoadCallback(function () {\n            Wtml.loadImagesets(folder, $this);\n            $this._folderLoaded();\n        });\n    }\n};\n\nregisterType(\"FolderDownloadAction\", [FolderDownloadAction, FolderDownloadAction$, null]);\n\n\n// wwtlib.Wtml\n\nexport function Wtml() { }\n\nWtml.getWtmlFile = function (url, complete, loadChildFolders) {\n    if (loadChildFolders == null) {\n        loadChildFolders = false;\n    }\n    var folder = new Folder();\n    folder.set_url(url);\n    var folderDownloadAction = new FolderDownloadAction(complete, loadChildFolders);\n    folderDownloadAction.startingNewFolderLoad(folder);\n    return folder;\n};\n\nset_loadWtmlFile(Wtml.getWtmlFile);\n\nWtml.loadImagesets = function (folder, folderDownloadAction) {\n    var children = folder.get_children();\n    var $enum1 = ss.enumerate(children);\n\n    while ($enum1.moveNext()) {\n        var child = $enum1.current;\n        if (ss.canCast(child, Imageset)) {\n            var imageSet = child;\n            WWTControl.addImageSetToRepository(imageSet);\n        }\n        if (ss.canCast(child, Place)) {\n            var place = child;\n            if (place.get_studyImageset() != null) {\n                WWTControl.addImageSetToRepository(place.get_studyImageset());\n            }\n            if (place.get_backgroundImageset() != null) {\n                WWTControl.addImageSetToRepository(place.get_backgroundImageset());\n            }\n        }\n        if (ss.canCast(child, Folder) && folderDownloadAction.loadChildFolders) {\n            folderDownloadAction.startingNewFolderLoad((child));\n        }\n    }\n\n    if (!ss.emptyString(WWTControl.imageSetName)) {\n        var name = WWTControl.imageSetName.toLowerCase();\n        var $enum2 = ss.enumerate(WWTControl.getImageSets());\n        while ($enum2.moveNext()) {\n            var imageset = $enum2.current;\n            if (imageset.get_name().toLowerCase() === name) {\n                globalRenderContext.set_backgroundImageset(imageset);\n            }\n        }\n    }\n};\n\nvar Wtml$ = {};\n\nregisterType(\"Wtml\", [Wtml, Wtml$, null]);\n","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The integrated WWT web engine application.\n//\n// This is named \"WWTControl\" due to its heritage of thinking of WWT as a \"web\n// control\" in Microsoft-ese.\n\nimport { ss } from \"./ss.js\";\nimport { registerType } from \"./typesystem.js\";\n\nimport {\n    globalRenderContext,\n    set_tilePrepDevice,\n    set_useGl,\n    set_useGlVersion2,\n} from \"./render_globals.js\";\n\nimport {\n    globalScriptInterface,\n    globalWWTControl,\n    loadWtmlFile,\n    set_freestandingMode,\n    set_globalScriptInterface,\n} from \"./data_globals.js\";\n\nimport { BlendState } from \"./blend_state.js\";\nimport { Color, Colors } from \"./color.js\";\nimport { URLHelpers } from \"./url_helpers.js\";\nimport { Mouse } from \"./util.js\";\n\nimport {\n    PositionColoredTextured,\n    Vector3d,\n    Vector2d,\n    Matrix3d,\n    DoubleUtilities,\n} from \"./double3d.js\";\n\nimport { SimpleLineList } from \"./graphics/primitives3d.js\";\nimport { Sprite2d } from \"./graphics/sprite2d.js\";\n\nimport { Annotation } from \"./annotation.js\";\nimport { CameraParameters, SolarSystemObjects } from \"./camera_parameters.js\";\nimport { Constellations } from \"./constellations.js\";\nimport { Coordinates } from \"./coordinates.js\";\nimport { Grids } from \"./grids.js\";\nimport { BandPass, ProjectionType, ImageSetType, Imageset } from \"./imageset.js\";\nimport { MinorPlanets } from \"./minor_planets.js\";\nimport { Classification } from \"./place.js\";\nimport { Planets } from \"./planets.js\";\nimport { Settings } from \"./settings.js\";\nimport { SpaceTimeController } from \"./space_time_controller.js\";\nimport { RenderTriangle } from \"./render_triangle.js\";\nimport { Tile } from \"./tile.js\";\nimport { TileCache } from \"./tile_cache.js\";\nimport { VideoOutputType } from \"./video_output_type.js\";\nimport { UiTools } from \"./ui_tools.js\";\nimport { ViewMoverSlew, ViewMoverKenBurnsStyle } from \"./view_mover.js\";\n\nimport { TourPlayer } from \"./tours/tour_player.js\";\n\nimport { LayerManager } from \"./layers/layer_manager.js\";\n\nimport { TourDocument } from \"./tours/tour_document.js\";\nimport { TourEditTab } from \"./tours/tour_edit.js\";\n\nimport { Planets3d } from \"./planets_3d.js\";\nimport { ScriptInterface } from \"./script_interface.js\";\n\n\n// wwtlib.WWTControl\n\nexport function WWTControl() {\n    // In \"freestanding\" mode, no worldwidetelescope.org resources are\n    // relied upon. The default screen is black sky, and the 3D solar system\n    // mode is unavailable because it relies on so many built-in assets. If\n    // you want to see anything, you need to load it in yourself.\n    this.freestandingMode = false;\n\n    this.uiController = null;\n    this._annotations = [];\n    this._hoverText = '';\n    this._hoverTextPoint = new Vector2d();\n    this._lastMouseMove = new Date(1900, 1, 0, 0, 0, 0, 0);\n    this.layers = [];\n    this._frameCount = 0;\n    this._zoomMax = 360;\n    this._zoomMaxSolarSystem = 10000000000000000;\n    this._zoomMin = 0.001373291015625;\n    this._zoomMinSolarSystem = 1E-08;\n    this.constellation = 'UMA';\n    this._fadePoints = null;\n    this.fader = BlendState.create(true, 2000);\n    this._crossFadeFrame = false;\n    this._crossFadeTexture = null;\n    this._sprite = new Sprite2d();\n    this.renderType = 2;\n    this._milkyWayBackground = null;\n    this.capturingVideo = false;\n    this._videoBlobReady = null;\n    this.dumpFrameParams = null;\n    this._videoBlobQueue = {};\n    this._videoQueueIndex = 0;\n    this._emptyFrames = [];\n\n    // Mouse, touch, gesture controls -- lots of different event listeners for different\n    // devices and browser support.\n    this._beginZoom = 1;\n    this._dragging = false;\n    this._mouseDown = false;\n    this._hasTwoTouches = false;\n    this._lastX = 0;\n    this._lastY = 0;\n    this._pointerIds = new Array(2);\n    this._pinchingZoomRect = new Array(2);\n    this._moved = false;\n\n    this._foregroundCanvas = null;\n    this._fgDevice = null;\n    this._tracking = false;\n    this._trackingObject = null;\n    this.sandboxMode = false;\n    this._solarSystemTrack = 65536;\n    this._moving = false;\n    this._targetStudyImageset = null;\n    this._targetBackgroundImageset = null;\n    this.tour = null;\n    this.tourEdit = null;\n    this._crossHairs = null;\n}\n\n// Note: these fields must remain public because there is JS code in the\n// wild that accesses `WWTControl.imageSets`.\nWWTControl.imageSets = [];\nWWTControl.imageSetName = '';\nWWTControl.showDataLayers = false;\nWWTControl._renderNeeded = false;\nWWTControl.constellationsFigures = null;\nWWTControl.constellationsBoundries = null;\nWWTControl.solarSystemObjectsNames = ['Sun', 'Mercury', 'Venus', 'Mars', 'Jupiter', 'Saturn', 'Uranus', 'Neptune', 'Pluto', 'Moon', 'Io', 'Europa', 'Ganymede', 'Callisto', 'IoShadow', 'EuropaShadow', 'GanymedeShadow', 'CallistoShadow', 'SunEclipsed', 'Earth', 'Custom', 'Undefined'];\n\nWWTControl.addImageSetToRepository = function (imagesetToAdd) {\n    var $enum1 = ss.enumerate(WWTControl.imageSets);\n    while ($enum1.moveNext()) {\n        var imageset = $enum1.current;\n        if (imageset.get_imageSetID() === imagesetToAdd.get_imageSetID()) {\n            return imageset;\n        }\n    }\n    WWTControl.imageSets.push(imagesetToAdd);\n    return imagesetToAdd;\n};\n\nWWTControl.getImageSets = function () {\n    return WWTControl.imageSets;\n};\n\n// This parameter does nothing. We keep it to maintain API compatibility.\nWWTControl.get_renderNeeded = function () {\n    return WWTControl._renderNeeded;\n};\n\n// This parameter does nothing. We keep it to maintain API compatibility.\nWWTControl.set_renderNeeded = function (value) {\n    WWTControl._renderNeeded = true;\n    return value;\n};\n\n// Initialization\n\n// For backwards compatibility, we preserve the semantics that calling\n// this function kicks off the rendering loop.\nWWTControl.initControl = function (DivId) {\n    return WWTControl.initControl2(DivId, true);\n};\n\n// This function had a parameter to choose whether to use WebGL or HTML5\n// canvas, but at some point the argument was defused. We preserve it\n// for backwards compatibility.\nWWTControl.initControlParam = function (DivId, webgl_ignored) {\n    return WWTControl.initControl2(DivId, true);\n};\n\n// Prefer using WWTControlBuilder rather than this interface directly.\nWWTControl.initControl2 = function (DivId, startRenderLoop) {\n    return WWTControl.initControl6(DivId, startRenderLoop, 0, 0, 360, 'Sky');\n};\n\n// Prefer using WWTControlBuilder rather than this interface directly.\nWWTControl.initControl6 = function (DivId, startRenderLoop, startLat, startLng, startZoom, startMode) {\n    if (globalRenderContext.device == null) {\n        WWTControl.scriptInterface = new ScriptInterface();\n        WWTControl.scriptInterface.settings = Settings.get_current();\n        set_globalScriptInterface(WWTControl.scriptInterface);\n        var canvas = WWTControl._createCanvasElement(DivId);\n        var gl = canvas.getContext('webgl2');\n\n        if (gl != null) {\n            set_useGlVersion2(true);\n        } else {\n            console.warn('This browser does not support WebGL 2.0. Some features will work suboptimally. To get the full AAS WWT experience, consider using the latest version of Chrome, Firefox or Edge. In case you would like to use Safari, we recommend that you enable WebGL 2.0');\n            gl = canvas.getContext('webgl');\n        }\n\n        if (gl == null) {\n            gl = canvas.getContext('experimental-webgl');\n        }\n\n        if (gl == null) {\n            var ctx = canvas.getContext('2d');\n            globalRenderContext.device = ctx;\n        } else {\n            set_tilePrepDevice(gl);\n            globalRenderContext.gl = gl;\n            set_useGl(true);\n        }\n\n        globalWWTControl.canvas = canvas;\n        globalRenderContext.width = canvas.width;\n        globalRenderContext.height = canvas.height;\n        globalWWTControl.setup(canvas, startLat, startLng, startZoom);\n\n        Constellations.initializeConstellations();\n        LayerManager.oneTimeInitialization();\n\n        if (startMode === 'earth') {\n            globalRenderContext.set_backgroundImageset(\n                Imageset.create(\n                    'Blue Marble', // name\n                    URLHelpers.singleton.coreStaticUrl('wwtweb/tiles.aspx?q={1},{2},{3},bm200407'),\n                    ImageSetType.earth, // dataSetType\n                    BandPass.visible, // bandPass\n                    ProjectionType.toast, // projectionType\n                    101, // imageSetID\n                    0, // baseLevel\n                    7, // levels\n                    256, // tileSize (unused)\n                    180, // basetileDegrees\n                    '.png', // extension\n                    false, // bottomsUp\n                    '', // quadTreeMap\n                    0, // centerX\n                    0, // centerY\n                    0, // rotation\n                    false, // sparse\n                    URLHelpers.singleton.coreStaticUrl('wwtweb/thumbnail.aspx?name=bm200407'),\n                    true, // defaultSet\n                    false, // elevationModel\n                    0, // widthFactor\n                    0, // offsetX\n                    0, // offsetY\n                    '', // creditsText\n                    '', // creditsUrl\n                    '', // demUrl\n                    '', // altUrl\n                    6371000, // meanRadius\n                    'Earth' // referenceFrame\n                )\n            );\n        } else if (startMode === 'black') {\n            // Black sky init -- probably because we are in freestanding mode\n            globalRenderContext.set_backgroundImageset(\n                Imageset.create(\n                    'Black Sky Background', // name\n                    '', // url\n                    ImageSetType.sky, // dataSetType\n                    BandPass.visible, // bandPass\n                    ProjectionType.toast, // projectionType\n                    102, // imageSetID\n                    0, // baseLevel\n                    0, // levels\n                    256, // tileSize (unused)\n                    180, // baseTileDegrees\n                    '.png', // extension\n                    false, // bottomsUp\n                    '0123', // quadTreeMap\n                    0, // centerX\n                    0, // centerY\n                    0, // rotation\n                    false, // sparse\n                    '', // thumbnailUrl\n                    false, // defaultSet\n                    false, // elevationModel\n                    2, // widthFactor\n                    0, // offsetX\n                    0, // offsetY\n                    '', // creditsText\n                    '', // creditsUrl\n                    '', // demUrl\n                    '', // altUrl\n                    1, // meanRadius\n                    'Sky' // referenceFrame\n                )\n            );\n        } else {\n            globalRenderContext.set_backgroundImageset(\n                Imageset.create(\n                    'DSS', // name\n                    URLHelpers.singleton.coreStaticUrl('wwtweb/dss.aspx?q={1},{2},{3}'),\n                    ImageSetType.sky, // dataSetTYpe\n                    BandPass.visible, // bandPass\n                    ProjectionType.toast, // projectionType\n                    100, // imageSetId\n                    0, // baseLevel\n                    12, // levels\n                    256, // tileSize (unused)\n                    180, // baseTileDegrees\n                    '.png', // extension\n                    false, // bottomsUp\n                    '', // quadTreeMap\n                    0, // centerX\n                    0, // centerY\n                    0, // rotation\n                    false, // sparse\n                    URLHelpers.singleton.coreStaticUrl('thumbnails/DSS.png'),\n                    true, // defaultSet\n                    false, // elevationModel\n                    0, // widthFactor\n                    0, // offsetX\n                    0, // offsetY\n                    '', // creditsText\n                    '', // creditsUrl\n                    '', // demUrl\n                    '', // altUrl\n                    1, // meanRadius\n                    'Sky' // referenceFrame\n                )\n            );\n        }\n    }\n    globalRenderContext.viewCamera.lng += 0;\n    globalRenderContext._initGL();\n    if (startRenderLoop) {\n        globalWWTControl.render();\n    }\n    return globalScriptInterface;\n};\n\nWWTControl._createCanvasElement = function (DivId) {\n    var div = document.getElementById(DivId);\n    var canvas = document.createElement('canvas');\n    canvas.height = div.clientHeight;\n    canvas.width = div.clientWidth;\n    div.appendChild(canvas);\n    return canvas;\n};\n\nWWTControl.useUserLocation = function () {\n    navigator.geolocation.getCurrentPosition(WWTControl._getLocation, WWTControl._getLocationError);\n};\n\nWWTControl._getLocation = function (pos) {\n    if (!!pos.coords.latitude) {\n        Settings.get_globalSettings().set_locationLat(pos.coords.latitude);\n    }\n    if (!!pos.coords.longitude) {\n        Settings.get_globalSettings().set_locationLng(pos.coords.longitude);\n    }\n    if (!!pos.coords.altitude) {\n        Settings.get_globalSettings().set_locationAltitude(pos.coords.altitude);\n    }\n};\n\nWWTControl._getLocationError = function (pos) {\n    if (pos != null && pos.coords != null) {\n        var lat = pos.coords.latitude;\n        var lng = pos.coords.longitude;\n    }\n};\n\nWWTControl.setBackgroundImageName = function (name) {\n    WWTControl.imageSetName = name;\n};\n\nWWTControl.setForegroundImageName = function (name) {\n    WWTControl.imageSetName = name;\n};\n\nWWTControl.showLayers = function (show) {\n    WWTControl.showDataLayers = show;\n};\n\nvar WWTControl$ = {\n    _addAnnotation: function (annotation) {\n        this._annotations.push(annotation);\n        Annotation.batchDirty = true;\n    },\n\n    _removeAnnotation: function (annotation) {\n        ss.remove(this._annotations, annotation);\n        Annotation.batchDirty = true;\n    },\n\n    _clearAnnotations: function () {\n        this._annotations.length = 0;\n        Annotation.batchDirty = true;\n    },\n\n    _annotationclicked: function (ra, dec, x, y) {\n        if (this._annotations != null && this._annotations.length > 0) {\n            var index = 0;\n            var $enum1 = ss.enumerate(this._annotations);\n            while ($enum1.moveNext()) {\n                var note = $enum1.current;\n                if (note.hitTest(this.renderContext, ra, dec, x, y)) {\n                    globalScriptInterface._fireAnnotationclicked(ra, dec, note.get_id());\n                    return true;\n                }\n                index++;\n            }\n        }\n        return false;\n    },\n\n    _annotationHover: function (ra, dec, x, y) {\n        if (this._annotations != null && this._annotations.length > 0) {\n            var index = 0;\n            var $enum1 = ss.enumerate(this._annotations);\n            while ($enum1.moveNext()) {\n                var note = $enum1.current;\n                if (note.hitTest(this.renderContext, ra, dec, x, y)) {\n                    this._hoverText = note.get_label();\n                    this._hoverTextPoint = Vector2d.create(x, y);\n                    return true;\n                }\n                index++;\n            }\n        }\n        return false;\n    },\n\n    get_zoomMax: function () {\n        if (this.renderContext.get_backgroundImageset() != null && this.renderContext.get_backgroundImageset().get_dataSetType() == ImageSetType.solarSystem) {\n            return this._zoomMaxSolarSystem;\n        } else {\n            return this._zoomMax;\n        }\n    },\n\n    set_zoomMax: function (value) {\n        this._zoomMax = value;\n        return value;\n    },\n\n    setSolarSystemMaxZoom: function (value) {\n        this._zoomMaxSolarSystem = value;\n    },\n\n    get_zoomMin: function () {\n        if (this.renderContext.get_backgroundImageset() != null && this.renderContext.get_backgroundImageset().get_dataSetType() == ImageSetType.solarSystem) {\n            return this._zoomMinSolarSystem;\n        } else {\n            return this._zoomMin;\n        }\n    },\n\n    set_zoomMin: function (value) {\n        this._zoomMin = value;\n        return value;\n    },\n\n    setSolarSystemMinZoom: function (value) {\n        this._zoomMinSolarSystem = value;\n    },\n\n    _notifyMoveComplete: function () { },\n\n    get_crossFadeFrame: function () {\n        return this._crossFadeFrame;\n    },\n\n    set_crossFadeFrame: function (value) {\n        if (value && this._crossFadeFrame !== value) {\n            if (this._crossFadeTexture != null) {\n            }\n            this._crossFadeTexture = this.renderContext._getScreenTexture();\n        }\n        this._crossFadeFrame = value;\n        if (!value) {\n            if (this._crossFadeTexture != null) {\n                this._crossFadeTexture = null;\n            }\n        }\n        return value;\n    },\n\n    _fadeFrame: function () {\n        if (this.renderContext.gl != null) {\n            var sp = Settings.get_active().getSetting(17);\n            if ((sp.opacity > 0)) {\n                var color = Color._fromArgbColor(255 - UiTools.gamma(255 - ss.truncate((sp.opacity * 255)), 1 / 2.2), Colors.get_black());\n                if (!(sp.opacity > 0)) {\n                    color = Color._fromArgbColor(255 - UiTools.gamma(255 - ss.truncate((sp.opacity * 255)), 1 / 2.2), Colors.get_black());\n                }\n                if (this._crossFadeFrame) {\n                    color = Color._fromArgbColor(UiTools.gamma(ss.truncate((sp.opacity * 255)), 1 / 2.2), Colors.get_white());\n                }\n                else {\n                    if (this._crossFadeTexture != null) {\n                        this._crossFadeTexture = null;\n                    }\n                }\n                if (this._fadePoints == null) {\n                    this._fadePoints = new Array(4);\n                    for (var i = 0; i < 4; i++) {\n                        this._fadePoints[i] = new PositionColoredTextured();\n                    }\n                }\n                this._fadePoints[0].position.x = -this.renderContext.width / 2;\n                this._fadePoints[0].position.y = this.renderContext.height / 2;\n                this._fadePoints[0].position.z = 1347;\n                this._fadePoints[0].tu = 0;\n                this._fadePoints[0].tv = 1;\n                this._fadePoints[0].color = color;\n                this._fadePoints[1].position.x = -this.renderContext.width / 2;\n                this._fadePoints[1].position.y = -this.renderContext.height / 2;\n                this._fadePoints[1].position.z = 1347;\n                this._fadePoints[1].tu = 0;\n                this._fadePoints[1].tv = 0;\n                this._fadePoints[1].color = color;\n                this._fadePoints[2].position.x = this.renderContext.width / 2;\n                this._fadePoints[2].position.y = this.renderContext.height / 2;\n                this._fadePoints[2].position.z = 1347;\n                this._fadePoints[2].tu = 1;\n                this._fadePoints[2].tv = 1;\n                this._fadePoints[2].color = color;\n                this._fadePoints[3].position.x = this.renderContext.width / 2;\n                this._fadePoints[3].position.y = -this.renderContext.height / 2;\n                this._fadePoints[3].position.z = 1347;\n                this._fadePoints[3].tu = 1;\n                this._fadePoints[3].tv = 0;\n                this._fadePoints[3].color = color;\n                this._sprite.draw(this.renderContext, this._fadePoints, 4, this._crossFadeTexture, true, 1);\n            }\n        }\n    },\n\n    captureVideo: function (VideoBlobReady, Width, Height, FramesPerSecond, TotalFrames, Format) {\n        this.capturingVideo = true;\n        this._videoBlobReady = VideoBlobReady;\n        ss.clearKeys(this._videoBlobQueue);\n        this._videoQueueIndex = 0;\n        this._emptyFrames.length = 0;\n        this.dumpFrameParams = new VideoOutputType(Width, Height, FramesPerSecond, Format, true);\n        SpaceTimeController.frameDumping = true;\n        SpaceTimeController.framesPerSecond = FramesPerSecond;\n        SpaceTimeController.totalFrames = TotalFrames;\n        SpaceTimeController.currentFrameNumber = 0;\n    },\n\n    // To preserve semantic backwards compatibility, this function must requeue itself\n    // to be called again in a timeout.\n    render: function () {\n        var $this = this;\n\n        this.renderOneFrame();\n        setTimeout(function () {\n            $this.render();\n        }, 10);\n    },\n\n    renderOneFrame: function () {\n        if (this.renderContext.get_backgroundImageset() != null) {\n            this.renderType = this.renderContext.get_backgroundImageset().get_dataSetType();\n        } else {\n            this.renderType = 2;\n        }\n        var sizeChange = false;\n        if (this.canvas.width !== this.canvas.parentNode.clientWidth) {\n            this.canvas.width = this.canvas.parentNode.clientWidth;\n            sizeChange = true;\n        }\n        if (this.canvas.height !== this.canvas.parentNode.clientHeight) {\n            this.canvas.height = this.canvas.parentNode.clientHeight;\n            sizeChange = true;\n        }\n        if (sizeChange && this.explorer != null) {\n            this.explorer.refresh();\n        }\n\n        if (this.canvas.width < 1 || this.canvas.height < 1) {\n            // This can happen during initialization if perhaps some\n            // HTML/JavaScript interaction hasn't happened to set the canvas\n            // size correctly. If we don't exit this function early, we get\n            // NaNs in our transformation matrices that lead IsTileBigEnough\n            // to say \"no\" for everything so that we spin out of control\n            // downloading maximum-resolution DSS tiles for an enormous\n            // viewport. That's bad!\n            return;\n        }\n\n        if (sizeChange) {\n            // In GL, the crosshairs are in viewport coordinates\n            // ([0,1]x[0,1]), so a size change alters their perceived aspect\n            // ratio.\n            this._crossHairs = null;\n        }\n\n        Tile.lastDeepestLevel = Tile.deepestLevel;\n        RenderTriangle.width = this.renderContext.width = this.canvas.width;\n        RenderTriangle.height = this.renderContext.height = this.canvas.height;\n        Tile.tilesInView = 0;\n        Tile.tilesTouched = 0;\n        Tile.deepestLevel = 0;\n        SpaceTimeController.set_metaNow(ss.now());\n        if (this.get__mover() != null) {\n            SpaceTimeController.set_now(this.get__mover().get_currentDateTime());\n            Planets.updatePlanetLocations(this.get_solarSystemMode());\n            if (this.get__mover() != null) {\n                var newCam = this.get__mover().get_currentPosition();\n                this.renderContext.targetCamera = newCam.copy();\n                this.renderContext.viewCamera = newCam.copy();\n                if (this.renderContext.space && Settings.get_active().get_galacticMode()) {\n                    var gPoint = Coordinates.j2000toGalactic(newCam.get_RA() * 15, newCam.get_dec());\n                    this.renderContext.targetAlt = this.renderContext.alt = gPoint[1];\n                    this.renderContext.targetAz = this.renderContext.az = gPoint[0];\n                }\n                else if (this.renderContext.space && Settings.get_active().get_localHorizonMode()) {\n                    var currentAltAz = Coordinates.equitorialToHorizon(Coordinates.fromRaDec(newCam.get_RA(), newCam.get_dec()), SpaceTimeController.get_location(), SpaceTimeController.get_now());\n                    this.renderContext.targetAlt = this.renderContext.alt = currentAltAz.get_alt();\n                    this.renderContext.targetAz = this.renderContext.az = currentAltAz.get_az();\n                }\n                if (this.get__mover().get_complete()) {\n                    globalScriptInterface._fireArrived(this.get__mover().get_currentPosition().get_RA(), this.get__mover().get_currentPosition().get_dec(), globalRenderContext.viewCamera.zoom);\n                    this.set__mover(null);\n                    this._notifyMoveComplete();\n                }\n            }\n        } else {\n            SpaceTimeController.updateClock();\n            Planets.updatePlanetLocations(this.get_solarSystemMode());\n            this._updateViewParameters();\n        }\n        this.renderContext.clear();\n        if (this.renderType === 4) {\n            if (this._solarSystemTrack < 20) {\n                var radius = Planets.getAdjustedPlanetRadius(this._solarSystemTrack);\n                var distance = this.renderContext.get_solarSystemCameraDistance();\n                var camAngle = this.renderContext.get_fovLocal();\n            }\n            if (this._trackingObject == null) {\n            }\n            this.renderContext.setupMatricesSolarSystem(true);\n            var zoom = this.renderContext.viewCamera.zoom;\n            var milkyWayBlend = Math.min(1, Math.max(0, (Math.log(zoom) - 8.4)) / 4.2);\n            var milkyWayBlendIn = Math.min(1, Math.max(0, (Math.log(zoom) - 17.9)) / 2.3);\n            var matOldMW = this.renderContext.get_world();\n            var matLocalMW = this.renderContext.get_world().clone();\n            matLocalMW._multiply(Matrix3d._scaling(100000, 100000, 100000));\n            matLocalMW._multiply(Matrix3d._rotationX(23.5 / 180 * Math.PI));\n            matLocalMW._multiply(Matrix3d.translation(this.renderContext.cameraPosition));\n            this.renderContext.set_world(matLocalMW);\n            this.renderContext.set_worldBase(matLocalMW);\n            this.renderContext.space = true;\n            this.renderContext.makeFrustum();\n            var lighting = this.renderContext.lighting;\n            this.renderContext.lighting = false;\n            if (Settings.get_active().get_solarSystemMilkyWay()) {\n                if (milkyWayBlend < 1) {\n                    if (this._milkyWayBackground == null) {\n                        this._milkyWayBackground = this.getImagesetByName('Digitized Sky Survey (Color)');\n                    }\n                    if (this._milkyWayBackground != null) {\n                        RenderTriangle.cullInside = true;\n                        var c = (1 - milkyWayBlend) / 2;\n                        this.renderContext.drawImageSet(this._milkyWayBackground, c * 100);\n                        RenderTriangle.cullInside = false;\n                    }\n                }\n            }\n            this._drawSkyOverlays();\n            this.renderContext.lighting = lighting;\n            this.renderContext.space = false;\n            this.renderContext.set_world(matOldMW);\n            this.renderContext.set_worldBase(matOldMW);\n            this.renderContext.makeFrustum();\n            var oldCamera = this.renderContext.cameraPosition;\n            var matOld = this.renderContext.get_world();\n            var matLocal = this.renderContext.get_world();\n            matLocal._multiply(Matrix3d.translation(this.renderContext.viewCamera.viewTarget));\n            this.renderContext.cameraPosition = Vector3d.subtractVectors(this.renderContext.cameraPosition, this.renderContext.viewCamera.viewTarget);\n            this.renderContext.set_world(matLocal);\n            this.renderContext.makeFrustum();\n            if (Settings.get_active().get_solarSystemCosmos()) {\n                Grids.drawCosmos3D(this.renderContext, 1);\n            }\n            if (Settings.get_active().get_solarSystemMilkyWay() && milkyWayBlendIn > 0) {\n                Grids.drawGalaxyImage(this.renderContext, milkyWayBlendIn);\n            }\n            if (Settings.get_active().get_solarSystemStars()) {\n                Grids.drawStars3D(this.renderContext, 1);\n            }\n            matLocal = matOld;\n            var pnt = this.renderContext.viewCamera.viewTarget;\n            var vt = Vector3d.create(-pnt.x, -pnt.y, -pnt.z);\n            this.renderContext.cameraPosition = oldCamera;\n            matLocal._multiply(Matrix3d.translation(vt));\n            this.renderContext.set_world(matLocal);\n            this.renderContext.makeFrustum();\n            LayerManager._draw(this.renderContext, 1, true, 'Sky', true, false);\n            this.renderContext.set_world(matOld);\n            this.renderContext.makeFrustum();\n            if (this.renderContext.get_solarSystemCameraDistance() < 15000) {\n                this.renderContext.setupMatricesSolarSystem(false);\n                if (Settings.get_active().get_solarSystemMinorPlanets()) {\n                    MinorPlanets.drawMPC3D(this.renderContext, 1, this.renderContext.viewCamera.viewTarget);\n                }\n                if (Settings.get_active().get_solarSystemPlanets()) {\n                    Planets3d.drawPlanets3D(this.renderContext, 1, this.renderContext.viewCamera.viewTarget);\n                }\n            }\n        } else {\n            // RenderType is not SolarSystem\n            if (!this.renderType || this.renderType === 1) {\n                this.renderContext._setupMatricesLand3d();\n            }\n            else {\n                this.renderContext.setupMatricesSpace3d(this.renderContext.width, this.renderContext.height);\n            }\n            this.renderContext.drawImageSet(this.renderContext.get_backgroundImageset(), 100);\n            if (this.renderContext.get_foregroundImageset() != null) {\n                if (this.renderContext.get_foregroundImageset().get_dataSetType() !== this.renderContext.get_backgroundImageset().get_dataSetType()) {\n                    this.renderContext.set_foregroundImageset(null);\n                }\n                else {\n                    if (this.renderContext.viewCamera.opacity !== 100 && this.renderContext.gl == null) {\n                        if (this._foregroundCanvas.width !== this.renderContext.width || this._foregroundCanvas.height !== this.renderContext.height) {\n                            this._foregroundCanvas.width = ss.truncate(this.renderContext.width);\n                            this._foregroundCanvas.height = ss.truncate(this.renderContext.height);\n                        }\n                        var saveDevice = this.renderContext.device;\n                        this._fgDevice.clearRect(0, 0, this.renderContext.width, this.renderContext.height);\n                        this.renderContext.device = this._fgDevice;\n                        this.renderContext.drawImageSet(this.renderContext.get_foregroundImageset(), 100);\n                        this.renderContext.device = saveDevice;\n                        this.renderContext.device.save();\n                        this.renderContext.device.globalAlpha = this.renderContext.viewCamera.opacity / 100;\n                        this.renderContext.device.drawImage(this._foregroundCanvas, 0, 0);\n                        this.renderContext.device.restore();\n                    }\n                    else {\n                        this.renderContext.drawImageSet(this.renderContext.get_foregroundImageset(), this.renderContext.viewCamera.opacity);\n                    }\n                }\n            }\n            if (this.renderType === 2) {\n                var $enum1 = ss.enumerate(this.renderContext.get_catalogHipsImagesets());\n                while ($enum1.moveNext()) {\n                    var imageset = $enum1.current;\n                    if (imageset.get_hipsProperties().get_catalogSpreadSheetLayer().enabled && imageset.get_hipsProperties().get_catalogSpreadSheetLayer().lastVersion === imageset.get_hipsProperties().get_catalogSpreadSheetLayer().get_version()) {\n                        this.renderContext.drawImageSet(imageset, 100);\n                    }\n                }\n            }\n            if (this.renderType === 2 && Settings.get_active().get_showSolarSystem()) {\n                Planets.drawPlanets(this.renderContext, 1);\n                this.constellation = Constellations.containment.findConstellationForPoint(this.renderContext.viewCamera.get_RA(), this.renderContext.viewCamera.get_dec());\n                this._drawSkyOverlays();\n            }\n            if (this.get_planetLike() || this.get_space()) {\n                if (!this.get_space()) {\n                    var angle = Coordinates.mstFromUTC2(SpaceTimeController.get_now(), 0) / 180 * Math.PI;\n                    this.renderContext.set_worldBaseNonRotating(Matrix3d.multiplyMatrix(Matrix3d._rotationY(angle), this.renderContext.get_worldBase()));\n                    if (this._targetBackgroundImageset != null) {\n                        this.renderContext.set_nominalRadius(this._targetBackgroundImageset.get_meanRadius());\n                    }\n                }\n                else {\n                    this.renderContext.set_worldBaseNonRotating(this.renderContext.get_world());\n                    if (this._targetBackgroundImageset != null) {\n                        this.renderContext.set_nominalRadius(this._targetBackgroundImageset.get_meanRadius());\n                    }\n                }\n                var referenceFrame = this.getCurrentReferenceFrame();\n                LayerManager._draw(this.renderContext, 1, this.get_space(), referenceFrame, true, this.get_space());\n            }\n        }\n        var worldSave = this.renderContext.get_world();\n        var viewSave = this.renderContext.get_view();\n        var projSave = this.renderContext.get_projection();\n        if (Settings.get_current().get_showCrosshairs()) {\n            this._drawCrosshairs(this.renderContext);\n        }\n        if (this.uiController != null) {\n            this.uiController.render(this.renderContext);\n        } else {\n            var index = 0;\n            Annotation.prepBatch(this.renderContext);\n            var $enum2 = ss.enumerate(this._annotations);\n            while ($enum2.moveNext()) {\n                var item = $enum2.current;\n                item.draw(this.renderContext);\n                index++;\n            }\n            Annotation.drawBatch(this.renderContext);\n            if ((ss.now() - this._lastMouseMove) > 400) {\n                var raDecDown = this.getCoordinatesForScreenPoint(this._hoverTextPoint.x, this._hoverTextPoint.y);\n                this._annotationHover(raDecDown.x, raDecDown.y, this._hoverTextPoint.x, this._hoverTextPoint.y);\n                this._lastMouseMove = new Date(2100, 1, 1);\n            }\n            if (!ss.emptyString(this._hoverText)) {\n                this._drawHoverText(this.renderContext);\n            }\n        }\n        var tilesAllLoaded = !TileCache.get_queueCount();\n        this.renderContext.setupMatricesOverlays();\n        this._fadeFrame();\n        this._frameCount++;\n        TileCache.decimateQueue();\n        TileCache.processQueue(this.renderContext);\n        Tile.currentRenderGeneration++;\n        if (!TourPlayer.get_playing()) {\n            this.set_crossFadeFrame(false);\n        }\n\n        // Restore Matrices for Finder Scope and such to map points\n        this.renderContext.set_world(worldSave);\n        this.renderContext.set_view(viewSave);\n        this.renderContext.set_projection(projSave);\n        var now = ss.now();\n        var ms = now - this._lastUpdate;\n        if (ms > 1000) {\n            this._lastUpdate = now;\n            this._frameCount = 0;\n            RenderTriangle.trianglesRendered = 0;\n            RenderTriangle.trianglesCulled = 0;\n        }\n        if (this.capturingVideo) {\n            if ((this.dumpFrameParams != null) && (!this.dumpFrameParams.waitDownload || tilesAllLoaded)) {\n                this.captureFrameForVideo(this._videoBlobReady, this.dumpFrameParams.width, this.dumpFrameParams.height, this.dumpFrameParams.format);\n                SpaceTimeController.nextFrame();\n            }\n            if (SpaceTimeController.get_doneDumping()) {\n                SpaceTimeController.frameDumping = false;\n                SpaceTimeController.cancelFrameDump = false;\n                this.capturingVideo = false;\n            }\n        }\n    },\n\n    getCurrentReferenceFrame: function () {\n        if (this.renderContext.get_backgroundImageset() == null) {\n            return 'Sun';\n        }\n        if (!ss.emptyString(this.renderContext.get_backgroundImageset().get_referenceFrame())) {\n            return this.renderContext.get_backgroundImageset().get_referenceFrame();\n        }\n        if (!this.renderContext.get_backgroundImageset().get_dataSetType()) {\n            return 'Earth';\n        }\n        if (this.renderContext.get_backgroundImageset().get_name() === 'Visible Imagery' && this.renderContext.get_backgroundImageset().get_url().toLowerCase().indexOf('mars') > -1) {\n            this.renderContext.get_backgroundImageset().set_referenceFrame('Mars');\n            return this.renderContext.get_backgroundImageset().get_referenceFrame();\n        }\n        if (this.renderContext.get_backgroundImageset().get_dataSetType() === 1) {\n            var $enum1 = ss.enumerate(WWTControl.solarSystemObjectsNames);\n            while ($enum1.moveNext()) {\n                var name = $enum1.current;\n                if (this.renderContext.get_backgroundImageset().get_name().toLowerCase().indexOf(name.toLowerCase()) > -1) {\n                    this.renderContext.get_backgroundImageset().set_referenceFrame(name);\n                    return name;\n                }\n            }\n        }\n        if (this.renderContext.get_backgroundImageset().get_dataSetType() === 2) {\n            return 'Sky';\n        }\n        return '';\n    },\n\n    get_planetLike: function () {\n        if (this.renderContext.get_backgroundImageset() != null) {\n            return !this.renderContext.get_backgroundImageset().get_dataSetType() || this.renderContext.get_backgroundImageset().get_dataSetType() === 1;\n        } else {\n            return true;\n        }\n    },\n\n    get_space: function () {\n        if (this.renderContext.get_backgroundImageset() != null) {\n            return this.renderContext.get_backgroundImageset().get_dataSetType() === 2;\n        } else {\n            return true;\n        }\n    },\n\n    _drawSkyOverlays: function () {\n        if (Settings.get_active().get_showConstellationPictures() && !this.freestandingMode) {\n            Constellations.drawArtwork(this.renderContext);\n        }\n        if (Settings.get_active().get_showConstellationFigures()) {\n            if (WWTControl.constellationsFigures == null) {\n                WWTControl.constellationsFigures = Constellations.create(\n                    'Constellations',\n                    URLHelpers.singleton.engineAssetUrl('figures.txt'),\n                    false,  // \"boundry\"\n                    false,  // \"noInterpollation\"\n                    false,  // \"resource\"\n                );\n            }\n            WWTControl.constellationsFigures.draw(this.renderContext, false, 'UMA', false);\n        }\n        if (Settings.get_active().get_showEclipticGrid()) {\n            Grids.drawEclipticGrid(this.renderContext, 1, Settings.get_active().get_eclipticGridColor());\n            if (Settings.get_active().get_showEclipticGridText()) {\n                Grids.drawEclipticGridText(this.renderContext, 1, Settings.get_active().get_eclipticGridColor());\n            }\n        }\n        if (Settings.get_active().get_showGalacticGrid()) {\n            Grids.drawGalacticGrid(this.renderContext, 1, Settings.get_active().get_galacticGridColor());\n            if (Settings.get_active().get_showGalacticGridText()) {\n                Grids.drawGalacticGridText(this.renderContext, 1, Settings.get_active().get_galacticGridColor());\n            }\n        }\n        if (Settings.get_active().get_showAltAzGrid()) {\n            Grids.drawAltAzGrid(this.renderContext, 1, Settings.get_active().get_altAzGridColor());\n            if (Settings.get_active().get_showAltAzGridText()) {\n                Grids.drawAltAzGridText(this.renderContext, 1, Settings.get_active().get_altAzGridColor());\n            }\n        }\n        if (Settings.get_active().get_showPrecessionChart()) {\n            Grids.drawPrecessionChart(this.renderContext, 1, Settings.get_active().get_precessionChartColor());\n        }\n        if (Settings.get_active().get_showEcliptic()) {\n            Grids.drawEcliptic(this.renderContext, 1, Settings.get_active().get_eclipticColor());\n            if (Settings.get_active().get_showEclipticOverviewText()) {\n                Grids.drawEclipticText(this.renderContext, 1, Settings.get_active().get_eclipticColor());\n            }\n        }\n        if (Settings.get_active().get_showGrid()) {\n            Grids.drawEquitorialGrid(this.renderContext, 1, Settings.get_active().get_equatorialGridColor());\n            if (Settings.get_active().get_showEquatorialGridText()) {\n                Grids.drawEquitorialGridText(this.renderContext, 1, Settings.get_active().get_equatorialGridColor());\n            }\n        }\n        if (Settings.get_active().get_showConstellationBoundries()) {\n            if (WWTControl.constellationsBoundries == null) {\n                WWTControl.constellationsBoundries = Constellations.create(\n                    'Constellations',\n                    URLHelpers.singleton.engineAssetUrl('constellations.txt'),\n                    true,   // \"boundry\"\n                    false,  // \"noInterpollation\"\n                    false,  // \"resource\"\n                );\n            }\n            WWTControl.constellationsBoundries.draw(this.renderContext, Settings.get_active().get_showConstellationSelection(), this.constellation, false);\n        }\n        if (Settings.get_active().get_showConstellationLabels()) {\n            Constellations.drawConstellationNames(this.renderContext, 1, Colors.get_yellow());\n        }\n    },\n\n    _drawHoverText: function (RenderContext) {\n        if (RenderContext.gl == null) {\n            var ctx = RenderContext.device;\n            ctx.save();\n            ctx.fillStyle = 'White';\n            ctx.font = '15px Arial';\n            ctx.fillText(this._hoverText, this._hoverTextPoint.x, this._hoverTextPoint.y);\n            ctx.restore();\n        }\n    },\n\n    rAtoViewLng: function (ra) {\n        return (((180 - (ra / 24 * 360) - 180) + 540) % 360) - 180;\n    },\n\n    _updateViewParameters: function () {\n        if (this.renderContext.space && this._tracking && this._trackingObject != null) {\n            if (Settings.get_active().get_galacticMode() && this.renderContext.space) {\n                var gPoint = Coordinates.j2000toGalactic(this._trackingObject.get_RA() * 15, this._trackingObject.get_dec());\n                this.renderContext.targetAlt = this.renderContext.alt = gPoint[1];\n                this.renderContext.targetAz = this.renderContext.az = gPoint[0];\n            }\n            else if (this.renderContext.space && Settings.get_active().get_localHorizonMode()) {\n                var currentAltAz = Coordinates.equitorialToHorizon(Coordinates.fromRaDec(this._trackingObject.get_RA(), this._trackingObject.get_dec()), SpaceTimeController.get_location(), SpaceTimeController.get_now());\n                this.renderContext.targetAlt = currentAltAz.get_alt();\n                this.renderContext.targetAz = currentAltAz.get_az();\n            }\n            else {\n                this.renderContext.viewCamera.lng = this.renderContext.targetCamera.lng = this.rAtoViewLng(this._trackingObject.get_RA());\n                this.renderContext.viewCamera.lat = this.renderContext.targetCamera.lat = this._trackingObject.get_dec();\n            }\n        } else if (!this.get_solarSystemMode()) {\n            this._tracking = false;\n            this._trackingObject = null;\n        }\n        var oneMinusDragCoefficient = 1 - 0.8;\n        var dc = 0.8;\n        if (!this._tracking) {\n            var minDelta = (this.renderContext.viewCamera.zoom / 4000);\n            if (this.renderContext.viewCamera.zoom > 360) {\n                minDelta = (360 / 40000);\n            }\n            if (this.renderContext.space && (Settings.get_active().get_localHorizonMode() || Settings.get_active().get_galacticMode())) {\n                if ((((Math.abs(this.renderContext.targetAlt - this.renderContext.alt) >= minDelta) | (Math.abs(this.renderContext.targetAz - this.renderContext.az) >= minDelta)) === 1)) {\n                    this.renderContext.alt += (this.renderContext.targetAlt - this.renderContext.alt) / 10;\n                    if (Math.abs(this.renderContext.targetAz - this.renderContext.az) > 170) {\n                        if (this.renderContext.targetAz > this.renderContext.az) {\n                            this.renderContext.az += (this.renderContext.targetAz - (360 + this.renderContext.az)) / 10;\n                        }\n                        else {\n                            this.renderContext.az += ((360 + this.renderContext.targetAz) - this.renderContext.az) / 10;\n                        }\n                    }\n                    else {\n                        this.renderContext.az += (this.renderContext.targetAz - this.renderContext.az) / 10;\n                    }\n                    this.renderContext.az = ((this.renderContext.az + 720) % 360);\n                }\n            }\n            else {\n                if ((((Math.abs(this.renderContext.targetCamera.lat - this.renderContext.viewCamera.lat) >= minDelta) | (Math.abs(this.renderContext.targetCamera.lng - this.renderContext.viewCamera.lng) >= minDelta)) === 1)) {\n                    this.renderContext.viewCamera.lat += (this.renderContext.targetCamera.lat - this.renderContext.viewCamera.lat) / 10;\n                    if (Math.abs(this.renderContext.targetCamera.lng - this.renderContext.viewCamera.lng) > 170) {\n                        if (this.renderContext.targetCamera.lng > this.renderContext.viewCamera.lng) {\n                            this.renderContext.viewCamera.lng += (this.renderContext.targetCamera.lng - (360 + this.renderContext.viewCamera.lng)) / 10;\n                        }\n                        else {\n                            this.renderContext.viewCamera.lng += ((360 + this.renderContext.targetCamera.lng) - this.renderContext.viewCamera.lng) / 10;\n                        }\n                    }\n                    else {\n                        this.renderContext.viewCamera.lng += (this.renderContext.targetCamera.lng - this.renderContext.viewCamera.lng) / 10;\n                    }\n                    this.renderContext.viewCamera.lng = ((this.renderContext.viewCamera.lng + 720) % 360);\n                }\n                else {\n                    if (this.renderContext.viewCamera.lat !== this.renderContext.targetCamera.lat || this.renderContext.viewCamera.lng !== this.renderContext.targetCamera.lng) {\n                        this.renderContext.viewCamera.lat = this.renderContext.targetCamera.lat;\n                        this.renderContext.viewCamera.lng = this.renderContext.targetCamera.lng;\n                    }\n                }\n            }\n        }\n        this.renderContext.viewCamera.zoom = dc * this.renderContext.viewCamera.zoom + oneMinusDragCoefficient * this.renderContext.targetCamera.zoom;\n        this.renderContext.viewCamera.rotation = dc * this.renderContext.viewCamera.rotation + oneMinusDragCoefficient * this.renderContext.targetCamera.rotation;\n        this.renderContext.viewCamera.angle = dc * this.renderContext.viewCamera.angle + oneMinusDragCoefficient * this.renderContext.targetCamera.angle;\n    },\n\n    move: function (x, y) {\n        // Emulate MoveView() in the Windows client -- rotate the x and y\n        // offsets if the view is rotated. Our signs are the opposite of\n        // the Windows client.\n\n        var angle = Math.atan2(y, x);\n        var distance = Math.sqrt(x * x + y * y);\n        if (this.get_solarSystemMode() || this.get_planetLike()) {\n            x = Math.cos(angle + this.renderContext.viewCamera.rotation) * distance;\n            y = Math.sin(angle + this.renderContext.viewCamera.rotation) * distance;\n        } else {\n            x = Math.cos(angle - this.renderContext.viewCamera.rotation) * distance;\n            y = Math.sin(angle - this.renderContext.viewCamera.rotation) * distance;\n        }\n\n        // Apply the rotated offsets. The following merges up GetPixelScale{X,Y}()\n        // and MoveViewNative() of the Windows client.\n\n        var scaleY = this.renderContext.get_fovScale() / 3600;\n        if (this.renderContext.get_backgroundImageset().get_dataSetType() == ImageSetType.solarSystem) {\n            scaleY = 0.06;\n        }\n        var scaleX = scaleY / Math.max(0.2, Math.cos(this.renderContext.viewCamera.lat / 180 * Math.PI));\n        if (!this.renderContext.get_backgroundImageset().get_dataSetType() || this.renderContext.get_backgroundImageset().get_dataSetType() === 1 || this.renderContext.get_backgroundImageset().get_dataSetType() == ImageSetType.solarSystem) {\n            scaleX *= 6.3;  // XXX don't know where this magic number comes from\n            scaleY *= 6.3;\n        }\n        if (this.renderContext.space && (Settings.get_active().get_galacticMode() || Settings.get_active().get_localHorizonMode())) {\n            x = (Settings.get_active().get_localHorizonMode()) ? -x : x;\n            this.renderContext.targetAz += x * scaleX;\n            this.renderContext.targetAz = ((this.renderContext.targetAz + 720) % 360);\n            this.renderContext.targetAlt += y * scaleY;\n            if (this.renderContext.targetAlt > 90) {\n                this.renderContext.targetAlt = 90;\n            }\n            if (this.renderContext.targetAlt < -90) {\n                this.renderContext.targetAlt = -90;\n            }\n        } else {\n            this.renderContext.targetCamera.lng -= x * scaleX;\n            this.renderContext.targetCamera.lng = ((this.renderContext.targetCamera.lng + 720) % 360);\n            this.renderContext.targetCamera.lat += y * scaleY;\n            if (this.renderContext.targetCamera.lat > 90) {\n                this.renderContext.targetCamera.lat = 90;\n            }\n            if (this.renderContext.targetCamera.lat < -90) {\n                this.renderContext.targetCamera.lat = -90;\n            }\n        }\n        if (!Settings.get_globalSettings().get_smoothPan()) {\n            this.renderContext.viewCamera = this.renderContext.targetCamera.copy();\n        }\n        if (!!x && !!y) {\n            this._tracking = false;\n            this._trackingObject = null;\n        }\n    },\n\n    zoom: function (factor) {\n        this.renderContext.targetCamera.zoom *= factor;\n        if (this.renderContext.targetCamera.zoom > this.get_zoomMax()) {\n            this.renderContext.targetCamera.zoom = this.get_zoomMax();\n        }\n        if (!Settings.get_globalSettings().get_smoothPan()) {\n            this.renderContext.viewCamera = this.renderContext.targetCamera.copy();\n        }\n    },\n\n    roll: function (angle) {\n        this.renderContext.targetCamera.rotation += angle;\n    },\n\n    // Gesture events\n\n    onGestureStart: function (e) {\n        this._mouseDown = false;\n        this._beginZoom = this.renderContext.viewCamera.zoom;\n    },\n\n    onGestureChange: function (e) {\n        var g = e;\n        this._mouseDown = false;\n        this.renderContext.targetCamera.zoom = this.renderContext.viewCamera.zoom = Math.min(360, this._beginZoom * (1 / g.scale));\n    },\n\n    onGestureEnd: function (e) {\n        var g = e;\n        this._mouseDown = false;\n    },\n\n    // Touch events\n\n    onTouchStart: function (e) {\n        var ev = e;\n        ev.preventDefault();\n        ev.stopPropagation();\n        this._lastX = ev.targetTouches[0].pageX;\n        this._lastY = ev.targetTouches[0].pageY;\n        if (ev.targetTouches.length === 2) {\n            this._hasTwoTouches = true;\n            return;\n        }\n        if (this.uiController != null) {\n            var ee = new WWTElementEvent(this._lastX, this._lastY);\n            if (this.uiController.mouseDown(this, ee)) {\n                this._mouseDown = false;\n                this._dragging = false;\n                return;\n            }\n        }\n        this._mouseDown = true;\n    },\n\n    onTouchMove: function (e) {\n        var ev = e;\n        if (this._hasTwoTouches) {\n            var t0 = ev.touches[0];\n            var t1 = ev.touches[1];\n            var newRect = new Array(2);\n            newRect[0] = Vector2d.create(t0.pageX, t0.pageY);\n            newRect[1] = Vector2d.create(t1.pageX, t1.pageY);\n            if (this._pinchingZoomRect[0] != null && this._pinchingZoomRect[1] != null) {\n                var centerPoint = Vector2d.create(this.renderContext.width / 2, this.renderContext.height / 2);\n                var delta1 = Vector2d.subtract(newRect[0], this._pinchingZoomRect[0]);\n                var delta2 = Vector2d.subtract(newRect[1], this._pinchingZoomRect[1]);\n                var radialDirection1 = Vector2d.subtract(this._pinchingZoomRect[0], centerPoint);\n                var radialDirection2 = Vector2d.subtract(this._pinchingZoomRect[1], centerPoint);\n                radialDirection1.normalize();\n                radialDirection2.normalize();\n                var radialDot1 = delta1.x * radialDirection1.x + delta1.y * radialDirection1.y;\n                var radialDot2 = delta2.x * radialDirection2.x + delta2.y * radialDirection2.y;\n                var radialComponent1 = Vector2d.create(radialDot1 * radialDirection1.x, radialDot1 * radialDirection1.y);\n                var radialComponent2 = Vector2d.create(radialDot2 * radialDirection2.x, radialDot2 * radialDirection2.y);\n                var angularComponent1 = Vector2d.subtract(delta1, radialComponent1);\n                var angularComponent2 = Vector2d.subtract(delta2, radialComponent2);\n                var radialMagnitude = radialComponent1.get_length() + radialComponent2.get_length();\n                var angularMagnitude = angularComponent1.get_length() + angularComponent2.get_length();\n                if (radialMagnitude >= angularMagnitude) {\n                    var oldDist = this.getDistance(this._pinchingZoomRect[0], this._pinchingZoomRect[1]);\n                    var newDist = this.getDistance(newRect[0], newRect[1]);\n                    var ratio = oldDist / newDist;\n                    this.zoom(ratio);\n                }\n                else {\n                    var oldCenterDelta1 = Vector2d.subtract(this._pinchingZoomRect[0], centerPoint);\n                    var oldCenterDelta2 = Vector2d.subtract(this._pinchingZoomRect[1], centerPoint);\n                    var newCenterDelta1 = Vector2d.subtract(newRect[0], centerPoint);\n                    var newCenterDelta2 = Vector2d.subtract(newRect[1], centerPoint);\n                    var cross1 = this.crossProductZ(oldCenterDelta1, newCenterDelta1);\n                    var cross2 = this.crossProductZ(oldCenterDelta2, newCenterDelta2);\n                    var angle1 = Math.asin(cross1 / (oldCenterDelta1.get_length() * newCenterDelta1.get_length()));\n                    var angle2 = Math.asin(cross2 / (oldCenterDelta2.get_length() * newCenterDelta2.get_length()));\n                    if (angle1 * angle2 >= 0) {\n                        var angle = angle1 + angle2;\n                        if (this.get_planetLike() || this.get_solarSystemMode()) {\n                            angle *= -1;\n                        }\n                        this.roll(angle);\n                    }\n                }\n            }\n            this._pinchingZoomRect = newRect;\n            ev.stopPropagation();\n            ev.preventDefault();\n            return;\n        }\n        ev.preventDefault();\n        ev.stopPropagation();\n        if (this._mouseDown) {\n            this._dragging = true;\n            var curX = ev.targetTouches[0].pageX - this._lastX;\n            var curY = ev.targetTouches[0].pageY - this._lastY;\n            this.move(curX, curY);\n            this._lastX = ev.targetTouches[0].pageX;\n            this._lastY = ev.targetTouches[0].pageY;\n        } else {\n            //todo fix this to use syntheszed touch events.\n            if (this.uiController != null) {\n                if (this.uiController.mouseMove(this, e)) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    return;\n                }\n            }\n        }\n    },\n\n    onTouchEnd: function (e) {\n        var ev = e;\n        ev.preventDefault();\n        ev.stopPropagation();\n        this._pinchingZoomRect[0] = null;\n        this._pinchingZoomRect[1] = null;\n        if (this._hasTwoTouches) {\n            if (ev.touches.length < 2) {\n                this._hasTwoTouches = false;\n            }\n            return;\n        }\n        if (this.uiController != null) {\n            var ee = new WWTElementEvent(this._lastX, this._lastY);\n            if (this.uiController.mouseUp(this, ee)) {\n                this._mouseDown = false;\n                this._dragging = false;\n                return;\n            }\n        }\n        this._mouseDown = false;\n        this._dragging = false;\n    },\n\n    // Pointer events\n\n    onPointerDown: function (e) {\n        var pe = e;\n        var index = 0;\n        var evt = arguments[0], cnv = arguments[0].target; if (cnv.setPointerCapture) { cnv.setPointerCapture(evt.pointerId); } else if (cnv.msSetPointerCapture) { cnv.msSetPointerCapture(evt.pointerId); }\n\n        // Check for this pointer already being in the list because as of July\n        // 2020, Chrome/Mac sometimes fails to deliver the pointerUp event.\n\n        if (this._pointerIds[0] === pe.pointerId) {\n            index = 0;\n        } else if (this._pointerIds[1] === pe.pointerId) {\n            index = 1;\n        } else if (!this._pointerIds[0]) {\n            index = 0;\n        } else if (!this._pointerIds[1]) {\n            index = 1;\n        } else {\n            return;  // only attempt to track two pointers at once\n        }\n        this._pointerIds[index] = pe.pointerId;\n        this._pinchingZoomRect[index] = Vector2d.create(e.offsetX, e.offsetY);\n    },\n\n    onPointerMove: function (e) {\n        var pe = e;\n        var index = 0;\n\n        // Our pointerIds infrastructure is meant to track adjustments during a\n        // pinch motion. However, as seen in Firefox circa v81 on Linux and\n        // Android, in some cases the browser can just *lie* and swap pointerIds\n        // for the two fingers during a pinch gesture, leading to catastrophic\n        // failures. Therefore, ignore the pointerId information and infer which\n        // location is being updated from whichever change is smaller.\n\n        if (this._pointerIds[0] === pe.pointerId) {\n            index = 0;\n        } else if (this._pointerIds[1] === pe.pointerId) {\n            index = 1;\n        } else {\n            return;\n        }\n        if (this._pinchingZoomRect[0] != null && this._pinchingZoomRect[1] != null) {\n            var oldDist = this.getDistance(this._pinchingZoomRect[0], this._pinchingZoomRect[1]);\n            var newRect = Vector2d.create(e.offsetX, e.offsetY);\n            var newDist0 = this.getDistance(newRect, this._pinchingZoomRect[0]);\n            var ratio0 = oldDist / newDist0;\n            var abslog0 = Math.abs(Math.log(ratio0));\n            if (!isFinite(abslog0)) {\n                abslog0 = 1000;\n            }\n            var newDist1 = this.getDistance(newRect, this._pinchingZoomRect[1]);\n            var ratio1 = oldDist / newDist1;\n            var abslog1 = Math.abs(Math.log(ratio1));\n            if (!isFinite(abslog1)) {\n                abslog1 = 1000;\n            }\n            if (abslog1 < abslog0) {\n                this._pinchingZoomRect[0] = newRect;\n                this.zoom(ratio1);\n            }\n            else {\n                this._pinchingZoomRect[1] = newRect;\n                this.zoom(ratio0);\n            }\n        } else {\n            // Before two fingers are available, just trust.\n            this._pinchingZoomRect[index] = Vector2d.create(e.offsetX, e.offsetY);\n        }\n\n        // There doesn't seem to be a particular reason to call these\n        // but there also doesn't seem to be a reason NOT to\n        // and doing so hasn't caused any issues to this point\n        e.stopPropagation();\n        e.preventDefault();\n    },\n\n    // NOTE! As of July 2020, Chrome on Macs seems to sometimes fail to\n    // deliver this event. So our pinch-detection code needs to be robust to\n    // that.\n    onPointerUp: function (e) {\n        var pe = e;\n\n        // The -2 here is intended to indicate \"no pointer ID\"\n        // with the hope being that no browser will use this value.\n        // Note that -1 is reserved by the W3 spec for\n        // \"events generated by something other than a pointing device\"\n        // which is why we don't use -1\n        // (https://www.w3.org/TR/pointerevents3/#pointerevent-interface)\n\n        if (this._pointerIds[0] === pe.pointerId) {\n            this._pointerIds[0] = -2;\n            this._pinchingZoomRect[0] = null;\n        }\n\n        if (this._pointerIds[1] === pe.pointerId) {\n            this._pointerIds[1] = -2;\n            this._pinchingZoomRect[1] = null;\n        }\n    },\n\n    // Mouse events\n\n    onMouseDown: function (e) {\n        document.addEventListener('mousemove', ss.bind('onMouseMove', this), false);\n        document.addEventListener('mouseup', ss.bind('onMouseUp', this), false);\n        if (this.uiController != null) {\n            if (this.uiController.mouseDown(this, e)) {\n                return;\n            }\n        }\n        this._mouseDown = true;\n        this._lastX = Mouse.offsetX(this.canvas, e);\n        this._lastY = Mouse.offsetY(this.canvas, e);\n    },\n\n    onMouseMove: function (e) {\n        this._lastMouseMove = ss.now();\n        this._hoverTextPoint = Vector2d.create(Mouse.offsetX(this.canvas, e), Mouse.offsetY(this.canvas, e));\n        this._hoverText = '';\n        if (this._mouseDown) {\n            e.preventDefault();\n            e.stopPropagation();\n            this._moved = true;\n            if (e.ctrlKey) {\n                this._tilt(Mouse.offsetX(this.canvas, e) - this._lastX, Mouse.offsetY(this.canvas, e) - this._lastY);\n            }\n            else {\n                this.move(Mouse.offsetX(this.canvas, e) - this._lastX, Mouse.offsetY(this.canvas, e) - this._lastY);\n            }\n            this._lastX = Mouse.offsetX(this.canvas, e);\n            this._lastY = Mouse.offsetY(this.canvas, e);\n        } else {\n            if (this.uiController != null) {\n                if (this.uiController.mouseMove(this, e)) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    return;\n                }\n            }\n        }\n    },\n\n    onMouseUp: function (e) {\n        document.removeEventListener('mousemove', ss.bind('onMouseMove', this), false);\n        document.removeEventListener('mouseup', ss.bind('onMouseUp', this), false);\n        if (this.uiController != null) {\n            if (this.uiController.mouseUp(this, e)) {\n                this._mouseDown = false;\n                e.preventDefault();\n                return;\n            }\n        }\n        if (this._mouseDown && !this._moved) {\n            var raDecDown = this.getCoordinatesForScreenPoint(Mouse.offsetX(this.canvas, e), Mouse.offsetY(this.canvas, e));\n            if (!this._annotationclicked(raDecDown.x, raDecDown.y, Mouse.offsetX(this.canvas, e), Mouse.offsetY(this.canvas, e))) {\n                globalScriptInterface._fireClick(raDecDown.x, raDecDown.y);\n            }\n        }\n        this._mouseDown = false;\n        this._moved = false;\n    },\n\n    // WheelEvent is a WWT-specific name that we use to abstract across the\n    // different wheel-motion events that browsers provide: \"wheel\",\n    // \"mousewheel\", \"DOMMouseScroll\".\n    onMouseWheel: function (e) {\n        var ev = e;\n        var delta;\n        if (!!ev.deltaY) {\n            delta = -ev.deltaY;\n        } else if (!!ev.detail) {\n            delta = ev.detail * -1;\n        } else {\n            delta = ev.wheelDelta;\n        }\n        if (delta > 0) {\n            this.zoom(0.9);\n        } else {\n            this.zoom(1.1);\n        }\n        e.stopPropagation();\n        e.preventDefault();\n    },\n\n    onDoubleClick: function (e) {\n        WWTControl.showDataLayers = true;\n    },\n\n    onKeyDown: function (e) {\n        if (this.uiController != null) {\n            this.uiController.keyDown(this, e);\n        }\n    },\n\n    getDistance: function (a, b) {\n        var x;\n        var y;\n        x = a.x - b.x;\n        y = a.y - b.y;\n        return Math.sqrt(x * x + y * y);\n    },\n\n    crossProductZ: function (a, b) {\n        return a.x * b.y - a.y * b.x;\n    },\n\n    onContextMenu: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n    },\n\n    _tilt: function (x, y) {\n        this.renderContext.targetCamera.rotation += x * 0.001;\n        this.renderContext.targetCamera.angle += y * 0.001;\n        if (this.renderContext.targetCamera.angle < -1.52) {\n            this.renderContext.targetCamera.angle = -1.52;\n        }\n        if (this.renderContext.targetCamera.angle > 0) {\n            this.renderContext.targetCamera.angle = 0;\n        }\n    },\n\n    getCoordinatesForScreenPoint: function (x, y) {\n        var pt = Vector2d.create(x, y);\n        var PickRayDir = this.transformPickPointToWorldSpace(pt, this.renderContext.width, this.renderContext.height);\n        return Coordinates.cartesianToSphericalSky(PickRayDir);\n    },\n\n    transformPickPointToWorldSpace: function (ptCursor, backBufferWidth, backBufferHeight) {\n        var vPickRayDir = new Vector3d();\n\n        // It is possible for this function to be called before the RenderContext is\n        // set up, in which case the Projection is null. In that case we'll leave the\n        // vector at its 0,0,0 default.\n\n        if (this.renderContext.get_projection() != null) {\n            var v = new Vector3d();\n            v.x = (((2 * ptCursor.x) / backBufferWidth) - 1) / this.renderContext.get_projection().get_m11();\n            v.y = (((2 * ptCursor.y) / backBufferHeight) - 1) / this.renderContext.get_projection().get_m22();\n            v.z = 1;\n            var m = Matrix3d.multiplyMatrix(this.renderContext.get_view(), this.renderContext.get_world());\n\n            m.invert();\n\n            // Transform the screen space pick ray into 3D space\n            vPickRayDir.x = v.x * m.get_m11() + v.y * m.get_m21() + v.z * m.get_m31();\n            vPickRayDir.y = v.x * m.get_m12() + v.y * m.get_m22() + v.z * m.get_m32();\n            vPickRayDir.z = v.x * m.get_m13() + v.y * m.get_m23() + v.z * m.get_m33();\n            vPickRayDir.normalize();\n        }\n        return vPickRayDir;\n    },\n\n    transformWorldPointToPickSpace: function (worldPoint, backBufferWidth, backBufferHeight) {\n        var m = Matrix3d.multiplyMatrix(this.renderContext.get_view(), this.renderContext.get_world());\n        m.invert();\n        var p = new Vector2d();\n        var vz = worldPoint.x * m.get_m31() + worldPoint.y * m.get_m32() + worldPoint.z * m.get_m33();\n        var vx = (worldPoint.x * m.get_m11() + worldPoint.y * m.get_m12() + worldPoint.z * m.get_m13()) / vz;\n        var vy = (worldPoint.x * m.get_m21() + worldPoint.y * m.get_m22() + worldPoint.z * m.get_m23()) / vz;\n        p.x = Math.round((1 + this.renderContext.get_projection().get_m11() * vx) * (backBufferWidth / 2));\n        p.y = Math.round((1 + this.renderContext.get_projection().get_m22() * vy) * (backBufferHeight / 2));\n        return p;\n    },\n\n    getScreenPointForCoordinates: function (ra, dec) {\n        var pt = Vector2d.create(ra, dec);\n        var cartesian = Coordinates.sphericalSkyToCartesian(pt);\n        var result = this.transformWorldPointToPickSpace(cartesian, this.renderContext.width, this.renderContext.height);\n        return result;\n    },\n\n    // Note that due to limitations of ScriptSharp, this method was public even\n    // though it should really have been private.\n    setup: function (canvas, startLat, startLng, startZoom) {\n        var $this = this;\n\n        window.addEventListener('contextmenu', ss.bind('onContextMenu', this), false);\n        document.body.addEventListener('keydown', ss.bind('onKeyDown', this), false);\n        canvas.addEventListener('dblclick', ss.bind('onDoubleClick', this), false);\n        canvas.addEventListener('mousedown', ss.bind('onMouseDown', this), false);\n        canvas.addEventListener('wheel', ss.bind('onMouseWheel', this), false);\n        canvas.addEventListener('mousewheel', ss.bind('onMouseWheel', this), false);\n        canvas.addEventListener('DOMMouseScroll', ss.bind('onMouseWheel', this), false);  // old Firefox\n        canvas.addEventListener('touchstart', ss.bind('onTouchStart', this), false);\n        canvas.addEventListener('touchmove', ss.bind('onTouchMove', this), false);\n        canvas.addEventListener('touchend', ss.bind('onTouchEnd', this), false);\n        canvas.addEventListener('gesturechange', ss.bind('onGestureChange', this), false);\n        canvas.addEventListener('gesturestart', ss.bind('onGestureStart', this), false);\n        canvas.addEventListener('gestureend', ss.bind('onGestureEnd', this), false);\n        canvas.addEventListener('pointerdown', ss.bind('onPointerDown', this), false);\n        canvas.addEventListener('pointermove', ss.bind('onPointerMove', this), false);\n        canvas.addEventListener('pointerup', ss.bind('onPointerUp', this), false);\n        this.renderContext.viewCamera.lat = startLat;\n        this.renderContext.viewCamera.lng = startLng;\n        this.renderContext.viewCamera.zoom = startZoom;\n        this.renderContext.targetCamera = this.renderContext.viewCamera.copy();\n        if (this.renderContext.gl == null) {\n            this._foregroundCanvas = document.createElement('canvas');\n            this._foregroundCanvas.width = canvas.width;\n            this._foregroundCanvas.height = canvas.height;\n            this._fgDevice = this._foregroundCanvas.getContext('2d');\n        }\n        if (this.freestandingMode) {\n            setTimeout(function () {\n                $this._setupComplete();\n            }, 0);\n        } else {\n            // To line up with Windows client history, this uses `X=` when `W=`\n            // would be more appropriate.\n            loadWtmlFile(URLHelpers.singleton.coreDynamicUrl('wwtweb/catalog.aspx?X=ImageSets6'), ss.bind('_setupComplete', this), true);\n        }\n    },\n\n    _setupComplete: function () {\n        globalScriptInterface._fireReady();\n    },\n\n    gotoRADecZoom: function (ra, dec, zoom, instant, roll) {\n        this._tracking = false;\n        this._trackingObject = null;\n        this.gotoTargetFull(\n            false, // noZoom\n            instant,\n            this._cameraParametersFromRADecZoom(ra, dec, zoom, roll),\n            globalRenderContext.get_foregroundImageset(),\n            globalRenderContext.get_backgroundImageset()\n        );\n    },\n\n    _cameraParametersFromRADecZoom: function (ra, dec, zoom, roll) {\n        while (ra > 24) {\n            ra -= 24;\n        }\n        while (ra < 0) {\n            ra += 24;\n        }\n        dec = DoubleUtilities.clamp(dec, -90, 90);\n        zoom = DoubleUtilities.clamp(zoom, this.get_zoomMin(), this.get_zoomMax());\n        var rotation = (roll == null) ? globalRenderContext.viewCamera.rotation : roll;\n        var cameraParams = CameraParameters.create(dec, globalRenderContext.rAtoViewLng(ra), zoom, rotation, globalRenderContext.viewCamera.angle, globalRenderContext.viewCamera.opacity);\n        return cameraParams;\n    },\n\n    timeToRADecZoom: function (ra, dec, zoom, roll) {\n        var cameraParams = this._cameraParametersFromRADecZoom(ra, dec, zoom, roll);\n        return this.timeToTargetFull(cameraParams, false);\n    },\n\n    get_solarSystemMode: function () {\n        if (this.renderContext.get_backgroundImageset() == null) {\n            return false;\n        }\n        return this.renderContext.get_backgroundImageset().get_dataSetType() == ImageSetType.solarSystem;\n    },\n\n    gotoTarget: function (place, noZoom, instant, trackObject) {\n        if (place == null) {\n            return;\n        }\n        if ((trackObject && this.get_solarSystemMode())) {\n            if ((place.get_classification() === 536870912 && place.get_type() !== 4) || (place.get_classification() === 1) || (place.get_classification() === 1048576) && place.get_distance() > 0) {\n                var target = 65536;\n                if (place.get_classification() === 1 || place.get_classification() === 1048576) {\n                    target = 20;\n                }\n                else {\n                    try {\n                        if (place.get_target() !== 65536) {\n                            target = place.get_target();\n                        }\n                        else {\n                            target = Planets.getPlanetIDFromName(place.get_name());\n                        }\n                    }\n                    catch ($e1) {\n                    }\n                }\n                if (target !== 65536) {\n                    this._trackingObject = place;\n                    if (target === this._solarSystemTrack && !(place.get_classification() === 1 || place.get_classification() === 1048576)) {\n                        this.gotoTarget3(place.get_camParams(), noZoom, instant);\n                        return;\n                    }\n                    var jumpTime = 4;\n                    if (target === 20) {\n                        jumpTime = 17;\n                    }\n                    else {\n                        jumpTime += 13 * (101 - Settings.get_active().get_solarSystemScale()) / 100;\n                    }\n                    if (instant) {\n                        jumpTime = 1;\n                    }\n                    var camTo = this.renderContext.viewCamera.copy();\n                    camTo.targetReferenceFrame = '';\n                    camTo.target = target;\n                    var zoom = 10;\n                    if (target === 20) {\n                        if (place.get_classification() === Classification.galaxy) {\n                            zoom = 1404946007758;\n                        }\n                        else {\n                            zoom = 63239.6717 * 100;\n                        }\n\n                        // Star or something outside of SS\n                        var vect = Coordinates.raDecTo3dAu(place.get_RA(), place.get_dec(), place.get_distance());\n                        var ecliptic = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow()) / 180 * Math.PI;\n                        vect.rotateX(ecliptic);\n                        camTo.viewTarget = Vector3d.negate(camTo.viewTarget);\n                    }\n                    else {\n                        camTo.viewTarget = Planets.getPlanet3dLocationJD(target, SpaceTimeController.getJNowForFutureTime(jumpTime));\n                        switch (target) {\n                            case 0:\n                                zoom = 0.6;\n                                break;\n                            case 1:\n                                zoom = 0.0004;\n                                break;\n                            case 2:\n                                zoom = 0.0004;\n                                break;\n                            case 3:\n                                zoom = 0.0004;\n                                break;\n                            case 4:\n                                zoom = 0.007;\n                                break;\n                            case 5:\n                                zoom = 0.007;\n                                break;\n                            case 6:\n                                zoom = 0.004;\n                                break;\n                            case 7:\n                                zoom = 0.004;\n                                break;\n                            case 8:\n                                zoom = 0.0004;\n                                break;\n                            case 9:\n                                zoom = 0.0004;\n                                break;\n                            case 10:\n                                zoom = 0.0004;\n                                break;\n                            case 11:\n                                zoom = 0.0004;\n                                break;\n                            case 12:\n                                zoom = 0.0004;\n                                break;\n                            case 13:\n                                zoom = 0.0004;\n                                break;\n                            case 19:\n                                zoom = 0.0004;\n                                break;\n                            case 20:\n                                zoom = 10;\n                                break;\n                            default:\n                                break;\n                        }\n                        zoom = zoom * Settings.get_active().get_solarSystemScale();\n                    }\n                    var fromParams = this.renderContext.viewCamera.copy();\n                    if (this._solarSystemTrack === 20 && !ss.emptyString(this.renderContext.get_trackingFrame())) {\n                        fromParams = this.renderContext.customTrackingParams;\n                        this.renderContext.set_trackingFrame('');\n                    }\n                    camTo.zoom = zoom;\n                    var toVector = camTo.viewTarget;\n                    toVector.subtract(fromParams.viewTarget);\n                    if (place.get_classification() === 1) {\n                        toVector = Vector3d.negate(toVector);\n                    }\n                    if (!!toVector.length()) {\n                        var raDec = toVector.toRaDec();\n                        if (target === 20) {\n                            camTo.lat = -raDec.y;\n                        }\n                        else {\n                            camTo.lat = raDec.y;\n                        }\n                        camTo.lng = raDec.x * 15 - 90;\n                    }\n                    else {\n                        camTo.lat = this.renderContext.viewCamera.lat;\n                        camTo.lng = this.renderContext.viewCamera.lng;\n                    }\n                    if (target !== SolarSystemObjects.custom) {\n                        // replace with planet surface\n                        camTo.viewTarget = Planets.getPlanetTargetPoint(target, camTo.lat, camTo.lng, SpaceTimeController.getJNowForFutureTime(jumpTime));\n                    }\n                    var solarMover = new ViewMoverKenBurnsStyle(fromParams, camTo, jumpTime, SpaceTimeController.get_now(), SpaceTimeController.getTimeForFutureTime(jumpTime), 3);\n                    solarMover.fastDirectionMove = true;\n                    this.set__mover(solarMover);\n                    return;\n                }\n            }\n        }\n        this._tracking = false;\n        this._trackingObject = null;\n        var camParams = place.get_camParams().copy();\n        if (this.renderContext.get_backgroundImageset() != null && place.get_type() !== this.renderContext.get_backgroundImageset().get_dataSetType()) {\n            this.renderContext.targetCamera = place.get_camParams().copy();\n            this.renderContext.viewCamera = this.renderContext.targetCamera.copy();\n            this.renderContext.set_backgroundImageset(this.getDefaultImageset(place.get_type(), 3));\n            instant = true;\n        } else if (this.get_solarSystemMode() && place.get_target() !== this._solarSystemTrack) {\n            this.renderContext.targetCamera = place.get_camParams().copy();\n            this.renderContext.viewCamera = this.renderContext.targetCamera.copy();\n            this._solarSystemTrack = place.get_target();\n            instant = true;\n        }\n        if (place.get_classification() === 128) {\n            camParams.zoom = this.get_zoomMax();\n            this.gotoTargetFull(false, instant, camParams, null, null);\n        } else {\n            this._solarSystemTrack = place.get_target();\n            this.gotoTargetFull(noZoom, instant, camParams, place.get_studyImageset(), place.get_backgroundImageset());\n            if (trackObject) {\n                this._tracking = true;\n                this._trackingObject = place;\n            }\n        }\n    },\n\n    gotoTarget3: function (camParams, noZoom, instant) {\n        this._tracking = false;\n        this._trackingObject = null;\n        this.gotoTargetFull(noZoom, instant, camParams, this.renderContext.get_foregroundImageset(), this.renderContext.get_backgroundImageset());\n    },\n\n    _tooCloseForSlewMove: function (cameraParams) {\n        return Math.abs(this.renderContext.viewCamera.lat - cameraParams.lat) < 1E-12 && Math.abs(this.renderContext.viewCamera.lng - cameraParams.lng) < 1E-12 && Math.abs(this.renderContext.viewCamera.zoom - cameraParams.zoom) < 1E-12 && Math.abs(this.renderContext.viewCamera.rotation - cameraParams.rotation) < 1E-12;\n    },\n\n    gotoTargetFull: function (noZoom, instant, cameraParams, studyImageSet, backgroundImageSet) {\n        this._tracking = false;\n        this._trackingObject = null;\n        this._targetStudyImageset = studyImageSet;\n        this._targetBackgroundImageset = backgroundImageSet;\n        if (noZoom) {\n            cameraParams.zoom = this.renderContext.viewCamera.zoom;\n            cameraParams.angle = this.renderContext.viewCamera.angle;\n            cameraParams.rotation = this.renderContext.viewCamera.rotation;\n        } else {\n            if (cameraParams.zoom === -1 || !cameraParams.zoom) {\n                if (this.renderContext.space) {\n                    cameraParams.zoom = 1.40625;\n                }\n                else {\n                    cameraParams.zoom = 0.09;\n                }\n            }\n        }\n        if (instant || this._tooCloseForSlewMove(cameraParams)) {\n            this.set__mover(null);\n            this.renderContext.targetCamera = cameraParams.copy();\n            this.renderContext.viewCamera = this.renderContext.targetCamera.copy();\n            if (this.renderContext.space && Settings.get_active().get_galacticMode()) {\n                var gPoint = Coordinates.j2000toGalactic(this.renderContext.viewCamera.get_RA() * 15, this.renderContext.viewCamera.get_dec());\n                this.renderContext.targetAlt = this.renderContext.alt = gPoint[1];\n                this.renderContext.targetAz = this.renderContext.az = gPoint[0];\n            }\n            else if (this.renderContext.space && Settings.get_active().get_localHorizonMode()) {\n                var currentAltAz = Coordinates.equitorialToHorizon(Coordinates.fromRaDec(this.renderContext.viewCamera.get_RA(), this.renderContext.viewCamera.get_dec()), SpaceTimeController.get_location(), SpaceTimeController.get_now());\n                this.renderContext.targetAlt = this.renderContext.alt = currentAltAz.get_alt();\n                this.renderContext.targetAz = this.renderContext.az = currentAltAz.get_az();\n            }\n            this._mover_Midpoint();\n        } else {\n            this.set__mover(ViewMoverSlew.create(this.renderContext.viewCamera, cameraParams));\n            this.get__mover().set_midpoint(ss.bind('_mover_Midpoint', this));\n        }\n    },\n\n    _slewTimeBetweenTargets: function (from, to) {\n        var mover = ViewMoverSlew.create(from, to);\n        return mover.get_moveTime();\n    },\n\n    timeToTargetFull: function (cameraParams, noZoom) {\n        if (noZoom) {\n            cameraParams.zoom = this.renderContext.viewCamera.zoom;\n            cameraParams.angle = this.renderContext.viewCamera.angle;\n            cameraParams.rotation = this.renderContext.viewCamera.rotation;\n        }\n        if (this._tooCloseForSlewMove(cameraParams)) {\n            return 0;\n        }\n        return this._slewTimeBetweenTargets(globalRenderContext.viewCamera, cameraParams);\n    },\n\n    _freezeView: function () {\n        this.renderContext.viewCamera = this.renderContext.targetCamera.copy();\n        this.set__mover(null);\n    },\n\n    get__mover: function () {\n        return this.renderContext.viewMover;\n    },\n\n    set__mover: function (value) {\n        this.renderContext.viewMover = value;\n        return value;\n    },\n\n    fadeInImageSet: function (newImageSet) {\n        if (this.renderContext.get_backgroundImageset() != null && newImageSet.get_dataSetType() !== this.renderContext.get_backgroundImageset().get_dataSetType()) {\n            TileCache.purgeQueue();\n            TileCache.clearCache();\n        }\n        this.renderContext.set_backgroundImageset(newImageSet);\n    },\n\n    _mover_Midpoint: function () {\n        if ((this._targetStudyImageset != null && this.renderContext.get_foregroundImageset() == null) || (this.renderContext.get_foregroundImageset() != null && !this.renderContext.get_foregroundImageset().equals(this._targetStudyImageset))) {\n            this.renderContext.set_foregroundImageset(this._targetStudyImageset);\n        }\n        if (this.renderContext.get_backgroundImageset() != null && (this._targetBackgroundImageset != null && !this.renderContext.get_backgroundImageset().equals(this._targetBackgroundImageset))) {\n            if (this._targetBackgroundImageset != null && this._targetBackgroundImageset.get_generic()) {\n                this.fadeInImageSet(this._getRealImagesetFromGeneric(this._targetBackgroundImageset));\n            }\n            else {\n                this.fadeInImageSet(this._targetBackgroundImageset);\n            }\n        }\n    },\n\n    getDefaultImageset: function (imageSetType, bandPass) {\n        var $enum1 = ss.enumerate(WWTControl.imageSets);\n        while ($enum1.moveNext()) {\n            var imageset = $enum1.current;\n            if (imageset.get_defaultSet() && imageset.get_bandPass() === bandPass && imageset.get_dataSetType() === imageSetType) {\n                return imageset;\n            }\n        }\n        var $enum2 = ss.enumerate(WWTControl.imageSets);\n        while ($enum2.moveNext()) {\n            var imageset = $enum2.current;\n            if (imageset.get_bandPass() === bandPass && imageset.get_dataSetType() === imageSetType) {\n                return imageset;\n            }\n        }\n        var $enum3 = ss.enumerate(WWTControl.imageSets);\n        while ($enum3.moveNext()) {\n            var imageset = $enum3.current;\n            if (imageset.get_dataSetType() === imageSetType) {\n                return imageset;\n            }\n        }\n        return WWTControl.imageSets[0];\n    },\n\n    _getRealImagesetFromGeneric: function (generic) {\n        var $enum1 = ss.enumerate(WWTControl.imageSets);\n        while ($enum1.moveNext()) {\n            var imageset = $enum1.current;\n            if (imageset.get_defaultSet() && imageset.get_bandPass() === generic.get_bandPass() && imageset.get_dataSetType() === generic.get_dataSetType()) {\n                return imageset;\n            }\n        }\n        var $enum2 = ss.enumerate(WWTControl.imageSets);\n        while ($enum2.moveNext()) {\n            var imageset = $enum2.current;\n            if (imageset.get_bandPass() === generic.get_bandPass() && imageset.get_dataSetType() === generic.get_dataSetType()) {\n                return imageset;\n            }\n        }\n        return WWTControl.imageSets[0];\n    },\n\n    _hideUI: function (p) { },\n\n    createTour: function (name) {\n        if (ss.canCast(this.uiController, TourPlayer)) {\n            var player = this.uiController;\n            player.stop(false);\n        }\n        this.tour = new TourDocument();\n        this.tour.set_title(name);\n        this.setupTour();\n        this.tour.set_editMode(true);\n        return this.tour;\n    },\n\n    setupTour: function () {\n        this.tourEdit = new TourEditTab();\n        this.tourEdit.set_tour(this.tour);\n        this.tour.set_currentTourstopIndex(0);\n        this.tour.set_editMode(false);\n        this.uiController = this.tourEdit.tourEditorUI;\n    },\n\n    loadTour: function (url) {\n        var $this = this;\n\n        if (ss.canCast(this.uiController, TourPlayer)) {\n            var player = this.uiController;\n            player.stop(false);\n        }\n        this.tour = TourDocument.fromUrl(url, function () {\n            $this.setupTour();\n            var player = new TourPlayer();\n            player.set_tour($this.tour);\n            globalWWTControl.uiController = player;\n            globalScriptInterface._fireTourReady();\n        });\n    },\n\n    playTour: function (url) {\n        var $this = this;\n\n        if (ss.canCast(this.uiController, TourPlayer)) {\n            var player = this.uiController;\n            player.stop(false);\n        }\n        this.tour = TourDocument.fromUrl(url, function () {\n            $this.setupTour();\n            $this.tourEdit.playNow(true);  // fromStart\n            globalScriptInterface._fireTourReady();\n        });\n    },\n\n    playCurrentTour: function () {\n        if (ss.canCast(this.uiController, TourPlayer)) {\n            var player = this.uiController;\n            player.play();\n        }\n    },\n\n    pauseCurrentTour: function () {\n        if (ss.canCast(this.uiController, TourPlayer)) {\n            var player = this.uiController;\n            player.pauseTour();\n        }\n    },\n\n    stopCurrentTour: function () {\n        if (ss.canCast(this.uiController, TourPlayer)) {\n            var player = this.uiController;\n            player.stop(false);\n        }\n    },\n\n    _closeTour: function () { },\n\n    getImagesetByName: function (name) {\n        var $enum1 = ss.enumerate(WWTControl.imageSets);\n        while ($enum1.moveNext()) {\n            var imageset = $enum1.current;\n            if (imageset.get_name().toLowerCase().indexOf(name.toLowerCase()) > -1) {\n                return imageset;\n            }\n        }\n        return null;\n    },\n\n    getImageSetByUrl: function (url) {\n        var $enum1 = ss.enumerate(WWTControl.imageSets);\n        while ($enum1.moveNext()) {\n            var imageset = $enum1.current;\n            if (imageset.get_url() === url) {\n                return imageset;\n            }\n        }\n        return null;\n    },\n\n    setBackgroundImageByName: function (name) {\n        var newBackground = this.getImagesetByName(name);\n        if (newBackground != null) {\n            this.renderContext.set_backgroundImageset(newBackground);\n        }\n    },\n\n    setForegroundImageByName: function (name) {\n        var newForeground = this.getImagesetByName(name);\n        if (newForeground != null) {\n            this.renderContext.set_foregroundImageset(newForeground);\n        }\n    },\n\n    addCatalogHips: function (catalogHips) {\n        this.renderContext.addCatalogHips(catalogHips, null);\n    },\n\n    addCatalogHipsByName: function (name) {\n        this.addCatalogHipsByNameWithCallback(name, null);\n    },\n\n    addCatalogHipsByNameWithCallback: function (name, onLoad) {\n        var catalogHips = this.getImagesetByName(name);\n        if (catalogHips != null) {\n            this.renderContext.addCatalogHips(catalogHips, onLoad);\n        }\n    },\n\n    removeCatalogHipsByName: function (name) {\n        var catalogHips = this.getImagesetByName(name);\n        if (catalogHips != null) {\n            this.renderContext.removeCatalogHips(catalogHips);\n        }\n    },\n\n    getCatalogHipsByName: function (name) {\n        return this.renderContext.getCatalogHipsByName(name);\n    },\n\n    getCatalogHipsDataInView: function (name, limit, onComplete) {\n        var catalogHips = this.getImagesetByName(name);\n        if (catalogHips != null) {\n            this.renderContext.getCatalogHipsDataInView(catalogHips, limit, onComplete);\n        }\n    },\n\n    setCutsForFits: function (imagesetName, min, max) {\n        var imageset = this.getImagesetByName(imagesetName);\n        if (imageset != null && imageset.get_fitsProperties() != null) {\n            imageset.get_fitsProperties().lowerCut = min;\n            imageset.get_fitsProperties().upperCut = max;\n        } else {\n            console.log(imagesetName + ' not found');\n        }\n    },\n\n    setColorMapForFits: function (imagesetName, colorMapName) {\n        var imageset = this.getImagesetByName(imagesetName);\n        if (imageset != null && imageset.get_fitsProperties() != null) {\n            imageset.get_fitsProperties().colorMapName = colorMapName;\n        } else {\n            console.log(imagesetName + ' not found');\n        }\n    },\n\n    setScaleTypeForFits: function (imagesetName, scaleType) {\n        var imageset = this.getImagesetByName(imagesetName);\n        if (imageset != null && imageset.get_fitsProperties() != null) {\n            imageset.get_fitsProperties().scaleType = scaleType;\n        } else {\n            console.log(imagesetName + ' not found');\n        }\n    },\n\n    _drawCrosshairs: function (context) {\n        if (context.gl == null) {\n            var ctx = context.device;\n            ctx.save();\n            ctx.beginPath();\n            ctx.strokeStyle = Settings.get_current().get_crosshairsColor();\n            ctx.lineWidth = 2;\n            var x = context.width / 2, y = context.height / 2;\n            var halfLength = 5;\n            ctx.moveTo(x, y + halfLength);\n            ctx.lineTo(x, y - halfLength);\n            ctx.moveTo(x + halfLength, y);\n            ctx.lineTo(x - halfLength, y);\n            ctx.stroke();\n            ctx.restore();\n        } else {\n            if (this._crossHairs == null) {\n                // These coordinates are in clip space where the shape of the\n                // viewport is 1x1, so to get the crosshairs to appear square on\n                // the screen we have to apply the aspect ratio.\n                var halfHeight = 0.03;\n                var halfWidth = halfHeight * context.height / context.width;\n                this._crossHairs = new SimpleLineList();\n                this._crossHairs.set_depthBuffered(false);\n                this._crossHairs.pure2D = true;\n                this._crossHairs.addLine(Vector3d.create(-halfWidth, 0, 0), Vector3d.create(halfWidth, 0, 0));\n                this._crossHairs.addLine(Vector3d.create(0, -halfHeight, 0), Vector3d.create(0, halfHeight, 0));\n            }\n            this._crossHairs.drawLines(context, 1, Color.load(Settings.get_current().get_crosshairsColor()));\n        }\n    },\n\n    captureThumbnail: function (blobReady) {\n        this.captureFrame(blobReady, 96, 45, 'image/jpeg', true);\n    },\n\n    captureCurrentFrame: function (blobReady, width, height, format) {\n        this.captureFrame(blobReady, width, height, format, false);\n    },\n\n    captureFrameForVideo: function (blobReady, width, height, format) {\n        var $this = this;\n\n        var frameNumber = SpaceTimeController.currentFrameNumber;\n        var forVideo = function (blob) {\n            var containsIndex;\n            if (frameNumber === $this._videoQueueIndex) {\n                blobReady(blob);\n                $this._videoQueueIndex += 1;\n\n                // Keep moving forward until we hit the next index that we're still waiting on\n                while ((containsIndex = ss.keyExists($this._videoBlobQueue, $this._videoQueueIndex)) || ($this._emptyFrames.indexOf($this._videoQueueIndex) >= 0)) {\n                    if (containsIndex) {\n                        blobReady($this._videoBlobQueue[$this._videoQueueIndex]);\n                        $this._videoBlobQueue[$this._videoQueueIndex] = null;\n                    }\n                    else {\n                        ss.remove($this._emptyFrames, $this._videoQueueIndex);\n                    }\n                    $this._videoQueueIndex += 1;\n                }\n            }\n            else {\n                if (blob != null) {\n                    $this._videoBlobQueue[frameNumber] = blob;\n                }\n                else {\n                    $this._emptyFrames.push(frameNumber);\n                }\n            }\n            if ($this._videoQueueIndex >= SpaceTimeController.totalFrames) {\n                $this._videoBlobReady = null;\n                $this._videoBlobQueue = null;\n                $this._videoQueueIndex = 0;\n                $this._emptyFrames.length = 0;\n            }\n        };\n        this.captureCurrentFrame(forVideo, width, height, format);\n    },\n\n    captureFrame: function (blobReady, width, height, format, needRender) {\n        if (needRender) {\n            this.renderOneFrame(); // NB: this used to be Render() but that was almost surely not what we want\n        }\n        var image = document.createElement('img');\n        image.addEventListener('load', function (e) {\n            var imageAspect = (image.width) / image.height;\n            var clientAspect = width / height;\n            var cw = width;\n            var ch = height;\n            if (imageAspect < clientAspect) {\n                ch = ss.truncate((cw / imageAspect));\n            }\n            else {\n                cw = ss.truncate((ch * imageAspect));\n            }\n            var cx = (width - cw) / 2;\n            var cy = (height - ch) / 2;\n            var temp = document.createElement('canvas');\n            temp.height = height;\n            temp.width = width;\n            var ctx = temp.getContext('2d');\n            ctx.drawImage(image, cx, cy, cw, ch);\n            if (typeof temp.msToBlob == 'function') { var blob = temp.msToBlob(); blobReady(blob); } else { temp.toBlob(blobReady, format); }\n        }, false);\n        image.src = globalWWTControl.canvas.toDataURL();\n    },\n\n    clampZooms: function (rc) {\n        rc.viewCamera.zoom = DoubleUtilities.clamp(rc.viewCamera.zoom, this.get_zoomMin(), this.get_zoomMax());\n        rc.targetCamera.zoom = DoubleUtilities.clamp(rc.targetCamera.zoom, this.get_zoomMin(), this.get_zoomMax());\n    }\n};\n\nregisterType(\"WWTControl\", [WWTControl, WWTControl$, null]);\n\n// wwtlib.WWTControlBuilder\n\nexport function WWTControlBuilder(divId) {\n    this._divId = null;\n    this._startRenderLoop = false;\n    this._startLat = 0;\n    this._startLng = 0;\n    this._startZoom = 360;\n    this._freestandingAssetBaseurl = '';\n    this._startMode = '';\n    this._divId = divId;\n}\n\nvar WWTControlBuilder$ = {\n    startRenderLoop: function (value) {\n        this._startRenderLoop = value;\n    },\n\n    initialView: function (lat, lng, zoom) {\n        this._startLat = lat;\n        this._startLng = lng;\n        this._startZoom = zoom;\n    },\n\n    freestandingMode: function (asset_baseurl) {\n        this._freestandingAssetBaseurl = asset_baseurl;\n    },\n\n    initialMode: function (value) {\n        this._startMode = value;\n    },\n\n    create: function () {\n        var freestandingMode = !!this._freestandingAssetBaseurl;\n        var trueStartMode;\n        if (!!this._startMode) {\n            trueStartMode = this._startMode;\n        } else if (freestandingMode) {\n            trueStartMode = 'black';\n        } else {\n            trueStartMode = 'sky';\n        }\n        set_freestandingMode(freestandingMode);\n        if (freestandingMode) {\n            URLHelpers.singleton.overrideAssetBaseurl(this._freestandingAssetBaseurl);\n        }\n        return WWTControl.initControl6(this._divId, this._startRenderLoop, this._startLat, this._startLng, this._startZoom, trueStartMode);\n    }\n};\n\nregisterType(\"WWTControlBuilder\", [WWTControlBuilder, WWTControlBuilder$, null]);\n\n// wwtlib.WWTElementEvent\n\nexport function WWTElementEvent(x, y) {\n    this.offsetX = 0;\n    this.offsetY = 0;\n    this.offsetX = x;\n    this.offsetY = y;\n}\n\nvar WWTElementEvent$ = {};\n\nregisterType(\"WWTElementEvent\", [WWTElementEvent, WWTElementEvent$, null]);\n","// Top level file is just a mixin of submodules & constants\n'use strict';\n\nvar assign    = require('./lib/utils/common').assign;\n\nvar deflate   = require('./lib/deflate');\nvar inflate   = require('./lib/inflate');\nvar constants = require('./lib/zlib/constants');\n\nvar pako = {};\n\nassign(pako, deflate, inflate, constants);\n\nmodule.exports = pako;\n","'use strict';\n\n\nvar zlib_deflate = require('./zlib/deflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\n\nvar toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nvar Z_NO_FLUSH      = 0;\nvar Z_FINISH        = 4;\n\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_SYNC_FLUSH    = 2;\n\nvar Z_DEFAULT_COMPRESSION = -1;\n\nvar Z_DEFAULT_STRATEGY    = 0;\n\nvar Z_DEFLATED  = 8;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array|Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param)  or if you\n * push a chunk with explicit flush (call [[Deflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate(options) {\n  if (!(this instanceof Deflate)) return new Deflate(options);\n\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status = zlib_deflate.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    var dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = zlib_deflate.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK) {\n      throw new Error(msg[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Deflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the compression context.\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * array format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var status, _mode;\n\n  if (this.ended) { return false; }\n\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n    status = zlib_deflate.deflate(strm, _mode);    /* no bad return value */\n\n    if (status !== Z_STREAM_END && status !== Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {\n      if (this.options.to === 'string') {\n        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));\n      } else {\n        this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n      }\n    }\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);\n\n  // Finalize on the last chunk.\n  if (_mode === Z_FINISH) {\n    status = zlib_deflate.deflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === Z_SYNC_FLUSH) {\n    this.onEnd(Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , data = Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate(input, options) {\n  var deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || msg[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\n\n\nexports.Deflate = Deflate;\nexports.deflate = deflate;\nexports.deflateRaw = deflateRaw;\nexports.gzip = gzip;\n","'use strict';\n\n\nvar zlib_inflate = require('./zlib/inflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar c            = require('./zlib/constants');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\nvar GZheader     = require('./zlib/gzheader');\n\nvar toString = Object.prototype.toString;\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param) or if you\n * push a chunk with explicit flush (call [[Inflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate(options) {\n  if (!(this instanceof Inflate)) return new Inflate(options);\n\n  this.options = utils.assign({\n    chunkSize: 16384,\n    windowBits: 0,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status  = zlib_inflate.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== c.Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  this.header = new GZheader();\n\n  zlib_inflate.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = zlib_inflate.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== c.Z_OK) {\n        throw new Error(msg[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Inflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the decompression context.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var dictionary = this.options.dictionary;\n  var status, _mode;\n  var next_out_utf8, tail, utf8str;\n\n  // Flag to properly process Z_BUF_ERROR on testing inflate call\n  // when we check that all output data was flushed.\n  var allowBufError = false;\n\n  if (this.ended) { return false; }\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? c.Z_FINISH : c.Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // Only binary strings can be decompressed on practice\n    strm.input = strings.binstring2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = zlib_inflate.inflate(strm, c.Z_NO_FLUSH);    /* no bad return value */\n\n    if (status === c.Z_NEED_DICT && dictionary) {\n      status = zlib_inflate.inflateSetDictionary(this.strm, dictionary);\n    }\n\n    if (status === c.Z_BUF_ERROR && allowBufError === true) {\n      status = c.Z_OK;\n      allowBufError = false;\n    }\n\n    if (status !== c.Z_STREAM_END && status !== c.Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === c.Z_STREAM_END || (strm.avail_in === 0 && (_mode === c.Z_FINISH || _mode === c.Z_SYNC_FLUSH))) {\n\n        if (this.options.to === 'string') {\n\n          next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          tail = strm.next_out - next_out_utf8;\n          utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) { utils.arraySet(strm.output, strm.output, next_out_utf8, tail, 0); }\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n        }\n      }\n    }\n\n    // When no more input data, we should check that internal inflate buffers\n    // are flushed. The only way to do it when avail_out = 0 - run one more\n    // inflate pass. But if output data not exists, inflate return Z_BUF_ERROR.\n    // Here we set flag to process this error properly.\n    //\n    // NOTE. Deflate does not return error in this case and does not needs such\n    // logic.\n    if (strm.avail_in === 0 && strm.avail_out === 0) {\n      allowBufError = true;\n    }\n\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== c.Z_STREAM_END);\n\n  if (status === c.Z_STREAM_END) {\n    _mode = c.Z_FINISH;\n  }\n\n  // Finalize on the last chunk.\n  if (_mode === c.Z_FINISH) {\n    status = zlib_inflate.inflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === c.Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === c.Z_SYNC_FLUSH) {\n    this.onEnd(c.Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === c.Z_OK) {\n    if (this.options.to === 'string') {\n      // Glue & convert here, until we teach pako to send\n      // utf8 aligned strings to onData\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , input = pako.deflate([1,2,3,4,5,6,7,8,9])\n *   , output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err)\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate(input, options) {\n  var inflator = new Inflate(options);\n\n  inflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) { throw inflator.msg || msg[inflator.err]; }\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nexports.Inflate = Inflate;\nexports.inflate = inflate;\nexports.inflateRaw = inflateRaw;\nexports.ungzip  = inflate;\n","'use strict';\n\n\nvar TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\n                (typeof Uint16Array !== 'undefined') &&\n                (typeof Int32Array !== 'undefined');\n\nfunction _has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexports.assign = function (obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    var source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (var p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// reduce buffer size, avoiding mem copy\nexports.shrinkBuf = function (buf, size) {\n  if (buf.length === size) { return buf; }\n  if (buf.subarray) { return buf.subarray(0, size); }\n  buf.length = size;\n  return buf;\n};\n\n\nvar fnTyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    if (src.subarray && dest.subarray) {\n      dest.set(src.subarray(src_offs, src_offs + len), dest_offs);\n      return;\n    }\n    // Fallback to ordinary array\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    var i, l, len, pos, chunk, result;\n\n    // calculate data length\n    len = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      len += chunks[i].length;\n    }\n\n    // join chunks\n    result = new Uint8Array(len);\n    pos = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      chunk = chunks[i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  }\n};\n\nvar fnUntyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    return [].concat.apply([], chunks);\n  }\n};\n\n\n// Enable/Disable typed arrays use, for testing\n//\nexports.setTyped = function (on) {\n  if (on) {\n    exports.Buf8  = Uint8Array;\n    exports.Buf16 = Uint16Array;\n    exports.Buf32 = Int32Array;\n    exports.assign(exports, fnTyped);\n  } else {\n    exports.Buf8  = Array;\n    exports.Buf16 = Array;\n    exports.Buf32 = Array;\n    exports.assign(exports, fnUntyped);\n  }\n};\n\nexports.setTyped(TYPED_OK);\n","// String encode/decode helpers\n'use strict';\n\n\nvar utils = require('./common');\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nvar STR_APPLY_OK = true;\nvar STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, [ 0 ]); } catch (__) { STR_APPLY_OK = false; }\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nvar _utf8len = new utils.Buf8(256);\nfor (var q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nexports.string2buf = function (str) {\n  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new utils.Buf8(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper (used in 2 places)\nfunction buf2binstring(buf, len) {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\n      return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));\n    }\n  }\n\n  var result = '';\n  for (var i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n}\n\n\n// Convert byte array to binary string\nexports.buf2binstring = function (buf) {\n  return buf2binstring(buf, buf.length);\n};\n\n\n// Convert binary string (typed, when possible)\nexports.binstring2buf = function (str) {\n  var buf = new utils.Buf8(str.length);\n  for (var i = 0, len = buf.length; i < len; i++) {\n    buf[i] = str.charCodeAt(i);\n  }\n  return buf;\n};\n\n\n// convert array to string\nexports.buf2string = function (buf, max) {\n  var i, out, c, c_len;\n  var len = max || buf.length;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  var utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nexports.utf8border = function (buf, max) {\n  var pos;\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n","'use strict';\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction adler32(adler, buf, len, pos) {\n  var s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n}\n\n\nmodule.exports = adler32;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  //Z_MEM_ERROR:     -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n","'use strict';\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nfunction makeTable() {\n  var c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n}\n\n// Create table on load. Just 255 signed longs. Not a problem.\nvar crcTable = makeTable();\n\n\nfunction crc32(crc, buf, len, pos) {\n  var t = crcTable,\n      end = pos + len;\n\n  crc ^= -1;\n\n  for (var i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n}\n\n\nmodule.exports = crc32;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils   = require('../utils/common');\nvar trees   = require('./trees');\nvar adler32 = require('./adler32');\nvar crc32   = require('./crc32');\nvar msg     = require('./messages');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\nvar Z_NO_FLUSH      = 0;\nvar Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\nvar Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\n//var Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\n//var Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\n//var Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n\n/* compression levels */\n//var Z_NO_COMPRESSION      = 0;\n//var Z_BEST_SPEED          = 1;\n//var Z_BEST_COMPRESSION    = 9;\nvar Z_DEFAULT_COMPRESSION = -1;\n\n\nvar Z_FILTERED            = 1;\nvar Z_HUFFMAN_ONLY        = 2;\nvar Z_RLE                 = 3;\nvar Z_FIXED               = 4;\nvar Z_DEFAULT_STRATEGY    = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\n//var Z_BINARY              = 0;\n//var Z_TEXT                = 1;\n//var Z_ASCII               = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n/*============================================================================*/\n\n\nvar MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_MEM_LEVEL = 8;\n\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nvar D_CODES       = 30;\n/* number of distance codes */\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nvar MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar MIN_MATCH = 3;\nvar MAX_MATCH = 258;\nvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nvar PRESET_DICT = 0x20;\n\nvar INIT_STATE = 42;\nvar EXTRA_STATE = 69;\nvar NAME_STATE = 73;\nvar COMMENT_STATE = 91;\nvar HCRC_STATE = 103;\nvar BUSY_STATE = 113;\nvar FINISH_STATE = 666;\n\nvar BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nvar BS_BLOCK_DONE     = 2; /* block flush performed */\nvar BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nvar BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nvar OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nfunction err(strm, errorCode) {\n  strm.msg = msg[errorCode];\n  return errorCode;\n}\n\nfunction rank(f) {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n}\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nfunction flush_pending(strm) {\n  var s = strm.state;\n\n  //_tr_flush_bits(s);\n  var len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  utils.arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n}\n\n\nfunction flush_block_only(s, last) {\n  trees._tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n}\n\n\nfunction put_byte(s, b) {\n  s.pending_buf[s.pending++] = b;\n}\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nfunction putShortMSB(s, b) {\n//  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n}\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nfunction read_buf(strm, buf, start, size) {\n  var len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  utils.arraySet(buf, strm.input, strm.next_in, len, start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n}\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nfunction longest_match(s, cur_match) {\n  var chain_length = s.max_chain_length;      /* max hash chain length */\n  var scan = s.strstart; /* current string */\n  var match;                       /* matched string */\n  var len;                           /* length of current match */\n  var best_len = s.prev_length;              /* best match length so far */\n  var nice_match = s.nice_match;             /* stop if match long enough */\n  var limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  var _win = s.window; // shortcut\n\n  var wmask = s.w_mask;\n  var prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  var strend = s.strstart + MAX_MATCH;\n  var scan_end1  = _win[scan + best_len - 1];\n  var scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n}\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nfunction fill_window(s) {\n  var _w_size = s.w_size;\n  var p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      utils.arraySet(s.window, s.window, _w_size, _w_size, 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + 1]) & s.hash_mask;\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    var curr = s.strstart + s.lookahead;\n//    var init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n}\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nfunction deflate_stored(s, flush) {\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  var max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    var max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n}\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nfunction deflate_fast(s, flush) {\n  var hash_head;        /* head of the hash chain */\n  var bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + 1]) & s.hash_mask;\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nfunction deflate_slow(s, flush) {\n  var hash_head;          /* head of hash chain */\n  var bflush;              /* set if current block must be flushed */\n\n  var max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = trees._tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n}\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nfunction deflate_rle(s, flush) {\n  var bflush;            /* set if current block must be flushed */\n  var prev;              /* byte at distance one to match */\n  var scan, strend;      /* scan goes up to strend for length of run */\n\n  var _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nfunction deflate_huff(s, flush) {\n  var bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nvar configuration_table;\n\nconfiguration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nfunction lm_init(s) {\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n}\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new utils.Buf16(HEAP_SIZE * 2);\n  this.dyn_dtree  = new utils.Buf16((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new utils.Buf16((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new utils.Buf16(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new utils.Buf16(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new utils.Buf16(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nfunction deflateResetKeep(strm) {\n  var s;\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH;\n  trees._tr_init(s);\n  return Z_OK;\n}\n\n\nfunction deflateReset(strm) {\n  var ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n}\n\n\nfunction deflateSetHeader(strm, head) {\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }\n  strm.state.gzhead = head;\n  return Z_OK;\n}\n\n\nfunction deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  var wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  var s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new utils.Buf8(s.w_size * 2);\n  s.head = new utils.Buf16(s.hash_size);\n  s.prev = new utils.Buf16(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n\n  //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n  //s->pending_buf = (uchf *) overlay;\n  s.pending_buf = new utils.Buf8(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n  s.d_buf = 1 * s.lit_bufsize;\n\n  //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n}\n\nfunction deflateInit(strm, level) {\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n}\n\n\nfunction deflate(strm, flush) {\n  var old_flush, s;\n  var beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  s.strm = strm; /* just in case */\n  old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n        );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n      var level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    var bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        trees._tr_align(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        trees._tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n}\n\nfunction deflateEnd(strm) {\n  var status;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n}\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nfunction deflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var s;\n  var str, n;\n  var wrap;\n  var avail;\n  var next;\n  var input;\n  var tmpDict;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n  wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    tmpDict = new utils.Buf8(s.w_size);\n    utils.arraySet(tmpDict, dictionary, dictLength - s.w_size, s.w_size, 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  avail = strm.avail_in;\n  next = strm.next_in;\n  input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    str = s.strstart;\n    n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK;\n}\n\n\nexports.deflateInit = deflateInit;\nexports.deflateInit2 = deflateInit2;\nexports.deflateReset = deflateReset;\nexports.deflateResetKeep = deflateResetKeep;\nexports.deflateSetHeader = deflateSetHeader;\nexports.deflate = deflate;\nexports.deflateEnd = deflateEnd;\nexports.deflateSetDictionary = deflateSetDictionary;\nexports.deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nexports.deflateBound = deflateBound;\nexports.deflateCopy = deflateCopy;\nexports.deflateParams = deflateParams;\nexports.deflatePending = deflatePending;\nexports.deflatePrime = deflatePrime;\nexports.deflateTune = deflateTune;\n*/\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nmodule.exports = GZheader;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nvar BAD = 30;       /* got a data error -- remain here until reset */\nvar TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nmodule.exports = function inflate_fast(strm, start) {\n  var state;\n  var _in;                    /* local strm.input */\n  var last;                   /* have enough input while in < last */\n  var _out;                   /* local strm.output */\n  var beg;                    /* inflate()'s initial strm.output */\n  var end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  var dmax;                   /* maximum distance from zlib header */\n//#endif\n  var wsize;                  /* window size or zero if not using window */\n  var whave;                  /* valid bytes in the window */\n  var wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  var s_window;               /* allocated sliding window, if wsize != 0 */\n  var hold;                   /* local strm.hold */\n  var bits;                   /* local strm.bits */\n  var lcode;                  /* local strm.lencode */\n  var dcode;                  /* local strm.distcode */\n  var lmask;                  /* mask for first level of length codes */\n  var dmask;                  /* mask for first level of distance codes */\n  var here;                   /* retrieved table entry */\n  var op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  var len;                    /* match length, unused bytes */\n  var dist;                   /* match distance */\n  var from;                   /* where to copy match from */\n  var from_source;\n\n\n  var input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils         = require('../utils/common');\nvar adler32       = require('./adler32');\nvar crc32         = require('./crc32');\nvar inflate_fast  = require('./inffast');\nvar inflate_table = require('./inftrees');\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\n//var Z_NO_FLUSH      = 0;\n//var Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\n//var Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\nvar Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\nvar Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nvar    HEAD = 1;       /* i: waiting for magic header */\nvar    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nvar    TIME = 3;       /* i: waiting for modification time (gzip) */\nvar    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nvar    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nvar    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nvar    NAME = 7;       /* i: waiting for end of file name (gzip) */\nvar    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nvar    HCRC = 9;       /* i: waiting for header crc (gzip) */\nvar    DICTID = 10;    /* i: waiting for dictionary check value */\nvar    DICT = 11;      /* waiting for inflateSetDictionary() call */\nvar        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\nvar        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nvar        STORED = 14;    /* i: waiting for stored size (length and complement) */\nvar        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nvar        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nvar        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nvar        LENLENS = 18;   /* i: waiting for code length code lengths */\nvar        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nvar            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nvar            LEN = 21;       /* i: waiting for length/lit/eob code */\nvar            LENEXT = 22;    /* i: waiting for length extra bits */\nvar            DIST = 23;      /* i: waiting for distance code */\nvar            DISTEXT = 24;   /* i: waiting for distance extra bits */\nvar            MATCH = 25;     /* o: waiting for output space to copy string */\nvar            LIT = 26;       /* o: waiting for output space to write literal */\nvar    CHECK = 27;     /* i: waiting for 32-bit check value */\nvar    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nvar    DONE = 29;      /* finished check, done -- remain here until reset */\nvar    BAD = 30;       /* got a data error -- remain here until reset */\nvar    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nvar    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_WBITS = MAX_WBITS;\n\n\nfunction zswap32(q) {\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n}\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new utils.Buf16(320); /* temporary storage for code lengths */\n  this.work = new utils.Buf16(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new utils.Buf32(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\nfunction inflateResetKeep(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new utils.Buf32(ENOUGH_LENS);\n  state.distcode = state.distdyn = new utils.Buf32(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK;\n}\n\nfunction inflateReset(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n}\n\nfunction inflateReset2(strm, windowBits) {\n  var wrap;\n  var state;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n}\n\nfunction inflateInit2(strm, windowBits) {\n  var ret;\n  var state;\n\n  if (!strm) { return Z_STREAM_ERROR; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n}\n\nfunction inflateInit(strm) {\n  return inflateInit2(strm, DEF_WBITS);\n}\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nvar virgin = true;\n\nvar lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\nfunction fixedtables(state) {\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    var sym;\n\n    lenfix = new utils.Buf32(512);\n    distfix = new utils.Buf32(32);\n\n    /* literal/length table */\n    sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n}\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nfunction updatewindow(strm, src, end, copy) {\n  var dist;\n  var state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new utils.Buf8(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    utils.arraySet(state.window, src, end - state.wsize, state.wsize, 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    utils.arraySet(state.window, src, end - copy, dist, state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      utils.arraySet(state.window, src, end - copy, copy, 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n}\n\nfunction inflate(strm, flush) {\n  var state;\n  var input, output;          // input/output buffers\n  var next;                   /* next input INDEX */\n  var put;                    /* next output INDEX */\n  var have, left;             /* available input and output */\n  var hold;                   /* bit buffer */\n  var bits;                   /* bits in bit buffer */\n  var _in, _out;              /* save starting available input and output */\n  var copy;                   /* number of stored or match bytes to copy */\n  var from;                   /* where to copy match bytes from */\n  var from_source;\n  var here = 0;               /* current decoding table entry */\n  var here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //var last;                   /* parent table entry */\n  var last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  var len;                    /* length to copy for repeats, bits to drop */\n  var ret;                    /* return code */\n  var hbuf = new utils.Buf8(4);    /* buffer for gzip header crc calculation */\n  var opts;\n\n  var n; // temporary var for NEED_BITS\n\n  var order = /* permutation of code lengths */\n    [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        state.flags = 0;           /* expect zlib header */\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        else if (len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n        state.dmax = 1 << len;\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Array(state.head.extra_len);\n              }\n              utils.arraySet(\n                state.head.extra,\n                input,\n                next,\n                // extra field is limited to 65536 bytes\n                // - no need for additional size check\n                copy,\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if (state.flags & 0x0200) {\n              state.check = crc32(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          utils.arraySet(output, input, next, copy, put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inflate_fast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if (_out) {\n            strm.adler = state.check =\n                /*UPDATE(state.check, put - _out, _out);*/\n                (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {\n      state.mode = MEM;\n      return Z_MEM_ERROR;\n    }\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n}\n\nfunction inflateEnd(strm) {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  var state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK;\n}\n\nfunction inflateGetHeader(strm, head) {\n  var state;\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK;\n}\n\nfunction inflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var state;\n  var dictid;\n  var ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK;\n}\n\nexports.inflateReset = inflateReset;\nexports.inflateReset2 = inflateReset2;\nexports.inflateResetKeep = inflateResetKeep;\nexports.inflateInit = inflateInit;\nexports.inflateInit2 = inflateInit2;\nexports.inflate = inflate;\nexports.inflateEnd = inflateEnd;\nexports.inflateGetHeader = inflateGetHeader;\nexports.inflateSetDictionary = inflateSetDictionary;\nexports.inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nexports.inflateCopy = inflateCopy;\nexports.inflateGetDictionary = inflateGetDictionary;\nexports.inflateMark = inflateMark;\nexports.inflatePrime = inflatePrime;\nexports.inflateSync = inflateSync;\nexports.inflateSyncPoint = inflateSyncPoint;\nexports.inflateUndermine = inflateUndermine;\n*/\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils = require('../utils/common');\n\nvar MAXBITS = 15;\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\nvar lbase = [ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n];\n\nvar lext = [ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n];\n\nvar dbase = [ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n];\n\nvar dext = [ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n];\n\nmodule.exports = function inflate_table(type, lens, lens_index, codes, table, table_index, work, opts)\n{\n  var bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  var len = 0;               /* a code's length in bits */\n  var sym = 0;               /* index of code symbols */\n  var min = 0, max = 0;          /* minimum and maximum code lengths */\n  var root = 0;              /* number of index bits for root table */\n  var curr = 0;              /* number of index bits for current table */\n  var drop = 0;              /* code bits to drop for sub-table */\n  var left = 0;                   /* number of prefix codes available */\n  var used = 0;              /* code entries in table used */\n  var huff = 0;              /* Huffman code */\n  var incr;              /* for incrementing code, index */\n  var fill;              /* index for replicating entries */\n  var low;               /* low bits for current root entry */\n  var mask;              /* mask for low root bits */\n  var next;             /* next available space in table */\n  var base = null;     /* base value table to use */\n  var base_index = 0;\n//  var shoextra;    /* extra bits table to use */\n  var end;                    /* use base and extra for symbol > end */\n  var count = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  var offs = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  var extra = null;\n  var extra_index = 0;\n\n  var here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS && used > ENOUGH_LENS) ||\n    (type === DISTS && used > ENOUGH_DISTS)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS && used > ENOUGH_LENS) ||\n        (type === DISTS && used > ENOUGH_DISTS)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\nvar utils = require('../utils/common');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//var Z_FILTERED          = 1;\n//var Z_HUFFMAN_ONLY      = 2;\n//var Z_RLE               = 3;\nvar Z_FIXED               = 4;\n//var Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nvar Z_BINARY              = 0;\nvar Z_TEXT                = 1;\n//var Z_ASCII             = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nvar STORED_BLOCK = 0;\nvar STATIC_TREES = 1;\nvar DYN_TREES    = 2;\n/* The three kinds of block type */\n\nvar MIN_MATCH    = 3;\nvar MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nvar D_CODES       = 30;\n/* number of distance codes */\n\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\n\nvar MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nvar MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nvar END_BLOCK   = 256;\n/* end of block literal code */\n\nvar REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nvar REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nvar REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nvar extra_lbits =   /* extra bits for each length code */\n  [0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];\n\nvar extra_dbits =   /* extra bits for each distance code */\n  [0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];\n\nvar extra_blbits =  /* extra bits for each bit length code */\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];\n\nvar bl_order =\n  [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nvar DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nvar static_ltree  = new Array((L_CODES + 2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nvar static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nvar _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nvar _length_code  = new Array(MAX_MATCH - MIN_MATCH + 1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nvar base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nvar base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nvar static_l_desc;\nvar static_d_desc;\nvar static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nfunction d_code(dist) {\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n}\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nfunction put_short(s, w) {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n}\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nfunction send_bits(s, value, length) {\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n}\n\n\nfunction send_code(s, c, tree) {\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n}\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nfunction bi_reverse(code, len) {\n  var res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nfunction bi_flush(s) {\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n}\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nfunction gen_bitlen(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  var tree            = desc.dyn_tree;\n  var max_code        = desc.max_code;\n  var stree           = desc.stat_desc.static_tree;\n  var has_stree       = desc.stat_desc.has_stree;\n  var extra           = desc.stat_desc.extra_bits;\n  var base            = desc.stat_desc.extra_base;\n  var max_length      = desc.stat_desc.max_length;\n  var h;              /* heap index */\n  var n, m;           /* iterate over the tree elements */\n  var bits;           /* bit length */\n  var xbits;          /* extra bits */\n  var f;              /* frequency */\n  var overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nfunction gen_codes(tree, max_code, bl_count)\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  var next_code = new Array(MAX_BITS + 1); /* next code value for each bit length */\n  var code = 0;              /* running code value */\n  var bits;                  /* bit index */\n  var n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    var len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n}\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nfunction tr_static_init() {\n  var n;        /* iterates over tree elements */\n  var bits;     /* bit counter */\n  var length;   /* length value */\n  var code;     /* code value */\n  var dist;     /* distance index */\n  var bl_count = new Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n}\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nfunction init_block(s) {\n  var n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nfunction bi_windup(s)\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n}\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nfunction copy_block(s, buf, len, header)\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  utils.arraySet(s.pending_buf, s.window, buf, len, s.pending);\n  s.pending += len;\n}\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nfunction smaller(tree, n, m, depth) {\n  var _n2 = n * 2;\n  var _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n}\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nfunction pqdownheap(s, tree, k)\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  var v = s.heap[k];\n  var j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n}\n\n\n// inlined manually\n// var SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nfunction compress_block(s, ltree, dtree)\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  var dist;           /* distance of matched string */\n  var lc;             /* match length or unmatched char (if dist == 0) */\n  var lx = 0;         /* running index in l_buf */\n  var code;           /* the code to send */\n  var extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n}\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nfunction build_tree(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  var tree     = desc.dyn_tree;\n  var stree    = desc.stat_desc.static_tree;\n  var has_stree = desc.stat_desc.has_stree;\n  var elems    = desc.stat_desc.elems;\n  var n, m;          /* iterate over heap elements */\n  var max_code = -1; /* largest code with non zero frequency */\n  var node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n}\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nfunction scan_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nfunction send_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nfunction build_bl_tree(s) {\n  var max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n}\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nfunction send_all_trees(s, lcodes, dcodes, blcodes)\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  var rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n}\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nfunction detect_data_type(s) {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  var black_mask = 0xf3ffc07f;\n  var n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n}\n\n\nvar static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nfunction _tr_init(s)\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n}\n\n\n/* ===========================================================================\n * Send a stored block\n */\nfunction _tr_stored_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n}\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nfunction _tr_align(s) {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n}\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nfunction _tr_flush_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  var opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  var max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n}\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nfunction _tr_tally(s, dist, lc)\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //var out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n}\n\nexports._tr_init  = _tr_init;\nexports._tr_stored_block = _tr_stored_block;\nexports._tr_flush_block  = _tr_flush_block;\nexports._tr_tally = _tr_tally;\nexports._tr_align = _tr_align;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nmodule.exports = ZStream;\n","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// Copyright 2023 the .NET Foundation\n// Licensed under the MIT License\n\n// The toplevel WorldWide Telescope WebGL engine API module.\n//\n// To maintain compatibility with a *lot* of legacy code, we export way more\n// types and interfaces than we would if we were starting from scratch, often\n// with confusing or misspelled names. So it goes.\n//\n// The import/exports here are in rough dependency order throughout the\n// codebase, although there are numerous places where circular references sneak\n// in.\n\nexport { ss } from \"./ss.js\";\n\nexport { Util } from \"./baseutil.js\";\n\nexport { CalD, DAY_OF_WEEK, DT } from \"./astrocalc/date.js\";\nexport { COR, C3D, CT } from \"./astrocalc/coordinate_transformation.js\";\nexport { ASEP } from \"./astrocalc/angular_separation.js\";\nexport { CAAEarth, VSC, } from \"./astrocalc/earth.js\";\nexport { CAAFK5 } from \"./astrocalc/fk5.js\";\nexport { NUC, CAANutation } from \"./astrocalc/nutation.js\";\nexport { CAASun } from \"./astrocalc/sun.js\";\nexport { CAAMercury } from \"./astrocalc/mercury.js\";\nexport { CAAVenus } from \"./astrocalc/venus.js\";\nexport { CAAMars } from \"./astrocalc/mars.js\";\nexport { CAAJupiter } from \"./astrocalc/jupiter.js\";\nexport { CAASaturn } from \"./astrocalc/saturn.js\";\nexport { CAAUranus } from \"./astrocalc/uranus.js\";\nexport { CAANeptune } from \"./astrocalc/neptune.js\";\nexport { CAAPluto, PlutoCoefficient1, PlutoCoefficient2 } from \"./astrocalc/pluto.js\";\nexport { CAAKepler } from \"./astrocalc/kepler.js\";\nexport { ABR, ACFT } from \"./astrocalc/aberration.js\";\nexport { DYT } from \"./astrocalc/dynamical_time.js\";\nexport { CAAEclipticalElementDetails, CAAEclipticalElements } from \"./astrocalc/ecliptical_elements.js\";\nexport { EPO } from \"./astrocalc/elements_planetary_orbit.js\";\nexport { EOE, EPD, EOD, EO, ELL } from \"./astrocalc/elliptical.js\";\nexport { EOT } from \"./astrocalc/equation_of_time.js\";\nexport { GMD, GMDS, GM } from \"./astrocalc/galilean_moons.js\";\nexport { CAAGlobe } from \"./astrocalc/globe.js\";\nexport { IFR } from \"./astrocalc/illuminated_fraction.js\";\nexport { INTP } from \"./astrocalc/interpolate.js\";\nexport { CAAMoon, MoonCoefficient1, MoonCoefficient2 } from \"./astrocalc/moon.js\";\nexport { MIFR } from \"./astrocalc/moon_illuminated_fraction.js\";\nexport { CAAMoonNodes } from \"./astrocalc/moon_nodes.js\";\nexport { CAAMoonPerigeeApogee, MPAC } from \"./astrocalc/moon_perigee_apogee.js\";\nexport { CAAMoonPhases } from \"./astrocalc/moon_phases.js\";\nexport { CAAParallax, CAATopocentricEclipticDetails } from \"./astrocalc/parallax.js\";\nexport { CAASidereal } from \"./astrocalc/sidereal.js\";\nexport { CAAPhysicalJupiterDetails, CAAPhysicalJupiter } from \"./astrocalc/physical_jupiter.js\";\nexport { CAAPhysicalMarsDetails, CAAPhysicalMars } from \"./astrocalc/physical_mars.js\";\nexport { CAAPhysicalSunDetails, CAAPhysicalSun } from \"./astrocalc/physical_sun.js\";\nexport { CAAPrecession } from \"./astrocalc/precession.js\";\nexport { CAARiseTransitSetDetails, CAARiseTransitSet } from \"./astrocalc/rise_transit_set.js\";\nexport { CAASaturnRingDetails, CAASaturnRings } from \"./astrocalc/saturn_rings.js\";\nexport { CAAStellarMagnitudes } from \"./astrocalc/stellar_magnitudes.js\";\n\nexport { BlendState } from \"./blend_state.js\";\nexport { Color, Colors } from \"./color.js\";\nexport { URLHelpers, URLRewriteMode } from \"./url_helpers.js\";\n\nexport {\n    LocationHint,\n    PositionTexture,\n    PositionColoredTextured,\n    PositionColored,\n    PositionNormalTexturedTangent,\n    Vector3d,\n    Vector2d,\n    Matrix3d,\n    Matrix2d,\n    DoubleUtilities,\n    PlaneD,\n    Vector4d,\n    PositionNormalTexturedX2,\n    PositionNormalTextured,\n    SphereHull,\n    ConvexHull\n} from \"./double3d.js\";\n\nexport {\n    Rectangle,\n    Guid,\n    Mouse,\n    Language,\n    Cursor,\n    Cursors,\n    Keys,\n    SelectLink,\n    PopupVolume,\n    PopupColorPicker,\n    OverlayProperties,\n    DialogResult,\n} from \"./util.js\";\n\nexport { AstroRaDec, RiseSetDetails, AstroCalc } from \"./astrocalc.js\";\n\nexport {\n    ShortIndexBuffer,\n    IndexBuffer,\n    VertexBufferBase,\n    PositionVertexBuffer,\n    PositionNormalTexturedVertexBuffer,\n    PositionNormalTexturedTangentVertexBuffer,\n} from \"./graphics/gl_buffers.js\"\n\nexport { Texture } from \"./graphics/texture.js\";\nexport { Tessellator } from \"./graphics/tessellator.js\";\n\nexport {\n    SimpleLineShader,\n    SimpleLineShader2D,\n    OrbitLineShader,\n    LineShaderNormalDates,\n    TimeSeriesPointSpriteShader,\n    KeplerPointSpriteShader,\n    EllipseShader,\n    ModelShader,\n    ModelShaderTan,\n    TileShader,\n    FitsShader,\n    ImageShader,\n    ImageShader2,\n    SpriteShader,\n    ShapeSpriteShader,\n    TextShader,\n} from \"./graphics/shaders.js\";\n\nexport {\n    CullMode,\n    PointScaleTypes,\n    DataItem,\n    Dates,\n    SimpleLineList,\n    OrbitLineList,\n    LineList,\n    TriangleList,\n    TriangleFanList,\n    PointList,\n    TimeSeriesLineVertex,\n    TimeSeriesPointVertex,\n} from \"./graphics/primitives3d.js\";\n\n// These are new, post-C# APIs that we wouldn't normally expose, but they\n// support the test suite.\nexport {\n    set_tilePrepDevice,\n    set_useGlVersion2\n} from \"./render_globals.js\";\n\nexport { Bitmap } from \"./utilities/bitmap.js\";\n\nexport {\n    ContextMenuStrip,\n    ToolStripMenuItem,\n    ToolStripSeparator,\n    TagMe,\n} from \"./utilities/context_menu_strip.js\";\n\nexport { BinaryReader } from \"./utilities/binary_reader.js\";\nexport { SimpleInput } from \"./utilities/simple_input.js\";\nexport { XmlTextWriter, Formatting } from \"./utilities/xml_text_writer.js\";\n\nexport { Coordinates } from \"./coordinates.js\";\nexport { FastMath } from \"./fast_math.js\";\nexport { HealpixTables } from \"./healpix_tables.js\";\nexport { HealpixUtils } from \"./healpix_utils.js\";\nexport { Hploc } from \"./hploc.js\";\nexport { Fxyf } from \"./fxyf.js\";\nexport {\n    IThumbnail,\n    IPlace,\n    IUiController,\n    IViewMover,\n    IUIServicesCallbacks,\n    ISettings,\n    IUndoStep,\n} from \"./interfaces.js\";\nexport { Annotation, Circle, Poly, PolyLine } from \"./annotation.js\";\nexport { SolarSystemObjects, InterpolationType, CameraParameters } from \"./camera_parameters.js\";\nexport { ConstellationFilter } from \"./constellation_filter.js\";\nexport { FitsProperties, ScaleTypes } from \"./fits_properties.js\";\nexport { Star, Galaxy } from \"./star.js\";\nexport { UiTools } from \"./ui_tools.js\";\nexport { StateType, WebFile } from \"./web_file.js\";\n\nexport { ColorMapContainer } from \"./layers/color_map_container.js\";\nexport { WcsImage } from \"./layers/wcs_image.js\";\nexport { FitsImage } from \"./layers/fits_image.js\";\nexport {\n    DataTypes,\n    ScaleMap,\n    ScaleLinear,\n    ScaleLog,\n    ScalePow,\n    ScaleSqrt,\n    HistogramEqualization,\n    FitsImageJs,\n} from \"./layers/fits_image_js.js\";\nexport { FitsImageTile } from \"./layers/fits_image_tile.js\";\n\nexport { Tile } from \"./tile.js\";\nexport { RenderTriangle } from \"./render_triangle.js\";\nexport { EquirectangularTile } from \"./equirectangular_tile.js\";\nexport { HealpixTile, Xyf } from \"./healpix_tile.js\";\nexport { MercatorTile } from \"./mercator_tile.js\";\nexport { PlotTile } from \"./plot_tile.js\";\nexport { LatLngEdges, TangentTile } from \"./tangent_tile.js\";\nexport { SkyImageTile } from \"./sky_image_tile.js\";\nexport { ToastTile } from \"./toast_tile.js\";\nexport { ProjectionType, ImageSetType, BandPass, Imageset } from \"./imageset.js\";\nexport { Settings, SettingParameter, StockSkyOverlayTypes } from \"./settings.js\";\nexport { TextBorderStyle, TextObject } from \"./tours/text_object.js\";\nexport { Alignment, Text3dBatch, Text3d, GlyphItem, GlyphCache } from \"./sky_text.js\";\nexport { PointType, Lineset, Linepoint, Constellations } from \"./constellations.js\";\nexport { SpaceTimeController } from \"./space_time_controller.js\";\nexport { KeplerianElements, BodyAngles, Planets } from \"./planets.js\";\nexport { Place, Classification } from \"./place.js\";\nexport { FolderUp } from \"./folder_up.js\";\nexport { Grids } from \"./grids.js\";\nexport { KeplerVertex } from \"./kepler_vertex.js\";\nexport { Pointing } from \"./pointing.js\";\nexport { Tour } from \"./tour.js\";\nexport { VideoOutputType } from \"./video_output_type.js\";\nexport { ViewMoverKenBurnsStyle } from \"./view_mover.js\";\nexport { VizLayer } from \"./viz_layer.js\";\nexport { ColorPicker } from \"./utilities/color_picker.js\";\nexport { Dialog } from \"./utilities/dialog.js\";\nexport { Histogram } from \"./utilities/histogram.js\";\n\nexport { Layer, DomainValue, AltUnits, FadeType } from \"./layers/layer.js\";\nexport {\n    LayerUI,\n    LayerUIMenuItem,\n    LayerUITreeNode,\n} from \"./layers/layer_ui.js\";\n\n// To keep API compatibility, we can't fix this typo.\nexport { GreatCirlceRouteLayer } from \"./layers/great_circle_route_layer.js\";\n\nexport { GridLayer } from \"./layers/grid_layer.js\";\nexport { ImageSetLayer } from \"./layers/imageset_layer.js\";\nexport {\n    Group,\n    Material,\n    Mesh,\n    Object3d,\n    ObjectNode,\n    Object3dLayer,\n    Object3dLayerUI,\n} from \"./layers/object3d.js\";\nexport { Orbit, EllipseRenderer } from \"./layers/orbit.js\";\nexport { ReferenceFrame, ReferenceFrameTypes } from \"./layers/reference_frame.js\";\nexport { OrbitLayer, OrbitLayerUI } from \"./layers/orbit_layer.js\";\nexport { Table } from \"./layers/table.js\";\nexport { Primitives, VoTable, VoRow, VoColumn } from \"./layers/vo_table.js\";\n\nexport { FileEntry, FileCabinet } from \"./tours/file_cabinet.js\";\nexport {\n    OverlayAnchor,\n    AudioType,\n    ShapeType,\n    LoopTypes,\n    Overlay,\n    AudioOverlay,\n    BitmapOverlay,\n    FlipbookOverlay,\n    ShapeOverlay,\n    TextOverlay,\n} from \"./tours/overlay.js\";\nexport { Selection, SelectionAnchor } from \"./tours/selection.js\";\nexport {\n    TransitionType,\n    TourStop,\n    LayerInfo,\n    UndoTourStopChange,\n} from \"./tours/tour_stop.js\";\nexport {\n    Undo,\n    UndoStep,\n    UndoTourSlidelistChange,\n    UndoTourPropertiesChange,\n} from \"./tours/undo.js\";\nexport {\n    TourEditor,\n    OverlayList,\n    TourEdit,\n    SoundEditor,\n    TourStopList,\n    TimeLine,\n} from \"./tours/tour_editor.js\";\nexport { TourPlayer, MasterTime } from \"./tours/tour_player.js\";\n\nexport { ISSLayer } from \"./layers/iss_layer.js\";\nexport {\n    CoordinatesTypes,\n    AltTypes,\n    MarkerMixes,\n    ColorMaps,\n    PlotTypes,\n    MarkerScales,\n    RAUnits,\n    TimeSeriesLayer,\n} from \"./layers/time_series_layer.js\";\nexport {\n    KmlCoordinate,\n    KmlLineList,\n    PushPin,\n    SpreadSheetLayer,\n    CatalogSpreadSheetLayer,\n} from \"./layers/spreadsheet_layer.js\";\nexport { VoTableLayer } from \"./layers/vo_table_layer.js\";\nexport {\n    ReferenceFrames,\n    LayerManager,\n    LayerMap,\n    SkyOverlays,\n    GroundOverlayLayer,\n    FrameTarget,\n} from \"./layers/layer_manager.js\";\n\n// When we import this module, we install the `Layer.fromXml()` function, which\n// depends on the specific layer types established above. I am probably being\n// too conservative about circular module dependencies but there are worse ways\n// to be.\nimport { layerFromXml as _ } from \"./layers/from_xml.js\";\n\n// And when we import *this* module, we also attach some instances to the\n// LayerManager class. I'm not sure if they're even used in the webclient, which\n// would be the only place that reasonably would.\nexport {\n    FrameWizard,\n    ReferenceFrameProps,\n    GreatCircleDialog,\n    DataVizWizard,\n} from \"./layers/manager_dialogs.js\";\n\nexport { UserLevel, TourDocument } from \"./tours/tour_document.js\";\nexport { TourEditTab } from \"./tours/tour_edit.js\";\n\nexport {\n    FolderGroup,\n    FolderRefreshType,\n    FolderType,\n    Folder,\n} from \"./folder.js\";\nexport { FolderBrowser, ThumbnailSize } from \"./folder_browser.js\";\nexport { HipsProperties } from \"./hips_properties.js\";\nexport { InViewReturnMessage, RenderContext } from \"./render_context.js\";\nexport {\n    SlideChangedEventArgs,\n    ArrivedEventArgs,\n    AnnotationClickEventArgs,\n    CollectionLoadedEventArgs,\n    ScriptInterface,\n} from \"./script_interface.js\";\n\nexport {\n    WWTControl,\n    WWTControlBuilder,\n    WWTElementEvent,\n} from \"./wwt_control.js\";\n\nexport {\n    FolderDownloadAction,\n    Wtml,\n} from \"./wtml.js\";\n\n\n// GFX\n//\n// This was a global holder for constants used in the AstroCalc component. We've\n// moved those constants into their specific modules, but still expose the name\n// just in case someone actually referenced it. Since we've removed all of the\n// constants that it contains, though, if someone was reckless enough to try to\n// use this variable their usage would almost surely be broken by now.\n\nimport { registerType } from \"./typesystem.js\";\n\nexport function GFX() { }\n\nregisterType(\"GFX\", [GFX, null, null]);\n\n\n// Nontrivial initializations.\n\nimport { ss } from \"./ss.js\";\nimport { set_globalRenderContext } from \"./render_globals.js\";\nimport { set_globalWWTControl } from \"./data_globals.js\";\nimport { KeplerVertex } from \"./kepler_vertex.js\";\nimport { SpaceTimeController } from \"./space_time_controller.js\";\nimport { Folder } from \"./folder.js\";\nimport { RenderContext } from \"./render_context.js\";\nimport { WWTControl } from \"./wwt_control.js\";\n\nWWTControl.exploreRoot = new Folder();\nWWTControl.singleton = new WWTControl();\nWWTControl.singleton.renderContext = new RenderContext();\nset_globalWWTControl(WWTControl.singleton);\nset_globalRenderContext(WWTControl.singleton.renderContext);\n\nSpaceTimeController._metaNow = ss.now();\nSpaceTimeController._now = ss.now();\nSpaceTimeController.last = SpaceTimeController.get_metaNow();\nSpaceTimeController.updateClock();\n\nKeplerVertex.baseDate = ss.truncate(SpaceTimeController.utcToJulian(ss.now()));\n"],"names":[],"sourceRoot":""}